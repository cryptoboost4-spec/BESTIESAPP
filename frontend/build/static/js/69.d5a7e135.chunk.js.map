{"version":3,"file":"static/js/69.d5a7e135.chunk.js","mappings":"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","sources":["pages/AlertViewPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { db, auth } from '../services/firebase';\r\nimport { doc, getDoc, addDoc, collection, query, where, getDocs, Timestamp } from 'firebase/firestore';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst AlertViewPage = () => {\r\n  const { alertId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [alert, setAlert] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [myResponse, setMyResponse] = useState(null);\r\n  const [responding, setResponding] = useState(false);\r\n  const [showNoteModal, setShowNoteModal] = useState(false);\r\n  const [responseNote, setResponseNote] = useState('');\r\n  const [pendingResponseType, setPendingResponseType] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadAlert();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [alertId]);\r\n\r\n  const loadAlert = async () => {\r\n    try {\r\n      const currentUser = auth.currentUser;\r\n      if (!currentUser) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      // Try to load as check-in first\r\n      let alertDoc = await getDoc(doc(db, 'checkins', alertId));\r\n      let alertType = 'checkin';\r\n\r\n      // If not found, try emergency SOS\r\n      if (!alertDoc.exists()) {\r\n        alertDoc = await getDoc(doc(db, 'emergency_sos', alertId));\r\n        alertType = 'sos';\r\n      }\r\n\r\n      if (!alertDoc.exists()) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const alertData = { id: alertDoc.id, ...alertDoc.data(), type: alertType };\r\n      setAlert(alertData);\r\n\r\n      // Load user data\r\n      const userDoc = await getDoc(doc(db, 'users', alertData.userId));\r\n      if (userDoc.exists()) {\r\n        setUser(userDoc.data());\r\n      }\r\n\r\n      // Check if current user has already responded\r\n      const responsesQuery = query(\r\n        collection(db, 'alert_responses'),\r\n        where('alertId', '==', alertId),\r\n        where('responderId', '==', currentUser.uid)\r\n      );\r\n      const responsesSnap = await getDocs(responsesQuery);\r\n\r\n      if (!responsesSnap.empty) {\r\n        setMyResponse(responsesSnap.docs[0].data());\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading alert:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResponse = async (responseType, withNote = false) => {\r\n    if (withNote) {\r\n      setPendingResponseType(responseType);\r\n      setShowNoteModal(true);\r\n      return;\r\n    }\r\n\r\n    await recordResponse(responseType, '');\r\n  };\r\n\r\n  const recordResponse = async (responseType, note) => {\r\n    const currentUser = auth.currentUser;\r\n    if (!currentUser || !alert) return;\r\n\r\n    setResponding(true);\r\n    try {\r\n      const now = Timestamp.now();\r\n      const alertCreatedAt = alert.createdAt || alert.alertedAt || now;\r\n      const responseTime = Math.floor((now.toMillis() - alertCreatedAt.toMillis()) / 1000);\r\n\r\n      // Create alert response\r\n      await addDoc(collection(db, 'alert_responses'), {\r\n        alertId: alertId,\r\n        alertType: alert.type,\r\n        userId: alert.userId,\r\n        responderId: currentUser.uid,\r\n        responseType: responseType,\r\n        responseTime: responseTime,\r\n        note: note || null,\r\n        createdAt: now,\r\n      });\r\n\r\n      // Create interaction record\r\n      await addDoc(collection(db, 'interactions'), {\r\n        userId: alert.userId,\r\n        bestieId: currentUser.uid,\r\n        type: 'alert_response',\r\n        checkInId: alert.type === 'checkin' ? alertId : null,\r\n        alertId: alertId,\r\n        metadata: {\r\n          responseTime: responseTime,\r\n          action: responseType,\r\n        },\r\n        createdAt: now,\r\n      });\r\n\r\n      setMyResponse({ responseType, note, createdAt: now });\r\n      setShowNoteModal(false);\r\n      setResponseNote('');\r\n      setPendingResponseType(null);\r\n\r\n      const messages = {\r\n        acknowledged: 'Response recorded - they\\'ll know you saw this',\r\n        called: 'Great! Hope they\\'re okay',\r\n        on_my_way: 'Stay safe! They\\'ll be glad you\\'re coming',\r\n        contacted_them: 'Thanks for reaching out to them',\r\n      };\r\n\r\n      toast.success(messages[responseType] || 'Response recorded');\r\n    } catch (error) {\r\n      console.error('Error recording response:', error);\r\n      toast.error('Failed to record response');\r\n    } finally {\r\n      setResponding(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-pattern flex items-center justify-center\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!alert) {\r\n    return (\r\n      <div className=\"min-h-screen bg-pattern\">\r\n        <div className=\"max-w-2xl mx-auto p-4 text-center mt-20\">\r\n          <div className=\"text-6xl mb-4\">‚ö†Ô∏è</div>\r\n          <h1 className=\"text-2xl font-display text-text-primary mb-2\">Alert Not Found</h1>\r\n          <p className=\"text-text-secondary mb-6\">This alert may have been resolved or removed.</p>\r\n          <button onClick={() => navigate('/')} className=\"btn btn-primary\">\r\n            Go Home\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const isCheckIn = alert.type === 'checkin';\r\n  const isSOS = alert.type === 'sos';\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-pattern\">\r\n\r\n      <div className=\"max-w-2xl mx-auto p-4 pb-20\">\r\n        {/* Alert Header */}\r\n        <div className={`card p-6 mb-6 ${isSOS ? 'bg-red-50 border-2 border-red-500' : 'bg-yellow-50 border-2 border-yellow-500'}`}>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-6xl mb-4\">{isSOS ? 'üÜò' : 'üö®'}</div>\r\n            <h1 className=\"text-3xl font-display text-text-primary mb-2\">\r\n              {isSOS ? 'EMERGENCY ALERT' : 'SAFETY ALERT'}\r\n            </h1>\r\n            <p className=\"text-lg text-text-secondary\">\r\n              {user?.displayName || 'A friend'} {isSOS ? 'triggered an emergency SOS' : \"hasn't checked in\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Alert Details */}\r\n        <div className=\"card p-6 mb-6\">\r\n          <h2 className=\"text-xl font-display text-text-primary mb-4\">Details</h2>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <div className=\"text-sm text-text-secondary mb-1\">Person</div>\r\n              <div className=\"font-semibold text-text-primary flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white\">\r\n                  {user?.displayName?.[0] || '?'}\r\n                </div>\r\n                {user?.displayName || 'Unknown'}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"text-sm text-text-secondary mb-1\">Location</div>\r\n              <div className=\"font-semibold text-text-primary\">\r\n                {alert.location || 'Unknown'}\r\n              </div>\r\n            </div>\r\n\r\n            {isCheckIn && alert.meetingWith && (\r\n              <div>\r\n                <div className=\"text-sm text-text-secondary mb-1\">Meeting With</div>\r\n                <div className=\"font-semibold text-text-primary\">{alert.meetingWith}</div>\r\n              </div>\r\n            )}\r\n\r\n            {isCheckIn && alert.notes && (\r\n              <div>\r\n                <div className=\"text-sm text-text-secondary mb-1\">Notes</div>\r\n                <div className=\"font-semibold text-text-primary\">{alert.notes}</div>\r\n              </div>\r\n            )}\r\n\r\n            {alert.photoURL && (\r\n              <div>\r\n                <div className=\"text-sm text-text-secondary mb-1\">Photo</div>\r\n                <img\r\n                  src={alert.photoURL}\r\n                  alt=\"Check-in\"\r\n                  className=\"w-full rounded-xl max-h-64 object-cover\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div>\r\n              <div className=\"text-sm text-text-secondary mb-1\">Time</div>\r\n              <div className=\"font-semibold text-text-primary\">\r\n                {alert.createdAt?.toDate().toLocaleString()}\r\n              </div>\r\n            </div>\r\n\r\n            {isCheckIn && alert.alertTime && (\r\n              <div>\r\n                <div className=\"text-sm text-text-secondary mb-1\">Expected Check-In By</div>\r\n                <div className=\"font-semibold text-text-primary\">\r\n                  {alert.alertTime.toDate().toLocaleTimeString()}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Instructions */}\r\n        <div className=\"card p-6 bg-primary/10\">\r\n          <h3 className=\"font-display text-lg text-text-primary mb-3\">\r\n            What to do:\r\n          </h3>\r\n          <ul className=\"space-y-2 text-text-secondary\">\r\n            <li className=\"flex gap-2\">\r\n              <span>1.</span>\r\n              <span>Try calling or messaging {user?.displayName}</span>\r\n            </li>\r\n            <li className=\"flex gap-2\">\r\n              <span>2.</span>\r\n              <span>Check if they're at the location listed above</span>\r\n            </li>\r\n            <li className=\"flex gap-2\">\r\n              <span>3.</span>\r\n              <span>If you can't reach them, consider contacting local authorities</span>\r\n            </li>\r\n            {isSOS && (\r\n              <li className=\"flex gap-2 font-semibold text-red-600\">\r\n                <span>‚ö†Ô∏è</span>\r\n                <span>This is an EMERGENCY - act immediately!</span>\r\n              </li>\r\n            )}\r\n          </ul>\r\n        </div>\r\n\r\n        {/* Response Tracking */}\r\n        {myResponse ? (\r\n          <div className=\"card p-6 mt-6 bg-green-50 border-2 border-green-500\">\r\n            <h3 className=\"font-display text-lg text-text-primary mb-2 flex items-center gap-2\">\r\n              <span className=\"text-2xl\">‚úÖ</span>\r\n              You responded to this alert\r\n            </h3>\r\n            <div className=\"text-sm text-text-secondary space-y-1\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"font-semibold\">Action:</span>\r\n                <span className=\"capitalize\">{myResponse.responseType.replace(/_/g, ' ')}</span>\r\n              </div>\r\n              {myResponse.note && (\r\n                <div className=\"flex items-start gap-2 mt-2\">\r\n                  <span className=\"font-semibold\">Note:</span>\r\n                  <span className=\"flex-1\">{myResponse.note}</span>\r\n                </div>\r\n              )}\r\n              <div className=\"text-xs text-gray-500 mt-2\">\r\n                Responded {myResponse.createdAt?.toDate().toLocaleString()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"card p-6 mt-6 bg-gradient-to-br from-purple-50 to-pink-50\">\r\n            <h3 className=\"font-display text-lg text-text-primary mb-4 text-center\">\r\n              Let them know you're here to help\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n              <button\r\n                onClick={() => handleResponse('acknowledged')}\r\n                disabled={responding}\r\n                className=\"btn btn-secondary py-3 flex flex-col items-center gap-1\"\r\n              >\r\n                <span className=\"text-2xl\">üëÄ</span>\r\n                <span className=\"text-sm font-semibold\">I saw this</span>\r\n              </button>\r\n              <button\r\n                onClick={() => handleResponse('called')}\r\n                disabled={responding}\r\n                className=\"btn bg-blue-500 hover:bg-blue-600 text-white py-3 flex flex-col items-center gap-1\"\r\n              >\r\n                <span className=\"text-2xl\">üìû</span>\r\n                <span className=\"text-sm font-semibold\">I called them</span>\r\n              </button>\r\n              <button\r\n                onClick={() => handleResponse('on_my_way')}\r\n                disabled={responding}\r\n                className=\"btn bg-orange-500 hover:bg-orange-600 text-white py-3 flex flex-col items-center gap-1\"\r\n              >\r\n                <span className=\"text-2xl\">üöó</span>\r\n                <span className=\"text-sm font-semibold\">On my way</span>\r\n              </button>\r\n              <button\r\n                onClick={() => handleResponse('contacted_them')}\r\n                disabled={responding}\r\n                className=\"btn bg-green-500 hover:bg-green-600 text-white py-3 flex flex-col items-center gap-1\"\r\n              >\r\n                <span className=\"text-2xl\">‚úÖ</span>\r\n                <span className=\"text-sm font-semibold\">Contacted</span>\r\n              </button>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowNoteModal(true)}\r\n              disabled={responding}\r\n              className=\"w-full btn btn-outline text-sm py-2\"\r\n            >\r\n              üìù Add a note about what you did\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Contact Info */}\r\n        {user?.phoneNumber && (\r\n          <div className=\"mt-4\">\r\n            <a\r\n              href={`tel:${user.phoneNumber}`}\r\n              className=\"w-full btn btn-primary text-lg py-4 block text-center\"\r\n            >\r\n              üìû Call {user.displayName}\r\n            </a>\r\n          </div>\r\n        )}\r\n\r\n        {/* Note Modal */}\r\n        {showNoteModal && (\r\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setShowNoteModal(false)}>\r\n            <div className=\"bg-white rounded-xl p-6 max-w-md w-full\" onClick={(e) => e.stopPropagation()}>\r\n              <h3 className=\"text-xl font-display mb-4\">Add a note</h3>\r\n              <textarea\r\n                value={responseNote}\r\n                onChange={(e) => setResponseNote(e.target.value)}\r\n                placeholder=\"What did you do to help? (optional)\"\r\n                className=\"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none min-h-32 resize-none\"\r\n              />\r\n              <div className=\"flex gap-3 mt-4\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowNoteModal(false);\r\n                    setResponseNote('');\r\n                    setPendingResponseType(null);\r\n                  }}\r\n                  className=\"flex-1 btn btn-secondary\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={() => recordResponse(pendingResponseType || 'acknowledged', responseNote)}\r\n                  disabled={responding}\r\n                  className=\"flex-1 btn btn-primary\"\r\n                >\r\n                  {responding ? 'Saving...' : 'Save Response'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AlertViewPage;\r\n"],"names":["AlertViewPage","_user$displayName","_alert$createdAt","_myResponse$createdAt","alertId","useParams","navigate","useNavigate","alert","setAlert","useState","user","setUser","loading","setLoading","myResponse","setMyResponse","responding","setResponding","showNoteModal","setShowNoteModal","responseNote","setResponseNote","pendingResponseType","setPendingResponseType","useEffect","loadAlert","async","currentUser","auth","alertDoc","getDoc","doc","db","alertType","exists","alertData","_objectSpread","id","data","type","userDoc","userId","responsesQuery","query","collection","where","uid","responsesSnap","getDocs","empty","docs","error","console","handleResponse","responseType","arguments","length","undefined","recordResponse","note","now","Timestamp","alertCreatedAt","createdAt","alertedAt","responseTime","Math","floor","toMillis","addDoc","responderId","bestieId","checkInId","metadata","action","messages","acknowledged","called","on_my_way","contacted_them","toast","success","_jsx","className","children","_jsxs","onClick","isCheckIn","isSOS","concat","displayName","location","meetingWith","notes","photoURL","src","alt","toDate","toLocaleString","alertTime","toLocaleTimeString","replace","disabled","phoneNumber","href","e","stopPropagation","value","onChange","target","placeholder"],"sourceRoot":""}