{"version":3,"file":"static/js/298.978c0eee.chunk.js","mappings":"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","sources":["services/connectionStrength.js","pages/CircleHealthPage.jsx"],"sourcesContent":["import { db } from './firebase';\nimport {\n  collection,\n  query,\n  where,\n  getDocs,\n  doc,\n  getDoc,\n  orderBy,\n  limit,\n  Timestamp\n} from 'firebase/firestore';\n\n/**\n * Connection Strength Service\n *\n * Calculates real connection strength between besties based on actual behavior:\n * - Alert response times\n * - Check-in selection frequency\n * - Featured circle inclusion\n * - Relationship duration\n * - Recent interaction recency\n *\n * Returns a score from 0-100 where:\n * - 90-100: Incredible connection (always there when needed)\n * - 70-89: Strong connection (consistently supportive)\n * - 50-69: Good connection (reliable but room for growth)\n * - 30-49: Developing connection (occasional interaction)\n * - 0-29: Weak connection (rarely interact)\n */\n\nconst ONE_DAY = 24 * 60 * 60 * 1000;\n// const ONE_WEEK = 7 * ONE_DAY;\n// const ONE_MONTH = 30 * ONE_DAY;\n\n/**\n * Calculate comprehensive connection strength between two users\n */\nexport const calculateConnectionStrength = async (userId, bestieId) => {\n  try {\n    const scores = {\n      alertResponse: 0,      // 35 points - most important\n      checkInFrequency: 0,   // 25 points\n      featuredCircle: 0,     // 20 points\n      recency: 0,            // 15 points\n      duration: 0,           // 5 points\n    };\n\n    // Run all calculations in parallel for speed\n    const [\n      alertResponseScore,\n      checkInFrequencyScore,\n      featuredCircleScore,\n      recencyScore,\n      durationScore,\n    ] = await Promise.all([\n      calculateAlertResponseScore(userId, bestieId),\n      calculateCheckInFrequencyScore(userId, bestieId),\n      calculateFeaturedCircleScore(userId, bestieId),\n      calculateRecencyScore(userId, bestieId),\n      calculateDurationScore(userId, bestieId),\n    ]);\n\n    scores.alertResponse = alertResponseScore;\n    scores.checkInFrequency = checkInFrequencyScore;\n    scores.featuredCircle = featuredCircleScore;\n    scores.recency = recencyScore;\n    scores.duration = durationScore;\n\n    const totalScore = Math.round(\n      scores.alertResponse +\n      scores.checkInFrequency +\n      scores.featuredCircle +\n      scores.recency +\n      scores.duration\n    );\n\n    return {\n      total: Math.min(100, totalScore),\n      breakdown: scores,\n      level: getConnectionLevel(totalScore),\n    };\n  } catch (error) {\n    console.error('Error calculating connection strength:', error);\n    return {\n      total: 0,\n      breakdown: {},\n      level: 'unknown',\n    };\n  }\n};\n\n/**\n * Alert Response Score (0-35 points)\n * The most important metric - do they show up when you need them?\n */\nconst calculateAlertResponseScore = async (userId, bestieId) => {\n  try {\n    // Get all alert responses where bestieId responded to userId's alerts\n    const responsesQuery = query(\n      collection(db, 'alert_responses'),\n      where('userId', '==', userId),\n      where('responderId', '==', bestieId)\n    );\n    const responsesSnap = await getDocs(responsesQuery);\n\n    if (responsesSnap.empty) {\n      // No alerts yet - check if they've been in check-ins together as a proxy\n      const interactionsQuery = query(\n        collection(db, 'interactions'),\n        where('userId', '==', userId),\n        where('bestieId', '==', bestieId),\n        where('type', '==', 'check_in_together')\n      );\n      const interactionsSnap = await getDocs(interactionsQuery);\n\n      // Give some credit for being selected as guardian\n      return Math.min(15, interactionsSnap.size * 3);\n    }\n\n    const responses = responsesSnap.docs.map(doc => doc.data());\n\n    // Calculate average response time (in minutes)\n    const avgResponseTime = responses.reduce((sum, r) => sum + r.responseTime, 0) / responses.length / 60;\n\n    // Score based on response time\n    let timeScore = 0;\n    if (avgResponseTime < 5) timeScore = 20;        // < 5 min: instant\n    else if (avgResponseTime < 15) timeScore = 17;  // < 15 min: very fast\n    else if (avgResponseTime < 30) timeScore = 14;  // < 30 min: fast\n    else if (avgResponseTime < 60) timeScore = 10;  // < 1 hour: decent\n    else if (avgResponseTime < 180) timeScore = 5;  // < 3 hours: slow\n    else timeScore = 2;                             // > 3 hours: very slow\n\n    // Bonus for response count (reliability)\n    const reliabilityScore = Math.min(15, responses.length * 2);\n\n    return timeScore + reliabilityScore;\n  } catch (error) {\n    console.error('Error calculating alert response score:', error);\n    return 0;\n  }\n};\n\n/**\n * Check-In Frequency Score (0-25 points)\n * How often do they include each other in check-ins?\n */\nconst calculateCheckInFrequencyScore = async (userId, bestieId) => {\n  try {\n    // Get check-ins where userId selected bestieId as guardian (last 90 days)\n    const threeMonthsAgo = Timestamp.fromDate(new Date(Date.now() - 90 * ONE_DAY));\n\n    const checkInsQuery = query(\n      collection(db, 'checkins'),\n      where('userId', '==', userId),\n      where('bestieIds', 'array-contains', bestieId),\n      where('createdAt', '>=', threeMonthsAgo)\n    );\n    const checkInsSnap = await getDocs(checkInsQuery);\n\n    // Get reverse direction (bestieId selecting userId)\n    const reverseCheckInsQuery = query(\n      collection(db, 'checkins'),\n      where('userId', '==', bestieId),\n      where('bestieIds', 'array-contains', userId),\n      where('createdAt', '>=', threeMonthsAgo)\n    );\n    const reverseCheckInsSnap = await getDocs(reverseCheckInsQuery);\n\n    const userSelections = checkInsSnap.size;\n    const bestieSelections = reverseCheckInsSnap.size;\n\n    // Bidirectional is better - give bonus for mutual selection\n    const totalSelections = userSelections + bestieSelections;\n    const mutualBonus = Math.min(userSelections, bestieSelections) > 0 ? 5 : 0;\n\n    // Score based on frequency\n    let frequencyScore = 0;\n    if (totalSelections >= 20) frequencyScore = 15;\n    else if (totalSelections >= 10) frequencyScore = 12;\n    else if (totalSelections >= 5) frequencyScore = 8;\n    else if (totalSelections >= 2) frequencyScore = 5;\n    else if (totalSelections >= 1) frequencyScore = 2;\n\n    return frequencyScore + mutualBonus + Math.min(5, totalSelections);\n  } catch (error) {\n    console.error('Error calculating check-in frequency score:', error);\n    return 0;\n  }\n};\n\n/**\n * Featured Circle Score (0-20 points)\n * Are they in each other's top 5?\n */\nconst calculateFeaturedCircleScore = async (userId, bestieId) => {\n  try {\n    const [userDoc, bestieDoc] = await Promise.all([\n      getDoc(doc(db, 'users', userId)),\n      getDoc(doc(db, 'users', bestieId))\n    ]);\n\n    const userCircle = userDoc.exists() ? (userDoc.data().featuredCircle || []) : [];\n    const bestieCircle = bestieDoc.exists() ? (bestieDoc.data().featuredCircle || []) : [];\n\n    const inUserCircle = userCircle.includes(bestieId);\n    const inBestieCircle = bestieCircle.includes(userId);\n\n    // Scoring\n    if (inUserCircle && inBestieCircle) return 20; // Mutual top 5\n    if (inUserCircle) return 12; // In your top 5\n    if (inBestieCircle) return 10; // You're in their top 5\n    return 0;\n  } catch (error) {\n    console.error('Error calculating featured circle score:', error);\n    return 0;\n  }\n};\n\n/**\n * Recency Score (0-15 points)\n * How recently have they interacted?\n */\nconst calculateRecencyScore = async (userId, bestieId) => {\n  try {\n    // Get most recent interaction of any type\n    const interactionsQuery = query(\n      collection(db, 'interactions'),\n      where('userId', '==', userId),\n      where('bestieId', '==', bestieId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const interactionsSnap = await getDocs(interactionsQuery);\n\n    // Also check reverse direction\n    const reverseQuery = query(\n      collection(db, 'interactions'),\n      where('userId', '==', bestieId),\n      where('bestieId', '==', userId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const reverseSnap = await getDocs(reverseQuery);\n\n    // Get most recent from either direction\n    let lastInteraction = null;\n\n    if (!interactionsSnap.empty) {\n      lastInteraction = interactionsSnap.docs[0].data().createdAt;\n    }\n\n    if (!reverseSnap.empty) {\n      const reverseDate = reverseSnap.docs[0].data().createdAt;\n      if (!lastInteraction || reverseDate.toMillis() > lastInteraction.toMillis()) {\n        lastInteraction = reverseDate;\n      }\n    }\n\n    // If no interactions tracked yet, check most recent check-in together\n    if (!lastInteraction) {\n      const checkInQuery = query(\n        collection(db, 'checkins'),\n        where('userId', '==', userId),\n        where('bestieIds', 'array-contains', bestieId),\n        orderBy('createdAt', 'desc'),\n        limit(1)\n      );\n      const checkInSnap = await getDocs(checkInQuery);\n\n      if (!checkInSnap.empty) {\n        lastInteraction = checkInSnap.docs[0].data().createdAt;\n      }\n    }\n\n    if (!lastInteraction) return 0;\n\n    const daysSince = (Date.now() - lastInteraction.toMillis()) / ONE_DAY;\n\n    // Score based on recency\n    if (daysSince < 1) return 15;      // Today\n    if (daysSince < 3) return 12;      // Last 3 days\n    if (daysSince < 7) return 9;       // This week\n    if (daysSince < 14) return 6;      // Last 2 weeks\n    if (daysSince < 30) return 3;      // This month\n    return 1;                           // Over a month\n  } catch (error) {\n    console.error('Error calculating recency score:', error);\n    return 0;\n  }\n};\n\n/**\n * Duration Score (0-5 points)\n * How long have they been besties?\n */\nconst calculateDurationScore = async (userId, bestieId) => {\n  try {\n    // Find the bestie relationship\n    const [requesterQuery, recipientQuery] = await Promise.all([\n      getDocs(\n        query(\n          collection(db, 'besties'),\n          where('requesterId', '==', userId),\n          where('recipientId', '==', bestieId),\n          where('status', '==', 'accepted')\n        )\n      ),\n      getDocs(\n        query(\n          collection(db, 'besties'),\n          where('requesterId', '==', bestieId),\n          where('recipientId', '==', userId),\n          where('status', '==', 'accepted')\n        )\n      ),\n    ]);\n\n    const bestieDoc = !requesterQuery.empty\n      ? requesterQuery.docs[0]\n      : !recipientQuery.empty\n      ? recipientQuery.docs[0]\n      : null;\n\n    if (!bestieDoc) return 0;\n\n    const acceptedAt = bestieDoc.data().acceptedAt;\n    if (!acceptedAt) return 0;\n\n    const daysTogether = (Date.now() - acceptedAt.toMillis()) / ONE_DAY;\n\n    // Score based on duration\n    if (daysTogether >= 365) return 5;  // 1+ year\n    if (daysTogether >= 180) return 4;  // 6+ months\n    if (daysTogether >= 90) return 3;   // 3+ months\n    if (daysTogether >= 30) return 2;   // 1+ month\n    if (daysTogether >= 7) return 1;    // 1+ week\n    return 0;\n  } catch (error) {\n    console.error('Error calculating duration score:', error);\n    return 0;\n  }\n};\n\n/**\n * Get connection level description\n */\nconst getConnectionLevel = (score) => {\n  if (score >= 90) return 'incredible';\n  if (score >= 70) return 'strong';\n  if (score >= 50) return 'good';\n  if (score >= 30) return 'developing';\n  return 'weak';\n};\n\n/**\n * Get connection level color for UI\n */\nexport const getConnectionColor = (score) => {\n  if (score >= 90) return '#10b981'; // green\n  if (score >= 70) return '#3b82f6'; // blue\n  if (score >= 50) return '#f59e0b'; // orange\n  if (score >= 30) return '#f97316'; // deep orange\n  return '#94a3b8'; // gray\n};\n\n/**\n * Get connection level emoji\n */\nexport const getConnectionEmoji = (score) => {\n  if (score >= 90) return 'üî•';\n  if (score >= 70) return 'üí™';\n  if (score >= 50) return 'üëç';\n  if (score >= 30) return 'üå±';\n  return 'üí§';\n};\n\n/**\n * Calculate Circle Health Score (0-100)\n * Overall health of the entire featured circle\n */\nexport const calculateCircleHealth = async (userId) => {\n  try {\n    // Get user's featured circle\n    const userDoc = await getDoc(doc(db, 'users', userId));\n    if (!userDoc.exists()) return { score: 0, insights: [] };\n\n    const featuredCircle = userDoc.data().featuredCircle || [];\n\n    if (featuredCircle.length === 0) {\n      return {\n        score: 0,\n        insights: ['Add besties to your circle to start building connections'],\n      };\n    }\n\n    // Calculate connection strength with each circle member\n    const connectionPromises = featuredCircle.map(bestieId =>\n      calculateConnectionStrength(userId, bestieId)\n    );\n    const connections = await Promise.all(connectionPromises);\n\n    // Average connection strength\n    const avgStrength = connections.reduce((sum, c) => sum + c.total, 0) / connections.length;\n\n    // Penalties and bonuses\n    let finalScore = avgStrength;\n\n    // Penalty for incomplete circle (not having 5 besties)\n    if (featuredCircle.length < 5) {\n      finalScore *= (featuredCircle.length / 5);\n    }\n\n    // Generate insights\n    const insights = generateCircleInsights(userId, connections, featuredCircle);\n\n    return {\n      score: Math.round(finalScore),\n      avgConnectionStrength: Math.round(avgStrength),\n      circleSize: featuredCircle.length,\n      connections,\n      insights,\n    };\n  } catch (error) {\n    console.error('Error calculating circle health:', error);\n    return { score: 0, insights: ['Error calculating circle health'] };\n  }\n};\n\n/**\n * Generate actionable insights about circle health\n */\nconst generateCircleInsights = (userId, connections, featuredCircle) => {\n  const insights = [];\n\n  // Check for weak connections\n  const weakConnections = connections.filter(c => c.total < 30);\n  if (weakConnections.length > 0) {\n    insights.push({\n      type: 'warning',\n      message: `${weakConnections.length} connection${weakConnections.length > 1 ? 's' : ''} need attention`,\n      action: 'reach_out',\n    });\n  }\n\n  // Check for incomplete circle\n  if (featuredCircle.length < 5) {\n    insights.push({\n      type: 'info',\n      message: `Add ${5 - featuredCircle.length} more ${featuredCircle.length === 4 ? 'bestie' : 'besties'} to complete your circle`,\n      action: 'add_besties',\n    });\n  }\n\n  // Check for lack of recent interactions\n  const staleConnections = connections.filter(c => c.breakdown.recency < 6);\n  if (staleConnections.length > 0) {\n    insights.push({\n      type: 'tip',\n      message: `${staleConnections.length} connection${staleConnections.length > 1 ? 's' : ''} haven't been active recently`,\n      action: 'circle_check',\n    });\n  }\n\n  // Celebrate strong circle\n  if (connections.every(c => c.total >= 70) && featuredCircle.length === 5) {\n    insights.push({\n      type: 'success',\n      message: 'Your circle is thriving! Keep up the great connections üéâ',\n      action: null,\n    });\n  }\n\n  return insights;\n};\n\n/**\n * Get last interaction time with a bestie\n */\nexport const getLastInteraction = async (userId, bestieId) => {\n  try {\n    // Check interactions collection\n    const interactionsQuery = query(\n      collection(db, 'interactions'),\n      where('userId', '==', userId),\n      where('bestieId', '==', bestieId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const snap = await getDocs(interactionsQuery);\n\n    if (!snap.empty) {\n      return snap.docs[0].data().createdAt;\n    }\n\n    // Fallback: check check-ins\n    const checkInQuery = query(\n      collection(db, 'checkins'),\n      where('userId', '==', userId),\n      where('bestieIds', 'array-contains', bestieId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const checkInSnap = await getDocs(checkInQuery);\n\n    if (!checkInSnap.empty) {\n      return checkInSnap.docs[0].data().createdAt;\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Error getting last interaction:', error);\n    return null;\n  }\n};\n\n/**\n * Format time ago string\n */\nexport const formatTimeAgo = (timestamp) => {\n  if (!timestamp) return 'Never';\n\n  const ms = Date.now() - timestamp.toMillis();\n  const minutes = Math.floor(ms / (1000 * 60));\n  const hours = Math.floor(ms / (1000 * 60 * 60));\n  const days = Math.floor(ms / ONE_DAY);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m ago`;\n  if (hours < 24) return `${hours}h ago`;\n  if (days === 1) return 'Yesterday';\n  if (days < 7) return `${days}d ago`;\n  if (days < 30) return `${Math.floor(days / 7)}w ago`;\n  if (days < 365) return `${Math.floor(days / 30)}mo ago`;\n  return `${Math.floor(days / 365)}y ago`;\n};\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { db, auth } from '../services/firebase';\nimport { doc, getDoc } from 'firebase/firestore';\nimport Header from '../components/Header';\nimport {\n  calculateCircleHealth,\n  getConnectionEmoji,\n  formatTimeAgo,\n  getLastInteraction,\n} from '../services/connectionStrength';\n\nconst CircleHealthPage = () => {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [circleHealth, setCircleHealth] = useState(null);\n  const [circleBesties, setCircleBesties] = useState([]);\n  const [showPerfectCircle, setShowPerfectCircle] = useState(false);\n\n  useEffect(() => {\n    loadCircleHealth();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const loadCircleHealth = async () => {\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      navigate('/login');\n      return;\n    }\n\n    try {\n      // Calculate circle health\n      const health = await calculateCircleHealth(currentUser.uid);\n      setCircleHealth(health);\n\n      // Load bestie details\n      if (health.circleSize > 0) {\n        const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\n        const featuredIds = userDoc.exists() ? (userDoc.data().featuredCircle || []) : [];\n\n        const bestiesData = [];\n        for (const bestieId of featuredIds) {\n          const bestieDoc = await getDoc(doc(db, 'users', bestieId));\n          if (!bestieDoc.exists()) continue;\n\n          const bestieData = bestieDoc.data();\n          const lastInteraction = await getLastInteraction(currentUser.uid, bestieId);\n\n          bestiesData.push({\n            id: bestieId,\n            name: bestieData.displayName || 'Bestie',\n            photoURL: bestieData.photoURL || null,\n            lastInteraction,\n          });\n        }\n\n        setCircleBesties(bestiesData);\n      }\n\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading circle health:', error);\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!circleHealth || circleHealth.circleSize === 0) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"max-w-4xl mx-auto p-4 py-8\">\n          <div className=\"card p-8 text-center\">\n            <div className=\"text-6xl mb-4\">üë•</div>\n            <h1 className=\"text-2xl font-display text-gradient mb-3\">Build Your Circle First</h1>\n            <p className=\"text-text-secondary mb-6\">\n              Add besties to your featured circle to see your Circle Health Dashboard\n            </p>\n            <button\n              onClick={() => navigate('/profile')}\n              className=\"btn btn-primary\"\n            >\n              Go to Profile\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const healthScore = circleHealth.score;\n  const connections = circleHealth.connections || [];\n\n  // Calculate averages\n  const avgAlertResponse = connections.length > 0\n    ? connections.reduce((sum, c) => sum + (c.breakdown?.alertResponse || 0), 0) / connections.length\n    : 0;\n  const avgCheckInFrequency = connections.length > 0\n    ? connections.reduce((sum, c) => sum + (c.breakdown?.checkInFrequency || 0), 0) / connections.length\n    : 0;\n  const avgRecency = connections.length > 0\n    ? connections.reduce((sum, c) => sum + (c.breakdown?.recency || 0), 0) / connections.length\n    : 0;\n\n  // Generate actionable tips\n  const tips = [];\n\n  if (circleHealth.circleSize < 5) {\n    tips.push({\n      icon: 'üë•',\n      title: 'Complete Your Circle',\n      description: `Add ${5 - circleHealth.circleSize} more ${circleHealth.circleSize === 4 ? 'bestie' : 'besties'} to reach full strength`,\n      action: 'Add Besties',\n      link: '/besties',\n      priority: 'high',\n    });\n  }\n\n  if (avgRecency < 9) {\n    tips.push({\n      icon: 'üìÖ',\n      title: 'Stay Connected',\n      description: 'Some connections haven\\'t been active recently. Regular check-ins strengthen bonds.',\n      action: 'Do Circle Check',\n      link: '/profile',\n      priority: 'medium',\n    });\n  }\n\n  if (avgCheckInFrequency < 15) {\n    tips.push({\n      icon: '‚úÖ',\n      title: 'More Check-Ins Together',\n      description: 'Include your circle members as guardians when creating check-ins.',\n      action: 'Create Check-In',\n      link: '/checkin',\n      priority: 'medium',\n    });\n  }\n\n  if (avgAlertResponse < 20) {\n    tips.push({\n      icon: 'üö®',\n      title: 'Build Response Trust',\n      description: 'Respond quickly when your circle members need help. This builds real connection strength.',\n      action: 'View Tips',\n      priority: 'low',\n    });\n  }\n\n  if (healthScore >= 90) {\n    tips.unshift({\n      icon: 'üéâ',\n      title: 'Incredible Circle!',\n      description: 'Your circle is thriving with strong connections. Keep up the amazing support!',\n      action: null,\n      priority: 'success',\n    });\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-20 py-8\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl md:text-4xl font-display text-gradient mb-2\">Circle Health Dashboard</h1>\n          <p className=\"text-text-secondary\">Understand and strengthen your safety network</p>\n        </div>\n\n        {/* Overall Health Score */}\n        <div className=\"card p-6 md:p-8 mb-6 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 border-2 border-purple-200 relative overflow-hidden\">\n          <div className=\"absolute top-0 right-0 w-64 h-64 bg-gradient-primary opacity-10 rounded-full blur-3xl\"></div>\n\n          <div className=\"relative z-10 text-center\">\n            <div className=\"text-sm font-semibold text-gray-600 mb-2\">Overall Circle Health</div>\n            <div className=\"flex items-center justify-center gap-4 mb-4\">\n              <span className=\"text-6xl md:text-7xl font-display text-gradient\">{healthScore}</span>\n              <span className=\"text-3xl text-gray-400\">/100</span>\n            </div>\n\n            {/* Visual Health Bar */}\n            <div className=\"w-full max-w-md mx-auto h-4 bg-gray-200 rounded-full overflow-hidden mb-4\">\n              <div\n                className=\"h-full bg-gradient-primary transition-all duration-1000 rounded-full\"\n                style={{ width: `${healthScore}%` }}\n              ></div>\n            </div>\n\n            <div className=\"text-lg font-semibold text-gray-700\">\n              {healthScore >= 90 && 'üî• Incredible - Your circle is thriving!'}\n              {healthScore >= 70 && healthScore < 90 && 'üí™ Strong - Keep nurturing these connections'}\n              {healthScore >= 50 && healthScore < 70 && 'üëç Good - Room to grow stronger'}\n              {healthScore >= 30 && healthScore < 50 && 'üå± Developing - Focus on consistency'}\n              {healthScore < 30 && 'üí§ Needs Attention - Time to reconnect'}\n            </div>\n\n            <button\n              onClick={() => setShowPerfectCircle(!showPerfectCircle)}\n              className=\"mt-4 text-primary font-semibold hover:underline flex items-center gap-2 mx-auto\"\n            >\n              {showPerfectCircle ? '‚Üê Back to My Circle' : 'See What Perfect Looks Like ‚Üí'}\n            </button>\n          </div>\n        </div>\n\n        {/* Perfect Circle Demo or User's Circle */}\n        {showPerfectCircle ? (\n          <PerfectCircleDemo />\n        ) : (\n          <>\n            {/* Connection Breakdown */}\n            <div className=\"card p-6 mb-6\">\n              <h2 className=\"text-xl font-display text-gradient mb-4\">Connection Breakdown</h2>\n\n              <div className=\"space-y-4\">\n                {/* Alert Response */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-2xl\">üö®</span>\n                      <span className=\"font-semibold text-text-primary\">Alert Response</span>\n                    </div>\n                    <span className=\"font-bold text-gradient\">{Math.round(avgAlertResponse)}/35</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-full bg-gradient-to-r from-red-400 to-orange-400 transition-all duration-500\"\n                      style={{ width: `${(avgAlertResponse / 35) * 100}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">How quickly you respond when they need help</p>\n                </div>\n\n                {/* Check-In Frequency */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-2xl\">‚úÖ</span>\n                      <span className=\"font-semibold text-text-primary\">Check-In Frequency</span>\n                    </div>\n                    <span className=\"font-bold text-gradient\">{Math.round(avgCheckInFrequency)}/25</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-full bg-gradient-to-r from-blue-400 to-cyan-400 transition-all duration-500\"\n                      style={{ width: `${(avgCheckInFrequency / 25) * 100}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">How often you include each other in check-ins</p>\n                </div>\n\n                {/* Featured Circle */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-2xl\">‚≠ê</span>\n                      <span className=\"font-semibold text-text-primary\">Featured Circle</span>\n                    </div>\n                    <span className=\"font-bold text-gradient\">{circleHealth.circleSize}/5</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-full bg-gradient-primary transition-all duration-500\"\n                      style={{ width: `${(circleHealth.circleSize / 5) * 100}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">Top 5 most important connections</p>\n                </div>\n\n                {/* Recency */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-2xl\">üìÖ</span>\n                      <span className=\"font-semibold text-text-primary\">Recent Activity</span>\n                    </div>\n                    <span className=\"font-bold text-gradient\">{Math.round(avgRecency)}/15</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-full bg-gradient-to-r from-green-400 to-emerald-400 transition-all duration-500\"\n                      style={{ width: `${(avgRecency / 15) * 100}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">How recently you've interacted</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Individual Connections */}\n            <div className=\"card p-6 mb-6\">\n              <h2 className=\"text-xl font-display text-gradient mb-4\">Your Connections</h2>\n\n              <div className=\"space-y-3\">\n                {connections.map((connection, idx) => {\n                  const bestie = circleBesties.find(b => b.id === connection.id) || circleBesties[idx];\n                  if (!bestie) return null;\n\n                  return (\n                    <button\n                      key={bestie.id}\n                      onClick={() => navigate(`/user/${bestie.id}`)}\n                      className=\"w-full flex items-center gap-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl hover:shadow-lg transition-all border-2 border-transparent hover:border-purple-200\"\n                    >\n                      {/* Profile Picture */}\n                      <div className=\"flex-shrink-0\">\n                        {bestie.photoURL ? (\n                          <img\n                            src={bestie.photoURL}\n                            alt={bestie.name}\n                            className=\"w-14 h-14 rounded-full object-cover ring-4 ring-purple-200\"\n                          />\n                        ) : (\n                          <div className=\"w-14 h-14 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-xl ring-4 ring-purple-200\">\n                            {bestie.name[0]?.toUpperCase() || '?'}\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Info */}\n                      <div className=\"flex-1 text-left\">\n                        <div className=\"font-semibold text-text-primary text-lg\">{bestie.name}</div>\n                        <div className=\"text-sm text-gray-600\">\n                          Last interaction: {formatTimeAgo(bestie.lastInteraction)}\n                        </div>\n                      </div>\n\n                      {/* Connection Score */}\n                      <div className=\"flex flex-col items-end gap-1\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"text-2xl\">{getConnectionEmoji(connection.total)}</span>\n                          <span className=\"font-bold text-2xl text-gradient\">{connection.total}</span>\n                        </div>\n                        <div className=\"text-xs font-semibold text-gray-500 capitalize\">{connection.level}</div>\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Tips & Recommendations */}\n            <div className=\"card p-6\">\n              <h2 className=\"text-xl font-display text-gradient mb-4\">How to Improve</h2>\n\n              <div className=\"space-y-3\">\n                {tips.map((tip, idx) => (\n                  <div\n                    key={idx}\n                    className={`p-4 rounded-xl border-2 ${\n                      tip.priority === 'success'\n                        ? 'bg-green-50 border-green-300'\n                        : tip.priority === 'high'\n                        ? 'bg-red-50 border-red-300'\n                        : tip.priority === 'medium'\n                        ? 'bg-orange-50 border-orange-300'\n                        : 'bg-blue-50 border-blue-300'\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <span className=\"text-3xl flex-shrink-0\">{tip.icon}</span>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-text-primary mb-1\">{tip.title}</h3>\n                        <p className=\"text-sm text-gray-700 mb-2\">{tip.description}</p>\n                        {tip.action && tip.link && (\n                          <button\n                            onClick={() => navigate(tip.link)}\n                            className=\"text-sm font-semibold text-primary hover:underline\"\n                          >\n                            {tip.action} ‚Üí\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Perfect Circle Demo Component\nconst PerfectCircleDemo = () => {\n  const perfectBesties = [\n    { name: 'Alex', score: 100 },\n    { name: 'Sam', score: 100 },\n    { name: 'Jordan', score: 100 },\n    { name: 'Taylor', score: 100 },\n    { name: 'Morgan', score: 100 },\n  ];\n\n  return (\n    <div className=\"card p-8 mb-6 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 border-4 border-green-300 relative overflow-hidden\">\n      {/* Animated particles background */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        {Array.from({ length: 20 }).map((_, i) => (\n          <div\n            key={i}\n            className=\"absolute w-2 h-2 bg-green-400 rounded-full opacity-40 animate-float\"\n            style={{\n              left: `${Math.random() * 100}%`,\n              top: `${Math.random() * 100}%`,\n              animationDelay: `${Math.random() * 5}s`,\n              animationDuration: `${3 + Math.random() * 4}s`,\n            }}\n          />\n        ))}\n      </div>\n\n      <div className=\"relative z-10\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-2xl md:text-3xl font-display bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2\">\n            The Perfect Circle\n          </h2>\n          <p className=\"text-gray-700 text-sm md:text-base\">This is what incredible connection looks like</p>\n        </div>\n\n        {/* Perfect Circle Visualization */}\n        <div className=\"relative w-full max-w-sm mx-auto aspect-square mb-8\">\n          <div className=\"absolute inset-0\">\n            {/* Perfect Connection Lines - all glowing strongly */}\n            {perfectBesties.map((bestie, index) => {\n              const angle = (index * 72 - 90) * (Math.PI / 180);\n              const radius = 45;\n              const x = 50 + radius * Math.cos(angle);\n              const y = 50 + radius * Math.sin(angle);\n\n              return (\n                <svg\n                  key={`line-${index}`}\n                  className=\"absolute inset-0 w-full h-full pointer-events-none\"\n                  style={{ zIndex: 0 }}\n                >\n                  <defs>\n                    <linearGradient id={`perfect-gradient-${index}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                      <stop offset=\"0%\" stopColor=\"#10b981\" stopOpacity=\"0.8\" />\n                      <stop offset=\"50%\" stopColor=\"#34d399\" stopOpacity=\"1\" />\n                      <stop offset=\"100%\" stopColor=\"#10b981\" stopOpacity=\"0.8\" />\n                    </linearGradient>\n                    <filter id={`perfect-glow-${index}`}>\n                      <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\"/>\n                      <feMerge>\n                        <feMergeNode in=\"coloredBlur\"/>\n                        <feMergeNode in=\"coloredBlur\"/>\n                        <feMergeNode in=\"SourceGraphic\"/>\n                      </feMerge>\n                    </filter>\n                  </defs>\n                  <line\n                    x1=\"50%\"\n                    y1=\"50%\"\n                    x2={`${x}%`}\n                    y2={`${y}%`}\n                    stroke={`url(#perfect-gradient-${index})`}\n                    strokeWidth=\"4\"\n                    filter={`url(#perfect-glow-${index})`}\n                    className=\"animate-pulse-fast\"\n                  />\n\n                  {/* Multiple particles flowing */}\n                  <circle\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    r=\"4\"\n                    fill=\"#10b981\"\n                    opacity=\"0.9\"\n                    className=\"animate-particle-fast\"\n                    style={{\n                      '--target-x': `${x}%`,\n                      '--target-y': `${y}%`,\n                      animationDelay: `${index * 0.3}s`,\n                    }}\n                  />\n                  <circle\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    r=\"3\"\n                    fill=\"#34d399\"\n                    opacity=\"0.8\"\n                    className=\"animate-particle-fast\"\n                    style={{\n                      '--target-x': `${x}%`,\n                      '--target-y': `${y}%`,\n                      animationDelay: `${index * 0.3 + 1}s`,\n                    }}\n                  />\n                </svg>\n              );\n            })}\n\n            {/* Center - Perfect Health */}\n            <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center text-white text-lg font-display shadow-2xl border-4 border-white ring-4 ring-green-300 animate-breathe-perfect\">\n                100\n              </div>\n            </div>\n\n            {/* Perfect Besties */}\n            {perfectBesties.map((bestie, index) => {\n              const angle = (index * 72 - 90) * (Math.PI / 180);\n              const radius = 45;\n              const x = 50 + radius * Math.cos(angle);\n              const y = 50 + radius * Math.sin(angle);\n\n              return (\n                <div\n                  key={index}\n                  className=\"absolute\"\n                  style={{\n                    left: `${x}%`,\n                    top: `${y}%`,\n                    transform: 'translate(-50%, -50%)',\n                  }}\n                >\n                  <div className=\"relative\">\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full shadow-xl border-4 border-white ring-6 ring-green-300 overflow-hidden flex items-center justify-center animate-breathe-perfect\"\n                      style={{ animationDelay: `${index * 0.2}s` }}\n                    >\n                      <span className=\"text-white font-display text-2xl\">\n                        {bestie.name[0]}\n                      </span>\n                      {/* Perfect Status Badge */}\n                      <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center text-xs shadow-lg animate-pulse-fast\">\n                        üî•\n                      </div>\n                    </div>\n\n                    {/* Score Indicator */}\n                    <div className=\"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs font-bold text-green-700\">\n                      100/100\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Perfect Circle Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-12\">\n          <div className=\"bg-white p-4 rounded-xl border-2 border-green-300 text-center\">\n            <div className=\"text-3xl mb-2\">üö®</div>\n            <div className=\"font-bold text-green-700\">Instant Response</div>\n            <div className=\"text-sm text-gray-600\">&lt; 5 minutes to every alert</div>\n          </div>\n          <div className=\"bg-white p-4 rounded-xl border-2 border-green-300 text-center\">\n            <div className=\"text-3xl mb-2\">‚úÖ</div>\n            <div className=\"font-bold text-green-700\">Always Together</div>\n            <div className=\"text-sm text-gray-600\">Regular check-ins & support</div>\n          </div>\n          <div className=\"bg-white p-4 rounded-xl border-2 border-green-300 text-center\">\n            <div className=\"text-3xl mb-2\">üíö</div>\n            <div className=\"font-bold text-green-700\">Daily Connection</div>\n            <div className=\"text-sm text-gray-600\">Interact every single day</div>\n          </div>\n        </div>\n\n        {/* How to Get There */}\n        <div className=\"mt-8 p-6 bg-white rounded-xl border-2 border-green-300\">\n          <h3 className=\"font-display text-xl text-green-700 mb-4\">How to Build This</h3>\n          <div className=\"space-y-3 text-sm text-gray-700\">\n            <div className=\"flex gap-3\">\n              <span className=\"text-green-600 font-bold\">1.</span>\n              <span><strong>Respond fast:</strong> When they need help, drop everything and be there within minutes.</span>\n            </div>\n            <div className=\"flex gap-3\">\n              <span className=\"text-green-600 font-bold\">2.</span>\n              <span><strong>Check in together:</strong> Include them in your check-ins regularly, not just emergencies.</span>\n            </div>\n            <div className=\"flex gap-3\">\n              <span className=\"text-green-600 font-bold\">3.</span>\n              <span><strong>Stay consistent:</strong> Daily circle checks keep connections strong and alive.</span>\n            </div>\n            <div className=\"flex gap-3\">\n              <span className=\"text-green-600 font-bold\">4.</span>\n              <span><strong>Be mutual:</strong> Make sure they're in your circle AND you're in theirs.</span>\n            </div>\n            <div className=\"flex gap-3\">\n              <span className=\"text-green-600 font-bold\">5.</span>\n              <span><strong>Show up:</strong> Real connections are built when you're there during tough times.</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Perfect Circle Animations */}\n      <style>{`\n        @keyframes breathe-perfect {\n          0%, 100% {\n            transform: scale(1);\n            box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4);\n          }\n          50% {\n            transform: scale(1.1);\n            box-shadow: 0 15px 60px rgba(16, 185, 129, 0.6);\n          }\n        }\n        .animate-breathe-perfect {\n          animation: breathe-perfect 2s ease-in-out infinite;\n        }\n        @keyframes pulse-fast {\n          0%, 100% {\n            opacity: 0.6;\n          }\n          50% {\n            opacity: 1;\n          }\n        }\n        .animate-pulse-fast {\n          animation: pulse-fast 1.5s ease-in-out infinite;\n        }\n        @keyframes particle-fast {\n          0% {\n            cx: 50%;\n            cy: 50%;\n            opacity: 1;\n          }\n          100% {\n            cx: var(--target-x);\n            cy: var(--target-y);\n            opacity: 0;\n          }\n        }\n        .animate-particle-fast {\n          animation: particle-fast 2s linear infinite;\n        }\n        @keyframes float {\n          0%, 100% {\n            transform: translateY(0) translateX(0);\n          }\n          25% {\n            transform: translateY(-20px) translateX(10px);\n          }\n          50% {\n            transform: translateY(-10px) translateX(-10px);\n          }\n          75% {\n            transform: translateY(-30px) translateX(5px);\n          }\n        }\n        .animate-float {\n          animation: float 4s ease-in-out infinite;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default CircleHealthPage;\n"],"names":["ONE_DAY","calculateConnectionStrength","async","userId","bestieId","scores","alertResponse","checkInFrequency","featuredCircle","recency","duration","alertResponseScore","checkInFrequencyScore","featuredCircleScore","recencyScore","durationScore","Promise","all","calculateAlertResponseScore","calculateCheckInFrequencyScore","calculateFeaturedCircleScore","calculateRecencyScore","calculateDurationScore","totalScore","Math","round","total","min","breakdown","level","getConnectionLevel","error","console","responsesQuery","query","collection","db","where","responsesSnap","getDocs","empty","interactionsQuery","interactionsSnap","size","responses","docs","map","doc","data","avgResponseTime","reduce","sum","r","responseTime","length","timeScore","threeMonthsAgo","Timestamp","fromDate","Date","now","checkInsQuery","checkInsSnap","reverseCheckInsQuery","reverseCheckInsSnap","userSelections","bestieSelections","totalSelections","mutualBonus","frequencyScore","userDoc","bestieDoc","getDoc","userCircle","exists","bestieCircle","inUserCircle","includes","inBestieCircle","orderBy","limit","reverseQuery","reverseSnap","lastInteraction","createdAt","reverseDate","toMillis","checkInQuery","checkInSnap","daysSince","requesterQuery","recipientQuery","acceptedAt","daysTogether","score","getConnectionColor","getConnectionEmoji","calculateCircleHealth","insights","connectionPromises","connections","avgStrength","c","finalScore","generateCircleInsights","avgConnectionStrength","circleSize","weakConnections","filter","push","type","message","concat","action","staleConnections","every","getLastInteraction","snap","formatTimeAgo","timestamp","ms","minutes","floor","hours","days","PerfectCircleDemo","perfectBesties","name","_jsxs","className","children","_jsx","Array","from","_","i","style","left","random","top","animationDelay","animationDuration","bestie","index","angle","PI","x","cos","y","sin","zIndex","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","stdDeviation","result","in","stroke","strokeWidth","cx","cy","fill","opacity","transform","CircleHealthPage","navigate","useNavigate","loading","setLoading","useState","circleHealth","setCircleHealth","circleBesties","setCircleBesties","showPerfectCircle","setShowPerfectCircle","useEffect","loadCircleHealth","currentUser","auth","health","uid","featuredIds","bestiesData","bestieData","displayName","photoURL","Header","onClick","healthScore","avgAlertResponse","_c$breakdown","avgCheckInFrequency","_c$breakdown2","avgRecency","_c$breakdown3","tips","icon","title","description","link","priority","unshift","width","_Fragment","connection","idx","_bestie$name$","find","b","src","alt","toUpperCase","tip"],"sourceRoot":""}