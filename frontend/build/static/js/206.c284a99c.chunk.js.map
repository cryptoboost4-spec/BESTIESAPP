{"version":3,"file":"static/js/206.c284a99c.chunk.js","mappings":"sKAGA,MA8FA,EA9F4BA,IAA4C,IAA3C,QAAEC,GAAU,EAAK,KAAEC,EAAO,WAAWF,EA2FhE,OA1FAG,EAAAA,EAAAA,WAAU,KACR,IAAKF,EAAS,OAEOG,MACnB,GAAa,UAATF,EAAkB,CAEpB,MAAMG,EAAQ,IACRC,EAAW,CACfC,OAAQ,CAAEC,EAAG,IACbC,OAAQ,CAAC,SAAU,UACnBC,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,YAGvD,SAASC,EAAKC,EAAeC,IAC3BC,EAAAA,EAAAA,IAAQC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACLT,GACAO,GAAI,IACPG,cAAeC,KAAKC,MAAMb,EAAQO,KAEtC,CAEAD,EAAK,IAAM,CACTQ,OAAQ,GACRC,cAAe,KAGjBT,EAAK,GAAK,CACRQ,OAAQ,KAGVR,EAAK,IAAM,CACTQ,OAAQ,IACRE,MAAO,IACPC,OAAQ,KAGVX,EAAK,GAAK,CACRQ,OAAQ,IACRC,cAAe,GACfC,MAAO,IACPC,OAAQ,MAGVX,EAAK,GAAK,CACRQ,OAAQ,IACRC,cAAe,IAEnB,KAAoB,cAATlB,IAETY,EAAAA,EAAAA,GAAS,CACPE,cAAe,IACfG,OAAQ,GACRZ,OAAQ,CAAEC,EAAG,IACbE,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,aAIvDa,WAAW,MACTT,EAAAA,EAAAA,GAAS,CACPE,cAAe,IACfQ,MAAO,GACPL,OAAQ,GACRZ,OAAQ,CAAEkB,EAAG,GACbf,OAAQ,CAAC,UAAW,UAAW,cAEhC,KAEHa,WAAW,MACTT,EAAAA,EAAAA,GAAS,CACPE,cAAe,IACfQ,MAAO,IACPL,OAAQ,GACRZ,OAAQ,CAAEkB,EAAG,GACbf,OAAQ,CAAC,UAAW,UAAW,cAEhC,OAGHI,EAAAA,EAAAA,GAAS,CACPE,cAAe,IACfG,OAAQ,GACRZ,OAAQ,CAAEC,EAAG,IACbE,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,cAK3DN,IACC,CAACH,EAASC,IAEN,K,oEC6DF,MAAMwB,EAAsB,IA9InC,MASE,wBAAMC,CAAmBC,EAAQ1B,EAAM2B,EAAOC,GAAyB,IAAhBC,EAAQC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACjE,UACQG,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,kBAAgBtB,EAAAA,EAAAA,GAAA,CAC1Ca,SACA1B,OACA2B,QACAC,UACAQ,MAAM,EACNC,WAAWC,EAAAA,EAAAA,OACRT,GAEP,CAAE,MAAOU,GAEP,MADAC,QAAQD,MAAM,+BAAgCA,GACxCA,CACR,CACF,CAKA,yBAAME,CAAoBf,EAAQgB,GAChC,OAAOC,KAAKlB,mBACVC,EACA,iBACA,qBAAqB,GAADkB,OACjBF,EAAa,6BAChB,CAAEA,iBAEN,CAKA,wBAAMG,CAAmBnB,EAAQoB,EAAYC,GAC3C,OAAOJ,KAAKlB,mBACVC,EACA,iBACA,iBAAiB,GAADkB,OACbE,EAAU,iDACb,CAAEA,aAAYC,aAElB,CAKA,yBAAMC,CAAoBtB,EAAQqB,GAChC,OAAOJ,KAAKlB,mBACVC,EACA,kBACA,kBACA,wDACA,CAAEqB,aAEN,CAKA,4BAAME,CAAuBvB,EAAQoB,EAAYI,GAC/C,OAAOP,KAAKlB,mBACVC,EACA,oBACA,oBAAoB,GAADkB,OAChBE,EAAU,iCACb,CAAEA,aAAYI,YAElB,CAKA,uBAAMC,CAAkBzB,EAAQ0B,EAAWC,GACzC,OAAOV,KAAKlB,mBACVC,EACA,eACA,sBAAsB,mBAADkB,OACFQ,EAAS,aAAAR,OAAYS,GACxC,CAAED,YAAWC,oBAEjB,CAKA,kBAAMC,CAAa5B,EAAQC,EAAOC,GAChC,OAAOe,KAAKlB,mBACVC,EACA,SACAC,EACAC,EAEJ,CAKA,mBAAM2B,CAAc7B,EAAQ8B,GAC1B,OAAOb,KAAKlB,mBACVC,EACA,SAAS,uBAADkB,OACeY,EAAW,KAClC,kFAEJ,CAKA,0BAAMC,CAAqB/B,EAAQoB,GACjC,OAAOH,KAAKlB,mBACVC,EACA,iBACA,2BAA2B,GAADkB,OACvBE,EAAU,sDACb,CAAEA,cAEN,CAKA,2BAAMY,CAAsBhC,EAAQiC,GAClC,OAAOhB,KAAKlB,mBACVC,EACA,iBACA,oBAAoB,6BAADkB,OACUe,EAAW,aACxC,CAAEA,eAEN,E,mIC5IK,MA8GMC,EAAeC,IAC1B,IAAKA,EAAa,OAAO,EAIzB,MADkB,oBACDC,KAAKD,I,cCpHjB,MAAME,EAAoBA,CAACC,EAAUC,EAAaC,KAAkB,IAADC,EACxE,MAAMC,IAAwB,OAAXH,QAAW,IAAXA,IAAAA,EAAaI,OAC1BC,IAAqB,OAARN,QAAQ,IAARA,IAAAA,EAAUH,aACvBU,IAAqB,OAARP,QAAQ,IAARA,IAAAA,EAAUQ,UACvBC,IAAmB,OAART,QAAQ,IAARA,GAAiB,QAATG,EAARH,EAAUU,eAAO,IAAAP,IAAjBA,EAAmBQ,KAGpC,OAAOP,GAAYE,GAAYC,GAAYE,GAFxBP,GAAgB,GAUxBU,EAA8BC,UACzC,IACE,MAAMC,EAAW,wBACXC,QAAiBC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAI9C,EAAAA,GAAI,SAAUT,IAGhD,GAAIqD,EAASG,SAAU,CACrB,MAAMC,EAAiBJ,EAASK,OAAOC,QAAU,GAGjD,GAFwBF,EAAeG,KAAKC,GAAKA,EAAEC,KAAOV,GAGxD,OAAO,QAIHW,EAAAA,EAAAA,KAAUR,EAAAA,EAAAA,IAAI9C,EAAAA,GAAI,SAAUT,GAAS,CACzC2D,QAAQK,EAAAA,EAAAA,IAAW,CACjBF,GAAIV,EACJa,KAAM,wBACNC,YAAa,kDACbC,KAAM,SACNC,SAAU,IAAIC,KACdC,SAAU,aAGhB,YAEQC,EAAAA,EAAAA,KAAOhB,EAAAA,EAAAA,IAAI9C,EAAAA,GAAI,SAAUT,GAAS,CACtC2D,OAAQ,CAAC,CACPG,GAAIV,EACJa,KAAM,wBACNC,YAAa,kDACbC,KAAM,SACNC,SAAU,IAAIC,KACdC,SAAU,cAYhB,aANMxE,EAAAA,EAAoB2B,kBACxBzB,EACA,wBACA,sFAGK,CACT,CAAE,MAAOa,GAEP,OADAC,QAAQD,MAAM,2CAA4CA,IACnD,CACT,GAYW2D,EAAiCrB,MAAOnD,EAAQsC,EAAUC,EAAaC,KAGlF,GAFwBH,EAAkBC,EAAUC,EAAaC,GAE5C,CAEnB,aADyBU,EAA4BlD,EAEvD,CAEA,OAAO,G,uBC7FT,MA4FA,EA5F+B5B,IAA0B,IAAzB,OAAEqG,EAAM,QAAEC,GAAStG,EACjD,MAAOuG,EAAcC,IAAmBC,EAAAA,EAAAA,WAAS,GAajD,OAXAtG,EAAAA,EAAAA,WAAU,KACR,GAAIkG,EAAQ,CACVG,GAAgB,GAEhB,MAAME,EAAQnF,WAAW,KACvBiF,GAAgB,IACf,KACH,MAAO,IAAMG,aAAaD,EAC5B,GACC,CAACL,IAECA,GAGHO,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,CAEGP,IAAgBQ,EAAAA,EAAAA,KAACC,EAAAA,EAAmB,KAGrCD,EAAAA,EAAAA,KAAA,OAAKE,UAAU,wHAAuHH,UAEpIF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,+FAA8FH,SAAA,EAE3GF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,uDAAsDH,SAAA,EACnEC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,0DAAyDH,SAAC,YACzEC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,qEAAoEH,SAAC,kBACpFC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,wEAAuEH,SAAC,YACvFC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,uEAAsEH,SAAC,qBAGxFF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,4BAA2BH,SAAA,EAExCC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,qJAAoJH,UACjKC,EAAAA,EAAAA,KAAA,QAAME,UAAU,WAAUH,SAAC,cAI7BC,EAAAA,EAAAA,KAAA,MAAIE,UAAU,wGAAuGH,SAAC,sBAItHC,EAAAA,EAAAA,KAAA,MAAIE,UAAU,+DAA8DH,SAAC,qCAI7EC,EAAAA,EAAAA,KAAA,KAAGE,UAAU,uEAAsEH,SAAC,6HAKpFF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,oLAAmLH,SAAA,EAChMC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,gBAAeH,SAAC,YAC/BC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,8DAA6DH,SAAC,2BAC7EC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,iDAAgDH,SAAC,oCAMlEF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,2JAA0JH,SAAA,EACvKC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,+DAA8DH,SAAC,8DAG9EF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,2DAA0DH,SAAA,EACvEC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,oDACLC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,wCACLC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,oCACLC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,0CAKTC,EAAAA,EAAAA,KAAA,UACEG,QAASZ,EACTW,UAAU,mFAAkFH,SAC7F,qCAIDC,EAAAA,EAAAA,KAAA,KAAGE,UAAU,sDAAqDH,SAAC,8DApEzD,MCkjBtB,EApjBwBK,KAAO,IAAD9C,EAAA+C,EAAAC,EAAAC,EAC5B,MAAM,YAAEnD,EAAW,SAAED,IAAaqD,EAAAA,EAAAA,MAC5BC,GAAWC,EAAAA,EAAAA,OAEV/D,EAAagE,IAAkBjB,EAAAA,EAAAA,WAAiB,OAARvC,QAAQ,IAARA,OAAQ,EAARA,EAAUR,cAAe,KACjEmB,EAAK8C,IAAUlB,EAAAA,EAAAA,WAAiB,OAARvC,QAAQ,IAARA,GAAiB,QAATG,EAARH,EAAUU,eAAO,IAAAP,OAAT,EAARA,EAAmBQ,MAAO,KAClD+C,EAAWC,IAAgBpB,EAAAA,EAAAA,WAAiB,OAARvC,QAAQ,IAARA,GAAiB,QAATkD,EAARlD,EAAUU,eAAO,IAAAwC,OAAT,EAARA,EAAmBQ,YAAa,KACpE7D,EAAa+D,IAAkBrB,EAAAA,EAAAA,WAAiB,OAARvC,QAAQ,IAARA,OAAQ,EAARA,EAAUH,cAAe,KACjEgE,EAAgBC,IAAqBvB,EAAAA,EAAAA,UAAS,OAC9CwB,EAAYC,IAAiBzB,EAAAA,EAAAA,WAAiB,OAARvC,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,WAAY,OAC5DyD,EAASC,IAAc3B,EAAAA,EAAAA,WAAS,IAGvCtG,EAAAA,EAAAA,WAAU,KACR,MAAMkI,EAAOC,OAAOC,SAASF,KAAKG,MAAM,GACpCH,GAEF9G,WAAW,KACT,MAAMkH,EAAUC,SAASC,eAAeN,GACpCI,IACFA,EAAQG,eAAe,CAAEC,SAAU,SAAUC,MAAO,WAEpDL,EAAQM,MAAMC,WAAa,wBAC3BP,EAAQM,MAAME,gBAAkB,0BAChC1H,WAAW,KACTkH,EAAQM,MAAME,gBAAkB,IAC/B,OAEJ,MAEJ,IAGH,MAAOC,EAAuBC,IAA4B1C,EAAAA,EAAAA,WAAS,IAC5D2C,EAAkBC,IAAuB5C,EAAAA,EAAAA,UAAS,KAClD6C,EAAyBC,IAA8B9C,EAAAA,EAAAA,UAAS,OAChE+C,EAAoBC,IAAyBhD,EAAAA,EAAAA,UAAS,KAGtDiD,EAAqBC,IAA0BlD,EAAAA,EAAAA,WAAS,GA6BzDmD,EAA8B7E,UAClC,IAAKhB,GAAeA,KAAwB,OAARG,QAAQ,IAARA,OAAQ,EAARA,EAAUH,aAE5C,YADA8F,EAAAA,GAAMpH,MAAM,mCAKd,MAAMqH,EAAU/F,EAAYgG,OAG5B,IAAKD,EAEH,YADAD,EAAAA,GAAMpH,MAAM,+BAKd,IAAK,kBAAkBuB,KAAK8F,GAE1B,YADAD,EAAAA,GAAMpH,MAAM,6EAKd,IAAIuH,EAAiBF,EAAQG,QAAQ,YAAa,IAalD,GAXKD,EAAeE,WAAW,OAG3BF,EADEA,EAAeE,WAAW,KACX,MAAQF,EAAexB,MAAM,GAG7B,IAAMwB,IAKtBlG,EAAYkG,GAEf,YADAH,EAAAA,GAAMpH,MAAM,4GAA6G,CAAE0H,SAAU,MAKvI,MAAMC,EAAaJ,EAAexB,MAAM,GACxC,GAAI4B,EAAWnI,OAAS,EAEtB,YADA4H,EAAAA,GAAMpH,MAAM,mEAGd,GAAI2H,EAAWnI,OAAS,GAEtB,YADA4H,EAAAA,GAAMpH,MAAM,wDAId2F,GAAW,GAGX,MAAMiC,EAAkBC,EAAAA,GAAYC,eAAe,6BACnD,IAAKF,EAAgBG,QAGnB,OAFAX,EAAAA,GAAMpH,MAAM,gEACZ2F,GAAW,GAKb,MAAMqC,QAAeH,EAAAA,GAAYI,sBAAsBV,EAAgBK,EAAgBM,UACvFvC,GAAW,GAEPqC,EAAOD,SACTjB,EAA2BkB,EAAOG,oBAClCnB,EAAsBO,GACtBb,GAAyB,GACzBU,EAAAA,GAAMW,QAAQ,0CAEdX,EAAAA,GAAMpH,MAAMgI,EAAOhI,OAAS,qCA4E1BoI,EAAqB9F,iBAAuC,IAAhC+F,EAAmB9I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACtD,IAEE,IAAI0C,GAAmB,OAARR,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,WAAY,KAErC,GAAIqD,EAAgB,CAClB,MAAMgD,OAxKiBhG,WAC3B,IAAKgD,EAAgB,OAAe,OAAR7D,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,WAAY,KAElD,IACE,MAAMsG,GAAaC,EAAAA,EAAAA,IAAIC,EAAAA,GAAQ,oBAADpI,OAAsBqB,EAAYgH,IAAG,KAAArI,OAAImD,KAAKmF,MAAK,KAAAtI,OAAIiF,EAAelC,OAGpG,aAFMwF,EAAAA,EAAAA,GAAYL,EAAYjD,SACZuD,EAAAA,EAAAA,IAAeN,EAEnC,CAAE,MAAOvI,GAGP,OAFAC,QAAQD,MAAM,mCAAoCA,GAClDoH,EAAAA,GAAMpH,MAAM,qCACG,OAARyB,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,WAAY,IAC/B,GA4JmC6G,GAC3BR,IACFrG,EAAWqG,EAEf,OAGMpF,EAAAA,EAAAA,KAAUR,EAAAA,EAAAA,IAAI9C,EAAAA,GAAI,QAAS8B,EAAYgH,KAAM,CACjDzH,cACAK,YAAa+G,GAAuB/G,EACpCW,WACA,cAAeG,EACf,oBAAqB+C,EACrB4D,UAAW,IAAIvF,OAGjB4D,EAAAA,GAAMW,QAAQ,iCAId,MAAMiB,GAAgBC,EAAAA,EAAAA,IACpBtJ,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,YACfsJ,EAAAA,EAAAA,IAAM,cAAe,KAAMxH,EAAYgH,MACvCQ,EAAAA,EAAAA,IAAM,SAAU,KAAM,aAElBC,GAAgBF,EAAAA,EAAAA,IACpBtJ,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,YACfsJ,EAAAA,EAAAA,IAAM,cAAe,KAAMxH,EAAYgH,MACvCQ,EAAAA,EAAAA,IAAM,SAAU,KAAM,cAEjBE,EAAWC,SAAmBC,QAAQC,IAAI,EAC/CC,EAAAA,EAAAA,IAAQR,IACRQ,EAAAA,EAAAA,IAAQL,KAEJxH,EAAeyH,EAAUK,KAAOJ,EAAUI,KAG1CC,GAAepL,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAChBmD,GAAQ,IACXR,cACAK,YAAa+G,GAAuB/G,EACpCW,WACAE,SAAO7D,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACM,OAARmD,QAAQ,IAARA,OAAQ,EAARA,EAAUU,SAAO,IACpBC,MACA+C,sBAKqBxB,EACvBjC,EAAYgH,IACZgB,EACAhI,EACAC,GAKAuF,GAAuB,GAIvBpI,WAAW,KACTiG,EAAS,aACR,IAEP,CAAE,MAAO/E,GACPC,QAAQD,MAAM,0BAA2BA,GACzCoH,EAAAA,GAAMpH,MAAMA,EAAMX,SAAW,2BAC/B,CAAC,QACCsG,GAAW,EACb,CACF,EAmBA,OACErB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,0BAAyBH,UAEtCF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,uCAAsCH,SAAA,EACnDF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,OAAMH,SAAA,EACnBC,EAAAA,EAAAA,KAAA,MAAIE,UAAU,+CAA8CH,SAAC,kBAC7DC,EAAAA,EAAAA,KAAA,KAAGE,UAAU,sBAAqBH,SAAC,yCAGrCF,EAAAA,EAAAA,MAAA,QAAMwF,SA1BOrH,UACjBsH,EAAEC,iBAGmBvI,GAAeA,KAAwB,OAARG,QAAQ,IAARA,OAAQ,EAARA,EAAUH,aAI5D6F,KAKFxB,GAAW,SACLyC,MAY0B5D,UAAU,YAAWH,SAAA,EAE/CF,EAAAA,EAAAA,MAAA,OAAKlB,GAAG,kBAAkBuB,UAAU,WAAUH,SAAA,EAC5CC,EAAAA,EAAAA,KAAA,SAAOE,UAAU,oDAAmDH,SAAC,qBAIrEF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,0BAAyBH,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,+HAA8HH,SAC1ImB,GACClB,EAAAA,EAAAA,KAAA,OAAKwF,IAAKtE,EAAYuE,IAAI,UAAUvF,UAAU,gCAEnC,OAAXvD,QAAW,IAAXA,OAAW,EAAXA,EAAc,KAAM,OAIxBkD,EAAAA,EAAAA,MAAA,OAAKK,UAAU,SAAQH,SAAA,EACrBC,EAAAA,EAAAA,KAAA,SACE7G,KAAK,OACLuM,OAAO,UACPC,SA7SUL,IACxB,MAAMM,EAAON,EAAEO,OAAOC,MAAM,GAC5B,GAAIF,EAAM,CACR,GAAIA,EAAKT,KAAO,QAEd,YADArC,EAAAA,GAAMpH,MAAM,mCAGduF,EAAkB2E,GAClBzE,EAAc4E,IAAIC,gBAAgBJ,GACpC,GAqSc1F,UAAU,SACVvB,GAAG,qBAELqB,EAAAA,EAAAA,KAAA,SACEiG,QAAQ,kBACR/F,UAAU,gDAA+CH,SAC1D,kBAGDC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mCAAkCH,SAAC,4CAQxDF,EAAAA,EAAAA,MAAA,OAAKlB,GAAG,aAAauB,UAAU,WAAUH,SAAA,EACvCC,EAAAA,EAAAA,KAAA,MAAIE,UAAU,8CAA6CH,SAAC,uBAE5DF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,YAAWH,SAAA,EACxBF,EAAAA,EAAAA,MAAA,OAAKlB,GAAG,eAAcoB,SAAA,EACpBC,EAAAA,EAAAA,KAAA,SAAOE,UAAU,qDAAoDH,SAAC,kBAGtEC,EAAAA,EAAAA,KAAA,SACE7G,KAAK,OACL+M,MAAOvJ,EACPgJ,SAAWL,GAAM3E,EAAe2E,EAAEO,OAAOK,OACzChG,UAAU,QACViG,YAAY,YACZC,UAAQ,QAIZvG,EAAAA,EAAAA,MAAA,OAAKlB,GAAG,MAAKoB,SAAA,EACXC,EAAAA,EAAAA,KAAA,SAAOE,UAAU,qDAAoDH,SAAC,SAGtEC,EAAAA,EAAAA,KAAA,YACEkG,MAAOpI,EACP6H,SAAWL,GAAM1E,EAAO0E,EAAEO,OAAOK,OACjChG,UAAU,iCACViG,YAAY,gCACZE,UAAW,OAEbxG,EAAAA,EAAAA,MAAA,OAAKK,UAAU,mCAAkCH,SAAA,CAC9CjC,EAAI5C,OAAO,yBAIhB2E,EAAAA,EAAAA,MAAA,OAAKlB,GAAG,WAAUoB,SAAA,EAChBC,EAAAA,EAAAA,KAAA,SAAOE,UAAU,qDAAoDH,SAAC,2BAGtEC,EAAAA,EAAAA,KAAA,SACE7G,KAAK,OACL+M,MAAOrF,EACP8E,SAAWL,GAAMxE,EAAawE,EAAEO,OAAOK,OACvChG,UAAU,QACVoG,KAAK,IAAIpH,MAAOqH,cAAcC,MAAM,KAAK,MAE3CxG,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mCAAkCH,SAAC,mEAKpDF,EAAAA,EAAAA,MAAA,OAAKlB,GAAG,QAAOoB,SAAA,EACbC,EAAAA,EAAAA,KAAA,SAAOE,UAAU,qDAAoDH,SAAC,kBAGtEF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,aAAYH,SAAA,EACzBC,EAAAA,EAAAA,KAAA,SACE7G,KAAK,MACL+M,MAAOlJ,EACP2I,SAAWL,GAAMvE,EAAeuE,EAAEO,OAAOK,OACzChG,UAAU,eACViG,YAAY,oCAEbnJ,KAAwB,OAARG,QAAQ,IAARA,OAAQ,EAARA,EAAUH,cAAeA,IACxCgD,EAAAA,EAAAA,KAAA,UACE7G,KAAK,SACLgH,QAAS0C,EACT4D,SAAUrF,EACVlB,UAAU,oCAAmCH,SAE5CqB,EAAU,aAAe,kBAI/BpE,KAAwB,OAARG,QAAQ,IAARA,OAAQ,EAARA,EAAUH,cAAeA,IACxCgD,EAAAA,EAAAA,KAAA,OAAKE,UAAU,oDAAmDH,SAAC,4EAS3EF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,WAAUH,SAAA,EACvBC,EAAAA,EAAAA,KAAA,MAAIE,UAAU,8CAA6CH,SAAC,kBAE5DF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,YAAWH,SAAA,EACxBF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mCAAkCH,SAAC,WAClDC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,kCAAiCH,SAAa,OAAX3C,QAAW,IAAXA,OAAW,EAAXA,EAAaI,SAC/DwC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mCAAkCH,SAAC,wDAKpDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mCAAkCH,SAAC,kBAClDC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,kCAAiCH,UACrC,OAAR5C,QAAQ,IAARA,GAAe,QAAPmD,EAARnD,EAAUuJ,aAAK,IAAApG,GAAU,QAAVC,EAAfD,EAAiBqG,gBAAQ,IAAApG,OAAjB,EAARA,EAA2BqG,SAASC,uBAAwB,uBAOrEhH,EAAAA,EAAAA,MAAA,OAAKK,UAAU,aAAYH,SAAA,EACzBC,EAAAA,EAAAA,KAAA,UACE7G,KAAK,SACLgH,QAASA,IAAMM,EAAS,YACxBP,UAAU,2BAA0BH,SACrC,YAGDF,EAAAA,EAAAA,MAAA,UACE1G,KAAK,SACLsN,SAAUrF,EACVlB,UAAU,gEAA+DH,SAAA,CAExEqB,IACCpB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,iFAEhBkB,EAAU,0BAA4B,wBAM5Ce,IACCnC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,uFAAsFH,UACnGF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,6DAA4DH,SAAA,EACzEC,EAAAA,EAAAA,KAAA,MAAIE,UAAU,+CAA8CH,SAAC,yBAC7DF,EAAAA,EAAAA,MAAA,KAAGK,UAAU,2BAA0BH,SAAA,CAAC,8BACZC,EAAAA,EAAAA,KAAA,UAAAD,SAAS0C,QAGrC5C,EAAAA,EAAAA,MAAA,OAAKK,UAAU,OAAMH,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SAAOE,UAAU,qDAAoDH,SAAC,uBAGtEC,EAAAA,EAAAA,KAAA,SACE7G,KAAK,OACL+M,MAAO7D,EACPsD,SAAWL,GAAMhD,EAAoBgD,EAAEO,OAAOK,OAC9ChG,UAAU,QACViG,YAAY,SACZE,UAAW,EACXS,WAAS,QAIbjH,EAAAA,EAAAA,MAAA,OAAKK,UAAU,aAAYH,SAAA,EACzBC,EAAAA,EAAAA,KAAA,UACEG,QAASA,KACPiC,GAAyB,GACzBE,EAAoB,IACpBE,EAA2B,OAE7BtC,UAAU,2BACVuG,SAAUrF,EAAQrB,SACnB,YAGDF,EAAAA,EAAAA,MAAA,UACEM,QA5XcnC,UAC5B,IAAKqE,IAAqBE,EAExB,YADAO,EAAAA,GAAMpH,MAAM,sCAId2F,GAAW,GAEX,MAAMqC,QAAeH,EAAAA,GAAYwD,gBAAgBxE,EAAyBF,GAE1E,GAAIqB,EAAOD,QAAS,CAAC,IAADuD,EAClBlE,EAAAA,GAAMW,QAAQ,0BACdrB,GAAyB,GACzBrB,EAAe0B,GAIf,UACQrF,EAAY6J,YAAW,SAEvB,IAAIjC,QAAQkC,GAAW1M,WAAW0M,EAAS,KACnD,CAAE,MAAOxL,GACPC,QAAQD,MAAM,uBAAwBA,EACxC,CAGa,OAARyB,QAAQ,IAARA,GAAiC,QAAzB6J,EAAR7J,EAAUgK,+BAAuB,IAAAH,GAAjCA,EAAmCI,MACtCtE,EAAAA,EAAAA,IACGuE,IACCxH,EAAAA,EAAAA,MAAA,OAAKK,UAAU,sBAAqBH,SAAA,EAClCC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,gBAAeH,SAAC,qCAC/BC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,UAASH,SAAC,yDACzBF,EAAAA,EAAAA,MAAA,OAAKK,UAAU,aAAYH,SAAA,EACzBC,EAAAA,EAAAA,KAAA,UACEG,QAASnC,UACP,UACQY,EAAAA,EAAAA,KAAUR,EAAAA,EAAAA,IAAI9C,EAAAA,GAAI,QAAS8B,EAAYgH,KAAM,CACjD,+BAA+B,IAEjCtB,EAAAA,GAAMW,QAAQ,uBACdX,EAAAA,GAAMwE,QAAQD,EAAE1I,GAClB,CAAE,MAAOjD,GACPC,QAAQD,MAAM,sBAAuBA,GACrCoH,EAAAA,GAAMpH,MAAM,uBACd,GAEFwE,UAAU,yBAAwBH,SACnC,gBAGDC,EAAAA,EAAAA,KAAA,UACEG,QAASA,IAAM2C,EAAAA,GAAMwE,QAAQD,EAAE1I,IAC/BuB,UAAU,2BAA0BH,SACrC,gBAIHC,EAAAA,EAAAA,KAAA,OAAKE,UAAU,wBAAuBH,SAAC,6CAG3C,CAAEqD,SAAU,MAKhBU,EAAmBrB,EACrB,MACEpB,GAAW,GACXyB,EAAAA,GAAMpH,MAAMgI,EAAOhI,OAAS,8BAyThBwE,UAAU,gEACVuG,SAAUrF,GAAuC,IAA5BiB,EAAiBnH,OAAa6E,SAAA,CAElDqB,IACCpB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,iFAEhBkB,EAAU,wBAA0B,uBAIzCvB,EAAAA,EAAAA,MAAA,KAAGK,UAAU,+CAA8CH,SAAA,CAAC,2BACjC,KACzBC,EAAAA,EAAAA,KAAA,UACEG,QAAS0C,EACT3C,UAAU,yBACVuG,SAAUrF,EAAQrB,SACnB,oBASTC,EAAAA,EAAAA,KAAA,OAAKrB,GAAG,+BAGRqB,EAAAA,EAAAA,KAACuH,EAAsB,CACrBjI,OAAQqD,EACRpD,QAASA,KACPqD,GAAuB,GACvBnC,EAAS,oB","sources":["components/ConfettiCelebration.jsx","services/notificationService.js","utils/phoneUtils.js","services/profileCompletionService.js","components/ProfileCompletionModal.jsx","pages/EditProfilePage.jsx"],"sourcesContent":["import { useEffect } from 'react';\nimport confetti from 'canvas-confetti';\n\nconst ConfettiCelebration = ({ trigger = false, type = 'default' }) => {\n  useEffect(() => {\n    if (!trigger) return;\n\n    const fireConfetti = () => {\n      if (type === 'badge') {\n        // Badge celebration - stars and hearts\n        const count = 200;\n        const defaults = {\n          origin: { y: 0.7 },\n          shapes: ['circle', 'square'],\n          colors: ['#FF69B4', '#DDA0DD', '#FFB6C1', '#FFC0CB', '#FF1493']\n        };\n\n        function fire(particleRatio, opts) {\n          confetti({\n            ...defaults,\n            ...opts,\n            particleCount: Math.floor(count * particleRatio)\n          });\n        }\n\n        fire(0.25, {\n          spread: 26,\n          startVelocity: 55,\n        });\n\n        fire(0.2, {\n          spread: 60,\n        });\n\n        fire(0.35, {\n          spread: 100,\n          decay: 0.91,\n          scalar: 0.8\n        });\n\n        fire(0.1, {\n          spread: 120,\n          startVelocity: 25,\n          decay: 0.92,\n          scalar: 1.2\n        });\n\n        fire(0.1, {\n          spread: 120,\n          startVelocity: 45,\n        });\n      } else if (type === 'milestone') {\n        // Milestone - explosion from center\n        confetti({\n          particleCount: 150,\n          spread: 70,\n          origin: { y: 0.6 },\n          colors: ['#FF69B4', '#DDA0DD', '#FFB6C1', '#87CEEB', '#98FB98']\n        });\n\n        // Second burst\n        setTimeout(() => {\n          confetti({\n            particleCount: 100,\n            angle: 60,\n            spread: 55,\n            origin: { x: 0 },\n            colors: ['#FF69B4', '#DDA0DD', '#FFB6C1']\n          });\n        }, 200);\n\n        setTimeout(() => {\n          confetti({\n            particleCount: 100,\n            angle: 120,\n            spread: 55,\n            origin: { x: 1 },\n            colors: ['#87CEEB', '#98FB98', '#FFB6C1']\n          });\n        }, 400);\n      } else {\n        // Default celebration\n        confetti({\n          particleCount: 100,\n          spread: 70,\n          origin: { y: 0.6 },\n          colors: ['#FF69B4', '#DDA0DD', '#FFB6C1', '#FFC0CB', '#FF1493']\n        });\n      }\n    };\n\n    fireConfetti();\n  }, [trigger, type]);\n\n  return null; // This component doesn't render anything\n};\n\nexport default ConfettiCelebration;\n","import { db } from './firebase';\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\n\n/**\n * Notification Types:\n * - bestie_request: Someone sent you a bestie request\n * - check_in_alert: A bestie missed their check-in\n * - missed_check_in: You missed a check-in\n * - request_attention: A bestie is requesting attention\n * - badge_earned: You earned a new badge\n * - system: System messages and announcements\n */\n\nclass NotificationService {\n  /**\n   * Create a notification for a user\n   * @param {string} userId - The user ID to send notification to\n   * @param {string} type - Type of notification (bestie_request, check_in_alert, etc.)\n   * @param {string} title - Notification title\n   * @param {string} message - Notification message\n   * @param {object} metadata - Optional metadata (bestieId, checkInId, etc.)\n   */\n  async createNotification(userId, type, title, message, metadata = {}) {\n    try {\n      await addDoc(collection(db, 'notifications'), {\n        userId,\n        type,\n        title,\n        message,\n        read: false,\n        createdAt: serverTimestamp(),\n        ...metadata,\n      });\n    } catch (error) {\n      console.error('Error creating notification:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Send a bestie request notification\n   */\n  async notifyBestieRequest(userId, requesterName) {\n    return this.createNotification(\n      userId,\n      'bestie_request',\n      'New Bestie Request',\n      `${requesterName} wants to be your bestie!`,\n      { requesterName }\n    );\n  }\n\n  /**\n   * Send a check-in alert notification\n   */\n  async notifyCheckInAlert(userId, bestieName, checkInId) {\n    return this.createNotification(\n      userId,\n      'check_in_alert',\n      'Check-in Alert',\n      `${bestieName} hasn't checked in yet. They might need help.`,\n      { bestieName, checkInId }\n    );\n  }\n\n  /**\n   * Send a missed check-in notification\n   */\n  async notifyMissedCheckIn(userId, checkInId) {\n    return this.createNotification(\n      userId,\n      'missed_check_in',\n      'Missed Check-in',\n      'You missed your check-in. Your besties were notified.',\n      { checkInId }\n    );\n  }\n\n  /**\n   * Send a request attention notification\n   */\n  async notifyRequestAttention(userId, bestieName, bestieId) {\n    return this.createNotification(\n      userId,\n      'request_attention',\n      'Someone Needs You',\n      `${bestieName} is requesting your attention`,\n      { bestieName, bestieId }\n    );\n  }\n\n  /**\n   * Send a badge earned notification\n   */\n  async notifyBadgeEarned(userId, badgeName, badgeDescription) {\n    return this.createNotification(\n      userId,\n      'badge_earned',\n      'New Badge Unlocked!',\n      `You earned the \"${badgeName}\" badge! ${badgeDescription}`,\n      { badgeName, badgeDescription }\n    );\n  }\n\n  /**\n   * Send a system notification\n   */\n  async notifySystem(userId, title, message) {\n    return this.createNotification(\n      userId,\n      'system',\n      title,\n      message\n    );\n  }\n\n  /**\n   * Send welcome notification to new users\n   */\n  async notifyWelcome(userId, displayName) {\n    return this.createNotification(\n      userId,\n      'system',\n      `Welcome to Besties, ${displayName}!`,\n      'Start by adding your first bestie and creating a check-in. We\\'ve got your back!'\n    );\n  }\n\n  /**\n   * Send notification when a bestie accepts your request\n   */\n  async notifyBestieAccepted(userId, bestieName) {\n    return this.createNotification(\n      userId,\n      'bestie_request',\n      'Bestie Request Accepted!',\n      `${bestieName} accepted your bestie request. Stay safe together!`,\n      { bestieName }\n    );\n  }\n\n  /**\n   * Send notification when a check-in is completed successfully\n   */\n  async notifyCheckInComplete(userId, checkInName) {\n    return this.createNotification(\n      userId,\n      'check_in_alert',\n      'Check-in Complete',\n      `Great job! You completed \"${checkInName}\" safely.`,\n      { checkInName }\n    );\n  }\n}\n\nexport const notificationService = new NotificationService();\nexport default notificationService;\n","/**\n * Phone number utility functions for E.164 formatting\n * E.164 format: +[country code][phone number]\n * Example: +61412345678\n */\n\n/**\n * Format a phone number to E.164 standard\n * @param {string} phoneNumber - The phone number to format\n * @param {string} countryCode - The country code (e.g., '+61', '+1')\n * @returns {string} - Formatted phone number in E.164 format\n */\nexport const formatToE164 = (phoneNumber, countryCode = '+1') => {\n  if (!phoneNumber) return '';\n\n  // If already in E.164 format (starts with +), return as is\n  if (phoneNumber.startsWith('+')) {\n    return phoneNumber.replace(/\\s/g, '');\n  }\n\n  // Remove all non-digit characters\n  const digitsOnly = phoneNumber.replace(/\\D/g, '');\n\n  // If empty after cleaning, return empty string\n  if (!digitsOnly) return '';\n\n  // Add country code if not present\n  return `${countryCode}${digitsOnly}`;\n};\n\n/**\n * Detect country code from phone number\n * @param {string} phoneNumber - The phone number\n * @returns {string} - Detected country code or default '+1'\n */\nexport const detectCountryCode = (phoneNumber) => {\n  if (!phoneNumber) return '+1';\n\n  if (phoneNumber.startsWith('+1')) return '+1';\n  if (phoneNumber.startsWith('+44')) return '+44';\n  if (phoneNumber.startsWith('+61')) return '+61';\n  if (phoneNumber.startsWith('+91')) return '+91';\n\n  // Default to US/Canada\n  return '+1';\n};\n\n/**\n * Parse E.164 phone number to separate country code and number\n * @param {string} e164Number - Phone number in E.164 format\n * @returns {object} - { countryCode, phoneNumber }\n */\nexport const parseE164 = (e164Number) => {\n  if (!e164Number || !e164Number.startsWith('+')) {\n    return { countryCode: '+1', phoneNumber: e164Number || '' };\n  }\n\n  // Try to match known country codes\n  if (e164Number.startsWith('+1')) {\n    return { countryCode: '+1', phoneNumber: e164Number.slice(2) };\n  }\n  if (e164Number.startsWith('+44')) {\n    return { countryCode: '+44', phoneNumber: e164Number.slice(3) };\n  }\n  if (e164Number.startsWith('+61')) {\n    return { countryCode: '+61', phoneNumber: e164Number.slice(3) };\n  }\n  if (e164Number.startsWith('+91')) {\n    return { countryCode: '+91', phoneNumber: e164Number.slice(3) };\n  }\n\n  // Fallback: assume first 1-3 digits are country code\n  const match = e164Number.match(/^\\+(\\d{1,3})(.*)$/);\n  if (match) {\n    return { countryCode: `+${match[1]}`, phoneNumber: match[2] };\n  }\n\n  return { countryCode: '+1', phoneNumber: e164Number };\n};\n\n/**\n * Display phone number in a user-friendly format\n * @param {string} e164Number - Phone number in E.164 format\n * @returns {string} - Formatted display string\n */\nexport const formatForDisplay = (e164Number) => {\n  if (!e164Number) return '';\n\n  const { countryCode, phoneNumber } = parseE164(e164Number);\n\n  // Format based on country\n  if (countryCode === '+1') {\n    // US/Canada: +1 (555) 123-4567\n    if (phoneNumber.length === 10) {\n      return `${countryCode} (${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3, 6)}-${phoneNumber.slice(6)}`;\n    }\n  } else if (countryCode === '+61') {\n    // Australia: +61 412 345 678\n    if (phoneNumber.length === 9) {\n      return `${countryCode} ${phoneNumber.slice(0, 3)} ${phoneNumber.slice(3, 6)} ${phoneNumber.slice(6)}`;\n    }\n  } else if (countryCode === '+44') {\n    // UK: +44 7911 123456\n    if (phoneNumber.length === 10) {\n      return `${countryCode} ${phoneNumber.slice(0, 4)} ${phoneNumber.slice(4)}`;\n    }\n  } else if (countryCode === '+91') {\n    // India: +91 98765 43210\n    if (phoneNumber.length === 10) {\n      return `${countryCode} ${phoneNumber.slice(0, 5)} ${phoneNumber.slice(5)}`;\n    }\n  }\n\n  // Fallback: just add space after country code\n  return `${countryCode} ${phoneNumber}`;\n};\n\n/**\n * Validate E.164 phone number\n * @param {string} phoneNumber - Phone number to validate\n * @returns {boolean} - True if valid E.164 format\n */\nexport const isValidE164 = (phoneNumber) => {\n  if (!phoneNumber) return false;\n\n  // E.164 format: + followed by 1-15 digits\n  const e164Regex = /^\\+[1-9]\\d{1,14}$/;\n  return e164Regex.test(phoneNumber);\n};\n\n/**\n * Normalize phone number from various formats to E.164\n * Handles common Australian formats:\n * - 0412 345 678 -> +61412345678\n * - 04 1234 5678 -> +61412345678\n * - 412345678 -> +61412345678\n */\nexport const normalizeAustralianPhone = (phoneNumber) => {\n  if (!phoneNumber) return '';\n\n  // Already in E.164\n  if (phoneNumber.startsWith('+61')) {\n    return phoneNumber.replace(/\\s/g, '');\n  }\n\n  // Remove all non-digits\n  const digitsOnly = phoneNumber.replace(/\\D/g, '');\n\n  // If starts with 0, remove it (Australian mobile numbers)\n  const withoutLeadingZero = digitsOnly.startsWith('0') ? digitsOnly.slice(1) : digitsOnly;\n\n  // Add +61\n  return `+61${withoutLeadingZero}`;\n};\n\nconst phoneUtils = {\n  formatToE164,\n  detectCountryCode,\n  parseE164,\n  formatForDisplay,\n  isValidE164,\n  normalizeAustralianPhone,\n};\n\nexport default phoneUtils;\n","import { db } from './firebase';\nimport { doc, getDoc, setDoc, updateDoc, arrayUnion } from 'firebase/firestore';\nimport { notificationService } from './notificationService';\n\n/**\n * Check if user's profile is 100% complete\n * @param {object} userData - User data from Firestore\n * @param {object} currentUser - Firebase auth user\n * @param {number} bestiesCount - Number of accepted besties\n * @returns {boolean} - True if profile is 100% complete\n */\nexport const isProfileComplete = (userData, currentUser, bestiesCount) => {\n  const hasEmail = !!currentUser?.email;\n  const hasPhone = !!userData?.phoneNumber;\n  const hasPhoto = !!userData?.photoURL;\n  const hasBio = !!userData?.profile?.bio;\n  const hasBesties = bestiesCount >= 5;\n\n  return hasEmail && hasPhone && hasPhoto && hasBio && hasBesties;\n};\n\n/**\n * Award the Profile Perfectionist badge when profile is 100% complete\n * @param {string} userId - User ID\n * @returns {Promise<boolean>} - True if badge was awarded (first time), false if already had it\n */\nexport const awardProfileCompletionBadge = async (userId) => {\n  try {\n    const BADGE_ID = 'profile_perfectionist';\n    const badgeDoc = await getDoc(doc(db, 'badges', userId));\n\n    // Check if user already has this badge\n    if (badgeDoc.exists()) {\n      const existingBadges = badgeDoc.data().badges || [];\n      const alreadyHasBadge = existingBadges.some(b => b.id === BADGE_ID);\n\n      if (alreadyHasBadge) {\n        return false; // Already has the badge, don't celebrate again\n      }\n\n      // Add the badge\n      await updateDoc(doc(db, 'badges', userId), {\n        badges: arrayUnion({\n          id: BADGE_ID,\n          name: 'Profile Perfectionist',\n          description: 'Completed your full profile - ready to connect!',\n          icon: '‚≠ê',\n          earnedAt: new Date(),\n          category: 'profile'\n        })\n      });\n    } else {\n      // Create badges document with the profile completion badge\n      await setDoc(doc(db, 'badges', userId), {\n        badges: [{\n          id: BADGE_ID,\n          name: 'Profile Perfectionist',\n          description: 'Completed your full profile - ready to connect!',\n          icon: '‚≠ê',\n          earnedAt: new Date(),\n          category: 'profile'\n        }]\n      });\n    }\n\n    // Send notification\n    await notificationService.notifyBadgeEarned(\n      userId,\n      'Profile Perfectionist',\n      'You completed your entire profile! You\\'re all set to stay safe with your besties.'\n    );\n\n    return true; // Badge was awarded for the first time\n  } catch (error) {\n    console.error('Error awarding profile completion badge:', error);\n    return false;\n  }\n};\n\n/**\n * Check and award badge if profile becomes complete\n * This should be called after profile updates\n * @param {string} userId - User ID\n * @param {object} userData - Updated user data\n * @param {object} currentUser - Firebase auth user\n * @param {number} bestiesCount - Number of accepted besties\n * @returns {Promise<boolean>} - True if badge was awarded (trigger celebration!)\n */\nexport const checkAndAwardProfileCompletion = async (userId, userData, currentUser, bestiesCount) => {\n  const profileComplete = isProfileComplete(userData, currentUser, bestiesCount);\n\n  if (profileComplete) {\n    const wasAwarded = await awardProfileCompletionBadge(userId);\n    return wasAwarded; // Return true only if it's the first time\n  }\n\n  return false;\n};\n\nconst profileCompletionService = {\n  isProfileComplete,\n  awardProfileCompletionBadge,\n  checkAndAwardProfileCompletion\n};\n\nexport default profileCompletionService;\n","import React, { useEffect, useState } from 'react';\nimport ConfettiCelebration from './ConfettiCelebration';\n\nconst ProfileCompletionModal = ({ isOpen, onClose }) => {\n  const [showConfetti, setShowConfetti] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setShowConfetti(true);\n      // Auto-close confetti after 5 seconds\n      const timer = setTimeout(() => {\n        setShowConfetti(false);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {/* Confetti */}\n      {showConfetti && <ConfettiCelebration />}\n\n      {/* Modal Overlay */}\n      <div className=\"fixed inset-0 bg-black/60 dark:bg-black/75 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in\">\n        {/* Modal Card */}\n        <div className=\"card max-w-lg w-full p-8 animate-scale-up relative overflow-hidden bg-white dark:bg-gray-800\">\n          {/* Floating decorative elements */}\n          <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n            <div className=\"absolute top-6 left-6 text-3xl animate-float opacity-60\">‚≠ê</div>\n            <div className=\"absolute top-10 right-8 text-2xl animate-float delay-1s opacity-50\">üí´</div>\n            <div className=\"absolute bottom-10 left-10 text-2xl animate-float delay-2s opacity-60\">‚ú®</div>\n            <div className=\"absolute bottom-6 right-6 text-3xl animate-float delay-3s opacity-50\">üéâ</div>\n          </div>\n\n          <div className=\"relative z-10 text-center\">\n            {/* Badge Icon */}\n            <div className=\"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-yellow-200 to-yellow-400 rounded-full mb-6 shadow-2xl animate-bounce-slow\">\n              <span className=\"text-5xl\">‚≠ê</span>\n            </div>\n\n            {/* Congratulations Text */}\n            <h2 className=\"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3\">\n              Congratulations!\n            </h2>\n\n            <h3 className=\"text-2xl font-display text-text-primary dark:text-white mb-4\">\n              Profile Perfectionist Unlocked!\n            </h3>\n\n            <p className=\"text-lg text-text-secondary dark:text-gray-300 mb-6 max-w-md mx-auto\">\n              You've completed your entire profile! Your besties can now see all your info, and you're all set to stay safe together.\n            </p>\n\n            {/* Badge Display */}\n            <div className=\"inline-block bg-gradient-to-br from-pink-50 to-purple-50 dark:from-pink-900/30 dark:to-purple-900/30 rounded-2xl p-6 mb-6 border-2 border-pink-200 dark:border-pink-700 shadow-xl\">\n              <div className=\"text-5xl mb-2\">‚≠ê</div>\n              <div className=\"text-xl font-display text-text-primary dark:text-white mb-1\">Profile Perfectionist</div>\n              <div className=\"text-sm text-text-secondary dark:text-gray-300\">\n                Completed your full profile\n              </div>\n            </div>\n\n            {/* Fun Stats */}\n            <div className=\"bg-gradient-to-r from-pink-100 to-purple-100 dark:from-pink-900/40 dark:to-purple-900/40 rounded-xl p-4 mb-6 border border-pink-200 dark:border-pink-800\">\n              <div className=\"text-sm font-semibold text-text-primary dark:text-white mb-2\">\n                üéØ Profile Complete! Here's what you unlocked:\n              </div>\n              <div className=\"space-y-1 text-xs text-text-secondary dark:text-gray-300\">\n                <div>‚úÖ Full profile visibility to your besties</div>\n                <div>‚úÖ Profile Perfectionist badge</div>\n                <div>‚úÖ Priority support access</div>\n                <div>‚úÖ Shareable profile cards</div>\n              </div>\n            </div>\n\n            {/* Action Button */}\n            <button\n              onClick={onClose}\n              className=\"btn btn-primary w-full max-w-xs mx-auto shadow-lg hover:shadow-xl transition-all\"\n            >\n              Awesome! Let's Go! üéâ\n            </button>\n\n            <p className=\"text-xs text-text-secondary dark:text-gray-400 mt-4\">\n              Check your Notifications to see your new badge\n            </p>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProfileCompletionModal;\n","/* =================================================================\n   ‚ö†Ô∏è  AI PROTECTION: DO NOT EDIT THIS FILE ‚ö†Ô∏è\n   Profile Editor - Do not modify unless explicitly told by the user\n   ================================================================= */\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db, storage, authService } from '../services/firebase';\nimport { doc, updateDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport toast from 'react-hot-toast';\nimport { isValidE164 } from '../utils/phoneUtils';\nimport { checkAndAwardProfileCompletion } from '../services/profileCompletionService';\nimport ProfileCompletionModal from '../components/ProfileCompletionModal';\n\nconst EditProfilePage = () => {\n  const { currentUser, userData } = useAuth();\n  const navigate = useNavigate();\n\n  const [displayName, setDisplayName] = useState(userData?.displayName || '');\n  const [bio, setBio] = useState(userData?.profile?.bio || '');\n  const [birthdate, setBirthdate] = useState(userData?.profile?.birthdate || '');\n  const [phoneNumber, setPhoneNumber] = useState(userData?.phoneNumber || '');\n  const [profilePicture, setProfilePicture] = useState(null);\n  const [previewUrl, setPreviewUrl] = useState(userData?.photoURL || null);\n  const [loading, setLoading] = useState(false);\n\n  // Auto-scroll to section based on hash\n  useEffect(() => {\n    const hash = window.location.hash.slice(1); // Remove #\n    if (hash) {\n      // Wait for content to render\n      setTimeout(() => {\n        const element = document.getElementById(hash);\n        if (element) {\n          element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n          // Optional: highlight the section briefly\n          element.style.transition = 'background-color 0.3s';\n          element.style.backgroundColor = 'rgba(168, 85, 247, 0.1)';\n          setTimeout(() => {\n            element.style.backgroundColor = '';\n          }, 2000);\n        }\n      }, 100);\n    }\n  }, []);\n\n  // Phone verification states\n  const [showPhoneVerification, setShowPhoneVerification] = useState(false);\n  const [verificationCode, setVerificationCode] = useState('');\n  const [phoneConfirmationResult, setPhoneConfirmationResult] = useState(null);\n  const [pendingPhoneNumber, setPendingPhoneNumber] = useState('');\n\n  // Profile completion celebration\n  const [showCompletionModal, setShowCompletionModal] = useState(false);\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 5 * 1024 * 1024) {\n        toast.error('File size must be less than 5MB');\n        return;\n      }\n      setProfilePicture(file);\n      setPreviewUrl(URL.createObjectURL(file));\n    }\n  };\n\n  const uploadProfilePicture = async () => {\n    if (!profilePicture) return userData?.photoURL || null;\n\n    try {\n      const storageRef = ref(storage, `profile-pictures/${currentUser.uid}/${Date.now()}_${profilePicture.name}`);\n      await uploadBytes(storageRef, profilePicture);\n      const url = await getDownloadURL(storageRef);\n      return url;\n    } catch (error) {\n      console.error('Error uploading profile picture:', error);\n      toast.error('Failed to upload profile picture');\n      return userData?.photoURL || null;\n    }\n  };\n\n  const handleSendPhoneVerification = async () => {\n    if (!phoneNumber || phoneNumber === userData?.phoneNumber) {\n      toast.error('Please enter a new phone number');\n      return;\n    }\n\n    // Validate phone number format\n    const trimmed = phoneNumber.trim();\n\n    // Check for empty after trim\n    if (!trimmed) {\n      toast.error('Please enter a phone number');\n      return;\n    }\n\n    // Check for invalid characters (only allow digits, +, spaces, hyphens, parentheses)\n    if (!/^[0-9+\\s\\-()]+$/.test(trimmed)) {\n      toast.error('Phone number can only contain digits, +, spaces, hyphens, and parentheses');\n      return;\n    }\n\n    // Format phone number - ensure it starts with +\n    let formattedPhone = trimmed.replace(/[\\s\\-()]/g, ''); // Remove formatting characters\n\n    if (!formattedPhone.startsWith('+')) {\n      // If it doesn't start with +, assume Australia +61 and remove leading 0\n      if (formattedPhone.startsWith('0')) {\n        formattedPhone = '+61' + formattedPhone.slice(1);\n      } else {\n        // If no country code and doesn't start with 0, assume it's missing +\n        formattedPhone = '+' + formattedPhone;\n      }\n    }\n\n    // Validate E.164 format (+ followed by 1-15 digits)\n    if (!isValidE164(formattedPhone)) {\n      toast.error('Invalid phone number format. Please enter a valid international number (e.g., +61412345678 or 0412345678)', { duration: 5000 });\n      return;\n    }\n\n    // Check length (must be between 8-15 digits after country code)\n    const digitsOnly = formattedPhone.slice(1); // Remove the +\n    if (digitsOnly.length < 8) {\n      toast.error('Phone number is too short. Please enter a complete phone number');\n      return;\n    }\n    if (digitsOnly.length > 15) {\n      toast.error('Phone number is too long. Please check and try again');\n      return;\n    }\n\n    setLoading(true);\n\n    // Setup reCAPTCHA\n    const recaptchaResult = authService.setupRecaptcha('phone-recaptcha-container');\n    if (!recaptchaResult.success) {\n      toast.error('Failed to set up verification. Please refresh the page.');\n      setLoading(false);\n      return;\n    }\n\n    // Send verification code\n    const result = await authService.sendPhoneVerification(formattedPhone, recaptchaResult.verifier);\n    setLoading(false);\n\n    if (result.success) {\n      setPhoneConfirmationResult(result.confirmationResult);\n      setPendingPhoneNumber(formattedPhone);\n      setShowPhoneVerification(true);\n      toast.success('Verification code sent to your phone!');\n    } else {\n      toast.error(result.error || 'Failed to send verification code');\n    }\n  };\n\n  const handleVerifyPhoneCode = async () => {\n    if (!verificationCode || !phoneConfirmationResult) {\n      toast.error('Please enter the verification code');\n      return;\n    }\n\n    setLoading(true);\n\n    const result = await authService.verifyPhoneCode(phoneConfirmationResult, verificationCode);\n\n    if (result.success) {\n      toast.success('Phone number verified!');\n      setShowPhoneVerification(false);\n      setPhoneNumber(pendingPhoneNumber);\n\n      // CRITICAL: Force auth token refresh after phone verification\n      // This ensures Firestore security rules have the updated auth info\n      try {\n        await currentUser.getIdToken(true); // Force refresh\n        // Small delay to ensure token propagates to Firestore\n        await new Promise(resolve => setTimeout(resolve, 500));\n      } catch (error) {\n        console.error('Token refresh error:', error);\n      }\n\n      // Check if SMS is not enabled and prompt user\n      if (!userData?.notificationPreferences?.sms) {\n        toast(\n          (t) => (\n            <div className=\"flex flex-col gap-2\">\n              <div className=\"font-semibold\">üì± Enable SMS Alerts?</div>\n              <div className=\"text-sm\">Would you like to receive emergency alerts via SMS?</div>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={async () => {\n                    try {\n                      await updateDoc(doc(db, 'users', currentUser.uid), {\n                        'notificationPreferences.sms': true\n                      });\n                      toast.success('SMS alerts enabled!');\n                      toast.dismiss(t.id);\n                    } catch (error) {\n                      console.error('Error enabling SMS:', error);\n                      toast.error('Failed to enable SMS');\n                    }\n                  }}\n                  className=\"btn btn-primary btn-sm\"\n                >\n                  Enable SMS\n                </button>\n                <button\n                  onClick={() => toast.dismiss(t.id)}\n                  className=\"btn btn-secondary btn-sm\"\n                >\n                  Not Now\n                </button>\n              </div>\n              <div className=\"text-xs text-gray-500\">You can change this later in Settings</div>\n            </div>\n          ),\n          { duration: 10000 }\n        );\n      }\n\n      // Now save the profile with the verified phone number\n      saveProfileChanges(pendingPhoneNumber);\n    } else {\n      setLoading(false);\n      toast.error(result.error || 'Invalid verification code');\n    }\n  };\n\n  const saveProfileChanges = async (verifiedPhoneNumber = null) => {\n    try {\n      // Upload profile picture if changed\n      let photoURL = userData?.photoURL || null;\n\n      if (profilePicture) {\n        const uploadedPhotoURL = await uploadProfilePicture();\n        if (uploadedPhotoURL) {\n          photoURL = uploadedPhotoURL;\n        }\n      }\n\n      // Update Firestore\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        displayName,\n        phoneNumber: verifiedPhoneNumber || phoneNumber,\n        photoURL,\n        'profile.bio': bio,\n        'profile.birthdate': birthdate,\n        updatedAt: new Date(),\n      });\n\n      toast.success('Profile updated successfully!');\n\n      // Check if profile is now complete and award badge\n      // Get besties count\n      const bestiesQuery1 = query(\n        collection(db, 'besties'),\n        where('requesterId', '==', currentUser.uid),\n        where('status', '==', 'accepted')\n      );\n      const bestiesQuery2 = query(\n        collection(db, 'besties'),\n        where('recipientId', '==', currentUser.uid),\n        where('status', '==', 'accepted')\n      );\n      const [snapshot1, snapshot2] = await Promise.all([\n        getDocs(bestiesQuery1),\n        getDocs(bestiesQuery2)\n      ]);\n      const bestiesCount = snapshot1.size + snapshot2.size;\n\n      // Create updated userData object\n      const updatedUserData = {\n        ...userData,\n        displayName,\n        phoneNumber: verifiedPhoneNumber || phoneNumber,\n        photoURL,\n        profile: {\n          ...userData?.profile,\n          bio,\n          birthdate\n        }\n      };\n\n      // Check and award profile completion badge\n      const wasAwarded = await checkAndAwardProfileCompletion(\n        currentUser.uid,\n        updatedUserData,\n        currentUser,\n        bestiesCount\n      );\n\n      if (wasAwarded) {\n        // Show celebration modal\n        setShowCompletionModal(true);\n        // Don't navigate yet, let user close the modal first\n      } else {\n        // Navigate after a short delay\n        setTimeout(() => {\n          navigate('/profile');\n        }, 500);\n      }\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error(error.message || 'Failed to update profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async (e) => {\n    e.preventDefault();\n\n    // Check if phone number has changed\n    const phoneChanged = phoneNumber && phoneNumber !== userData?.phoneNumber;\n\n    if (phoneChanged) {\n      // Phone number changed, require verification\n      handleSendPhoneVerification();\n      return; // Don't save yet, wait for verification\n    }\n\n    // If phone number hasn't changed, save normally\n    setLoading(true);\n    await saveProfileChanges();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n\n      <div className=\"max-w-2xl mx-auto p-4 pb-32 md:pb-20\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">Edit Profile</h1>\n          <p className=\"text-text-secondary\">Update your personal information</p>\n        </div>\n\n        <form onSubmit={handleSave} className=\"space-y-6\">\n          {/* Profile Picture */}\n          <div id=\"profile-picture\" className=\"card p-6\">\n            <label className=\"block text-lg font-display text-text-primary mb-4\">\n              Profile Picture\n            </label>\n            \n            <div className=\"flex items-center gap-6\">\n              <div className=\"w-24 h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-3xl font-display overflow-hidden\">\n                {previewUrl ? (\n                  <img src={previewUrl} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                ) : (\n                  displayName?.[0] || 'U'\n                )}\n              </div>\n\n              <div className=\"flex-1\">\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleFileChange}\n                  className=\"hidden\"\n                  id=\"profile-picture\"\n                />\n                <label\n                  htmlFor=\"profile-picture\"\n                  className=\"btn btn-secondary cursor-pointer inline-block\"\n                >\n                  Choose Photo\n                </label>\n                <div className=\"text-sm text-text-secondary mt-2\">\n                  JPG, PNG or GIF. Max size 5MB\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Basic Info */}\n          <div id=\"basic-info\" className=\"card p-6\">\n            <h3 className=\"text-lg font-display text-text-primary mb-4\">Basic Information</h3>\n\n            <div className=\"space-y-4\">\n              <div id=\"display-name\">\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  Display Name\n                </label>\n                <input\n                  type=\"text\"\n                  value={displayName}\n                  onChange={(e) => setDisplayName(e.target.value)}\n                  className=\"input\"\n                  placeholder=\"Your name\"\n                  required\n                />\n              </div>\n\n              <div id=\"bio\">\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  Bio\n                </label>\n                <textarea\n                  value={bio}\n                  onChange={(e) => setBio(e.target.value)}\n                  className=\"input min-h-[80px] resize-none\"\n                  placeholder=\"Tell people about yourself...\"\n                  maxLength={150}\n                />\n                <div className=\"text-xs text-text-secondary mt-1\">\n                  {bio.length}/150 characters\n                </div>\n              </div>\n\n              <div id=\"birthday\">\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  Birthday üéÇ\n                </label>\n                <input\n                  type=\"date\"\n                  value={birthdate}\n                  onChange={(e) => setBirthdate(e.target.value)}\n                  className=\"input\"\n                  max={new Date().toISOString().split('T')[0]}\n                />\n                <div className=\"text-xs text-text-secondary mt-1\">\n                  Your besties will be notified on your birthday! (Optional)\n                </div>\n              </div>\n\n              <div id=\"phone\">\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  Phone Number\n                </label>\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"tel\"\n                    value={phoneNumber}\n                    onChange={(e) => setPhoneNumber(e.target.value)}\n                    className=\"input flex-1\"\n                    placeholder=\"+61 400 000 000 or 0400 000 000\"\n                  />\n                  {phoneNumber !== userData?.phoneNumber && phoneNumber && (\n                    <button\n                      type=\"button\"\n                      onClick={handleSendPhoneVerification}\n                      disabled={loading}\n                      className=\"btn btn-primary whitespace-nowrap\"\n                    >\n                      {loading ? 'Sending...' : 'Verify Now'}\n                    </button>\n                  )}\n                </div>\n                {phoneNumber !== userData?.phoneNumber && phoneNumber && (\n                  <div className=\"text-xs text-orange-600 dark:text-orange-400 mt-1\">\n                    ‚ö†Ô∏è Click \"Verify Now\" to verify this number via SMS\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Account Info */}\n          <div className=\"card p-6\">\n            <h3 className=\"text-lg font-display text-text-primary mb-4\">Account Info</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <div className=\"text-sm text-text-secondary mb-1\">Email</div>\n                <div className=\"font-semibold text-text-primary\">{currentUser?.email}</div>\n                <div className=\"text-xs text-text-secondary mt-1\">\n                  To change your email, use Google authentication\n                </div>\n              </div>\n\n              <div>\n                <div className=\"text-sm text-text-secondary mb-1\">Member Since</div>\n                <div className=\"font-semibold text-text-primary\">\n                  {userData?.stats?.joinedAt?.toDate().toLocaleDateString() || 'Recently'}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={() => navigate('/profile')}\n              className=\"flex-1 btn btn-secondary\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 btn btn-primary flex items-center justify-center gap-2\"\n            >\n              {loading && (\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n              )}\n              {loading ? 'Sending verification...' : 'Save Changes'}\n            </button>\n          </div>\n        </form>\n\n        {/* Phone Verification Modal */}\n        {showPhoneVerification && (\n          <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\n            <div className=\"card dark:bg-gray-800 p-6 max-w-md w-full animate-scale-up\">\n              <h2 className=\"text-2xl font-display text-text-primary mb-2\">Verify Phone Number</h2>\n              <p className=\"text-text-secondary mb-4\">\n                We sent a 6-digit code to <strong>{pendingPhoneNumber}</strong>\n              </p>\n\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  Verification Code\n                </label>\n                <input\n                  type=\"text\"\n                  value={verificationCode}\n                  onChange={(e) => setVerificationCode(e.target.value)}\n                  className=\"input\"\n                  placeholder=\"123456\"\n                  maxLength={6}\n                  autoFocus\n                />\n              </div>\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => {\n                    setShowPhoneVerification(false);\n                    setVerificationCode('');\n                    setPhoneConfirmationResult(null);\n                  }}\n                  className=\"flex-1 btn btn-secondary\"\n                  disabled={loading}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleVerifyPhoneCode}\n                  className=\"flex-1 btn btn-primary flex items-center justify-center gap-2\"\n                  disabled={loading || verificationCode.length !== 6}\n                >\n                  {loading && (\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                  )}\n                  {loading ? 'Verifying & Saving...' : 'Verify & Save'}\n                </button>\n              </div>\n\n              <p className=\"text-xs text-text-secondary mt-4 text-center\">\n                Didn't receive the code?{' '}\n                <button\n                  onClick={handleSendPhoneVerification}\n                  className=\"text-primary underline\"\n                  disabled={loading}\n                >\n                  Resend\n                </button>\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Invisible reCAPTCHA container */}\n        <div id=\"phone-recaptcha-container\"></div>\n\n        {/* Profile Completion Celebration Modal */}\n        <ProfileCompletionModal\n          isOpen={showCompletionModal}\n          onClose={() => {\n            setShowCompletionModal(false);\n            navigate('/profile');\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default EditProfilePage;\n"],"names":["_ref","trigger","type","useEffect","fireConfetti","count","defaults","origin","y","shapes","colors","fire","particleRatio","opts","confetti","_objectSpread","particleCount","Math","floor","spread","startVelocity","decay","scalar","setTimeout","angle","x","notificationService","createNotification","userId","title","message","metadata","arguments","length","undefined","addDoc","collection","db","read","createdAt","serverTimestamp","error","console","notifyBestieRequest","requesterName","this","concat","notifyCheckInAlert","bestieName","checkInId","notifyMissedCheckIn","notifyRequestAttention","bestieId","notifyBadgeEarned","badgeName","badgeDescription","notifySystem","notifyWelcome","displayName","notifyBestieAccepted","notifyCheckInComplete","checkInName","isValidE164","phoneNumber","test","isProfileComplete","userData","currentUser","bestiesCount","_userData$profile","hasEmail","email","hasPhone","hasPhoto","photoURL","hasBio","profile","bio","awardProfileCompletionBadge","async","BADGE_ID","badgeDoc","getDoc","doc","exists","existingBadges","data","badges","some","b","id","updateDoc","arrayUnion","name","description","icon","earnedAt","Date","category","setDoc","checkAndAwardProfileCompletion","isOpen","onClose","showConfetti","setShowConfetti","useState","timer","clearTimeout","_jsxs","_Fragment","children","_jsx","ConfettiCelebration","className","onClick","EditProfilePage","_userData$profile2","_userData$stats","_userData$stats$joine","useAuth","navigate","useNavigate","setDisplayName","setBio","birthdate","setBirthdate","setPhoneNumber","profilePicture","setProfilePicture","previewUrl","setPreviewUrl","loading","setLoading","hash","window","location","slice","element","document","getElementById","scrollIntoView","behavior","block","style","transition","backgroundColor","showPhoneVerification","setShowPhoneVerification","verificationCode","setVerificationCode","phoneConfirmationResult","setPhoneConfirmationResult","pendingPhoneNumber","setPendingPhoneNumber","showCompletionModal","setShowCompletionModal","handleSendPhoneVerification","toast","trimmed","trim","formattedPhone","replace","startsWith","duration","digitsOnly","recaptchaResult","authService","setupRecaptcha","success","result","sendPhoneVerification","verifier","confirmationResult","saveProfileChanges","verifiedPhoneNumber","uploadedPhotoURL","storageRef","ref","storage","uid","now","uploadBytes","getDownloadURL","uploadProfilePicture","updatedAt","bestiesQuery1","query","where","bestiesQuery2","snapshot1","snapshot2","Promise","all","getDocs","size","updatedUserData","onSubmit","e","preventDefault","src","alt","accept","onChange","file","target","files","URL","createObjectURL","htmlFor","value","placeholder","required","maxLength","max","toISOString","split","disabled","stats","joinedAt","toDate","toLocaleDateString","autoFocus","verifyPhoneCode","_userData$notificatio","getIdToken","resolve","notificationPreferences","sms","t","dismiss","ProfileCompletionModal"],"sourceRoot":""}