{"version":3,"file":"static/js/211.ed0298d8.chunk.js","mappings":"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","sources":["pages/CheckInHistoryPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db } from '../services/firebase';\nimport { collection, query, where, getDocs, orderBy, limit, startAfter, doc, getDoc } from 'firebase/firestore';\nimport { formatDistanceToNow, format } from 'date-fns';\n\nconst ITEMS_PER_PAGE = 20;\n\nconst CheckInHistoryPage = () => {\n  const navigate = useNavigate();\n  const { currentUser, userData } = useAuth();\n  const [history, setHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [filter, setFilter] = useState('all'); // all, completed, alerted\n  const [lastDoc, setLastDoc] = useState(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [expandedItems, setExpandedItems] = useState(new Set());\n  const [bestieNames, setBestieNames] = useState({});\n\n  useEffect(() => {\n    loadHistory();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUser, filter]);\n\n  // Fetch bestie names\n  useEffect(() => {\n    const fetchBestieNames = async () => {\n      const uniqueBestieIds = new Set();\n      history.forEach(checkIn => {\n        if (checkIn.bestieIds) {\n          checkIn.bestieIds.forEach(id => uniqueBestieIds.add(id));\n        }\n      });\n\n      setBestieNames(prevNames => {\n        const names = { ...prevNames };\n        const promises = [];\n\n        for (const bestieId of uniqueBestieIds) {\n          if (!names[bestieId]) {\n            promises.push(\n              getDoc(doc(db, 'users', bestieId))\n                .then(bestieDoc => {\n                  if (bestieDoc.exists()) {\n                    const bestieData = bestieDoc.data();\n                    names[bestieId] = bestieData.displayName || 'Unknown';\n                  } else {\n                    names[bestieId] = 'Unknown';\n                  }\n                })\n                .catch(error => {\n                  console.error('Error fetching bestie name:', error);\n                  names[bestieId] = 'Unknown';\n                })\n            );\n          }\n        }\n\n        if (promises.length > 0) {\n          Promise.all(promises).then(() => setBestieNames({ ...names }));\n        }\n\n        return names;\n      });\n    };\n\n    if (history.length > 0) {\n      fetchBestieNames();\n    }\n  }, [history]);\n\n  const loadHistory = async (loadMore = false) => {\n    if (!currentUser) return;\n\n    if (loadMore) {\n      setLoadingMore(true);\n    } else {\n      setLoading(true);\n      setHistory([]);\n      setLastDoc(null);\n      setHasMore(true);\n    }\n\n    try {\n      let q = query(\n        collection(db, 'checkins'),\n        where('userId', '==', currentUser.uid),\n        orderBy('createdAt', 'desc'),\n        limit(ITEMS_PER_PAGE)\n      );\n\n      if (filter === 'completed') {\n        q = query(\n          collection(db, 'checkins'),\n          where('userId', '==', currentUser.uid),\n          where('status', '==', 'completed'),\n          orderBy('createdAt', 'desc'),\n          limit(ITEMS_PER_PAGE)\n        );\n      } else if (filter === 'alerted') {\n        q = query(\n          collection(db, 'checkins'),\n          where('userId', '==', currentUser.uid),\n          where('status', '==', 'alerted'),\n          orderBy('createdAt', 'desc'),\n          limit(ITEMS_PER_PAGE)\n        );\n      }\n\n      // If loading more, start after the last document\n      if (loadMore && lastDoc) {\n        q = query(q, startAfter(lastDoc));\n      }\n\n      const snapshot = await getDocs(q);\n      const checkIns = [];\n      snapshot.forEach((doc) => {\n        checkIns.push({ id: doc.id, ...doc.data() });\n      });\n\n      // Update state\n      if (loadMore) {\n        setHistory(prev => [...prev, ...checkIns]);\n      } else {\n        setHistory(checkIns);\n      }\n\n      // Update pagination state\n      setLastDoc(snapshot.docs[snapshot.docs.length - 1] || null);\n      setHasMore(checkIns.length === ITEMS_PER_PAGE);\n\n      setLoading(false);\n      setLoadingMore(false);\n    } catch (error) {\n      console.error('Error loading history:', error);\n      if (!loadMore) setHistory([]);\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  };\n\n  const handleLoadMore = () => {\n    loadHistory(true);\n  };\n\n  const toggleExpanded = (id) => {\n    const newExpanded = new Set(expandedItems);\n    if (newExpanded.has(id)) {\n      newExpanded.delete(id);\n    } else {\n      newExpanded.add(id);\n    }\n    setExpandedItems(newExpanded);\n  };\n\n  const getStatusBadge = (status) => {\n    switch (status) {\n      case 'completed':\n        return <span className=\"badge badge-success\">‚úÖ Safe</span>;\n      case 'alerted':\n        return <span className=\"badge badge-warning\">üö® Alerted</span>;\n      case 'active':\n        return <span className=\"badge badge-primary\">‚è∞ Active</span>;\n      default:\n        return <span className=\"badge\">Unknown</span>;\n    }\n  };\n\n  const formatDuration = (minutes) => {\n    if (minutes < 60) return `${minutes}m`;\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n  };\n\n  const hasExpandableContent = (checkIn) => {\n    return (checkIn.notes || checkIn.meetingWith || checkIn.socialMediaLinks ||\n            checkIn.gpsCoords || checkIn.photoURLs?.length > 0 ||\n            checkIn.bestieIds?.length > 0 || checkIn.alertTime ||\n            checkIn.completedAt || checkIn.alertedAt);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern dark:bg-dark-pattern\">\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern dark:bg-dark-pattern\">\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n        {/* Back Button - Top */}\n        <button\n          onClick={() => navigate(-1)}\n          className=\"flex items-center gap-2 text-primary dark:text-dark-primary hover:underline mb-4 font-semibold\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          Back\n        </button>\n\n        {/* Header */}\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-display text-text-primary dark:text-dark-text-primary mb-2\">Check-in History</h1>\n          <p className=\"text-text-secondary dark:text-dark-text-secondary\">\n            View all your past check-ins\n          </p>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex gap-2 mb-6 overflow-x-auto pb-2\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ${\n              filter === 'all'\n                ? 'bg-primary text-white'\n                : 'bg-white dark:bg-dark-card text-text-primary dark:text-dark-text-primary hover:bg-gray-50 dark:hover:bg-dark-hover'\n            }`}\n          >\n            All\n          </button>\n          <button\n            onClick={() => setFilter('completed')}\n            className={`px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ${\n              filter === 'completed'\n                ? 'bg-success text-white'\n                : 'bg-white dark:bg-dark-card text-text-primary dark:text-dark-text-primary hover:bg-gray-50 dark:hover:bg-dark-hover'\n            }`}\n          >\n            ‚úÖ Safe\n          </button>\n          <button\n            onClick={() => setFilter('alerted')}\n            className={`px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ${\n              filter === 'alerted'\n                ? 'bg-warning text-white'\n                : 'bg-white dark:bg-dark-card text-text-primary dark:text-dark-text-primary hover:bg-gray-50 dark:hover:bg-dark-hover'\n            }`}\n          >\n            üö® Alerted\n          </button>\n        </div>\n\n        {/* Stats Summary - loads from user document (efficient!) */}\n        <div className=\"card dark:bg-dark-card p-6 mb-6\">\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-display text-primary dark:text-dark-primary\">\n                {userData?.stats?.totalCheckIns || 0}\n              </div>\n              <div className=\"text-sm text-text-secondary dark:text-dark-text-secondary\">Total</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-display text-success dark:text-dark-success\">\n                {userData?.stats?.completedCheckIns || 0}\n              </div>\n              <div className=\"text-sm text-text-secondary dark:text-dark-text-secondary\">Completed</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-display text-warning dark:text-dark-warning\">\n                {userData?.stats?.alertedCheckIns || 0}\n              </div>\n              <div className=\"text-sm text-text-secondary dark:text-dark-text-secondary\">Alerted</div>\n            </div>\n          </div>\n        </div>\n\n        {/* History List */}\n        {history.length === 0 ? (\n          <div className=\"card dark:bg-dark-card p-12 text-center\">\n            <div className=\"text-6xl mb-4\">üìã</div>\n            <h2 className=\"text-2xl font-display text-text-primary dark:text-dark-text-primary mb-2\">\n              No check-ins yet\n            </h2>\n            <p className=\"text-text-secondary dark:text-dark-text-secondary\">\n              Your check-in history will appear here\n            </p>\n          </div>\n        ) : (\n          <>\n            <div className=\"space-y-4\">\n              {history.map((checkIn) => {\n                const isExpanded = expandedItems.has(checkIn.id);\n                const canExpand = hasExpandableContent(checkIn);\n\n                return (\n                  <div\n                    key={checkIn.id}\n                    className={`card dark:bg-dark-card p-4 md:p-6 transition-all ${canExpand ? 'cursor-pointer hover:shadow-lg' : ''}`}\n                    onClick={() => canExpand && toggleExpanded(checkIn.id)}\n                  >\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1 flex-wrap\">\n                          <h3 className=\"font-display text-lg text-text-primary dark:text-dark-text-primary\">\n                            {checkIn.location || 'No location'}\n                          </h3>\n                          {getStatusBadge(checkIn.status)}\n                        </div>\n                        <div className=\"text-sm text-text-secondary dark:text-dark-text-secondary\">\n                          {checkIn.createdAt?.toDate ? formatDistanceToNow(checkIn.createdAt.toDate(), { addSuffix: true }) : 'Unknown time'}\n                        </div>\n                      </div>\n                      {canExpand && (\n                        <button\n                          className=\"text-primary dark:text-dark-primary ml-2 flex-shrink-0\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            toggleExpanded(checkIn.id);\n                          }}\n                        >\n                          <svg\n                            className={`w-6 h-6 transition-transform ${isExpanded ? 'rotate-180' : ''}`}\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                          </svg>\n                        </button>\n                      )}\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4 text-sm mb-3\">\n                      <div>\n                        <div className=\"text-text-secondary dark:text-dark-text-secondary\">Duration</div>\n                        <div className=\"font-semibold text-text-primary dark:text-dark-text-primary\">\n                          {checkIn.duration ? formatDuration(checkIn.duration) : 'N/A'}\n                        </div>\n                      </div>\n                      <div>\n                        <div className=\"text-text-secondary dark:text-dark-text-secondary\">Besties Notified</div>\n                        <div className=\"font-semibold text-text-primary dark:text-dark-text-primary\">\n                          {checkIn.bestieIds?.length || 0}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Expandable Details */}\n                    {isExpanded && (\n                      <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-dark-border space-y-3 animate-fade-in\">\n                        {/* Exact Timestamps */}\n                        <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                          <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                            Timestamps\n                          </div>\n                          <div className=\"space-y-1 text-sm\">\n                            {checkIn.createdAt?.toDate && (\n                              <div className=\"flex justify-between\">\n                                <span className=\"text-text-secondary dark:text-dark-text-secondary\">Created:</span>\n                                <span className=\"font-medium text-text-primary dark:text-dark-text-primary\">\n                                  {format(checkIn.createdAt.toDate(), 'MMM d, yyyy h:mm a')}\n                                </span>\n                              </div>\n                            )}\n                            {checkIn.alertTime?.toDate && (\n                              <div className=\"flex justify-between\">\n                                <span className=\"text-text-secondary dark:text-dark-text-secondary\">Alert Time:</span>\n                                <span className=\"font-medium text-text-primary dark:text-dark-text-primary\">\n                                  {format(checkIn.alertTime.toDate(), 'MMM d, yyyy h:mm a')}\n                                </span>\n                              </div>\n                            )}\n                            {checkIn.completedAt?.toDate && (\n                              <div className=\"flex justify-between\">\n                                <span className=\"text-success dark:text-dark-success\">‚úÖ Completed:</span>\n                                <span className=\"font-medium text-success dark:text-dark-success\">\n                                  {format(checkIn.completedAt.toDate(), 'MMM d, yyyy h:mm a')}\n                                </span>\n                              </div>\n                            )}\n                            {checkIn.alertedAt?.toDate && (\n                              <div className=\"flex justify-between\">\n                                <span className=\"text-warning dark:text-dark-warning\">üö® Alerted:</span>\n                                <span className=\"font-medium text-warning dark:text-dark-warning\">\n                                  {format(checkIn.alertedAt.toDate(), 'MMM d, yyyy h:mm a')}\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n\n                        {/* Besties List */}\n                        {checkIn.bestieIds && checkIn.bestieIds.length > 0 && (\n                          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                            <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                              Notified Besties\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {checkIn.bestieIds.map((bestieId) => (\n                                <span\n                                  key={bestieId}\n                                  className=\"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary dark:bg-primary/20 dark:text-dark-primary rounded-full text-sm\"\n                                >\n                                  üë§ {bestieNames[bestieId] || 'Loading...'}\n                                </span>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Notes */}\n                        {checkIn.notes && (\n                          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                            <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                              Notes\n                            </div>\n                            <div className=\"text-sm text-text-primary dark:text-dark-text-primary italic\">\n                              \"{checkIn.notes}\"\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Meeting With */}\n                        {checkIn.meetingWith && (\n                          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                            <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                              Meeting With\n                            </div>\n                            <div className=\"text-sm text-text-primary dark:text-dark-text-primary\">\n                              {checkIn.meetingWith}\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Social Media Links */}\n                        {checkIn.socialMediaLinks && (\n                          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                            <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                              Social Media Links\n                            </div>\n                            <div className=\"text-sm text-text-primary dark:text-dark-text-primary break-all\">\n                              {checkIn.socialMediaLinks}\n                            </div>\n                          </div>\n                        )}\n\n                        {/* GPS Coordinates */}\n                        {checkIn.gpsCoords && (\n                          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                            <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                              GPS Location\n                            </div>\n                            <div className=\"text-sm text-text-primary dark:text-dark-text-primary\">\n                              üìç {checkIn.gpsCoords.lat.toFixed(6)}, {checkIn.gpsCoords.lng.toFixed(6)}\n                            </div>\n                            <a\n                              href={`https://www.google.com/maps?q=${checkIn.gpsCoords.lat},${checkIn.gpsCoords.lng}`}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"text-xs text-primary dark:text-dark-primary hover:underline mt-1 inline-block\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              View on Google Maps ‚Üí\n                            </a>\n                          </div>\n                        )}\n\n                        {/* Photos */}\n                        {checkIn.photoURLs && checkIn.photoURLs.length > 0 && (\n                          <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3\">\n                            <div className=\"text-xs font-semibold text-text-secondary dark:text-dark-text-secondary mb-2\">\n                              Photos ({checkIn.photoURLs.length})\n                            </div>\n                            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                              {checkIn.photoURLs.map((url, idx) => (\n                                <a\n                                  key={idx}\n                                  href={url}\n                                  target=\"_blank\"\n                                  rel=\"noopener noreferrer\"\n                                  className=\"block aspect-square rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-600\"\n                                  onClick={(e) => e.stopPropagation()}\n                                >\n                                  <img\n                                    src={url}\n                                    alt={`Check-in ${idx + 1}`}\n                                    className=\"w-full h-full object-cover hover:opacity-80 transition-opacity\"\n                                  />\n                                </a>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Load More Button */}\n            {hasMore && (\n              <div className=\"mt-6 text-center\">\n                <button\n                  onClick={handleLoadMore}\n                  disabled={loadingMore}\n                  className=\"btn btn-secondary px-8\"\n                >\n                  {loadingMore ? (\n                    <>\n                      <span className=\"spinner-small mr-2\"></span>\n                      Loading...\n                    </>\n                  ) : (\n                    `Load More (${ITEMS_PER_PAGE} at a time)`\n                  )}\n                </button>\n              </div>\n            )}\n\n            {!hasMore && history.length > 0 && (\n              <div className=\"mt-6 text-center text-text-secondary dark:text-dark-text-secondary text-sm\">\n                You've reached the end of your check-in history\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Back Button - Bottom */}\n        <div className=\"mt-8 text-center\">\n          <button\n            onClick={() => navigate(-1)}\n            className=\"inline-flex items-center gap-2 text-primary dark:text-dark-primary hover:underline font-semibold\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n            Back\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckInHistoryPage;\n"],"names":["CheckInHistoryPage","_userData$stats","_userData$stats2","_userData$stats3","navigate","useNavigate","currentUser","userData","useAuth","history","setHistory","useState","loading","setLoading","loadingMore","setLoadingMore","filter","setFilter","lastDoc","setLastDoc","hasMore","setHasMore","expandedItems","setExpandedItems","Set","bestieNames","setBestieNames","useEffect","loadHistory","length","async","uniqueBestieIds","forEach","checkIn","bestieIds","id","add","prevNames","names","_objectSpread","promises","bestieId","push","getDoc","doc","db","then","bestieDoc","exists","bestieData","data","displayName","catch","error","console","Promise","all","fetchBestieNames","loadMore","arguments","undefined","q","query","collection","where","uid","orderBy","limit","startAfter","snapshot","getDocs","checkIns","prev","docs","toggleExpanded","newExpanded","has","delete","getStatusBadge","status","_jsx","className","children","formatDuration","minutes","concat","hours","Math","floor","mins","_jsxs","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","stats","totalCheckIns","completedCheckIns","alertedCheckIns","_Fragment","map","_checkIn$createdAt","_checkIn$bestieIds2","_checkIn$createdAt2","_checkIn$alertTime","_checkIn$completedAt","_checkIn$alertedAt","isExpanded","canExpand","_checkIn$photoURLs","_checkIn$bestieIds","notes","meetingWith","socialMediaLinks","gpsCoords","photoURLs","alertTime","completedAt","alertedAt","hasExpandableContent","location","createdAt","toDate","formatDistanceToNow","addSuffix","e","stopPropagation","duration","format","lat","toFixed","lng","href","target","rel","url","idx","src","alt","handleLoadMore","disabled"],"sourceRoot":""}