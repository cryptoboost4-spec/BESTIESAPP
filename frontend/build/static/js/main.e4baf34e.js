/*! For license information please see main.e4baf34e.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),A=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,A={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!o.hasOwnProperty(r)&&(A[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===A[r]&&(A[r]=t[r]);return{$$typeof:s,type:e,key:l,ref:c,props:A,_owner:a.current}}t.Fragment=A,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=x.prototype=new y;w.constructor=x,p(w,g.prototype),w.isPureReactComponent=!0;var v=Array.isArray,b=Object.prototype.hasOwnProperty,B={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var s,A={},i=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)b.call(t,s)&&!C.hasOwnProperty(s)&&(A[s]=t[s]);var o=arguments.length-2;if(1===o)A.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];A.children=l}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===A[s]&&(A[s]=o[s]);return{$$typeof:n,type:e,key:i,ref:a,props:A,_owner:B.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var U=/\/+/g;function F(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function Q(e,t,s,A,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case n:case r:o=!0}}if(o)return i=i(o=e),e=""===A?"."+F(o,0):A,v(i)?(s="",null!=e&&(s=e.replace(U,"$&/")+"/"),Q(i,t,s,"",function(e){return e})):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(U,"$&/")+"/")+e)),t.push(i)),1;if(o=0,A=""===A?".":A+":",v(e))for(var l=0;l<e.length;l++){var c=A+F(a=e[l],l);o+=Q(a,t,s,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)o+=Q(a=a.value,t,s,c=A+F(a,l++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function I(e,t,n){if(null==e)return e;var r=[],s=0;return Q(e,r,"","",function(e){return t.call(n,e,s++)}),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},S={transition:null},T={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:S,ReactCurrentOwner:B};function _(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=x,t.StrictMode=A,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=_,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),A=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=B.current),void 0!==t.key&&(A=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)b.call(t,l)&&!C.hasOwnProperty(l)&&(s[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];s.children=o}return{$$typeof:n,type:e.type,key:A,ref:i,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.transition;S.transition={};try{e()}finally{S.transition=t}},t.unstable_act=_,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<A(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var a=2*(r+1)-1,o=e[a],l=a+1,c=e[l];if(0>A(o,n))l<s&&0>A(c,o)?(e[r]=c,e[l]=n,r=l):(e[r]=o,e[a]=n,r=a);else{if(!(l<s&&0>A(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function v(e){if(m=!1,w(e),!p)if(null!==r(l))p=!0,S(b);else{var t=r(c);null!==t&&T(v,t.startTime-e)}}function b(e,n){p=!1,m&&(m=!1,y(E),E=-1),f=!0;var A=h;try{for(w(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!Q());){var i=d.callback;if("function"===typeof i){d.callback=null,h=d.priorityLevel;var a=i(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&s(l),w(n)}else s(l);d=r(l)}if(null!==d)var o=!0;else{var u=r(c);null!==u&&T(v,u.startTime-n),o=!1}return o}finally{d=null,h=A,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,C=!1,N=null,E=-1,U=5,F=-1;function Q(){return!(t.unstable_now()-F<U)}function I(){if(null!==N){var e=t.unstable_now();F=e;var n=!0;try{n=N(!0,e)}finally{n?B():(C=!1,N=null)}}else C=!1}if("function"===typeof x)B=function(){x(I)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,j=k.port2;k.port1.onmessage=I,B=function(){j.postMessage(null)}}else B=function(){g(I,0)};function S(e){N=e,C||(C=!0,B())}function T(e,n){E=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,S(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,s,A){var i=t.unstable_now();switch("object"===typeof A&&null!==A?A="number"===typeof(A=A.delay)&&0<A?i+A:i:A=i,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:A,expirationTime:a=A+a,sortIndex:-1},A>i?(e.sortIndex=A,n(c,e),null===r(l)&&e===r(c)&&(m?(y(E),E=-1):m=!0,T(v,A-i))):(e.sortIndex=a,n(l,e),p||f||(p=!0,S(b))),e},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},239:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function r(e,t,n,r){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,A){function i(e){try{o(r.next(e))}catch(Lt){A(Lt)}}function a(e){try{o(r.throw(e))}catch(Lt){A(Lt)}}function o(e){e.done?n(e.value):s(e.value).then(i,a)}o((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,s,A,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return A={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function a(e){return function(t){return o([e,t])}}function o(A){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&A[0]?r.return:A[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,A[1])).done)return s;switch(r=0,s&&(A=[2&A[0],s.value]),A[0]){case 0:case 1:s=A;break;case 4:return i.label++,{value:A[1],done:!1};case 5:i.label++,r=A[1],A=[0];continue;case 7:A=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===A[0]||2===A[0])){i=0;continue}if(3===A[0]&&(!s||A[1]>s[0]&&A[1]<s[3])){i.label=A[1];break}if(6===A[0]&&i.label<s[1]){i.label=s[1],s=A;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(A);break}s[2]&&i.ops.pop(),i.trys.pop();continue}A=t.call(e,i)}catch(Lt){A=[6,Lt],r=0}finally{n=s=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function A(e,t,n){if(n||2===arguments.length)for(var r,s=0,A=t.length;s<A;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||t)}for(var i=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),a=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},o=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new i(0,0,r,s)},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=e.charCodeAt(n++);56320===(64512&A)?t.push(((1023&s)<<10)+(1023&A)+65536):(t.push(s),n--)}else t.push(s)}return t},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=e[s];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"===typeof Uint8Array?[]:new Uint8Array(256),h=0;h<u.length;h++)d[u.charCodeAt(h)]=h;for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<f.length;m++)p[f.charCodeAt(m)]=m;for(var g=function(e){var t,n,r,s,A,i=.75*e.length,a=e.length,o=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<a;t+=4)n=p[e.charCodeAt(t)],r=p[e.charCodeAt(t+1)],s=p[e.charCodeAt(t+2)],A=p[e.charCodeAt(t+3)],c[o++]=n<<2|r>>4,c[o++]=(15&r)<<4|s>>2,c[o++]=(3&s)<<6|63&A;return l},y=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},x=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},w=5,v=11,b=2,B=65536>>w,C=(1<<w)-1,N=B+(1024>>w)+32,E=65536>>v,U=(1<<v-w)-1,F=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Q=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},I=function(e,t){var n=g(e),r=Array.isArray(n)?x(n):new Uint32Array(n),s=Array.isArray(n)?y(n):new Uint16Array(n),A=24,i=F(s,A/2,r[4]/2),a=2===r[5]?F(s,(A+r[4])/2):Q(r,Math.ceil((A+r[4])/4));return new k(r[0],r[1],r[2],r[3],i,a)},k=function(){function e(e,t,n,r,s,A){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=A}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>w])<<b)+(e&C),this.data[t];if(e<=65535)return t=((t=this.index[B+(e-55296>>w)])<<b)+(e&C),this.data[t];if(e<this.highStart)return t=N-E+(e>>v),t=this.index[t],t+=e>>w&U,t=((t=this.index[t])<<b)+(e&C),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S="undefined"===typeof Uint8Array?[]:new Uint8Array(256),T=0;T<j.length;T++)S[j.charCodeAt(T)]=T;var _=50,D=1,L=2,H=3,R=4,P=5,O=7,M=8,K=9,V=10,G=11,W=12,z=13,q=14,Y=15,X=16,J=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,se=24,Ae=25,ie=26,ae=27,oe=28,le=29,ce=30,ue=31,de=32,he=33,fe=34,pe=35,me=36,ge=37,ye=38,xe=39,we=40,ve=41,be=42,Be=43,Ce=[9001,65288],Ne="!",Ee="\xd7",Ue="\xf7",Fe=I("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Qe=[ce,me],Ie=[D,L,H,P],ke=[V,M],je=[ae,ie],Se=Ie.concat(ke),Te=[ye,xe,we,fe,pe],_e=[Y,z],De=function(e,t){void 0===t&&(t="strict");var n=[],r=[],s=[];return e.forEach(function(e,A){var i=Fe.get(e);if(i>_?(s.push(!0),i-=_):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(A),n.push(X);if(i===R||i===G){if(0===A)return r.push(A),n.push(ce);var a=n[A-1];return-1===Se.indexOf(a)?(r.push(r[A-1]),n.push(a)):(r.push(A),n.push(ce))}return r.push(A),i===ue?n.push("strict"===t?te:ge):i===be||i===le?n.push(ce):i===Be?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(ce):void n.push(i)}),[r,n,s]},Le=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var A=n;A<=r.length;){if((o=r[++A])===t)return!0;if(o!==V)break}if(s===V)for(A=n;A>0;){var i=r[--A];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var a=n;a<=r.length;){var o;if((o=r[++a])===t)return!0;if(o!==V)break}if(i!==V)break}return!1},He=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==V)return r;n--}return 0},Re=function(e,t,n,r,s){if(0===n[r])return Ee;var A=r-1;if(Array.isArray(s)&&!0===s[A])return Ee;var i=A-1,a=A+1,o=t[A],l=i>=0?t[i]:0,c=t[a];if(o===L&&c===H)return Ee;if(-1!==Ie.indexOf(o))return Ne;if(-1!==Ie.indexOf(c))return Ee;if(-1!==ke.indexOf(c))return Ee;if(He(A,t)===M)return Ue;if(Fe.get(e[A])===G)return Ee;if((o===de||o===he)&&Fe.get(e[a])===G)return Ee;if(o===O||c===O)return Ee;if(o===K)return Ee;if(-1===[V,z,Y].indexOf(o)&&c===K)return Ee;if(-1!==[J,Z,$,se,oe].indexOf(c))return Ee;if(He(A,t)===ne)return Ee;if(Le(re,ne,A,t))return Ee;if(Le([J,Z],te,A,t))return Ee;if(Le(W,W,A,t))return Ee;if(o===V)return Ue;if(o===re||c===re)return Ee;if(c===X||o===X)return Ue;if(-1!==[z,Y,te].indexOf(c)||o===q)return Ee;if(l===me&&-1!==_e.indexOf(o))return Ee;if(o===oe&&c===me)return Ee;if(c===ee)return Ee;if(-1!==Qe.indexOf(c)&&o===Ae||-1!==Qe.indexOf(o)&&c===Ae)return Ee;if(o===ae&&-1!==[ge,de,he].indexOf(c)||-1!==[ge,de,he].indexOf(o)&&c===ie)return Ee;if(-1!==Qe.indexOf(o)&&-1!==je.indexOf(c)||-1!==je.indexOf(o)&&-1!==Qe.indexOf(c))return Ee;if(-1!==[ae,ie].indexOf(o)&&(c===Ae||-1!==[ne,Y].indexOf(c)&&t[a+1]===Ae)||-1!==[ne,Y].indexOf(o)&&c===Ae||o===Ae&&-1!==[Ae,oe,se].indexOf(c))return Ee;if(-1!==[Ae,oe,se,J,Z].indexOf(c))for(var u=A;u>=0;){if((d=t[u])===Ae)return Ee;if(-1===[oe,se].indexOf(d))break;u--}if(-1!==[ae,ie].indexOf(c))for(u=-1!==[J,Z].indexOf(o)?i:A;u>=0;){var d;if((d=t[u])===Ae)return Ee;if(-1===[oe,se].indexOf(d))break;u--}if(ye===o&&-1!==[ye,xe,fe,pe].indexOf(c)||-1!==[xe,fe].indexOf(o)&&-1!==[xe,we].indexOf(c)||-1!==[we,pe].indexOf(o)&&c===we)return Ee;if(-1!==Te.indexOf(o)&&-1!==[ee,ie].indexOf(c)||-1!==Te.indexOf(c)&&o===ae)return Ee;if(-1!==Qe.indexOf(o)&&-1!==Qe.indexOf(c))return Ee;if(o===se&&-1!==Qe.indexOf(c))return Ee;if(-1!==Qe.concat(Ae).indexOf(o)&&c===ne&&-1===Ce.indexOf(e[a])||-1!==Qe.concat(Ae).indexOf(c)&&o===Z)return Ee;if(o===ve&&c===ve){for(var h=n[A],f=1;h>0&&t[--h]===ve;)f++;if(f%2!==0)return Ee}return o===de&&c===he?Ee:Ue},Pe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=De(e,t.lineBreak),r=n[0],s=n[1],A=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map(function(e){return-1!==[Ae,ce,be].indexOf(e)?ge:e}));var i="keep-all"===t.wordBreak?A.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,s,i]},Oe=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ne,this.start=n,this.end=r}return e.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Me=function(e,t){var n=l(e),r=Pe(n,t),s=r[0],A=r[1],i=r[2],a=n.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var e=Ee;c<a&&(e=Re(n,A,s,++c,i))===Ee;);if(e!==Ee||c===a){var t=new Oe(n,e,o,c);return o=c,{value:t,done:!1}}return{done:!0,value:null}}}},Ke=1,Ve=2,Ge=4,We=8,ze=10,qe=47,Ye=92,Xe=9,Je=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,st=40,At=41,it=95,at=45,ot=33,lt=60,ct=62,ut=64,dt=91,ht=93,ft=61,pt=123,mt=63,gt=125,yt=124,xt=126,wt=128,vt=65533,bt=42,Bt=43,Ct=44,Nt=58,Et=59,Ut=46,Ft=0,Qt=8,It=11,kt=14,jt=31,St=127,Tt=-1,_t=48,Dt=97,Lt=101,Ht=102,Rt=117,Pt=122,Ot=65,Mt=69,Kt=70,Vt=85,Gt=90,Wt=function(e){return e>=_t&&e<=57},zt=function(e){return e>=55296&&e<=57343},qt=function(e){return Wt(e)||e>=Ot&&e<=Kt||e>=Dt&&e<=Ht},Yt=function(e){return e>=Dt&&e<=Pt},Xt=function(e){return e>=Ot&&e<=Gt},Jt=function(e){return Yt(e)||Xt(e)},Zt=function(e){return e>=wt},$t=function(e){return e===ze||e===Xe||e===Je},en=function(e){return Jt(e)||Zt(e)||e===it},tn=function(e){return en(e)||Wt(e)||e===at},nn=function(e){return e>=Ft&&e<=Qt||e===It||e>=kt&&e<=jt||e===St},rn=function(e,t){return e===Ye&&t!==ze},sn=function(e,t,n){return e===at?en(t)||rn(t,n):!!en(e)||!(e!==Ye||!rn(e,t))},An=function(e,t,n){return e===Bt||e===at?!!Wt(t)||t===Ut&&Wt(n):Wt(e===Ut?t:e)},an=function(e){var t=0,n=1;e[t]!==Bt&&e[t]!==at||(e[t]===at&&(n=-1),t++);for(var r=[];Wt(e[t]);)r.push(e[t++]);var s=r.length?parseInt(c.apply(void 0,r),10):0;e[t]===Ut&&t++;for(var A=[];Wt(e[t]);)A.push(e[t++]);var i=A.length,a=i?parseInt(c.apply(void 0,A),10):0;e[t]!==Mt&&e[t]!==Lt||t++;var o=1;e[t]!==Bt&&e[t]!==at||(e[t]===at&&(o=-1),t++);for(var l=[];Wt(e[t]);)l.push(e[t++]);var u=l.length?parseInt(c.apply(void 0,l),10):0;return n*(s+a*Math.pow(10,-i))*Math.pow(10,o*u)},on={type:2},ln={type:3},cn={type:4},un={type:13},dn={type:8},hn={type:21},fn={type:9},pn={type:10},mn={type:11},gn={type:12},yn={type:14},xn={type:23},wn={type:1},vn={type:25},bn={type:24},Bn={type:26},Cn={type:27},Nn={type:28},En={type:29},Un={type:31},Fn={type:32},Qn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Fn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var s=sn(t,n,r)?Ve:Ke;return{type:5,value:this.consumeName(),flags:s}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),un;break;case rt:return this.consumeStringToken(rt);case st:return on;case At:return ln;case bt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),yn;break;case Bt:if(An(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Ct:return cn;case at:var A=e,i=this.peekCodePoint(0),a=this.peekCodePoint(1);if(An(A,i,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sn(A,i,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===at&&a===ct)return this.consumeCodePoint(),this.consumeCodePoint(),bn;break;case Ut:if(An(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===bt)for(this.consumeCodePoint();;){var o=this.consumeCodePoint();if(o===bt&&(o=this.consumeCodePoint())===qe)return this.consumeToken();if(o===Tt)return this.consumeToken()}break;case Nt:return Bn;case Et:return Cn;case lt:if(this.peekCodePoint(0)===ot&&this.peekCodePoint(1)===at&&this.peekCodePoint(2)===at)return this.consumeCodePoint(),this.consumeCodePoint(),vn;break;case ut:var l=this.peekCodePoint(0),u=this.peekCodePoint(1),d=this.peekCodePoint(2);if(sn(l,u,d))return{type:7,value:this.consumeName()};break;case dt:return Nn;case Ye:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return En;case ft:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),dn;break;case pt:return mn;case gt:return gn;case Rt:case Vt:var h=this.peekCodePoint(0),f=this.peekCodePoint(1);return h!==Bt||!qt(f)&&f!==mt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case yt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;if(this.peekCodePoint(0)===yt)return this.consumeCodePoint(),hn;break;case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;break;case Tt:return Fn}return $t(e)?(this.consumeWhiteSpace(),Un):Wt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:c(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===mt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(c.apply(void 0,e.map(function(e){return e===mt?_t:e})),16),end:parseInt(c.apply(void 0,e.map(function(e){return e===mt?Kt:e})),16)};var r=parseInt(c.apply(void 0,e),16);if(this.peekCodePoint(0)===at&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];qt(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(c.apply(void 0,s),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===st?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===st?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tt||this.peekCodePoint(0)===At)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),xn)}for(;;){var r=this.consumeCodePoint();if(r===Tt||r===At)return{type:22,value:c.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Tt||this.peekCodePoint(0)===At?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,e)}):(this.consumeBadUrlRemnants(),xn);if(r===Ze||r===rt||r===st||nn(r))return this.consumeBadUrlRemnants(),xn;if(r===Ye){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),xn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===At||e===Tt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=c.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Tt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===ze)return this._value.splice(0,n),wn;if(r===Ye){var s=this._value[n+1];s!==Tt&&void 0!==s&&(s===ze?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,s)&&(t+=this.consumeStringSlice(n),t+=c(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ge,n=this.peekCodePoint(0);for(n!==Bt&&n!==at||e.push(this.consumeCodePoint());Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===Ut&&Wt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Mt||n===Lt)&&((r===Bt||r===at)&&Wt(s)||Wt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[an(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),A=this.peekCodePoint(2);return sn(r,s,A)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=c(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=c(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||zt(n)||n>1114111?vt:n}return e===Tt?vt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=c(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=c(this.consumeEscapedCodePoint())}}},e}(),In=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Qn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Rn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?Fn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),kn=function(e){return 15===e.type},jn=function(e){return 17===e.type},Sn=function(e){return 20===e.type},Tn=function(e){return 0===e.type},_n=function(e,t){return Sn(e)&&e.value===t},Dn=function(e){return 31!==e.type},Ln=function(e){return 31!==e.type&&4!==e.type},Hn=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},Rn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Pn=function(e){return 17===e.type||15===e.type},On=function(e){return 16===e.type||Pn(e)},Mn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Kn={type:17,number:0,flags:Ge},Vn={type:16,number:50,flags:Ge},Gn={type:16,number:100,flags:Ge},Wn=function(e,t,n){var r=e[0],s=e[1];return[zn(r,t),zn("undefined"!==typeof s?s:r,n)]},zn=function(e,t){if(16===e.type)return e.number/100*t;if(kn(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Yn="grad",Xn="rad",Jn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Yn:return Math.PI/200*t.number;case Xn:return t.number;case Jn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Yn||e.unit===Xn||e.unit===Jn)},er=function(e){switch(e.filter(Sn).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Kn,Kn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Kn,Gn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Gn,Gn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Gn,Kn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=cr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),s=t.value.substring(1,2),A=t.value.substring(2,3);return Ar(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(4===t.value.length){r=t.value.substring(0,1),s=t.value.substring(1,2),A=t.value.substring(2,3);var i=t.value.substring(3,4);return Ar(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),A=t.value.substring(4,6),Ar(parseInt(r,16),parseInt(s,16),parseInt(A,16),1);if(8===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),A=t.value.substring(4,6),i=t.value.substring(6,8),Ar(parseInt(r,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}if(20===t.type){var a=dr[t.value.toUpperCase()];if("undefined"!==typeof a)return a}return dr.TRANSPARENT}},rr=function(e){return 0===(255&e)},sr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},Ar=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},ir=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},ar=function(e,t){var n=t.filter(Ln);if(3===n.length){var r=n.map(ir),s=r[0],A=r[1],i=r[2];return Ar(s,A,i,1)}if(4===n.length){var a=n.map(ir),o=(s=a[0],A=a[1],i=a[2],a[3]);return Ar(s,A,i,o)}return 0};function or(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var lr=function(e,t){var n=t.filter(Ln),r=n[0],s=n[1],A=n[2],i=n[3],a=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),o=On(s)?s.number/100:0,l=On(A)?A.number/100:0,c="undefined"!==typeof i&&On(i)?zn(i,1):1;if(0===o)return Ar(255*l,255*l,255*l,1);var u=l<=.5?l*(o+1):l+o-l*o,d=2*l-u,h=or(d,u,a+1/3),f=or(d,u,a),p=or(d,u,a-1/3);return Ar(255*h,255*f,255*p,c)},cr={hsl:lr,hsla:lr,rgb:ar,rgba:ar},ur=function(e,t){return nr.parse(e,In.create(t).parseComponentValue())},dr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Sn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&On(r)?{color:n,stop:r}:{color:n,stop:null}},mr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Kn),null===r.stop&&(r.stop=Gn);for(var s=[],A=0,i=0;i<e.length;i++){var a=e[i].stop;if(null!==a){var o=zn(a,t);o>A?s.push(o):s.push(A),A=o}else s.push(null)}var l=null;for(i=0;i<s.length;i++){var c=s[i];if(null===c)null===l&&(l=i);else if(null!==l){for(var u=i-l,d=(c-s[l-1])/(u+1),h=1;h<=u;h++)s[l+h-1]=d*h;l=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,s[n]/t),0)}})},gr=function(e,t,n){var r=t/2,s=n/2,A=zn(e[0],t)-r,i=s-zn(e[1],n);return(Math.atan2(i,A)+2*Math.PI)%(2*Math.PI)},yr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),A=t/2,i=n/2,a=s/2,o=Math.sin(r-Math.PI/2)*a,l=Math.cos(r-Math.PI/2)*a;return[s,A-l,A+l,i-o,i+o]},xr=function(e,t){return Math.sqrt(e*e+t*t)},wr=function(e,t,n,r,s){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var A=t[0],i=t[1],a=xr(n-A,r-i);return(s?a<e.optimumDistance:a>e.optimumDistance)?{optimumCorner:t,optimumDistance:a}:e},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},vr=function(e,t,n,r,s){var A=0,i=0;switch(e.size){case 0:0===e.shape?A=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(A=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===e.shape)A=i=Math.min(xr(t,n),xr(t,n-s),xr(t-r,n),xr(t-r,n-s));else if(1===e.shape){var a=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),o=wr(r,s,t,n,!0),l=o[0],c=o[1];i=a*(A=xr(l-t,(c-n)/a))}break;case 1:0===e.shape?A=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(A=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===e.shape)A=i=Math.max(xr(t,n),xr(t,n-s),xr(t-r,n),xr(t-r,n-s));else if(1===e.shape){a=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r));var u=wr(r,s,t,n,!1);l=u[0],c=u[1],i=a*(A=xr(l-t,(c-n)/a))}}return Array.isArray(e.size)&&(A=zn(e.size[0],r),i=2===e.size.length?zn(e.size[1],s):A),[A,i]},br=function(e,t){var n=tr(180),r=[];return Hn(t).forEach(function(t,s){if(0===s){var A=t[0];if(20===A.type&&-1!==["top","left","right","bottom"].indexOf(A.value))return void(n=er(t));if($n(A))return void(n=(Zn.parse(e,A)+tr(270))%tr(360))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},Br="closest-side",Cr="farthest-side",Nr="closest-corner",Er="farthest-corner",Ur="circle",Fr="ellipse",Qr="cover",Ir="contain",kr=function(e,t){var n=0,r=3,s=[],A=[];return Hn(t).forEach(function(t,i){var a=!0;if(0===i?a=t.reduce(function(e,t){if(Sn(t))switch(t.value){case"center":return A.push(Vn),!1;case"top":case"left":return A.push(Kn),!1;case"right":case"bottom":return A.push(Gn),!1}else if(On(t)||Pn(t))return A.push(t),!1;return e},a):1===i&&(a=t.reduce(function(e,t){if(Sn(t))switch(t.value){case Ur:return n=0,!1;case Fr:return n=1,!1;case Ir:case Br:return r=0,!1;case Cr:return r=1,!1;case Nr:return r=2,!1;case Qr:case Er:return r=3,!1}else if(Pn(t)||On(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},a)),a){var o=pr(e,t);s.push(o)}}),{size:r,shape:n,stops:s,position:A,type:2}},jr=function(e){return 1===e.type},Sr=function(e){return 2===e.type},Tr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Lr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function _r(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Lr[e.name])}var Dr,Lr={"linear-gradient":function(e,t){var n=tr(180),r=[];return Hn(t).forEach(function(t,s){if(0===s){var A=t[0];if(20===A.type&&"to"===A.value)return void(n=er(t));if($n(A))return void(n=Zn.parse(e,A))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":br,"-ms-linear-gradient":br,"-o-linear-gradient":br,"-webkit-linear-gradient":br,"radial-gradient":function(e,t){var n=0,r=3,s=[],A=[];return Hn(t).forEach(function(t,i){var a=!0;if(0===i){var o=!1;a=t.reduce(function(e,t){if(o)if(Sn(t))switch(t.value){case"center":return A.push(Vn),e;case"top":case"left":return A.push(Kn),e;case"right":case"bottom":return A.push(Gn),e}else(On(t)||Pn(t))&&A.push(t);else if(Sn(t))switch(t.value){case Ur:return n=0,!1;case Fr:return n=1,!1;case"at":return o=!0,!1;case Br:return r=0,!1;case Qr:case Cr:return r=1,!1;case Ir:case Nr:return r=2,!1;case Er:return r=3,!1}else if(Pn(t)||On(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},a)}if(a){var l=pr(e,t);s.push(l)}}),{size:r,shape:n,stops:s,position:A,type:2}},"-moz-radial-gradient":kr,"-ms-radial-gradient":kr,"-o-radial-gradient":kr,"-webkit-radial-gradient":kr,"-webkit-gradient":function(e,t){var n=tr(180),r=[],s=1,A=0,i=3,a=[];return Hn(t).forEach(function(t,n){var A=t[0];if(0===n){if(Sn(A)&&"linear"===A.value)return void(s=1);if(Sn(A)&&"radial"===A.value)return void(s=2)}if(18===A.type)if("from"===A.name){var i=nr.parse(e,A.values[0]);r.push({stop:Kn,color:i})}else if("to"===A.name)i=nr.parse(e,A.values[0]),r.push({stop:Gn,color:i});else if("color-stop"===A.name){var a=A.values.filter(Ln);if(2===a.length){i=nr.parse(e,a[1]);var o=a[0];jn(o)&&r.push({stop:{type:16,number:100*o.number,flags:o.flags},color:i})}}}),1===s?{angle:(n+tr(180))%tr(360),stops:r,type:s}:{size:i,shape:A,stops:r,position:a,type:s}}},Hr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return Ln(e)&&_r(e)}).map(function(t){return Tr.parse(e,t)})}},Rr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Sn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Hn(t).map(function(e){return e.filter(On)}).map(Mn)}},Or={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Hn(t).map(function(e){return e.filter(Sn).map(function(e){return e.value}).join(" ")}).map(Mr)}},Mr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Dr||(Dr={}));var Kr,Vr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Hn(t).map(function(e){return e.filter(Gr)})}},Gr=function(e){return Sn(e)||On(e)},Wr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zr=Wr("top"),qr=Wr("right"),Yr=Wr("bottom"),Xr=Wr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Mn(t.filter(On))}}},Zr=Jr("top-left"),$r=Jr("top-right"),es=Jr("bottom-right"),ts=Jr("bottom-left"),ns=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rs=ns("top"),ss=ns("right"),As=ns("bottom"),is=ns("left"),as=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:0}}},os=as("top"),ls=as("right"),cs=as("bottom"),us=as("left"),ds={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hs={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fs={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Sn).reduce(function(e,t){return e|ps(t.value)},0)}},ps=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ms={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gs={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Kr||(Kr={}));var ys,xs={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Kr.STRICT:Kr.NORMAL}},ws={name:"line-height",initialValue:"normal",prefix:!1,type:4},vs=function(e,t){return Sn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:On(e)?zn(e,t):t},bs={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Tr.parse(e,t)}},Bs={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Cs={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ns=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Es=Ns("top"),Us=Ns("right"),Fs=Ns("bottom"),Qs=Ns("left"),Is={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Sn).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},ks={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},js=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ss=js("top"),Ts=js("right"),_s=js("bottom"),Ds=js("left"),Ls={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Hs={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Rs={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&_n(t[0],"none")?[]:Hn(t).map(function(t){for(var n={color:dr.TRANSPARENT,offsetX:Kn,offsetY:Kn,blur:Kn},r=0,s=0;s<t.length;s++){var A=t[s];Pn(A)?(0===r?n.offsetX=A:1===r?n.offsetY=A:n.blur=A,r++):n.color=nr.parse(e,A)}return n})}},Ps={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Os={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Ms[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Ms={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var s=t[4],A=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],a=t[13];return t[14],t[15],16===t.length?[n,r,s,A,i,a]:null}},Ks={type:16,number:50,flags:Ge},Vs=[Ks,Ks],Gs={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(On);return 2!==n.length?Vs:[n[0],n[1]]}},Ws={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(ys||(ys={}));for(var zs={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return ys.BREAK_ALL;case"keep-all":return ys.KEEP_ALL;default:return ys.NORMAL}}},qs={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(jn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Ys={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Xs={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return jn(t)?t.number:1}},Js={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zs={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Sn).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$s={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},eA={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},tA={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return jn(t)?t.number:Sn(t)&&"bold"===t.value?700:400}},nA={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Sn).map(function(e){return e.value})}},rA={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},sA=function(e,t){return 0!==(e&t)},AA={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},iA={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],s=t.filter(Dn),A=0;A<s.length;A++){var i=s[A],a=s[A+1];if(20===i.type){var o=a&&jn(a)?a.number:1;r.push({counter:i.value,increment:o})}}return r}},aA={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Dn),s=0;s<r.length;s++){var A=r[s],i=r[s+1];if(Sn(A)&&"none"!==A.value){var a=i&&jn(i)?i.number:0;n.push({counter:A.value,reset:a})}}return n}},oA={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).map(function(t){return Ys.parse(e,t)})}},lA={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],s=t.filter(Tn);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,a=s[A+1].value;r.push({open:i,close:a})}return r}},cA=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},uA={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&_n(t[0],"none")?[]:Hn(t).map(function(t){for(var n={color:255,offsetX:Kn,offsetY:Kn,blur:Kn,spread:Kn,inset:!1},r=0,s=0;s<t.length;s++){var A=t[s];_n(A,"inset")?n.inset=!0:Pn(A)?(0===r?n.offsetX=A:1===r?n.offsetY=A:2===r?n.blur=A:n.spread=A,r++):n.color=nr.parse(e,A)}return n})}},dA={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Sn).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),n.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},hA={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fA={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:0}},pA=function(){function e(e,t){var n,r;this.animationDuration=yA(e,oA,t.animationDuration),this.backgroundClip=yA(e,hr,t.backgroundClip),this.backgroundColor=yA(e,fr,t.backgroundColor),this.backgroundImage=yA(e,Hr,t.backgroundImage),this.backgroundOrigin=yA(e,Rr,t.backgroundOrigin),this.backgroundPosition=yA(e,Pr,t.backgroundPosition),this.backgroundRepeat=yA(e,Or,t.backgroundRepeat),this.backgroundSize=yA(e,Vr,t.backgroundSize),this.borderTopColor=yA(e,zr,t.borderTopColor),this.borderRightColor=yA(e,qr,t.borderRightColor),this.borderBottomColor=yA(e,Yr,t.borderBottomColor),this.borderLeftColor=yA(e,Xr,t.borderLeftColor),this.borderTopLeftRadius=yA(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=yA(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=yA(e,es,t.borderBottomRightRadius),this.borderBottomLeftRadius=yA(e,ts,t.borderBottomLeftRadius),this.borderTopStyle=yA(e,rs,t.borderTopStyle),this.borderRightStyle=yA(e,ss,t.borderRightStyle),this.borderBottomStyle=yA(e,As,t.borderBottomStyle),this.borderLeftStyle=yA(e,is,t.borderLeftStyle),this.borderTopWidth=yA(e,os,t.borderTopWidth),this.borderRightWidth=yA(e,ls,t.borderRightWidth),this.borderBottomWidth=yA(e,cs,t.borderBottomWidth),this.borderLeftWidth=yA(e,us,t.borderLeftWidth),this.boxShadow=yA(e,uA,t.boxShadow),this.color=yA(e,ds,t.color),this.direction=yA(e,hs,t.direction),this.display=yA(e,fs,t.display),this.float=yA(e,ms,t.cssFloat),this.fontFamily=yA(e,$s,t.fontFamily),this.fontSize=yA(e,eA,t.fontSize),this.fontStyle=yA(e,rA,t.fontStyle),this.fontVariant=yA(e,nA,t.fontVariant),this.fontWeight=yA(e,tA,t.fontWeight),this.letterSpacing=yA(e,gs,t.letterSpacing),this.lineBreak=yA(e,xs,t.lineBreak),this.lineHeight=yA(e,ws,t.lineHeight),this.listStyleImage=yA(e,bs,t.listStyleImage),this.listStylePosition=yA(e,Bs,t.listStylePosition),this.listStyleType=yA(e,Cs,t.listStyleType),this.marginTop=yA(e,Es,t.marginTop),this.marginRight=yA(e,Us,t.marginRight),this.marginBottom=yA(e,Fs,t.marginBottom),this.marginLeft=yA(e,Qs,t.marginLeft),this.opacity=yA(e,Xs,t.opacity);var s=yA(e,Is,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=yA(e,ks,t.overflowWrap),this.paddingTop=yA(e,Ss,t.paddingTop),this.paddingRight=yA(e,Ts,t.paddingRight),this.paddingBottom=yA(e,_s,t.paddingBottom),this.paddingLeft=yA(e,Ds,t.paddingLeft),this.paintOrder=yA(e,dA,t.paintOrder),this.position=yA(e,Hs,t.position),this.textAlign=yA(e,Ls,t.textAlign),this.textDecorationColor=yA(e,Js,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=yA(e,Zs,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=yA(e,Rs,t.textShadow),this.textTransform=yA(e,Ps,t.textTransform),this.transform=yA(e,Os,t.transform),this.transformOrigin=yA(e,Gs,t.transformOrigin),this.visibility=yA(e,Ws,t.visibility),this.webkitTextStrokeColor=yA(e,hA,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=yA(e,fA,t.webkitTextStrokeWidth),this.wordBreak=yA(e,zs,t.wordBreak),this.zIndex=yA(e,qs,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return sA(this.display,4)||sA(this.display,33554432)||sA(this.display,268435456)||sA(this.display,536870912)||sA(this.display,67108864)||sA(this.display,134217728)},e}(),mA=function(){function e(e,t){this.content=yA(e,AA,t.content),this.quotes=yA(e,lA,t.quotes)}return e}(),gA=function(){function e(e,t){this.counterIncrement=yA(e,iA,t.counterIncrement),this.counterReset=yA(e,aA,t.counterReset)}return e}(),yA=function(e,t,n){var r=new Qn,s=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(s);var A=new In(r.read());switch(t.type){case 2:var i=A.parseComponentValue();return t.parse(e,Sn(i)?i.value:t.initialValue);case 0:return t.parse(e,A.parseComponentValue());case 1:return t.parse(e,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,A.parseComponentValue());case"color":return nr.parse(e,A.parseComponentValue());case"image":return Tr.parse(e,A.parseComponentValue());case"length":var a=A.parseComponentValue();return Pn(a)?a:Kn;case"length-percentage":var o=A.parseComponentValue();return On(o)?o:Kn;case"time":return Ys.parse(e,A.parseComponentValue())}}},xA="data-html2canvas-debug",wA=function(e){switch(e.getAttribute(xA)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},vA=function(e,t){var n=wA(e);return 1===n||t===n},bA=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,vA(t,3),this.styles=new pA(e,window.getComputedStyle(t,null)),la(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=a(this.context,t),vA(t,4)&&(this.flags|=16)}return e}(),BA="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",CA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",NA="undefined"===typeof Uint8Array?[]:new Uint8Array(256),EA=0;EA<CA.length;EA++)NA[CA.charCodeAt(EA)]=EA;for(var UA=function(e){var t,n,r,s,A,i=.75*e.length,a=e.length,o=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<a;t+=4)n=NA[e.charCodeAt(t)],r=NA[e.charCodeAt(t+1)],s=NA[e.charCodeAt(t+2)],A=NA[e.charCodeAt(t+3)],c[o++]=n<<2|r>>4,c[o++]=(15&r)<<4|s>>2,c[o++]=(3&s)<<6|63&A;return l},FA=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},QA=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},IA=5,kA=11,jA=2,SA=65536>>IA,TA=(1<<IA)-1,_A=SA+(1024>>IA)+32,DA=65536>>kA,LA=(1<<kA-IA)-1,HA=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},RA=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},PA=function(e,t){var n=UA(e),r=Array.isArray(n)?QA(n):new Uint32Array(n),s=Array.isArray(n)?FA(n):new Uint16Array(n),A=24,i=HA(s,A/2,r[4]/2),a=2===r[5]?HA(s,(A+r[4])/2):RA(r,Math.ceil((A+r[4])/4));return new OA(r[0],r[1],r[2],r[3],i,a)},OA=function(){function e(e,t,n,r,s,A){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=A}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>IA])<<jA)+(e&TA),this.data[t];if(e<=65535)return t=((t=this.index[SA+(e-55296>>IA)])<<jA)+(e&TA),this.data[t];if(e<this.highStart)return t=_A-DA+(e>>kA),t=this.index[t],t+=e>>IA&LA,t=((t=this.index[t])<<jA)+(e&TA),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),MA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",KA="undefined"===typeof Uint8Array?[]:new Uint8Array(256),VA=0;VA<MA.length;VA++)KA[MA.charCodeAt(VA)]=VA;var GA,WA=1,zA=2,qA=3,YA=4,XA=5,JA=7,ZA=8,$A=9,ei=10,ti=11,ni=12,ri=13,si=14,Ai=15,ii=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=e.charCodeAt(n++);56320===(64512&A)?t.push(((1023&s)<<10)+(1023&A)+65536):(t.push(s),n--)}else t.push(s)}return t},ai=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=e[s];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},oi=PA(BA),li="\xd7",ci="\xf7",ui=function(e){return oi.get(e)},di=function(e,t,n){var r=n-2,s=t[r],A=t[n-1],i=t[n];if(A===zA&&i===qA)return li;if(A===zA||A===qA||A===YA)return ci;if(i===zA||i===qA||i===YA)return ci;if(A===ZA&&-1!==[ZA,$A,ti,ni].indexOf(i))return li;if((A===ti||A===$A)&&(i===$A||i===ei))return li;if((A===ni||A===ei)&&i===ei)return li;if(i===ri||i===XA)return li;if(i===JA)return li;if(A===WA)return li;if(A===ri&&i===si){for(;s===XA;)s=t[--r];if(s===si)return li}if(A===Ai&&i===Ai){for(var a=0;s===Ai;)a++,s=t[--r];if(a%2===0)return li}return ci},hi=function(e){var t=ii(e),n=t.length,r=0,s=0,A=t.map(ui);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=li;r<n&&(e=di(t,A,++r))===li;);if(e!==li||r===n){var i=ai.apply(null,t.slice(s,r));return s=r,{value:i,done:!1}}return{done:!0,value:null}}}},fi=function(e){for(var t,n=hi(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},pi=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),A=Math.round(s.height);if(e.body.removeChild(r),A===t)return!0}}return!1},mi=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,s=l(r.data).map(function(e){return c(e)}),A=0,i={},a=s.every(function(e,t){n.setStart(r,A),n.setEnd(r,A+e.length);var s=n.getBoundingClientRect();A+=e.length;var a=s.x>i.x||s.y>i.y;return i=s,0===t||a});return e.body.removeChild(t),a},gi=function(){return"undefined"!==typeof(new Image).crossOrigin},yi=function(){return"string"===typeof(new XMLHttpRequest).responseType},xi=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Lt){return!1}return!0},wi=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},vi=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,A=t.toDataURL();s.src=A;var i=bi(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),Bi(i).then(function(t){r.drawImage(t,0,0);var s=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var i=e.createElement("div");return i.style.backgroundImage="url("+A+")",i.style.height=n+"px",wi(s)?Bi(bi(n,n,0,0,i)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),wi(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},bi=function(e,t,n,r,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),a=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(s),i},Bi=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},Ci={get SUPPORT_RANGE_BOUNDS(){var e=pi(document);return Object.defineProperty(Ci,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ci.SUPPORT_RANGE_BOUNDS&&mi(document);return Object.defineProperty(Ci,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=xi(document);return Object.defineProperty(Ci,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?vi(document):Promise.resolve(!1);return Object.defineProperty(Ci,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=gi();return Object.defineProperty(Ci,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=yi();return Object.defineProperty(Ci,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ci,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(Ci,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ni=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Ei=function(e,t,n,r){var s=ki(t,n),A=[],a=0;return s.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(Ci.SUPPORT_RANGE_BOUNDS){var s=Fi(r,a,t.length).getClientRects();if(s.length>1){var o=Qi(t),l=0;o.forEach(function(t){A.push(new Ni(t,i.fromDOMRectList(e,Fi(r,l+a,t.length).getClientRects()))),l+=t.length})}else A.push(new Ni(t,i.fromDOMRectList(e,s)))}else{var c=r.splitText(t.length);A.push(new Ni(t,Ui(e,r))),r=c}else Ci.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));a+=t.length}),A},Ui=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var A=a(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),A}}return i.EMPTY},Fi=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},Qi=function(e){if(Ci.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return fi(e)},Ii=function(e,t){if(Ci.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Si(e,t)},ki=function(e,t){return 0!==t.letterSpacing?Qi(e):Ii(e,t)},ji=[32,160,4961,65792,65793,4153,4241],Si=function(e,t){for(var n,r=Me(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],A=function(){if(n.value){var e=n.value.slice(),t=l(e),r="";t.forEach(function(e){-1===ji.indexOf(e)?r+=c(e):(r.length&&s.push(r),s.push(c(e)),r="")}),r.length&&s.push(r)}};!(n=r.next()).done;)A();return s},Ti=function(){function e(e,t,n){this.text=_i(t.data,n.textTransform),this.textBounds=Ei(e,this.text,n,t)}return e}(),_i=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Di,Li);case 2:return e.toUpperCase();default:return e}},Di=/(^|\s|:|-|\(|\))([a-z])/g,Li=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Hi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(bA),Ri=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(bA),Pi=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=new XMLSerializer,A=a(t,n);return n.setAttribute("width",A.width+"px"),n.setAttribute("height",A.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(bA),Oi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(bA),Mi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(bA),Ki=[{type:15,flags:0,unit:"px",number:3}],Vi=[{type:16,flags:0,number:50}],Gi=function(e){return e.width>e.height?new i(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new i(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Wi=function(e){var t=e.type===Yi?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},zi="checkbox",qi="radio",Yi="password",Xi=707406591,Ji=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Wi(n),r.type!==zi&&r.type!==qi||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Gi(r.bounds)),r.type){case zi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Ki;break;case qi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Vi}return r}return t(n,e),n}(bA),Zi=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return t(n,e),n}(bA),$i=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(bA),ea=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=sa(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?ur(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dr.TRANSPARENT,A=n.contentWindow.document.body?ur(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):dr.TRANSPARENT;r.backgroundColor=rr(s)?rr(A)?r.styles.backgroundColor:A:s}}catch(Lt){}return r}return t(n,e),n}(bA),ta=["OL","UL","MENU"],na=function(e,t,n,r){for(var s=t.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,aa(s)&&s.data.trim().length>0)n.textNodes.push(new Ti(e,s,n.styles));else if(oa(s))if(Na(s)&&s.assignedNodes)s.assignedNodes().forEach(function(t){return na(e,t,n,r)});else{var i=ra(e,s);i.styles.isVisible()&&(Aa(s,i,r)?i.flags|=4:ia(i.styles)&&(i.flags|=2),-1!==ta.indexOf(s.tagName)&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?na(e,s.shadowRoot,i,r):Ba(s)||pa(s)||Ca(s)||na(e,s,i,r))}},ra=function(e,t){return xa(t)?new Hi(e,t):ga(t)?new Ri(e,t):pa(t)?new Pi(e,t):ua(t)?new Oi(e,t):da(t)?new Mi(e,t):ha(t)?new Ji(e,t):Ca(t)?new Zi(e,t):Ba(t)?new $i(e,t):wa(t)?new ea(e,t):new bA(e,t)},sa=function(e,t){var n=ra(e,t);return n.flags|=4,na(e,t,n,n),n},Aa=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||ma(e)&&n.styles.isTransparent()},ia=function(e){return e.isPositioned()||e.isFloating()},aa=function(e){return e.nodeType===Node.TEXT_NODE},oa=function(e){return e.nodeType===Node.ELEMENT_NODE},la=function(e){return oa(e)&&"undefined"!==typeof e.style&&!ca(e)},ca=function(e){return"object"===typeof e.className},ua=function(e){return"LI"===e.tagName},da=function(e){return"OL"===e.tagName},ha=function(e){return"INPUT"===e.tagName},fa=function(e){return"HTML"===e.tagName},pa=function(e){return"svg"===e.tagName},ma=function(e){return"BODY"===e.tagName},ga=function(e){return"CANVAS"===e.tagName},ya=function(e){return"VIDEO"===e.tagName},xa=function(e){return"IMG"===e.tagName},wa=function(e){return"IFRAME"===e.tagName},va=function(e){return"STYLE"===e.tagName},ba=function(e){return"SCRIPT"===e.tagName},Ba=function(e){return"TEXTAREA"===e.tagName},Ca=function(e){return"SELECT"===e.tagName},Na=function(e){return"SLOT"===e.tagName},Ea=function(e){return e.tagName.indexOf("-")>0},Ua=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,s=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var A=[];return s&&r.forEach(function(e){var n=t.counters[e.counter];A.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),A},e}(),Fa={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Qa={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Ia={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},ka={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},ja=function(e,t,n,r,s,A){return e<t||e>n?Ga(e,s,A.length>0):r.integers.reduce(function(t,n,s){for(;e>=n;)e-=n,t+=r.values[s];return t},"")+A},Sa=function(e,t,n,r){var s="";do{n||e--,s=r(e)+s,e/=t}while(e*t>=t);return s},Ta=function(e,t,n,r,s){var A=n-t+1;return(e<0?"-":"")+(Sa(Math.abs(e),A,r,function(e){return c(Math.floor(e%A)+t)})+s)},_a=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Sa(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},Da=1,La=2,Ha=4,Ra=8,Pa=function(e,t,n,r,s,A){if(e<-9999||e>9999)return Ga(e,4,s.length>0);var i=Math.abs(e),a=s;if(0===i)return t[0]+a;for(var o=0;i>0&&o<=4;o++){var l=i%10;0===l&&sA(A,Da)&&""!==a?a=t[l]+a:l>1||1===l&&0===o||1===l&&1===o&&sA(A,La)||1===l&&1===o&&sA(A,Ha)&&e>100||1===l&&o>1&&sA(A,Ra)?a=t[l]+(o>0?n[o-1]:"")+a:1===l&&o>0&&(a=n[o-1]+a),i=Math.floor(i/10)}return(e<0?r:"")+a},Oa="\u5341\u767e\u5343\u842c",Ma="\u62fe\u4f70\u4edf\u842c",Ka="\u30de\u30a4\u30ca\u30b9",Va="\ub9c8\uc774\ub108\uc2a4",Ga=function(e,t,n){var r=n?". ":"",s=n?"\u3001":"",A=n?", ":"",i=n?" ":"";switch(t){case 0:return"\u2022"+i;case 1:return"\u25e6"+i;case 2:return"\u25fe"+i;case 5:var a=Ta(e,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return _a(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",s);case 6:return ja(e,1,3999,Fa,3,r).toLowerCase();case 7:return ja(e,1,3999,Fa,3,r);case 8:return Ta(e,945,969,!1,r);case 9:return Ta(e,97,122,!1,r);case 10:return Ta(e,65,90,!1,r);case 11:return Ta(e,1632,1641,!0,r);case 12:case 49:return ja(e,1,9999,Qa,3,r);case 35:return ja(e,1,9999,Qa,3,r).toLowerCase();case 13:return Ta(e,2534,2543,!0,r);case 14:case 30:return Ta(e,6112,6121,!0,r);case 15:return _a(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",s);case 16:return _a(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",s);case 17:case 48:return Pa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Oa,"\u8ca0",s,La|Ha|Ra);case 47:return Pa(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Ma,"\u8ca0",s,Da|La|Ha|Ra);case 42:return Pa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Oa,"\u8d1f",s,La|Ha|Ra);case 41:return Pa(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Ma,"\u8d1f",s,Da|La|Ha|Ra);case 26:return Pa(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Ka,s,0);case 25:return Pa(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Ka,s,Da|La|Ha);case 31:return Pa(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Va,A,Da|La|Ha);case 33:return Pa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Va,A,0);case 32:return Pa(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Va,A,Da|La|Ha);case 18:return Ta(e,2406,2415,!0,r);case 20:return ja(e,1,19999,ka,3,r);case 21:return Ta(e,2790,2799,!0,r);case 22:return Ta(e,2662,2671,!0,r);case 22:return ja(e,1,10999,Ia,3,r);case 23:return _a(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return _a(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Ta(e,3302,3311,!0,r);case 28:return _a(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",s);case 29:return _a(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",s);case 34:return Ta(e,3792,3801,!0,r);case 37:return Ta(e,6160,6169,!0,r);case 38:return Ta(e,4160,4169,!0,r);case 39:return Ta(e,2918,2927,!0,r);case 40:return Ta(e,1776,1785,!0,r);case 43:return Ta(e,3046,3055,!0,r);case 44:return Ta(e,3174,3183,!0,r);case 45:return Ta(e,3664,3673,!0,r);case 46:return Ta(e,3872,3881,!0,r);default:return Ta(e,48,57,!0,r)}},Wa="data-html2canvas-ignore",za=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ua,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,A=Ya(e,t);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=A.contentWindow,l=o.document,c=Za(A).then(function(){return r(n,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(ro),o&&(o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ja(l)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(l,n)}).then(function(){return A})]:[2,A]}})})});return l.open(),l.write(to(document.doctype)+"<html></html>"),no(this.referenceElement.ownerDocument,i,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},e.prototype.createElementClone=function(e){if(vA(e,2),ga(e))return this.createCanvasClone(e);if(ya(e))return this.createVideoClone(e);if(va(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return xa(t)&&(xa(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Ea(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return eo(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Lt){if(this.context.logger.error("Unable to access cssRules property",Lt),"SecurityError"!==Lt.name)throw Lt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Lt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),A=r.getContext("2d");if(A)if(!this.options.allowTaint&&s)A.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var a=i.getContextAttributes();!1===(null===a||void 0===a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}A.drawImage(e,0,0)}return r}catch(Lt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Lt){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){oa(t)&&(ba(t)||t.hasAttribute(Wa)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&oa(t)&&va(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(oa(s)&&Na(s)&&"function"===typeof s.assignedNodes){var A=s.assignedNodes();A.length&&A.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,s,n)},e.prototype.cloneNode=function(e,t){if(aa(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&oa(e)&&(la(e)||ca(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),A=n.getComputedStyle(e,":before"),i=n.getComputedStyle(e,":after");this.referenceElement===e&&la(r)&&(this.clonedReferenceElement=r),ma(r)&&lo(r);var a=this.counters.parse(new gA(this.context,s)),o=this.resolvePseudoContent(e,r,A,GA.BEFORE);Ea(e)&&(t=!0),ya(e)||this.cloneChildNodes(e,r,t),o&&r.insertBefore(o,r.firstChild);var l=this.resolvePseudoContent(e,r,i,GA.AFTER);return l&&r.appendChild(l),this.counters.pop(a),(s&&(this.options.copyStyles||ca(e))&&!wa(e)||t)&&eo(s,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Ba(e)||Ca(e))&&(Ba(r)||Ca(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var s=this;if(n){var A=n.content,i=t.ownerDocument;if(i&&A&&"none"!==A&&"-moz-alt-content"!==A&&"none"!==n.display){this.counters.parse(new gA(this.context,n));var a=new mA(this.context,n),o=i.createElement("html2canvaspseudoelement");eo(n,o),a.content.forEach(function(t){if(0===t.type)o.appendChild(i.createTextNode(t.value));else if(22===t.type){var n=i.createElement("img");n.src=t.value,n.style.opacity="1",o.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Sn);r.length&&o.appendChild(i.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var A=t.values.filter(Ln),l=A[0],c=A[1];if(l&&Sn(l)){var u=s.counters.getCounterValue(l.value),d=c&&Sn(c)?Cs.parse(s.context,c.value):3;o.appendChild(i.createTextNode(Ga(u,d,!1)))}}else if("counters"===t.name){var h=t.values.filter(Ln),f=(l=h[0],h[1]);if(c=h[2],l&&Sn(l)){var p=s.counters.getCounterValues(l.value),m=c&&Sn(c)?Cs.parse(s.context,c.value):3,g=f&&0===f.type?f.value:"",y=p.map(function(e){return Ga(e,m,!1)}).join(g);o.appendChild(i.createTextNode(y))}}}else if(20===t.type)switch(t.value){case"open-quote":o.appendChild(i.createTextNode(cA(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":o.appendChild(i.createTextNode(cA(a.quotes,--s.quoteDepth,!1)));break;default:o.appendChild(i.createTextNode(t.value))}}),o.className=io+" "+ao;var l=r===GA.BEFORE?" "+io:" "+ao;return ca(t)?t.className.baseValue+=l:t.className+=l,o}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(GA||(GA={}));var qa,Ya=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Wa,"true"),e.body.appendChild(n),n},Xa=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Ja=function(e){return Promise.all([].slice.call(e.images,0).map(Xa))},Za=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),t(e))},50)}})},$a=["all","d","content"],eo=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===$a.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},to=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},no=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},ro=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},so=":before",Ao=":after",io="___html2canvas___pseudoelement_before",ao="___html2canvas___pseudoelement_after",oo='{\n    content: "" !important;\n    display: none !important;\n}',lo=function(e){co(e,"."+io+so+oo+"\n         ."+ao+Ao+oo)},co=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},uo=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),ho=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:wo(e)||go(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,A,i=this;return s(this,function(s){switch(s.label){case 0:return t=uo.isSameOrigin(e),n=!yo(e)&&!0===this._options.useCORS&&Ci.SUPPORT_CORS_IMAGES&&!t,r=!yo(e)&&!t&&!wo(e)&&"string"===typeof this._options.proxy&&Ci.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||yo(e)||wo(e)||r||n?(A=e,r?[4,this.proxy(A)]:[3,2]):[2];case 1:A=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(xo(A)||n)&&(r.crossOrigin="anonymous"),r.src=A,!0===r.complete&&setTimeout(function(){return e(r)},500),i._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(s,A){var i=Ci.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===i)s(a.response);else{var e=new FileReader;e.addEventListener("load",function(){return s(e.result)},!1),e.addEventListener("error",function(e){return A(e)},!1),e.readAsDataURL(a.response)}else A("Failed to proxy resource "+r+" with status code "+a.status)},a.onerror=A;var o=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+o+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&a instanceof XMLHttpRequest&&(a.responseType=i),t._options.imageTimeout){var l=t._options.imageTimeout;a.timeout=l,a.ontimeout=function(){return A("Timed out ("+l+"ms) proxying "+r)}}a.send()})},e}(),fo=/^data:image\/svg\+xml/i,po=/^data:image\/.*;base64,/i,mo=/^data:image\/.*/i,go=function(e){return Ci.SUPPORT_SVG_DRAWING||!vo(e)},yo=function(e){return mo.test(e)},xo=function(e){return po.test(e)},wo=function(e){return"blob"===e.substr(0,4)},vo=function(e){return"svg"===e.substr(-3).toLowerCase()||fo.test(e)},bo=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Bo=function(e,t,n){return new bo(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Co=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Bo(this.start,this.startControl,t),s=Bo(this.startControl,this.endControl,t),A=Bo(this.endControl,this.end,t),i=Bo(r,s,t),a=Bo(s,A,t),o=Bo(i,a,t);return n?new e(this.start,r,i,o):new e(o,a,A,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),No=function(e){return 1===e.type},Eo=function(){function e(e){var t=e.styles,n=e.bounds,r=Wn(t.borderTopLeftRadius,n.width,n.height),s=r[0],A=r[1],i=Wn(t.borderTopRightRadius,n.width,n.height),a=i[0],o=i[1],l=Wn(t.borderBottomRightRadius,n.width,n.height),c=l[0],u=l[1],d=Wn(t.borderBottomLeftRadius,n.width,n.height),h=d[0],f=d[1],p=[];p.push((s+a)/n.width),p.push((h+c)/n.width),p.push((A+f)/n.height),p.push((o+u)/n.height);var m=Math.max.apply(Math,p);m>1&&(s/=m,A/=m,a/=m,o/=m,c/=m,u/=m,h/=m,f/=m);var g=n.width-a,y=n.height-u,x=n.width-c,w=n.height-f,v=t.borderTopWidth,b=t.borderRightWidth,B=t.borderBottomWidth,C=t.borderLeftWidth,N=zn(t.paddingTop,e.bounds.width),E=zn(t.paddingRight,e.bounds.width),U=zn(t.paddingBottom,e.bounds.width),F=zn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||A>0?Uo(n.left+C/3,n.top+v/3,s-C/3,A-v/3,qa.TOP_LEFT):new bo(n.left+C/3,n.top+v/3),this.topRightBorderDoubleOuterBox=s>0||A>0?Uo(n.left+g,n.top+v/3,a-b/3,o-v/3,qa.TOP_RIGHT):new bo(n.left+n.width-b/3,n.top+v/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?Uo(n.left+x,n.top+y,c-b/3,u-B/3,qa.BOTTOM_RIGHT):new bo(n.left+n.width-b/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=h>0||f>0?Uo(n.left+C/3,n.top+w,h-C/3,f-B/3,qa.BOTTOM_LEFT):new bo(n.left+C/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||A>0?Uo(n.left+2*C/3,n.top+2*v/3,s-2*C/3,A-2*v/3,qa.TOP_LEFT):new bo(n.left+2*C/3,n.top+2*v/3),this.topRightBorderDoubleInnerBox=s>0||A>0?Uo(n.left+g,n.top+2*v/3,a-2*b/3,o-2*v/3,qa.TOP_RIGHT):new bo(n.left+n.width-2*b/3,n.top+2*v/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?Uo(n.left+x,n.top+y,c-2*b/3,u-2*B/3,qa.BOTTOM_RIGHT):new bo(n.left+n.width-2*b/3,n.top+n.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=h>0||f>0?Uo(n.left+2*C/3,n.top+w,h-2*C/3,f-2*B/3,qa.BOTTOM_LEFT):new bo(n.left+2*C/3,n.top+n.height-2*B/3),this.topLeftBorderStroke=s>0||A>0?Uo(n.left+C/2,n.top+v/2,s-C/2,A-v/2,qa.TOP_LEFT):new bo(n.left+C/2,n.top+v/2),this.topRightBorderStroke=s>0||A>0?Uo(n.left+g,n.top+v/2,a-b/2,o-v/2,qa.TOP_RIGHT):new bo(n.left+n.width-b/2,n.top+v/2),this.bottomRightBorderStroke=c>0||u>0?Uo(n.left+x,n.top+y,c-b/2,u-B/2,qa.BOTTOM_RIGHT):new bo(n.left+n.width-b/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=h>0||f>0?Uo(n.left+C/2,n.top+w,h-C/2,f-B/2,qa.BOTTOM_LEFT):new bo(n.left+C/2,n.top+n.height-B/2),this.topLeftBorderBox=s>0||A>0?Uo(n.left,n.top,s,A,qa.TOP_LEFT):new bo(n.left,n.top),this.topRightBorderBox=a>0||o>0?Uo(n.left+g,n.top,a,o,qa.TOP_RIGHT):new bo(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||u>0?Uo(n.left+x,n.top+y,c,u,qa.BOTTOM_RIGHT):new bo(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||f>0?Uo(n.left,n.top+w,h,f,qa.BOTTOM_LEFT):new bo(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||A>0?Uo(n.left+C,n.top+v,Math.max(0,s-C),Math.max(0,A-v),qa.TOP_LEFT):new bo(n.left+C,n.top+v),this.topRightPaddingBox=a>0||o>0?Uo(n.left+Math.min(g,n.width-b),n.top+v,g>n.width+b?0:Math.max(0,a-b),Math.max(0,o-v),qa.TOP_RIGHT):new bo(n.left+n.width-b,n.top+v),this.bottomRightPaddingBox=c>0||u>0?Uo(n.left+Math.min(x,n.width-C),n.top+Math.min(y,n.height-B),Math.max(0,c-b),Math.max(0,u-B),qa.BOTTOM_RIGHT):new bo(n.left+n.width-b,n.top+n.height-B),this.bottomLeftPaddingBox=h>0||f>0?Uo(n.left+C,n.top+Math.min(w,n.height-B),Math.max(0,h-C),Math.max(0,f-B),qa.BOTTOM_LEFT):new bo(n.left+C,n.top+n.height-B),this.topLeftContentBox=s>0||A>0?Uo(n.left+C+F,n.top+v+N,Math.max(0,s-(C+F)),Math.max(0,A-(v+N)),qa.TOP_LEFT):new bo(n.left+C+F,n.top+v+N),this.topRightContentBox=a>0||o>0?Uo(n.left+Math.min(g,n.width+C+F),n.top+v+N,g>n.width+C+F?0:a-C+F,o-(v+N),qa.TOP_RIGHT):new bo(n.left+n.width-(b+E),n.top+v+N),this.bottomRightContentBox=c>0||u>0?Uo(n.left+Math.min(x,n.width-(C+F)),n.top+Math.min(y,n.height+v+N),Math.max(0,c-(b+E)),u-(B+U),qa.BOTTOM_RIGHT):new bo(n.left+n.width-(b+E),n.top+n.height-(B+U)),this.bottomLeftContentBox=h>0||f>0?Uo(n.left+C+F,n.top+w,Math.max(0,h-(C+F)),f-(B+U),qa.BOTTOM_LEFT):new bo(n.left+C+F,n.top+n.height-(B+U))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(qa||(qa={}));var Uo=function(e,t,n,r,s){var A=(Math.sqrt(2)-1)/3*4,i=n*A,a=r*A,o=e+n,l=t+r;switch(s){case qa.TOP_LEFT:return new Co(new bo(e,l),new bo(e,l-a),new bo(o-i,t),new bo(o,t));case qa.TOP_RIGHT:return new Co(new bo(e,t),new bo(e+i,t),new bo(o,l-a),new bo(o,l));case qa.BOTTOM_RIGHT:return new Co(new bo(o,t),new bo(o,t+a),new bo(e+i,l),new bo(e,l));case qa.BOTTOM_LEFT:default:return new Co(new bo(o,l),new bo(o-i,l),new bo(e,t+a),new bo(e,t))}},Fo=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Qo=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Io=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},ko=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),jo=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),So=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),To=function(e){return 0===e.type},_o=function(e){return 1===e.type},Do=function(e){return 2===e.type},Lo=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Ho=function(e,t,n,r,s){return e.map(function(e,A){switch(A){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+s);case 3:return e.add(t,n+s)}return e})},Ro=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Po=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Eo(this.container),this.container.styles.opacity<1&&this.effects.push(new So(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new ko(n,r,s))}if(0!==this.container.styles.overflowX){var A=Fo(this.curves),i=Io(this.curves);Lo(A,i)?this.effects.push(new jo(A,6)):(this.effects.push(new jo(A,2)),this.effects.push(new jo(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(e){return!_o(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,s),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var A=Fo(n.curves),i=Io(n.curves);Lo(A,i)||r.unshift(new jo(i,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(t){return sA(t.target,e)})},e}(),Oo=function(e,t,n,r){e.container.elements.forEach(function(s){var A=sA(s.flags,4),i=sA(s.flags,2),a=new Po(s,e);sA(s.styles.display,2048)&&r.push(a);var o=sA(s.flags,8)?[]:r;if(A||i){var l=A||s.styles.isPositioned()?n:t,c=new Ro(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var u=s.styles.zIndex.order;if(u<0){var d=0;l.negativeZIndex.some(function(e,t){return u>e.element.container.styles.zIndex.order?(d=t,!1):d>0}),l.negativeZIndex.splice(d,0,c)}else if(u>0){var h=0;l.positiveZIndex.some(function(e,t){return u>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0}),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else s.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);Oo(a,c,A?c:n,o)}else s.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),Oo(a,t,n,o);sA(s.flags,8)&&Mo(s,o)})},Mo=function(e,t){for(var n=e instanceof Mi?e.start:1,r=e instanceof Mi&&e.reversed,s=0;s<t.length;s++){var A=t[s];A.container instanceof Oi&&"number"===typeof A.container.value&&0!==A.container.value&&(n=A.container.value),A.listValue=Ga(n,A.container.styles.listStyleType,!0),n+=r?-1:1}},Ko=function(e){var t=new Po(e,null),n=new Ro(t),r=[];return Oo(t,n,n,r),Mo(t.container,r),n},Vo=function(e,t){switch(t){case 0:return Yo(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Yo(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Yo(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Yo(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Go=function(e,t){switch(t){case 0:return Yo(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Yo(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Yo(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Yo(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Wo=function(e,t){switch(t){case 0:return Yo(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Yo(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Yo(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Yo(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},zo=function(e,t){switch(t){case 0:return qo(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return qo(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return qo(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return qo(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},qo=function(e,t){var n=[];return No(e)?n.push(e.subdivide(.5,!1)):n.push(e),No(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Yo=function(e,t,n,r){var s=[];return No(e)?s.push(e.subdivide(.5,!1)):s.push(e),No(n)?s.push(n.subdivide(.5,!0)):s.push(n),No(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),No(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},Xo=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Jo=function(e){var t=e.styles,n=e.bounds,r=zn(t.paddingLeft,n.width),s=zn(t.paddingRight,n.width),A=zn(t.paddingTop,n.width),i=zn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,A+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+A+i))},Zo=function(e,t){return 0===e?t.bounds:2===e?Jo(t):Xo(t)},$o=function(e,t){return 0===e?t.bounds:2===e?Jo(t):Xo(t)},el=function(e,t,n){var r=Zo(sl(e.styles.backgroundOrigin,t),e),s=$o(sl(e.styles.backgroundClip,t),e),A=rl(sl(e.styles.backgroundSize,t),n,r),i=A[0],a=A[1],o=Wn(sl(e.styles.backgroundPosition,t),r.width-i,r.height-a);return[Al(sl(e.styles.backgroundRepeat,t),o,A,r,s),Math.round(r.left+o[0]),Math.round(r.top+o[1]),i,a]},tl=function(e){return Sn(e)&&e.value===Dr.AUTO},nl=function(e){return"number"===typeof e},rl=function(e,t,n){var r=t[0],s=t[1],A=t[2],i=e[0],a=e[1];if(!i)return[0,0];if(On(i)&&a&&On(a))return[zn(i,n.width),zn(a,n.height)];var o=nl(A);if(Sn(i)&&(i.value===Dr.CONTAIN||i.value===Dr.COVER))return nl(A)?n.width/n.height<A!==(i.value===Dr.COVER)?[n.width,n.width/A]:[n.height*A,n.height]:[n.width,n.height];var l=nl(r),c=nl(s),u=l||c;if(tl(i)&&(!a||tl(a)))return l&&c?[r,s]:o||u?u&&o?[l?r:s*A,c?s:r/A]:[l?r:n.width,c?s:n.height]:[n.width,n.height];if(o){var d=0,h=0;return On(i)?d=zn(i,n.width):On(a)&&(h=zn(a,n.height)),tl(i)?d=h*A:a&&!tl(a)||(h=d/A),[d,h]}var f=null,p=null;if(On(i)?f=zn(i,n.width):a&&On(a)&&(p=zn(a,n.height)),null===f||a&&!tl(a)||(p=l&&c?f/r*s:n.height),null!==p&&tl(i)&&(f=l&&c?p/s*r:n.width),null!==f&&null!==p)return[f,p];throw new Error("Unable to calculate background-size for element")},sl=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},Al=function(e,t,n,r,s){var A=t[0],i=t[1],a=n[0],o=n[1];switch(e){case 2:return[new bo(Math.round(r.left),Math.round(r.top+i)),new bo(Math.round(r.left+r.width),Math.round(r.top+i)),new bo(Math.round(r.left+r.width),Math.round(o+r.top+i)),new bo(Math.round(r.left),Math.round(o+r.top+i))];case 3:return[new bo(Math.round(r.left+A),Math.round(r.top)),new bo(Math.round(r.left+A+a),Math.round(r.top)),new bo(Math.round(r.left+A+a),Math.round(r.height+r.top)),new bo(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new bo(Math.round(r.left+A),Math.round(r.top+i)),new bo(Math.round(r.left+A+a),Math.round(r.top+i)),new bo(Math.round(r.left+A+a),Math.round(r.top+i+o)),new bo(Math.round(r.left+A),Math.round(r.top+i+o))];default:return[new bo(Math.round(s.left),Math.round(s.top)),new bo(Math.round(s.left+s.width),Math.round(s.top)),new bo(Math.round(s.left+s.width),Math.round(s.height+s.top)),new bo(Math.round(s.left),Math.round(s.height+s.top))]}},il="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",al="Hidden Text",ol=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),A=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",A.appendChild(n),r.src=il,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(al)),n.appendChild(s),n.appendChild(r);var i=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(al)),n.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-n.offsetTop+2;return A.removeChild(n),{baseline:i,middle:a}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),ll=function(){function e(e,t){this.context=e,this.options=t}return e}(),cl=1e4,ul=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new ol(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Do(e)&&(this.ctx.globalAlpha=e.opacity),To(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),_o(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return sA(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Qi(e.text).reduce(function(t,s){return r.ctx.fillText(s,t,e.bounds.top+n),t+r.ctx.measureText(s).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=ml(e.fontFamily).join(", "),r=kn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,A,i,a,o,l,c,u=this;return s(this,function(s){return n=this.createFontStyle(t),r=n[0],A=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(A,i),o=a.baseline,l=a.middle,c=t.paintOrder,e.textBounds.forEach(function(e){c.forEach(function(n){switch(n){case 0:u.ctx.fillStyle=sr(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,o);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){u.ctx.shadowColor=sr(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,o)}),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=sr(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+o),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=sr(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+o)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Jo(e),s=Io(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,A,a,o,l,c,u,d,h,f,p,m,g,y,x,w,v;return s(this,function(s){switch(s.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,A=t.styles,a=0,o=t.textNodes,s.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,A)]):[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:if(!(t instanceof Hi))return[3,8];s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return y=s.sent(),this.renderReplacedElement(t,r,y),[3,8];case 7:return s.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Ri&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Pi))return[3,12];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return y=s.sent(),this.renderReplacedElement(t,r,y),[3,12];case 11:return s.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof ea&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:c=s.sent(),t.width&&t.height&&this.ctx.drawImage(c,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),s.label=14;case 14:if(t instanceof Ji&&(u=Math.min(t.bounds.width,t.bounds.height),t.type===zi?t.checked&&(this.ctx.save(),this.path([new bo(t.bounds.left+.39363*u,t.bounds.top+.79*u),new bo(t.bounds.left+.16*u,t.bounds.top+.5549*u),new bo(t.bounds.left+.27347*u,t.bounds.top+.44071*u),new bo(t.bounds.left+.39694*u,t.bounds.top+.5649*u),new bo(t.bounds.left+.72983*u,t.bounds.top+.23*u),new bo(t.bounds.left+.84*u,t.bounds.top+.34085*u),new bo(t.bounds.left+.39363*u,t.bounds.top+.79*u)]),this.ctx.fillStyle=sr(Xi),this.ctx.fill(),this.ctx.restore()):t.type===qi&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+u/2,t.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=sr(Xi),this.ctx.fill(),this.ctx.restore())),dl(t)&&t.value.length){switch(d=this.createFontStyle(A),w=d[0],h=d[1],f=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=sr(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fl(t.styles.textAlign),v=Jo(t),p=0,t.styles.textAlign){case 1:p+=v.width/2;break;case 2:p+=v.width}m=v.add(p,0,0,-v.height/2+1),this.ctx.save(),this.path([new bo(v.left,v.top),new bo(v.left+v.width,v.top),new bo(v.left+v.width,v.top+v.height),new bo(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ni(t.value,m),A.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!sA(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];y=void 0,x=g.url,s.label=15;case 15:return s.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return y=s.sent(),this.ctx.drawImage(y,t.bounds.left-(y.width+10),t.bounds.top),[3,18];case 17:return s.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(w=this.createFontStyle(A)[0],this.ctx.font=w,this.ctx.fillStyle=sr(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new i(t.bounds.left,t.bounds.top+zn(t.styles.paddingTop,t.bounds.width),t.bounds.width,vs(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ni(e.listValue,v),A.letterSpacing,vs(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),s.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,A,i,a,o,l,c,u,d,h,f,p,m;return s(this,function(s){switch(s.label){case 0:return sA(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:s.sent(),t=0,n=e.negativeZIndex,s.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:s.sent(),s.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:s.sent(),r=0,A=e.nonInlineLevel,s.label=7;case 7:return r<A.length?(m=A[r],[4,this.renderNode(m)]):[3,10];case 8:s.sent(),s.label=9;case 9:return r++,[3,7];case 10:i=0,a=e.nonPositionedFloats,s.label=11;case 11:return i<a.length?(m=a[i],[4,this.renderStack(m)]):[3,14];case 12:s.sent(),s.label=13;case 13:return i++,[3,11];case 14:o=0,l=e.nonPositionedInlineLevel,s.label=15;case 15:return o<l.length?(m=l[o],[4,this.renderStack(m)]):[3,18];case 16:s.sent(),s.label=17;case 17:return o++,[3,15];case 18:c=0,u=e.inlineLevel,s.label=19;case 19:return c<u.length?(m=u[c],[4,this.renderNode(m)]):[3,22];case 20:s.sent(),s.label=21;case 21:return c++,[3,19];case 22:d=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,s.label=23;case 23:return d<h.length?(m=h[d],[4,this.renderStack(m)]):[3,26];case 24:s.sent(),s.label=25;case 25:return d++,[3,23];case 26:f=0,p=e.positiveZIndex,s.label=27;case 27:return f<p.length?(m=p[f],[4,this.renderStack(m)]):[3,30];case 28:s.sent(),s.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=No(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),No(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var s=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,n),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),s},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,A,i,a;return s(this,function(o){switch(o.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var A,i,a,o,l,c,u,d,h,f,p,m,g,y,x,w,v,b,B,C,N,E,U,F,Q,I,k,j,S,T,_;return s(this,function(s){switch(s.label){case 0:if(0!==n.type)return[3,5];A=void 0,i=n.url,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return A=s.sent(),[3,4];case 3:return s.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return A&&(a=el(e,t,[A.width,A.height,A.width/A.height]),w=a[0],E=a[1],U=a[2],B=a[3],C=a[4],y=r.ctx.createPattern(r.resizeImage(A,B,C),"repeat"),r.renderRepeat(w,y,E,U)),[3,6];case 5:jr(n)?(o=el(e,t,[null,null,null]),w=o[0],E=o[1],U=o[2],B=o[3],C=o[4],l=yr(n.angle,B,C),c=l[0],u=l[1],d=l[2],h=l[3],f=l[4],(p=document.createElement("canvas")).width=B,p.height=C,m=p.getContext("2d"),g=m.createLinearGradient(u,h,d,f),mr(n.stops,c).forEach(function(e){return g.addColorStop(e.stop,sr(e.color))}),m.fillStyle=g,m.fillRect(0,0,B,C),B>0&&C>0&&(y=r.ctx.createPattern(p,"repeat"),r.renderRepeat(w,y,E,U))):Sr(n)&&(x=el(e,t,[null,null,null]),w=x[0],v=x[1],b=x[2],B=x[3],C=x[4],N=0===n.position.length?[Vn]:n.position,E=zn(N[0],B),U=zn(N[N.length-1],C),F=vr(n,E,U,B,C),Q=F[0],I=F[1],Q>0&&I>0&&(k=r.ctx.createRadialGradient(v+E,b+U,0,v+E,b+U,Q),mr(n.stops,2*Q).forEach(function(e){return k.addColorStop(e.stop,sr(e.color))}),r.path(w),r.ctx.fillStyle=k,Q!==I?(j=e.bounds.left+.5*e.bounds.width,S=e.bounds.top+.5*e.bounds.height,_=1/(T=I/Q),r.ctx.save(),r.ctx.translate(j,S),r.ctx.transform(1,0,0,T,0,0),r.ctx.translate(-j,-S),r.ctx.fillRect(v,_*(b-S)+S,B,C*_),r.ctx.restore()):r.ctx.fill())),s.label=6;case 6:return t--,[2]}})},r=this,A=0,i=e.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return A<i.length?(a=i[A],[5,n(a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return A++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){return this.path(Vo(n,t)),this.ctx.fillStyle=sr(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,A){return r(this,void 0,void 0,function(){var r,i;return s(this,function(s){switch(s.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,A)]:[3,2];case 1:return s.sent(),[2];case 2:return r=Go(A,n),this.path(r),this.ctx.fillStyle=sr(e),this.ctx.fill(),i=Wo(A,n),this.path(i),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,A,i,a,o,l,c=this;return s(this,function(s){switch(s.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],A=hl(sl(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(A),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=sr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:s.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){c.ctx.save();var n=Fo(e.curves),r=t.inset?0:cl,s=Ho(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(c.path(n),c.ctx.clip(),c.mask(s)):(c.mask(n),c.ctx.clip(),c.path(s)),c.ctx.shadowOffsetX=t.offsetX.number+r,c.ctx.shadowOffsetY=t.offsetY.number,c.ctx.shadowColor=sr(t.color),c.ctx.shadowBlur=t.blur.number,c.ctx.fillStyle=t.inset?sr(t.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),s.label=2;case 2:i=0,a=0,o=r,s.label=3;case 3:return a<o.length?0!==(l=o[a]).style&&!rr(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return s.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,i,e.curves,3)];case 6:return s.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,i,e.curves)];case 8:return s.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,i,e.curves)];case 10:s.sent(),s.label=11;case 11:i++,s.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,A,i){return r(this,void 0,void 0,function(){var r,a,o,l,c,u,d,h,f,p,m,g,y,x,w,v;return s(this,function(s){return this.ctx.save(),r=zo(A,n),a=Vo(A,n),2===i&&(this.path(a),this.ctx.clip()),No(a[0])?(o=a[0].start.x,l=a[0].start.y):(o=a[0].x,l=a[0].y),No(a[1])?(c=a[1].end.x,u=a[1].end.y):(c=a[1].x,u=a[1].y),d=0===n||2===n?Math.abs(o-c):Math.abs(l-u),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(a.slice(0,2)),h=t<3?3*t:2*t,f=t<3?2*t:t,3===i&&(h=t,f=t),p=!0,d<=2*h?p=!1:d<=2*h+f?(h*=m=d/(2*h+f),f*=m):(g=Math.floor((d+f)/(h+f)),y=(d-g*h)/(g-1),f=(x=(d-(g+1)*h)/g)<=0||Math.abs(f-y)<Math.abs(f-x)?y:x),p&&(3===i?this.ctx.setLineDash([0,h+f]):this.ctx.setLineDash([h,f])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=sr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(No(a[0])&&(w=a[3],v=a[0],this.ctx.beginPath(),this.formatPath([new bo(w.end.x,w.end.y),new bo(v.start.x,v.start.y)]),this.ctx.stroke()),No(a[1])&&(w=a[1],v=a[2],this.ctx.beginPath(),this.formatPath([new bo(w.end.x,w.end.y),new bo(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Ko(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(ll),dl=function(e){return e instanceof $i||e instanceof Zi||e instanceof Ji&&e.type!==qi&&e.type!==zi},hl=function(e,t){switch(e){case 0:return Fo(t);case 2:return Qo(t);default:return Io(t)}},fl=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},pl=["-apple-system","system-ui"],ml=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===pl.indexOf(e)}):e},gl=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t=bi(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,yl(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(ll),yl=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},xl=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,A([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,A([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,A([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,A([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),wl=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new xl({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new ho(this,t)}return e.instanceCount=1,e}(),vl=function(e,t){return void 0===t&&(t={}),bl(e,t)};"undefined"!==typeof window&&uo.setContext(window);var bl=function(e,t){return r(void 0,void 0,void 0,function(){var r,A,l,c,u,d,h,f,p,m,g,y,x,w,v,b,B,C,N,E,U,F,Q,I,k,j,S,T,_,D,L,H,R,P,O,M,K,V;return s(this,function(s){switch(s.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(A=r.defaultView))throw new Error("Document is not attached to a Window");return l={allowTaint:null!==(F=t.allowTaint)&&void 0!==F&&F,imageTimeout:null!==(Q=t.imageTimeout)&&void 0!==Q?Q:15e3,proxy:t.proxy,useCORS:null!==(I=t.useCORS)&&void 0!==I&&I},c=n({logging:null===(k=t.logging)||void 0===k||k,cache:t.cache},l),u={windowWidth:null!==(j=t.windowWidth)&&void 0!==j?j:A.innerWidth,windowHeight:null!==(S=t.windowHeight)&&void 0!==S?S:A.innerHeight,scrollX:null!==(T=t.scrollX)&&void 0!==T?T:A.pageXOffset,scrollY:null!==(_=t.scrollY)&&void 0!==_?_:A.pageYOffset},d=new i(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),h=new wl(c,d),f=null!==(D=t.foreignObjectRendering)&&void 0!==D&&D,p={allowTaint:null!==(L=t.allowTaint)&&void 0!==L&&L,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},h.logger.debug("Starting document clone with size "+d.width+"x"+d.height+" scrolled to "+-d.left+","+-d.top),m=new za(h,e,p),(g=m.clonedReferenceElement)?[4,m.toIFrame(r,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return y=s.sent(),x=ma(g)||fa(g)?o(g.ownerDocument):a(h,g),w=x.width,v=x.height,b=x.left,B=x.top,C=Bl(h,g,t.backgroundColor),N={canvas:t.canvas,backgroundColor:C,scale:null!==(R=null!==(H=t.scale)&&void 0!==H?H:A.devicePixelRatio)&&void 0!==R?R:1,x:(null!==(P=t.x)&&void 0!==P?P:0)+b,y:(null!==(O=t.y)&&void 0!==O?O:0)+B,width:null!==(M=t.width)&&void 0!==M?M:Math.ceil(w),height:null!==(K=t.height)&&void 0!==K?K:Math.ceil(v)},f?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gl(h,N).render(g)]):[3,3];case 2:return E=s.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+b+","+B+" with size "+w+"x"+v+" using computed rendering"),h.logger.debug("Starting DOM parsing"),U=sa(h,g),C===U.styles.backgroundColor&&(U.styles.backgroundColor=dr.TRANSPARENT),h.logger.debug("Starting renderer for element at "+N.x+","+N.y+" with size "+N.width+"x"+N.height),[4,new ul(h,N).render(U)];case 4:E=s.sent(),s.label=5;case 5:return(null===(V=t.removeContainer)||void 0===V||V)&&(za.destroy(y)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,E]}})})},Bl=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?ur(e,getComputedStyle(r.documentElement).backgroundColor):dr.TRANSPARENT,A=r.body?ur(e,getComputedStyle(r.body).backgroundColor):dr.TRANSPARENT,i="string"===typeof n?ur(e,n):null===n?dr.TRANSPARENT:4294967295;return t===r.documentElement?rr(s)?rr(A)?i:A:s:i};return vl}()},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function o(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function p(e,t,n,r,s,A,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=A,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(f,e)||!u.call(h,e)&&(d.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),b=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var S=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var D,L=Object.assign;function H(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var R=!1;function P(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var s=l.stack.split("\n"),A=r.stack.split("\n"),i=s.length-1,a=A.length-1;1<=i&&0<=a&&s[i]!==A[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==A[a]){if(1!==i||1!==a)do{if(i--,0>--a||s[i]!==A[a]){var o="\n"+s[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=a);break}}}finally{R=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function O(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=P(e.type,!1);case 11:return e=P(e.type.render,!1);case 1:return e=P(e.type,!0);default:return""}}function M(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case b:return"Portal";case N:return"Profiler";case C:return"StrictMode";case Q:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case U:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case F:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,A=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,A.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(A(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(A(92));if(te(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function Ae(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,ue=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(A(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(A(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(A(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Be=null,Ce=null;function Ne(e){if(e=xs(e)){if("function"!==typeof be)throw Error(A(280));var t=e.stateNode;t&&(t=vs(t),be(e.stateNode,e.type,t))}}function Ee(e){Be?Ce?Ce.push(e):Ce=[e]:Be=e}function Ue(){if(Be){var e=Be,t=Ce;if(Ce=Be=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Fe(e,t){return e(t)}function Qe(){}var Ie=!1;function ke(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Fe(e,t,n)}finally{Ie=!1,(null!==Be||null!==Ce)&&(Qe(),Ue())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=vs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(A(231,t,typeof n));return n}var Se=!1;if(c)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Se=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(ce){Se=!1}function _e(e,t,n,r,s,A,i,a,o){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Le=null,He=!1,Re=null,Pe={onError:function(e){De=!0,Le=e}};function Oe(e,t,n,r,s,A,i,a,o){De=!1,Le=null,_e.apply(Pe,arguments)}function Me(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Me(e)!==e)throw Error(A(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Me(e)))throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ve(s),e;if(i===r)return Ve(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(3!==n.tag)throw Error(A(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var ze=s.unstable_scheduleCallback,qe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,At=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ot|0)|0},at=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,A=e.pingedLanes,i=268435455&n;if(0!==i){var a=i&~s;0!==a?r=ut(a):0!==(A&=i)&&(r=ut(A))}else 0!==(i=n&~s)?r=ut(i):0!==A&&(r=ut(A));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(A=t&-t)||16===s&&0!==(4194240&A)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,bt,Bt,Ct,Nt,Et=!1,Ut=[],Ft=null,Qt=null,It=null,kt=new Map,jt=new Map,St=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(e,t){switch(e){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Dt(e,t,n,r,s,A){return null===e||e.nativeEvent!==A?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:A,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=ys(e.target);if(null!==t){var n=Me(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ke(n)))return e.blockedOn=t,void Nt(e.priority,function(){Bt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ht(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Rt(e,t,n){Ht(e)&&n.delete(t)}function Pt(){Et=!1,null!==Ft&&Ht(Ft)&&(Ft=null),null!==Qt&&Ht(Qt)&&(Qt=null),null!==It&&Ht(It)&&(It=null),kt.forEach(Rt),jt.forEach(Rt)}function Ot(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Pt)))}function Mt(e){function t(t){return Ot(t,e)}if(0<Ut.length){Ot(Ut[0],e);for(var n=1;n<Ut.length;n++){var r=Ut[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ft&&Ot(Ft,e),null!==Qt&&Ot(Qt,e),null!==It&&Ot(It,e),kt.forEach(t),jt.forEach(t),n=0;n<St.length;n++)(r=St[n]).blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&null===(n=St[0]).blockedOn;)Lt(n),null===n.blockedOn&&St.shift()}var Kt=w.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var s=xt,A=Kt.transition;Kt.transition=null;try{xt=1,zt(e,t,n,r)}finally{xt=s,Kt.transition=A}}function Wt(e,t,n,r){var s=xt,A=Kt.transition;Kt.transition=null;try{xt=4,zt(e,t,n,r)}finally{xt=s,Kt.transition=A}}function zt(e,t,n,r){if(Vt){var s=Yt(e,t,n,r);if(null===s)Vr(e,t,r,qt,n),_t(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ft=Dt(Ft,e,t,n,r,s),!0;case"dragenter":return Qt=Dt(Qt,e,t,n,r,s),!0;case"mouseover":return It=Dt(It,e,t,n,r,s),!0;case"pointerover":var A=s.pointerId;return kt.set(A,Dt(kt.get(A)||null,e,t,n,r,s)),!0;case"gotpointercapture":return A=s.pointerId,jt.set(A,Dt(jt.get(A)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(_t(e,r),4&t&&-1<Tt.indexOf(e)){for(;null!==s;){var A=xs(s);if(null!==A&&vt(A),null===(A=Yt(e,t,n,r))&&Vr(e,t,r,qt,n),A===s)break;s=A}null!==s&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var qt=null;function Yt(e,t,n,r){if(qt=null,null!==(e=ys(e=ve(r))))if(null===(t=Me(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,A=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[A-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,A){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=A,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var An,an,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(ln),un=L({},ln,{view:0,detail:0}),dn=sn(un),hn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(An=e.screenX-on.screenX,an=e.screenY-on.screenY):an=An=0,on=e),An)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(hn),pn=sn(L({},hn,{dataTransfer:0})),mn=sn(L({},un,{relatedTarget:0})),gn=sn(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),wn=sn(L({},ln,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Bn[e])&&!!t[e]}function Nn(){return Cn}var En=L({},un,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Un=sn(En),Fn=sn(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Qn=sn(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),In=sn(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(kn),Sn=[9,13,27,32],Tn=c&&"CompositionEvent"in window,_n=null;c&&"documentMode"in document&&(_n=document.documentMode);var Dn=c&&"TextEvent"in window&&!_n,Ln=c&&(!Tn||_n&&8<_n&&11>=_n),Hn=String.fromCharCode(32),Rn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,zn=null;function qn(e){Hr(e,0)}function Yn(e){if(z(ws(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Zn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),zn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(zn)){var t=[];Gn(t,zn,e,ve(e)),ke(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),zn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(zn)}function Ar(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,A=Math.min(r.start,s);r=void 0===r.end?A:Math.min(r.end,s),!e.extend&&A>r&&(s=r,r=A,A=s),s=cr(n,A);var i=cr(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),A>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,xr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Wr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Br={},Cr={};function Nr(e){if(Br[e])return Br[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Br[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=Nr("animationend"),Ur=Nr("animationiteration"),Fr=Nr("animationstart"),Qr=Nr("transitionend"),Ir=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Ir.set(e,t),o(t,[e])}for(var Sr=0;Sr<kr.length;Sr++){var Tr=kr[Sr];jr(Tr.toLowerCase(),"on"+(Tr[0].toUpperCase()+Tr.slice(1)))}jr(Er,"onAnimationEnd"),jr(Ur,"onAnimationIteration"),jr(Fr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Qr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,a,o,l){if(Oe.apply(this,arguments),De){if(!De)throw Error(A(198));var c=Le;De=!1,Le=null,He||(He=!0,Re=c)}}(r,t,void 0,e),e.currentTarget=null}function Hr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var A=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],o=a.instance,l=a.currentTarget;if(a=a.listener,o!==A&&s.isPropagationStopped())break e;Lr(s,a,l),A=o}else for(i=0;i<r.length;i++){if(o=(a=r[i]).instance,l=a.currentTarget,a=a.listener,o!==A&&s.isPropagationStopped())break e;Lr(s,a,l),A=o}}}if(He)throw e=Re,He=!1,Re=null,e}function Rr(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(Kr(t,e,2,!1),n.add(r))}function Pr(e,t,n){var r=0;t&&(r|=4),Kr(n,e,r,t)}var Or="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){if(!e[Or]){e[Or]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Pr(t,!1,e),Pr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Or]||(t[Or]=!0,Pr("selectionchange",!1,t))}}function Kr(e,t,n,r){switch(Xt(t)){case 1:var s=Gt;break;case 4:s=Wt;break;default:s=zt}n=s.bind(null,t,n,e),s=void 0,!Se||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,s){var A=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;i=i.return}for(;null!==a;){if(null===(i=ys(a)))return;if(5===(o=i.tag)||6===o){r=A=i;continue e}a=a.parentNode}}r=r.return}ke(function(){var r=A,s=ve(n),i=[];e:{var a=Ir.get(e);if(void 0!==a){var o=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":o=Un;break;case"focusin":l="focus",o=mn;break;case"focusout":l="blur",o=mn;break;case"beforeblur":case"afterblur":o=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Qn;break;case Er:case Ur:case Fr:o=gn;break;case Qr:o=In;break;case"scroll":o=dn;break;case"wheel":o=jn;break;case"copy":case"cut":case"paste":o=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Fn}var c=0!==(4&t),u=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var h,f=r;null!==f;){var p=(h=f).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==d&&(null!=(p=je(f,d))&&c.push(Gr(f,p,h)))),u)break;f=f.return}0<c.length&&(a=new o(a,l,null,n,s),i.push({event:a,listeners:c}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!ys(l)&&!l[fs])&&(o||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,o?(o=r,null!==(l=(l=n.relatedTarget||n.toElement)?ys(l):null)&&(l!==(u=Me(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(o=null,l=r),o!==l)){if(c=fn,p="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Fn,p="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==o?a:ws(o),h=null==l?a:ws(l),(a=new c(p,f+"leave",o,n,s)).target=u,a.relatedTarget=h,p=null,ys(s)===r&&((c=new c(d,f+"enter",l,n,s)).target=h,c.relatedTarget=u,p=c),u=p,o&&l)e:{for(d=l,f=0,h=c=o;h;h=zr(h))f++;for(h=0,p=d;p;p=zr(p))h++;for(;0<f-h;)c=zr(c),f--;for(;0<h-f;)d=zr(d),h--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=zr(c),d=zr(d)}c=null}else c=null;null!==o&&qr(i,a,o,c,!1),null!==l&&null!==u&&qr(i,u,l,c,!0)}if("select"===(o=(a=r?ws(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===o&&"file"===a.type)var m=Xn;else if(Vn(a))if(Jn)m=ir;else{m=sr;var g=rr}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=Ar);switch(m&&(m=m(e,r))?Gn(i,m,n,s):(g&&g(e,a,r),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&ee(a,"number",a.value)),g=r?ws(r):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,wr(i,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":wr(i,n,s)}var y;if(Tn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Mn?Pn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Mn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Mn&&(y=en()):(Zt="value"in(Jt=s)?Jt.value:Jt.textContent,Mn=!0)),0<(g=Wr(r,x)).length&&(x=new wn(x,e,null,n,s),i.push({event:x,listeners:g}),y?x.data=y:null!==(y=On(n))&&(x.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(Rn=!0,Hn);case"textInput":return(e=t.data)===Hn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(Mn)return"compositionend"===e||!Tn&&Pn(e,t)?(e=en(),$t=Zt=Jt=null,Mn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=y))}Hr(i,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,A=s.stateNode;5===s.tag&&null!==A&&(s=A,null!=(A=je(e,n))&&r.unshift(Gr(e,A,s)),null!=(A=je(e,t))&&r.push(Gr(e,A,s))),e=e.return}return r}function zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,s){for(var A=t._reactName,i=[];null!==n&&n!==r;){var a=n,o=a.alternate,l=a.stateNode;if(null!==o&&o===r)break;5===a.tag&&null!==l&&(a=l,s?null!=(o=je(n,A))&&i.unshift(Gr(n,o,a)):s||null!=(o=je(n,A))&&i.push(Gr(n,o,a))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(A(425))}function $r(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,As="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof As?function(e){return As.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout(function(){throw e})}function os(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Mt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Mt(t)}function ls(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),ds="__reactFiber$"+us,hs="__reactProps$"+us,fs="__reactContainer$"+us,ps="__reactEvents$"+us,ms="__reactListeners$"+us,gs="__reactHandles$"+us;function ys(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cs(e);null!==e;){if(n=e[ds])return n;e=cs(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[ds]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(A(33))}function vs(e){return e[hs]||null}var bs=[],Bs=-1;function Cs(e){return{current:e}}function Ns(e){0>Bs||(e.current=bs[Bs],bs[Bs]=null,Bs--)}function Es(e,t){Bs++,bs[Bs]=e.current,e.current=t}var Us={},Fs=Cs(Us),Qs=Cs(!1),Is=Us;function ks(e,t){var n=e.type.contextTypes;if(!n)return Us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,A={};for(s in n)A[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=A),A}function js(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ss(){Ns(Qs),Ns(Fs)}function Ts(e,t,n){if(Fs.current!==Us)throw Error(A(168));Es(Fs,t),Es(Qs,n)}function _s(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(A(108,K(e)||"Unknown",s));return L({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,Is=Fs.current,Es(Fs,e),Es(Qs,Qs.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=_s(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Ns(Qs),Ns(Fs),Es(Fs,e)):Ns(Qs),Es(Qs,n)}var Hs=null,Rs=!1,Ps=!1;function Os(e){null===Hs?Hs=[e]:Hs.push(e)}function Ms(){if(!Ps&&null!==Hs){Ps=!0;var e=0,t=xt;try{var n=Hs;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Hs=null,Rs=!1}catch(s){throw null!==Hs&&(Hs=Hs.slice(e+1)),ze($e,Ms),s}finally{xt=t,Ps=!1}}return null}var Ks=[],Vs=0,Gs=null,Ws=0,zs=[],qs=0,Ys=null,Xs=1,Js="";function Zs(e,t){Ks[Vs++]=Ws,Ks[Vs++]=Gs,Gs=e,Ws=t}function $s(e,t,n){zs[qs++]=Xs,zs[qs++]=Js,zs[qs++]=Ys,Ys=e;var r=Xs;e=Js;var s=32-it(r)-1;r&=~(1<<s),n+=1;var A=32-it(t)+s;if(30<A){var i=s-s%5;A=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Xs=1<<32-it(t)+s|n<<s|r,Js=A+e}else Xs=1<<A|n<<s|r,Js=e}function eA(e){null!==e.return&&(Zs(e,1),$s(e,1,0))}function tA(e){for(;e===Gs;)Gs=Ks[--Vs],Ks[Vs]=null,Ws=Ks[--Vs],Ks[Vs]=null;for(;e===Ys;)Ys=zs[--qs],zs[qs]=null,Js=zs[--qs],zs[qs]=null,Xs=zs[--qs],zs[qs]=null}var nA=null,rA=null,sA=!1,AA=null;function iA(e,t){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function aA(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nA=e,rA=ls(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nA=e,rA=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nA=e,rA=null,!0);default:return!1}}function oA(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lA(e){if(sA){var t=rA;if(t){var n=t;if(!aA(e,t)){if(oA(e))throw Error(A(418));t=ls(n.nextSibling);var r=nA;t&&aA(e,t)?iA(r,n):(e.flags=-4097&e.flags|2,sA=!1,nA=e)}}else{if(oA(e))throw Error(A(418));e.flags=-4097&e.flags|2,sA=!1,nA=e}}}function cA(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nA=e}function uA(e){if(e!==nA)return!1;if(!sA)return cA(e),sA=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=rA)){if(oA(e))throw dA(),Error(A(418));for(;t;)iA(e,t),t=ls(t.nextSibling)}if(cA(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rA=ls(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rA=null}}else rA=nA?ls(e.stateNode.nextSibling):null;return!0}function dA(){for(var e=rA;e;)e=ls(e.nextSibling)}function hA(){rA=nA=null,sA=!1}function fA(e){null===AA?AA=[e]:AA.push(e)}var pA=w.ReactCurrentBatchConfig;function mA(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function gA(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yA(e){return(0,e._init)(e._payload)}function xA(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Sl(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Ll(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var A=n.type;return A===B?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===A||"object"===typeof A&&null!==A&&A.$$typeof===j&&yA(A)===t.type)?((r=s(t,n.props)).ref=mA(e,t,n),r.return=e,r):((r=Tl(n.type,n.key,n.props,null,e.mode,r)).ref=mA(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hl(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,A){return null===t||7!==t.tag?((t=_l(n,e.mode,r,A)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=Tl(t.type,t.key,t.props,null,e.mode,n)).ref=mA(e,null,t),n.return=e,n;case b:return(t=Hl(t,e.mode,n)).return=e,t;case j:return d(e,(0,t._init)(t._payload),n)}if(te(t)||_(t))return(t=_l(t,e.mode,n,null)).return=e,t;gA(e,t)}return null}function h(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:o(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===s?l(e,t,n,r):null;case b:return n.key===s?c(e,t,n,r):null;case j:return h(e,t,(s=n._init)(n._payload),r)}if(te(n)||_(n))return null!==s?null:u(e,t,n,r,null);gA(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return o(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case v:return l(t,e=e.get(null===r.key?n:r.key)||null,r,s);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case j:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||_(r))return u(t,e=e.get(n)||null,r,s,null);gA(t,r)}return null}function p(s,A,a,o){for(var l=null,c=null,u=A,p=A=0,m=null;null!==u&&p<a.length;p++){u.index>p?(m=u,u=null):m=u.sibling;var g=h(s,u,a[p],o);if(null===g){null===u&&(u=m);break}e&&u&&null===g.alternate&&t(s,u),A=i(g,A,p),null===c?l=g:c.sibling=g,c=g,u=m}if(p===a.length)return n(s,u),sA&&Zs(s,p),l;if(null===u){for(;p<a.length;p++)null!==(u=d(s,a[p],o))&&(A=i(u,A,p),null===c?l=u:c.sibling=u,c=u);return sA&&Zs(s,p),l}for(u=r(s,u);p<a.length;p++)null!==(m=f(u,s,p,a[p],o))&&(e&&null!==m.alternate&&u.delete(null===m.key?p:m.key),A=i(m,A,p),null===c?l=m:c.sibling=m,c=m);return e&&u.forEach(function(e){return t(s,e)}),sA&&Zs(s,p),l}function m(s,a,o,l){var c=_(o);if("function"!==typeof c)throw Error(A(150));if(null==(o=c.call(o)))throw Error(A(151));for(var u=c=null,p=a,m=a=0,g=null,y=o.next();null!==p&&!y.done;m++,y=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var x=h(s,p,y.value,l);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(s,p),a=i(x,a,m),null===u?c=x:u.sibling=x,u=x,p=g}if(y.done)return n(s,p),sA&&Zs(s,m),c;if(null===p){for(;!y.done;m++,y=o.next())null!==(y=d(s,y.value,l))&&(a=i(y,a,m),null===u?c=y:u.sibling=y,u=y);return sA&&Zs(s,m),c}for(p=r(s,p);!y.done;m++,y=o.next())null!==(y=f(p,s,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=i(y,a,m),null===u?c=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(s,e)}),sA&&Zs(s,m),c}return function e(r,A,i,o){if("object"===typeof i&&null!==i&&i.type===B&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case v:e:{for(var l=i.key,c=A;null!==c;){if(c.key===l){if((l=i.type)===B){if(7===c.tag){n(r,c.sibling),(A=s(c,i.props.children)).return=r,r=A;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===j&&yA(l)===c.type){n(r,c.sibling),(A=s(c,i.props)).ref=mA(r,c,i),A.return=r,r=A;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===B?((A=_l(i.props.children,r.mode,o,i.key)).return=r,r=A):((o=Tl(i.type,i.key,i.props,null,r.mode,o)).ref=mA(r,A,i),o.return=r,r=o)}return a(r);case b:e:{for(c=i.key;null!==A;){if(A.key===c){if(4===A.tag&&A.stateNode.containerInfo===i.containerInfo&&A.stateNode.implementation===i.implementation){n(r,A.sibling),(A=s(A,i.children||[])).return=r,r=A;break e}n(r,A);break}t(r,A),A=A.sibling}(A=Hl(i,r.mode,o)).return=r,r=A}return a(r);case j:return e(r,A,(c=i._init)(i._payload),o)}if(te(i))return p(r,A,i,o);if(_(i))return m(r,A,i,o);gA(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==A&&6===A.tag?(n(r,A.sibling),(A=s(A,i)).return=r,r=A):(n(r,A),(A=Ll(i,r.mode,o)).return=r,r=A),a(r)):n(r,A)}}var wA=xA(!0),vA=xA(!1),bA=Cs(null),BA=null,CA=null,NA=null;function EA(){NA=CA=BA=null}function UA(e){var t=bA.current;Ns(bA),e._currentValue=t}function FA(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function QA(e,t){BA=e,NA=CA=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function IA(e){var t=e._currentValue;if(NA!==e)if(e={context:e,memoizedValue:t,next:null},null===CA){if(null===BA)throw Error(A(308));CA=e,BA.dependencies={lanes:0,firstContext:e}}else CA=CA.next=e;return t}var kA=null;function jA(e){null===kA?kA=[e]:kA.push(e)}function SA(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,jA(t)):(n.next=s.next,s.next=n),t.interleaved=n,TA(e,r)}function TA(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _A=!1;function DA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function HA(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function RA(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Fo)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,TA(e,n)}return null===(s=r.interleaved)?(t.next=t,jA(r)):(t.next=s.next,s.next=t),r.interleaved=t,TA(e,n)}function PA(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function OA(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,A=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===A?s=A=i:A=A.next=i,n=n.next}while(null!==n);null===A?s=A=t:A=A.next=t}else s=A=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function MA(e,t,n,r){var s=e.updateQueue;_A=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var o=a,l=o.next;o.next=null,null===i?A=l:i.next=l,i=o;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=o))}if(null!==A){var u=s.baseState;for(i=0,c=l=o=null,a=A;;){var d=a.lane,h=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,p=a;switch(d=t,h=n,p.tag){case 1:if("function"===typeof(f=p.payload)){u=f.call(h,u,d);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=p.payload)?f.call(h,u,d):f)||void 0===d)break e;u=L({},u,d);break e;case 2:_A=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=h,o=u):c=c.next=h,i|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===c&&(o=u),s.baseState=o,s.firstBaseUpdate=l,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===A&&(s.shared.lanes=0);Do|=i,e.lanes=i,e.memoizedState=u}}function KA(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(A(191,s));s.call(r)}}}var VA={},GA=Cs(VA),WA=Cs(VA),zA=Cs(VA);function qA(e){if(e===VA)throw Error(A(174));return e}function YA(e,t){switch(Es(zA,t),Es(WA,e),Es(GA,VA),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ns(GA),Es(GA,t)}function XA(){Ns(GA),Ns(WA),Ns(zA)}function JA(e){qA(zA.current);var t=qA(GA.current),n=oe(t,e.type);t!==n&&(Es(WA,e),Es(GA,n))}function ZA(e){WA.current===e&&(Ns(GA),Ns(WA))}var $A=Cs(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=w.ReactCurrentDispatcher,si=w.ReactCurrentBatchConfig,Ai=0,ii=null,ai=null,oi=null,li=!1,ci=!1,ui=0,di=0;function hi(){throw Error(A(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function pi(e,t,n,r,s,i){if(Ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:$i,e=n(r,s),ci){i=0;do{if(ci=!1,ui=0,25<=i)throw Error(A(301));i+=1,oi=ai=null,t.updateQueue=null,ri.current=ea,e=n(r,s)}while(ci)}if(ri.current=Ji,t=null!==ai&&null!==ai.next,Ai=0,oi=ai=ii=null,li=!1,t)throw Error(A(300));return e}function mi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function yi(){if(null===ai){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=ai.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,ai=e;else{if(null===e)throw Error(A(310));e={memoizedState:(ai=e).memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function xi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(A(311));n.lastRenderedReducer=e;var r=ai,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((Ai&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,ii.lanes|=u,Do|=u}c=c.next}while(null!==c&&c!==i);null===l?a=r:l.next=o,ar(r,t.memoizedState)||(ya=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Do|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vi(e){var t=yi(),n=t.queue;if(null===n)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{i=e(i,a.action),a=a.next}while(a!==s);ar(i,t.memoizedState)||(ya=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function bi(){}function Bi(e,t){var n=ii,r=yi(),s=t(),i=!ar(r.memoizedState,s);if(i&&(r.memoizedState=s,ya=!0),r=r.queue,_i(Ei.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(n.flags|=2048,Ii(9,Ni.bind(null,n,r,s,t),void 0,null),null===Qo)throw Error(A(349));0!==(30&Ai)||Ci(n,t,s)}return s}function Ci(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ni(e,t,n,r){t.value=n,t.getSnapshot=r,Ui(t)&&Fi(e)}function Ei(e,t,n){return n(function(){Ui(t)&&Fi(e)})}function Ui(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fi(e){var t=TA(e,1);null!==t&&nl(t,e,1,-1)}function Qi(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=zi.bind(null,ii,e),[t.memoizedState,e]}function Ii(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ki(){return yi().memoizedState}function ji(e,t,n,r){var s=gi();ii.flags|=e,s.memoizedState=Ii(1|t,n,void 0,void 0===r?null:r)}function Si(e,t,n,r){var s=yi();r=void 0===r?null:r;var A=void 0;if(null!==ai){var i=ai.memoizedState;if(A=i.destroy,null!==r&&fi(r,i.deps))return void(s.memoizedState=Ii(t,n,A,r))}ii.flags|=e,s.memoizedState=Ii(1|t,n,A,r)}function Ti(e,t){return ji(8390656,8,e,t)}function _i(e,t){return Si(2048,8,e,t)}function Di(e,t){return Si(4,2,e,t)}function Li(e,t){return Si(4,4,e,t)}function Hi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ri(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Si(4,4,Hi.bind(null,t,e),n)}function Pi(){}function Oi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ki(e,t,n){return 0===(21&Ai)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ar(n,t)||(n=pt(),ii.lanes|=n,Do|=n,e.baseState=!0),t)}function Vi(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{xt=n,si.transition=r}}function Gi(){return yi().memoizedState}function Wi(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qi(e))Yi(t,n);else if(null!==(n=SA(e,t,n,r))){nl(n,e,r,el()),Xi(n,t,r)}}function zi(e,t,n){var r=tl(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qi(e))Yi(t,s);else{var A=e.alternate;if(0===e.lanes&&(null===A||0===A.lanes)&&null!==(A=t.lastRenderedReducer))try{var i=t.lastRenderedState,a=A(i,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,i)){var o=t.interleaved;return null===o?(s.next=s,jA(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch(l){}null!==(n=SA(e,t,s,r))&&(nl(n,e,r,s=el()),Xi(n,t,r))}}function qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){ci=li=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ji={readContext:IA,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Zi={readContext:IA,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:IA,useEffect:Ti,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ji(4194308,4,Hi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ji(4194308,4,e,t)},useInsertionEffect:function(e,t){return ji(4,2,e,t)},useMemo:function(e,t){var n=gi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Qi,useDebugValue:Pi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Qi(!1),t=e[0];return e=Vi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,s=gi();if(sA){if(void 0===n)throw Error(A(407));n=n()}else{if(n=t(),null===Qo)throw Error(A(349));0!==(30&Ai)||Ci(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ti(Ei.bind(null,r,i,e),[e]),r.flags|=2048,Ii(9,Ni.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gi(),t=Qo.identifierPrefix;if(sA){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-it(Xs)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=di++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:IA,useCallback:Oi,useContext:IA,useEffect:_i,useImperativeHandle:Ri,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Mi,useReducer:wi,useRef:ki,useState:function(){return wi(xi)},useDebugValue:Pi,useDeferredValue:function(e){return Ki(yi(),ai.memoizedState,e)},useTransition:function(){return[wi(xi)[0],yi().memoizedState]},useMutableSource:bi,useSyncExternalStore:Bi,useId:Gi,unstable_isNewReconciler:!1},ea={readContext:IA,useCallback:Oi,useContext:IA,useEffect:_i,useImperativeHandle:Ri,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Mi,useReducer:vi,useRef:ki,useState:function(){return vi(xi)},useDebugValue:Pi,useDeferredValue:function(e){var t=yi();return null===ai?t.memoizedState=e:Ki(t,ai.memoizedState,e)},useTransition:function(){return[vi(xi)[0],yi().memoizedState]},useMutableSource:bi,useSyncExternalStore:Bi,useId:Gi,unstable_isNewReconciler:!1};function ta(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function na(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&Me(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),s=tl(e),A=HA(r,s);A.payload=t,void 0!==n&&null!==n&&(A.callback=n),null!==(t=RA(e,A,s))&&(nl(t,e,s,r),PA(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),s=tl(e),A=HA(r,s);A.tag=1,A.payload=t,void 0!==n&&null!==n&&(A.callback=n),null!==(t=RA(e,A,s))&&(nl(t,e,s,r),PA(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),s=HA(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=RA(e,s,r))&&(nl(t,e,r,n),PA(t,e,r))}};function sa(e,t,n,r,s,A,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,A,i):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(s,A))}function Aa(e,t,n){var r=!1,s=Us,A=t.contextType;return"object"===typeof A&&null!==A?A=IA(A):(s=js(t)?Is:Fs.current,A=(r=null!==(r=t.contextTypes)&&void 0!==r)?ks(e,s):Us),t=new t(n,A),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=A),t}function ia(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function aa(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},DA(e);var A=t.contextType;"object"===typeof A&&null!==A?s.context=IA(A):(A=js(t)?Is:Fs.current,s.context=ks(e,A)),s.state=e.memoizedState,"function"===typeof(A=t.getDerivedStateFromProps)&&(na(e,t,A,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ra.enqueueReplaceState(s,s.state,null),MA(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function oa(e,t){try{var n="",r=t;do{n+=O(r),r=r.return}while(r);var s=n}catch(A){s="\nError generating stack: "+A.message+"\n"+A.stack}return{value:e,source:t,stack:s,digest:null}}function la(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ca(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ua="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=HA(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vo||(Vo=!0,Go=r),ca(0,t)},n}function ha(e,t,n){(n=HA(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ca(0,t)}}var A=e.stateNode;return null!==A&&"function"===typeof A.componentDidCatch&&(n.callback=function(){ca(0,t),"function"!==typeof r&&(null===Wo?Wo=new Set([this]):Wo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ua;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Nl.bind(null,e,t,n),t.then(e,e))}function pa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ma(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=HA(-1,1)).tag=2,RA(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var ga=w.ReactCurrentOwner,ya=!1;function xa(e,t,n,r){t.child=null===e?vA(t,null,n,r):wA(t,e.child,n,r)}function wa(e,t,n,r,s){n=n.render;var A=t.ref;return QA(t,s),r=pi(e,t,n,r,A,s),n=mi(),null===e||ya?(sA&&n&&eA(t),t.flags|=1,xa(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ka(e,t,s))}function va(e,t,n,r,s){if(null===e){var A=n.type;return"function"!==typeof A||jl(A)||void 0!==A.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tl(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=A,ba(e,t,A,r,s))}if(A=e.child,0===(e.lanes&s)){var i=A.memoizedProps;if((n=null!==(n=n.compare)?n:or)(i,r)&&e.ref===t.ref)return Ka(e,t,s)}return t.flags|=1,(e=Sl(A,r)).ref=t.ref,e.return=t,t.child=e}function ba(e,t,n,r,s){if(null!==e){var A=e.memoizedProps;if(or(A,r)&&e.ref===t.ref){if(ya=!1,t.pendingProps=r=A,0===(e.lanes&s))return t.lanes=e.lanes,Ka(e,t,s);0!==(131072&e.flags)&&(ya=!0)}}return Na(e,t,n,r,s)}function Ba(e,t,n){var r=t.pendingProps,s=r.children,A=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(So,jo),jo|=n;else{if(0===(1073741824&n))return e=null!==A?A.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(So,jo),jo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==A?A.baseLanes:n,Es(So,jo),jo|=r}else null!==A?(r=A.baseLanes|n,t.memoizedState=null):r=n,Es(So,jo),jo|=r;return xa(e,t,s,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,s){var A=js(n)?Is:Fs.current;return A=ks(t,A),QA(t,s),n=pi(e,t,n,r,A,s),r=mi(),null===e||ya?(sA&&r&&eA(t),t.flags|=1,xa(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ka(e,t,s))}function Ea(e,t,n,r,s){if(js(n)){var A=!0;Ds(t)}else A=!1;if(QA(t,s),null===t.stateNode)Ma(e,t),Aa(t,n,r),aa(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,a=t.memoizedProps;i.props=a;var o=i.context,l=n.contextType;"object"===typeof l&&null!==l?l=IA(l):l=ks(t,l=js(n)?Is:Fs.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==r||o!==l)&&ia(t,i,r,l),_A=!1;var d=t.memoizedState;i.state=d,MA(t,r,i,s),o=t.memoizedState,a!==r||d!==o||Qs.current||_A?("function"===typeof c&&(na(t,n,c,r),o=t.memoizedState),(a=_A||sa(t,n,a,r,d,o,l))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),i.props=r,i.state=o,i.context=l,r=a):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,LA(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:ta(t.type,a),i.props=l,u=t.pendingProps,d=i.context,"object"===typeof(o=n.contextType)&&null!==o?o=IA(o):o=ks(t,o=js(n)?Is:Fs.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==u||d!==o)&&ia(t,i,r,o),_A=!1,d=t.memoizedState,i.state=d,MA(t,r,i,s);var f=t.memoizedState;a!==u||d!==f||Qs.current||_A?("function"===typeof h&&(na(t,n,h,r),f=t.memoizedState),(l=_A||sa(t,n,l,r,d,f,o)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=o,r=l):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ua(e,t,n,r,A,s)}function Ua(e,t,n,r,s,A){Ca(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Ls(t,n,!1),Ka(e,t,A);r=t.stateNode,ga.current=t;var a=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wA(t,e.child,null,A),t.child=wA(t,null,a,A)):xa(e,t,a,A),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function Fa(e){var t=e.stateNode;t.pendingContext?Ts(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ts(0,t.context,!1),YA(e,t.containerInfo)}function Qa(e,t,n,r,s){return hA(),fA(s),t.flags|=256,xa(e,t,n,r),t.child}var Ia,ka,ja,Sa,Ta={dehydrated:null,treeContext:null,retryLane:0};function _a(e){return{baseLanes:e,cachePool:null,transitions:null}}function Da(e,t,n){var r,s=t.pendingProps,i=$A.current,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Es($A,1&i),null===e)return lA(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Dl(o,s,0,null),e=_l(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=_a(n),t.memoizedState=Ta,e):La(t,o));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,a){if(n)return 256&t.flags?(t.flags&=-257,Ha(e,t,a,r=la(Error(A(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Dl({mode:"visible",children:r.children},s,0,null),(i=_l(i,s,a,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wA(t,e.child,null,a),t.child.memoizedState=_a(a),t.memoizedState=Ta,i);if(0===(1&t.mode))return Ha(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var o=r.dgst;return r=o,Ha(e,t,a,r=la(i=Error(A(419)),r,void 0))}if(o=0!==(a&e.childLanes),ya||o){if(null!==(r=Qo)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==i.retryLane&&(i.retryLane=s,TA(e,s),nl(r,e,s,-1))}return pl(),Ha(e,t,a,r=la(Error(A(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ul.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,rA=ls(s.nextSibling),nA=t,sA=!0,AA=null,null!==e&&(zs[qs++]=Xs,zs[qs++]=Js,zs[qs++]=Ys,Xs=e.id,Js=e.overflow,Ys=t),t=La(t,r.children),t.flags|=4096,t)}(e,t,o,s,r,i,n);if(a){a=s.fallback,o=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null):(s=Sl(i,l)).subtreeFlags=14680064&i.subtreeFlags,null!==r?a=Sl(r,a):(a=_l(a,o,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=null===(o=e.child.memoizedState)?_a(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Ta,s}return e=(a=e.child).sibling,s=Sl(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function La(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ha(e,t,n,r){return null!==r&&fA(r),wA(t,e.child,null,n),(e=La(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ra(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),FA(e.return,t,n)}function Pa(e,t,n,r,s){var A=e.memoizedState;null===A?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(A.isBackwards=t,A.rendering=null,A.renderingStartTime=0,A.last=r,A.tail=n,A.tailMode=s)}function Oa(e,t,n){var r=t.pendingProps,s=r.revealOrder,A=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=$A.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ra(e,n,t);else if(19===e.tag)Ra(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Es($A,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Pa(t,!1,s,n,A);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Pa(t,!0,n,null,A);break;case"together":Pa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ma(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Do|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(A(153));if(null!==t.child){for(n=Sl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Va(e,t){if(!sA)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(tA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return js(t.type)&&Ss(),Ga(t),null;case 3:return r=t.stateNode,XA(),Ns(Qs),Ns(Fs),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(uA(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==AA&&(il(AA),AA=null))),ka(e,t),Ga(t),null;case 5:ZA(t);var s=qA(zA.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(A(166));return Ga(t),null}if(e=qA(GA.current),uA(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ds]=t,r[hs]=i,e=0!==(1&t.mode),n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(s=0;s<_r.length;s++)Rr(_r[s],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":X(r,i),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Rr("invalid",r);break;case"textarea":se(r,i),Rr("invalid",r)}for(var o in ye(n,i),s=null,i)if(i.hasOwnProperty(o)){var l=i[o];"children"===o?"string"===typeof l?r.textContent!==l&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,l,e),s=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,l,e),s=["children",""+l]):a.hasOwnProperty(o)&&null!=l&&"onScroll"===o&&Rr("scroll",r)}switch(n){case"input":W(r),$(r,i,!0);break;case"textarea":W(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ds]=t,e[hs]=r,Ia(e,t,!1,!1),t.stateNode=e;e:{switch(o=xe(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),s=r;break;case"iframe":case"object":case"embed":Rr("load",e),s=r;break;case"video":case"audio":for(s=0;s<_r.length;s++)Rr(_r[s],e);s=r;break;case"source":Rr("error",e),s=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),s=r;break;case"details":Rr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),Rr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=L({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Rr("invalid",e)}for(i in ye(n,s),l=s)if(l.hasOwnProperty(i)){var c=l[i];"style"===i?me(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&ue(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(a.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Rr("scroll",e):null!=c&&x(e,i,c,o))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Sa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(A(166));if(n=qA(zA.current),qA(GA.current),uA(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(i=r.nodeValue!==n)&&null!==(e=nA))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ns($A),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sA&&null!==rA&&0!==(1&t.mode)&&0===(128&t.flags))dA(),hA(),t.flags|=98560,i=!1;else if(i=uA(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(A(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(A(317));i[ds]=t}else hA(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),i=!1}else null!==AA&&(il(AA),AA=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$A.current)?0===To&&(To=3):pl())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return XA(),ka(e,t),null===e&&Mr(t.stateNode.containerInfo),Ga(t),null;case 10:return UA(t.type._context),Ga(t),null;case 19:if(Ns($A),null===(i=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)Va(i,!1);else{if(0!==To||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Va(i,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es($A,1&$A.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Mo&&(t.flags|=128,r=!0,Va(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Va(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!sA)return Ga(t),null}else 2*Je()-i.renderingStartTime>Mo&&1073741824!==n&&(t.flags|=128,r=!0,Va(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=i.last)?n.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=$A.current,Es($A,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return ul(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jo)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(A(156,t.tag))}function za(e,t){switch(tA(t),t.tag){case 1:return js(t.type)&&Ss(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return XA(),Ns(Qs),Ns(Fs),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ZA(t),null;case 13:if(Ns($A),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(A(340));hA()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ns($A),null;case 4:return XA(),null;case 10:return UA(t.type._context),null;case 22:case 23:return ul(),null;default:return null}}Ia=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ka=function(){},ja=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qA(GA.current);var A,i=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),i=[];break;case"select":s=L({},s,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(A in o)o.hasOwnProperty(A)&&(n||(n={}),n[A]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(A in o)!o.hasOwnProperty(A)||l&&l.hasOwnProperty(A)||(n||(n={}),n[A]="");for(A in l)l.hasOwnProperty(A)&&o[A]!==l[A]&&(n||(n={}),n[A]=l[A])}else n||(i||(i=[]),i.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Rr("scroll",e),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Sa=function(e,t,n,r){n!==r&&(t.flags|=4)};var qa=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cl(e,t,r)}else n.current=null}function $a(e,t,n){try{n()}catch(r){Cl(e,t,r)}}var eo=!1;function to(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var A=s.destroy;s.destroy=void 0,void 0!==A&&$a(t,n,A)}s=s.next}while(s!==r)}}function no(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ro(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function so(e){var t=e.alternate;null!==t&&(e.alternate=null,so(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[hs],delete t[ps],delete t[ms],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ao(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ao(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ao(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ao(e,t,n),e=e.sibling;null!==e;)ao(e,t,n),e=e.sibling}function oo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(oo(e,t,n),e=e.sibling;null!==e;)oo(e,t,n),e=e.sibling}var lo=null,co=!1;function uo(e,t,n){for(n=n.child;null!==n;)ho(e,t,n),n=n.sibling}function ho(e,t,n){if(At&&"function"===typeof At.onCommitFiberUnmount)try{At.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=lo,s=co;lo=null,uo(e,t,n),co=s,null!==(lo=r)&&(co?(e=lo,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lo.removeChild(n.stateNode));break;case 18:null!==lo&&(co?(e=lo,n=n.stateNode,8===e.nodeType?os(e.parentNode,n):1===e.nodeType&&os(e,n),Mt(e)):os(lo,n.stateNode));break;case 4:r=lo,s=co,lo=n.stateNode.containerInfo,co=!0,uo(e,t,n),lo=r,co=s;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var A=s,i=A.destroy;A=A.tag,void 0!==i&&(0!==(2&A)||0!==(4&A))&&$a(n,t,i),s=s.next}while(s!==r)}uo(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cl(n,t,a)}uo(e,t,n);break;case 21:uo(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,uo(e,t,n),Ya=r):uo(e,t,n);break;default:uo(e,t,n)}}function fo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function po(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:lo=o.stateNode,co=!1;break e;case 3:case 4:lo=o.stateNode.containerInfo,co=!0;break e}o=o.return}if(null===lo)throw Error(A(160));ho(i,a,s),lo=null,co=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(c){Cl(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mo(t,e),t=t.sibling}function mo(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(po(t,e),go(e),4&r){try{to(3,e,e.return),no(3,e)}catch(m){Cl(e,e.return,m)}try{to(5,e,e.return)}catch(m){Cl(e,e.return,m)}}break;case 1:po(t,e),go(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(po(t,e),go(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(m){Cl(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,a=null!==n?n.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===i.type&&null!=i.name&&J(s,i),xe(o,a);var c=xe(o,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?me(s,d):"dangerouslySetInnerHTML"===u?ue(s,d):"children"===u?de(s,d):x(s,u,d,c)}switch(o){case"input":Z(s,i);break;case"textarea":Ae(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(s,!!i.multiple,f,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[hs]=i}catch(m){Cl(e,e.return,m)}}break;case 6:if(po(t,e),go(e),4&r){if(null===e.stateNode)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(m){Cl(e,e.return,m)}}break;case 3:if(po(t,e),go(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Mt(t.containerInfo)}catch(m){Cl(e,e.return,m)}break;case 4:default:po(t,e),go(e);break;case 13:po(t,e),go(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Oo=Je())),4&r&&fo(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||u,po(t,e),Ya=c):po(t,e),go(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Ja=e,u=e.child;null!==u;){for(d=Ja=u;null!==Ja;){switch(f=(h=Ja).child,h.tag){case 0:case 11:case 14:case 15:to(4,h,h.return);break;case 1:Za(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Cl(r,n,m)}}break;case 5:Za(h,h.return);break;case 22:if(null!==h.memoizedState){vo(d);continue}}null!==f?(f.return=h,Ja=f):vo(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{s=d.stateNode,c?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,o.style.display=pe("display",a))}catch(m){Cl(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Cl(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:po(t,e),go(e),4&r&&fo(e);case 21:}}function go(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Ao(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),oo(e,io(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;ao(e,io(e),i);break;default:throw Error(A(161))}}catch(a){Cl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yo(e,t,n){Ja=e,xo(e,t,n)}function xo(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var s=Ja,A=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||qa;if(!i){var a=s.alternate,o=null!==a&&null!==a.memoizedState||Ya;a=qa;var l=Ya;if(qa=i,(Ya=o)&&!l)for(Ja=s;null!==Ja;)o=(i=Ja).child,22===i.tag&&null!==i.memoizedState?bo(s):null!==o?(o.return=i,Ja=o):bo(s);for(;null!==A;)Ja=A,xo(A,t,n),A=A.sibling;Ja=s,qa=a,Ya=l}wo(e)}else 0!==(8772&s.subtreeFlags)&&null!==A?(A.return=s,Ja=A):wo(e)}}function wo(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||no(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ta(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&KA(t,i,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}KA(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Mt(d)}}}break;default:throw Error(A(163))}Ya||512&t.flags&&ro(t)}catch(h){Cl(t,t.return,h)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function vo(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function bo(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{no(4,t)}catch(o){Cl(t,n,o)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(o){Cl(t,s,o)}}var A=t.return;try{ro(t)}catch(o){Cl(t,A,o)}break;case 5:var i=t.return;try{ro(t)}catch(o){Cl(t,i,o)}}}catch(o){Cl(t,t.return,o)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Bo,Co=Math.ceil,No=w.ReactCurrentDispatcher,Eo=w.ReactCurrentOwner,Uo=w.ReactCurrentBatchConfig,Fo=0,Qo=null,Io=null,ko=0,jo=0,So=Cs(0),To=0,_o=null,Do=0,Lo=0,Ho=0,Ro=null,Po=null,Oo=0,Mo=1/0,Ko=null,Vo=!1,Go=null,Wo=null,zo=!1,qo=null,Yo=0,Xo=0,Jo=null,Zo=-1,$o=0;function el(){return 0!==(6&Fo)?Je():-1!==Zo?Zo:Zo=Je()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Fo)&&0!==ko?ko&-ko:null!==pA.transition?(0===$o&&($o=pt()),$o):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nl(e,t,n,r){if(50<Xo)throw Xo=0,Jo=null,Error(A(185));gt(e,n,r),0!==(2&Fo)&&e===Qo||(e===Qo&&(0===(2&Fo)&&(Lo|=n),4===To&&al(e,ko)),rl(e,r),1===n&&0===Fo&&0===(1&t.mode)&&(Mo=Je()+500,Rs&&Ms()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,A=e.pendingLanes;0<A;){var i=31-it(A),a=1<<i,o=s[i];-1===o?0!==(a&n)&&0===(a&r)||(s[i]=ht(a,t)):o<=t&&(e.expiredLanes|=a),A&=~a}}(e,t);var r=dt(e,e===Qo?ko:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Rs=!0,Os(e)}(ol.bind(null,e)):Os(ol.bind(null,e)),is(function(){0===(6&Fo)&&Ms()}),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ql(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zo=-1,$o=0,0!==(6&Fo))throw Error(A(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=dt(e,e===Qo?ko:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var s=Fo;Fo|=2;var i=fl();for(Qo===e&&ko===t||(Ko=null,Mo=Je()+500,dl(e,t));;)try{yl();break}catch(o){hl(e,o)}EA(),No.current=i,Fo=s,null!==Io?t=0:(Qo=null,ko=0,t=To)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=Al(e,s))),1===t)throw n=_o,dl(e,0),al(e,r),rl(e,Je()),n;if(6===t)al(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],A=s.getSnapshot;s=s.value;try{if(!ar(A(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=ml(e,r))&&(0!==(i=ft(e))&&(r=i,t=Al(e,i))),1===t))throw n=_o,dl(e,0),al(e,r),rl(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:case 5:vl(e,Po,Ko);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=Oo+500-Je())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(vl.bind(null,e,Po,Ko),t);break}vl(e,Po,Ko);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-it(r);i=1<<a,(a=t[a])>s&&(s=a),r&=~i}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Co(r/1960))-r)){e.timeoutHandle=rs(vl.bind(null,e,Po,Ko),r);break}vl(e,Po,Ko);break;default:throw Error(A(329))}}}return rl(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function Al(e,t){var n=Ro;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Po,Po=n,null!==t&&il(t)),e}function il(e){null===Po?Po=e:Po.push.apply(Po,e)}function al(e,t){for(t&=~Ho,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function ol(e){if(0!==(6&Fo))throw Error(A(327));bl();var t=dt(e,0);if(0===(1&t))return rl(e,Je()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=Al(e,r))}if(1===n)throw n=_o,dl(e,0),al(e,t),rl(e,Je()),n;if(6===n)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vl(e,Po,Ko),rl(e,Je()),null}function ll(e,t){var n=Fo;Fo|=1;try{return e(t)}finally{0===(Fo=n)&&(Mo=Je()+500,Rs&&Ms())}}function cl(e){null!==qo&&0===qo.tag&&0===(6&Fo)&&bl();var t=Fo;Fo|=1;var n=Uo.transition,r=xt;try{if(Uo.transition=null,xt=1,e)return e()}finally{xt=r,Uo.transition=n,0===(6&(Fo=t))&&Ms()}}function ul(){jo=So.current,Ns(So)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Io)for(n=Io.return;null!==n;){var r=n;switch(tA(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ss();break;case 3:XA(),Ns(Qs),Ns(Fs),ni();break;case 5:ZA(r);break;case 4:XA();break;case 13:case 19:Ns($A);break;case 10:UA(r.type._context);break;case 22:case 23:ul()}n=n.return}if(Qo=e,Io=e=Sl(e.current,null),ko=jo=t,To=0,_o=null,Ho=Lo=Do=0,Po=Ro=null,null!==kA){for(t=0;t<kA.length;t++)if(null!==(r=(n=kA[t]).interleaved)){n.interleaved=null;var s=r.next,A=n.pending;if(null!==A){var i=A.next;A.next=s,r.next=i}n.pending=r}kA=null}return e}function hl(e,t){for(;;){var n=Io;try{if(EA(),ri.current=Ji,li){for(var r=ii.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}li=!1}if(Ai=0,oi=ai=ii=null,ci=!1,ui=0,Eo.current=null,null===n||null===n.return){To=1,_o=t,Io=null;break}e:{var i=e,a=n.return,o=n,l=t;if(t=ko,o.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,u=o,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=pa(a);if(null!==f){f.flags&=-257,ma(f,a,o,0,t),1&f.mode&&fa(i,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(0===(1&t)){fa(i,c,t),pl();break e}l=Error(A(426))}else if(sA&&1&o.mode){var g=pa(a);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ma(g,a,o,0,t),fA(oa(l,o));break e}}i=l=oa(l,o),4!==To&&(To=2),null===Ro?Ro=[i]:Ro.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,OA(i,da(0,l,t));break e;case 1:o=l;var y=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Wo||!Wo.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,OA(i,ha(i,o,t));break e}}i=i.return}while(null!==i)}wl(n)}catch(w){t=w,Io===n&&null!==n&&(Io=n=n.return);continue}break}}function fl(){var e=No.current;return No.current=Ji,null===e?Ji:e}function pl(){0!==To&&3!==To&&2!==To||(To=4),null===Qo||0===(268435455&Do)&&0===(268435455&Lo)||al(Qo,ko)}function ml(e,t){var n=Fo;Fo|=2;var r=fl();for(Qo===e&&ko===t||(Ko=null,dl(e,t));;)try{gl();break}catch(s){hl(e,s)}if(EA(),Fo=n,No.current=r,null!==Io)throw Error(A(261));return Qo=null,ko=0,To}function gl(){for(;null!==Io;)xl(Io)}function yl(){for(;null!==Io&&!Ye();)xl(Io)}function xl(e){var t=Bo(e.alternate,e,jo);e.memoizedProps=e.pendingProps,null===t?wl(e):Io=t,Eo.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,jo)))return void(Io=n)}else{if(null!==(n=za(n,t)))return n.flags&=32767,void(Io=n);if(null===e)return To=6,void(Io=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Io=t);Io=t=e}while(null!==t);0===To&&(To=5)}function vl(e,t,n){var r=xt,s=Uo.transition;try{Uo.transition=null,xt=1,function(e,t,n,r){do{bl()}while(null!==qo);if(0!==(6&Fo))throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),A=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~A}}(e,i),e===Qo&&(Io=Qo=null,ko=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||zo||(zo=!0,Ql(tt,function(){return bl(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Uo.transition,Uo.transition=null;var a=xt;xt=1;var o=Fo;Fo|=4,Eo.current=null,function(e,t){if(es=Vt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(v){n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(o=a+s),d!==i||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===s&&(o=a),h===i&&++u===r&&(l=a),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Vt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ta(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(A(163))}}catch(v){Cl(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}p=eo,eo=!1}(e,n),mo(n,e),fr(ts),Vt=!!es,ts=es=null,e.current=n,yo(n,e,s),Xe(),Fo=o,xt=a,Uo.transition=i}else e.current=n;if(zo&&(zo=!1,qo=e,Yo=s),i=e.pendingLanes,0===i&&(Wo=null),function(e){if(At&&"function"===typeof At.onCommitFiberRoot)try{At.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vo)throw Vo=!1,e=Go,Go=null,e;0!==(1&Yo)&&0!==e.tag&&bl(),i=e.pendingLanes,0!==(1&i)?e===Jo?Xo++:(Xo=0,Jo=e):Xo=0,Ms()}(e,t,n,r)}finally{Uo.transition=s,xt=r}return null}function bl(){if(null!==qo){var e=wt(Yo),t=Uo.transition,n=xt;try{if(Uo.transition=null,xt=16>e?16:e,null===qo)var r=!1;else{if(e=qo,qo=null,Yo=0,0!==(6&Fo))throw Error(A(331));var s=Fo;for(Fo|=4,Ja=e.current;null!==Ja;){var i=Ja,a=i.child;if(0!==(16&Ja.flags)){var o=i.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Ja=c;null!==Ja;){var u=Ja;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var d=u.child;if(null!==d)d.return=u,Ja=d;else for(;null!==Ja;){var h=(u=Ja).sibling,f=u.return;if(so(u),u===c){Ja=null;break}if(null!==h){h.return=f,Ja=h;break}Ja=f}}}var p=i.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ja=i}}if(0!==(2064&i.subtreeFlags)&&null!==a)a.return=i,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(i=Ja).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Ja=y;break e}Ja=i.return}}var x=e.current;for(Ja=x;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=x;null!==Ja;){if(0!==(2048&(o=Ja).flags))try{switch(o.tag){case 0:case 11:case 15:no(9,o)}}catch(b){Cl(o,o.return,b)}if(o===a){Ja=null;break e}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break e}Ja=o.return}}if(Fo=s,Ms(),At&&"function"===typeof At.onPostCommitFiberRoot)try{At.onPostCommitFiberRoot(st,e)}catch(b){}r=!0}return r}finally{xt=n,Uo.transition=t}}return!1}function Bl(e,t,n){e=RA(e,t=da(0,t=oa(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function Cl(e,t,n){if(3===e.tag)Bl(e,e,n);else for(;null!==t;){if(3===t.tag){Bl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wo||!Wo.has(r))){t=RA(t,e=ha(t,e=oa(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Nl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Qo===e&&(ko&n)===n&&(4===To||3===To&&(130023424&ko)===ko&&500>Je()-Oo?dl(e,0):Ho|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=TA(e,t))&&(gt(e,t,n),rl(e,n))}function Ul(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Fl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}null!==r&&r.delete(t),El(e,n)}function Ql(e,t){return ze(e,t)}function Il(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(e,t,n,r){return new Il(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sl(e,t){var n=e.alternate;return null===n?((n=kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tl(e,t,n,r,s,i){var a=2;if(r=e,"function"===typeof e)jl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case B:return _l(n.children,s,i,t);case C:a=8,s|=8;break;case N:return(e=kl(12,n,t,2|s)).elementType=N,e.lanes=i,e;case Q:return(e=kl(13,n,t,s)).elementType=Q,e.lanes=i,e;case I:return(e=kl(19,n,t,s)).elementType=I,e.lanes=i,e;case S:return Dl(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case U:a=9;break e;case F:a=11;break e;case k:a=14;break e;case j:a=16,r=null;break e}throw Error(A(130,null==e?e:typeof e,""))}return(t=kl(a,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function _l(e,t,n,r){return(e=kl(7,e,r,t)).lanes=n,e}function Dl(e,t,n,r){return(e=kl(22,e,r,t)).elementType=S,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return(e=kl(6,e,null,t)).lanes=n,e}function Hl(e,t,n){return(t=kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rl(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pl(e,t,n,r,s,A,i,a,o){return e=new Rl(e,t,n,a,o),1===t?(t=1,!0===A&&(t|=8)):t=0,A=kl(3,null,null,t),e.current=A,A.stateNode=e,A.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},DA(A),e}function Ol(e){if(!e)return Us;e:{if(Me(e=e._reactInternals)!==e||1!==e.tag)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(A(171))}if(1===e.tag){var n=e.type;if(js(n))return _s(e,n,t)}return t}function Ml(e,t,n,r,s,A,i,a,o){return(e=Pl(n,r,!0,e,0,A,0,a,o)).context=Ol(null),n=e.current,(A=HA(r=el(),s=tl(n))).callback=void 0!==t&&null!==t?t:null,RA(n,A,s),e.current.lanes=s,gt(e,s,r),rl(e,r),e}function Kl(e,t,n,r){var s=t.current,A=el(),i=tl(s);return n=Ol(n),null===t.context?t.context=n:t.pendingContext=n,(t=HA(A,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=RA(s,t,i))&&(nl(e,s,i,A),PA(e,s,i)),i}function Vl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Bo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Qs.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:Fa(t),hA();break;case 5:JA(t);break;case 1:js(t.type)&&Ds(t);break;case 4:YA(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Es(bA,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Es($A,1&$A.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Da(e,t,n):(Es($A,1&$A.current),null!==(e=Ka(e,t,n))?e.sibling:null);Es($A,1&$A.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Oa(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es($A,$A.current),r)break;return null;case 22:case 23:return t.lanes=0,Ba(e,t,n)}return Ka(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,sA&&0!==(1048576&t.flags)&&$s(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ma(e,t),e=t.pendingProps;var s=ks(t,Fs.current);QA(t,n),s=pi(null,t,r,e,s,n);var i=mi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,js(r)?(i=!0,Ds(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,DA(t),s.updater=ra,t.stateNode=s,s._reactInternals=t,aa(t,r,e,n),t=Ua(null,t,r,!0,i,n)):(t.tag=0,sA&&i&&eA(t),xa(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ma(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return jl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===F)return 11;if(e===k)return 14}return 2}(r),e=ta(r,e),s){case 0:t=Na(null,t,r,e,n);break e;case 1:t=Ea(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=va(null,t,r,ta(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Na(e,t,r,s=t.elementType===r?s:ta(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ea(e,t,r,s=t.elementType===r?s:ta(r,s),n);case 3:e:{if(Fa(t),null===e)throw Error(A(387));r=t.pendingProps,s=(i=t.memoizedState).element,LA(e,t),MA(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qa(e,t,r,n,s=oa(Error(A(423)),t));break e}if(r!==s){t=Qa(e,t,r,n,s=oa(Error(A(424)),t));break e}for(rA=ls(t.stateNode.containerInfo.firstChild),nA=t,sA=!0,AA=null,n=vA(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hA(),r===s){t=Ka(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return JA(t),null===e&&lA(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==i&&ns(r,i)&&(t.flags|=32),Ca(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&lA(t),null;case 13:return Da(e,t,n);case 4:return YA(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wA(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wa(e,t,r,s=t.elementType===r?s:ta(r,s),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Es(bA,r._currentValue),r._currentValue=a,null!==i)if(ar(i.value,a)){if(i.children===s.children&&!Qs.current){t=Ka(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){a=i.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=HA(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),FA(i.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===i.tag)a=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(a=i.return))throw Error(A(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),FA(a,n,t),a=i.sibling}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===t){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}xa(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,QA(t,n),r=r(s=IA(s)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return s=ta(r=t.type,t.pendingProps),va(e,t,r,s=ta(r.type,s),n);case 15:return ba(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ta(r,s),Ma(e,t),t.tag=1,js(r)?(e=!0,Ds(t)):e=!1,QA(t,n),Aa(t,r,s),aa(t,r,s,n),Ua(null,t,r,!0,e,n);case 19:return Oa(e,t,n);case 22:return Ba(e,t,n)}throw Error(A(156,t.tag))};var zl="function"===typeof reportError?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function $l(e,t,n,r,s){var A=n._reactRootContainer;if(A){var i=A;if("function"===typeof s){var a=s;s=function(){var e=Vl(i);a.call(e)}}Kl(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var A=r;r=function(){var e=Vl(i);A.call(e)}}var i=Ml(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=i,e[fs]=i.current,Mr(8===e.nodeType?e.parentNode:e),cl(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=Vl(o);a.call(e)}}var o=Pl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=o,e[fs]=o.current,Mr(8===e.nodeType?e.parentNode:e),cl(function(){Kl(t,o,n,r)}),o}(n,t,e,s,r);return Vl(i)}Yl.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(A(409));Kl(e,t,null,null)},Yl.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl(function(){Kl(null,e,null,null)}),t[fs]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<St.length&&0!==t&&t<St[n].priority;n++);St.splice(n,0,e),0===n&&Lt(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Je()),0===(6&Fo)&&(Mo=Je()+500,Ms()))}break;case 13:cl(function(){var t=TA(e,1);if(null!==t){var n=el();nl(t,e,1,n)}}),Wl(e,1)}},bt=function(e){if(13===e.tag){var t=TA(e,134217728);if(null!==t)nl(t,e,134217728,el());Wl(e,134217728)}},Bt=function(e){if(13===e.tag){var t=tl(e),n=TA(e,t);if(null!==n)nl(n,e,t,el());Wl(e,t)}},Ct=function(){return xt},Nt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},be=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vs(r);if(!s)throw Error(A(90));z(r),Z(r,s)}}}break;case"textarea":Ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Fe=ll,Qe=cl;var ec={usingClientEntryPoint:!1,Events:[xs,ws,vs,Ee,Ue,ll]},tc={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{st=rc.inject(nc),At=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(A(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(A(299));var n=!1,r="",s=zl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Pl(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Mr(8===e.nodeType?e.parentNode:e),new ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(A(188));throw e=Object.keys(e).join(","),Error(A(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(A(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(A(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",a=zl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Ml(t,null,e,1,null!=n?n:null,s,0,i,a),e[fs]=t.current,Mr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(A(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(A(40));return!!e._reactRootContainer&&(cl(function(){$l(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(A(200));if(null==e||void 0===e._reactInternals)throw Error(A(38));return $l(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var A=t[r]={exports:{}};return e[r].call(A.exports,A,A.exports,n),A.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var A=Object.create(null);n.r(A);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(A,i),A}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),s=n(391);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const i="popstate";function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function o(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Pe){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,n,r){return void 0===n&&(n=null),A({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function h(t,n,r,s){void 0===s&&(s={});let{window:o=document.defaultView,v5Compat:d=!1}=s,h=o.history,f=e.Pop,p=null,m=g();function g(){return(h.state||{idx:null}).idx}function y(){f=e.Pop;let t=g(),n=null==t?null:t-m;m=t,p&&p({action:f,location:w.location,delta:n})}function x(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,h.replaceState(A({},h.state,{idx:m}),""));let w={get action(){return f},get location(){return t(o,h)},listen(e){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(i,y),p=e,()=>{o.removeEventListener(i,y),p=null}},createHref:e=>n(o,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let s=c(w.location,t,n);r&&r(s,t),m=g()+1;let A=l(s,m),i=w.createHref(s);try{h.pushState(A,"",i)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;o.location.assign(i)}d&&p&&p({action:f,location:w.location,delta:1})},replace:function(t,n){f=e.Replace;let s=c(w.location,t,n);r&&r(s,t),m=g();let A=l(s,m),i=w.createHref(s);h.replaceState(A,"",i),d&&p&&p({action:f,location:w.location,delta:0})},go:e=>h.go(e)};return w}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function p(e,t,n){return void 0===n&&(n="/"),m(e,t,n,!1)}function m(e,t,n,r){let s=I(("string"===typeof t?d(t):t).pathname||"/",n);if(null==s)return null;let A=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(A);let i=null;for(let a=0;null==i&&a<A.length;++a){let e=Q(s);i=U(A[a],e,r)}return i}function g(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,A)=>{let i={relativePath:void 0===A?e.path||"":A,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(a(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=H([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),g(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:E(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))s(e,t,r);else s(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),A=n.replace(/\?$/,"");if(0===r.length)return s?[A,""]:[A];let i=y(r.join("/")),a=[];return a.push(...i.map(e=>""===e?A:[A,e].join("/"))),s&&a.push(...i),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,w=3,v=2,b=1,B=10,C=-2,N=e=>"*"===e;function E(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=C),t&&(r+=v),n.filter(e=>!N(e)).reduce((e,t)=>e+(x.test(t)?w:""===t?b:B),r)}function U(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},A="/",i=[];for(let a=0;a<r.length;++a){let e=r[a],o=a===r.length-1,l="/"===A?t:t.slice(A.length)||"/",c=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l),u=e.route;if(!c&&o&&n&&!r[r.length-1].route.index&&(c=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!c)return null;Object.assign(s,c.params),i.push({params:s,pathname:H([A,c.pathname]),pathnameBase:R(H([A,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(A=H([A,c.pathnameBase]))}return i}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);o("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let A=new RegExp(s,t?void 0:"i");return[A,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";i=A.slice(0,A.length-e.length).replace(/(.)\/+$/,"$1")}const o=a[n];return e[r]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:A,pathnameBase:i,pattern:e}}function Q(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return o(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const k=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function j(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:A=""}="string"===typeof e?d(e):e;if(r)if(i=r,k.test(i))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),o(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?S(r.substring(1),"/"):S(r,t)}else n=t;var i;return{pathname:n,search:P(s),hash:O(A)}}function S(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function T(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function _(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=_(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=d(e):(s=A({},e),a(!s.pathname||!s.pathname.includes("?"),T("?","pathname","search",s)),a(!s.pathname||!s.pathname.includes("#"),T("#","pathname","hash",s)),a(!s.search||!s.search.includes("#"),T("#","search","hash",s)));let i,o=""===e||""===s.pathname,l=o?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=j(s,i),u=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}const H=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),P=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",O=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function M(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],V=(new Set(K),["get",...K]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const W=t.createContext(null);const z=t.createContext(null);const q=t.createContext(null);const Y=t.createContext(null);const X=t.createContext({outlet:null,matches:[],isDataRoute:!1});const J=t.createContext(null);function Z(){return null!=t.useContext(Y)}function $(){return Z()||a(!1),t.useContext(Y).location}function ee(e){t.useContext(q).static||t.useLayoutEffect(e)}function te(){let{isDataRoute:e}=t.useContext(X);return e?function(){let{router:e}=de(ce.UseNavigateStable),n=fe(ue.UseNavigateStable),r=t.useRef(!1);return ee(()=>{r.current=!0}),t.useCallback(function(t,s){void 0===s&&(s={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,G({fromRouteId:n},s)))},[e,n])}():function(){Z()||a(!1);let e=t.useContext(W),{basename:n,future:r,navigator:s}=t.useContext(q),{matches:A}=t.useContext(X),{pathname:i}=$(),o=JSON.stringify(D(A,r.v7_relativeSplatPath)),l=t.useRef(!1);return ee(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void s.go(t);let A=L(t,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==n&&(A.pathname="/"===A.pathname?n:H([n,A.pathname])),(r.replace?s.replace:s.push)(A,r.state,r)},[n,s,o,i,e])}()}function ne(){let{matches:e}=t.useContext(X),n=e[e.length-1];return n?n.params:{}}function re(e,n){let{relative:r}=void 0===n?{}:n,{future:s}=t.useContext(q),{matches:A}=t.useContext(X),{pathname:i}=$(),a=JSON.stringify(D(A,s.v7_relativeSplatPath));return t.useMemo(()=>L(e,JSON.parse(a),i,"path"===r),[e,a,i,r])}function se(n,r,s,A){Z()||a(!1);let{navigator:i}=t.useContext(q),{matches:o}=t.useContext(X),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=$();if(r){var m;let e="string"===typeof r?d(r):r;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||a(!1),h=e}else h=f;let g=h.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=p(n,{pathname:y});let w=le(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:H([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:H([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,A);return r&&w?t.createElement(Y.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},w):w}function Ae(){let e=function(){var e;let n=t.useContext(J),r=he(ue.UseRouteError),s=fe(ue.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[s]}(),n=M(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",A={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:A},r):null,null)}const ie=t.createElement(Ae,null);class ae extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(X.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:s}=e,A=t.useContext(W);return A&&A.static&&A.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(X.Provider,{value:n},s)}function le(e,n,r,s){var A;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(A=r)?void 0:A.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||a(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,s,A)=>{let i,a=!1,d=null,h=null;var f;r&&(i=l&&s.route.id?l[s.route.id]:void 0,d=s.route.errorElement||ie,c&&(u<0&&0===A?(f="route-fallback",!1||pe[f]||(pe[f]=!0),a=!0,h=null):u===A&&(a=!0,h=s.route.hydrateFallbackElement||null)));let p=n.concat(o.slice(0,A+1)),m=()=>{let n;return n=i?d:a?h:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(oe,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===A)?t.createElement(ae,{location:r.location,revalidation:r.revalidation,component:d,error:i,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let n=t.useContext(W);return n||a(!1),n}function he(e){let n=t.useContext(z);return n||a(!1),n}function fe(e){let n=function(){let e=t.useContext(X);return e||a(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||a(!1),r.route.id}const pe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){let{to:n,replace:r,state:s,relative:A}=e;Z()||a(!1);let{future:i,static:o}=t.useContext(q),{matches:l}=t.useContext(X),{pathname:c}=$(),u=te(),d=L(n,D(l,i.v7_relativeSplatPath),c,"path"===A),h=JSON.stringify(d);return t.useEffect(()=>u(JSON.parse(h),{replace:r,state:s,relative:A}),[u,h,A,r,s]),null}function ye(e){a(!1)}function xe(n){let{basename:r="/",children:s=null,location:A,navigationType:i=e.Pop,navigator:o,static:l=!1,future:c}=n;Z()&&a(!1);let u=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:u,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof A&&(A=d(A));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=A,x=t.useMemo(()=>{let e=I(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:i}},[u,f,p,m,g,y,i]);return null==x?null:t.createElement(q.Provider,{value:h},t.createElement(Y.Provider,{children:s,value:x}))}function we(e){let{children:t,location:n}=e;return se(ve(t),n)}new Promise(()=>{});t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let A=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,A));e.type!==ye&&a(!1),e.props.index&&e.props.children&&a(!1);let i={id:e.props.id||A.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,A)),r.push(i)}),r}var be=n(950),Be=n.t(be,2);function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,s={},A=Object.keys(e);for(r=0;r<A.length;r++)n=A[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Pe){}new Map;const Ue=r.startTransition;Be.flushSync,r.useId;function Fe(e){let{basename:n,children:r,future:s,window:A}=e,i=t.useRef();var a;null==i.current&&(i.current=(void 0===(a={window:A,v5Compat:!0})&&(a={}),h(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return c("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,a)));let o=i.current,[l,d]=t.useState({action:o.action,location:o.location}),{v7_startTransition:f}=s||{},p=t.useCallback(e=>{f&&Ue?Ue(()=>d(e)):d(e)},[d,f]);return t.useLayoutEffect(()=>o.listen(p),[o,p]),t.useEffect(()=>me(s),[s]),t.createElement(xe,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Qe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=t.forwardRef(function(e,n){let r,{onClick:s,relative:A,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=Ne(e,Ee),{basename:m}=t.useContext(q),g=!1;if("string"===typeof d&&Ie.test(d)&&(r=d,Qe))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=I(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:g=!0}catch(Pe){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Z()||a(!1);let{basename:s,navigator:A}=t.useContext(q),{hash:i,pathname:o,search:l}=re(e,{relative:r}),c=o;return"/"!==s&&(c="/"===o?s:H([s,o])),A.createHref({pathname:c,search:l,hash:i})}(d,{relative:A}),x=function(e,n){let{target:r,replace:s,state:A,preventScrollReset:i,relative:a,viewTransition:o}=void 0===n?{}:n,l=te(),c=$(),d=re(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==s?s:u(c)===u(d);l(e,{replace:n,state:A,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,d,s,A,r,e,i,a,o])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:A,viewTransition:f});return t.createElement("a",Ce({},p,{href:r||y,onClick:g||i?s:function(e){s&&s(e),e.defaultPrevented||x(e)},ref:n,target:c}))});var je,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(je||(je={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));function Te(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function De(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_e(t)?t:t+""}function Le(e,t,n){return(t=De(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach(function(t){Le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Pe={data:""},Oe=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Pe},Me=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ke=/\/\*[^]*?\*\/|  +/g,Ve=/\n+/g,Ge=(e,t)=>{let n="",r="",s="";for(let A in e){let i=e[A];"@"==A[0]?"i"==A[1]?n=A+" "+i+";":r+="f"==A[1]?Ge(i,A):A+"{"+Ge(i,"k"==A[1]?"":t)+"}":"object"==typeof i?r+=Ge(i,t?t.replace(/([^,])+/g,e=>A.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):A):null!=i&&(A=/^--/.test(A)?A:A.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ge.p?Ge.p(A,i):A+":"+i+";")}return n+(t&&s?t+"{"+s+"}":s)+r},We={},ze=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+ze(e[n]);return t}return e},qe=(e,t,n,r,s)=>{let A=ze(e),i=We[A]||(We[A]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(A));if(!We[i]){let t=A!==e?e:(e=>{let t,n,r=[{}];for(;t=Me.exec(e.replace(Ke,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Ve," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Ve," ").trim();return r[0]})(e);We[i]=Ge(s?{["@keyframes "+i]:t}:t,n?"":"."+i)}let a=n&&We.g?We.g:null;return n&&(We.g=We[i]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(We[i],t,r,a),i};function Ye(e){let t=this||{},n=e.call?e(t.p):e;return qe(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let A=t[s];if(A&&A.call){let e=A(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;A=t?"."+t:e&&"object"==typeof e?e.props?"":Ge(e,""):!1===e?"":e}return e+r+(null==A?"":A)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Oe(t.target),t.g,t.o,t.k)}Ye.bind({g:1});let Xe,Je,Ze,$e=Ye.bind({k:1});function et(e,t){let n=this||{};return function(){let r=arguments;function s(A,i){let a=Object.assign({},A),o=a.className||s.className;n.p=Object.assign({theme:Je&&Je()},a),n.o=/ *go\d+/.test(o),a.className=Ye.apply(n,r)+(o?" "+o:""),t&&(a.ref=i);let l=e;return e[0]&&(l=a.as||e,delete a.as),Ze&&l[0]&&Ze(a),Xe(l,a)}return t?t(s):s}}var tt,nt,rt,st,At,it,at,ot,lt,ct,ut,dt,ht,ft,pt,mt,gt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,yt=(()=>{let e=0;return()=>(++e).toString()})(),xt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),wt="default",vt=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return Re(Re({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return Re(Re({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Re(Re({},e),t.toast):e)});case 2:let{toast:r}=t;return vt(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return Re(Re({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?Re(Re({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Re(Re({},e),{},{toasts:[]}):Re(Re({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Re(Re({},e),{},{pausedAt:t.time});case 6:let A=t.time-(e.pausedAt||0);return Re(Re({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Re(Re({},e),{},{pauseDuration:e.pauseDuration+A}))})}},bt=[],Bt={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Ct={},Nt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;Ct[t]=vt(Ct[t]||Bt,e),bt.forEach(e=>{let[n,r]=e;n===t&&r(Ct[t])})},Et=e=>Object.keys(Ct).forEach(t=>Nt(e,t)),Ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return t=>{Nt(t,e)}},Ft={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Qt=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return Re(Re({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||yt()})}(t,e,n);return Ut(r.toasterId||(e=>Object.keys(Ct).find(t=>Ct[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},It=(e,t)=>Qt("blank")(e,t);It.error=Qt("error"),It.success=Qt("success"),It.loading=Qt("loading"),It.custom=Qt("custom"),It.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Ut(t)(n):Et(n)},It.dismissAll=e=>It.dismiss(void 0,e),It.remove=(e,t)=>{let n={type:4,toastId:e};t?Ut(t)(n):Et(n)},It.removeAll=e=>It.remove(void 0,e),It.promise=(e,t,n)=>{let r=It.loading(t.loading,Re(Re({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?gt(t.success,e):void 0;return s?It.success(s,Re(Re({id:r},n),null==n?void 0:n.success)):It.dismiss(r),e}).catch(e=>{let s=t.error?gt(t.error,e):void 0;s?It.error(s,Re(Re({id:r},n),null==n?void 0:n.error)):It.dismiss(r)}),e};var kt=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt,[r,s]=(0,t.useState)(Ct[n]||Bt),A=(0,t.useRef)(Ct[n]);(0,t.useEffect)(()=>(A.current!==Ct[n]&&s(Ct[n]),bt.push([n,s]),()=>{let e=bt.findIndex(e=>{let[t]=e;return t===n});e>-1&&bt.splice(e,1)}),[n]);let i=r.toasts.map(t=>{var n,r,s;return Re(Re(Re(Re({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ft[t.type],style:Re(Re(Re({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return Re(Re({},r),{},{toasts:i})}(e,n),A=(0,t.useRef)(new Map).current,i=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(A.has(e))return;let n=setTimeout(()=>{A.delete(e),a({type:4,toastId:e})},t);A.set(e,n)},[]);(0,t.useEffect)(()=>{if(s)return;let e=Date.now(),t=r.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>It.dismiss(t.id,n),r);t.visible&&It.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[r,s,n]);let a=(0,t.useCallback)(Ut(n),[n]),o=(0,t.useCallback)(()=>{a({type:5,time:Date.now()})},[a]),l=(0,t.useCallback)((e,t)=>{a({type:1,toast:{id:e,height:t}})},[a]),c=(0,t.useCallback)(()=>{s&&a({type:6,time:Date.now()})},[s,a]),u=(0,t.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:A}=t||{},i=r.filter(t=>(t.position||A)===(e.position||A)&&t.height),a=i.findIndex(t=>t.id===e.id),o=i.filter((e,t)=>t<a&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return(0,t.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=A.get(e.id);t&&(clearTimeout(t),A.delete(e.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:u}}},jt=$e(tt||(tt=Te(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),St=$e(nt||(nt=Te(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Tt=$e(rt||(rt=Te(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),_t=et("div")(st||(st=Te(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",jt,St,e=>e.secondary||"#fff",Tt),Dt=$e(At||(At=Te(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Lt=et("div")(it||(it=Te(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Dt),Ht=$e(at||(at=Te(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Rt=$e(ot||(ot=Te(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Pt=et("div")(lt||(lt=Te(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Ht,Rt,e=>e.secondary||"#fff"),Ot=et("div")(ct||(ct=Te(["\n  position: absolute;\n"]))),Mt=et("div")(ut||(ut=Te(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Kt=$e(dt||(dt=Te(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Vt=et("div")(ht||(ht=Te(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Kt),Gt=e=>{let{toast:n}=e,{icon:r,type:s,iconTheme:A}=n;return void 0!==r?"string"==typeof r?t.createElement(Vt,null,r):r:"blank"===s?null:t.createElement(Mt,null,t.createElement(Lt,Re({},A)),"loading"!==s&&t.createElement(Ot,null,"error"===s?t.createElement(_t,Re({},A)):t.createElement(Pt,Re({},A))))},Wt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),zt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),qt=et("div")(ft||(ft=Te(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Yt=et("div")(pt||(pt=Te(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Xt=t.memo(e=>{let{toast:n,position:r,style:s,children:A}=e,i=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=xt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Wt(n),zt(n)];return{animation:t?"".concat($e(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat($e(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||r||"top-center",n.visible):{opacity:0},a=t.createElement(Gt,{toast:n}),o=t.createElement(Yt,Re({},n.ariaProps),gt(n.message,n));return t.createElement(qt,{className:n.className,style:Re(Re(Re({},i),s),n.style)},"function"==typeof A?A({icon:a,message:o}):t.createElement(t.Fragment,null,a,o))});!function(e,t,n,r){Ge.p=t,Xe=e,Je=n,Ze=r}(t.createElement);var Jt=e=>{let{id:n,className:r,style:s,onHeightUpdate:A,children:i}=e,a=t.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;A(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[n,A]);return t.createElement("div",{ref:a,className:r,style:s},i)},Zt=Ye(mt||(mt=Te(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),$t=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:s,gutter:A,children:i,toasterId:a,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=kt(s,a);return t.createElement("div",{"data-rht-toaster":a||"",style:Re({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(e=>{let s=e.position||r,a=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Re(Re({left:0,right:0,display:"flex",position:"absolute",transition:xt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(s,u.calculateOffset(e,{reverseOrder:n,gutter:A,defaultPosition:r}));return t.createElement(Jt,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Zt:"",style:a},"custom"===e.type?gt(e.message,e):i?i(e):t.createElement(Xt,{toast:e,position:s}))}))},en=It;const tn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},nn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],A=s+1<e.length,i=A?e[s+1]:0,a=s+2<e.length,o=a?e[s+2]:0,l=t>>2,c=(3&t)<<4|i>>4;let u=(15&i)<<2|o>>6,d=63&o;a||(d=64,A||(u=64)),r.push(n[l],n[c],n[u],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const A=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&A)}else if(s>239&&s<365){const A=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(A>>10)),t[r++]=String.fromCharCode(56320+(1023&A))}else{const A=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&A)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],A=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==A||null==i||null==a)throw new rn;const o=t<<2|A>>4;if(r.push(o),64!==i){const e=A<<4&240|i>>2;if(r.push(e),64!==a){const e=i<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sn=function(e){return function(e){const t=tn(e);return nn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},An=function(e){try{return nn.decodeString(e,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};const an=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,on=()=>{try{return an()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Pe){return}const t=e&&An(e[1]);return t&&JSON.parse(t)})()}catch(Pe){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Pe))}},ln=e=>{var t,n;return null===(n=null===(t=on())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},cn=e=>{const t=ln(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},un=()=>{var e;return null===(e=on())||void 0===e?void 0:e.config},dn=e=>{var t;return null===(t=on())||void 0===t?void 0:t["_".concat(e)]};class hn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function fn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const A=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sn(JSON.stringify({alg:"none",type:"JWT"})),sn(JSON.stringify(A)),""].join(".")}function pn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function mn(){return!function(){var e;const t=null===(e=on())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Pe){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gn(){try{return"object"===typeof indexedDB}catch(Pe){return!1}}function yn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class xn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(vn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",A="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new xn(n,A,t)}}const vn=/\{\$([^}]+)}/g;function bn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],A=t[s];if(Bn(n)&&Bn(A)){if(!bn(n,A))return!1}else if(n!==A)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bn(e){return null!==e&&"object"===typeof e}function Cn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function En(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Un{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Fn),void 0===r.error&&(r.error=Fn),void 0===r.complete&&(r.complete=Fn);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Pe){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Pe){"undefined"!==typeof console&&console.error&&console.error(Pe)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fn(){}function Qn(e){return e&&e._delegate?e._delegate:e}class In{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const kn="[DEFAULT]";class jn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Pe){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Pe){if(r)return null;throw Pe}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:kn})}catch(Pe){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Pe){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,A]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&A.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const A=this.instances.get(r);return A&&e(A,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===kn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(A){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;return this.component?this.component.multipleInstances?e:kn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Sn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Tn=[];var _n;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_n||(_n={}));const Dn={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},Ln=_n.INFO,Hn={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},Rn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Hn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,A=new Array(s>2?s-2:0),i=2;i<s;i++)A[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...A)};class Pn{constructor(e){this.name=e,this._logLevel=Ln,this._logHandler=Rn,this._userLogHandler=null,Tn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...t),this._logHandler(this,_n.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...t),this._logHandler(this,_n.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.INFO,...t),this._logHandler(this,_n.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.WARN,...t),this._logHandler(this,_n.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...t),this._logHandler(this,_n.ERROR,...t)}}let On,Mn;const Kn=new WeakMap,Vn=new WeakMap,Gn=new WeakMap,Wn=new WeakMap,zn=new WeakMap;let qn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Yn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Mn||(Mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zn(this),n),Jn(Kn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jn(e.apply(Zn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const A=e.call(Zn(this),t,...r);return Gn.set(A,t.sort?t.sort():[t]),Jn(A)}}function Xn(e){return"function"===typeof e?Yn(e):(e instanceof IDBTransaction&&function(e){if(Vn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",A),e.removeEventListener("abort",A)},s=()=>{t(),r()},A=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",A),e.addEventListener("abort",A)});Vn.set(e,t)}(e),t=e,(On||(On=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,qn):e);var t}function Jn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",A)},s=()=>{t(Jn(e.result)),r()},A=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",A)});return t.then(t=>{t instanceof IDBCursor&&Kn.set(t,e)}).catch(()=>{}),zn.set(t,e),t}(e);if(Wn.has(e))return Wn.get(e);const t=Xn(e);return t!==e&&(Wn.set(e,t),zn.set(t,e)),t}const Zn=e=>zn.get(e);function $n(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:A}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),a=Jn(i);return r&&i.addEventListener("upgradeneeded",e=>{r(Jn(i.result),e.oldVersion,e.newVersion,Jn(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{A&&e.addEventListener("close",()=>A()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function er(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),Jn(n).then(()=>{})}const tr=["get","getKey","getAll","getAllKeys","count"],nr=["put","add","delete","clear"],rr=new Map;function sr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rr.get(t))return rr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=nr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!tr.includes(n))return;const A=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let A=t.store;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return r&&(A=A.index(a.shift())),(await Promise.all([A[n](...a),s&&t.done]))[0]};return rr.set(t,A),A}qn=(e=>Re(Re({},e),{},{get:(t,n,r)=>sr(t,n)||e.get(t,n,r),has:(t,n)=>!!sr(t,n)||e.has(t,n)}))(qn);class Ar{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ir="@firebase/app",ar="0.10.13",or=new Pn("@firebase/app"),lr="@firebase/app-compat",cr="@firebase/analytics-compat",ur="@firebase/analytics",dr="@firebase/app-check-compat",hr="@firebase/app-check",fr="@firebase/auth",pr="@firebase/auth-compat",mr="@firebase/database",gr="@firebase/data-connect",yr="@firebase/database-compat",xr="@firebase/functions",wr="@firebase/functions-compat",vr="@firebase/installations",br="@firebase/installations-compat",Br="@firebase/messaging",Cr="@firebase/messaging-compat",Nr="@firebase/performance",Er="@firebase/performance-compat",Ur="@firebase/remote-config",Fr="@firebase/remote-config-compat",Qr="@firebase/storage",Ir="@firebase/storage-compat",kr="@firebase/firestore",jr="@firebase/vertexai-preview",Sr="@firebase/firestore-compat",Tr="firebase",_r="[DEFAULT]",Dr={[ir]:"fire-core",[lr]:"fire-core-compat",[ur]:"fire-analytics",[cr]:"fire-analytics-compat",[hr]:"fire-app-check",[dr]:"fire-app-check-compat",[fr]:"fire-auth",[pr]:"fire-auth-compat",[mr]:"fire-rtdb",[gr]:"fire-data-connect",[yr]:"fire-rtdb-compat",[xr]:"fire-fn",[wr]:"fire-fn-compat",[vr]:"fire-iid",[br]:"fire-iid-compat",[Br]:"fire-fcm",[Cr]:"fire-fcm-compat",[Nr]:"fire-perf",[Er]:"fire-perf-compat",[Ur]:"fire-rc",[Fr]:"fire-rc-compat",[Qr]:"fire-gcs",[Ir]:"fire-gcs-compat",[kr]:"fire-fst",[Sr]:"fire-fst-compat",[jr]:"fire-vertex","fire-js":"fire-js",[Tr]:"fire-js-all"},Lr=new Map,Hr=new Map,Rr=new Map;function Pr(e,t){try{e.container.addComponent(t)}catch(Pe){or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Pe)}}function Or(e){const t=e.name;if(Rr.has(t))return or.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rr.set(t,e);for(const n of Lr.values())Pr(n,e);for(const n of Hr.values())Pr(n,e);return!0}function Mr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kr(e){return void 0!==e.settings}const Vr=new wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Gr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new In("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}const Wr="10.14.1";function zr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:_r,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(n||(n=un()),!n)throw Vr.create("no-options");const A=Lr.get(s);if(A){if(bn(n,A.options)&&bn(r,A.config))return A;throw Vr.create("duplicate-app",{appName:s})}const i=new Sn(s);for(const o of Rr.values())i.addComponent(o);const a=new Gr(n,r,i);return Lr.set(s,a),a}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;const t=Lr.get(e);if(!t&&e===_r&&un())return zr();if(!t)throw Vr.create("no-app",{appName:e});return t}function Yr(e,t,n){var r;let s=null!==(r=Dr[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const A=s.match(/\s|\//),i=t.match(/\s|\//);if(A||i){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return A&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),A&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void or.warn(e.join(" "))}Or(new In("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Xr="firebase-heartbeat-store";let Jr=null;function Zr(){return Jr||(Jr=$n("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xr)}catch(Pe){console.warn(Pe)}}}).catch(e=>{throw Vr.create("idb-open",{originalErrorMessage:e.message})})),Jr}async function $r(e,t){try{const n=(await Zr()).transaction(Xr,"readwrite"),r=n.objectStore(Xr);await r.put(t,es(e)),await n.done}catch(Pe){if(Pe instanceof xn)or.warn(Pe.message);else{const t=Vr.create("idb-set",{originalErrorMessage:null===Pe||void 0===Pe?void 0:Pe.message});or.warn(t.message)}}}function es(e){return"".concat(e.name,"!").concat(e.options.appId)}class ts{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rs(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ns();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Pe){or.warn(Pe)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ns(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ss(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ss(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=sn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Pe){return or.warn(Pe),""}}}function ns(){return(new Date).toISOString().substring(0,10)}class rs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!gn()&&yn().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Zr()).transaction(Xr),n=await t.objectStore(Xr).get(es(e));return await t.done,n}catch(Pe){if(Pe instanceof xn)or.warn(Pe.message);else{const t=Vr.create("idb-get",{originalErrorMessage:null===Pe||void 0===Pe?void 0:Pe.message});or.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ss(e){return sn(JSON.stringify({version:2,heartbeats:e})).length}var As;As="",Or(new In("platform-logger",e=>new Ar(e),"PRIVATE")),Or(new In("heartbeat",e=>new ts(e),"PRIVATE")),Yr(ir,ar,As),Yr(ir,ar,"esm2017"),Yr("fire-js","");Yr("firebase","10.14.1","app");function is(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function as(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const os=as,ls=new wn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cs=new Pn("@firebase/auth");function us(e){if(cs.logLevel<=_n.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cs.error("Auth (".concat(Wr,"): ").concat(e),...n)}}function ds(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gs(e,...n)}function hs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gs(e,...n)}function fs(e,t,n){const r=Object.assign(Object.assign({},os()),{[t]:n});return new wn("auth","Firebase",r).create(t,{appName:e.name})}function ps(e){return fs(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ms(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ds(e,"argument-error"),fs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function gs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ls.create(e,...n)}function ys(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw gs(t,...r)}}function xs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw us(t),new Error(t)}function ws(e,t){e||xs(t)}function vs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bs(){return"http:"===Bs()||"https:"===Bs()}function Bs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Cs(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(bs()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ns{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Cs()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Es(e,t){ws(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Us{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qs=new Ns(3e4,6e4);function Is(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ks(e,t,n,r){return js(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},A={};r&&("GET"===t?A=r:s={body:JSON.stringify(r)});const i=Cn(Object.assign({key:e.config.apiKey},A)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const o=Object.assign({method:t,headers:a},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(o.referrerPolicy="no-referrer"),Us.fetch()(Ts(e,e.config.apiHost,n,i),o)})}async function js(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fs),t);try{const t=new Ds(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const A=await s.json();if("needConfirmation"in A)throw Ls(e,"account-exists-with-different-credential",A);if(s.ok&&!("errorMessage"in A))return A;{const t=s.ok?A.errorMessage:A.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ls(e,"credential-already-in-use",A);if("EMAIL_EXISTS"===n)throw Ls(e,"email-already-in-use",A);if("USER_DISABLED"===n)throw Ls(e,"user-disabled",A);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw fs(e,a,i);ds(e,a)}}catch(Pe){if(Pe instanceof xn)throw Pe;ds(e,"network-request-failed",{message:String(Pe)})}}async function Ss(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const A=await ks(e,t,n,r,s);return"mfaPendingCredential"in A&&ds(e,"multi-factor-auth-required",{_serverResponse:A}),A}function Ts(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Es(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function _s(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ds{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(hs(this.auth,"network-request-failed")),Qs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ls(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hs(e,t,r);return s.customData._tokenResponse=n,s}function Hs(e){return void 0!==e&&void 0!==e.getResponse}function Rs(e){return void 0!==e&&void 0!==e.enterprise}class Ps{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _s(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Os(e,t){return ks(e,"GET","/v2/recaptchaConfig",Is(e,t))}async function Ms(e,t){return ks(e,"POST","/v1/accounts:lookup",t)}function Ks(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Pe){}}function Vs(e){return 1e3*Number(e)}function Gs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return us("JWT malformed, contained fewer than 3 sections"),null;try{const e=An(n);return e?JSON.parse(e):(us("Failed to decode base64 JWT payload"),null)}catch(Pe){return us("Caught error parsing JWT payload as JSON",null===Pe||void 0===Pe?void 0:Pe.toString()),null}}function Ws(e){const t=Gs(e);return ys(t,"internal-error"),ys("undefined"!==typeof t.exp,"internal-error"),ys("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function zs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Pe){throw Pe instanceof xn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Pe)&&e.auth.currentUser===e&&await e.auth.signOut(),Pe}}class qs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Pe){return void((null===Pe||void 0===Pe?void 0:Pe.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ys{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ks(this.lastLoginAt),this.creationTime=Ks(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await zs(e,Ms(n,{idToken:r}));ys(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const A=s.users[0];e._notifyReloadListener(A);const i=(null===(t=A.providerUserInfo)||void 0===t?void 0:t.length)?Js(A.providerUserInfo):[],a=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,i),o=e.isAnonymous,l=!(e.email&&A.passwordHash)&&!(null===a||void 0===a?void 0:a.length),c=!!o&&l,u={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:a,metadata:new Ys(A.createdAt,A.lastLoginAt),isAnonymous:c};Object.assign(e,u)}function Js(e){return e.map(e=>{var{providerId:t}=e,n=is(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ys(e.idToken,"internal-error"),ys("undefined"!==typeof e.idToken,"internal-error"),ys("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ws(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ys(0!==e.length,"internal-error");const t=Ws(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ys(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await js(e,{},async()=>{const n=Cn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,A=Ts(e,r,"/v1/token","key=".concat(s)),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",Us.fetch()(A,{method:"POST",headers:i,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,A=new Zs;return n&&(ys("string"===typeof n,"internal-error",{appName:e}),A.refreshToken=n),r&&(ys("string"===typeof r,"internal-error",{appName:e}),A.accessToken=r),s&&(ys("number"===typeof s,"internal-error",{appName:e}),A.expirationTime=s),A}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return xs("not implemented")}}function $s(e,t){ys("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class eA{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=is(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ys(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zs(this,this.stsTokenManager.getToken(this.auth,e));return ys(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Qn(e),r=await n.getIdToken(t),s=Gs(r);ys(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const A="object"===typeof s.firebase?s.firebase:void 0,i=null===A||void 0===A?void 0:A.sign_in_provider;return{claims:s,token:r,authTime:Ks(Vs(s.auth_time)),issuedAtTime:Ks(Vs(s.iat)),expirationTime:Ks(Vs(s.exp)),signInProvider:i||null,signInSecondFactor:(null===A||void 0===A?void 0:A.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Qn(e);await Xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ys(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new eA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ys(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await zs(this,async function(e,t){return ks(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,A,i,a,o,l;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,h=null!==(A=t.photoURL)&&void 0!==A?A:void 0,f=null!==(i=t.tenantId)&&void 0!==i?i:void 0,p=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(o=t.createdAt)&&void 0!==o?o:void 0,g=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:x,isAnonymous:w,providerData:v,stsTokenManager:b}=t;ys(y&&b,e,"internal-error");const B=Zs.fromJSON(this.name,b);ys("string"===typeof y,e,"internal-error"),$s(c,e.name),$s(u,e.name),ys("boolean"===typeof x,e,"internal-error"),ys("boolean"===typeof w,e,"internal-error"),$s(d,e.name),$s(h,e.name),$s(f,e.name),$s(p,e.name),$s(m,e.name),$s(g,e.name);const C=new eA({uid:y,auth:e,email:u,emailVerified:x,displayName:c,isAnonymous:w,photoURL:h,phoneNumber:d,tenantId:f,stsTokenManager:B,createdAt:m,lastLoginAt:g});return v&&Array.isArray(v)&&(C.providerData=v.map(e=>Object.assign({},e))),p&&(C._redirectEventId=p),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zs;r.updateFromServerResponse(t);const s=new eA({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ys(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Js(r.providerUserInfo):[],A=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),i=new Zs;i.updateFromIdToken(n);const a=new eA({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:A}),o={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ys(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(a,o),a}}const tA=new Map;function nA(e){ws(e instanceof Function,"Expected a class definition");let t=tA.get(e);return t?(ws(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tA.set(e,t),t)}class rA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rA.type="NONE";const sA=rA;function AA(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class iA{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=AA(this.userKey,r.apiKey,s),this.fullPersistenceKey=AA("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?eA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new iA(nA(sA),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||nA(sA);const A=AA(n,e.config.apiKey,e.name);let i=null;for(const l of t)try{const t=await l._get(A);if(t){const n=eA._fromJSON(e,t);l!==s&&(i=n),s=l;break}}catch(o){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],i&&await s._set(A,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(A)}catch(o){}})),new iA(s,e,n)):new iA(s,e,n)}}function aA(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hA(t))return"Blackberry";if(fA(t))return"Webos";if(lA(t))return"Safari";if((t.includes("chrome/")||cA(t))&&!t.includes("edge/"))return"Chrome";if(dA(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function oA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/firefox\//i.test(e)}function lA(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/crios\//i.test(e)}function uA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/iemobile/i.test(e)}function dA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/android/i.test(e)}function hA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/blackberry/i.test(e)}function fA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/webos/i.test(e)}function pA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mA(){return function(){const e=pn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function gA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();return pA(e)||dA(e)||fA(e)||hA(e)||/windows phone/i.test(e)||uA(e)}function yA(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=aA(pn());break;case"Worker":t="".concat(aA(pn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wr,"/").concat(r)}class xA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Pe){r(Pe)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Pe){t.reverse();for(const n of t)try{n()}catch(Et){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Pe||void 0===Pe?void 0:Pe.message})}}}class wA{constructor(e){var t,n,r,s;const A=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=A.minPasswordLength)&&void 0!==t?t:6,A.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=A.maxPasswordLength),void 0!==A.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=A.containsLowercaseCharacter),void 0!==A.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=A.containsUppercaseCharacter),void 0!==A.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=A.containsNumericCharacter),void 0!==A.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=A.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,A,i;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(A=a.containsNumericCharacter)||void 0===A||A),a.isValid&&(a.isValid=null===(i=a.containsNonAlphanumericCharacter)||void 0===i||i),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class vA{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BA(this),this.idTokenSubscription=new BA(this),this.beforeStateQueue=new xA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ls,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nA(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await iA.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Pe){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ms(this,{idToken:e}),n=await eA._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Kr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,A=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==A||!(null===i||void 0===i?void 0:i.user)||(r=i.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Pe){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Pe))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ys(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Pe){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xs(e)}catch(Pe){if((null===Pe||void 0===Pe?void 0:Pe.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(ps(this));const t=e?Qn(e):null;return t&&ys(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ys(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nA(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ks(e,"GET","/v2/passwordPolicy",Is(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wA(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ks(e,"POST","/v2/accounts:revokeToken",Is(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&nA(e)||this._popupRedirectResolver;ys(t,this,"argument-error"),this.redirectPersistenceManager=await iA.create(this,[nA(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let A=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(ys(i,this,"internal-error"),i.then(()=>{A||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{A=!0,s()}}{const n=e.addObserver(t);return()=>{A=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ys(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(cs.logLevel<=_n.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cs.warn("Auth (".concat(Wr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function bA(e){return Qn(e)}class BA{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Un(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ys(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let CA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NA(e){return CA.loadJS(e)}function EA(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class UA{constructor(e){this.type="recaptcha-enterprise",this.auth=bA(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Rs(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Os(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ps(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Rs(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=CA.recaptchaEnterpriseScript;0!==t.length&&(t+=s),NA(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function FA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new UA(e);let A;try{A=await s.verify(n)}catch(a){A=await s.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function QA(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await FA(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await FA(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function IA(e,t,n){const r=bA(e);ys(r._canInitEmulator,r,"emulator-config-failed"),ys(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),A=kA(t),{host:i,port:a}=function(e){const t=kA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:jA(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:jA(t)}}}(t),o=null===a?"":":".concat(a);r.config.emulator={url:"".concat(A,"//").concat(i).concat(o,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:a,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function kA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jA(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class SA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,t){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}async function TA(e,t){return ks(e,"POST","/v1/accounts:signUp",t)}async function _A(e,t){return Ss(e,"POST","/v1/accounts:signInWithPassword",Is(e,t))}class DA extends SA{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new DA(e,t,"password")}static _fromEmailAndCode(e,t){return new DA(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return QA(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",_A);case"emailLink":return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithEmailLink",Is(e,t))}(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return QA(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TA);case"emailLink":return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithEmailLink",Is(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function LA(e,t){return Ss(e,"POST","/v1/accounts:signInWithIdp",Is(e,t))}class HA extends SA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new HA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ds("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=is(t,["providerId","signInMethod"]);if(!n||!r)return null;const A=new HA(n,r);return A.idToken=s.idToken||void 0,A.accessToken=s.accessToken||void 0,A.secret=s.secret,A.nonce=s.nonce,A.pendingToken=s.pendingToken||null,A}_getIdTokenResponse(e){return LA(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,LA(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,LA(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cn(t)}return e}}const RA={USER_NOT_FOUND:"user-not-found"};class PA extends SA{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new PA({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new PA({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ss(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,t));if(n.temporaryProof)throw Ls(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),RA)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new PA({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class OA{constructor(e){var t,n,r,s,A,i;const a=Nn(En(e)),o=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ys(o&&l&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(A=a.languageCode)&&void 0!==A?A:null,this.tenantId=null!==(i=a.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=Nn(En(e)).link,n=t?Nn(En(t)).deep_link_id:null,r=Nn(En(e)).deep_link_id;return(r?Nn(En(r)).link:null)||r||n||t||e}(e);try{return new OA(t)}catch(n){return null}}}class MA{constructor(){this.providerId=MA.PROVIDER_ID}static credential(e,t){return DA._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=OA.parseLink(t);return ys(n,"argument-error"),DA._fromEmailAndCode(e,n.code,n.tenantId)}}MA.PROVIDER_ID="password",MA.EMAIL_PASSWORD_SIGN_IN_METHOD="password",MA.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class KA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class VA extends KA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class GA extends VA{constructor(){super("facebook.com")}static credential(e){return HA._fromParams({providerId:GA.PROVIDER_ID,signInMethod:GA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GA.credentialFromTaggedObject(e)}static credentialFromError(e){return GA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return GA.credential(t.oauthAccessToken)}catch(n){return null}}}GA.FACEBOOK_SIGN_IN_METHOD="facebook.com",GA.PROVIDER_ID="facebook.com";class WA extends VA{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return HA._fromParams({providerId:WA.PROVIDER_ID,signInMethod:WA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return WA.credentialFromTaggedObject(e)}static credentialFromError(e){return WA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return WA.credential(n,r)}catch(s){return null}}}WA.GOOGLE_SIGN_IN_METHOD="google.com",WA.PROVIDER_ID="google.com";class zA extends VA{constructor(){super("github.com")}static credential(e){return HA._fromParams({providerId:zA.PROVIDER_ID,signInMethod:zA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zA.credentialFromTaggedObject(e)}static credentialFromError(e){return zA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zA.credential(t.oauthAccessToken)}catch(n){return null}}}zA.GITHUB_SIGN_IN_METHOD="github.com",zA.PROVIDER_ID="github.com";class qA extends VA{constructor(){super("twitter.com")}static credential(e,t){return HA._fromParams({providerId:qA.PROVIDER_ID,signInMethod:qA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qA.credentialFromTaggedObject(e)}static credentialFromError(e){return qA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return qA.credential(n,r)}catch(s){return null}}}async function YA(e,t){return Ss(e,"POST","/v1/accounts:signUp",Is(e,t))}qA.TWITTER_SIGN_IN_METHOD="twitter.com",qA.PROVIDER_ID="twitter.com";class XA{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await eA._fromIdTokenResponse(e,n,r),A=JA(n);return new XA({user:s,providerId:A,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=JA(n);return new XA({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function JA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ZA extends xn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ZA.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ZA(e,t,n,r)}}function $A(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ZA._fromErrorAndOperation(e,n,t,r);throw n})}async function ei(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await zs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return XA._forOperation(e,"link",r)}async function ti(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Kr(r.app))return Promise.reject(ps(r));const s="reauthenticate";try{const A=await zs(e,$A(r,s,t,e),n);ys(A.idToken,r,"internal-error");const i=Gs(A.idToken);ys(i,r,"internal-error");const{sub:a}=i;return ys(e.uid===a,r,"user-mismatch"),XA._forOperation(e,s,A)}catch(Pe){throw(null===Pe||void 0===Pe?void 0:Pe.code)==="auth/".concat("user-not-found")&&ds(r,"user-mismatch"),Pe}}async function ni(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Kr(e.app))return Promise.reject(ps(e));const r="signIn",s=await $A(e,r,t),A=await XA._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(A.user),A}async function ri(e,t){return ni(bA(e),t)}async function si(e){const t=bA(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ai(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=Qn(e),A={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},i=await zs(s,async function(e,t){return ks(e,"POST","/v1/accounts:update",t)}(s.auth,A));s.displayName=i.displayName||null,s.photoURL=i.photoUrl||null;const a=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(i)}async function ii(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const A=await zs(e,async function(e,t){return ks(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(A,!0)}new WeakMap;const ai="__sak";class oi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ai,"1"),this.storage.removeItem(ai),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class li extends oi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);mA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}li.type="LOCAL";const ci=li;class ui extends oi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ui.type="SESSION";const di=ui;class hi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new hi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,A=this.handlersMap[r];if(!(null===A||void 0===A?void 0:A.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(A).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}hi.receivers=[];class pi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,A;return new Promise((i,a)=>{const o=fi("",20);r.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);A={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===o)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(A),r.port1.addEventListener("message",A.onMessage),this.target.postMessage({eventType:e,eventId:o,data:t},[r.port2])}).finally(()=>{A&&this.removeMessageHandler(A)})}}function mi(){return window}function gi(){return"undefined"!==typeof mi().WorkerGlobalScope&&"function"===typeof mi().importScripts}const yi="firebaseLocalStorageDb",xi="firebaseLocalStorage",wi="fbase_key";class vi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bi(e,t){return e.transaction([xi],t?"readwrite":"readonly").objectStore(xi)}function Bi(){const e=indexedDB.open(yi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(xi,{keyPath:wi})}catch(Pe){n(Pe)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(xi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(yi);return new vi(e).toPromise()}(),t(await Bi()))})})}async function Ci(e,t,n){const r=bi(e,!0).put({[wi]:t,value:n});return new vi(r).toPromise()}function Ni(e,t){const n=bi(e,!0).delete(t);return new vi(n).toPromise()}class Ei{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Bi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Pe){if(t++>3)throw Pe;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hi._getInstance(gi()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new pi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bi();return await Ci(e,ai,"1"),await Ni(e,ai),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ci(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=bi(e,!1).get(t),r=await new vi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ni(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=bi(e,!1).getAll();return new vi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ei.type="LOCAL";const Ui=Ei;const Fi=1e12;class Qi{constructor(e){this.auth=e,this.counter=Fi,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ii(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Fi;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Fi;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Fi;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ii{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ys(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(Pe){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(Pe){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ki=EA("rcb"),ji=new Ns(3e4,6e4);class Si{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=mi().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ys(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Hs(mi().grecaptcha)?Promise.resolve(mi().grecaptcha):new Promise((n,r)=>{const s=mi().setTimeout(()=>{r(hs(e,"network-request-failed"))},ji.get());mi()[ki]=()=>{mi().clearTimeout(s),delete mi()[ki];const A=mi().grecaptcha;if(!A||!Hs(A))return void r(hs(e,"internal-error"));const i=A.render;A.render=(e,t)=>{const n=i(e,t);return this.counter++,n},this.hostLanguage=t,n(A)};NA("".concat(CA.recaptchaV2Script,"?").concat(Cn({onload:ki,render:"explicit",hl:t}))).catch(()=>{clearTimeout(s),r(hs(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=mi().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ti{async load(e){return new Qi(e)}clearedOneInstance(){}}const _i="recaptcha",Di={theme:"light",type:"image"};class Li{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Di);this.parameters=n,this.type=_i,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bA(e),this.isInvisible="invisible"===this.parameters.size,ys("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ys(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ti:new Si,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(Pe){return Promise.reject(Pe)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ys(!this.parameters.sitekey,this.auth,"argument-error"),ys(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ys("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=mi()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ys(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ys(bs()&&!gi(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ks(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ys(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ys(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hi{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=PA._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Ri(e,t,n){var r;const s=await n.verify();try{let A;if(ys("string"===typeof s,e,"argument-error"),ys(n.type===_i,e,"argument-error"),A="string"===typeof t?{phoneNumber:t}:t,"session"in A){const t=A.session;if("phoneNumber"in A){ys("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ks(e,"POST","/v2/accounts/mfaEnrollment:start",Is(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{ys("signin"===t.type,e,"internal-error");const n=(null===(r=A.multiFactorHint)||void 0===r?void 0:r.uid)||A.multiFactorUid;ys(n,e,"missing-multi-factor-info");const i=await function(e,t){return ks(e,"POST","/v2/accounts/mfaSignIn:start",Is(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ks(e,"POST","/v1/accounts:sendVerificationCode",Is(e,t))}(e,{phoneNumber:A.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Pi{constructor(e){this.providerId=Pi.PROVIDER_ID,this.auth=bA(e)}verifyPhoneNumber(e,t){return Ri(this.auth,e,Qn(t))}static credential(e,t){return PA._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pi.credentialFromTaggedObject(t)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?PA._fromTokenResponse(n,r):null}}function Oi(e,t){return t?nA(t):(ys(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Pi.PROVIDER_ID="phone",Pi.PHONE_SIGN_IN_METHOD="phone";class Mi extends SA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return LA(e,this._buildIdpRequest())}_linkToIdToken(e,t){return LA(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return LA(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ki(e){return ni(e.auth,new Mi(e),e.bypassAuthState)}function Vi(e){const{auth:t,user:n}=e;return ys(n,t,"internal-error"),ti(n,new Mi(e),e.bypassAuthState)}async function Gi(e){const{auth:t,user:n}=e;return ys(n,t,"internal-error"),ei(n,new Mi(e),e.bypassAuthState)}class Wi{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Pe){this.reject(Pe)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:A,type:i}=e;if(A)return void this.reject(A);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(a))}catch(Pe){this.reject(Pe)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ki;case"linkViaPopup":case"linkViaRedirect":return Gi;case"reauthViaPopup":case"reauthViaRedirect":return Vi;default:ds(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zi=new Ns(2e3,1e4);class qi extends Wi{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,qi.currentPopupAction&&qi.currentPopupAction.cancel(),qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ys(e,this.auth,"internal-error"),e}async onExecution(){ws(1===this.filter.length,"Popup operations only handle one event");const e=fi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(hs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(hs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hs(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,zi.get())};e()}}qi.currentPopupAction=null;const Yi=new Map;class Xi extends Wi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Yi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=$i(t),r=Zi(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Pe){e=()=>Promise.reject(Pe)}Yi.set(this.auth._key(),e)}return this.bypassAuthState||Yi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ji(e,t){Yi.set(e._key(),t)}function Zi(e){return nA(e._redirectPersistence)}function $i(e){return AA("pendingRedirect",e.config.apiKey,e.name)}async function ea(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Kr(e.app))return Promise.reject(ps(e));const r=bA(e),s=Oi(r,t),A=new Xi(r,s,n),i=await A.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class ta{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ra(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ra(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(hs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(na(e))}saveEventToCache(e){this.cachedEventUids.add(na(e)),this.lastProcessedEventTime=Date.now()}}function na(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ra(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const sa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Aa=/^https?/;async function ia(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ks(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(aa(r))return}catch(n){}ds(e,"unauthorized-domain")}function aa(e){const t=vs(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Aa.test(n))return!1;if(sa.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const oa=new Ns(3e4,6e4);function la(){const e=mi().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ca(e){return new Promise((t,n)=>{var r,s,A;function i(){la(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{la(),n(hs(e,"network-request-failed"))},timeout:oa.get()})}if(null===(s=null===(r=mi().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(A=mi().gapi)||void 0===A?void 0:A.load)){const t=EA("iframefcb");return mi()[t]=()=>{gapi.load?i():n(hs(e,"network-request-failed"))},NA("".concat(CA.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw ua=null,e})}let ua=null;const da=new Ns(5e3,15e3),ha={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pa(e){const t=e.config;ys(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Es(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Wr},s=fa.get(e.config.apiHost);s&&(r.eid=s);const A=e._getFrameworks();return A.length&&(r.fw=A.join(",")),"".concat(n,"?").concat(Cn(r).slice(1))}async function ma(e){const t=await function(e){return ua=ua||ca(e),ua}(e),n=mi().gapi;return ys(n,e,"internal-error"),t.open({where:document.body,url:pa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ha,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=hs(e,"network-request-failed"),A=mi().setTimeout(()=>{r(s)},da.get());function i(){mi().clearTimeout(A),n(t)}t.ping(i).then(i,()=>{r(s)})}))}const ga={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ya{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Pe){}}}function xa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const o=Object.assign(Object.assign({},ga),{width:r.toString(),height:s.toString(),top:A,left:i}),l=pn().toLowerCase();n&&(a=cA(l)?"_blank":n),oA(l)&&(t=t||"http://localhost",o.scrollbars="yes");const c=Object.entries(o).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return pA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ya(null);const u=window.open(t||"",a,c);ys(u,e,"popup-blocked");try{u.focus()}catch(Pe){}return new ya(u)}const wa="__/auth/handler",va="emulator/auth/handler",ba=encodeURIComponent("fac");async function Ba(e,t,n,r,s,A){ys(e.config.authDomain,e,"auth-domain-config-required"),ys(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wr,eventId:s};if(t instanceof KA){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(A||{}))i[e]=t}if(t instanceof VA){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const a=i;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const o=await e._getAppCheckToken(),l=o?"#".concat(ba,"=").concat(encodeURIComponent(o)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(wa);return Es(t,va)}(e),"?").concat(Cn(a).slice(1)).concat(l)}const Ca="webStorageSupport";const Na=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=di,this._completeRedirectFn=ea,this._overrideRedirectResult=Ji}async _openPopup(e,t,n,r){var s;ws(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return xa(e,await Ba(e,t,n,vs(),r),fi())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mi().location.href=e}(await Ba(e,t,n,vs(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ws(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ma(e),n=new ta(e);return t.register("authEvent",t=>{ys(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ca,{type:Ca},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ca];void 0!==s&&t(!!s),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ia(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gA()||lA()||pA()}};var Ea="@firebase/auth",Ua="1.7.9";class Fa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ys(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qa=dn("authIdTokenMaxAge")||300;let Ia=null;var ka;!function(e){CA=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=hs("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ka="Browser",Or(new In("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;ys(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const o={apiKey:i,authDomain:a,clientPlatform:ka,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yA(ka)},l=new vA(r,s,A,o);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nA);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Or(new In("auth-internal",e=>(e=>new Fa(e))(bA(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(Ea,Ua,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ka)),Yr(Ea,Ua,"esm2017");var ja,Sa,Ta="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_a={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var A=e.g[3],i=t+(A^n&(s^A))+r[0]+3614090360&4294967295;i=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=(n=(s=(A=(t=n+(i<<7&4294967295|i>>>25))+((i=A+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^A&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(A^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(A^n&(s^A))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=A+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^A&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(A^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(A^n&(s^A))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=A+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^A&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(A^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(A^n&(s^A))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=A+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^A&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(A^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^A&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=A+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(A^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(A^t&(s^A))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^A&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=A+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(A^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(A^t&(s^A))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^A&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=A+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(A^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(A^t&(s^A))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^A&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=A+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(A^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(A^t&(s^A))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^A)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=A+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(A^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^A^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^A)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=A+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(A^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^A^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^A)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=A+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(A^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^A^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^A)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=A+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(A^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^A^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~A))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=A+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(A|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(A^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~A))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=A+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(A|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(A^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~A))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=A+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(A|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(A^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((A=(t=n+((i=t+(s^(n|~A))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=A+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=A+((i=s+(t^(A|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+A&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var A=0|e[s];r&&A==t||(n[s]=A,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),A=2;A<arguments.length;A++)s[A-2]=arguments[A];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,A=this.h,i=0;i<t;){if(0==A)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(s[A++]=e.charCodeAt(i++),A==this.blockSize){n(this,s),A=0;break}}else for(;i<t;)if(s[A++]=e[i++],A==this.blockSize){n(this,s),A=0;break}}this.h=A,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function A(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(i(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var a=A(0),o=A(1),l=A(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(o)}function h(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new p(a,a);if(u(e))return t=m(d(e),t),new p(d(t.g),d(t.h));if(u(t))return t=m(e,d(t)),new p(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=o,r=t;0>=r.l(e);)n=g(n),r=g(r);var s=y(n,1),A=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var l=A.add(r);0>=l.l(e)&&(s=s.add(n),A=l),r=y(r,1),n=y(n,1)}return t=h(e,s.j(t)),new p(s,t)}for(s=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(A=i(n)).j(t);u(l)||0<l.l(e);)l=(A=i(n-=r)).j(t);c(A)&&(A=o),s=s.add(A),e=h(e,l)}return new p(s,e)}function g(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,A=[],i=0;i<s;i++)A[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(A,e.h)}(e=r.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var s=m(n,t).g,A=((0<(n=h(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=s))return A+r;for(;6>A.length;)A="0"+A;r=A+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=h(this,e))?-1:c(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,A=0;A<=t;A++){var i=s+(65535&this.i(A))+(65535&e.i(A)),a=(i>>>16)+(this.i(A)>>>16)+(e.i(A)>>>16);s=a>>>16,i&=65535,a&=65535,n[A]=a<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var A=0;A<e.g.length;A++){var o=this.i(s)>>>16,h=65535&this.i(s),p=e.i(A)>>>16,m=65535&e.i(A);n[2*s+2*A]+=h*m,f(n,2*s+2*A),n[2*s+2*A+1]+=o*m,f(n,2*s+2*A+1),n[2*s+2*A+1]+=h*p,f(n,2*s+2*A+1),n[2*s+2*A+2]+=o*p,f(n,2*s+2*A+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Sa=_a.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),s=a,A=0;A<t.length;A+=8){var o=Math.min(8,t.length-A),l=parseInt(t.substring(A,A+o),n);8>o?(o=i(Math.pow(n,o)),s=s.j(o).add(i(l))):s=(s=s.j(r)).add(i(l))}return s},ja=_a.Integer=r}).apply("undefined"!==typeof Ta?Ta:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Da,La,Ha,Ra,Pa,Oa,Ma,Ka,Va="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ga={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Va&&Va];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var A=0;A<e.length-1;A++){var i=e[A];if(!(i in s))break e;s=s[i]}(r=r(A=s[e=e[e.length-1]]))!=A&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function A(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function o(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),A=2;A<arguments.length;A++)s[A-2]=arguments[A];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function h(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(A(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var g=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function b(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function B(e){s.setTimeout(()=>{throw e},0)}function C(){var e=Q;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,Q=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);U=()=>{e.then(k)}};var k=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(We){B(We)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function j(){this.s=this.s,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(We){}return e}();function _(e,t){if(S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(g){e:{try{m(t.nodeName);var s=!0;break e}catch(Je){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_.aa.h.call(this)}}u(_,S);var D={2:"touch",3:"pen",4:"mouse"};_.prototype.h=function(){_.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),H=0;function R(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++H,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function O(e){this.src=e,this.g={},this.h=0}function M(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],A=Array.prototype.indexOf.call(s,t,void 0);(r=0<=A)&&Array.prototype.splice.call(s,A,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function K(e,t,n,r){for(var s=0;s<e.length;++s){var A=e[s];if(!A.da&&A.listener==t&&A.capture==!!n&&A.ha==r)return s}return-1}O.prototype.add=function(e,t,n,r,s){var A=e.toString();(e=this.g[A])||(e=this.g[A]=[],this.h++);var i=K(e,t,r,s);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new R(t,this.src,A,!!r,s)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),G={};function W(e,t,n,r,s){if(r&&r.once)return q(e,t,n,r,s);if(Array.isArray(t)){for(var A=0;A<t.length;A++)W(e,t[A],n,r,s);return null}return n=te(n),e&&e[L]?e.K(t,n,i(r)?!!r.capture:!!r,s):z(e,t,n,!1,r,s)}function z(e,t,n,r,s,A){if(!t)throw Error("Invalid event type");var a=i(s)?!!s.capture:!!s,o=$(e);if(o||(e[V]=o=new O(e)),(n=o.add(t,n,r,a,A)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)T||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,s){if(Array.isArray(t)){for(var A=0;A<t.length;A++)q(e,t[A],n,r,s);return null}return n=te(n),e&&e[L]?e.L(t,n,i(r)?!!r.capture:!!r,s):z(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var A=0;A<t.length;A++)Y(e,t[A],n,r,s);else r=i(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=K(A=e.g[t],n,r,s))&&(P(A[n]),Array.prototype.splice.call(A,n,1),0==A.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=K(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(M(n,e),0==n.h&&(n.src=null,t[V]=null)):P(e)}}}function J(e){return e in G?G[e]:G[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new _(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function $(e){return(e=e[V])instanceof O?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){j.call(this),this.i=new O(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var s=t;v(t=new S(r,e),s)}if(s=!0,n)for(var A=n.length-1;0<=A;A--){var i=t.g=n[A];s=se(i,r,!0,t)&&s}if(s=se(i=t.g=e,r,!0,t)&&s,s=se(i,r,!1,t)&&s,n)for(A=0;A<n.length;A++)s=se(i=t.g=n[A],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,A=0;A<t.length;++A){var i=t[A];if(i&&!i.da&&i.capture==n){var a=i.listener,o=i.ha||i.src;i.fa&&M(e.i,i),s=!1!==a.call(o,r)&&s}}return s&&!r.defaultPrevented}function Ae(e,t,n){if("function"===typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ie(e){e.g=Ae(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,j),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)P(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends j{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){j.call(this),this.h=e,this.g={}}u(oe,j);var le=[];function ce(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),ce(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=s.JSON.stringify,de=s.JSON.parse,he=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function fe(){}function pe(e){return e.h||(e.h=e.i())}function me(){}fe.prototype.h=null;var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){S.call(this,"d")}function xe(){S.call(this,"c")}u(ye,S),u(xe,S);var we={},ve=null;function be(){return ve=ve||new ne}function Be(e){S.call(this,we.La,e)}function Ce(e){const t=be();re(t,new Be(t))}function Ne(e,t){S.call(this,we.STAT_EVENT,e),this.stat=t}function Ee(e){const t=be();re(t,new Ne(t,e))}function Ue(e,t){S.call(this,we.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Qe(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var A=s[0];if("noop"!=A&&"stop"!=A&&"close"!=A)for(var i=1;i<s.length;i++)s[i]=""}}}return ue(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",u(Be,S),we.STAT_EVENT="statevent",u(Ne,S),we.Ma="timingevent",u(Ue,S),Qe.prototype.xa=function(){this.g=!1},Qe.prototype.info=function(){};var ke,je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Te(){}function _e(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(Te,fe),Te.prototype.g=function(){return new XMLHttpRequest},Te.prototype.i=function(){return{}},ke=new Te;var Le={},He={};function Re(e,t,n){e.L=1,e.v=yt(ht(t)),e.m=n,e.P=!0,Oe(e,null)}function Oe(e,t){e.F=Date.now(),ze(e),e.A=ht(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(le[0]=s.toString()),s=le);for(var A=0;A<s.length;A++){var i=W(n,s[A],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,s,A){e.info(function(){if(e.g)if(A)for(var i="",a=A.split("&"),o=0;o<a.length;o++){var l=a[o].split("=");if(1<l.length){var c=l[0];l=l[1];var u=c.split("_");i=2<=u.length&&"type"==u[1]?i+(c+"=")+l+"&":i+(c+"=redacted&")}}else i=null;else i=A;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ge(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?He:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?He:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(l(e.ba,e),t)}function Ye(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ze(e){0==e.j.G||e.J||fn(e.j,e)}function $e(e){Ye(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function tt(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||it(n.h,e)))if(!e.K&&it(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Me){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),nn(n)}cn(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(l(n.Za,n),6e3));if(1>=At(n.h)&&n.ca){try{n.ca()}catch(Me){}n.ca=void 0}}else mn(n,11)}else if((e.K||n.g==e)&&hn(n),!f(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=l[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const c=l[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var A=r.h;A.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(A.j=A.l,A.g=new Set,A.h&&(at(A,A.h),A.h=null))}if(r.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=yn(r,r.J?r.ia:null,r.W),i.K){ot(r.h,i);var a=i,o=r.L;o&&(a.I=o),a.B&&(Ye(a),ze(a)),r.g=i}else ln(r);0<n.i.length&&sn(n)}else"stop"!=l[0]&&"close"!=l[0]||mn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mn(n,7):tn(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Ce()}catch(Me){}}_e.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Jt(e)?t.j():this.Y(e)},_e.prototype.Y=function(e){try{if(e==this.g)e:{const d=Jt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Zt(this.g)))){this.J||4!=d||7==t||Ce(),Ye(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Zt(this.g);e="";var A=r.length,i=4==Jt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){$e(this),Ze(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<A;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==A-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,A,i){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+A+" "+i})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(o)){var c=o;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ee(12),$e(this),Ze(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tt(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ge(this,a),e==He){4==d&&(this.s=4,Ee(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ee(15),Ie(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),tt(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),un(u),u.M=!0,Ee(11))}}else Ie(this.i,this.l,a,"[Invalid Chunked Response]"),$e(this),Ze(this)}else Ie(this.i,this.l,a,null),tt(this,a);4==d&&$e(this),this.o&&!this.J&&(4==d?fn(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=Jt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=b(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const A=t[s]||[];t[s]=A,A.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),$e(this),Ze(this)}}}catch(et){}},_e.prototype.cancel=function(){this.J=!0,$e(this)},_e.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ce(),Ee(17)),$e(this),this.s=2,Ze(this)):qe(this,this.S-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function st(e){return!!e.h||!!e.g&&e.g.size>=e.j}function At(e){return e.h?1:e.g?e.g.size:0}function it(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(A(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(A(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(A(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}rt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.s),this.l=e.l;var t=e.i,n=new Ut;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),mt(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,ft(this,t[1]||"",!0),this.o=xt(t[2]||""),this.g=xt(t[3]||"",!0),pt(this,t[4]),this.l=xt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=xt(t[7]||"")):(this.h=!1,this.i=new Ut(null,this.h))}function ht(e){return new dt(e)}function ft(e,t,n){e.j=n?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function mt(e,t,n){t instanceof Ut?(e.i=t,function(e,t){t&&!e.j&&(Ft(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Qt(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=wt(t,Nt)),e.i=new Ut(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(wt(t,bt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(wt(t,bt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wt(n,"/"==n.charAt(0)?Ct:Bt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",wt(n,Et)),e.join("")};var bt=/[#\/\?@]/g,Bt=/[#\?:]/g,Ct=/[#\?]/g,Nt=/[#\?@]/g,Et=/#/g;function Ut(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ft(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var A=e[n].substring(0,r);s=e[n].substring(r+1)}else A=e[n];t(A,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Qt(e,t){Ft(e),t=jt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return Ft(e),t=jt(e,t),e.g.has(t)}function kt(e,t,n){Qt(e,t),0<n.length&&(e.i=null,e.g.set(jt(e,t),d(n)),e.h+=n.length)}function jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Je){}}function Tt(){this.g=new he}function _t(e,t,n){const r=n||"";try{ct(e,function(e,n){let s=e;i(e)&&(s=ue(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Pe){throw t.push(r+"type="+encodeURIComponent("_badmap")),Pe}}function Dt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Lt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ht(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function Kt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ut.prototype).add=function(e,t){Ft(this),this.i=null,e=jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ft(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Ft(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Ft(this);let t=[];if("string"===typeof e)It(this,e)&&(t=t.concat(this.g.get(jt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ft(this),this.i=null,It(this,e=jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const A=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var s=A;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")},u(Dt,fe),Dt.prototype.g=function(){return new Lt(this.l,this.j)},Dt.prototype.i=function(e){return function(){return e}}({}),u(Lt,ne),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ht(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Pt(this),3==this.readyState&&Ht(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Kt,ne);var Vt=/^https?$/i,Gt=["POST","PUT"];function Wt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Yt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Jt(e)||2!=e.Z()))if(e.u&&4==Jt(e))Ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==Jt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var A;if(A=0===r){var i=String(e.D).match(ut)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),A=!Vt.test(i?i.toLowerCase():"")}n=A}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Jt(e)?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{Yt(e)}}}function Yt(e,t){if(e.g){Xt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Pe){}}}function Xt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Jt(e){return e.g?e.g.readyState:0}function Zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function en(e){this.Aa=0,this.i=[],this.j=new Qe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$t("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$t("baseRetryDelayMs",5e3,e),this.cb=$t("retryDelaySeedMs",1e4,e),this.Wa=$t("forwardChannelMaxRetries",2,e),this.wa=$t("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new rt(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tn(e){if(rn(e),3==e.G){var t=e.U++,n=ht(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new _e(e,e.j,t)).L=2,t.v=yt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(Xe){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}gn(e)}function nn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function rn(e){nn(e),e.u&&(s.clearTimeout(e.u),e.u=null),hn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function sn(e){if(!st(e.h)&&!e.s){e.s=!0;var t=e.Ga;U||I(),F||(U(),F=!0),Q.add(t,e),e.B=0}}function An(e,t){var n;n=t?t.l:e.U++;const r=ht(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),an(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new _e(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=on(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),Re(n,r,t)}function an(e,t){e.H&&y(e.H,function(e,n){gt(t,n,e)}),e.l&&ct({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let A=!0;for(let i=0;i<n;i++){let n=s[i].g;const a=s[i].map;if(n-=t,0>n)t=Math.max(0,s[i].g-100),A=!1;else try{_t(a,e,"req"+n+"_")}catch(et){r&&r(a)}}if(A){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function ln(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;U||I(),F||(U(),F=!0),Q.add(t,e),e.v=0}}function cn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(l(e.Fa,e),pn(e,e.v)),e.v++,!0)}function un(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function dn(e){e.g=new _e(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),an(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=yt(ht(t)),n.m=null,n.P=!0,Oe(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!it(e.h,t))return;n=t.D,ot(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=be(),new Ue(r,n)),sn(e)}else ln(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(At(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(l(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&cn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),yt(r),t?function(e,t){const n=new Qe;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Qe;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),gn(e),rn(e)}function gn(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(h(e.ka,t),h(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.s);else{var A=s.location;r=A.protocol,t=t?t+"."+A.hostname:A.hostname,A=+A.port;var i=new dt(null);r&&ft(i,r),t&&(i.g=t),A&&pt(i,A),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),an(e,r),r}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Dt({eb:n})):new Kt(e.pa)).Ha(e.J),t}function wn(){}function vn(){}function bn(e,t){ne.call(this),this.g=new en(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nn(this)}function Bn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){xe.call(this),this.status=1}function Nn(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?pe(this.o):pe(ke),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Je){return void Wt(this,Je)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var A in r)n.set(A,r[A]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),A=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Gt,t,void 0))||r||A||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,i]of n)this.g.setRequestHeader(s,i);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Je){Wt(this,Je)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Yt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch(Ke){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ke){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=en.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=yn(this,null,this.W),sn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new _e(this,this.j,e);let A=this.o;if(this.S&&(A?(A=x(A),v(A,this.S)):A=this.S),null!==this.m||this.O||(s.H=A,A=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,s,t),gt(n=ht(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),an(this,n),A&&(this.O?t="headers="+encodeURIComponent(String(Ot(A)))+"&"+t:this.m&&Mt(n,this.m,A)),at(this.h,s),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),s.T=!0,Re(s,n,null)):Re(s,n,t),this.G=2}}else 3==this.G&&(e?An(this,e):0==this.i.length||st(this.h)||An(this))},e.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),nn(this),dn(this))},e.Za=function(){null!=this.C&&(this.C=null,nn(this),cn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},vn.prototype.g=function(e,t){return new bn(e,t)},u(bn,ne),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){tn(this.g)},bn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.G&&sn(t)},bn.prototype.N=function(){this.g.l=null,delete this.j,tn(this.g),delete this.g,bn.aa.N.call(this)},u(Bn,ye),u(Cn,xe),u(Nn,wn),Nn.prototype.ua=function(){re(this.g,"a")},Nn.prototype.ta=function(e){re(this.g,new Bn(e))},Nn.prototype.sa=function(e){re(this.g,new Cn)},Nn.prototype.ra=function(){re(this.g,"b")},vn.prototype.createWebChannel=vn.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,Ka=Ga.createWebChannelTransport=function(){return new vn},Ma=Ga.getStatEventTarget=function(){return be()},Oa=Ga.Event=we,Pa=Ga.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Ra=Ga.ErrorCode=je,Se.COMPLETE="complete",Ha=Ga.EventType=Se,me.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",ne.prototype.listen=ne.prototype.K,La=Ga.WebChannel=me,Ga.FetchXmlHttpFactory=Dt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,Da=Ga.XhrIo=Kt}).apply("undefined"!==typeof Va?Va:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Wa="@firebase/firestore";class za{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}za.UNAUTHENTICATED=new za(null),za.GOOGLE_CREDENTIALS=new za("google-credentials-uid"),za.FIRST_PARTY=new za("first-party-uid"),za.MOCK_USER=new za("mock-user");let qa="10.14.0";const Ya=new Pn("@firebase/firestore");function Xa(){return Ya.logLevel}function Ja(e){if(Ya.logLevel<=_n.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(eo);Ya.debug("Firestore (".concat(qa,"): ").concat(e),...s)}}function Za(e){if(Ya.logLevel<=_n.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(eo);Ya.error("Firestore (".concat(qa,"): ").concat(e),...s)}}function $a(e){if(Ya.logLevel<=_n.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(eo);Ya.warn("Firestore (".concat(qa,"): ").concat(e),...s)}}function eo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Oe){return e}}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(qa,") INTERNAL ASSERTION FAILED: ")+e;throw Za(t),new Error(t)}function no(e,t){e||to()}function ro(e,t){return e}const so={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ao extends xn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class io{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ao{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class oo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(za.UNAUTHENTICATED))}shutdown(){}}class lo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class co{constructor(e){this.t=e,this.currentUser=za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){no(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new io;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new io,e.enqueueRetryable(()=>r(this.currentUser))};const A=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},i=e=>{Ja("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),A())};this.t.onInit(e=>i(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(Ja("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new io)}},0),A()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ja("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(no("string"==typeof t.accessToken),new ao(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return no(null===e||"string"==typeof e),new za(e)}}class uo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=za.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ho{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new uo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(za.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class po{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){no(void 0===this.o);const n=e=>{null!=e.error&&Ja("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ja("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ja("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ja("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(no("string"==typeof e.token),this.R=e.token,new fo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class go{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=mo(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function yo(e,t){return e<t?-1:e>t?1:0}function xo(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class wo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ao(so.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ao(so.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ao(so.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ao(so.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wo.fromMillis(Date.now())}static fromDate(e){return wo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new wo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yo(this.nanoseconds,e.nanoseconds):yo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vo(e)}static min(){return new vo(new wo(0,0))}static max(){return new vo(new wo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bo{constructor(e,t,n){void 0===t?t=0:t>e.length&&to(),void 0===n?n=e.length-t:n>e.length-t&&to(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===bo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Bo extends bo{construct(e,t,n){return new Bo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Ao(so.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Bo(e)}static emptyPath(){return new Bo([])}}const Co=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class No extends bo{construct(e,t,n){return new No(e,t,n)}static isValidIdentifier(e){return Co.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),No.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new No(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Ao(so.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let A=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ao(so.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ao(so.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(A=!A,r++):"."!==t||A?(n+=t,r++):(s(),r++)}if(s(),A)throw new Ao(so.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new No(t)}static emptyPath(){return new No([])}}class Eo{constructor(e){this.path=e}static fromPath(e){return new Eo(Bo.fromString(e))}static fromName(e){return new Eo(Bo.fromString(e).popFirst(5))}static empty(){return new Eo(Bo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Eo(new Bo(e.slice()))}}class Uo{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Uo.UNKNOWN_ID=-1;function Fo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=vo.fromTimestamp(1e9===r?new wo(n+1,0):new wo(n,r));return new Io(s,Eo.empty(),t)}function Qo(e){return new Io(e.readTime,e.key,-1)}class Io{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Io(vo.min(),Eo.empty(),-1)}static max(){return new Io(vo.max(),Eo.empty(),-1)}}function ko(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Eo.comparator(e.documentKey,t.documentKey),0!==n?n:yo(e.largestBatchId,t.largestBatchId))}const jo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class So{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function To(e){if(e.code!==so.FAILED_PRECONDITION||e.message!==jo)throw e;Ja("LocalStore","Unexpectedly lost primary lease")}class _o{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&to(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _o((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _o?t:_o.resolve(t)}catch(e){return _o.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_o.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_o.reject(t)}static resolve(e){return new _o((t,n)=>{t(e)})}static reject(e){return new _o((t,n)=>{n(e)})}static waitFor(e){return new _o((t,n)=>{let r=0,s=0,A=!1;e.forEach(e=>{++r,e.next(()=>{++s,A&&s===r&&t()},e=>n(e))}),A=!0,s===r&&t()})}static or(e){let t=_o.resolve(!1);for(const n of e)t=t.next(e=>e?_o.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new _o((n,r)=>{const s=e.length,A=new Array(s);let i=0;for(let a=0;a<s;a++){const o=a;t(e[o]).next(e=>{A[o]=e,++i,i===s&&n(A)},e=>r(e))}})}static doWhile(e,t){return new _o((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Do(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lo(e){return"IndexedDbTransactionError"===e.name}class Ho{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ro(e){return null==e}function Po(e){return 0===e&&1/e==-1/0}function Oo(e){return"number"==typeof e&&Number.isInteger(e)&&!Po(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ho.oe=-1;const Mo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ko=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vo=Ko,Go=[...Vo,"indexConfiguration","indexState","indexEntries"];function Wo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Yo{constructor(e,t){this.comparator=e,this.root=t||Jo.EMPTY}insert(e,t){return new Yo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jo.BLACK,null,null))}remove(e){return new Yo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xo(this.root,e,this.comparator,!0)}}class Xo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jo{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Jo.RED,this.left=null!=r?r:Jo.EMPTY,this.right=null!=s?s:Jo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Jo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Jo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw to();if(this.right.isRed())throw to();const e=this.left.check();if(e!==this.right.check())throw to();return e+(this.isRed()?0:1)}}Jo.EMPTY=null,Jo.RED=!0,Jo.BLACK=!1,Jo.EMPTY=new class{constructor(){this.size=0}get key(){throw to()}get value(){throw to()}get color(){throw to()}get left(){throw to()}get right(){throw to()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Jo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zo{constructor(e){this.comparator=e,this.data=new Yo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $o(this.data.getIterator())}getIteratorFrom(e){return new $o(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Zo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zo(this.comparator);return t.data=e,t}}class $o{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class el{constructor(e){this.fields=e,e.sort(No.comparator)}static empty(){return new el([])}unionWith(e){let t=new Zo(No.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new el(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class tl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new tl("Invalid base64 string: "+e):e}}(e);return new nl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new nl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nl.EMPTY_BYTE_STRING=new nl("");const rl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sl(e){if(no(!!e),"string"==typeof e){let t=0;const n=rl.exec(e);if(no(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Al(e.seconds),nanos:Al(e.nanos)}}function Al(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function il(e){return"string"==typeof e?nl.fromBase64String(e):nl.fromUint8Array(e)}function al(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ol(e){const t=e.mapValue.fields.__previous_value__;return al(t)?ol(t):t}function ll(e){const t=sl(e.mapValue.fields.__local_write_time__.timestampValue);return new wo(t.seconds,t.nanos)}class cl{constructor(e,t,n,r,s,A,i,a,o){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=A,this.autoDetectLongPolling=i,this.longPollingOptions=a,this.useFetchStreams=o}}class ul{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}const dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function hl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?al(e)?4:Ql(e)?9007199254740991:Ul(e)?10:11:to()}function fl(e,t){if(e===t)return!0;const n=hl(e);if(n!==hl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ll(e).isEqual(ll(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=sl(e.timestampValue),r=sl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return il(e.bytesValue).isEqual(il(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Al(e.geoPointValue.latitude)===Al(t.geoPointValue.latitude)&&Al(e.geoPointValue.longitude)===Al(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Al(e.integerValue)===Al(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Al(e.doubleValue),r=Al(t.doubleValue);return n===r?Po(n)===Po(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xo(e.arrayValue.values||[],t.arrayValue.values||[],fl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Wo(n)!==Wo(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!fl(n[s],r[s])))return!1;return!0}(e,t);default:return to()}}function pl(e,t){return void 0!==(e.values||[]).find(e=>fl(e,t))}function ml(e,t){if(e===t)return 0;const n=hl(e),r=hl(t);if(n!==r)return yo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Al(e.integerValue||e.doubleValue),r=Al(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gl(e.timestampValue,t.timestampValue);case 4:return gl(ll(e),ll(t));case 5:return yo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=il(e),r=il(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=yo(n[s],r[s]);if(0!==e)return e}return yo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=yo(Al(e.latitude),Al(t.latitude));return 0!==n?n:yo(Al(e.longitude),Al(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,A;const i=e.fields||{},a=t.fields||{},o=null===(n=i.value)||void 0===n?void 0:n.arrayValue,l=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=yo((null===(s=null==o?void 0:o.values)||void 0===s?void 0:s.length)||0,(null===(A=null==l?void 0:l.values)||void 0===A?void 0:A.length)||0);return 0!==c?c:yl(o,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===dl.mapValue&&t===dl.mapValue)return 0;if(e===dl.mapValue)return 1;if(t===dl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},A=Object.keys(s);r.sort(),A.sort();for(let i=0;i<r.length&&i<A.length;++i){const e=yo(r[i],A[i]);if(0!==e)return e;const t=ml(n[r[i]],s[A[i]]);if(0!==t)return t}return yo(r.length,A.length)}(e.mapValue,t.mapValue);default:throw to()}}function gl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yo(e,t);const n=sl(e),r=sl(t),s=yo(n.seconds,r.seconds);return 0!==s?s:yo(n.nanos,r.nanos)}function yl(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ml(n[s],r[s]);if(e)return e}return yo(n.length,r.length)}function xl(e){return wl(e)}function wl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=sl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return il(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Eo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=wl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(wl(e.fields[s]));return n+"}"}(e.mapValue):to()}function vl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function bl(e){return!!e&&"integerValue"in e}function Bl(e){return!!e&&"arrayValue"in e}function Cl(e){return!!e&&"nullValue"in e}function Nl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function El(e){return!!e&&"mapValue"in e}function Ul(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return zo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Fl(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ql(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Il{constructor(e){this.value=e}static empty(){return new Il({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!El(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(t)}setAll(e){let t=No.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Fl(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());El(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];El(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){zo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Il(Fl(this.value))}}function kl(e){const t=[];return zo(e.fields,(e,n)=>{const r=new No([e]);if(El(n)){const e=kl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new el(t)}class jl{constructor(e,t,n,r,s,A,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=A,this.documentState=i}static newInvalidDocument(e){return new jl(e,0,vo.min(),vo.min(),vo.min(),Il.empty(),0)}static newFoundDocument(e,t,n,r){return new jl(e,1,t,vo.min(),n,r,0)}static newNoDocument(e,t){return new jl(e,2,t,vo.min(),vo.min(),Il.empty(),0)}static newUnknownDocument(e,t){return new jl(e,3,t,vo.min(),vo.min(),Il.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Il.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Il.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Sl{constructor(e,t){this.position=e,this.inclusive=t}}function Tl(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const A=t[s],i=e.position[s];if(r=A.field.isKeyField()?Eo.comparator(Eo.fromName(i.referenceValue),n.key):ml(i,n.data.field(A.field)),"desc"===A.dir&&(r*=-1),0!==r)break}return r}function _l(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!fl(e.position[n],t.position[n]))return!1;return!0}class Dl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ll(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hl{}class Rl extends Hl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new zl(e,t,n):"array-contains"===t?new Jl(e,n):"in"===t?new Zl(e,n):"not-in"===t?new $l(e,n):"array-contains-any"===t?new ec(e,n):new Rl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ql(e,n):new Yl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ml(t,this.value)):null!==t&&hl(this.value)===hl(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return to()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pl extends Hl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Pl(e,t)}matches(e){return Ol(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ol(e){return"and"===e.op}function Ml(e){return Kl(e)&&Ol(e)}function Kl(e){for(const t of e.filters)if(t instanceof Pl)return!1;return!0}function Vl(e){if(e instanceof Rl)return e.field.canonicalString()+e.op.toString()+xl(e.value);if(Ml(e))return e.filters.map(e=>Vl(e)).join(",");{const t=e.filters.map(e=>Vl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Gl(e,t){return e instanceof Rl?function(e,t){return t instanceof Rl&&e.op===t.op&&e.field.isEqual(t.field)&&fl(e.value,t.value)}(e,t):e instanceof Pl?function(e,t){return t instanceof Pl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Gl(n,t.filters[r]),!0)}(e,t):void to()}function Wl(e){return e instanceof Rl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xl(e.value))}(e):e instanceof Pl?function(e){return e.op.toString()+" {"+e.getFilters().map(Wl).join(" ,")+"}"}(e):"Filter"}class zl extends Rl{constructor(e,t,n){super(e,t,n),this.key=Eo.fromName(n.referenceValue)}matches(e){const t=Eo.comparator(e.key,this.key);return this.matchesComparison(t)}}class ql extends Rl{constructor(e,t){super(e,"in",t),this.keys=Xl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Yl extends Rl{constructor(e,t){super(e,"not-in",t),this.keys=Xl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Eo.fromName(e.referenceValue))}class Jl extends Rl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bl(t)&&pl(t.arrayValue,this.value)}}class Zl extends Rl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pl(this.value.arrayValue,t)}}class $l extends Rl{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pl(this.value.arrayValue,t)}}class ec extends Rl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>pl(this.value.arrayValue,e))}}class tc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=A,this.endAt=i,this.ue=null}}function nc(e){return new tc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function rc(e){const t=ro(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Vl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ro(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>xl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>xl(e)).join(",")),t.ue=e}return t.ue}function sc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ll(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Gl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_l(e.startAt,t.startAt)&&_l(e.endAt,t.endAt)}function Ac(e){return Eo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ic{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=A,this.startAt=i,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ac(e,t,n,r,s,A,i,a){return new ic(e,t,n,r,s,A,i,a)}function oc(e){return new ic(e)}function lc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cc(e){return null!==e.collectionGroup}function uc(e){const t=ro(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Zo(No.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Dl(r,n))}),e.has(No.keyField().canonicalString())||t.ce.push(new Dl(No.keyField(),n))}return t.ce}function dc(e){const t=ro(e);return t.le||(t.le=hc(t,uc(e))),t.le}function hc(e,t){if("F"===e.limitType)return nc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Dl(e.field,t)});const n=e.endAt?new Sl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Sl(e.startAt.position,e.startAt.inclusive):null;return nc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fc(e,t){const n=e.filters.concat([t]);return new ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pc(e,t,n){return new ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mc(e,t){return sc(dc(e),dc(t))&&e.limitType===t.limitType}function gc(e){return"".concat(rc(dc(e)),"|lt:").concat(e.limitType)}function yc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Wl(e)).join(", "),"]")),Ro(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>xl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>xl(e)).join(",")),"Target(".concat(t,")")}(dc(e)),"; limitType=").concat(e.limitType,")")}function xc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Eo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of uc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Tl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Tl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uc(e),t))}(e,t)}function wc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vc(e){return(t,n)=>{let r=!1;for(const s of uc(e)){const e=bc(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function bc(e,t,n){const r=e.field.isKeyField()?Eo.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ml(r,s):to()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return to()}}class Bc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return qo(this.inner)}size(){return this.innerSize}}const Cc=new Yo(Eo.comparator);function Nc(){return Cc}const Ec=new Yo(Eo.comparator);function Uc(){let e=Ec;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Fc(e){let t=Ec;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Qc(){return kc()}function Ic(){return kc()}function kc(){return new Bc(e=>e.toString(),(e,t)=>e.isEqual(t))}const jc=new Yo(Eo.comparator),Sc=new Zo(Eo.comparator);function Tc(){let e=Sc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const _c=new Zo(yo);function Dc(){return _c}function Lc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Po(t)?"-0":t}}function Hc(e){return{integerValue:""+e}}function Rc(e,t){return Oo(t)?Hc(t):Lc(e,t)}class Pc{constructor(){this._=void 0}}function Oc(e,t,n){return e instanceof Vc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&al(t)&&(t=ol(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gc?Wc(e,t):e instanceof zc?qc(e,t):function(e,t){const n=Kc(e,t),r=Xc(n)+Xc(e.Pe);return bl(n)&&bl(e.Pe)?Hc(r):Lc(e.serializer,r)}(e,t)}function Mc(e,t,n){return e instanceof Gc?Wc(e,t):e instanceof zc?qc(e,t):n}function Kc(e,t){return e instanceof Yc?function(e){return bl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Vc extends Pc{}class Gc extends Pc{constructor(e){super(),this.elements=e}}function Wc(e,t){const n=Jc(t);for(const r of e.elements)n.some(e=>fl(e,r))||n.push(r);return{arrayValue:{values:n}}}class zc extends Pc{constructor(e){super(),this.elements=e}}function qc(e,t){let n=Jc(t);for(const r of e.elements)n=n.filter(e=>!fl(e,r));return{arrayValue:{values:n}}}class Yc extends Pc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Xc(e){return Al(e.integerValue||e.doubleValue)}function Jc(e){return Bl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Zc{constructor(e,t){this.version=e,this.transformResults=t}}class $c{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $c}static exists(e){return new $c(void 0,e)}static updateTime(e){return new $c(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class tu{}function nu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new du(e.key,$c.none()):new au(e.key,e.data,$c.none());{const n=e.data,r=Il.empty();let s=new Zo(No.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ou(e.key,r,new el(s.toArray()),$c.none())}}function ru(e,t,n){e instanceof au?function(e,t,n){const r=e.value.clone(),s=cu(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ou?function(e,t,n){if(!eu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cu(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(lu(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function su(e,t,n,r){return e instanceof au?function(e,t,n,r){if(!eu(e.precondition,t))return n;const s=e.value.clone(),A=uu(e.fieldTransforms,r,t);return s.setAll(A),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ou?function(e,t,n,r){if(!eu(e.precondition,t))return n;const s=uu(e.fieldTransforms,r,t),A=t.data;return A.setAll(lu(e)),A.setAll(s),t.convertToFoundDocument(t.version,A).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return eu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Au(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Kc(r.transform,e||null);null!=s&&(null===n&&(n=Il.empty()),n.set(r.field,s))}return n||null}function iu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xo(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gc&&t instanceof Gc||e instanceof zc&&t instanceof zc?xo(e.elements,t.elements,fl):e instanceof Yc&&t instanceof Yc?fl(e.Pe,t.Pe):e instanceof Vc&&t instanceof Vc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class au extends tu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ou extends tu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lu(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function cu(e,t,n){const r=new Map;no(e.length===n.length);for(let s=0;s<n.length;s++){const A=e[s],i=A.transform,a=t.data.field(A.field);r.set(A.field,Mc(i,a,n[s]))}return r}function uu(e,t,n){const r=new Map;for(const s of e){const e=s.transform,A=n.data.field(s.field);r.set(s.field,Oc(e,A,t))}return r}class du extends tu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hu extends tu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ru(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=su(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=su(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ic();return this.mutations.forEach(r=>{const s=e.get(r.key),A=s.overlayedDocument;let i=this.applyToLocalView(A,s.mutatedFields);i=t.has(r.key)?null:i;const a=nu(A,i);null!==a&&n.set(r.key,a),A.isValidDocument()||A.convertToNoDocument(vo.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Tc())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,(e,t)=>iu(e,t))&&xo(this.baseMutations,e.baseMutations,(e,t)=>iu(e,t))}}class pu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){no(e.mutations.length===n.length);let r=jc;const s=e.mutations;for(let A=0;A<s.length;A++)r=r.insert(s[A].key,n[A].version);return new pu(e,t,n,r)}}class mu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class gu{constructor(e,t){this.count=e,this.unchangedNames=t}}var yu,xu;function wu(e){switch(e){default:return to();case so.CANCELLED:case so.UNKNOWN:case so.DEADLINE_EXCEEDED:case so.RESOURCE_EXHAUSTED:case so.INTERNAL:case so.UNAVAILABLE:case so.UNAUTHENTICATED:return!1;case so.INVALID_ARGUMENT:case so.NOT_FOUND:case so.ALREADY_EXISTS:case so.PERMISSION_DENIED:case so.FAILED_PRECONDITION:case so.ABORTED:case so.OUT_OF_RANGE:case so.UNIMPLEMENTED:case so.DATA_LOSS:return!0}}function vu(e){if(void 0===e)return Za("GRPC error has no .code"),so.UNKNOWN;switch(e){case yu.OK:return so.OK;case yu.CANCELLED:return so.CANCELLED;case yu.UNKNOWN:return so.UNKNOWN;case yu.DEADLINE_EXCEEDED:return so.DEADLINE_EXCEEDED;case yu.RESOURCE_EXHAUSTED:return so.RESOURCE_EXHAUSTED;case yu.INTERNAL:return so.INTERNAL;case yu.UNAVAILABLE:return so.UNAVAILABLE;case yu.UNAUTHENTICATED:return so.UNAUTHENTICATED;case yu.INVALID_ARGUMENT:return so.INVALID_ARGUMENT;case yu.NOT_FOUND:return so.NOT_FOUND;case yu.ALREADY_EXISTS:return so.ALREADY_EXISTS;case yu.PERMISSION_DENIED:return so.PERMISSION_DENIED;case yu.FAILED_PRECONDITION:return so.FAILED_PRECONDITION;case yu.ABORTED:return so.ABORTED;case yu.OUT_OF_RANGE:return so.OUT_OF_RANGE;case yu.UNIMPLEMENTED:return so.UNIMPLEMENTED;case yu.DATA_LOSS:return so.DATA_LOSS;default:return to()}}(xu=yu||(yu={}))[xu.OK=0]="OK",xu[xu.CANCELLED=1]="CANCELLED",xu[xu.UNKNOWN=2]="UNKNOWN",xu[xu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xu[xu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xu[xu.NOT_FOUND=5]="NOT_FOUND",xu[xu.ALREADY_EXISTS=6]="ALREADY_EXISTS",xu[xu.PERMISSION_DENIED=7]="PERMISSION_DENIED",xu[xu.UNAUTHENTICATED=16]="UNAUTHENTICATED",xu[xu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xu[xu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xu[xu.ABORTED=10]="ABORTED",xu[xu.OUT_OF_RANGE=11]="OUT_OF_RANGE",xu[xu.UNIMPLEMENTED=12]="UNIMPLEMENTED",xu[xu.INTERNAL=13]="INTERNAL",xu[xu.UNAVAILABLE=14]="UNAVAILABLE",xu[xu.DATA_LOSS=15]="DATA_LOSS";let bu=null;function Bu(){return new TextEncoder}const Cu=new ja([4294967295,4294967295],0);function Nu(e){const t=Bu().encode(e),n=new Sa;return n.update(t),new Uint8Array(n.digest())}function Eu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),A=t.getUint32(12,!0);return[new ja([n,r],0),new ja([s,A],0)]}class Uu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Fu("Invalid padding: ".concat(t));if(n<0)throw new Fu("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Fu("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Fu("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=ja.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ja.fromNumber(n)));return 1===r.compare(Cu)&&(r=new ja([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Nu(e),[n,r]=Eu(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),A=new Uu(s,r,t);return n.forEach(e=>A.insert(e)),A}insert(e){if(0===this.Ie)return;const t=Nu(e),[n,r]=Eu(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Qu(vo.min(),r,new Yo(yo),Nc(),Tc())}}class Iu{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Iu(n,t,Tc(),Tc(),Tc())}}class ku{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class ju{constructor(e,t){this.targetId=e,this.me=t}}class Su{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Tu{constructor(){this.fe=0,this.ge=Lu(),this.pe=nl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Tc(),t=Tc(),n=Tc();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:to()}}),new Iu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Lu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,no(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _u{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nc(),this.qe=Du(),this.Qe=new Yo(yo)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:to()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Ac(s))if(0===n){const e=new Eo(s.path);this.Ue(t,e,jl.newNoDocument(e,vo.min()))}else no(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==bu||bu.et(function(e,t,n,r,s){var A,i,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(A=null==d?void 0:d.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(o=null===(a=null===(i=null==d?void 0:d.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(c=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let A,i;try{A=il(n).toUint8Array()}catch(e){if(e instanceof tl)return $a("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Uu(A,r,s)}catch(e){return $a(e instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.Ie?null:i}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),A="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(A)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Ac(s.target)){const t=new Eo(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,jl.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Tc();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Qu(e,t,this.Qe,this.ke,n);return this.ke=Nc(),this.qe=Du(),this.Qe=new Yo(yo),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Tu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Zo(yo),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ja("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Du(){return new Yo(Eo.comparator)}function Lu(){return new Yo(Eo.comparator)}const Hu={asc:"ASCENDING",desc:"DESCENDING"},Ru={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pu={and:"AND",or:"OR"};class Ou{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mu(e,t){return e.useProto3Json||Ro(t)?t:{value:t}}function Ku(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gu(e,t){return Ku(e,t.toTimestamp())}function Wu(e){return no(!!e),vo.fromTimestamp(function(e){const t=sl(e);return new wo(t.seconds,t.nanos)}(e))}function zu(e,t){return qu(e,t).canonicalString()}function qu(e,t){const n=function(e){return new Bo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Yu(e){const t=Bo.fromString(e);return no(pd(t)),t}function Xu(e,t){return zu(e.databaseId,t.path)}function Ju(e,t){const n=Yu(t);if(n.get(1)!==e.databaseId.projectId)throw new Ao(so.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ao(so.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Eo(td(n))}function Zu(e,t){return zu(e.databaseId,t)}function $u(e){const t=Yu(e);return 4===t.length?Bo.emptyPath():td(t)}function ed(e){return new Bo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function td(e){return no(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nd(e,t,n){return{name:Xu(e,t),fields:n.value.mapValue.fields}}function rd(e,t){let n;if(t instanceof au)n={update:nd(e,t.key,t.value)};else if(t instanceof du)n={delete:Xu(e,t.key)};else if(t instanceof ou)n={update:nd(e,t.key,t.data),updateMask:fd(t.fieldMask)};else{if(!(t instanceof hu))return to();n={verify:Xu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Vc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw to()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Gu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:to()}(e,t.precondition)),n}function sd(e,t){return{documents:[Zu(e,t.path)]}}function Ad(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zu(e,s);const A=function(e){if(0!==e.length)return hd(Pl.create(e,"and"))}(t.filters);A&&(n.structuredQuery.where=A);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ud(e.field),direction:od(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const a=Mu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function id(e){let t=$u(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){no(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let A=[];n.where&&(A=function(e){const t=ad(e);return t instanceof Pl&&Ml(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map(e=>function(e){return new Dl(dd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ro(t)?null:t}(n.limit));let o=null;n.startAt&&(o=function(e){const t=!!e.before,n=e.values||[];return new Sl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Sl(n,t)}(n.endAt)),ac(t,s,i,A,a,"F",o,l)}function ad(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dd(e.unaryFilter.field);return Rl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dd(e.unaryFilter.field);return Rl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dd(e.unaryFilter.field);return Rl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dd(e.unaryFilter.field);return Rl.create(s,"!=",{nullValue:"NULL_VALUE"});default:return to()}}(e):void 0!==e.fieldFilter?function(e){return Rl.create(dd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return to()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pl.create(e.compositeFilter.filters.map(e=>ad(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return to()}}(e.compositeFilter.op))}(e):to()}function od(e){return Hu[e]}function ld(e){return Ru[e]}function cd(e){return Pu[e]}function ud(e){return{fieldPath:e.canonicalString()}}function dd(e){return No.fromServerFormat(e.fieldPath)}function hd(e){return e instanceof Rl?function(e){if("=="===e.op){if(Nl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NAN"}};if(Cl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NOT_NAN"}};if(Cl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ud(e.field),op:ld(e.op),value:e.value}}}(e):e instanceof Pl?function(e){const t=e.getFilters().map(e=>hd(e));return 1===t.length?t[0]:{compositeFilter:{op:cd(e.op),filters:t}}}(e):to()}function fd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function pd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class md{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vo.min(),A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vo.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=A,this.resumeToken=i,this.expectedCount=a}withSequenceNumber(e){return new md(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new md(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new md(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new md(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gd{constructor(e){this.ct=e}}function yd(e){const t=id({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pc(t,t.limit,"L"):t}class xd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Al(e.integerValue));else if("doubleValue"in e){const n=Al(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Po(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=sl(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(il(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ql(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ul(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):to()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const A="value",i=(null===(r=null===(n=s[A].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Al(i)),this.Vt(A,t),this.Tt(s[A],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Eo.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}xd.vt=new xd;class wd{constructor(){this.un=new vd}addToCollectionParentIndex(e,t){return this.un.add(t),_o.resolve()}getCollectionParents(e,t){return _o.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return _o.resolve()}deleteFieldIndex(e,t){return _o.resolve()}deleteAllFieldIndexes(e){return _o.resolve()}createTargetIndexes(e,t){return _o.resolve()}getDocumentsMatchingTarget(e,t){return _o.resolve(null)}getIndexType(e,t){return _o.resolve(0)}getFieldIndexes(e,t){return _o.resolve([])}getNextCollectionGroupToUpdate(e){return _o.resolve(null)}getMinOffset(e,t){return _o.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,t){return _o.resolve(Io.min())}updateCollectionGroup(e,t,n){return _o.resolve()}updateIndexEntries(e,t){return _o.resolve()}}class vd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zo(Bo.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Zo(Bo.comparator)).toArray()}}new Uint8Array(0);class bd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new bd(e,bd.DEFAULT_COLLECTION_PERCENTILE,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}bd.DEFAULT_COLLECTION_PERCENTILE=10,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bd.DEFAULT=new bd(41943040,bd.DEFAULT_COLLECTION_PERCENTILE,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bd.DISABLED=new bd(-1,0,0);class Bd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bd(0)}static kn(){return new Bd(-1)}}class Cd{constructor(){this.changes=new Bc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_o.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ed{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&su(n.mutation,e,el.empty(),wo.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Tc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tc();const r=Qc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Uc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Qc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Tc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Nc();const A=kc(),i=kc();return t.forEach((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof ou)?s=s.insert(t.key,t):void 0!==i?(A.set(t.key,i.mutation.getFieldMask()),su(i.mutation,t,i.mutation.getFieldMask(),wo.now())):A.set(t.key,el.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>A.set(e,t)),t.forEach((e,t)=>{var n;return i.set(e,new Nd(t,null!==(n=A.get(e))&&void 0!==n?n:null))}),i))}recalculateAndSaveOverlays(e,t){const n=kc();let r=new Yo((e,t)=>e-t),s=Tc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const A=t.get(e);if(null===A)return;let i=n.get(e)||el.empty();i=s.applyToLocalView(A,i),n.set(e,i);const a=(r.get(s.batchId)||Tc()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const A=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),a=r.key,o=r.value,l=Ic();o.forEach(e=>{if(!s.has(e)){const r=nu(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),A.push(this.documentOverlayCache.saveOverlays(e,a,l))}return _o.waitFor(A)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Eo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const A=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):_o.resolve(Qc());let i=-1,a=s;return A.next(t=>_o.forEach(t,(t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?_o.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,Tc())).next(e=>({batchId:i,changes:Fc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Eo(t)).next(e=>{let t=Uc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let A=Uc();return this.indexManager.getCollectionParents(e,s).next(i=>_o.forEach(i,i=>{const a=function(e,t){return new ic(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{A=A.insert(e,t)})})}).next(()=>A))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(A=>(s=A,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,jl.newInvalidDocument(r)))});let n=Uc();return e.forEach((e,r)=>{const A=s.get(e);void 0!==A&&su(A.mutation,r,el.empty(),wo.now()),xc(t,r)&&(n=n.insert(e,r))}),n})}}class Ud{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return _o.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Wu(e.createTime)}}(t)),_o.resolve()}getNamedQuery(e,t){return _o.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:yd(e.bundledQuery),readTime:Wu(e.readTime)}}(t)),_o.resolve()}}class Fd{constructor(){this.overlays=new Yo(Eo.comparator),this.Ir=new Map}getOverlay(e,t){return _o.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Qc();return _o.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),_o.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),_o.resolve()}getOverlaysForCollection(e,t,n){const r=Qc(),s=t.length+1,A=new Eo(t.child("")),i=this.overlays.getIteratorFrom(A);for(;i.hasNext();){const e=i.getNext().value,A=e.getKey();if(!t.isPrefixOf(A.path))break;A.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return _o.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Yo((e,t)=>e-t);const A=this.overlays.getIterator();for(;A.hasNext();){const e=A.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Qc(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Qc(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>i.set(e,t)),!(i.size()>=r)););return _o.resolve(i)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new mu(t,n));let s=this.Ir.get(t);void 0===s&&(s=Tc(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Qd{constructor(){this.sessionToken=nl.EMPTY_BYTE_STRING}getSessionToken(e){return _o.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_o.resolve()}}class Id{constructor(){this.Tr=new Zo(kd.Er),this.dr=new Zo(kd.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new kd(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new kd(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Eo(new Bo([])),n=new kd(t,e),r=new kd(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Eo(new Bo([])),n=new kd(t,e),r=new kd(t,e+1);let s=Tc();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new kd(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kd{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Eo.comparator(e.key,t.key)||yo(e.wr,t.wr)}static Ar(e,t){return yo(e.wr,t.wr)||Eo.comparator(e.key,t.key)}}class jd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Zo(kd.Er)}checkEmpty(e){return _o.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const A=new fu(s,t,n,r);this.mutationQueue.push(A);for(const i of r)this.br=this.br.add(new kd(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return _o.resolve(A)}lookupMutationBatch(e,t){return _o.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return _o.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _o.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return _o.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kd(t,0),r=new kd(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),_o.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zo(yo);return t.forEach(e=>{const t=new kd(e,0),r=new kd(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),_o.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Eo.isDocumentKey(s)||(s=s.child(""));const A=new kd(new Eo(s),0);let i=new Zo(yo);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.wr)),!0)},A),_o.resolve(this.Cr(i))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){no(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return _o.forEach(t.mutations,r=>{const s=new kd(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new kd(t,0),r=this.br.firstAfterOrEqual(n);return _o.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_o.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sd{constructor(e){this.Mr=e,this.docs=new Yo(Eo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,A=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:A}),this.size+=A-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _o.resolve(n?n.document.mutableCopy():jl.newInvalidDocument(t))}getEntries(e,t){let n=Nc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():jl.newInvalidDocument(e))}),_o.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Nc();const A=t.path,i=new Eo(A.child("")),a=this.docs.getIteratorFrom(i);for(;a.hasNext();){const{key:e,value:{document:i}}=a.getNext();if(!A.isPrefixOf(e.path))break;e.path.length>A.length+1||ko(Qo(i),n)<=0||(r.has(i.key)||xc(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return _o.resolve(s)}getAllFromCollectionGroup(e,t,n,r){to()}Or(e,t){return _o.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Td(this)}getSize(e){return _o.resolve(this.size)}}class Td extends Cd{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),_o.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class _d{constructor(e){this.persistence=e,this.Nr=new Bc(e=>rc(e),sc),this.lastRemoteSnapshotVersion=vo.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Id,this.targetCount=0,this.kr=Bd.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),_o.resolve()}getLastRemoteSnapshotVersion(e){return _o.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _o.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),_o.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),_o.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Bd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,_o.resolve()}updateTargetData(e,t){return this.Kn(t),_o.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,_o.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((A,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.Nr.delete(A),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)}),_o.waitFor(s).next(()=>r)}getTargetCount(e){return _o.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return _o.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),_o.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),_o.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),_o.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return _o.resolve(n)}containsKey(e,t){return _o.resolve(this.Br.containsKey(t))}}class Dd{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ho(0),this.Kr=!1,this.Kr=!0,this.$r=new Qd,this.referenceDelegate=e(this),this.Ur=new _d(this),this.indexManager=new wd,this.remoteDocumentCache=function(e){return new Sd(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new gd(t),this.Gr=new Ud(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new jd(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ja("MemoryPersistence","Starting transaction:",e);const r=new Ld(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return _o.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Ld extends So{constructor(e){super(),this.currentSequenceNumber=e}}class Hd{constructor(e){this.persistence=e,this.Jr=new Id,this.Yr=null}static Zr(e){return new Hd(e)}get Xr(){if(this.Yr)return this.Yr;throw to()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),_o.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),_o.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),_o.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _o.forEach(this.Xr,n=>{const r=Eo.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,vo.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return _o.or([()=>_o.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Rd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Tc(),r=Tc();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Rd(e,t.fromCache,n,r)}}class Pd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Od{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=mn()?8:Do(pn())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Pd;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Xa()<=_n.DEBUG&&Ja("QueryEngine","SDK will not create cache indexes for query:",yc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),_o.resolve()):(Xa()<=_n.DEBUG&&Ja("QueryEngine","Query:",yc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Xa()<=_n.DEBUG&&Ja("QueryEngine","The SDK decides to create cache indexes for query:",yc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dc(t))):_o.resolve())}Yi(e,t){if(lc(t))return _o.resolve(null);let n=dc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=pc(t,null,"F"),n=dc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Tc(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const A=this.ts(t,r);return this.ns(t,A,s,n.readTime)?this.Yi(e,pc(t,null,"F")):this.rs(e,A,t,n)}))})))}Zi(e,t,n,r){return lc(t)||r.isEqual(vo.min())?_o.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const A=this.ts(t,s);return this.ns(t,A,n,r)?_o.resolve(null):(Xa()<=_n.DEBUG&&Ja("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yc(t)),this.rs(e,A,t,Fo(r,-1)).next(e=>e))})}ts(e,t){let n=new Zo(vc(e));return t.forEach((t,r)=>{xc(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Xa()<=_n.DEBUG&&Ja("QueryEngine","Using full collection scan to execute query:",yc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Io.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Md{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Yo(yo),this._s=new Bc(e=>rc(e),sc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ed(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Kd(e,t,n,r){return new Md(e,t,n,r)}async function Vd(e,t){const n=ro(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],A=[];let i=Tc();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){A.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:A}))})})}function Gd(e){const t=ro(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Wd(e,t,n){let r=Tc(),s=Tc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Nc();return n.forEach((n,A)=>{const i=e.get(n);A.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),A.isNoDocument()&&A.version.isEqual(vo.min())?(t.removeEntry(n,A.readTime),r=r.insert(n,A)):!i.isValidDocument()||A.version.compareTo(i.version)>0||0===A.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(A),r=r.insert(n,A)):Ja("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",A.version)}),{Ps:r,Is:s}})}function zd(e,t){const n=ro(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function qd(e,t){const n=ro(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,_o.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new md(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Yd(e,t,n){const r=ro(e),s=r.os.get(t),A=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",A,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Lo(e))throw e;Ja("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function Xd(e,t,n){const r=ro(e);let s=vo.min(),A=Tc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ro(e),s=r._s.get(n);return void 0!==s?_o.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,dc(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{A=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:vo.min(),n?A:Tc())).next(e=>(Jd(r,wc(t),e),{documents:e,Ts:A})))}function Jd(e,t,n){let r=e.us.get(t)||vo.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Zd{constructor(){this.activeTargetIds=Dc()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $d{constructor(){this.so=new Zd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eh{_o(e){}shutdown(){}}class th{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ja("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ja("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nh=null;function rh(){return null===nh?nh=268435456+Math.round(2147483648*Math.random()):nh++,"0x"+nh.toString(16)}const sh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ah{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ih="WebChannelConnection";class ah extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const A=rh(),i=this.xo(e,t.toUriEncodedString());Ja("RestConnection","Sending RPC '".concat(e,"' ").concat(A,":"),i,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,s),this.No(e,i,a,n).then(t=>(Ja("RestConnection","Received RPC '".concat(e,"' ").concat(A,": "),t),t),t=>{throw $a("RestConnection","RPC '".concat(e,"' ").concat(A," failed with error: "),t,"url: ",i,"request:",n),t})}Lo(e,t,n,r,s,A){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=sh[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=rh();return new Promise((A,i)=>{const a=new Da;a.setWithCredentials(!0),a.listenOnce(Ha.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ra.NO_ERROR:const t=a.getResponseJson();Ja(ih,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),A(t);break;case Ra.TIMEOUT:Ja(ih,"RPC '".concat(e,"' ").concat(s," timed out")),i(new Ao(so.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:const n=a.getStatus();if(Ja(ih,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(so).indexOf(t)>=0?t:so.UNKNOWN}(t.status);i(new Ao(e,t.message))}else i(new Ao(so.UNKNOWN,"Server responded with status "+a.getStatus()))}else i(new Ao(so.UNAVAILABLE,"Connection failed."));break;default:to()}}finally{Ja(ih,"RPC '".concat(e,"' ").concat(s," completed."))}});const o=JSON.stringify(r);Ja(ih,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",o,n,15)})}Bo(e,t,n){const r=rh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],A=Ka(),i=Ma(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;void 0!==o&&(a.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");Ja(ih,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const c=A.createWebChannel(l,a);let u=!1,d=!1;const h=new Ah({Io:t=>{d?Ja(ih,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(Ja(ih,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),u=!0),Ja(ih,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},To:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(c,La.EventType.OPEN,()=>{d||(Ja(ih,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.yo())}),f(c,La.EventType.CLOSE,()=>{d||(d=!0,Ja(ih,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.So())}),f(c,La.EventType.ERROR,t=>{d||(d=!0,$a(ih,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.So(new Ao(so.UNAVAILABLE,"The operation could not be completed")))}),f(c,La.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];no(!!s);const A=s,i=A.error||(null===(n=A[0])||void 0===n?void 0:n.error);if(i){Ja(ih,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=yu[e];if(void 0!==t)return vu(t)}(t),s=i.message;void 0===n&&(n=so.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),d=!0,h.So(new Ao(n,s)),c.close()}else Ja(ih,"RPC '".concat(e,"' stream ").concat(r," received:"),s),h.bo(s)}}),f(i,Oa.STAT_EVENT,t=>{t.stat===Pa.PROXY?Ja(ih,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Pa.NOPROXY&&Ja(ih,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{h.wo()},0),h}}function oh(){return"undefined"!=typeof document?document:null}function lh(e){return new Ou(e,!0)}class ch{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Ja("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class uh{constructor(e,t,n,r,s,A,i,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=A,this.appCheckCredentialsProvider=i,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ch(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===so.RESOURCE_EXHAUSTED?(Za(t.toString()),Za("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===so.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Ao(so.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ja("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ja("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dh extends uh{constructor(e,t,n,r,s,A){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,A),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:to()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],A=function(e,t){return e.useProto3Json?(no(void 0===t||"string"==typeof t),nl.fromBase64String(t||"")):(no(void 0===t||t instanceof Buffer||t instanceof Uint8Array),nl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,a=i&&function(e){const t=void 0===e.code?so.UNKNOWN:vu(e.code);return new Ao(t,e.message||"")}(i);n=new Su(r,s,A,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ju(e,r.document.name),A=Wu(r.document.updateTime),i=r.document.createTime?Wu(r.document.createTime):vo.min(),a=new Il({mapValue:{fields:r.document.fields}}),o=jl.newFoundDocument(s,A,i,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new ku(l,c,o.key,o)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ju(e,r.document),A=r.readTime?Wu(r.readTime):vo.min(),i=jl.newNoDocument(s,A),a=r.removedTargetIds||[];n=new ku([],a,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ju(e,r.document),A=r.removedTargetIds||[];n=new ku([],A,s,null)}else{if(!("filter"in t))return to();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,A=new gu(r,s),i=e.targetId;n=new ju(i,A)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vo.min():t.readTime?Wu(t.readTime):vo.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ed(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ac(r)?{documents:sd(e,r)}:{query:Ad(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Vu(e,t.resumeToken);const r=Mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vo.min())>0){n.readTime=Ku(e,t.snapshotVersion.toTimestamp());const r=Mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return to()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ed(this.serializer),t.removeTarget=e,this.a_(t)}}class hh extends uh{constructor(e,t,n,r,s,A){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,A),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return no(!!e.streamToken),this.lastStreamToken=e.streamToken,no(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){no(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(no(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Wu(e.updateTime):Wu(t);return n.isEqual(vo.min())&&(n=Wu(t)),new Zc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Wu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ed(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>rd(this.serializer,e))};this.a_(t)}}class fh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ao(so.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[A,i]=s;return this.connection.Mo(e,qu(t,n),r,A,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===so.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ao(so.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(A=>{let[i,a]=A;return this.connection.Lo(e,qu(t,n),r,i,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===so.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ao(so.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ph{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Za(t),this.D_=!1):Ja("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class mh{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Nh(this)&&(Ja("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ro(e);t.L_.add(4),await yh(t),t.q_.set("Unknown"),t.L_.delete(4),await gh(t)}(this))})}),this.q_=new ph(n,r)}}async function gh(e){if(Nh(e))for(const t of e.B_)await t(!0)}async function yh(e){for(const t of e.B_)await t(!1)}function xh(e,t){const n=ro(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Ch(n)?Bh(n):Vh(n).r_()&&vh(n,t))}function wh(e,t){const n=ro(e),r=Vh(n);n.N_.delete(t),r.r_()&&bh(n,t),0===n.N_.size&&(r.r_()?r.o_():Nh(n)&&n.q_.set("Unknown"))}function vh(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Vh(e).A_(t)}function bh(e,t){e.Q_.xe(t),Vh(e).R_(t)}function Bh(e){e.Q_=new _u({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Vh(e).start(),e.q_.v_()}function Ch(e){return Nh(e)&&!Vh(e).n_()&&e.N_.size>0}function Nh(e){return 0===ro(e).L_.size}function Eh(e){e.Q_=void 0}async function Uh(e){e.q_.set("Online")}async function Fh(e){e.N_.forEach((t,n)=>{vh(e,t)})}async function Qh(e,t){Eh(e),Ch(e)?(e.q_.M_(t),Bh(e)):e.q_.set("Unknown")}async function Ih(e,t,n){if(e.q_.set("Online"),t instanceof Su&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Ja("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await kh(e,n)}else if(t instanceof ku?e.Q_.Ke(t):t instanceof ju?e.Q_.He(t):e.Q_.We(t),!n.isEqual(vo.min()))try{const t=await Gd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(nl.EMPTY_BYTE_STRING,r.snapshotVersion)),bh(e,t);const s=new md(r.target,t,n,r.sequenceNumber);vh(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ja("RemoteStore","Failed to raise snapshot:",t),await kh(e,t)}}async function kh(e,t,n){if(!Lo(t))throw t;e.L_.add(1),await yh(e),e.q_.set("Offline"),n||(n=()=>Gd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ja("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await gh(e)})}function jh(e,t){return t().catch(n=>kh(e,n,t))}async function Sh(e){const t=ro(e),n=Gh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Th(t);)try{const e=await zd(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,_h(t,e)}catch(e){await kh(t,e)}Dh(t)&&Lh(t)}function Th(e){return Nh(e)&&e.O_.length<10}function _h(e,t){e.O_.push(t);const n=Gh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Dh(e){return Nh(e)&&!Gh(e).n_()&&e.O_.length>0}function Lh(e){Gh(e).start()}async function Hh(e){Gh(e).p_()}async function Rh(e){const t=Gh(e);for(const n of e.O_)t.m_(n.mutations)}async function Ph(e,t,n){const r=e.O_.shift(),s=pu.from(r,t,n);await jh(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Sh(e)}async function Oh(e,t){t&&Gh(e).V_&&await async function(e,t){if(function(e){return wu(e)&&e!==so.ABORTED}(t.code)){const n=e.O_.shift();Gh(e).s_(),await jh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Sh(e)}}(e,t),Dh(e)&&Lh(e)}async function Mh(e,t){const n=ro(e);n.asyncQueue.verifyOperationInProgress(),Ja("RemoteStore","RemoteStore received new credentials");const r=Nh(n);n.L_.add(3),await yh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await gh(n)}async function Kh(e,t){const n=ro(e);t?(n.L_.delete(2),await gh(n)):t||(n.L_.add(2),await yh(n),n.q_.set("Unknown"))}function Vh(e){return e.K_||(e.K_=function(e,t,n){const r=ro(e);return r.w_(),new dh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Uh.bind(null,e),Ro:Fh.bind(null,e),mo:Qh.bind(null,e),d_:Ih.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Ch(e)?Bh(e):e.q_.set("Unknown")):(await e.K_.stop(),Eh(e))})),e.K_}function Gh(e){return e.U_||(e.U_=function(e,t,n){const r=ro(e);return r.w_(),new hh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hh.bind(null,e),mo:Oh.bind(null,e),f_:Rh.bind(null,e),g_:Ph.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Sh(e)):(await e.U_.stop(),e.O_.length>0&&(Ja("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Wh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const A=Date.now()+n,i=new Wh(e,t,A,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ao(so.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zh(e,t){if(Za("AsyncQueue","".concat(t,": ").concat(e)),Lo(e))return new Ao(so.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Eo.comparator(t.key,n.key):(e,t)=>Eo.comparator(e.key,t.key),this.keyedMap=Uc(),this.sortedSet=new Yo(this.comparator)}static emptySet(e){return new qh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yh{constructor(){this.W_=new Yo(Eo.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):to():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Xh{constructor(e,t,n,r,s,A,i,a,o){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=A,this.syncStateChanged=i,this.excludesMetadataChanges=a,this.hasCachedResults=o}static fromInitialDocuments(e,t,n,r,s){const A=[];return t.forEach(e=>{A.push({type:0,doc:e})}),new Xh(e,t,qh.emptySet(t),A,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Jh{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Zh{constructor(){this.queries=$h(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=ro(e),r=n.queries;n.queries=$h(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Ao(so.ABORTED,"Firestore shutting down"))}}function $h(){return new Bc(e=>gc(e),mc)}async function ef(e,t){const n=ro(e);let r=3;const s=t.query;let A=n.queries.get(s);A?!A.H_()&&t.J_()&&(r=2):(A=new Jh,r=t.J_()?0:1);try{switch(r){case 0:A.z_=await n.onListen(s,!0);break;case 1:A.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=zh(e,"Initialization of query '".concat(yc(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,A),A.j_.push(t),t.Z_(n.onlineState),A.z_&&t.X_(A.z_)&&sf(n)}async function tf(e,t){const n=ro(e),r=t.query;let s=3;const A=n.queries.get(r);if(A){const e=A.j_.indexOf(t);e>=0&&(A.j_.splice(e,1),0===A.j_.length?s=t.J_()?0:1:!A.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nf(e,t){const n=ro(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&sf(n)}function rf(e,t,n){const r=ro(e),s=r.queries.get(t);if(s)for(const A of s.j_)A.onError(n);r.queries.delete(t)}function sf(e){e.Y_.forEach(e=>{e.next()})}var Af,af;(af=Af||(Af={})).ea="default",af.Cache="cache";class of{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Xh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Af.Cache}}class lf{constructor(e){this.key=e}}class cf{constructor(e){this.key=e}}class uf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Tc(),this.mutatedKeys=Tc(),this.Aa=vc(e),this.Ra=new qh(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Yh,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,A=r,i=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,o="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),c=xc(this.query,t)?t:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let h=!1;l&&c?l.data.isEqual(c.data)?u!==d&&(n.track({type:3,doc:c}),h=!0):this.ga(l,c)||(n.track({type:2,doc:c}),h=!0,(a&&this.Aa(c,a)>0||o&&this.Aa(c,o)<0)&&(i=!0)):!l&&c?(n.track({type:0,doc:c}),h=!0):l&&!c&&(n.track({type:1,doc:l}),h=!0,(a||o)&&(i=!0)),h&&(c?(A=A.add(c),s=d?s.add(e):s.delete(e)):(A=A.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;A.size>this.query.limit;){const e="F"===this.query.limitType?A.last():A.first();A=A.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:A,fa:n,ns:i,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const A=e.fa.G_();A.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return to()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const i=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,o=a!==this.Ea;return this.Ea=a,0!==A.length||o?{snapshot:new Xh(this.query,e.Ra,s,A,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:i}:{wa:i}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Tc(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new cf(e))}),this.da.forEach(n=>{e.has(n)||t.push(new lf(n))}),t}ba(e){this.Ta=e.Ts,this.da=Tc();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Xh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class df{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hf{constructor(e){this.key=e,this.va=!1}}class ff{constructor(e,t,n,r,s,A){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=A,this.Ca={},this.Fa=new Bc(e=>gc(e),mc),this.Ma=new Map,this.xa=new Set,this.Oa=new Yo(Eo.comparator),this.Na=new Map,this.La=new Id,this.Ba={},this.ka=new Map,this.qa=Bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function pf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Df(e);let s;const A=r.Fa.get(t);return A?(r.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await gf(r,t,n,!0),s}async function mf(e,t){const n=Df(e);await gf(n,t,!0,!1)}async function gf(e,t,n,r){const s=await qd(e.localStore,dc(t)),A=s.targetId,i=e.sharedClientState.addLocalQueryTarget(A,n);let a;return r&&(a=await yf(e,t,A,"current"===i,s.resumeToken)),e.isPrimaryClient&&n&&xh(e.remoteStore,s),a}async function yf(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Xd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const A=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,A,i);return If(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const A=await Xd(e.localStore,t,!0),i=new uf(t,A.Ts),a=i.ma(A.documents),o=Iu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=i.applyChanges(a,e.isPrimaryClient,o);If(e,n,l.wa);const c=new df(t,n,i);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),l.snapshot}async function xf(e,t,n){const r=ro(e),s=r.Fa.get(t),A=r.Ma.get(s.targetId);if(A.length>1)return r.Ma.set(s.targetId,A.filter(e=>!mc(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wh(r.remoteStore,s.targetId),Ff(r,s.targetId)}).catch(To)):(Ff(r,s.targetId),await Yd(r.localStore,s.targetId,!0))}async function wf(e,t){const n=ro(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wh(n.remoteStore,r.targetId))}async function vf(e,t){const n=ro(e);try{const e=await function(e,t){const n=ro(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const A=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const i=[];t.targetChanges.forEach((A,a)=>{const o=s.get(a);if(!o)return;i.push(n.Ur.removeMatchingKeys(e,A.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,A.addedDocuments,a)));let l=o.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(nl.EMPTY_BYTE_STRING,vo.min()).withLastLimboFreeSnapshotVersion(vo.min()):A.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(A.resumeToken,r)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(o,l,A)&&i.push(n.Ur.updateTargetData(e,l))});let a=Nc(),o=Tc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),i.push(Wd(e,A,t.documentUpdates).next(e=>{a=e.Ps,o=e.Is})),!r.isEqual(vo.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));i.push(t)}return _o.waitFor(i).next(()=>A.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,o)).next(()=>a)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(no(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?no(r.va):e.removedDocuments.size>0&&(no(r.va),r.va=!1))}),await Sf(n,e,t)}catch(e){await To(e)}}function bf(e,t,n){const r=ro(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=ro(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&sf(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Bf(e,t,n){const r=ro(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),A=s&&s.key;if(A){let e=new Yo(Eo.comparator);e=e.insert(A,jl.newNoDocument(A,vo.min()));const n=Tc().add(A),s=new Qu(vo.min(),new Map,new Yo(yo),e,n);await vf(r,s),r.Oa=r.Oa.remove(A),r.Na.delete(t),jf(r)}else await Yd(r.localStore,t,!1).then(()=>Ff(r,t,n)).catch(To)}async function Cf(e,t){const n=ro(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ro(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,A=s.keys();let i=_o.resolve();return A.forEach(e=>{i=i.next(()=>r.getEntry(t,e)).next(t=>{const A=n.docVersions.get(e);no(null!==A),t.version.compareTo(A)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),i.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Tc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Uf(n,r,null),Ef(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sf(n,e)}catch(e){await To(e)}}async function Nf(e,t,n){const r=ro(e);try{const e=await function(e,t){const n=ro(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(no(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Uf(r,t,n),Ef(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Sf(r,e)}catch(n){await To(n)}}function Ef(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Uf(e,t,n){const r=ro(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function Ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Qf(e,t)})}function Qf(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(wh(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),jf(e))}function If(e,t,n){for(const r of n)r instanceof lf?(e.La.addReference(r.key,t),kf(e,r)):r instanceof cf?(Ja("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Qf(e,r.key)):to()}function kf(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Ja("SyncEngine","New document in limbo: "+n),e.xa.add(r),jf(e))}function jf(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Eo(Bo.fromString(t)),r=e.qa.next();e.Na.set(r,new hf(n)),e.Oa=e.Oa.insert(n,r),xh(e.remoteStore,new md(dc(oc(n.path)),r,"TargetPurposeLimboResolution",Ho.oe))}}async function Sf(e,t,n){const r=ro(e),s=[],A=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{i.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Rd.Wi(a.targetId,e);A.push(t)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(e,t){const n=ro(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>_o.forEach(t,t=>_o.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>_o.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Lo(e))throw e;Ja("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,A))}async function Tf(e,t){const n=ro(e);if(!n.currentUser.isEqual(t)){Ja("SyncEngine","User change. New user:",t.toKey());const e=await Vd(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Ao(so.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Sf(n,e.hs)}}function _f(e,t){const n=ro(e),r=n.Na.get(t);if(r&&r.va)return Tc().add(r.key);{let e=Tc();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Df(e){const t=ro(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_f.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bf.bind(null,t),t.Ca.d_=nf.bind(null,t.eventManager),t.Ca.$a=rf.bind(null,t.eventManager),t}function Lf(e){const t=ro(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nf.bind(null,t),t}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Kd(this.persistence,new Od,e.initialUser,this.serializer)}Ga(e){return new Dd(Hd.Zr,this.serializer)}Wa(e){return new $d}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class Rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>bf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tf.bind(null,this.syncEngine),await Kh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zh}createDatastore(e){const t=lh(e.databaseInfo.databaseId),n=function(e){return new ah(e)}(e.databaseInfo);return function(e,t,n,r){return new fh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new mh(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>bf(this.syncEngine,e,0),th.D()?new th:new eh)}createSyncEngine(e,t){return function(e,t,n,r,s,A,i){const a=new ff(e,t,n,r,s,A);return i&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ro(e);Ja("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await yh(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Rf.provider={build:()=>new Rf};class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Za("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Of{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=za.UNAUTHENTICATED,this.clientId=go.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Ja("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ja("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Oe){const n=zh(Oe,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mf(e,t){e.asyncQueue.verifyOperationInProgress(),Ja("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Vd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Kf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Vf(e);Ja("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Mh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Mh(t.remoteStore,n)),e._onlineComponents=t}async function Vf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ja("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mf(e,e._uninitializedComponentsProvider._offline)}catch(Oe){const n=Oe;if(!function(e){return"FirebaseError"===e.name?e.code===so.FAILED_PRECONDITION||e.code===so.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;$a("Error using user provided cache. Falling back to memory cache: "+n),await Mf(e,new Hf)}}else Ja("FirestoreClient","Using default OfflineComponentProvider"),await Mf(e,new Hf);return e._offlineComponents}async function Gf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ja("FirestoreClient","Using user provided OnlineComponentProvider"),await Kf(e,e._uninitializedComponentsProvider._online)):(Ja("FirestoreClient","Using default OnlineComponentProvider"),await Kf(e,new Rf))),e._onlineComponents}function Wf(e){return Gf(e).then(e=>e.syncEngine)}async function zf(e){const t=await Gf(e),n=t.eventManager;return n.onListen=pf.bind(null,t.syncEngine),n.onUnlisten=xf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=mf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wf.bind(null,t.syncEngine),n}function qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new io;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const A=new Pf({next:a=>{A.Za(),t.enqueueAndForget(()=>tf(e,i));const o=a.docs.has(n);!o&&a.fromCache?s.reject(new Ao(so.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&a.fromCache&&r&&"server"===r.source?s.reject(new Ao(so.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),i=new of(oc(n.path),A,{includeMetadataChanges:!0,_a:!0});return ef(e,i)}(await zf(e),e.asyncQueue,t,n,r)),r.promise}function Yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new io;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const A=new Pf({next:n=>{A.Za(),t.enqueueAndForget(()=>tf(e,i)),n.fromCache&&"server"===r.source?s.reject(new Ao(so.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new of(n,A,{includeMetadataChanges:!0,_a:!0});return ef(e,i)}(await zf(e),e.asyncQueue,t,n,r)),r.promise}function Xf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jf=new Map;function Zf(e,t,n){if(!n)throw new Ao(so.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function $f(e){if(!Eo.isDocumentKey(e))throw new Ao(so.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ep(e){if(Eo.isDocumentKey(e))throw new Ao(so.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":to()}function np(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ao(so.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tp(e);throw new Ao(so.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function rp(e,t){if(t<=0)throw new Ao(so.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class sp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ao(so.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ao(so.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ao(so.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ao(so.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ao(so.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ao(so.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ap{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ao(so.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ao(so.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new oo;switch(e.type){case"firstParty":return new ho(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ao(so.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jf.get(e);t&&(Ja("ComponentProvider","Removing Datastore"),Jf.delete(e),t.terminate())}(this),Promise.resolve()}}class ip{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ip(this.firestore,e,this._query)}}class ap{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new op(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ap(this.firestore,e,this._key)}}class op extends ip{constructor(e,t,n){super(e,t,oc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ap(this.firestore,null,new Eo(e))}withConverter(e){return new op(this.firestore,e,this._path)}}function lp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Qn(e),Zf("collection","path",t),e instanceof Ap){const n=Bo.fromString(t,...r);return ep(n),new op(e,null,n)}{if(!(e instanceof ap||e instanceof op))throw new Ao(so.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bo.fromString(t,...r));return ep(n),new op(e.firestore,null,n)}}function cp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Qn(e),1===arguments.length&&(t=go.newId()),Zf("doc","path",t),e instanceof Ap){const n=Bo.fromString(t,...r);return $f(n),new ap(e,null,new Eo(n))}{if(!(e instanceof ap||e instanceof op))throw new Ao(so.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bo.fromString(t,...r));return $f(n),new ap(e.firestore,e instanceof op?e.converter:null,new Eo(n))}}class up{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ch(this,"async_queue_retry"),this.Vu=()=>{const e=oh();e&&Ja("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=oh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=oh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new io;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Pe){if(!Lo(Pe))throw Pe;Ja("AsyncQueue","Operation failed with retryable error: "+Pe)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Za("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Wh.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&to()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function dp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hp extends Ap{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new up,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new up(e),this._firestoreClient=void 0,await e}}}function fp(e){if(e._terminated)throw new Ao(so.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||pp(e),e._firestoreClient}function pp(e){var t,n,r;const s=e._freezeSettings(),A=function(e,t,n,r){return new cl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Of(e._authCredentials,e._appCheckCredentials,e._queue,A,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class mp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mp(nl.fromBase64String(e))}catch(e){throw new Ao(so.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mp(nl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ao(so.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new No(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yp{constructor(e){this._methodName=e}}class xp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ao(so.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ao(so.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yo(this._lat,e._lat)||yo(this._long,e._long)}}class wp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const vp=/^__.*__$/;class bp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}class Bp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw to()}}class Np{constructor(e,t,n,r,s,A){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=A||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Cp(this.Cu)&&vp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ep{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||lh(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Np({Cu:e,methodName:t,qu:n,path:No.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Up(e){const t=e._freezeSettings(),n=lh(e._databaseId);return new Ep(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fp(e,t,n,r,s){let A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.Qu(A.merge||A.mergeFields?2:0,t,n,s);Dp("Data must be an object, but it was:",i,r);const a=Tp(r,i);let o,l;if(A.merge)o=new el(i.fieldMask),l=i.fieldTransforms;else if(A.mergeFields){const e=[];for(const r of A.mergeFields){const s=Lp(t,r,n);if(!i.contains(s))throw new Ao(so.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Op(e,s)||e.push(s)}o=new el(e),l=i.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,l=i.fieldTransforms;return new bp(new Il(a),o,l)}class Qp extends yp{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qp}}function Ip(e,t,n,r){const s=e.Qu(1,t,n);Dp("Data must be an object, but it was:",s,r);const A=[],i=Il.empty();zo(r,(e,r)=>{const a=Rp(t,e,n);r=Qn(r);const o=s.Nu(a);if(r instanceof Qp)A.push(a);else{const e=Sp(r,o);null!=e&&(A.push(a),i.set(a,e))}});const a=new el(A);return new Bp(i,a,s.fieldTransforms)}function kp(e,t,n,r,s,A){const i=e.Qu(1,t,n),a=[Lp(t,r,n)],o=[s];if(A.length%2!=0)throw new Ao(so.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<A.length;d+=2)a.push(Lp(t,A[d])),o.push(A[d+1]);const l=[],c=Il.empty();for(let d=a.length-1;d>=0;--d)if(!Op(l,a[d])){const e=a[d];let t=o[d];t=Qn(t);const n=i.Nu(e);if(t instanceof Qp)l.push(e);else{const r=Sp(t,n);null!=r&&(l.push(e),c.set(e,r))}}const u=new el(l);return new Bp(c,u,i.fieldTransforms)}function jp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sp(n,e.Qu(r?4:3,t))}function Sp(e,t){if(_p(e=Qn(e)))return Dp("Unsupported field value:",t,e),Tp(e,t);if(e instanceof yp)return function(e,t){if(!Cp(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Sp(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Qn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=wo.fromDate(e);return{timestampValue:Ku(t.serializer,n)}}if(e instanceof wo){const n=new wo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ku(t.serializer,n)}}if(e instanceof xp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mp)return{bytesValue:Vu(t.serializer,e._byteString)};if(e instanceof ap){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:zu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Lc(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(tp(e)))}(e,t)}function Tp(e,t){const n={};return qo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zo(e,(e,r)=>{const s=Sp(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function _p(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wo||e instanceof xp||e instanceof mp||e instanceof ap||e instanceof yp||e instanceof wp)}function Dp(e,t,n){if(!_p(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=tp(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Lp(e,t,n){if((t=Qn(t))instanceof gp)return t._internalPath;if("string"==typeof t)return Rp(e,t);throw Pp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Hp=new RegExp("[~\\*/\\[\\]]");function Rp(e,t,n){if(t.search(Hp)>=0)throw Pp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new gp(...t.split("."))._internalPath}catch(r){throw Pp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Pp(e,t,n,r,s){const A=r&&!r.isEmpty(),i=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(A||i)&&(o+=" (found",A&&(o+=" in field ".concat(r)),i&&(o+=" in document ".concat(s)),o+=")"),new Ao(so.INVALID_ARGUMENT,a+e+o)}function Op(e,t){return e.some(e=>e.isEqual(t))}class Mp{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ap(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kp extends Mp{data(){return super.data()}}function Vp(e,t){return"string"==typeof t?Rp(e,t):t instanceof gp?t._internalPath:t._delegate._internalPath}function Gp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ao(so.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class zp extends Wp{}function qp(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),A=2;A<r;A++)s[A-2]=arguments[A];t instanceof Wp&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Jp).length,n=e.filter(e=>e instanceof Yp).length;if(t>1||t>0&&n>0)throw new Ao(so.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class Yp extends zp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Yp(e,t,n)}_apply(e){const t=this._parse(e);return im(e._query,t),new ip(e.firestore,e.converter,fc(e._query,t))}_parse(e){const t=Up(e.firestore),n=function(e,t,n,r,s,A,i){let a;if(s.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Ao(so.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(A,"' queries on documentId()."));if("in"===A||"not-in"===A){Am(i,A);const t=[];for(const n of i)t.push(sm(r,e,n));a={arrayValue:{values:t}}}else a=sm(r,e,i)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||Am(i,A),a=jp(n,t,i,"in"===A||"not-in"===A);return Rl.create(s,A,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Xp(e,t,n){const r=t,s=Vp("where",e);return Yp._create(s,r,n)}class Jp extends Wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Pl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)im(n,s),n=fc(n,s)}(e._query,t),new ip(e.firestore,e.converter,fc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zp extends zp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ao(so.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ao(so.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dl(t,n)}(e._query,this._field,this._direction);return new ip(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ic(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function $p(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Vp("orderBy",e);return Zp._create(n,t)}class em extends zp{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new em(e,t,n)}_apply(e){return new ip(e.firestore,e.converter,pc(e._query,this._limit,this._limitType))}}function tm(e){return rp("limit",e),em._create("limit",e,"F")}class nm extends zp{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new nm(e,t,n)}_apply(e){const t=rm(e,this.type,this._docOrFields,this._inclusive);return new ip(e.firestore,e.converter,function(e,t){return new ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function rm(e,t,n,r){if(n[0]=Qn(n[0]),n[0]instanceof Mp)return function(e,t,n,r,s){if(!r)throw new Ao(so.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const A=[];for(const i of uc(e))if(i.field.isKeyField())A.push(vl(t,r.key));else{const e=r.data.field(i.field);if(al(e))throw new Ao(so.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+i.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=i.field.canonicalString();throw new Ao(so.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}A.push(e)}return new Sl(A,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=Up(e.firestore);return function(e,t,n,r,s,A){const i=e.explicitOrderBy;if(s.length>i.length)throw new Ao(so.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let o=0;o<s.length;o++){const A=s[o];if(i[o].field.isKeyField()){if("string"!=typeof A)throw new Ao(so.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof A));if(!cc(e)&&-1!==A.indexOf("/"))throw new Ao(so.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(A,"' contains a slash."));const n=e.path.child(Bo.fromString(A));if(!Eo.isDocumentKey(n))throw new Ao(so.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new Eo(n);a.push(vl(t,s))}else{const e=jp(n,r,A);a.push(e)}}return new Sl(a,A)}(e._query,e.firestore._databaseId,s,t,n,r)}}function sm(e,t,n){if("string"==typeof(n=Qn(n))){if(""===n)throw new Ao(so.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cc(t)&&-1!==n.indexOf("/"))throw new Ao(so.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Bo.fromString(n));if(!Eo.isDocumentKey(r))throw new Ao(so.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vl(e,new Eo(r))}if(n instanceof ap)return vl(e,n._key);throw new Ao(so.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tp(n),"."))}function Am(e,t){if(!Array.isArray(e)||0===e.length)throw new Ao(so.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function im(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ao(so.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ao(so.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class am{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Al(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(il(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw to()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return zo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Al(e.doubleValue));return new wp(s)}convertGeoPoint(e){return new xp(Al(e.latitude),Al(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ol(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const t=sl(e);return new wo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Bo.fromString(e);no(pd(n));const r=new ul(n.get(1),n.get(3)),s=new Eo(n.popFirst(5));return r.isEqual(t)||Za("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function om(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cm extends Mp{constructor(e,t,n,r,s,A){super(e,t,n,r,A),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Vp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class um extends cm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new um(this._firestore,this._userDataWriter,n.key,n,new lm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ao(so.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new um(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new um(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,A=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),A=n.indexOf(t.doc.key)),{type:hm(t.type),doc:r,oldIndex:s,newIndex:A}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function hm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return to()}}function fm(e){e=np(e,ap);const t=np(e.firestore,hp);return qf(fp(t),e._key).then(n=>Bm(t,e,n))}class pm extends am{constructor(e){super(),this.firestore=e}convertBytes(e){return new mp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ap(this.firestore,null,t)}}function mm(e){e=np(e,ip);const t=np(e.firestore,hp),n=fp(t),r=new pm(t);return Gp(e._query),Yf(n,e._query).then(n=>new dm(t,r,e,n))}function gm(e,t,n){e=np(e,ap);const r=np(e.firestore,hp),s=om(e.converter,t,n);return bm(r,[Fp(Up(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,$c.none())])}function ym(e,t,n){e=np(e,ap);const r=np(e.firestore,hp),s=Up(r);let A;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return A="string"==typeof(t=Qn(t))||t instanceof gp?kp(s,"updateDoc",e._key,t,n,a):Ip(s,"updateDoc",e._key,t),bm(r,[A.toMutation(e._key,$c.exists(!0))])}function xm(e){return bm(np(e.firestore,hp),[new du(e._key,$c.none())])}function wm(e,t){const n=np(e.firestore,hp),r=cp(e),s=om(e.converter,t);return bm(n,[Fp(Up(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,$c.exists(!1))]).then(()=>r)}function vm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,A,i;e=Qn(e);let a={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||dp(n[o])||(a=n[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(dp(n[o])){const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(A=e.error)||void 0===A?void 0:A.bind(e),n[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,d;if(e instanceof ap)u=np(e.firestore,hp),d=oc(e._key.path),c={next:t=>{n[o]&&n[o](Bm(u,e,t))},error:n[o+1],complete:n[o+2]};else{const t=np(e,ip);u=np(t.firestore,hp),d=t._query;const r=new pm(u);c={next:e=>{n[o]&&n[o](new dm(u,r,t,e))},error:n[o+1],complete:n[o+2]},Gp(e._query)}return function(e,t,n,r){const s=new Pf(r),A=new of(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>ef(await zf(e),A)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>tf(await zf(e),A))}}(fp(u),d,l,c)}function bm(e,t){return function(e,t){const n=new io;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Lf(e);try{const e=await function(e,t){const n=ro(e),r=wo.now(),s=t.reduce((e,t)=>e.add(t.key),Tc());let A,i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Nc(),o=Tc();return n.cs.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(o=o.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{A=s;const i=[];for(const e of t){const t=Au(e,A.get(e.key).overlayedDocument);null!=t&&i.push(new ou(e.key,t,kl(t.value.mapValue),$c.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)}).next(t=>{i=t;const r=t.applyToLocalDocumentSet(A,o);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:i.batchId,changes:Fc(A)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Yo(yo)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Sf(r,e.changes),await Sh(r.remoteStore)}catch(e){const t=zh(e,"Failed to persist write");n.reject(t)}}(await Wf(e),t,n)),n.promise}(fp(e),t)}function Bm(e,t,n){const r=n.docs.get(t._key),s=new pm(e);return new cm(e,s,t._key,r,new lm(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qa=e}(Wr),Or(new In("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const A=e.getProvider("app").getImmediate(),i=new hp(new co(e.getProvider("auth-internal")),new po(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ao(so.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(e.options.projectId,t)}(A,r),A);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i},"PUBLIC").setMultipleInstances(!0)),Yr(Wa,"4.7.3",e),Yr(Wa,"4.7.3","esm2017")}();const Cm="firebasestorage.googleapis.com",Nm="storageBucket";class Em extends xn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Qm(e),"Firebase Storage: ".concat(t," (").concat(Qm(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Em.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Um,Fm;function Qm(e){return"storage/"+e}function Im(){return new Em(Um.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function km(){return new Em(Um.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jm(){return new Em(Um.CANCELED,"User canceled the upload/download.")}function Sm(){return new Em(Um.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tm(e){return new Em(Um.INVALID_ARGUMENT,e)}function _m(){return new Em(Um.APP_DELETED,"The Firebase app was deleted.")}function Dm(e,t){return new Em(Um.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Lm(e){throw new Em(Um.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Um||(Um={}));class Hm{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Hm.makeFromUrl(e,t)}catch(Pe){return new Hm(e,"")}if(""===n.path)return n;throw r=e,new Em(Um.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function A(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(i,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:A},{regex:new RegExp("^https?://".concat(t===Cm?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:A}];for(let o=0;o<a.length;o++){const t=a[o],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Hm(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Em(Um.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Rm{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Pm(e){return"string"===typeof e||e instanceof String}function Om(e){return Mm()&&e instanceof Blob}function Mm(){return"undefined"!==typeof Blob}function Km(e,t,n,r){if(r<t)throw Tm("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Tm("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Vm(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Gm(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Wm(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Fm||(Fm={}));class zm{constructor(e,t,n,r,s,A,i,a,o,l,c){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=A,this.callback_=i,this.errorCallback_=a,this.timeout_=o,this.progressCallback_=l,this.connectionFactory_=c,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new qm(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Fm.NO_ERROR,s=n.getStatus();if(!t||Wm(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Fm.ABORT;return void e(!1,new qm(!1,null,t))}const A=-1!==this.successCodes_.indexOf(s);e(!0,new qm(A,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Pe){r(Pe)}else if(null!==s){const e=Im();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?_m():jm())}else{r(km())}};this.canceled_?t(0,new qm(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,A=null,i=!1,a=0;function o(){return 2===a}let l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function u(t){s=setTimeout(()=>{s=null,e(h,o())},t)}function d(){A&&clearTimeout(A)}function h(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void c.call(null,e,...n);if(o()||i)return d(),void c.call(null,e,...n);let A;r<64&&(r*=2),1===a?(a=2,A=0):A=1e3*(r+Math.random()),u(A)}let f=!1;function p(e){f||(f=!0,d(),l||(null!==s?(e||(a=2),clearTimeout(s),u(0)):e||(a=1)))}return u(0),A=setTimeout(()=>{i=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class qm{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ym(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Xm(){const e=Ym();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Mm())return new Blob(n);throw new Em(Um.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Jm(e){if("undefined"===typeof atob)throw t="base-64",new Em(Um.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Zm="raw",$m="base64",eg="base64url",tg="data_url";class ng{constructor(e,t){this.data=e,this.contentType=t||null}}function rg(e,t){switch(e){case Zm:return new ng(sg(t));case $m:case eg:return new ng(Ag(e,t));case tg:return new ng(function(e){const t=new ig(e);return t.base64?Ag($m,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Pe){throw Dm(tg,"Malformed data URL.")}return sg(t)}(t.rest)}(t),new ig(t).contentType)}throw Im()}function sg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ag(e,t){switch(e){case $m:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Dm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case eg:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Dm(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Jm(t)}catch(Pe){if(Pe.message.includes("polyfill"))throw Pe;throw Dm(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class ig{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Dm(tg,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class ag{constructor(e,t){let n=0,r="";Om(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Om(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new ag(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new ag(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Mm()){const e=t.map(e=>e instanceof ag?e.data_:e);return new ag(Xm.apply(null,e))}{const e=t.map(e=>Pm(e)?rg(Zm,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new ag(r,!0)}}uploadData(){return this.data_}}function og(e){let t;try{t=JSON.parse(e)}catch(Pe){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function lg(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function cg(e,t){return t}class ug{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||cg}}let dg=null;function hg(){if(dg)return dg;const e=[];e.push(new ug("bucket")),e.push(new ug("generation")),e.push(new ug("metageneration")),e.push(new ug("name","fullPath",!0));const t=new ug("name");t.xform=function(e,t){return function(e){return!Pm(e)||e.length<2?e:lg(e)}(t)},e.push(t);const n=new ug("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ug("timeCreated")),e.push(new ug("updated")),e.push(new ug("md5Hash",null,!0)),e.push(new ug("cacheControl",null,!0)),e.push(new ug("contentDisposition",null,!0)),e.push(new ug("contentEncoding",null,!0)),e.push(new ug("contentLanguage",null,!0)),e.push(new ug("contentType",null,!0)),e.push(new ug("metadata","customMetadata",!0)),dg=e,dg}function fg(e,t,n){const r={type:"file"},s=n.length;for(let A=0;A<s;A++){const e=n[A];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Hm(n,r);return t._makeStorageReference(s)}})}(r,e),r}function pg(e,t,n){const r=og(t);if(null===r)return null;return fg(e,r,n)}function mg(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class gg{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yg(e){if(!e)throw Im()}function xg(e,t){return function(n,r){const s=pg(e,r,t);return yg(null!==s),s}}function wg(e,t){return function(n,r){const s=pg(e,r,t);return yg(null!==s),function(e,t,n,r){const s=og(t);if(null===s)return null;if(!Pm(s.downloadTokens))return null;const A=s.downloadTokens;if(0===A.length)return null;const i=encodeURIComponent;return A.split(",").map(t=>{const s=e.bucket,A=e.fullPath;return Vm("/b/"+i(s)+"/o/"+i(A),n,r)+Gm({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function vg(e){return function(t,n){let r;var s,A;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Em(Um.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Em(Um.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(A=e.bucket,r=new Em(Um.QUOTA_EXCEEDED,"Quota for bucket '"+A+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new Em(Um.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function bg(e){const t=vg(e);return function(n,r){let s=t(n,r);var A;return 404===n.getStatus()&&(A=e.path,s=new Em(Um.OBJECT_NOT_FOUND,"Object '"+A+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function Bg(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Cg(e,t,n,r,s){const A=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i["Content-Type"]="multipart/related; boundary="+a;const o=Bg(t,r,s),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mg(o,n)+"\r\n--"+a+"\r\nContent-Type: "+o.contentType+"\r\n\r\n",c="\r\n--"+a+"--",u=ag.getBlob(l,r,c);if(null===u)throw Sm();const d={name:o.fullPath},h=Vm(A,e.host,e._protocol),f=e.maxUploadRetryTime,p=new gg(h,"POST",xg(e,n),f);return p.urlParams=d,p.headers=i,p.body=u.uploadData(),p.errorHandler=vg(t),p}class Ng{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw Lm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Pe){return-1}}getResponse(){if(!this.sent_)throw Lm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Eg extends Ng{initXhr(){this.xhr_.responseType="text"}}function Ug(){return new Eg}class Fg{constructor(e,t){this._service=e,this._location=t instanceof Hm?t:Hm.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fg(e,t)}get root(){const e=new Hm(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lg(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Hm(this._location.bucket,e);return new Fg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Em(Um.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Qg(e,t,n){e._throwIfRoot("uploadBytes");const r=Cg(e.storage,e._location,hg(),new ag(t,!0),n);return e.storage.makeRequestWithTokens(r,Ug).then(t=>({metadata:t,ref:e}))}function Ig(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Vm(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,A=new gg(r,"GET",wg(e,n),s);return A.errorHandler=bg(t),A}(e.storage,e._location,hg());return e.storage.makeRequestWithTokens(t,Ug).then(e=>{if(null===e)throw new Em(Um.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function kg(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Hm(e._location.bucket,n);return new Fg(e.storage,r)}function jg(e,t){if(e instanceof _g){const n=e;if(null==n._bucket)throw new Em(Um.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nm+"' property when initializing the app?");const r=new Fg(n,n._bucket);return null!=t?jg(r,t):r}return void 0!==t?kg(e,t):e}function Sg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _g)return new Fg(e,t);throw Tm("To use ref(service, url), the first argument must be a Storage instance.")}return jg(e,t)}function Tg(e,t){const n=null===t||void 0===t?void 0:t[Nm];return null==n?null:Hm.makeFromBucketSpec(n,e)}class _g{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Cm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Hm.makeFromBucketSpec(r,this._host):Tg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Hm.makeFromBucketSpec(this._url,e):this._bucket=Tg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Km("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Km("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fg(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Rm(_m());{const A=function(e,t,n,r,s,A){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Gm(e.urlParams),o=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,A),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new zm(o,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(A),A.getPromise().then(()=>this._requests.delete(A),()=>this._requests.delete(A)),A}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Dg="@firebase/storage",Lg="0.13.2",Hg="storage";function Rg(e,t,n){return Qg(e=Qn(e),t,n)}function Pg(e){return Ig(e=Qn(e))}function Og(e,t){return Sg(e=Qn(e),t)}function Mg(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),A=e.getProvider("app-check-internal");return new _g(r,s,A,n,Wr)}Or(new In(Hg,Mg,"PUBLIC").setMultipleInstances(!0)),Yr(Dg,Lg,""),Yr(Dg,Lg,"esm2017");function Kg(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function Vg(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>Vg(e));if("function"===typeof e||"object"===typeof e)return Kg(e,e=>Vg(e));throw new Error("Data cannot be encoded in JSON: "+e)}function Gg(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>Gg(e)):"function"===typeof e||"object"===typeof e?Kg(e,e=>Gg(e)):e}const Wg="functions",zg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qg extends xn{constructor(e,t,n){super("".concat(Wg,"/").concat(e),t||""),this.details=n}}class Yg{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(Pe){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(Pe){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const Xg="us-central1";class Jg{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xg,A=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=A,this.emulatorOrigin=null,this.contextProvider=new Yg(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=Xg}catch(Pe){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function Zg(e,t,n){return r=>function(e,t,n,r){const s=e._url(t);return ey(e,s,n,r)}(e,t,r,n||{})}async function $g(e,t,n,r){let s;n["Content-Type"]="application/json";try{s=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(Pe){return{status:0,json:null}}let A=null;try{A=await s.json()}catch(Pe){}return{status:s.status,json:A}}async function ey(e,t,n,r){const s={data:n=Vg(n)},A={},i=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);i.authToken&&(A.Authorization="Bearer "+i.authToken),i.messagingToken&&(A["Firebase-Instance-ID-Token"]=i.messagingToken),null!==i.appCheckToken&&(A["X-Firebase-AppCheck"]=i.appCheckToken);const a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new qg("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),o=await Promise.race([$g(t,s,A,e.fetchImpl),a.promise,e.cancelAllRequests]);if(a.cancel(),!o)throw new qg("cancelled","Firebase Functions instance was deleted.");const l=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),s=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!zg[t])return new qg("internal","internal");r=zg[t],s=t}const A=e.message;"string"===typeof A&&(s=A),n=e.details,void 0!==n&&(n=Gg(n))}}catch(Pe){}return"ok"===r?null:new qg(r,s,n)}(o.status,o.json);if(l)throw l;if(!o.json)throw new qg("internal","Response is not valid JSON object.");let c=o.json.data;if("undefined"===typeof c&&(c=o.json.result),"undefined"===typeof c)throw new qg("internal","Response is missing data field.");return{data:Gg(c)}}const ty="@firebase/functions",ny="0.11.8";function ry(e,t,n){return Zg(Qn(e),t,n)}!function(e,t){Or(new In(Wg,(t,n)=>{let{instanceIdentifier:r}=n;const s=t.getProvider("app").getImmediate(),A=t.getProvider("auth-internal"),i=t.getProvider("messaging-internal"),a=t.getProvider("app-check-internal");return new Jg(s,A,i,a,r,e)},"PUBLIC").setMultipleInstances(!0)),Yr(ty,ny,t),Yr(ty,ny,"esm2017")}(fetch.bind(self));const sy="@firebase/installations",Ay="0.6.9",iy=1e4,ay="w:".concat(Ay),oy="FIS_v2",ly=36e5,cy=new wn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function uy(e){return e instanceof xn&&e.code.includes("request-failed")}function dy(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function hy(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function fy(e,t){const n=(await t.json()).error;return cy.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function py(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function my(e,t){let{refreshToken:n}=t;const r=py(e);return r.append("Authorization",function(e){return"".concat(oy," ").concat(e)}(n)),r}async function gy(e){const t=await e();return t.status>=500&&t.status<600?e():t}function yy(e){return new Promise(t=>{setTimeout(t,e)})}const xy=/^[cdef][\w-]{21}$/;function wy(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return xy.test(t)?t:""}catch(e){return""}}function vy(e){return"".concat(e.appName,"!").concat(e.appId)}const by=new Map;function By(e,t){const n=vy(e);Cy(n,t),function(e,t){const n=Ey();n&&n.postMessage({key:e,fid:t});Uy()}(n,t)}function Cy(e,t){const n=by.get(e);if(n)for(const r of n)r(t)}let Ny=null;function Ey(){return!Ny&&"BroadcastChannel"in self&&(Ny=new BroadcastChannel("[Firebase] FID Change"),Ny.onmessage=e=>{Cy(e.data.key,e.data.fid)}),Ny}function Uy(){0===by.size&&Ny&&(Ny.close(),Ny=null)}const Fy="firebase-installations-store";let Qy=null;function Iy(){return Qy||(Qy=$n("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Fy)}})),Qy}async function ky(e,t){const n=vy(e),r=(await Iy()).transaction(Fy,"readwrite"),s=r.objectStore(Fy),A=await s.get(n);return await s.put(t,n),await r.done,A&&A.fid===t.fid||By(e,t.fid),t}async function jy(e){const t=vy(e),n=(await Iy()).transaction(Fy,"readwrite");await n.objectStore(Fy).delete(t),await n.done}async function Sy(e,t){const n=vy(e),r=(await Iy()).transaction(Fy,"readwrite"),s=r.objectStore(Fy),A=await s.get(n),i=t(A);return void 0===i?await s.delete(n):await s.put(i,n),await r.done,!i||A&&A.fid===i.fid||By(e,i.fid),i}async function Ty(e){let t;const n=await Sy(e.appConfig,n=>{const r=function(e){const t=e||{fid:wy(),registrationStatus:0};return Ly(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(cy.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const A=dy(n),i=py(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:s,authVersion:oy,appId:n.appId,sdkVersion:ay},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await gy(()=>fetch(A,l));if(c.ok){const e=await c.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:hy(e.authToken)}}throw await fy("Create Installation",c)}(e,t);return ky(e.appConfig,n)}catch(Pe){throw uy(Pe)&&409===Pe.customData.serverCode?await jy(e.appConfig):await ky(e.appConfig,{fid:t.fid,registrationStatus:0}),Pe}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:_y(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function _y(e){let t=await Dy(e.appConfig);for(;1===t.registrationStatus;)await yy(100),t=await Dy(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ty(e);return n||t}return t}function Dy(e){return Sy(e,e=>{if(!e)throw cy.create("installation-not-found");return Ly(e)})}function Ly(e){return 1===(t=e).registrationStatus&&t.registrationTime+iy<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Hy(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(dy(e),"/").concat(n,"/authTokens:generate")}(n,t),A=my(n,t),i=r.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&A.append("x-firebase-client",e)}const a={installation:{sdkVersion:ay,appId:n.appId}},o={method:"POST",headers:A,body:JSON.stringify(a)},l=await gy(()=>fetch(s,o));if(l.ok){return hy(await l.json())}throw await fy("Generate Auth Token",l)}async function Ry(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Sy(e.appConfig,r=>{if(!Oy(r))throw cy.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+ly}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Py(e.appConfig);for(;1===n.authToken.requestStatus;)await yy(100),n=await Py(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Ry(e,t):r}(e,n),r;{if(!navigator.onLine)throw cy.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Hy(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await ky(e.appConfig,r),n}catch(Pe){if(!uy(Pe)||401!==Pe.customData.serverCode&&404!==Pe.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ky(e.appConfig,n)}else await jy(e.appConfig);throw Pe}}(e,n),n}});return t?await t:r.authToken}function Py(e){return Sy(e,e=>{if(!Oy(e))throw cy.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+iy<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Oy(e){return void 0!==e&&2===e.registrationStatus}async function My(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Ty(e);t&&await t}(n);return(await Ry(n,t)).token}function Ky(e){return cy.create("missing-app-config-values",{valueName:e})}const Vy="installations",Gy=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ky("App Configuration");if(!e.name)throw Ky("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ky(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Mr(t,"heartbeat"),_delete:()=>Promise.resolve()}},Wy=e=>{const t=Mr(e.getProvider("app").getImmediate(),Vy).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Ty(t);return r?r.catch(console.error):Ry(t).catch(console.error),n.fid}(t),getToken:e=>My(t,e)}};Or(new In(Vy,Gy,"PUBLIC")),Or(new In("installations-internal",Wy,"PRIVATE")),Yr(sy,Ay),Yr(sy,Ay,"esm2017");const zy="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qy="google.c.a.c_id";var Yy,Xy;function Jy(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zy(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Yy||(Yy={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Xy||(Xy={}));const $y="fcm_token_details_db",ex="fcm_token_object_Store";const tx="firebase-messaging-store";let nx=null;function rx(){return nx||(nx=$n("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(tx)}})),nx}async function sx(e){const t=ix(e),n=await rx(),r=await n.transaction(tx).objectStore(tx).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes($y))return null}let t=null;return(await $n($y,5,{upgrade:async(n,r,s,A)=>{var i;if(r<2)return;if(!n.objectStoreNames.contains(ex))return;const a=A.objectStore(ex),o=await a.index("fcmSenderId").get(e);if(await a.clear(),o)if(2===r){const e=o;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(i=e.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:Jy(e.vapidKey)}}}else if(3===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Jy(e.auth),p256dh:Jy(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Jy(e.vapidKey)}}}else if(4===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Jy(e.auth),p256dh:Jy(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Jy(e.vapidKey)}}}}})).close(),await er($y),await er("fcm_vapid_details_db"),await er("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await Ax(e,t),t}}async function Ax(e,t){const n=ix(e),r=(await rx()).transaction(tx,"readwrite");return await r.objectStore(tx).put(t,n),await r.done,t}function ix(e){let{appConfig:t}=e;return t.appId}const ax=new wn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function ox(e,t){const n={method:"DELETE",headers:await cx(e)};try{const r=await fetch("".concat(lx(e.appConfig),"/").concat(t),n),s=await r.json();if(s.error){const e=s.error.message;throw ax.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw ax.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function lx(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function cx(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function ux(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:s}=e;const A={web:{endpoint:r,auth:n,p256dh:t}};return s!==zy&&(A.web.applicationPubKey=s),A}async function dx(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zy(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Jy(t.getKey("auth")),p256dh:Jy(t.getKey("p256dh"))},r=await sx(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,s=t.auth===e.auth,A=t.p256dh===e.p256dh;return n&&r&&s&&A}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await cx(e),r=ux(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let A;try{const n=await fetch("".concat(lx(e.appConfig),"/").concat(t.token),s);A=await n.json()}catch(i){throw ax.create("token-update-failed",{errorInfo:null===i||void 0===i?void 0:i.toString()})}if(A.error){const e=A.error.message;throw ax.create("token-update-failed",{errorInfo:e})}if(!A.token)throw ax.create("token-update-no-token");return A.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await Ax(e.firebaseDependencies,r),n}catch(Pe){throw Pe}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await ox(e.firebaseDependencies,r.token)}catch(Pe){console.warn(Pe)}return hx(e.firebaseDependencies,n)}return hx(e.firebaseDependencies,n)}async function hx(e,t){const n=await async function(e,t){const n=await cx(e),r=ux(t),s={method:"POST",headers:n,body:JSON.stringify(r)};let A;try{const t=await fetch(lx(e.appConfig),s);A=await t.json()}catch(i){throw ax.create("token-subscribe-failed",{errorInfo:null===i||void 0===i?void 0:i.toString()})}if(A.error){const e=A.error.message;throw ax.create("token-subscribe-failed",{errorInfo:e})}if(!A.token)throw ax.create("token-subscribe-no-token");return A.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await Ax(e,r),r.token}function fx(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const s=t.notification.image;s&&(e.notification.image=s);const A=t.notification.icon;A&&(e.notification.icon=A)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,s,A,i;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(s=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==s?s:null===(A=t.notification)||void 0===A?void 0:A.click_action;a&&(e.fcmOptions.link=a);const o=null===(i=t.fcmOptions)||void 0===i?void 0:i.analytics_label;o&&(e.fcmOptions.analyticsLabel=o)}(t,e),t}function px(e){return ax.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mx{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw px("App Configuration Object");if(!e.name)throw px("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw px(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function gx(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(Pe){throw ax.create("failed-service-worker-registration",{browserErrorMessage:null===Pe||void 0===Pe?void 0:Pe.message})}}async function yx(e,t){if(!navigator)throw ax.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw ax.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=zy)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await gx(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw ax.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),dx(e)}async function xx(e,t,n){const r=function(e){switch(e){case Xy.NOTIFICATION_CLICKED:return"notification_open";case Xy.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[qy],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function wx(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Xy.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(fx(n)):e.onMessageHandler.next(fx(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&qy in e})(r)&&"1"===r["google.c.a.e"]&&await xx(e,n.messageType,r)}const vx="@firebase/messaging",bx="0.12.12",Bx=e=>{const t=new mx(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>wx(t,e)),t},Cx=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>yx(t,e)}};async function Nx(){try{await yn()}catch(Pe){return!1}return"undefined"!==typeof window&&gn()&&!("undefined"===typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Ex(e,t){return function(e,t){if(!navigator)throw ax.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=Qn(e),t)}Or(new In("messaging",Bx,"PUBLIC")),Or(new In("messaging-internal",Cx,"PRIVATE")),Yr(vx,bx),Yr(vx,bx,"esm2017");const Ux=zr({apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID}),Fx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr();const t=Mr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Mr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(bn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ds(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Na,persistence:[Ui,ci,di]}),r=dn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qa)return;const r=null===t||void 0===t?void 0:t.token;Ia!==r&&(Ia=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Qn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Qn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const A=ln("auth");return A&&IA(n,"http://".concat(A)),n}(Ux),Qx=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Mr("object"==typeof e?e:qr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=cn("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const A=(e=np(e,Ap))._getSettings(),i="".concat(t,":").concat(n);if("firestore.googleapis.com"!==A.host&&A.host!==i&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=za.MOCK_USER;else{t=fn(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new Ao(so.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new za(A)}e._authCredentials=new lo(new ao(t,n))}}(r,...e)}return r}(Ux),Ix=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr(),t=arguments.length>1?arguments[1]:void 0;e=Qn(e);const n=Mr(e,Hg).getImmediate({identifier:t}),r=cn("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:fn(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Ux),kx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xg;const n=Mr(Qn(e),Wg).getImmediate({identifier:t}),r=cn("functions");return r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(Qn(e),t,n)}(n,...r),n}(Ux),jx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr();return Nx().then(e=>{if(!e)throw ax.create("unsupported-browser")},e=>{throw ax.create("indexed-db-unsupported")}),Mr(Qn(e),"messaging").getImmediate()}(Ux),Sx=new WA,Tx=e=>{switch(e.code){case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/user-not-found":return"No account found with this email.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/invalid-email":return"Invalid email address.";case"auth/user-disabled":return"This account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-closed-by-user":return"Sign-in popup was closed.";case"auth/cancelled-popup-request":return"Sign-in was cancelled.";case"auth/invalid-credential":return"Invalid credentials. Please check your email and password.";default:return e.message.replace("Firebase: ","").replace(/\(auth\/[\w-]+\)\.?/,"").trim()}},_x=async()=>{try{const e=await async function(e,t,n){if(Kr(e.app))return Promise.reject(hs(e,"operation-not-supported-in-this-environment"));const r=bA(e);ms(e,t,KA);const s=Oi(r,n);return new qi(r,"signInViaPopup",t,s).executeNotNull()}(Fx,Sx);return{success:!0,user:e.user}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:Tx(e)}}},Dx=async(e,t)=>{try{const n=await function(e,t,n){return Kr(e.app)?Promise.reject(ps(e)):ri(Qn(e),MA.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&si(e),t})}(Fx,e,t);return{success:!0,user:n.user}}catch(n){return console.error("Email sign in error:",n),{success:!1,error:Tx(n)}}},Lx=async(e,t,n)=>{try{const r=await async function(e,t,n){if(Kr(e.app))return Promise.reject(ps(e));const r=bA(e),s=QA(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YA),A=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&si(e),t}),i=await XA._fromIdTokenResponse(r,"signIn",A);return await r._updateCurrentUser(i.user),i}(Fx,e,t);return await Ai(r.user,{displayName:n||"New User"}),{success:!0,user:r.user}}catch(r){return console.error("Email sign up error:",r),{success:!1,error:Tx(r)}}},Hx=e=>{try{return window.recaptchaVerifier||(window.recaptchaVerifier=new Li(Fx,e,{size:"invisible",callback:()=>{}})),{success:!0,verifier:window.recaptchaVerifier}}catch(t){return console.error("reCAPTCHA setup error:",t),{success:!1,error:t.message}}},Rx=async(e,t)=>{try{const n=await async function(e,t,n){if(Kr(e.app))return Promise.reject(ps(e));const r=bA(e),s=await Ri(r,t,Qn(n));return new Hi(s,e=>ri(r,e))}(Fx,e,t);return{success:!0,confirmationResult:n}}catch(n){return console.error("Phone verification error:",n),window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null),{success:!1,error:n.message}}},Px=async(e,t)=>{try{return{success:!0,user:(await e.confirm(t)).user}}catch(n){return console.error("Code verification error:",n),{success:!1,error:n.message}}},Ox=async()=>{try{return await function(e){return Qn(e).signOut()}(Fx),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e.message}}};const Mx=new class{constructor(){this.sessionId=this.generateSessionId(),this.userId=null,this.userAgent=navigator.userAgent,this.startTime=Date.now(),this.errors=[],this.performance=[],this.setupErrorHandlers()}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}setUser(e){this.userId=e}setupErrorHandlers(){window.addEventListener("error",e=>{var t;this.logError({type:"uncaught_error",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{var t,n;this.logError({type:"unhandled_promise",message:(null===(t=e.reason)||void 0===t?void 0:t.message)||String(e.reason),stack:null===(n=e.reason)||void 0===n?void 0:n.stack})}),this.trackPerformance()}logError(e){const t=Re(Re({},e),{},{sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href,userAgent:this.userAgent});this.errors.push(t),this.sendToFirestore("errors",t),console.error("Error tracked:",t)}logCustomError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logError({type:"custom_error",message:e,details:t,stack:(new Error).stack})}trackPerformance(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&this.logPerformance({type:"page_load",metrics:{dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,dom:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,load:e.loadEventEnd-e.loadEventStart,total:e.loadEventEnd-e.fetchStart}})},0)});const e=new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>1e3&&this.logPerformance({type:"slow_resource",name:t.name,duration:t.duration,size:t.transferSize})});e.observe({entryTypes:["resource","measure"]})}logPerformance(e){const t=Re(Re({},e),{},{sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href});this.performance.push(t),this.sendToFirestore("performance",t)}trackAction(e){const t={action:e,details:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href};this.sendToFirestore("user_actions",t)}trackPageView(e){this.trackAction("page_view",{page:e})}trackFunnelStep(e,t){const n={funnel:e,step:t,metadata:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href};this.sendToFirestore("funnel_events",n)}async sendToFirestore(e,t){try{await wm(lp(Qx,e),Re(Re({},t),{},{createdAt:wo.now()}))}catch(n){console.error("Failed to send to Firestore:",n),this.storeLocally(e,t)}}storeLocally(e,t){try{const n="besties_".concat(e),r=JSON.parse(localStorage.getItem(n)||"[]");r.push(t),r.length>100&&r.shift(),localStorage.setItem(n,JSON.stringify(r))}catch(n){console.error("Failed to store locally:",n)}}getSessionSummary(){return{sessionId:this.sessionId,userId:this.userId,duration:Date.now()-this.startTime,errors:this.errors.length,url:window.location.href,userAgent:this.userAgent}}},Kx=Mx;var Vx=n(579);const Gx=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[A,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)("+61"),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[g,y]=(0,t.useState)(null),[x,w]=(0,t.useState)(!1),v=te();(0,t.useEffect)(()=>{Kx.trackFunnelStep("signup","view_login_page")},[]);const b=async()=>{c(!0),Kx.trackFunnelStep("signup","click_google_signin");const e=await _x();c(!1),e.success?(Kx.trackFunnelStep("signup","complete_google_signin"),en.success("Welcome to Besties!"),v("/")):(Kx.logCustomError("Google sign-in failed",{error:e.error}),en.error(e.error||"Sign in failed"))};return(0,Vx.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"w-full max-w-md",children:[(0,Vx.jsxs)("div",{className:"text-center mb-8 animate-fade-in",children:[(0,Vx.jsx)("h1",{className:"font-display text-6xl text-gradient mb-2",children:"Besties"}),(0,Vx.jsx)("p",{className:"text-xl text-text-secondary font-semibold",children:"Your besties have your back \ud83d\udc9c"})]}),(0,Vx.jsxs)("div",{className:"card p-8 animate-slide-up",children:[(0,Vx.jsxs)("button",{onClick:b,disabled:l,className:"w-full btn btn-primary mb-3",children:[(0,Vx.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,Vx.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Vx.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Vx.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Vx.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Vx.jsxs)("button",{onClick:()=>w(!x),className:"w-full btn btn-secondary mb-3",children:[(0,Vx.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Continue with Phone"]}),x&&(0,Vx.jsx)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:g?(0,Vx.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),Kx.trackFunnelStep("signup","click_phone_verify_code");const t=await Px(g,p);c(!1),t.success?(Kx.trackFunnelStep("signup","complete_phone_signin"),en.success("Welcome to Besties!"),v("/")):(Kx.logCustomError("Phone code verification failed",{error:t.error}),en.error(t.error||"Invalid code"))},className:"space-y-3",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Verification Code"}),(0,Vx.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),className:"input",placeholder:"123456",required:!0,maxLength:6}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:"Enter the 6-digit code sent to your phone"})]}),(0,Vx.jsx)("button",{type:"submit",disabled:l,className:"w-full btn btn-primary",children:l?"Verifying...":"Verify Code"}),(0,Vx.jsx)("button",{type:"button",onClick:()=>{y(null),m("")},className:"w-full btn btn-secondary",children:"Back"})]}):(0,Vx.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),Kx.trackFunnelStep("signup","click_phone_send_code");const t=h.startsWith("+")?h:"".concat(u).concat(h),n=Hx("recaptcha-container");if(!n.success)return en.error("Failed to set up verification. Please refresh the page."),void c(!1);const r=await Rx(t,n.verifier);c(!1),r.success?(y(r.confirmationResult),en.success("Verification code sent!"),Kx.trackFunnelStep("signup","phone_code_sent")):(Kx.logCustomError("Phone verification failed",{error:r.error}),en.error(r.error||"Failed to send code"))},className:"space-y-3",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Phone Number"}),(0,Vx.jsxs)("div",{className:"flex gap-2",children:[(0,Vx.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"input w-24",children:[(0,Vx.jsx)("option",{value:"+1",children:"\ud83c\uddfa\ud83c\uddf8 +1"}),(0,Vx.jsx)("option",{value:"+44",children:"\ud83c\uddec\ud83c\udde7 +44"}),(0,Vx.jsx)("option",{value:"+61",children:"\ud83c\udde6\ud83c\uddfa +61"}),(0,Vx.jsx)("option",{value:"+91",children:"\ud83c\uddee\ud83c\uddf3 +91"})]}),(0,Vx.jsx)("input",{type:"tel",value:h,onChange:e=>f(e.target.value),className:"input flex-1",placeholder:"412345678",required:!0})]}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:"Enter your phone number without the country code"})]}),(0,Vx.jsxs)("button",{type:"submit",disabled:l,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:[l&&(0,Vx.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),l?"Sending Code...":"Send Verification Code"]}),(0,Vx.jsx)("div",{id:"recaptcha-container"})]})}),(0,Vx.jsxs)("button",{onClick:b,disabled:!0,className:"w-full btn bg-[#1877F2] text-white hover:bg-[#166FE5] mb-6 opacity-50 cursor-not-allowed",title:"Facebook login coming soon",children:[(0,Vx.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook (Coming Soon)"]}),(0,Vx.jsxs)("div",{className:"relative mb-6",children:[(0,Vx.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Vx.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Vx.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Vx.jsx)("span",{className:"px-2 bg-white text-text-secondary",children:"Or"})})]}),(0,Vx.jsxs)("form",{onSubmit:async t=>{let n;t.preventDefault(),c(!0),Kx.trackFunnelStep("signup",a?"click_email_signup":"click_email_signin"),n=a?await Lx(e,r,A):await Dx(e,r),c(!1),n.success?(Kx.trackFunnelStep("signup",a?"complete_email_signup":"complete_email_signin"),en.success(a?"Account created!":"Welcome back!"),v("/")):(Kx.logCustomError("Email auth failed",{error:n.error,isSignUp:a}),en.error(n.error||"Authentication failed"))},className:"space-y-4",children:[a&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Display Name"}),(0,Vx.jsx)("input",{type:"text",value:A,onChange:e=>i(e.target.value),className:"input",placeholder:"Your name",required:!0})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Email"}),(0,Vx.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),className:"input",placeholder:"you@example.com",required:!0})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Password"}),(0,Vx.jsx)("input",{type:"password",value:r,onChange:e=>s(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,minLength:6})]}),(0,Vx.jsx)("button",{type:"submit",disabled:l,className:"w-full btn btn-secondary",children:l?"Please wait...":a?"Sign Up":"Sign In"})]}),(0,Vx.jsx)("div",{className:"mt-6 text-center",children:(0,Vx.jsx)("button",{onClick:()=>o(!a),className:"text-primary font-semibold hover:underline",children:a?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),(0,Vx.jsx)("div",{className:"text-center mt-6 text-sm text-text-secondary",children:(0,Vx.jsx)("p",{children:"By continuing, you agree to our Terms of Service"})})]})})},Wx=(0,t.createContext)(),zx=()=>{const e=(0,t.useContext)(Wx);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},qx=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(null),[A,i]=(0,t.useState)(null),[a,o]=(0,t.useState)(!0),l=(0,t.useRef)(null);return(0,t.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("invite");if(e){console.log("\ud83d\udcbe Saving invite code to localStorage:",e),localStorage.setItem("pending_invite",e);(async()=>{try{const t=cp(Qx,"users",e),n=await fm(t);if(n.exists()){const t=n.data();localStorage.setItem("inviter_info",JSON.stringify({uid:e,displayName:t.displayName,photoURL:t.photoURL})),console.log("\u2705 Inviter info saved:",t.displayName)}}catch(t){console.error("Failed to fetch inviter info:",t)}})();const t=window.location.pathname;window.history.replaceState({},"",t)}},[]),(0,t.useEffect)(()=>{const e=Fx.onAuthStateChanged(async e=>{if(console.group("\ud83d\udd10 Auth State Changed"),console.log("User:",e),console.log("User UID:",null===e||void 0===e?void 0:e.uid),console.groupEnd(),s(e),e){Kx.setUser(e.uid);const t=cp(Qx,"users",e.uid);console.log("\ud83d\udcc4 Fetching user document at path:","users/".concat(e.uid));const n=await fm(t);console.log("\ud83d\udcc4 User document exists:",n.exists());const r=!n.exists();if(r)await gm(t,{displayName:e.displayName||"New User",email:e.email,phoneNumber:e.phoneNumber||null,photoURL:e.photoURL||null,stats:{joinedAt:wo.now(),totalCheckIns:0,completedCheckIns:0,alertedCheckIns:0,totalBesties:0},notificationPreferences:{whatsapp:!1,email:!0},notificationsEnabled:!1,smsSubscription:{active:!1},lastActive:wo.now(),onboardingCompleted:!1});else{const e={lastActive:wo.now()};void 0===n.data().onboardingCompleted&&(e.onboardingCompleted=!0),n.data().notifications&&!n.data().notificationPreferences&&(e.notificationPreferences=n.data().notifications),void 0===n.data().notificationsEnabled&&(e.notificationsEnabled=!!n.data().fcmToken),await ym(t,e)}const s=localStorage.getItem("pending_invite");if(s&&(await(async(e,t)=>{if(e&&t&&t!==e.uid)try{const r=cp(Qx,"users",t),s=await fm(r);if(!s.exists())return console.log("Invalid invite - user does not exist"),localStorage.removeItem("pending_invite"),void localStorage.removeItem("inviter_info");const A=s.data(),i=cp(Qx,"users",e.uid),a=await fm(i),o=a.exists()?a.data():{};localStorage.setItem("inviter_info",JSON.stringify({uid:t,displayName:A.displayName,photoURL:A.photoURL}));const l=[qp(lp(Qx,"besties"),Xp("requesterId","==",t),Xp("recipientId","==",e.uid)),qp(lp(Qx,"besties"),Xp("requesterId","==",e.uid),Xp("recipientId","==",t)),qp(lp(Qx,"besties"),Xp("requesterId","==",t),Xp("recipientPhone","==",e.phoneNumber||e.email))];let c=!1;for(let t of l){const n=await mm(t);if(!n.empty){const t=n.docs[0];await ym(cp(Qx,"besties",t.id),{status:"accepted",acceptedAt:wo.now(),recipientId:e.uid,recipientName:o.displayName||e.displayName||"Unknown",recipientPhone:e.phoneNumber||e.email,requesterName:A.displayName||"Unknown",requesterPhone:A.phoneNumber||A.email}),c=!0;break}}c||await wm(lp(Qx,"besties"),{requesterId:t,recipientId:e.uid,status:"accepted",acceptedAt:wo.now(),createdAt:wo.now(),requesterName:A.displayName||"Unknown",requesterPhone:A.phoneNumber||A.email,recipientName:o.displayName||e.displayName||"Unknown",recipientPhone:e.phoneNumber||e.email});try{await wm(lp(Qx,"bestie_celebrations"),{userId:e.uid,bestieId:t,bestieName:A.displayName||"Unknown",bestiePhotoURL:A.photoURL||null,seen:!1,createdAt:wo.now()}),await wm(lp(Qx,"bestie_celebrations"),{userId:t,bestieId:e.uid,bestieName:o.displayName||e.displayName||"Unknown",bestiePhotoURL:o.photoURL||e.photoURL||null,seen:!1,createdAt:wo.now()}),console.log("\u2705 Celebration documents created for both users")}catch(n){console.error("Failed to create celebration documents:",n)}localStorage.removeItem("pending_invite"),console.log("Invite processed successfully for:",A.displayName)}catch(n){console.error("Auto-add bestie failed:",n)}})(e,s),!r)){const e=localStorage.getItem("inviter_info");if(e){try{const{displayName:t}=JSON.parse(e);en.success("You're now besties with ".concat(t,"! \ud83d\udc9c"),{duration:5e3})}catch(Pe){console.error("Failed to parse inviter info:",Pe)}localStorage.removeItem("inviter_info")}}l.current&&l.current(),console.log("\ud83d\udce1 AuthContext: Setting up Firestore listener for user:",e.uid),l.current=vm(t,t=>{if(console.group("\ud83d\udce1 Firestore Listener Callback"),console.log("Document exists:",t.exists()),t.exists()){const e=Re({id:t.id},t.data());console.log("User data loaded:",e),console.log("isAdmin field:",e.isAdmin),i(e)}else console.error("\u274c User document does not exist at path:","users/".concat(e.uid));console.groupEnd(),o(!1)},e=>{console.error("\u274c Firestore listener error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),o(!1)})}else l.current&&(l.current(),l.current=null),Kx.setUser(null),i(null),o(!1)});return()=>{e(),l.current&&l.current()}},[]),(0,Vx.jsx)(Wx.Provider,{value:{currentUser:r,userData:A,loading:a},children:n})},Yx=()=>{const{currentUser:e,userData:n}=zx(),r=te(),[s,A]=(0,t.useState)("welcome"),[i,a]=(0,t.useState)(0),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=localStorage.getItem("inviter_info");if(e)try{g(JSON.parse(e))}catch(Pe){console.error("Failed to parse inviter info:",Pe)}},[]),(0,t.useEffect)(()=>{null!==n&&void 0!==n&&n.displayName&&!o?l(n.displayName):null!==e&&void 0!==e&&e.displayName&&!o&&l(e.displayName)},[n,e,o]);const y=[{emoji:"\ud83d\udc4b",title:"Welcome to Besties!",description:"Your personal safety check-in app that keeps your loved ones informed."},{emoji:"\u23f0",title:"How It Works",description:"Create a check-in with a time limit. If you don't mark yourself safe before time runs out, your besties get alerted."},{emoji:"\ud83d\udc9c",title:"Your Safety Network",description:"Add up to 5 besties to your circle. They'll be notified if you miss a check-in, so they can make sure you're okay."},{emoji:"\ud83d\udcf1",title:"Stay Connected",description:"Your besties get SMS alerts when you miss a check-in. They can also see your location and notes from your last check-in."},{emoji:"\u2728",title:"Let's Get Started!",description:"We'll help you set up your profile and add your first bestie. Then you'll be ready to create your first check-in!"}],x=y[i];(0,t.useEffect)(()=>{"bestie-circle"===s&&e&&w()},[s,e]);const w=async()=>{p(!0);try{const[t,n]=await Promise.all([mm(qp(lp(Qx,"besties"),Xp("requesterId","==",e.uid),Xp("status","==","accepted"))),mm(qp(lp(Qx,"besties"),Xp("recipientId","==",e.uid),Xp("status","==","accepted")))]);h(!t.empty||!n.empty)}catch(t){console.error("Error checking besties:",t)}finally{p(!1)}},v=async()=>{if(o.trim())try{await ym(cp(Qx,"users",e.uid),{displayName:o.trim()}),A("photo")}catch(t){console.error("Error updating name:",t),en.error("Failed to update name")}else en.error("Please enter a name")},b=async t=>{const n=t.target.files[0];if(!n)return;if(n.size>5242880)return void en.error("Photo must be less than 5MB");u(!0);const r=en.loading("Uploading photo...");try{const t=Og(Ix,"profile-pictures/".concat(e.uid,"/").concat(Date.now(),"_").concat(n.name));await Rg(t,n);const s=await Pg(t);await ym(cp(Qx,"users",e.uid),{photoURL:s}),en.success("Photo uploaded!",{id:r}),A(m?"invite-welcome":"bestie-circle")}catch(s){console.error("Error uploading photo:",s),en.error("Failed to upload photo",{id:r})}finally{u(!1)}},B=()=>{A(m?"invite-welcome":"bestie-circle")},C=async()=>{try{await ym(cp(Qx,"users",e.uid),{onboardingCompleted:!0}),r(d?"/create":"/profile")}catch(t){console.error("Error completing onboarding:",t),en.error("Failed to complete onboarding")}};return"welcome"===s?(0,Vx.jsx)("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Vx.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83d\udc9c"}),(0,Vx.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Welcome to Besties!"}),(0,Vx.jsx)("p",{className:"text-xl text-white/90 mb-8",children:"Your personal safety network in your pocket"}),(0,Vx.jsx)("button",{onClick:()=>A("slides"),className:"btn bg-white text-primary hover:bg-white/90 text-lg px-8 py-4",children:"Get Started \u2192"})]})}):"slides"===s?(0,Vx.jsx)("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Vx.jsx)("div",{className:"text-7xl mb-6",children:x.emoji}),(0,Vx.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-4",children:x.title}),(0,Vx.jsx)("p",{className:"text-lg text-text-secondary mb-8",children:x.description}),(0,Vx.jsx)("div",{className:"flex justify-center gap-2 mb-8",children:y.map((e,t)=>(0,Vx.jsx)("div",{className:"w-2 h-2 rounded-full transition-all ".concat(t===i?"bg-primary w-6":"bg-gray-300")},t))}),(0,Vx.jsx)("div",{className:"flex gap-3",children:i<y.length-1?(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("button",{onClick:()=>A("name"),className:"flex-1 btn btn-secondary",children:"Skip"}),(0,Vx.jsx)("button",{onClick:()=>a(i+1),className:"flex-1 btn btn-primary",children:"Next \u2192"})]}):(0,Vx.jsx)("button",{onClick:()=>A("name"),className:"w-full btn btn-primary text-lg py-4",children:"Let's check your details! \u2192"})})]})}):"name"===s?(0,Vx.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-md w-full",children:[(0,Vx.jsxs)("div",{className:"text-center mb-8",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc64"}),(0,Vx.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Is this name correct?"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"This is how your besties will see you"})]}),(0,Vx.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full p-4 border-2 border-gray-300 rounded-xl focus:border-primary focus:outline-none text-lg mb-6",placeholder:"Your name"}),(0,Vx.jsx)("button",{onClick:v,className:"w-full btn btn-primary text-lg py-4",children:"Looks Good! \u2713"})]})}):"photo"===s?(0,Vx.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-md w-full",children:[(0,Vx.jsxs)("div",{className:"text-center mb-8",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf7"}),(0,Vx.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Add a Profile Picture?"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Help your besties recognize you (optional)"})]}),(null===n||void 0===n?void 0:n.photoURL)&&(0,Vx.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Vx.jsx)("img",{src:n.photoURL,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-primary"})}),(0,Vx.jsxs)("label",{className:"block w-full mb-4",children:[(0,Vx.jsx)("div",{className:"btn btn-primary text-lg py-4 text-center cursor-pointer",children:c?"Uploading...":"\ud83d\udce4 Upload Photo"}),(0,Vx.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:c})]}),(0,Vx.jsx)("button",{onClick:B,className:"w-full btn btn-secondary text-lg py-4",disabled:c,children:"Skip for Now \u2192"})]})}):"invite-welcome"===s&&m?(0,Vx.jsx)("div",{className:"min-h-screen bg-gradient-secondary flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Vx.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83d\udc9c"}),m.photoURL?(0,Vx.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Vx.jsx)("img",{src:m.photoURL,alt:m.displayName,className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl"})}):(0,Vx.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Vx.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-primary flex items-center justify-center text-white text-5xl font-display border-4 border-white shadow-xl",children:(null===(N=m.displayName)||void 0===N?void 0:N[0])||"?"})}),(0,Vx.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Welcome to Besties!"}),(0,Vx.jsxs)("p",{className:"text-2xl text-white/90 mb-2",children:["You accepted ",(0,Vx.jsxs)("span",{className:"font-bold",children:[m.displayName,"'s"]})," request"]}),(0,Vx.jsx)("p",{className:"text-xl text-white/90 mb-8",children:"You are now besties! \ud83c\udf89"}),(0,Vx.jsx)("button",{onClick:()=>{localStorage.removeItem("inviter_info"),g(null),A("bestie-circle")},className:"btn bg-white text-primary hover:bg-white/90 text-lg px-8 py-4",children:"Continue \u2192"})]})}):"bestie-circle"===s?f?(0,Vx.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,Vx.jsx)("div",{className:"spinner"})}):(0,Vx.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4 overflow-y-auto",children:(0,Vx.jsxs)("div",{className:"max-w-2xl w-full py-8",children:[(0,Vx.jsxs)("div",{className:"text-center mb-8",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\u2b50"}),(0,Vx.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Your Bestie Circle"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"These are the 5 besties who get notified if you miss a check-in."}),!d&&(0,Vx.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:(0,Vx.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"\u26a0\ufe0f You need at least one bestie to create a check-in"})}),d&&(0,Vx.jsx)("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:(0,Vx.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"\u2705 Great! You already have a bestie in your circle"})})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg mb-4 text-center",children:"How It Works:"}),(0,Vx.jsxs)("ul",{className:"space-y-3 text-sm text-text-secondary",children:[(0,Vx.jsxs)("li",{className:"flex gap-3",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"1\ufe0f\u20e3"}),(0,Vx.jsx)("span",{children:"Choose up to 5 besties for your safety circle"})]}),(0,Vx.jsxs)("li",{className:"flex gap-3",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"2\ufe0f\u20e3"}),(0,Vx.jsx)("span",{children:"They'll get SMS alerts if you miss a check-in"})]}),(0,Vx.jsxs)("li",{className:"flex gap-3",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"3\ufe0f\u20e3"}),(0,Vx.jsx)("span",{children:"You can change who's in your circle anytime"})]})]})]}),d?(0,Vx.jsx)("button",{onClick:C,className:"w-full btn btn-primary text-lg py-4",children:"Start Creating Check-Ins! \u2192"}):(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("button",{onClick:C,className:"w-full btn btn-primary text-lg py-4 mb-3",children:"\u2795 Add Your First Bestie"}),(0,Vx.jsx)("p",{className:"text-xs text-center text-text-secondary",children:"You'll be taken to your profile. Click on a + button in your bestie circle to continue"})]})]})}):null;var N},Xx=(0,t.createContext)(),Jx=()=>{const e=(0,t.useContext)(Xx);if(!e)throw new Error("useDarkMode must be used within DarkModeProvider");return e},Zx=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)});(0,t.useEffect)(()=>{localStorage.setItem("darkMode",JSON.stringify(r)),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);return(0,Vx.jsx)(Xx.Provider,{value:{isDark:r,toggle:()=>s(!r)},children:n})},$x=()=>{var e;const{userData:n}=zx(),{isDark:r,toggle:s}=Jx(),A=$(),i=te(),[a,o]=(0,t.useState)(!1),l=(0,t.useRef)(null),c=e=>A.pathname===e;(0,t.useEffect)(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};if(a)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]);return(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("header",{className:"".concat(r?"bg-gray-900":"bg-white"," shadow-sm sticky top-0 z-40 transition-colors"),children:(0,Vx.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,Vx.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Vx.jsx)(ke,{to:"/",className:"flex items-center gap-2",children:(0,Vx.jsx)("span",{className:"font-display text-2xl text-gradient",children:"Besties"})}),(0,Vx.jsxs)("nav",{className:"hidden md:flex items-center gap-6",children:[(0,Vx.jsx)(ke,{to:"/",className:"font-semibold transition-colors ".concat(c("/")?"text-primary":r?"text-gray-300 hover:text-primary":"text-text-secondary hover:text-primary"),children:"Home"}),(0,Vx.jsx)(ke,{to:"/besties",className:"font-semibold transition-colors ".concat(c("/besties")?"text-primary":r?"text-gray-300 hover:text-primary":"text-text-secondary hover:text-primary"),children:"Besties"}),(0,Vx.jsx)(ke,{to:"/profile",className:"font-semibold transition-colors ".concat(c("/profile")?"text-primary":r?"text-gray-300 hover:text-primary":"text-text-secondary hover:text-primary"),children:"Profile"})]}),(0,Vx.jsxs)("div",{className:"relative",ref:l,children:[(0,Vx.jsx)("button",{onClick:()=>o(!a),className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display overflow-hidden hover:opacity-90 transition-opacity",children:null!==n&&void 0!==n&&n.photoURL?(0,Vx.jsx)("img",{src:n.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(0,Vx.jsx)("span",{children:(null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e[0])||"U"})}),a&&(0,Vx.jsxs)("div",{className:"absolute right-0 mt-2 w-48 ".concat(r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg shadow-lg border overflow-hidden animate-scale-up transition-colors"),children:[(0,Vx.jsxs)("div",{className:"px-4 py-3 ".concat(r?"border-gray-700":"border-gray-200"," border-b"),children:[(0,Vx.jsx)("div",{className:"font-semibold ".concat(r?"text-gray-100":"text-text-primary"," truncate"),children:(null===n||void 0===n?void 0:n.displayName)||"User"}),(0,Vx.jsx)("div",{className:"text-xs ".concat(r?"text-gray-400":"text-text-secondary"," truncate"),children:null===n||void 0===n?void 0:n.email})]}),(0,Vx.jsxs)("button",{onClick:()=>{o(!1),i("/profile")},className:"w-full px-4 py-2 text-left ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]}),(0,Vx.jsxs)("button",{onClick:()=>{o(!1),i("/settings")},className:"w-full px-4 py-2 text-left ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Vx.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,Vx.jsxs)("button",{onClick:()=>{o(!1),i("/history")},className:"w-full px-4 py-2 text-left ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),(0,Vx.jsx)("div",{className:"".concat(r?"border-gray-700":"border-gray-200"," border-t"),children:(0,Vx.jsxs)("button",{onClick:()=>{s(),en.success("".concat(r?"Light":"Dark"," mode enabled"))},className:"w-full px-4 py-2 text-left ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center justify-between"),children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2",children:[r?(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),(0,Vx.jsx)("span",{children:r?"Light Mode":"Dark Mode"})]}),(0,Vx.jsx)("span",{className:"text-xs ".concat(r?"text-gray-400":"text-text-secondary"),children:r?"\u2600\ufe0f":"\ud83c\udf19"})]})}),(0,Vx.jsx)("div",{className:"".concat(r?"border-gray-700":"border-gray-200"," border-t"),children:(0,Vx.jsxs)("button",{onClick:async()=>{(await Ox()).success?(en.success("Signed out successfully"),i("/login")):en.error("Sign out failed")},className:"w-full px-4 py-2 text-left ".concat(r?"hover:bg-red-900/30":"hover:bg-red-50"," transition-colors flex items-center gap-2 text-red-600"),children:[(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})]})})}),(0,Vx.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 ".concat(r?"bg-gray-900 border-gray-700":"bg-white border-gray-200"," border-t shadow-lg z-50 transition-colors"),children:(0,Vx.jsxs)("div",{className:"flex items-center justify-around py-3 safe-area-inset-bottom",children:[(0,Vx.jsxs)(ke,{to:"/",className:"flex flex-col items-center gap-1 transition-colors ".concat(c("/")?"text-primary":r?"text-gray-300":"text-text-secondary"),children:[(0,Vx.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Vx.jsx)("span",{className:"text-xs font-semibold",children:"Home"})]}),(0,Vx.jsxs)(ke,{to:"/besties",className:"flex flex-col items-center gap-1 transition-colors ".concat(c("/besties")?"text-primary":r?"text-gray-300":"text-text-secondary"),children:[(0,Vx.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,Vx.jsx)("span",{className:"text-xs font-semibold",children:"Besties"})]}),(0,Vx.jsxs)(ke,{to:"/profile",className:"flex flex-col items-center gap-1 transition-colors ".concat(c("/profile")?"text-primary":r?"text-gray-300":"text-text-secondary"),children:[(0,Vx.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,Vx.jsx)("span",{className:"text-xs font-semibold",children:"Profile"})]})]})})]})};function ew(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function tw(e){return ew(e,Date.now())}function nw(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function rw(e,t){const n=nw(e),r=nw(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}Math.pow(10,8);const sw=43200;function Aw(e,t){const n=nw(e),r=nw(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function iw(e){const t=nw(e);return t.setHours(23,59,59,999),t}function aw(e){const t=nw(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function ow(e){const t=nw(e);return+iw(t)===+aw(t)}function lw(e,t){const n=nw(e),r=nw(t),s=rw(n,r),A=Math.abs(Aw(n,r));let i;if(A<1)i=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*A);let t=rw(n,r)===-s;ow(nw(e))&&1===A&&1===rw(e,r)&&(t=!1),i=s*(A-Number(t))}return 0===i?0:i}function cw(e,t){return+nw(e)-+nw(t)}function uw(e,t,n){const r=cw(e,t)/1e3;return(s=null===n||void 0===n?void 0:n.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(r);var s}const dw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function hw(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const fw={date:hw({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:hw({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:hw({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},pw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function mw(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function gw(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],A=t.match(s);if(!A)return null;const i=A[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,e=>e.test(i));let l;l=e.valueCallback?e.valueCallback(o):o,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(i.length)}}}var yw;const xw={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=dw[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:fw,formatRelative:(e,t,n,r)=>pw[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:mw({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:mw({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:mw({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:mw({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:mw({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(yw={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(yw.matchPattern);if(!n)return null;const r=n[0],s=e.match(yw.parsePattern);if(!s)return null;let A=yw.valueCallback?yw.valueCallback(s[0]):s[0];return A=t.valueCallback?t.valueCallback(A):A,{value:A,rest:e.slice(r.length)}}),era:gw({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:gw({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:gw({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:gw({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:gw({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let ww={};function vw(){return ww}function bw(e){const t=nw(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Bw(e,t,n){var r,s;const A=vw(),i=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:A.locale)&&void 0!==r?r:xw,a=rw(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:null===n||void 0===n?void 0:n.addSuffix,comparison:a});let l,c;a>0?(l=nw(t),c=nw(e)):(l=nw(e),c=nw(t));const u=uw(c,l),d=(bw(c)-bw(l))/1e3,h=Math.round((u-d)/60);let f;if(h<2)return null!==n&&void 0!==n&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,o):u<10?i.formatDistance("lessThanXSeconds",10,o):u<20?i.formatDistance("lessThanXSeconds",20,o):u<40?i.formatDistance("halfAMinute",0,o):u<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):0===h?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",h,o);if(h<45)return i.formatDistance("xMinutes",h,o);if(h<90)return i.formatDistance("aboutXHours",1,o);if(h<1440){const e=Math.round(h/60);return i.formatDistance("aboutXHours",e,o)}if(h<2520)return i.formatDistance("xDays",1,o);if(h<sw){const e=Math.round(h/1440);return i.formatDistance("xDays",e,o)}if(h<86400)return f=Math.round(h/sw),i.formatDistance("aboutXMonths",f,o);if(f=lw(c,l),f<12){const e=Math.round(h/sw);return i.formatDistance("xMonths",e,o)}{const e=f%12,t=Math.trunc(f/12);return e<3?i.formatDistance("aboutXYears",t,o):e<9?i.formatDistance("overXYears",t,o):i.formatDistance("almostXYears",t+1,o)}}function Cw(e,t){return Bw(e,tw(e),t)}const Nw={extendCheckIn:ry(kx,"extendCheckIn"),completeCheckIn:ry(kx,"completeCheckIn"),sendBestieInvite:ry(kx,"sendBestieInvite"),acceptBestieRequest:ry(kx,"acceptBestieRequest"),declineBestieRequest:ry(kx,"declineBestieRequest"),triggerEmergencySOS:ry(kx,"triggerEmergencySOS"),createCheckoutSession:ry(kx,"createCheckoutSession"),createPortalSession:ry(kx,"createPortalSession"),sendTestAlert:ry(kx,"sendTestAlert"),migratePhoneNumbers:ry(kx,"migratePhoneNumbers")},Ew=[{title:"You're Safe!",subtitle:"Your besties have been notified \ud83d\udc9c",emoji:"\u2705"},{title:"Way to Go!",subtitle:"You're taking care of yourself!",emoji:"\ud83c\udf89"},{title:"Safety First!",subtitle:"Your besties are proud of you!",emoji:"\u2b50"},{title:"Great Job!",subtitle:"Staying safe makes everyone happy!",emoji:"\ud83d\udc9c"},{title:"You Did It!",subtitle:"Another successful check-in!",emoji:"\ud83c\udf8a"},{title:"Well Done!",subtitle:"Keep up the great safety habits!",emoji:"\u2728"},{title:"Amazing!",subtitle:"You're making safety a priority!",emoji:"\ud83c\udf1f"},{title:"Perfect!",subtitle:"Your besties can rest easy now!",emoji:"\ud83d\udcaf"}],Uw=()=>{const e=(0,t.useMemo)(()=>Ew[Math.floor(Math.random()*Ew.length)],[]);return(0,Vx.jsxs)("div",{className:"card p-8 bg-gradient-primary text-white text-center overflow-hidden relative",children:[(0,Vx.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((e,t)=>(0,Vx.jsx)("div",{className:"absolute text-2xl animate-bounce-slow",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(2*Math.random(),"s")},children:["\ud83c\udf89","\u2728","\ud83d\udc9c","\ud83c\udf8a","\u2b50"][Math.floor(5*Math.random())]},t))}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:e.emoji}),(0,Vx.jsx)("h2",{className:"font-display text-3xl mb-2",children:e.title}),(0,Vx.jsx)("p",{className:"text-lg opacity-90 mb-4",children:e.subtitle}),(0,Vx.jsx)("div",{className:"text-sm opacity-75",children:"Check-in completed successfully"})]})]})},Fw=e=>{var n;let{checkIn:r}=e;const[s,A]=(0,t.useState)(0),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(r.notes||""),[m,g]=(0,t.useState)(r.photoURLs||r.photoURL?[r.photoURL]:[]),[y,x]=(0,t.useState)(!1),[w,v]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=()=>{const e=(w||r.alertTime.toDate())-new Date;A(Math.max(0,e))};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[r.alertTime,w]);const b=async()=>{l(!0);const e=en.loading("Marking you safe...");try{var t;const s=await Nw.completeCheckIn({checkInId:r.id});var n;if(null===(t=s.data)||void 0===t||!t.success)throw new Error((null===(n=s.error)||void 0===n?void 0:n.message)||"Failed to complete check-in");{const t=cp(Qx,"checkins",r.id),n=await fm(t);if(!n.exists()||"completed"!==n.data().status)throw new Error("Check-in status verification failed");en.success("You're safe! \ud83d\udc9c",{id:e}),a(!0),setTimeout(()=>a(!1),3e3)}}catch(s){console.error("Error completing check-in:",s),"unavailable"===s.code?en.error("Cannot reach server. Please check your internet connection.",{id:e}):en.error(s.message||"Failed to complete check-in. Please try again.",{id:e})}finally{l(!1)}},B=async e=>{const t=w||r.alertTime.toDate(),n=new Date(t.getTime()+60*e*1e3);v(n),u(e),en.success("Extended by ".concat(e," minutes!"),{duration:2e3});try{var s;const t=await Nw.extendCheckIn({checkInId:r.id,additionalMinutes:e});var A;if(null===(s=t.data)||void 0===s||!s.success)throw new Error((null===(A=t.error)||void 0===A?void 0:A.message)||"Failed to extend check-in");{const e=cp(Qx,"checkins",r.id),t=await fm(e);if(!t.exists())throw new Error("Unable to verify extension");v(t.data().alertTime.toDate())}}catch(i){console.error("Error extending check-in:",i),v(null),"unavailable"===i.code?en.error("Cannot reach server. Extension cancelled.",{duration:4e3}):en.error(i.message||"Failed to extend check-in. Extension cancelled.",{duration:4e3})}finally{u(null)}},C="alerted"===r.status;return i?(0,Vx.jsx)(Uw,{}):(0,Vx.jsxs)("div",{className:"card p-6 ".concat(C?"border-2 border-danger":""),children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Vx.jsx)("span",{className:"text-base font-semibold text-text-secondary",children:"Time remaining:"}),(0,Vx.jsx)("span",{className:"font-display text-3xl ".concat(0===s?"text-danger":"text-primary"),children:0===s?"EXPIRED":(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),r=Math.floor(t%3600/60),s=t%60;return n>0?"".concat(n,"h ").concat(r,"m ").concat(s,"s"):"".concat(r,"m ").concat(s,"s")})(s)})]}),(0,Vx.jsx)("div",{className:"progress-bar h-3",children:(0,Vx.jsx)("div",{className:"progress-fill",style:{width:"".concat((()=>{const e=60*r.duration*1e3,t=e-s;return Math.min(100,Math.max(0,t/e*100))})(),"%")}})}),!C&&(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[(0,Vx.jsxs)("button",{onClick:()=>B(15),disabled:null!==c,className:"btn btn-secondary text-sm py-2 flex items-center justify-center gap-1",children:[15===c&&(0,Vx.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"+15m"]}),(0,Vx.jsxs)("button",{onClick:()=>B(30),disabled:null!==c,className:"btn btn-secondary text-sm py-2 flex items-center justify-center gap-1",children:[30===c&&(0,Vx.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"+30m"]}),(0,Vx.jsxs)("button",{onClick:()=>B(60),disabled:null!==c,className:"btn btn-secondary text-sm py-2 flex items-center justify-center gap-1",children:[60===c&&(0,Vx.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"+1h"]})]})]}),!C&&(0,Vx.jsx)("button",{onClick:b,disabled:o,className:"w-full btn btn-success text-lg mb-6",children:"\u2705 I'm Safe!"}),C&&(0,Vx.jsxs)("div",{className:"bg-danger/10 border border-danger rounded-xl p-4 text-center mb-6",children:[(0,Vx.jsx)("p",{className:"font-semibold text-danger mb-2",children:"\ud83d\udea8 Your besties have been alerted!"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary mb-4",children:"They know you haven't checked in"}),(0,Vx.jsx)("button",{onClick:b,disabled:o,className:"btn btn-success w-full",children:"\u2705 I'm Safe! (False Alarm)"})]}),(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Vx.jsx)("div",{className:"flex-1",children:(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary",children:r.location}),C&&(0,Vx.jsx)("span",{className:"badge badge-warning text-xs",children:"ALERTED"})]})})}),(m.length>0||!C)&&(0,Vx.jsxs)("div",{className:"mb-4",children:[(0,Vx.jsxs)("div",{className:"text-sm font-semibold text-text-secondary mb-2",children:["Photos (",m.length,"/5)"]}),m.length>0&&(0,Vx.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3",children:m.map((e,t)=>(0,Vx.jsxs)("div",{className:"relative aspect-square",children:[(0,Vx.jsx)("img",{src:e,alt:"Check-in ".concat(t+1),className:"w-full h-full object-cover rounded-xl"}),!C&&(0,Vx.jsx)("button",{onClick:()=>(async e=>{const t=m.filter((t,n)=>n!==e);try{await ym(cp(Qx,"checkins",r.id),{photoURLs:t}),g(t),en.success("Photo removed")}catch(n){console.error("Error removing photo:",n),en.error("Failed to remove photo")}})(t),className:"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-full text-sm font-bold hover:bg-red-600 flex items-center justify-center",children:"\u2715"})]},t))}),!C&&m.length<5&&(0,Vx.jsxs)("label",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-all",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcf7"}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:y?"Uploading...":m.length>0?"Add More Photos":"Add Photos"}),(0,Vx.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Click to upload (up to 5, max 5MB each)"}),(0,Vx.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=Array.from(e.target.files);if(0!==t.length)if(m.length+t.length>5)en.error("You can only have up to 5 photos per check-in");else{for(const e of t)if(e.size>5242880)return void en.error("".concat(e.name," is too large. Photos must be less than 5MB"));x(!0);try{const e=[];for(let s=0;s<t.length;s++){const n=t[s],A=Og(Ix,"checkins/".concat(r.id,"/").concat(Date.now(),"_").concat(s,"_").concat(n.name));await Rg(A,n);const i=await Pg(A);e.push(i)}const n=[...m,...e];await ym(cp(Qx,"checkins",r.id),{photoURLs:n}),g(n),en.success("".concat(e.length," photo").concat(e.length>1?"s":""," uploaded!"))}catch(n){console.error("Error uploading photos:",n),en.error("Failed to upload photos")}finally{x(!1)}}},className:"hidden",disabled:y})]})]}),(0,Vx.jsx)("div",{className:"mb-4",children:d?(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("textarea",{value:f,onChange:e=>p(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-xl focus:border-primary focus:outline-none resize-none",rows:"3",placeholder:"Add notes about your check-in..."}),(0,Vx.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Vx.jsx)("button",{onClick:async()=>{try{await ym(cp(Qx,"checkins",r.id),{notes:f}),h(!1),en.success("Notes updated!")}catch(e){console.error("Error saving notes:",e),en.error("Failed to save notes")}},className:"btn btn-primary text-sm flex-1",children:"\ud83d\udcbe Save Notes"}),(0,Vx.jsx)("button",{onClick:()=>{h(!1),p(r.notes||"")},className:"btn btn-secondary text-sm flex-1",children:"Cancel"})]})]}):(0,Vx.jsx)("div",{children:f?(0,Vx.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl",children:[(0,Vx.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,Vx.jsx)("div",{className:"text-xs font-semibold text-gray-500",children:"NOTES:"}),!C&&(0,Vx.jsx)("button",{onClick:()=>h(!0),className:"text-xs text-primary font-semibold hover:underline",children:"Edit"})]}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:f})]}):!C&&(0,Vx.jsx)("button",{onClick:()=>h(!0),className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-3 text-sm font-semibold text-gray-600 hover:border-primary hover:bg-primary/5 transition-all",children:"\ud83d\udcdd Add Notes"})})}),(0,Vx.jsx)("div",{className:"mb-4",children:(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary mb-2",children:["Watching over you: ",(null===(n=r.bestieIds)||void 0===n?void 0:n.length)||0," besties"]})}),(0,Vx.jsxs)("div",{className:"mt-4 text-xs text-text-secondary text-center",children:["Started ",Cw(r.createdAt.toDate(),{addSuffix:!0})]})]})},Qw=e=>{let{onQuickCheckIn:t}=e;return(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Quick Check-In"}),(0,Vx.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{emoji:"\u2615",label:"Coffee Date",minutes:30,color:"from-amber-400 to-orange-500"},{emoji:"\ud83c\udf7d\ufe0f",label:"Dinner",minutes:60,color:"from-rose-400 to-pink-500"},{emoji:"\ud83c\udfac",label:"Movie",minutes:120,color:"from-purple-400 to-indigo-500"},{emoji:"\ud83c\udf7b",label:"Drinks",minutes:90,color:"from-blue-400 to-cyan-500"}].map(e=>(0,Vx.jsxs)("button",{onClick:()=>t(e.minutes),className:"card p-6 hover:shadow-card-hover transition-all hover:scale-105 active:scale-95 bg-gradient-to-br ".concat(e.color," text-white"),children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:e.emoji}),(0,Vx.jsx)("div",{className:"font-display text-lg mb-1",children:e.label}),(0,Vx.jsxs)("div",{className:"text-sm opacity-90",children:[e.minutes," minutes"]})]},e.label))})]})},Iw=()=>{const[e,n]=(0,t.useState)(!1),r=async e=>{n(!0);try{const t=await Nw.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:en.error("Failed to start donation")}catch(t){console.error("Donation error:",t),en.error("Failed to start donation")}finally{n(!1)}};return(0,Vx.jsxs)("div",{className:"card p-6 bg-gradient-to-br from-primary/5 to-secondary/5 border-2 border-primary/20",children:[(0,Vx.jsxs)("div",{className:"text-center mb-4",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc9c"}),(0,Vx.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Keep Besties Free"}),(0,Vx.jsx)("p",{className:"text-text-secondary text-sm",children:"Your donation helps us keep safety accessible to everyone"})]}),(0,Vx.jsxs)("div",{className:"space-y-3",children:[(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Vx.jsx)("button",{onClick:()=>r(1),disabled:e,className:"btn btn-secondary text-sm",children:"$1/mo"}),(0,Vx.jsx)("button",{onClick:()=>r(5),disabled:e,className:"btn btn-primary text-sm",children:"$5/mo"}),(0,Vx.jsx)("button",{onClick:()=>r(10),disabled:e,className:"btn btn-secondary text-sm",children:"$10/mo"})]}),(0,Vx.jsx)("div",{className:"text-xs text-text-secondary text-center",children:"100% goes to keeping the app free \ud83d\udc9c"})]})]})},kw=e=>{let{templates:t=[],onSelect:n}=e;return 0===t.length?null:(0,Vx.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(e=>(0,Vx.jsxs)("button",{onClick:()=>n(e),className:"card p-4 text-left hover:shadow-card-hover transition-all hover:scale-105 active:scale-95",children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.name}),(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary mb-2",children:["\ud83d\udccd ",e.location]}),(0,Vx.jsxs)("div",{className:"text-xs text-primary font-semibold",children:["\u23f0 ",e.duration," min"]})]},e.id))})},jw=()=>{const{currentUser:e,userData:n}=zx(),[r,s]=(0,t.useState)(!1),[A,i]=(0,t.useState)(null),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(0),u=(0,t.useRef)(null),d=(0,t.useRef)(null),h=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!a)return;const e=e=>(e.preventDefault(),e.returnValue="Emergency alert is active! Hold the cancel button for 10 seconds to dismiss.",e.returnValue);return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[a]);const f=()=>{u.current&&(clearInterval(u.current),u.current=null),s(!1),i(null),en("SOS cancelled")},p=async()=>{try{let r="Location unavailable";if(navigator.geolocation)try{const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:3e3})});r="GPS: ".concat(e.coords.latitude.toFixed(4),", ").concat(e.coords.longitude.toFixed(4))}catch(t){console.error("Location error:",t)}await wm(lp(Qx,"emergency_sos"),{userId:e.uid,userName:(null===n||void 0===n?void 0:n.displayName)||"User",location:r,timestamp:wo.now(),status:"active",type:"sos",message:"\ud83d\udea8 EMERGENCY - User needs immediate help!"}),en.success("\ud83d\udea8 Emergency alert sent to all besties!"),s(!1),o(!0)}catch(r){console.error("Error sending SOS:",r),en.error("Failed to send emergency alert"),s(!1)}},m=()=>{h.current=Date.now(),c(0),d.current=setInterval(()=>{const e=Date.now()-h.current,t=Math.min(e/1e4*100,100);c(t),t>=100&&y()},50)},g=()=>{d.current&&(clearInterval(d.current),d.current=null),c(0),en.error("Hold button for 10 seconds to cancel alert")},y=()=>{d.current&&(clearInterval(d.current),d.current=null),o(!1),c(0),en.success("Emergency alert cancelled")};return a?(0,Vx.jsx)("div",{className:"fixed inset-0 bg-orange-500/95 z-[9999] flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"text-center max-w-md",children:[(0,Vx.jsx)("div",{className:"text-8xl mb-6 animate-pulse",children:"\ud83d\udea8"}),(0,Vx.jsx)("h2",{className:"text-4xl font-display text-white mb-4",children:"EMERGENCY ALERT SENT"}),(0,Vx.jsx)("p",{className:"text-xl text-white mb-8",children:"Your besties have been notified!"}),(0,Vx.jsxs)("div",{className:"relative",children:[(0,Vx.jsxs)("button",{onMouseDown:m,onMouseUp:g,onMouseLeave:g,onTouchStart:m,onTouchEnd:g,className:"btn bg-white text-orange-600 text-xl px-12 py-6 font-bold relative overflow-hidden",children:[(0,Vx.jsx)("div",{className:"absolute inset-0 bg-green-500/30 transition-all",style:{width:"".concat(l,"%")}}),(0,Vx.jsx)("span",{className:"relative z-10",children:0===l?"HOLD TO CANCEL":"".concat(Math.ceil((100-l)/10),"s")})]}),(0,Vx.jsx)("p",{className:"text-sm text-white mt-4",children:"Hold for 10 seconds to cancel the emergency alert"})]})]})}):r?(0,Vx.jsx)("div",{className:"fixed inset-0 bg-danger/95 z-50 flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-9xl font-display text-white mb-8 animate-pulse",children:A}),(0,Vx.jsx)("h2",{className:"text-3xl font-display text-white mb-4",children:"EMERGENCY SOS"}),(0,Vx.jsx)("p",{className:"text-xl text-white mb-8",children:"Sending alert to all besties..."}),(0,Vx.jsx)("button",{onClick:f,className:"btn bg-white text-danger text-xl px-12 py-4",children:"CANCEL"})]})}):(0,Vx.jsxs)("button",{onClick:()=>{i(5),s(!0),u.current=setInterval(()=>{i(e=>e<=1?(clearInterval(u.current),u.current=null,p(),null):e-1)},1e3)},className:"fixed bottom-24 right-6 w-20 h-20 bg-danger text-white rounded-full shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 flex flex-col items-center justify-center transition-all duration-200 z-40 animate-pulse",title:"Emergency SOS - Hold for 5 seconds",children:[(0,Vx.jsx)("span",{className:"text-3xl",children:"\ud83c\udd98"}),(0,Vx.jsx)("span",{className:"text-xs font-bold",children:"SOS"})]})};var Sw=n(239),Tw=n.n(Sw);const _w=()=>{var e;const{currentUser:n,userData:r}=zx(),[s,A]=(0,t.useState)([]),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),d=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!c)return;(()=>{const e=["#9333ea","#ec4899","#8b5cf6","#d946ef","#a855f7"],t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="10000",document.body.appendChild(t);for(let r=0;r<100;r++){const n=document.createElement("div");n.style.position="absolute",n.style.width="10px",n.style.height="10px",n.style.backgroundColor=e[Math.floor(Math.random()*e.length)],n.style.left=100*Math.random()+"%",n.style.top="-10px",n.style.opacity=Math.random(),n.style.transform="rotate(".concat(360*Math.random(),"deg)");const r=3*Math.random()+2,s=.5*Math.random();n.style.animation="fall ".concat(r,"s linear ").concat(s,"s forwards"),t.appendChild(n)}const n=document.createElement("style");n.innerHTML="\n        @keyframes fall {\n          to {\n            transform: translateY(100vh) rotate(720deg);\n            opacity: 0;\n          }\n        }\n      ",document.head.appendChild(n),setTimeout(()=>{t.remove(),n.remove()},5e3)})()},[c]),(0,t.useEffect)(()=>{if(!n||null===r||void 0===r||!r.onboardingCompleted)return;(async()=>{try{const e=qp(lp(Qx,"bestie_celebrations"),Xp("userId","==",n.uid),Xp("seen","==",!1)),t=await mm(e);if(!t.empty){const e=t.docs.map(e=>Re({id:e.id},e.data()));A(e),a(e[0]),l(e[0].id),u(!0),console.log("\ud83c\udf89 Found ".concat(e.length," celebration(s) to show"))}}catch(e){console.error("Error checking for celebrations:",e)}})()},[n,r]);const h=async e=>{try{const t=d.current;if(!t)return;const n=(await Tw()(t,{backgroundColor:null,scale:2})).toDataURL("image/png"),r="".concat(i.bestieName," and I are now besties on Besties App! \ud83d\udc9c"),s="https://bestiesapp.web.app";switch(e){case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r),"&url=").concat(encodeURIComponent(s)),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(s),"&quote=").concat(encodeURIComponent(r)),"_blank");break;case"download":const e=document.createElement("a");e.download="besties-celebration.png",e.href=n,e.click()}}catch(t){console.error("Error sharing:",t)}};return c&&i?(0,Vx.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center z-[9999] p-4",children:(0,Vx.jsxs)("div",{className:"max-w-md w-full",children:[(0,Vx.jsx)("div",{ref:d,className:"bg-gradient-to-br from-purple-500 to-pink-500 p-4 sm:p-6 md:p-8 rounded-3xl",children:(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-5xl sm:text-6xl md:text-8xl mb-4 sm:mb-6 animate-bounce",children:"\ud83c\udf89"}),(0,Vx.jsxs)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-display text-white mb-3 sm:mb-4 px-2",children:["You and ",i.bestieName||"your friend"," are besties!"]}),(0,Vx.jsx)("p",{className:"text-base sm:text-lg md:text-xl text-white/90 mb-2 px-2",children:"You can now add each other as emergency contacts"}),(0,Vx.jsxs)("div",{className:"flex justify-center items-center gap-3 sm:gap-4 my-6 sm:my-8",children:[(0,Vx.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-white rounded-full flex items-center justify-center shadow-xl overflow-hidden flex-shrink-0",children:i.bestiePhotoURL?(0,Vx.jsx)("img",{src:i.bestiePhotoURL,alt:i.bestieName,className:"w-full h-full object-cover"}):(0,Vx.jsx)("div",{className:"text-2xl sm:text-3xl text-purple-600",children:(null===(e=i.bestieName)||void 0===e?void 0:e[0])||"?"})}),(0,Vx.jsx)("div",{className:"text-3xl sm:text-4xl animate-pulse flex-shrink-0",children:"\ud83d\udc9c"}),(0,Vx.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-white rounded-full flex items-center justify-center shadow-xl overflow-hidden flex-shrink-0",children:null!==r&&void 0!==r&&r.photoURL?(0,Vx.jsx)("img",{src:r.photoURL,alt:"You",className:"w-full h-full object-cover"}):(0,Vx.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:"YOU"})})]}),(0,Vx.jsxs)("p",{className:"text-sm sm:text-base text-white/80 mb-4 sm:mb-6 px-2",children:[i.bestieName," will be notified if you don't check in on time"]})]})}),s.length>1&&(0,Vx.jsx)("div",{className:"text-center mt-4",children:(0,Vx.jsxs)("p",{className:"text-white text-sm",children:[s.length-1," more celebration",s.length>2?"s":""," remaining"]})}),(0,Vx.jsxs)("div",{className:"mt-4 sm:mt-6 flex justify-center gap-3 sm:gap-4",children:[(0,Vx.jsx)("button",{onClick:()=>h("twitter"),className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 sm:p-3 transition-all",title:"Share on Twitter",children:(0,Vx.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),(0,Vx.jsx)("button",{onClick:()=>h("facebook"),className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 sm:p-3 transition-all",title:"Share on Facebook",children:(0,Vx.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"})})}),(0,Vx.jsx)("button",{onClick:()=>h("download"),className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 sm:p-3 transition-all",title:"Download image",children:(0,Vx.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),(0,Vx.jsx)("div",{className:"flex justify-center mt-4 sm:mt-6",children:(0,Vx.jsx)("button",{onClick:async()=>{if(o)try{await ym(cp(Qx,"bestie_celebrations",o),{seen:!0}),console.log("\u2705 Celebration marked as seen")}catch(t){console.error("Error marking celebration as seen:",t)}const e=s.slice(1);e.length>0?(A(e),a(e[0]),l(e[0].id),console.log("\ud83d\udccb Showing next celebration (".concat(e.length," remaining)"))):(u(!1),a(null),l(null))},className:"btn bg-white text-purple-600 hover:bg-white/90 text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 font-bold",children:"Continue \u2192"})})]})}):null},Dw=["Stay safe out there, queen! \ud83d\udc51","Your besties have your back! \ud83d\udc9c","Looking out for you, babe! \u2728","Let's keep you safe, hun! \ud83d\udee1\ufe0f","Ready to slay safely? \ud83d\udc85","Your safety squad is here! \ud83c\udf1f","Go live your life, we got you! \ud83d\udc95","Be bold, be safe, be you! \u26a1","Adventure awaits safely! \ud83c\udf38","Your crew is watching out! \ud83d\udc6f\u200d\u2640\ufe0f","Stay fierce, stay safe! \ud83d\udd25","We're here if you need us! \ud83e\udd17","Go make memories safely! \ud83d\udcf8","Your safety, your way! \ud83d\udc96","Protected and empowered! \u2b50","Living your best life safely! \ud83e\udd8b","Your peace of mind matters! \ud83c\udf3a","Safe vibes only! \u270c\ufe0f","Let's keep you covered, sis! \ud83d\udcaa","Confidence + Safety = You! \ud83d\udc8e"],Lw=()=>{var e,n,r,s,A,i;const{currentUser:a,userData:o,loading:l}=zx(),c=te(),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)([]),[p,m]=(0,t.useState)(!0),g=(0,t.useMemo)(()=>Dw[Math.floor(Math.random()*Dw.length)],[]);(0,t.useEffect)(()=>{l||o&&!1===o.onboardingCompleted&&c("/onboarding")},[o,l,c]),(0,t.useEffect)(()=>{if(l)return;localStorage.getItem("pending_invite")&&!a&&(console.log("\ud83d\udce8 Pending invite detected, redirecting to login..."),c("/login"))},[a,l,c]),(0,t.useEffect)(()=>{if(!a)return;const e=vm(qp(lp(Qx,"checkins"),Xp("userId","==",a.uid),Xp("status","in",["active","alerted"])),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),d(t),m(!1)},e=>{console.error("Error loading check-ins:",e),d([]),m(!1)}),t=vm(qp(lp(Qx,"templates"),Xp("userId","==",a.uid)),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),f(t)},e=>{console.error("Error loading templates:",e),f([])});return()=>{e(),t()}},[a]);return p?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6 animate-fade-in",children:[(0,Vx.jsxs)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:["Hey ",(null===o||void 0===o?void 0:o.displayName)||"there","! \ud83d\udc4b"]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:u.length>0?"You have ".concat(u.length," active check-in").concat(u.length>1?"s":""):g})]}),0===u.length&&(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)(Qw,{onQuickCheckIn:e=>{c("/create",{state:{quickMinutes:e}})}}),(0,Vx.jsx)("button",{onClick:()=>c("/create"),className:"w-full btn btn-primary text-lg py-4 mb-6",children:"\u2728 Create Custom Check-In"})]}),u.length>0&&(0,Vx.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"Active Check-Ins"}),u.map(e=>(0,Vx.jsx)(Fw,{checkIn:e},e.id))]}),h.length>0&&0===u.length&&(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Your Templates"}),(0,Vx.jsx)(kw,{templates:h,onSelect:e=>{c("/create",{state:{template:e}})}})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary",children:"Your Safety Stats"}),(0,Vx.jsx)("button",{onClick:()=>c("/history"),className:"text-primary font-semibold hover:underline text-sm",children:"View History \u2192"})]}),(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-primary",children:(null===o||void 0===o||null===(e=o.stats)||void 0===e?void 0:e.completedCheckIns)||0}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-ins"})]}),(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:(null===o||void 0===o||null===(n=o.stats)||void 0===n?void 0:n.totalBesties)||0}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Besties"})]}),(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-accent",children:(null===o||void 0===o||null===(r=o.stats)||void 0===r?void 0:r.totalCheckIns)||0}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]})]})]}),(0,Vx.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-100",children:(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udc9c"}),(0,Vx.jsx)("h3",{className:"font-display text-2xl text-gradient mb-3",children:"You're Part of Something Special"}),(0,Vx.jsx)("p",{className:"text-text-secondary leading-relaxed mb-4",children:"Hey bestie! We just wanted to say\u2014you being here means everything. Every check-in you create, every friend you add, every safe moment you share... you're part of a community that's got each other's backs. We're building this together, and we couldn't do it without amazing people like you. You're not just using an app\u2014you're one of the besties. \ud83d\udc95"}),(0,Vx.jsx)("p",{className:"text-sm text-primary font-semibold",children:"Keep slaying safely, queen! \ud83d\udc51\u2728"})]})}),!(null!==o&&void 0!==o&&null!==(s=o.donationStats)&&void 0!==s&&s.isActive)&&(0,Vx.jsx)(Iw,{}),!(null!==o&&void 0!==o&&null!==(A=o.donationStats)&&void 0!==A&&A.isActive)&&(0,Vx.jsxs)("div",{className:"flex items-center gap-4 my-6",children:[(0,Vx.jsx)("div",{className:"flex-1 h-px bg-gray-300"}),(0,Vx.jsx)("span",{className:"text-text-secondary font-semibold",children:"OR"}),(0,Vx.jsx)("div",{className:"flex-1 h-px bg-gray-300"})]}),!(null!==o&&void 0!==o&&null!==(i=o.donationStats)&&void 0!==i&&i.isActive)&&(0,Vx.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-100",children:(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udc6f\u200d\u2640\ufe0f"}),(0,Vx.jsx)("h3",{className:"font-display text-2xl text-gradient mb-3",children:"Grow the Squad!"}),(0,Vx.jsx)("p",{className:"text-text-secondary leading-relaxed mb-4",children:"Love Besties? Invite your friends! The more people who join, the stronger our safety network becomes. Plus, spreading the word helps us keep the app free for everyone. Share the love! \ud83d\udc96"}),(0,Vx.jsx)("button",{onClick:()=>c("/besties"),className:"btn btn-secondary w-full text-lg py-3",children:"\ud83c\udf89 Invite Friends"}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary mt-3",children:"Every new friend makes Besties better for everyone!"})]})})]}),(0,Vx.jsx)(jw,{}),(0,Vx.jsx)(_w,{})]})},Hw={core:!0,auth:!0,checkIns:!0,besties:!0,templates:!0,quickButtons:!0,celebrationMessages:!0,gpsLocation:!0,manualLocation:!0,extendButtons:!0,bestieCircle:!0,badges:!0,shareableCards:!0,mediaUpload:!0,photoCapture:!0,donations:!0,smsSubscription:!0,emergency:!1,reversePin:!1,liveTracking:!1,videoRecording:!1,facebookLogin:!1,phoneAuth:!1},Rw=e=>!0===Hw[e],Pw=()=>{const{currentUser:e,userData:n,loading:r}=zx(),s=te(),A=$(),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(30),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[m,g]=(0,t.useState)([]),[y,x]=(0,t.useState)([]),[w,v]=(0,t.useState)([]),[b,B]=(0,t.useState)(!1),[C,N]=(0,t.useState)(!1),[E,U]=(0,t.useState)(null),[F,Q]=(0,t.useState)(!1),I={lat:37.7749,lng:-122.4194},k=(0,t.useRef)(null),j=(0,t.useRef)(null),S=(0,t.useRef)(null),T=(0,t.useRef)(null),_=(0,t.useRef)(null);(0,t.useEffect)(()=>{r||n&&!1===n.onboardingCompleted&&s("/onboarding")},[n,r,s]),(0,t.useEffect)(()=>{var e,t;if(Kx.trackFunnelStep("checkin","view_create_page"),null!==(e=A.state)&&void 0!==e&&e.quickMinutes&&(Kx.trackFunnelStep("checkin","use_quick_button",{minutes:A.state.quickMinutes}),l(A.state.quickMinutes)),null!==(t=A.state)&&void 0!==t&&t.template){Kx.trackFunnelStep("checkin","use_template");const e=A.state.template;a(e.location||""),l(e.duration||30),u(e.bestieIds||[]),h(e.notes||"")}},[A.state]),(0,t.useEffect)(()=>{e&&!r&&D()},[e,r]),(0,t.useEffect)(()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY;if(!e)return console.warn("Google Maps API key not configured"),void en.error("Address autocomplete is not available. Please type your location manually.",{duration:5e3,id:"maps-api-missing"});if(window.google&&window.google.maps&&window.google.maps.places)return void N(!0);const t=document.createElement("script");return t.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places&loading=async"),t.async=!0,t.defer=!0,t.onload=()=>{N(!0)},t.onerror=()=>{console.error("Failed to load Google Maps API"),en.error("Failed to load address autocomplete",{duration:2e3})},document.head.appendChild(t),()=>{t.parentNode&&t.parentNode.removeChild(t)}},[]),(0,t.useEffect)(()=>{if(C&&T.current&&!F)try{_.current=new window.google.maps.Map(T.current,{center:I,zoom:12,disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,draggable:!0,gestureHandling:"greedy"}),_.current.addListener("dragend",()=>{const e=_.current.getCenter(),t={lat:e.lat(),lng:e.lng()};U(t);(new window.google.maps.Geocoder).geocode({location:t},(e,t)=>{"OK"===t&&e[0]&&a(e[0].formatted_address)})}),Q(!0)}catch(e){console.error("Error initializing map:",e)}},[C,F]),(0,t.useEffect)(()=>{if(C&&k.current){try{j.current=new window.google.maps.places.Autocomplete(k.current,{types:["establishment","geocode"],fields:["formatted_address","name","geometry"]}),j.current.addListener("place_changed",()=>{const e=j.current.getPlace();if(e.formatted_address){const t=e.name&&e.name!==e.formatted_address?"".concat(e.name,", ").concat(e.formatted_address):e.formatted_address;if(a(t),e.geometry&&e.geometry.location&&_.current){const t=e.geometry.location,n={lat:t.lat(),lng:t.lng()};_.current.setCenter(n),_.current.setZoom(15),U(n)}}})}catch(e){console.error("Error initializing autocomplete:",e)}return()=>{j.current&&window.google.maps.event.clearInstanceListeners(j.current)}}},[C]),(0,t.useEffect)(()=>{if(E&&_.current)try{_.current.setCenter(E),_.current.setZoom(16)}catch(e){console.error("Error updating map with GPS:",e)}},[E]);const D=async()=>{if(e)try{var t;console.group("\ud83d\udd0d Loading Bestie Circle");const n=cp(Qx,"users",e.uid),r=await fm(n);if(!r.exists())return console.error("\u274c User document does not exist"),console.groupEnd(),void v([]);const s=r.data(),i=s.featuredCircle||[];if(console.log("User document data:",s),console.log("featuredCircle field:",i),console.log("featuredCircle length:",i.length),0===i.length)return console.warn("\u26a0\ufe0f featuredCircle is empty - no besties to load"),console.groupEnd(),void v([]);console.log("\ud83d\udce1 Querying besties collection...");const[a,o]=await Promise.all([mm(qp(lp(Qx,"besties"),Xp("requesterId","==",e.uid),Xp("status","==","accepted"))),mm(qp(lp(Qx,"besties"),Xp("recipientId","==",e.uid),Xp("status","==","accepted")))]);console.log("Requester query results:",a.size),console.log("Recipient query results:",o.size);const l=[];a.forEach(e=>{const t=e.data();l.push({id:t.recipientId,name:t.recipientName||"Bestie",phone:t.recipientPhone})}),o.forEach(e=>{const t=e.data();l.push({id:t.requesterId,name:t.requesterName||"Bestie",phone:t.requesterPhone})}),console.log("All besties found:",l),console.log("Filtering for featuredCircle IDs:",i);const c=l.filter(e=>{const t=i.includes(e.id);return console.log("Bestie ".concat(e.name," (").concat(e.id,"): ").concat(t?"IN":"NOT IN"," circle")),t});console.log("\u2705 Circle besties after filtering:",c),console.groupEnd(),v(c),(null===(t=A.state)||void 0===t||!t.template)&&c.length>0&&u(c.map(e=>e.id))}catch(n){console.error("Error loading besties:",n),console.groupEnd(),en.error("Failed to load besties")}};return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Create Check-In"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Set up your safety check-in"})]}),(0,Vx.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),0===c.length)return Kx.trackFunnelStep("checkin","error_no_besties"),void en.error("Please select at least one bestie from your circle to notify",{duration:4e3});const n=c.filter(e=>{const t=w.find(t=>t.id===e);return!(null!==t&&void 0!==t&&t.phone)}).map(e=>{const t=w.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.name)||"Unknown"});if(n.length>0)return void en.error("These besties need to add their phone number: ".concat(n.join(", ")),{duration:6e3});if(!i.trim())return Kx.trackFunnelStep("checkin","error_no_location"),void en.error("Please enter a location");if(o<15||o>180)return void en.error("Duration must be between 15 and 180 minutes");B(!0),Kx.trackFunnelStep("checkin","submit_checkin",{besties:c.length,duration:o,hasNotes:!!d});const r=en.loading("Creating your check-in...");try{const t=new Date,n=new Date(t.getTime()+60*o*1e3),a=[];if(m.length>0){const t=en.loading("Uploading ".concat(m.length," photo").concat(m.length>1?"s":"","..."));try{for(let t=0;t<m.length;t++){const n=m[t],r=Og(Ix,"checkin-photos/".concat(e.uid,"/").concat(Date.now(),"_").concat(t,"_").concat(n.name));await Rg(r,n);const s=await Pg(r);a.push(s)}en.success("".concat(a.length," photo").concat(a.length>1?"s":""," uploaded!"),{id:t})}catch(A){console.error("Photo upload failed:",A),en.error("Some photos failed to upload, continuing with uploaded photos",{id:t})}}const l={userId:e.uid,location:i,duration:o,alertTime:wo.fromDate(n),bestieIds:c,notes:d||null,meetingWith:f||null,photoURLs:a,status:"active",createdAt:wo.now(),lastUpdate:wo.now()},u=await wm(lp(Qx,"checkins"),l),h=await fm(cp(Qx,"checkins",u.id));if(!h.exists())throw new Error("Check-in was not saved properly. Please try again.");const p=h.data();if(p.userId!==e.uid||"active"!==p.status)throw new Error("Check-in data verification failed. Please try again.");if(!p.bestieIds||p.bestieIds.length!==c.length)throw new Error("Bestie list was not saved correctly. Please try again.");if(!c.every(e=>p.bestieIds.includes(e)))throw new Error("Bestie list verification failed. Please try again.");Kx.trackFunnelStep("checkin","complete_checkin"),en.success("Check-in created! Stay safe! \ud83d\udc9c",{id:r}),s("/")}catch(a){console.error("Error creating check-in:",a),Kx.logCustomError("Failed to create check-in",{error:a.message}),"permission-denied"===a.code?en.error("Permission denied. Please check your account settings.",{id:r}):"unavailable"===a.code?en.error("Unable to connect to server. Please check your internet connection.",{id:r}):a.message.includes("verification failed")?en.error(a.message,{id:r}):en.error("Failed to create check-in. Please try again.",{id:r})}finally{B(!1)}},className:"space-y-6",children:[(0,Vx.jsxs)("div",{className:"card p-0 overflow-hidden",children:[(0,Vx.jsx)("label",{className:"block text-lg font-display text-text-primary p-6 pb-3",children:"Where are you going? \ud83d\udccd"}),(0,Vx.jsxs)("div",{className:"relative",children:[(0,Vx.jsx)("div",{ref:T,className:"w-full h-80",style:{minHeight:"320px"}}),(0,Vx.jsx)("div",{className:"absolute top-3 left-3 right-3 z-10",children:(0,Vx.jsx)("input",{ref:k,type:"text",value:i,onChange:e=>a(e.target.value),className:"input w-full shadow-lg",placeholder:"Search for a place...",required:!0,autoComplete:"off"})}),(0,Vx.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-full z-10 pointer-events-none",children:(0,Vx.jsx)("svg",{className:"w-12 h-12 text-primary drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})}),Rw("gpsLocation")&&(0,Vx.jsx)("button",{type:"button",onClick:()=>{Rw("gpsLocation")?navigator.geolocation?(B(!0),en.loading("Getting your location...",{id:"gps-loading"}),navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,n=e.coords.longitude,r={lat:t,lng:n};(new window.google.maps.Geocoder).geocode({location:r},(e,s)=>{en.dismiss("gps-loading"),B(!1),"OK"===s&&e[0]?(a(e[0].formatted_address),en.success("Location captured!",{duration:2e3})):(a("GPS: ".concat(t.toFixed(4),", ").concat(n.toFixed(4))),en.success("Location captured (coordinates only)",{duration:2e3})),U(r)})},e=>{en.dismiss("gps-loading"),B(!1),console.error("Geolocation error:",e),1===e.code?en.error("Location permission denied. Please enable location access in your browser settings.",{duration:6e3}):2===e.code?en.error("Location unavailable. Make sure location services are enabled on your device.",{duration:5e3}):3===e.code?en.error("Location request timed out. Please try again or search for your location.",{duration:5e3}):en.error("Could not get location. Please search manually.",{duration:4e3})},{timeout:3e4,enableHighAccuracy:!0,maximumAge:0})):en.error("Geolocation not supported by your browser. Please search for your location manually."):en.error("GPS location is not enabled")},className:"absolute right-3 top-16 bg-white hover:bg-gray-50 text-gray-700 p-3 rounded-lg shadow-lg border border-gray-300 transition-all z-10",disabled:b,title:"Use my current location",children:b?(0,Vx.jsx)("div",{className:"w-5 h-5 spinner-small"}):(0,Vx.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Vx.jsx)("circle",{cx:"12",cy:"12",r:"3",strokeWidth:2}),(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v4m0 12v4M2 12h4m12 0h4"})]})})]}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary p-3 px-6",children:"Drag the map to adjust pin location, search for a place, or click the crosshair to use GPS"})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Who are you meeting? \ud83d\udc65 (Optional)"}),(0,Vx.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"input",placeholder:"e.g., Alex, Sarah, John..."})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"How long? \u23f0"}),(0,Vx.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[15,30,60,120].map(e=>(0,Vx.jsx)("button",{type:"button",onClick:()=>l(e),className:"py-3 rounded-xl font-semibold transition-all ".concat(o===e?"bg-gradient-primary text-white shadow-lg":"bg-gray-100 text-text-primary hover:bg-gray-200"),children:e<60?"".concat(e,"m"):"".concat(e/60,"h")},e))}),(0,Vx.jsx)("input",{type:"range",min:"15",max:"180",step:"15",value:o,onChange:e=>l(parseInt(e.target.value)),className:"w-full"}),(0,Vx.jsxs)("div",{className:"text-center mt-3",children:[(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:[o," minutes"]}),(0,Vx.jsxs)("div",{className:"text-sm font-semibold text-primary mt-1",children:["Alert at: ",new Date(Date.now()+60*o*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Who should we alert? \ud83d\udc9c (1-5)"}),0===w.length?(0,Vx.jsxs)("div",{className:"text-center py-8 bg-orange-50 border-2 border-orange-200 rounded-xl",children:[(0,Vx.jsx)("p",{className:"font-semibold text-text-primary mb-2",children:"\u26a0\ufe0f No besties in your circle"}),(0,Vx.jsx)("p",{className:"text-text-secondary text-sm mb-4",children:"Add besties to your bestie circle on the home page to create check-ins"}),(0,Vx.jsx)("button",{type:"button",onClick:()=>s("/"),className:"btn btn-primary",children:"Go to Home Page"})]}):(0,Vx.jsx)("div",{className:"space-y-2",children:w.map(e=>{var t,n;return(0,Vx.jsx)("button",{type:"button",onClick:()=>(e=>{if(c.includes(e))u(c.filter(t=>t!==e));else{if(c.length>=5)return void en.error("Maximum 5 besties per check-in");u([...c,e])}})(e.id),disabled:!e.phone,className:"w-full p-4 rounded-xl border-2 transition-all text-left ".concat(e.phone?c.includes(e.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300":"border-orange-300 bg-orange-50 opacity-60 cursor-not-allowed"),children:(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Vx.jsx)("div",{className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display",children:(null===(t=e.name)||void 0===t?void 0:t[0])||(null===(n=e.phone)||void 0===n?void 0:n[0])||"?"}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:e.name||e.phone||"Unknown"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:e.phone||"\u26a0\ufe0f No phone number - ask them to add one"})]})]}),c.includes(e.id)&&(0,Vx.jsx)("div",{className:"text-primary text-xl",children:"\u2713"})]})},e.id)})}),(0,Vx.jsxs)("div",{className:"mt-3 text-sm text-text-secondary",children:["Selected: ",c.length,"/5"]})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Notes (Optional) \ud83d\udcdd"}),(0,Vx.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"input min-h-[100px] resize-none",placeholder:"Any additional info for your besties..."})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsxs)("label",{className:"block text-lg font-display text-text-primary mb-3",children:["Add Photos (Optional) \ud83d\udcf8 (",m.length,"/5)"]}),y.length>0&&(0,Vx.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3",children:y.map((e,t)=>(0,Vx.jsxs)("div",{className:"relative aspect-square",children:[(0,Vx.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full rounded-xl object-cover"}),(0,Vx.jsx)("button",{type:"button",onClick:()=>(e=>{g(m.filter((t,n)=>n!==e)),x(y.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-full text-sm font-bold hover:bg-red-600 flex items-center justify-center",children:"\u2715"})]},t))}),m.length<5&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("input",{ref:S,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);if(0===t.length)return;if(m.length+t.length>5)return void en.error("You can only upload up to 5 photos per check-in");for(const r of t){if(r.size>5242880)return void en.error("".concat(r.name," is too large. Photos must be less than 5MB"));if(!r.type.startsWith("image/"))return void en.error("".concat(r.name," is not an image file"))}g([...m,...t]);const n=t.map(e=>URL.createObjectURL(e));x([...y,...n]),S.current&&(S.current.value="")},className:"hidden",id:"photo-input"}),(0,Vx.jsxs)("label",{htmlFor:"photo-input",className:"block w-full p-8 border-2 border-dashed border-gray-300 rounded-xl text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcf7"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Click to add photos (up to 5, max 5MB each)"})]})]})]}),(i||c.length>0)&&(0,Vx.jsxs)("div",{className:"card p-6 bg-blue-50 border-2 border-blue-200",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-3",children:"\ud83d\udc40 Your besties will see:"}),(0,Vx.jsxs)("div",{className:"bg-white rounded-xl p-4 border-2 border-gray-200",children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"\ud83d\udea8 Safety Alert"}),(0,Vx.jsxs)("div",{className:"font-semibold text-text-primary mb-2",children:[(null===n||void 0===n?void 0:n.displayName)||"Your friend"," hasn't checked in!"]}),i&&(0,Vx.jsxs)("div",{className:"text-sm mb-2",children:[(0,Vx.jsx)("span",{className:"font-semibold",children:"Location:"})," ",i]}),f&&(0,Vx.jsxs)("div",{className:"text-sm mb-2",children:[(0,Vx.jsx)("span",{className:"font-semibold",children:"Meeting with:"})," ",f]}),d&&(0,Vx.jsxs)("div",{className:"text-sm mb-2",children:[(0,Vx.jsx)("span",{className:"font-semibold",children:"Notes:"})," ",d]}),y.length>0&&(0,Vx.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:y.map((e,t)=>(0,Vx.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full rounded-lg aspect-square object-cover"},t))}),(0,Vx.jsxs)("div",{className:"text-xs text-text-secondary mt-2",children:["Alert time: ",new Date(Date.now()+60*o*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]}),(0,Vx.jsx)("button",{type:"submit",disabled:b||0===c.length,className:"w-full btn btn-primary text-lg py-4",children:b?"Creating...":"\ud83d\udee1\ufe0f Start Check-In"})]})]})]})},Ow=e=>{let{userId:n,onAddClick:r}=e;const s=te(),[A,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(n)try{const[e,t]=await Promise.all([mm(qp(lp(Qx,"besties"),Xp("requesterId","==",n),Xp("status","==","accepted"))),mm(qp(lp(Qx,"besties"),Xp("recipientId","==",n),Xp("status","==","accepted")))]),r=[];for(const n of e.docs){const e=n.data(),t=await fm(cp(Qx,"users",e.recipientId));r.push({id:e.recipientId,name:t.exists()?t.data().displayName:"Bestie",photoURL:t.exists()?t.data().photoURL:null})}for(const n of t.docs){const e=n.data(),t=await fm(cp(Qx,"users",e.requesterId));r.push({id:e.requesterId,name:t.exists()?t.data().displayName:"Bestie",photoURL:t.exists()?t.data().photoURL:null})}i(r);const s=await fm(cp(Qx,"users",n)),A=s.exists()&&s.data().featuredCircle||[],a=A.map(e=>r.find(t=>t.id===e)).filter(Boolean);if(a.length<r.length&&a.length<5){const e=r.filter(e=>!A.includes(e.id));a.push(...e.slice(0,5-a.length))}o(a.slice(0,5)),c(!1)}catch(e){console.error("Error loading besties:",e),c(!1)}})()},[n]);const p=async e=>{const t=e.map(e=>e.id);await ym(cp(Qx,"users",n),{featuredCircle:t})},m=Array.from({length:5},(e,t)=>a[t]||null),g=["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500"];return l?(0,Vx.jsx)("div",{className:"card p-8 flex items-center justify-center",children:(0,Vx.jsx)("div",{className:"spinner"})}):(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("div",{className:"relative w-full max-w-xs mx-auto",style:{paddingBottom:"100%"},children:(0,Vx.jsxs)("div",{className:"absolute inset-0",children:[(0,Vx.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:(0,Vx.jsx)("div",{className:"w-24 h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-lg font-display shadow-xl border-4 border-white",children:"YOU"})}),m.map((e,t)=>{var n;const A=(72*t-90)*(Math.PI/180),i=50+50*Math.cos(A),l=50+50*Math.sin(A);return(0,Vx.jsx)("div",{className:"absolute",style:{left:"".concat(i,"%"),top:"".concat(l,"%"),transform:"translate(-50%, -50%)"},children:e?(0,Vx.jsxs)("div",{className:"relative group",children:[(0,Vx.jsx)("button",{onClick:()=>d(u===t?null:t),className:"relative w-20 h-20 ".concat(g[t]," rounded-full flex items-center justify-center text-white text-2xl font-display shadow-xl border-4 border-white hover:scale-110 transition-transform overflow-hidden"),children:e.photoURL?(0,Vx.jsx)("img",{src:e.photoURL,alt:e.name||"Bestie",className:"w-full h-full object-cover"}):(null===(n=e.name)||void 0===n?void 0:n[0])||"?"}),(0,Vx.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:(0,Vx.jsx)("div",{className:"bg-text-primary text-white px-2 py-1 rounded-lg text-xs whitespace-nowrap",children:e.name||"Unknown"})}),u===t&&(0,Vx.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-30 w-36",children:[(0,Vx.jsx)("button",{onClick:()=>{return t=e.id,s("/user/".concat(t)),void d(null);var t},className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udc64 View Profile"}),(0,Vx.jsx)("button",{onClick:()=>f(!0),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udd04 Replace"}),(0,Vx.jsx)("button",{onClick:()=>(async e=>{const t=a.filter((t,n)=>n!==e);o(t),await p(t),d(null),en.success("Removed from circle")})(t),className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600",children:"\u274c Remove"})]})]}):r?(0,Vx.jsx)("button",{onClick:r,className:"w-20 h-20 border-4 border-dashed ".concat(g[t].replace("bg-","border-")," rounded-full flex items-center justify-center ").concat(g[t].replace("bg-","text-")," text-4xl font-bold hover:scale-110 hover:").concat(g[t].replace("bg-","bg-"),"/20 transition-all shadow-lg"),children:"+"}):null},t)})]})}),(0,Vx.jsxs)("div",{className:"text-center mt-6",children:[(0,Vx.jsxs)("div",{className:"font-display text-base text-text-primary mb-1",children:[a.length,"/5 Besties in Circle"]}),(0,Vx.jsx)("div",{className:"text-xs text-text-secondary",children:"Your featured safety network \u2b50"})]}),h&&(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>f(!1),children:(0,Vx.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full max-h-96 overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Vx.jsx)("h3",{className:"text-xl font-display mb-4",children:"Replace with:"}),(0,Vx.jsxs)("div",{className:"space-y-2",children:[A.filter(e=>!a.find(t=>t.id===e.id)).map(e=>{var t;return(0,Vx.jsxs)("button",{onClick:()=>(async e=>{const t=[...a];t[u]=e,o(t),await p(t),f(!1),d(null),en.success("Bestie replaced")})(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,Vx.jsx)("div",{className:"w-10 h-10 bg-gradient-secondary rounded-full flex items-center justify-center text-white font-display overflow-hidden",children:e.photoURL?(0,Vx.jsx)("img",{src:e.photoURL,alt:e.name||"Bestie",className:"w-full h-full object-cover"}):(null===(t=e.name)||void 0===t?void 0:t[0])||"?"}),(0,Vx.jsx)("div",{className:"text-left",children:(0,Vx.jsx)("div",{className:"font-semibold",children:e.name||"Unknown"})})]},e.id)}),0===A.filter(e=>!a.find(t=>t.id===e.id)).length&&(0,Vx.jsx)("p",{className:"text-center text-gray-500 py-4",children:"All besties are in your circle!"})]}),(0,Vx.jsx)("button",{onClick:()=>f(!1),className:"mt-4 w-full btn btn-secondary",children:"Cancel"})]})})]})},Mw=e=>{let{onClose:n}=e;const{userData:r,currentUser:s}=zx(),[A,i]=(0,t.useState)(0),a=(0,t.useRef)(null),o="https://bestiesapp.web.app/share?invite=".concat(null===s||void 0===s?void 0:s.uid),l="https://bestiesapp.web.app/?invite=".concat(null===s||void 0===s?void 0:s.uid),c=[{id:1,name:"Classic Pink",bgGradient:"linear-gradient(135deg, #FF6B9D 0%, #C06C84 100%)",emoji:"\ud83d\udc9c",title:"Let's Be Safety Besties!",subtitle:"".concat((null===r||void 0===r?void 0:r.displayName)||"Your friend"," wants you on their safety network")},{id:2,name:"Ocean Blue",bgGradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",emoji:"\ud83c\udf0a",title:"Join My Safety Circle",subtitle:"".concat((null===r||void 0===r?void 0:r.displayName)||"Your friend"," trusts you to be their safety bestie")},{id:3,name:"Sunset Orange",bgGradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",emoji:"\ud83c\udf05",title:"Stay Safe Together",subtitle:"".concat((null===r||void 0===r?void 0:r.displayName)||"Your friend"," invited you to Besties")},{id:4,name:"Forest Green",bgGradient:"linear-gradient(135deg, #0ba360 0%, #3cba92 100%)",emoji:"\ud83c\udf3f",title:"Safety Network Invite",subtitle:"Be a safety bestie for ".concat((null===r||void 0===r?void 0:r.displayName)||"your friend")},{id:5,name:"Lavender Dream",bgGradient:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",emoji:"\u2728",title:"Join Besties App",subtitle:"".concat((null===r||void 0===r?void 0:r.displayName)||"Your friend"," wants to stay connected and safe")},{id:6,name:"Bold Red",bgGradient:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",emoji:"\u2764\ufe0f",title:"Be My Safety Buddy",subtitle:"".concat((null===r||void 0===r?void 0:r.displayName)||"Your friend"," needs you in their safety circle")}],u=c[A];return(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,Vx.jsxs)("div",{className:"card max-w-2xl w-full p-6 animate-scale-up max-h-[90vh] overflow-y-auto",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Choose Your Card"}),(0,Vx.jsx)("button",{onClick:n,className:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:"\u2715"})]}),(0,Vx.jsx)("div",{className:"mb-6",children:(0,Vx.jsxs)("div",{ref:a,className:"w-full rounded-2xl p-8 text-white text-center shadow-xl transition-all duration-300",style:{background:u.bgGradient},children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:u.emoji}),(0,Vx.jsx)("h3",{className:"font-display text-3xl mb-4",children:u.title}),(0,Vx.jsx)("p",{className:"text-lg opacity-90 mb-6",children:u.subtitle}),(0,Vx.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4",children:[(0,Vx.jsx)("div",{className:"text-sm font-semibold opacity-90 mb-1",children:"Join at:"}),(0,Vx.jsx)("div",{className:"text-sm font-mono break-all",children:"bestiesapp.web.app"})]})]})}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("div",{className:"text-sm font-semibold text-text-secondary mb-3",children:"Select a design:"}),(0,Vx.jsx)("div",{className:"grid grid-cols-3 gap-3",children:c.map((e,t)=>(0,Vx.jsxs)("button",{onClick:()=>i(t),className:"relative rounded-xl p-4 text-center transition-all ".concat(A===t?"ring-4 ring-primary scale-105":"hover:scale-105 opacity-70 hover:opacity-100"),style:{background:e.bgGradient},children:[(0,Vx.jsx)("div",{className:"text-3xl mb-1",children:e.emoji}),(0,Vx.jsx)("div",{className:"text-xs text-white font-semibold",children:e.name}),A===t&&(0,Vx.jsx)("div",{className:"absolute top-1 right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,Vx.jsx)("span",{className:"text-primary text-sm",children:"\u2713"})})]},e.id))})]}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Vx.jsxs)("button",{onClick:()=>{const e="".concat(u.emoji," *").concat(u.title,"*\n\n").concat(u.subtitle,"\n\n").concat(o),t=encodeURIComponent(e);window.open("https://wa.me/?text=".concat(t),"_blank")},className:"btn bg-[#25D366] text-white hover:bg-[#20BA5A] flex items-center justify-center gap-2",children:[(0,Vx.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),(0,Vx.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(o);window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(e),"_blank")},className:"btn bg-[#1877F2] text-white hover:bg-[#166FE5] flex items-center justify-center gap-2",children:[(0,Vx.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,Vx.jsxs)("button",{onClick:()=>{const e=encodeURIComponent("".concat(u.emoji," ").concat(u.title)),t=encodeURIComponent(o);window.open("https://twitter.com/intent/tweet?text=".concat(e,"&url=").concat(t),"_blank")},className:"btn bg-black text-white hover:bg-gray-800 flex items-center justify-center gap-2",children:[(0,Vx.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X (Twitter)"]}),(0,Vx.jsxs)("button",{onClick:()=>{const e="".concat(u.emoji," ").concat(u.title,"\n\n").concat(u.subtitle,"\n\n").concat(o),t=encodeURIComponent(e);window.location.href="sms:?body=".concat(t)},className:"btn bg-success text-white hover:bg-green-600 flex items-center justify-center gap-2",children:[(0,Vx.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"SMS"]})]}),(0,Vx.jsx)("button",{onClick:async()=>{const e="".concat(u.emoji," ").concat(u.title,"\n\n").concat(u.subtitle,"\n\n").concat(l);try{await navigator.clipboard.writeText(e),en.success("Card copied to clipboard!")}catch(t){en.error("Failed to copy")}},className:"w-full btn btn-primary",children:"\ud83d\udccb Copy Card & Link"})]})})},Kw=e=>{let{end:n,duration:r=1e3,suffix:s="",prefix:A="",className:i=""}=e;const[a,o]=(0,t.useState)(0),[l,c]=(0,t.useState)(!1),u=(0,t.useRef)(null),d=(0,t.useCallback)(()=>{const e=Date.now(),t=parseInt(n)||0,s=()=>{const n=Date.now(),A=Math.min((n-e)/r,1),i=1-Math.pow(1-A,4),a=Math.floor(i*t);o(a),A<1?requestAnimationFrame(s):o(t)};requestAnimationFrame(s)},[n,r]);return(0,t.useEffect)(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!l&&(d(),c(!0))})},{threshold:.5}),t=u.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[l,d]),(0,Vx.jsxs)("span",{ref:u,className:i,children:[A,a.toLocaleString(),s]})};var Vw={};!function e(t,n,r,s){var A=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"===typeof Path2D&&"function"===typeof DOMMatrix;function a(){}function o(e){var r=n.exports.Promise,s=void 0!==r?r:t.Promise;return"function"===typeof s?new s(e):(e(a,a),null)}var l,c=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),t.set(n,r),r},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var r=e.transferToImageBitmap();n.createPattern(r,"no-repeat")}catch(Pe){return!1}return!0}(),new Map),u=function(){var e,t,n=Math.floor(1e3/60),r={},s=0;return"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?(e=function(e){var t=Math.random();return r[t]=requestAnimationFrame(function A(i){s===i||s+n-1<i?(s=i,delete r[t],e()):r[t]=requestAnimationFrame(A)}),t},t=function(e){r[e]&&cancelAnimationFrame(r[e])}):(e=function(e){return setTimeout(e,n)},t=function(e){return clearTimeout(e)}),{frame:e,cancel:t}}(),d=function(){var t,n,s={};return function(){if(t)return t;if(!r&&A){var i=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([i])))}catch(Pe){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",Pe),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(r,A,i){if(n)return t(r,null),n;var a=Math.random().toString(36).slice(2);return n=o(function(A){function o(t){t.data.callback===a&&(delete s[a],e.removeEventListener("message",o),n=null,c.clear(),i(),A())}e.addEventListener("message",o),t(r,a),s[a]=o.bind(null,{data:{callback:a}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),s)s[t](),delete s[t]}}(t)}return t}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function f(e,t,n){return function(e,t){return t?t(e):e}(e&&(null!==(r=e[t])&&void 0!==r)?e[t]:h[t],n);var r}function p(e){return e<0?0:Math.floor(e)}function m(e,t){return Math.floor(Math.random()*(t-e))+e}function g(e){return parseInt(e,16)}function y(e){return e.map(x)}function x(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:g(t.substring(0,2)),g:g(t.substring(2,4)),b:g(t.substring(4,6))}}function w(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function v(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function b(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function B(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,s=t.y+t.random*t.tiltSin,A=t.wobbleX+t.random*t.tiltCos,a=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"===typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,r,s,A,i){var a=new Path2D(e),o=new Path2D;o.addPath(a,new DOMMatrix(t));var l=new Path2D;return l.addPath(o,new DOMMatrix([Math.cos(i)*s,Math.sin(i)*s,-Math.sin(i)*A,Math.cos(i)*A,n,r])),l}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(A-r),.1*Math.abs(a-s),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var o=Math.PI/10*t.wobble,l=.1*Math.abs(A-r),u=.1*Math.abs(a-s),d=t.shape.bitmap.width*t.scalar,h=t.shape.bitmap.height*t.scalar,f=new DOMMatrix([Math.cos(o)*l,Math.sin(o)*l,-Math.sin(o)*u,Math.cos(o)*u,t.x,t.y]);f.multiplySelf(new DOMMatrix(t.shape.matrix));var p=e.createPattern(c.transform(t.shape.bitmap),"no-repeat");p.setTransform(f),e.globalAlpha=1-n,e.fillStyle=p,e.fillRect(t.x-d/2,t.y-h/2,d,h),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(A-r)*t.ovalScalar,Math.abs(a-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,s,A,i,a,o){e.save(),e.translate(t,n),e.rotate(A),e.scale(r,s),e.arc(0,0,1,i,a,o),e.restore()}(e,t.x,t.y,Math.abs(A-r)*t.ovalScalar,Math.abs(a-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var m=Math.PI/2*3,g=4*t.scalar,y=8*t.scalar,x=t.x,w=t.y,v=5,b=Math.PI/v;v--;)x=t.x+Math.cos(m)*y,w=t.y+Math.sin(m)*y,e.lineTo(x,w),m+=b,x=t.x+Math.cos(m)*g,w=t.y+Math.sin(m)*g,e.lineTo(x,w),m+=b;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(s)),e.lineTo(Math.floor(A),Math.floor(a)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function C(e,n){var i,a=!e,l=!!f(n||{},"resize"),h=!1,g=f(n,"disableForReducedMotion",Boolean),x=A&&!!f(n||{},"useWorker")?d():null,C=a?w:v,N=!(!e||!x)&&!!e.__confetti_initialized,E="function"===typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function U(t,n,A){for(var a=f(t,"particleCount",p),l=f(t,"angle",Number),d=f(t,"spread",Number),h=f(t,"startVelocity",Number),g=f(t,"decay",Number),x=f(t,"gravity",Number),w=f(t,"drift",Number),v=f(t,"colors",y),N=f(t,"ticks",Number),E=f(t,"shapes"),U=f(t,"scalar"),F=!!f(t,"flat"),Q=function(e){var t=f(e,"origin",Object);return t.x=f(t,"x",Number),t.y=f(t,"y",Number),t}(t),I=a,k=[],j=e.width*Q.x,S=e.height*Q.y;I--;)k.push(b({x:j,y:S,angle:l,spread:d,startVelocity:h,color:v[I%v.length],shape:E[m(0,E.length)],ticks:N,decay:g,gravity:x,drift:w,scalar:U,flat:F}));return i?i.addFettis(k):(i=function(e,t,n,A,i){var a,l,d=t.slice(),h=e.getContext("2d"),f=o(function(t){function o(){a=l=null,h.clearRect(0,0,A.width,A.height),c.clear(),i(),t()}a=u.frame(function t(){!r||A.width===s.width&&A.height===s.height||(A.width=e.width=s.width,A.height=e.height=s.height),A.width||A.height||(n(e),A.width=e.width,A.height=e.height),h.clearRect(0,0,A.width,A.height),(d=d.filter(function(e){return B(h,e)})).length?a=u.frame(t):o()}),l=o});return{addFettis:function(e){return d=d.concat(e),f},canvas:e,promise:f,reset:function(){a&&u.cancel(a),l&&l()}}}(e,k,C,n,A),i.promise)}function F(n){var r=g||f(n,"disableForReducedMotion",Boolean),s=f(n,"zIndex",Number);if(r&&E)return o(function(e){e()});a&&i?e=i.canvas:a&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(s),document.body.appendChild(e)),l&&!N&&C(e);var A={width:e.width,height:e.height};function c(){if(x){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};return C(t),void x.postMessage({resize:{width:t.width,height:t.height}})}A.width=A.height=null}function u(){i=null,l&&(h=!1,t.removeEventListener("resize",c)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,N=!1)}return x&&!N&&x.init(e),N=!0,x&&(e.__confetti_initialized=!0),l&&!h&&(h=!0,t.addEventListener("resize",c,!1)),x?x.fire(n,A,u):U(n,A,u)}return F.reset=function(){x&&x.reset(),i&&i.reset()},F}function N(){return l||(l=C(null,{useWorker:!0,resize:!0})),l}n.exports=function(){return N().apply(this,arguments)},n.exports.reset=function(){N().reset()},n.exports.create=C,n.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,n;"string"===typeof e?t=e:(t=e.path,n=e.matrix);var r=new Path2D(t),s=document.createElement("canvas").getContext("2d");if(!n){for(var A,a,o=1e3,l=o,c=o,u=0,d=0,h=0;h<o;h+=2)for(var f=0;f<o;f+=2)s.isPointInPath(r,h,f,"nonzero")&&(l=Math.min(l,h),c=Math.min(c,f),u=Math.max(u,h),d=Math.max(d,f));A=u-l,a=d-c;var p=Math.min(10/A,10/a);n=[p,0,0,p,-Math.round(A/2+l)*p,-Math.round(a/2+c)*p]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,r="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"===typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,s="fontFamily"in e?e.fontFamily:s,r="color"in e?e.color:r);var A=10*n,i=A+"px "+s,a=new OffscreenCanvas(A,A),o=a.getContext("2d");o.font=i;var l=o.measureText(t),c=Math.ceil(l.actualBoundingBoxRight+l.actualBoundingBoxLeft),u=Math.ceil(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent),d=l.actualBoundingBoxLeft+2,h=l.actualBoundingBoxAscent+2;c+=4,u+=4,(o=(a=new OffscreenCanvas(c,u)).getContext("2d")).font=i,o.fillStyle=r,o.fillText(t,d,h);var f=1/n;return{type:"bitmap",bitmap:a.transferToImageBitmap(),matrix:[f,0,0,f,-c*f/2,-u*f/2]}}}(function(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:this||{}}(),Vw,!1);const Gw=Vw.exports;Vw.exports.create;const Ww=e=>{let{trigger:n=!1,type:r="default"}=e;return(0,t.useEffect)(()=>{if(!n)return;(()=>{if("badge"===r){const e=200,t={origin:{y:.7},shapes:["circle","square"],colors:["#FF69B4","#DDA0DD","#FFB6C1","#FFC0CB","#FF1493"]};function n(n,r){Gw(Re(Re(Re({},t),r),{},{particleCount:Math.floor(e*n)}))}n(.25,{spread:26,startVelocity:55}),n(.2,{spread:60}),n(.35,{spread:100,decay:.91,scalar:.8}),n(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),n(.1,{spread:120,startVelocity:45})}else"milestone"===r?(Gw({particleCount:150,spread:70,origin:{y:.6},colors:["#FF69B4","#DDA0DD","#FFB6C1","#87CEEB","#98FB98"]}),setTimeout(()=>{Gw({particleCount:100,angle:60,spread:55,origin:{x:0},colors:["#FF69B4","#DDA0DD","#FFB6C1"]})},200),setTimeout(()=>{Gw({particleCount:100,angle:120,spread:55,origin:{x:1},colors:["#87CEEB","#98FB98","#FFB6C1"]})},400)):Gw({particleCount:100,spread:70,origin:{y:.6},colors:["#FF69B4","#DDA0DD","#FFB6C1","#FFC0CB","#FF1493"]})})()},[n,r]),null},zw=[{id:"pink",name:"Pink Dream",gradient:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)"},{id:"purple",name:"Purple Magic",gradient:"linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)"},{id:"blue",name:"Ocean Blue",gradient:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)"},{id:"green",name:"Fresh Green",gradient:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)"},{id:"sunset",name:"Sunset Glow",gradient:"linear-gradient(135deg, #fed7aa 0%, #fca5a5 100%)"},{id:"lavender",name:"Lavender Fields",gradient:"linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)"},{id:"peach",name:"Peachy Keen",gradient:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)"},{id:"mint",name:"Mint Fresh",gradient:"linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%)"}],qw=()=>{var e,n,r,s,A,i,a;const{currentUser:o,userData:l}=zx(),c=te(),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(!0),[p,m]=(0,t.useState)(!1),[g,y]=(0,t.useState)(!1),[x,w]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[B,C]=(0,t.useState)(!1),[N,E]=(0,t.useState)([]),[U,F]=(0,t.useState)(0),[Q,I]=(0,t.useState)(!1),[k,j]=(0,t.useState)(0),[S,T]=(0,t.useState)(null),_=(0,t.useRef)(null);(0,t.useEffect)(()=>{D()},[o]),(0,t.useEffect)(()=>{const e=e=>{g&&!e.target.closest(".photo-menu-container")&&y(!1),v&&!e.target.closest(".color-picker-container")&&b(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[g,v]);const D=async()=>{if(o)try{const e=await fm(cp(Qx,"badges",o.uid));if(e.exists()){const t=e.data().badges||[];d(t)}const t=await fm(cp(Qx,"users",o.uid));if(t.exists()){const e=t.data();E(e.featuredBadges||[])}const n=qp(lp(Qx,"besties"),Xp("requesterId","==",o.uid),Xp("status","==","accepted")),r=qp(lp(Qx,"besties"),Xp("recipientId","==",o.uid),Xp("status","==","accepted")),[s,A]=await Promise.all([mm(n),mm(r)]);F(s.size+A.size);const i=qp(lp(Qx,"checkins"),Xp("selectedBesties","array-contains",o.uid)),a=await mm(i);j(a.size);const l=qp(lp(Qx,"checkins"),Xp("userId","==",o.uid)),c=await mm(l);if(!c.empty){let e=null;c.forEach(t=>{var n;const r=null===(n=t.data().createdAt)||void 0===n?void 0:n.toDate();r&&(!e||r<e)&&(e=r)}),T(e)}f(!1)}catch(e){console.error("Error loading data:",e),f(!1)}},L=()=>{if(!S)return!1;const e=new Date;return e.setDate(e.getDate()-7),S<=e},H=(()=>{var e;const t=[];let n=0;null!==o&&void 0!==o&&o.email?(t.push({name:"Add email",completed:!0,path:null}),n++):t.push({name:"Add email",completed:!1,path:"/settings"}),null!==l&&void 0!==l&&l.phoneNumber?(t.push({name:"Add phone number",completed:!0,path:null}),n++):t.push({name:"Add phone number",completed:!1,path:"/settings"}),null!==l&&void 0!==l&&l.photoURL?(t.push({name:"Upload profile photo",completed:!0,path:null}),n++):t.push({name:"Upload profile photo",completed:!1,path:"/profile"}),null!==l&&void 0!==l&&null!==(e=l.profile)&&void 0!==e&&e.bio?(t.push({name:"Write a bio",completed:!0,path:null}),n++):t.push({name:"Write a bio",completed:!1,path:"/edit-profile"}),U>=5?(t.push({name:"Add 5 besties",completed:!0,path:null}),n++):t.push({name:"Add 5 besties (".concat(U,"/5)"),completed:!1,path:"/besties"});return{tasks:t,percentage:n/t.length*100,completed:n,total:t.length}})(),R=(()=>{var e,t;if(!L())return{status:"new",emoji:"\ud83c\udf31",message:"Building your safety journey",tip:"You'll get your weekly summary after you have one week of activity!"};const n=(null===l||void 0===l||null===(e=l.stats)||void 0===e?void 0:e.totalCheckIns)||0,r=(null===l||void 0===l||null===(t=l.stats)||void 0===t?void 0:t.totalBesties)||0;return n>=7&&r>=3?{status:"excellent",emoji:"\ud83c\udf1f",message:"You're absolutely crushing it this week!",tip:"Keep up the amazing safety habits!"}:n>=3||r>=3?{status:"good",emoji:"\ud83d\udcaa",message:"You're doing great! Keep it up!",tip:"Try to check in regularly and add more besties."}:{status:"needsWork",emoji:"\ud83d\udc9c",message:"Let's build your safety network!",tip:"Start by adding your closest friends as besties."}})(),P=(null===l||void 0===l||null===(e=l.profile)||void 0===e?void 0:e.backgroundGradient)||zw[0].gradient,O=(null===l||void 0===l?void 0:l.loginStreak)||0,M=u.filter(e=>N.includes(e.id)).slice(0,3);return h?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)(Ww,{trigger:Q,type:"badge"}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Vx.jsxs)("div",{className:"card p-6 mb-6 text-center relative overflow-hidden",style:{background:P},children:[(0,Vx.jsxs)("div",{className:"absolute top-4 right-4 color-picker-container flex flex-col gap-2",children:[(0,Vx.jsx)("button",{onClick:()=>c("/edit-profile"),className:"w-10 h-10 rounded-full bg-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform text-xl",title:"Edit profile",children:"\u270f\ufe0f"}),(0,Vx.jsx)("button",{onClick:()=>b(!v),className:"w-10 h-10 rounded-full bg-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform",title:"Change background color",children:"\ud83c\udfa8"}),v&&(0,Vx.jsxs)("div",{className:"absolute top-full right-0 mt-2 bg-white rounded-xl shadow-2xl border-2 border-gray-200 p-4 z-30 w-64 max-h-80 overflow-y-auto",children:[(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-3 sticky top-0 bg-white pb-2",children:"Choose Your Vibe"}),(0,Vx.jsx)("div",{className:"grid grid-cols-2 gap-3",children:zw.map(e=>(0,Vx.jsx)("button",{onClick:()=>(async e=>{try{await ym(cp(Qx,"users",o.uid),{"profile.backgroundGradient":e.gradient}),en.success("Background changed to ".concat(e.name,"!")),b(!1)}catch(t){console.error("Error updating background:",t),en.error("Failed to update background")}})(e),className:"h-16 rounded-lg shadow-md hover:scale-105 transition-transform border-2 border-transparent hover:border-primary",style:{background:e.gradient},title:e.name,children:(0,Vx.jsx)("span",{className:"text-xs font-semibold text-gray-700 drop-shadow-sm",children:e.name})},e.id))})]})]}),(0,Vx.jsxs)("div",{className:"relative inline-block photo-menu-container",children:[(0,Vx.jsx)("button",{onClick:()=>y(!g),className:"w-32 h-32 bg-gradient-primary rounded-full flex items-center justify-center text-white text-5xl font-display overflow-hidden hover:opacity-90 transition-opacity border-4 border-white shadow-xl",children:null!==l&&void 0!==l&&l.photoURL?(0,Vx.jsx)("img",{src:l.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===l||void 0===l||null===(n=l.displayName)||void 0===n?void 0:n[0])||(null===o||void 0===o||null===(r=o.email)||void 0===r?void 0:r[0])||"U"}),g&&(0,Vx.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-30 w-48",children:[(0,Vx.jsx)("div",{className:"text-xs font-semibold text-gray-500 px-3 py-1",children:"Manage Photo"}),(0,Vx.jsx)("button",{onClick:()=>{var e;null===(e=_.current)||void 0===e||e.click(),y(!1)},disabled:x,className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udd04 Replace"}),(0,Vx.jsx)("button",{onClick:async()=>{try{await ym(cp(Qx,"users",o.uid),{photoURL:(null===o||void 0===o?void 0:o.photoURL)||null}),en.success("Profile picture removed"),y(!1)}catch(e){console.error("Error removing photo:",e),en.error("Failed to remove photo")}},className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600",children:"\u274c Remove"})]}),(0,Vx.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)en.error("Photo must be less than 5MB");else{w(!0);try{const e=Og(Ix,"profile-pictures/".concat(o.uid,"/").concat(Date.now(),"_").concat(t.name));await Rg(e,t);const n=await Pg(e);await ym(cp(Qx,"users",o.uid),{photoURL:n}),en.success("Profile picture updated!"),y(!1)}catch(n){console.error("Error uploading photo:",n),en.error("Failed to upload photo")}finally{w(!1)}}},className:"hidden"})]}),(0,Vx.jsx)("h1",{className:"text-3xl font-display text-gray-800 mb-2 mt-4",children:(null===l||void 0===l?void 0:l.displayName)||"User"}),(null===l||void 0===l||null===(s=l.profile)||void 0===s?void 0:s.bio)&&(0,Vx.jsxs)("p",{className:"text-gray-700 italic max-w-md mx-auto mt-4",children:['"',l.profile.bio,'"']}),(0,Vx.jsxs)("div",{className:"mt-6 flex gap-3 justify-center flex-wrap",children:[(0,Vx.jsxs)("button",{onClick:()=>m(!0),className:"btn bg-white text-primary hover:bg-gray-50 flex items-center gap-2",children:[(0,Vx.jsx)("span",{className:"text-xl",children:"\ud83d\udcf1"}),"Share Profile"]}),(0,Vx.jsxs)("button",{onClick:()=>{const e="".concat(window.location.origin,"/login?invite=").concat(o.uid);navigator.clipboard.writeText(e),en.success("Invite link copied to clipboard!")},className:"btn bg-white text-secondary hover:bg-gray-50 flex items-center gap-2",children:[(0,Vx.jsx)("span",{className:"text-xl",children:"\ud83d\udd17"}),"Copy Invite Link"]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"Profile Completion"}),(0,Vx.jsxs)("span",{className:"text-2xl font-bold text-text-primary",children:[H.completed,"/",H.total]})]}),(0,Vx.jsx)("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden mb-4",children:(0,Vx.jsx)("div",{className:"h-full ".concat((K=H.percentage,100===K?"bg-green-500":K>=60?"bg-yellow-500":"bg-red-500")," transition-all duration-500"),style:{width:"".concat(H.percentage,"%")}})}),(0,Vx.jsx)("div",{className:"space-y-2",children:H.tasks.map((e,t)=>(0,Vx.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Vx.jsx)("span",{className:"text-lg",children:e.completed?"\u2705":"\u2b55"}),(0,Vx.jsx)("span",{className:"text-sm ".concat(e.completed?"text-gray-500 line-through":"text-gray-700 font-semibold"),children:e.name})]}),!e.completed&&e.path&&(0,Vx.jsx)("button",{onClick:()=>c(e.path),className:"btn btn-sm btn-primary text-xs px-3 py-1",children:"Go \u2192"})]},t))}),100===H.percentage&&(0,Vx.jsxs)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg text-center",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83c\udf89"}),(0,Vx.jsx)("p",{className:"text-green-700 font-semibold",children:"Profile Complete! You're all set!"})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Weekly Summary"}),(0,Vx.jsx)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-4",children:(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("span",{className:"text-4xl",children:R.emoji}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-1",children:R.message}),(0,Vx.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["\ud83d\udca1 ",R.tip]}),L()&&(0,Vx.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("span",{className:"font-semibold text-primary",children:(null===l||void 0===l||null===(A=l.stats)||void 0===A?void 0:A.totalCheckIns)||0}),(0,Vx.jsx)("span",{className:"text-gray-600",children:" check-ins"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("span",{className:"font-semibold text-secondary",children:U}),(0,Vx.jsx)("span",{className:"text-gray-600",children:" besties"})]})]})]})]})})]}),O>0&&(0,Vx.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-r from-orange-50 to-red-50",children:(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-1",children:"Daily Login Streak"}),(0,Vx.jsx)("p",{className:"text-sm text-gray-600",children:"Keep it going! \ud83d\udcaa"})]}),(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-5xl mb-1",children:"\ud83d\udd25"}),(0,Vx.jsx)("div",{className:"text-3xl font-display text-orange-600",children:(0,Vx.jsx)(Kw,{end:O,duration:1500})}),(0,Vx.jsx)("div",{className:"text-xs text-gray-600",children:"days"})]})]})}),(0,Vx.jsxs)("div",{className:"mb-6 relative",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Featured Badges"}),(0,Vx.jsx)("button",{onClick:()=>C(!0),className:"text-primary font-semibold hover:underline text-sm",children:"Choose 3 \u2192"})]}),M.length>0?(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("div",{className:"grid grid-cols-3 gap-4",children:M.map(e=>(0,Vx.jsxs)("div",{className:"card p-4 text-center bg-gradient-to-br from-yellow-50 to-orange-50",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,Vx.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name})]},e.id))}),(0,Vx.jsx)("button",{onClick:()=>c("/badges"),className:"fixed bottom-24 right-4 md:bottom-6 md:right-6 btn btn-primary shadow-lg text-sm px-4 py-2 z-20",children:"\ud83c\udfc6 View All"})]}):(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-3",children:"Earn badges and showcase your favorites here!"}),(0,Vx.jsx)("button",{onClick:()=>c("/badges"),className:"btn btn-primary text-sm",children:"View All Badges"})]})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50",children:[(0,Vx.jsx)("h2",{className:"text-3xl font-display text-gradient mb-6 text-center",children:"Your Impact \u2728"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,Vx.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Vx.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udc9c"}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:(0,Vx.jsx)(Kw,{end:U,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Besties"})]})]}),(0,Vx.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Vx.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udee1\ufe0f"}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent mb-2",children:(0,Vx.jsx)(Kw,{end:k,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Times Selected"}),(0,Vx.jsx)("div",{className:"text-xs text-gray-500",children:"as Emergency Contact"})]})]}),(0,Vx.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Vx.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udcc5"}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2",children:(0,Vx.jsx)(Kw,{end:(()=>{if(!S)return 0;const e=new Date,t=Math.abs(e-S);return Math.ceil(t/864e5)})(),duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Days Active"})]})]}),(0,Vx.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Vx.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\u2705"}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-2",children:(0,Vx.jsx)(Kw,{end:(null===l||void 0===l||null===(i=l.stats)||void 0===i?void 0:i.completedCheckIns)||0,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Safe Check-ins"})]})]}),(0,Vx.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Vx.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udfc6"}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-2",children:(0,Vx.jsx)(Kw,{end:u.length,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Badges Earned"})]})]}),(0,Vx.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Vx.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udd25"}),(0,Vx.jsxs)("div",{className:"relative z-10",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2",children:(0,Vx.jsx)(Kw,{end:O,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Day Streak"})]})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Your Bestie Circle"}),(0,Vx.jsx)("button",{onClick:()=>c("/besties"),className:"text-primary font-semibold hover:underline",children:"Manage \u2192"})]}),(0,Vx.jsx)(Ow,{userId:null===o||void 0===o?void 0:o.uid,onAddClick:()=>c("/besties")})]}),(null===l||void 0===l||null===(a=l.donationStats)||void 0===a?void 0:a.isActive)&&(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,Vx.jsx)("h3",{className:"font-display text-xl mb-2",children:"\ud83d\udc9c Thank You!"}),(0,Vx.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free for everyone"}),(0,Vx.jsxs)("div",{className:"text-2xl font-display",children:["$",(0,Vx.jsx)(Kw,{end:l.donationStats.totalDonated,duration:2e3})," donated"]})]}),(0,Vx.jsx)("div",{className:"space-y-3",children:(0,Vx.jsx)("button",{onClick:()=>c("/settings"),className:"w-full btn btn-secondary",children:"\u2699\ufe0f Settings"})})]}),p&&(0,Vx.jsx)(Mw,{onClose:()=>m(!1)}),B&&(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Vx.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Choose Featured Badges"}),(0,Vx.jsx)("button",{onClick:()=>C(!1),className:"w-8 h-8 rounded-full bg-red-500 text-white hover:bg-red-600 flex items-center justify-center text-xl font-bold transition-colors",title:"Close",children:"\xd7"})]}),(0,Vx.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Select up to 3 badges to showcase on your profile (",N.length,"/3 selected)"]}),u.length>0?(0,Vx.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:u.map(e=>{const t=N.includes(e.id);return(0,Vx.jsxs)("button",{onClick:()=>(async e=>{let t=[...N];if(t.includes(e))t=t.filter(t=>t!==e);else{if(t.length>=3)return void en.error("You can only feature up to 3 badges");t.push(e),I(!0),setTimeout(()=>I(!1),100)}try{await ym(cp(Qx,"users",o.uid),{featuredBadges:t}),E(t),en.success("Featured badges updated!")}catch(n){console.error("Error updating featured badges:",n),en.error("Failed to update badges")}})(e.id),className:"p-4 rounded-xl text-center transition-all ".concat(t?"bg-gradient-to-br from-yellow-100 to-orange-100 border-2 border-primary shadow-lg scale-105":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"),children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,Vx.jsx)("div",{className:"font-semibold text-xs text-text-primary",children:e.name}),t&&(0,Vx.jsx)("div",{className:"text-xs text-primary mt-1",children:"\u2713 Featured"})]},e.id)})}):(0,Vx.jsxs)("div",{className:"text-center py-12",children:[(0,Vx.jsx)("div",{className:"text-5xl mb-3",children:"\ud83c\udfc6"}),(0,Vx.jsx)("p",{className:"text-gray-600 mb-4",children:"No badges yet! Complete tasks to earn them."})]}),(0,Vx.jsx)("div",{className:"mt-6 flex justify-center",children:(0,Vx.jsx)("button",{onClick:()=>c("/badges"),className:"btn btn-primary",children:"See How to Earn Badges \u2192"})})]})})]});var K},Yw=()=>{var e,n,r,s,A,i,a,o;const{userId:l}=ne(),{currentUser:c}=zx(),u=te(),[d,h]=(0,t.useState)(null),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)([]),[y,x]=(0,t.useState)(!0),[,w]=(0,t.useState)(!1),[v,b]=(0,t.useState)(null);(0,t.useEffect)(()=>{B()},[l,c]);const B=async()=>{if(l&&c)if(l!==c.uid)try{var e;const[t,n]=await Promise.all([mm(qp(lp(Qx,"besties"),Xp("requesterId","==",c.uid),Xp("recipientId","==",l),Xp("status","==","accepted"))),mm(qp(lp(Qx,"besties"),Xp("requesterId","==",l),Xp("recipientId","==",c.uid),Xp("status","==","accepted")))]),r=!t.empty||!n.empty;if(w(r),!r)return b("Only besties can view profiles"),void x(!1);const s=await fm(cp(Qx,"users",l));if(!s.exists())return b("User not found"),void x(!1);const A=Re({id:s.id},s.data());h(A);const i=await fm(cp(Qx,"badges",l));i.exists()&&p(i.data().badges||[]);if(!1!==(null===A||void 0===A||null===(e=A.privacySettings)||void 0===e?void 0:e.showCheckInsToBesties)){const e=new Date;e.setDate(e.getDate()-7);const t=qp(lp(Qx,"checkins"),Xp("userId","==",l),Xp("createdAt",">=",e),$p("createdAt","desc"),tm(20)),n=(await mm(t)).docs.map(e=>Re({id:e.id},e.data()));g(n)}x(!1)}catch(v){console.error("Error loading user profile:",v),b("Failed to load profile"),x(!1)}else u("/profile")};if(y)return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]});if(v)return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:(0,Vx.jsxs)("div",{className:"card p-12 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:v}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"You can only view profiles of people in your Bestie Circle"}),(0,Vx.jsx)("button",{onClick:()=>u("/besties"),className:"btn btn-primary",children:"Manage Besties"})]})})]});const C=null!==d&&void 0!==d&&d.featuredBadges?f.filter(e=>d.featuredBadges.includes(e.id)).slice(0,3):f.slice(0,3),N=!1!==(null===d||void 0===d||null===(e=d.privacySettings)||void 0===e?void 0:e.showStatsToBesties),E=!1!==(null===d||void 0===d||null===(n=d.privacySettings)||void 0===n?void 0:n.showCheckInsToBesties);return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Vx.jsxs)("div",{className:"card p-6 mb-6 text-center relative overflow-hidden",style:{background:(null===d||void 0===d||null===(r=d.profile)||void 0===r?void 0:r.backgroundGradient)||"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)"},children:[(0,Vx.jsx)("div",{className:"w-32 h-32 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-5xl font-display overflow-hidden border-4 border-white shadow-xl",children:null!==d&&void 0!==d&&d.photoURL?(0,Vx.jsx)("img",{src:d.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===d||void 0===d||null===(s=d.displayName)||void 0===s?void 0:s[0])||"U"}),(0,Vx.jsx)("h1",{className:"text-3xl font-display text-gray-800 mb-2",children:(null===d||void 0===d?void 0:d.displayName)||"User"}),(0,Vx.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/80 backdrop-blur-sm text-primary rounded-full text-sm font-semibold mb-2 shadow-sm",children:[(0,Vx.jsx)("span",{children:"\ud83d\udc9c"}),(0,Vx.jsx)("span",{children:"Your Bestie"})]}),(null===d||void 0===d||null===(A=d.profile)||void 0===A?void 0:A.bio)&&(0,Vx.jsxs)("p",{className:"text-gray-700 italic max-w-md mx-auto mt-4",children:['"',d.profile.bio,'"']})]}),N?(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Stats"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Vx.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display text-pink-700 mb-1",children:(0,Vx.jsx)(Kw,{end:(null===d||void 0===d||null===(i=d.stats)||void 0===i?void 0:i.completedCheckIns)||0,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Completed Check-ins"})]}),(0,Vx.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display text-blue-700 mb-1",children:(0,Vx.jsx)(Kw,{end:(null===d||void 0===d||null===(a=d.stats)||void 0===a?void 0:a.totalCheckIns)||0,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Check-ins"})]}),(0,Vx.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display text-purple-700 mb-1",children:(0,Vx.jsx)(Kw,{end:(null===d||void 0===d||null===(o=d.stats)||void 0===o?void 0:o.totalBesties)||0,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Besties"})]}),(0,Vx.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl",children:[(0,Vx.jsx)("div",{className:"text-4xl font-display text-yellow-700 mb-1",children:(0,Vx.jsx)(Kw,{end:f.length,duration:1500})}),(0,Vx.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Badges Earned"})]})]})]}):(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Stats are private"})]}),E?(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Recent Check-ins (Last 7 Days)"}),m.length>0?(0,Vx.jsx)("div",{className:"space-y-3",children:m.map(e=>{var t,n,r,s,A;return(0,Vx.jsx)("div",{className:"card p-4",children:(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("div",{className:"text-3xl",children:(null===(t=e.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-text-primary",children:(null===(n=e.activity)||void 0===n?void 0:n.name)||e.activityName||"Check-in"}),(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary",children:[null===(r=e.createdAt)||void 0===r?void 0:r.toDate().toLocaleDateString()," at"," ",null===(s=e.createdAt)||void 0===s?void 0:s.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(null===(A=e.location)||void 0===A?void 0:A.address)&&(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:["\ud83d\udccd ",e.location.address]}),e.duration&&(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary",children:["\u23f1\ufe0f ",e.duration," minutes"]})]}),(0,Vx.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("completed"===e.status?"bg-green-100 text-green-700":"alerted"===e.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:["completed"===e.status&&"\u2713 Safe","alerted"===e.status&&"\u26a0\ufe0f Alert Sent","active"===e.status&&"\ud83d\udd14 Active"]})]})},e.id)})}):(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc5"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"No check-ins in the last 7 days"})]})]}):(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Check-in history is private"})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Featured Badges"}),C.length>0?(0,Vx.jsx)("div",{className:"grid grid-cols-3 gap-4",children:C.map((e,t)=>(0,Vx.jsxs)("div",{className:"card p-4 text-center bg-gradient-to-br from-yellow-50 to-orange-50",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:e.icon||"\ud83c\udfc6"}),(0,Vx.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name||e})]},t))}):(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"No featured badges"})]}),f.length>3&&(0,Vx.jsxs)("p",{className:"text-center text-text-secondary text-sm mt-3",children:["+ ",f.length-3," more badges"]})]}),(0,Vx.jsx)("div",{className:"space-y-3",children:(0,Vx.jsx)("button",{onClick:()=>u("/besties"),className:"w-full btn btn-secondary",children:"\u2190 Back to Besties"})})]})]})},Xw=e=>{let{bestie:n}=e;const r=te(),[s,A]=(0,t.useState)(null),[i,a]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{(async()=>{if(null!==n&&void 0!==n&&n.userId)try{const e=await fm(cp(Qx,"users",n.userId));if(e.exists()){const t=e.data();A(t.photoURL)}}catch(e){console.error("Error fetching user photo:",e)}finally{a(!1)}else a(!1)})()},[null===n||void 0===n?void 0:n.userId]),!n)return null;return(0,Vx.jsxs)("div",{className:"card p-4 cursor-pointer hover:shadow-lg transition-all hover:transform hover:-translate-y-1",onClick:()=>{n.userId&&r("/user/".concat(n.userId))},children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Vx.jsx)("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-lg flex-shrink-0 overflow-hidden",children:i?(0,Vx.jsx)("div",{className:"w-full h-full bg-gray-200 animate-pulse"}):s?(0,Vx.jsx)("img",{src:s,alt:n.name||"Bestie",className:"w-full h-full object-cover"}):n.name&&"string"===typeof n.name&&n.name.length>0?n.name[0].toUpperCase():n.phone&&"string"===typeof n.phone&&n.phone.length>0?n.phone[0]:"?"}),(0,Vx.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary truncate",children:n.name||n.phone||"Unknown"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary truncate",children:n.phone||"No phone"})]})]}),(0,Vx.jsx)("div",{className:"badge badge-primary text-xs",children:"\ud83d\udc9c Bestie"})]})},Jw=e=>{let{onClose:n,onSuccess:r}=e;const{currentUser:s,userData:A}=zx(),[i,a]=(0,t.useState)(!1),o="https://bestiesapp.web.app/?invite=".concat(null===s||void 0===s?void 0:s.uid),l="Hey! ".concat((null===A||void 0===A?void 0:A.displayName)||"Your friend"," wants you to be their safety bestie on Besties! \ud83d\udc9c Join them and help keep each other safe: ").concat(o),c=()=>{navigator.clipboard.writeText(l),en.success("Link copied! Now paste it to your bestie! \ud83d\udc95"),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},2e3)};return i?(0,Vx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Vx.jsx)("div",{className:"modal-content celebration-modal",onClick:e=>e.stopPropagation(),children:(0,Vx.jsxs)("div",{className:"celebration-content",children:[(0,Vx.jsx)("div",{className:"celebration-emoji",children:"\ud83c\udf89"}),(0,Vx.jsx)("h2",{className:"celebration-title",children:"Amazing!"}),(0,Vx.jsx)("p",{className:"celebration-text",children:"You're building your safety network! Every bestie you add makes both of you safer. \ud83d\udc9c"}),(0,Vx.jsxs)("div",{className:"celebration-encouragement",children:[(0,Vx.jsx)("p",{className:"font-semibold text-primary",children:"Keep going! Invite more besties:"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:"The more people in your circle, the safer everyone is. Your besties will thank you! \u2728"})]})]})})}):(0,Vx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Vx.jsxs)("div",{className:"modal-content invite-modal",onClick:e=>e.stopPropagation(),children:[(0,Vx.jsxs)("div",{className:"invite-header",children:[(0,Vx.jsx)("div",{className:"invite-icon",children:"\ud83d\udc6f\u200d\u2640\ufe0f"}),(0,Vx.jsx)("h2",{className:"invite-title",children:"Invite Your Bestie"}),(0,Vx.jsx)("p",{className:"invite-subtitle",children:"You're making such a smart choice! Adding besties means you'll both be safer when you're out. \ud83d\udc95"})]}),(0,Vx.jsxs)("div",{className:"invite-encouragement-box",children:[(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:(0,Vx.jsx)("strong",{children:"Why invite besties?"})}),(0,Vx.jsxs)("ul",{className:"invite-benefits",children:[(0,Vx.jsx)("li",{children:"\u2713 They'll get alerts if you need help"}),(0,Vx.jsx)("li",{children:"\u2713 You'll know they're safe too"}),(0,Vx.jsx)("li",{children:"\u2713 Mutual protection = double the safety"})]})]}),(0,Vx.jsxs)("button",{onClick:async()=>{if(navigator.share)try{await navigator.share({title:"Join me on Besties!",text:l,url:o}),a(!0),en.success("Thanks for inviting your bestie! \ud83d\udc9c"),setTimeout(()=>{null===r||void 0===r||r(),n()},2e3)}catch(e){"AbortError"!==e.name&&(console.error("Share failed:",e),en.error("Sharing failed. Try copy link instead!"))}else c()},className:"share-button primary-share",children:[(0,Vx.jsx)("span",{className:"share-icon",children:"\ud83c\udf89"}),(0,Vx.jsxs)("div",{className:"share-button-content",children:[(0,Vx.jsx)("div",{className:"share-button-title",children:"Share Invite"}),(0,Vx.jsx)("div",{className:"share-button-subtitle",children:"Choose any app to send"})]})]}),(0,Vx.jsx)("div",{className:"share-divider",children:(0,Vx.jsx)("span",{children:"OR SHARE VIA"})}),(0,Vx.jsxs)("div",{className:"share-options-grid",children:[(0,Vx.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(l);window.open("https://wa.me/?text=".concat(e),"_blank"),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},1500)},className:"share-option whatsapp",children:[(0,Vx.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcac"}),(0,Vx.jsx)("span",{children:"WhatsApp"})]}),(0,Vx.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(l);window.location.href="sms:?body=".concat(e),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},1500)},className:"share-option sms",children:[(0,Vx.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcf1"}),(0,Vx.jsx)("span",{children:"Text"})]}),(0,Vx.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(o);window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(e),"_blank"),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},1500)},className:"share-option facebook",children:[(0,Vx.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcd8"}),(0,Vx.jsx)("span",{children:"Facebook"})]}),(0,Vx.jsxs)("button",{onClick:c,className:"share-option copy",children:[(0,Vx.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udccb"}),(0,Vx.jsx)("span",{children:"Copy Link"})]})]}),(0,Vx.jsx)("div",{className:"invite-footer",children:(0,Vx.jsx)("p",{className:"text-xs text-text-secondary",children:"\ud83d\udc9c Your besties will appreciate you looking out for them!"})}),(0,Vx.jsx)("button",{onClick:n,className:"modal-close-button",children:"\u2715"})]})})},Zw=e=>{let{request:n}=e;const[r,s]=(0,t.useState)(!1),[A,i]=(0,t.useState)(null),[a,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{if(null!==n&&void 0!==n&&n.requesterId)try{const e=await fm(cp(Qx,"users",n.requesterId));if(e.exists()){const t=e.data();i(t.photoURL)}}catch(e){console.error("Error fetching user photo:",e)}finally{o(!1)}else o(!1)})()},[null===n||void 0===n?void 0:n.requesterId]);return(0,Vx.jsxs)("div",{className:"card p-4 border-2 border-primary/20 animate-fade-in",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Vx.jsx)("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-lg overflow-hidden",children:a?(0,Vx.jsx)("div",{className:"w-full h-full bg-gray-200 animate-pulse"}):A?(0,Vx.jsx)("img",{src:A,alt:n.requesterName||"Bestie",className:"w-full h-full object-cover"}):null!==n&&void 0!==n&&n.requesterName&&"string"===typeof n.requesterName&&n.requesterName.length>0?n.requesterName[0].toUpperCase():"?"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:n.requesterName}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:n.requesterPhone})]})]}),n.personalMessage&&(0,Vx.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 text-sm text-text-secondary italic",children:['"',n.personalMessage,'"']}),(0,Vx.jsxs)("div",{className:"flex gap-2",children:[(0,Vx.jsx)("button",{onClick:async()=>{en("Decline feature coming soon")},disabled:r,className:"flex-1 btn btn-secondary text-sm",children:"Decline"}),(0,Vx.jsx)("button",{onClick:async()=>{s(!0);const e=await Nw.acceptBestieRequest(n.id);s(!1),e.success?en.success("You're now besties with ".concat(n.requesterName,"! \ud83d\udc9c")):en.error("Failed to accept request")},disabled:r,className:"flex-1 btn btn-primary text-sm",children:r?"Accepting...":"Accept"})]})]})},$w=e=>{const t=new Date-e,n=Math.floor(t/6e4),r=Math.floor(t/36e5),s=Math.floor(t/864e5);return n<1?"Just now":n<60?"".concat(n," min ago"):r<24?"".concat(r," hour").concat(r>1?"s":""," ago"):"".concat(s," day").concat(s>1?"s":""," ago")},ev=()=>{var e,n,r,s;const{currentUser:A,userData:i}=zx(),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!0),[p,m]=(0,t.useState)([]),[g,y]=(0,t.useState)([]),[x,w]=(0,t.useState)([]),[v,b]=(0,t.useState)("all"),[B,C]=(0,t.useState)(!1),[N,E]=(0,t.useState)(null),[U,F]=(0,t.useState)(!1),[Q,I]=(0,t.useState)(""),[k,j]=(0,t.useState)("");(0,t.useEffect)(()=>{if(!A)return;const e=qp(lp(Qx,"besties"),Xp("requesterId","==",A.uid),Xp("status","==","accepted")),t=qp(lp(Qx,"besties"),Xp("recipientId","==",A.uid),Xp("status","==","accepted")),n=vm(e,e=>{const n=[];e.forEach(e=>{const t=e.data();n.push({id:e.id,userId:t.recipientId,name:t.recipientName||"Unknown",phone:t.recipientPhone,role:"added",isFavorite:t.isFavorite||!1})}),mm(t).then(e=>{e.forEach(e=>{const t=e.data();n.push({id:e.id,userId:t.requesterId,name:t.requesterName||"Unknown",phone:t.requesterPhone,role:"guardian",isFavorite:t.isFavorite||!1})}),o(n),f(!1)}).catch(e=>{console.error("Error loading recipient besties:",e),o(n),f(!1)})}),r=vm(qp(lp(Qx,"besties"),Xp("recipientId","==",A.uid),Xp("status","==","pending")),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),c(t)});return()=>{n(),r()}},[A]),(0,t.useEffect)(()=>{if(!A||0===a.length)return;const e=async()=>{const e=[],t=[],n=[],r=a.map(e=>e.userId),s=new Date;s.setHours(s.getHours()-48);for(const l of r)try{const r=qp(lp(Qx,"checkins"),Xp("userId","==",l),Xp("createdAt",">=",s),$p("createdAt","desc"),tm(10));(await mm(r)).forEach(n=>{var r;const s=n.data(),A=a.find(e=>e.userId===l);var i;(e.push({id:n.id,type:"checkin",checkInData:s,userName:(null===A||void 0===A?void 0:A.name)||"Bestie",userId:l,timestamp:(null===(r=s.createdAt)||void 0===r?void 0:r.toDate())||new Date,status:s.status}),"alerted"===s.status)&&t.push({id:n.id,userName:(null===A||void 0===A?void 0:A.name)||"Bestie",userId:l,checkInData:s,timestamp:(null===(i=s.createdAt)||void 0===i?void 0:i.toDate())||new Date})});const o=await fm(cp(Qx,"users",l));if(o.exists()){const e=o.data();if(e.requestAttention&&e.requestAttention.active){var A;const t=a.find(e=>e.userId===l);n.push({userId:l,userName:(null===t||void 0===t?void 0:t.name)||"Bestie",tag:e.requestAttention.tag,note:e.requestAttention.note,timestamp:(null===(A=e.requestAttention.timestamp)||void 0===A?void 0:A.toDate())||new Date})}}const c=await fm(cp(Qx,"badges",l));if(c.exists()){var i;const t=(null===(i=c.data().badges)||void 0===i?void 0:i.filter(e=>{var t;const n=null===(t=e.earnedAt)||void 0===t?void 0:t.toDate();return n&&n>s}))||[];t.forEach(t=>{var n;const r=a.find(e=>e.userId===l);e.push({id:"badge-".concat(l,"-").concat(t.id),type:"badge",userName:(null===r||void 0===r?void 0:r.name)||"Bestie",userId:l,badge:t,timestamp:(null===(n=t.earnedAt)||void 0===n?void 0:n.toDate())||new Date})})}}catch(o){console.error("Error loading activity for bestie:",o)}e.sort((e,t)=>t.timestamp-e.timestamp),m(e),y(t),w(n)};e();const t=setInterval(e,12e4);return()=>clearInterval(t)},[A,a]);const S=async()=>{try{await ym(cp(Qx,"users",A.uid),{"requestAttention.active":!1}),en.success("Request removed")}catch(e){console.error("Error canceling request:",e),en.error("Failed to cancel request")}},T=async(e,t)=>{try{await wm(lp(Qx,"checkins",e,"reactions"),{userId:A.uid,userName:(null===i||void 0===i?void 0:i.displayName)||"Anonymous",emoji:t,timestamp:wo.now()}),en.success("Reaction added!")}catch(n){console.error("Error adding reaction:",n),en.error("Failed to add reaction")}},_={mostReliable:[],fastestResponder:[],safetyChampion:[],streakMaster:[]},D=(()=>{let e=[...a];switch(v){case"circle":e=e.filter(e=>e.isFavorite);break;case"active":const t=new Date(Date.now()-36e5);e=e.filter(e=>p.some(n=>n.userId===e.userId&&n.timestamp>t&&"active"===n.status));break;case"attention":const n=[...g.map(e=>e.userId),...x.map(e=>e.userId)];e=e.filter(e=>n.includes(e.userId));break;case"reliable":e.sort((e,t)=>{const n=p.filter(t=>t.userId===e.userId&&"completed"===t.status).length,r=p.filter(e=>e.userId===t.userId&&"completed"===e.status).length;return r-n});break;case"recent":e.sort((e,t)=>{const n=p.find(t=>t.userId===e.userId),r=p.find(e=>e.userId===t.userId);return n?r?r.timestamp-n.timestamp:-1:1});break;default:e.sort((e,t)=>e.isFavorite&&!t.isFavorite?-1:!e.isFavorite&&t.isFavorite?1:(e.name||"").localeCompare(t.name||""))}return e})();return h?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-6xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Vx.jsx)("div",{className:"mb-6",children:(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-gradient mb-2",children:"\ud83d\udc9c Your Besties"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Your safety squad activity hub"})]}),(0,Vx.jsxs)("div",{className:"flex gap-2",children:[null!==i&&void 0!==i&&null!==(e=i.requestAttention)&&void 0!==e&&e.active?(0,Vx.jsx)("button",{onClick:S,className:"btn bg-orange-500 text-white hover:bg-orange-600",children:"Cancel Request"}):(0,Vx.jsx)("button",{onClick:()=>C(!0),className:"btn btn-primary",children:"\ud83d\udcac Request Attention"}),(0,Vx.jsx)("button",{onClick:()=>d(!0),className:"btn btn-secondary",children:"\u2795 Add Bestie"})]})]})}),l.length>0&&(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsxs)("h2",{className:"text-xl font-display text-text-primary mb-4",children:["\ud83d\udd14 Pending Requests (",l.length,")"]}),(0,Vx.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,Vx.jsx)(Zw,{request:e},e.id))})]}),(null===i||void 0===i||null===(n=i.requestAttention)||void 0===n?void 0:n.active)&&(0,Vx.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200",children:(0,Vx.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Vx.jsx)("div",{className:"text-4xl",children:"\ud83d\udc9c"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"text-xl font-display text-purple-900 mb-2",children:"You're requesting attention"}),(0,Vx.jsx)("div",{className:"inline-block px-3 py-1 bg-purple-200 text-purple-900 rounded-full text-sm font-semibold mb-2",children:i.requestAttention.tag}),i.requestAttention.note&&(0,Vx.jsxs)("p",{className:"text-gray-700 italic",children:['"',i.requestAttention.note,'"']}),(0,Vx.jsx)("p",{className:"text-sm text-purple-700 mt-2",children:"Your besties can see this and reach out to support you \ud83d\udc9c"})]}),(0,Vx.jsx)("button",{onClick:S,className:"text-purple-700 hover:text-purple-900 font-semibold text-sm",children:"Remove"})]})}),(g.length>0||x.length>0)&&(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-red-600 mb-4",children:"\u26a0\ufe0f Needs Attention"}),g.length>0&&(0,Vx.jsx)("div",{className:"space-y-3 mb-4",children:g.map(e=>{var t,n;return(0,Vx.jsx)("div",{className:"card p-4 bg-red-50 border-2 border-red-200",children:(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("div",{className:"text-3xl",children:"\ud83d\udea8"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("h3",{className:"font-semibold text-red-900",children:[e.userName," missed a check-in"]}),(0,Vx.jsxs)("p",{className:"text-sm text-red-700",children:[(null===(t=e.checkInData.activity)||void 0===t?void 0:t.name)||"Check-in"," \u2022 ",new Date(e.timestamp).toLocaleString()]}),(null===(n=e.checkInData.location)||void 0===n?void 0:n.address)&&(0,Vx.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:["\ud83d\udccd ",e.checkInData.location.address]})]}),(0,Vx.jsx)("button",{className:"btn btn-sm bg-red-600 text-white hover:bg-red-700",onClick:()=>{var t;return window.location.href="tel:".concat(null===(t=a.find(t=>t.userId===e.userId))||void 0===t?void 0:t.phone)},children:"Call Now"})]})},e.id)})}),x.length>0&&(0,Vx.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,Vx.jsx)("div",{className:"card p-4 bg-purple-50 border-2 border-purple-200",children:(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("div",{className:"text-3xl",children:"\ud83d\udc9c"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("h3",{className:"font-semibold text-purple-900",children:[e.userName," needs support"]}),(0,Vx.jsx)("div",{className:"inline-block px-3 py-1 bg-purple-200 text-purple-800 rounded-full text-sm font-semibold my-2",children:e.tag}),e.note&&(0,Vx.jsxs)("p",{className:"text-sm text-purple-700 italic",children:['"',e.note,'"']}),(0,Vx.jsx)("p",{className:"text-xs text-purple-600 mt-2",children:new Date(e.timestamp).toLocaleString()})]}),(0,Vx.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>{const t=a.find(t=>t.userId===e.userId);null!==t&&void 0!==t&&t.phone&&(window.location.href="sms:".concat(t.phone))},children:"Reach Out"})]})},e.userId))})]}),(0,Vx.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,Vx.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,Vx.jsx)("div",{className:"card p-4",children:(0,Vx.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[(0,Vx.jsx)("button",{onClick:()=>b("all"),className:"px-4 py-2 rounded-full whitespace-nowrap font-semibold text-sm ".concat("all"===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All Besties"}),(0,Vx.jsx)("button",{onClick:()=>b("circle"),className:"px-4 py-2 rounded-full whitespace-nowrap font-semibold text-sm ".concat("circle"===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\ud83d\udc9c Bestie Circle"}),(0,Vx.jsx)("button",{onClick:()=>b("active"),className:"px-4 py-2 rounded-full whitespace-nowrap font-semibold text-sm ".concat("active"===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\ud83d\udd14 Active Now"}),(0,Vx.jsx)("button",{onClick:()=>b("attention"),className:"px-4 py-2 rounded-full whitespace-nowrap font-semibold text-sm ".concat("attention"===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\u26a0\ufe0f Needs Attention"}),(0,Vx.jsx)("button",{onClick:()=>b("reliable"),className:"px-4 py-2 rounded-full whitespace-nowrap font-semibold text-sm ".concat("reliable"===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\ud83d\udee1\ufe0f Most Reliable"}),(0,Vx.jsx)("button",{onClick:()=>b("recent"),className:"px-4 py-2 rounded-full whitespace-nowrap font-semibold text-sm ".concat("recent"===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\u23f0 Recent Activity"})]})}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"\ud83d\udcf0 Activity Feed"}),0===p.length?(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udf1f"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"No recent activity"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary mt-1",children:"Check-ins from your besties will appear here"})]}):(0,Vx.jsx)("div",{className:"space-y-3",children:p.slice(0,15).map(e=>{var t,n,r;return(0,Vx.jsxs)("div",{className:"card p-4",children:["checkin"===e.type&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("div",{className:"text-3xl",children:(null===(t=e.checkInData.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("h3",{className:"font-semibold text-text-primary",children:[(0,Vx.jsx)("span",{className:"text-primary",children:e.userName}),"completed"===e.status&&" completed check-in safely \u2705","active"===e.status&&" is currently checked in \ud83d\udd14","alerted"===e.status&&" MISSED check-in \ud83d\udea8"]}),(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary",children:[(null===(n=e.checkInData.activity)||void 0===n?void 0:n.name)||"Check-in"," \u2022 ",$w(e.timestamp)]}),(null===(r=e.checkInData.location)||void 0===r?void 0:r.address)&&(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:["\ud83d\udccd ",e.checkInData.location.address]})]}),(0,Vx.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ".concat("completed"===e.status?"bg-green-100 text-green-700":"alerted"===e.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:["completed"===e.status&&"\u2713 Safe","alerted"===e.status&&"\u26a0\ufe0f Alert","active"===e.status&&"\ud83d\udd14 Active"]})]}),"alerted"!==e.status&&(0,Vx.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,Vx.jsx)("button",{onClick:()=>T(e.id,"\ud83d\udc9c"),className:"text-2xl hover:scale-110 transition-transform",title:"Proud",children:"\ud83d\udc9c"}),(0,Vx.jsx)("button",{onClick:()=>T(e.id,"\ud83d\ude2e\u200d\ud83d\udca8"),className:"text-2xl hover:scale-110 transition-transform",title:"Relieved",children:"\ud83d\ude2e\u200d\ud83d\udca8"}),(0,Vx.jsx)("button",{onClick:()=>T(e.id,"\ud83c\udf89"),className:"text-2xl hover:scale-110 transition-transform",title:"Celebrate",children:"\ud83c\udf89"}),(0,Vx.jsx)("button",{onClick:()=>{E(e),F(!0)},className:"ml-auto text-sm text-primary hover:underline font-semibold",children:"\ud83d\udcac Comment"})]})]}),"badge"===e.type&&(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("div",{className:"text-3xl",children:e.badge.icon||"\ud83c\udfc6"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("h3",{className:"font-semibold text-text-primary",children:[(0,Vx.jsx)("span",{className:"text-primary",children:e.userName})," earned the ",(0,Vx.jsx)("span",{className:"text-yellow-600",children:e.badge.name})," badge! \ud83c\udf89"]}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:$w(e.timestamp)})]}),(0,Vx.jsx)("button",{onClick:()=>T(e.id,"\ud83c\udf89"),className:"text-2xl hover:scale-110 transition-transform",children:"\ud83c\udf89"})]})]},e.id)})})]})]}),(0,Vx.jsxs)("div",{className:"space-y-6",children:[(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"\ud83c\udfc6 This Week's Champions"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Vx.jsx)("span",{className:"text-xl",children:"\ud83d\udee1\ufe0f"}),(0,Vx.jsx)("span",{className:"font-semibold text-sm text-gray-700",children:"Most Reliable"})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:_.mostReliable.length>0?(0,Vx.jsxs)("div",{children:[null===(r=_.mostReliable[0])||void 0===r?void 0:r.name," \u2022 ",null===(s=_.mostReliable[0])||void 0===s?void 0:s.rate,"%"]}):(0,Vx.jsx)("div",{className:"italic",children:"Building stats..."})})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Vx.jsx)("span",{className:"text-xl",children:"\u26a1"}),(0,Vx.jsx)("span",{className:"font-semibold text-sm text-gray-700",children:"Fastest Responder"})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary italic",children:"Building stats..."})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Vx.jsx)("span",{className:"text-xl",children:"\ud83c\udfc5"}),(0,Vx.jsx)("span",{className:"font-semibold text-sm text-gray-700",children:"Safety Champion"})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary italic",children:"Building stats..."})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Vx.jsx)("span",{className:"text-xl",children:"\ud83d\udd25"}),(0,Vx.jsx)("span",{className:"font-semibold text-sm text-gray-700",children:"Streak Master"})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary italic",children:"Building stats..."})]})]}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary mt-4 italic",children:"Rankings reset every Monday"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("h2",{className:"text-xl font-display text-text-primary mb-4",children:["circle"===v&&"\ud83d\udc9c Bestie Circle","all"===v&&"All Besties","active"===v&&"\ud83d\udd14 Active Now","attention"===v&&"\u26a0\ufe0f Needs Attention","reliable"===v&&"\ud83d\udee1\ufe0f Most Reliable","recent"===v&&"\u23f0 Recent Activity"]}),0===D.length?(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc9c"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"No besties in this filter"}),"circle"===v&&(0,Vx.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:"Add besties to your circle by favoriting them"})]}):(0,Vx.jsx)("div",{className:"grid gap-3",children:D.map(e=>{const t=(e=>{const t=[],n=p.filter(t=>t.userId===e.userId),r=new Date(Date.now()-3e5);n.some(e=>e.timestamp>r)&&t.push({icon:"\u26a1",tooltip:"Fast responder"});const s=n.filter(e=>"completed"===e.status).length;s>5&&t.push({icon:"\ud83d\udee1\ufe0f",tooltip:"Very reliable"}),t.push({icon:"\ud83d\udd25",tooltip:"7-day streak"});const A=n.filter(e=>{const t=e.timestamp.getHours();return t>=21||t<=6});return A.length>2&&t.push({icon:"\ud83c\udf19",tooltip:"Night owl"}),t.slice(0,3)})(e);return(0,Vx.jsxs)("div",{className:"relative",children:[(0,Vx.jsx)(Xw,{bestie:e}),t.length>0&&(0,Vx.jsx)("div",{className:"absolute top-2 right-2 flex gap-1",children:t.map((e,t)=>(0,Vx.jsx)("span",{className:"text-lg bg-white rounded-full p-1 shadow-sm",title:e.tooltip,children:e.icon},t))})]},e.id)})})]})]})]}),0===a.length&&0===l.length&&(0,Vx.jsxs)("div",{className:"card p-12 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc9c"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No besties yet!"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"Add friends who'll have your back when you need them"}),(0,Vx.jsx)("button",{onClick:()=>d(!0),className:"btn btn-primary",children:"Add Your First Bestie"})]})]}),B&&(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc9c Request Attention"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"Let your besties know you could use some support"}),(0,Vx.jsxs)("div",{className:"mb-4",children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"How are you feeling?"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Vx.jsxs)("button",{onClick:()=>I("Needs to vent \ud83d\udcac"),className:"p-3 rounded-xl border-2 text-left ".concat("Needs to vent \ud83d\udcac"===Q?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Vx.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udcac"}),(0,Vx.jsx)("div",{className:"text-sm font-semibold",children:"Needs to vent"})]}),(0,Vx.jsxs)("button",{onClick:()=>I("Needs a shoulder \ud83e\udec2"),className:"p-3 rounded-xl border-2 text-left ".concat("Needs a shoulder \ud83e\udec2"===Q?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Vx.jsx)("div",{className:"text-2xl mb-1",children:"\ud83e\udec2"}),(0,Vx.jsx)("div",{className:"text-sm font-semibold",children:"Needs a shoulder"})]}),(0,Vx.jsxs)("button",{onClick:()=>I("Could use support \ud83d\udc9c"),className:"p-3 rounded-xl border-2 text-left ".concat("Could use support \ud83d\udc9c"===Q?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Vx.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udc9c"}),(0,Vx.jsx)("div",{className:"text-sm font-semibold",children:"Could use support"})]}),(0,Vx.jsxs)("button",{onClick:()=>I("Having a rough day \ud83d\ude14"),className:"p-3 rounded-xl border-2 text-left ".concat("Having a rough day \ud83d\ude14"===Q?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Vx.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\ude14"}),(0,Vx.jsx)("div",{className:"text-sm font-semibold",children:"Rough day"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Add a note (optional)"}),(0,Vx.jsx)("textarea",{value:k,onChange:e=>j(e.target.value),placeholder:"Let your besties know what's going on...",className:"w-full p-3 border border-gray-300 rounded-xl resize-none",rows:3})]}),(0,Vx.jsxs)("div",{className:"flex gap-3",children:[(0,Vx.jsx)("button",{onClick:()=>{C(!1),I(""),j("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Vx.jsx)("button",{onClick:async()=>{if(Q)try{await ym(cp(Qx,"users",A.uid),{requestAttention:{active:!0,tag:Q,note:k,timestamp:wo.now()}}),en.success("Your besties will see your request \ud83d\udc9c"),C(!1),I(""),j("")}catch(e){console.error("Error requesting attention:",e),en.error("Failed to send request")}else en.error("Please select a tag")},className:"flex-1 btn btn-primary",children:"Send Request"})]})]})}),U&&N&&(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcac Comments"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Coming soon! You'll be able to comment on your besties' check-ins."}),(0,Vx.jsx)("button",{onClick:()=>{F(!1),E(null)},className:"w-full btn btn-primary",children:"Close"})]})}),u&&(0,Vx.jsx)(Jw,{onClose:()=>d(!1)})]})},tv={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_VAPID_KEY;const nv=new class{constructor(){this.initialized=!1,this.token=null}isSupported(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}getPermissionStatus(){return this.isSupported()?Notification.permission:"unsupported"}async requestPermission(){if(!this.isSupported())throw new Error("Push notifications are not supported in this browser");if("granted"===Notification.permission)return!0;return"granted"===await Notification.requestPermission()}async initializeServiceWorker(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.log("Service Worker registered:",e),e}catch(e){return console.error("Service Worker registration failed:",e),null}}async getToken(){try{if(!tv)return console.warn("VAPID key not configured"),en.error("Push notifications require additional setup. Please use email or WhatsApp notifications instead.",{duration:6e3}),null;const e=await this.initializeServiceWorker();if(!e)return console.error("Could not register service worker"),null;await new Promise(e=>setTimeout(e,1e3));const t=await async function(e,t){return yx(e=Qn(e),t)}(jx,{vapidKey:tv,serviceWorkerRegistration:e});return t?(console.log("FCM Token obtained:",t),this.token=t,t):(console.warn("No FCM token available. Request permission to generate one."),null)}catch(e){return console.error("Error getting FCM token:",e),null}}async saveTokenToFirestore(e){try{const t=Fx.currentUser;return t?(await ym(cp(Qx,"users",t.uid),{fcmToken:e,notificationsEnabled:!0,lastTokenUpdate:new Date}),console.log("FCM token saved to Firestore"),!0):(console.warn("No user logged in to save token"),!1)}catch(t){return console.error("Error saving FCM token:",t),!1}}async enableNotifications(){try{if(!this.isSupported())return en.error("Push notifications are not supported in your browser"),!1;if(!await this.requestPermission())return en.error("Notification permission denied"),!1;const e=await this.getToken();if(!e)return en.error("Could not get notification token"),!1;return await this.saveTokenToFirestore(e)?(this.setupForegroundListener(),this.initialized=!0,en.success("Push notifications enabled!"),!0):(en.error("Could not save notification settings"),!1)}catch(e){return console.error("Error enabling notifications:",e),en.error("Failed to enable notifications"),!1}}async disableNotifications(){try{const e=Fx.currentUser;return!!e&&(await ym(cp(Qx,"users",e.uid),{notificationsEnabled:!1,fcmToken:null}),this.token=null,this.initialized=!1,en.success("Push notifications disabled"),!0)}catch(e){return console.error("Error disabling notifications:",e),en.error("Failed to disable notifications"),!1}}setupForegroundListener(){Ex(jx,e=>{console.log("Foreground message received:",e);const{title:t,body:n,icon:r}=e.notification||{};en.custom(e=>(0,Vx.jsxs)("div",{className:"".concat(e.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,Vx.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,Vx.jsxs)("div",{className:"flex items-start",children:[r&&(0,Vx.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,Vx.jsx)("img",{className:"h-10 w-10 rounded-full",src:r,alt:""})}),(0,Vx.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Vx.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t}),(0,Vx.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]})}),(0,Vx.jsx)("div",{className:"flex border-l border-gray-200",children:(0,Vx.jsx)("button",{onClick:()=>en.dismiss(e.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-primary hover:text-primary/80 focus:outline-none",children:"Close"})})]}),{duration:6e3,position:"top-right"}),"Notification"in window&&"granted"===Notification.permission&&new Notification(t,{body:n,icon:r||"/logo192.png",badge:"/logo192.png",tag:"besties-notification",requireInteraction:!1})})}async sendTestNotification(){return"Notification"in window&&"granted"===Notification.permission&&(new Notification("Besties Test Notification",{body:"Push notifications are working!",icon:"/logo192.png",badge:"/logo192.png"}),!0)}},rv=nv,sv=()=>{var e,n,r,s,A,i,a,o,l,c,u,d,h,f,p,m,g,y,x,w,v;const{currentUser:b,userData:B}=zx(),{isDark:C,toggle:N}=Jx(),E=te(),[U,F]=(0,t.useState)(!1),[Q,I]=(0,t.useState)(!1),[k,j]=(0,t.useState)(!0),[S,T]=(0,t.useState)(!1),[_,D]=(0,t.useState)({displayName:"",phoneNumber:"",bio:""}),[L,H]=(0,t.useState)(!1),[R,P]=(0,t.useState)(0);(0,t.useEffect)(()=>{const e=rv.isSupported();j(e),e&&I((null===B||void 0===B?void 0:B.notificationsEnabled)||!1)},[B]),(0,t.useEffect)(()=>{var e;B&&D({displayName:B.displayName||"",phoneNumber:B.phoneNumber||"",bio:(null===(e=B.profile)||void 0===e?void 0:e.bio)||""})},[B]),(0,t.useEffect)(()=>{(async()=>{if(b)try{const e=await fm(cp(Qx,"users",b.uid));if(e.exists()){const t=e.data();P(t.smsWeeklyCount||0)}}catch(e){console.error("Error loading SMS count:",e)}})()},[b]);const O=async e=>{if(b){if("sms"===e){var t;const e=(null===B||void 0===B||null===(t=B.notificationPreferences)||void 0===t?void 0:t.sms)||!1;if(!e&&(null===B||void 0===B||!B.hasSeenSMSPopup))return void H(!0);if(!e&&R>=5)return void en.error("You've reached the weekly limit of 5 SMS alerts. Limit resets every Monday.",{duration:6e3})}try{var n;const t=!(null!==B&&void 0!==B&&null!==(n=B.notificationPreferences)&&void 0!==n&&n[e]);if("whatsapp"===e&&t)return void en.error("WhatsApp integration coming soon! \ud83d\ude80",{duration:4e3});if("facebook"===e&&t)return void en.error("Facebook integration coming soon! \ud83d\ude80",{duration:4e3});await ym(cp(Qx,"users",b.uid),{["notificationPreferences.".concat(e)]:t}),en.success("".concat(e," notifications ").concat(t?"enabled":"disabled"))}catch(r){console.error("Error updating notification:",r),en.error("Failed to update notification setting")}}},M=async e=>{F(!0);try{const t=await Nw.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:en.error("Failed to start donation")}catch(t){console.error("Donation error:",t),en.error("Failed to start donation")}finally{F(!1)}};return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Settings"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Manage your account and preferences"})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"Account"}),S?(0,Vx.jsxs)("div",{className:"flex gap-2",children:[(0,Vx.jsx)("button",{onClick:()=>T(!1),className:"text-gray-600 font-semibold hover:underline text-sm",children:"Cancel"}),(0,Vx.jsx)("button",{onClick:async()=>{if(b){F(!0);try{await ym(cp(Qx,"users",b.uid),{displayName:_.displayName,phoneNumber:_.phoneNumber,"profile.bio":_.bio}),en.success("Profile updated successfully!"),T(!1)}catch(e){console.error("Error updating profile:",e),en.error("Failed to update profile")}finally{F(!1)}}},disabled:U,className:"text-primary font-semibold hover:underline text-sm",children:U?"Saving...":"\ud83d\udcbe Save"})]}):(0,Vx.jsx)("button",{onClick:()=>T(!0),className:"text-primary font-semibold hover:underline text-sm",children:"\u270f\ufe0f Edit"})]}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Email"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:null===b||void 0===b?void 0:b.email}),(0,Vx.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:"Email cannot be changed"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Display Name"}),S?(0,Vx.jsx)("input",{type:"text",value:_.displayName,onChange:e=>D(Re(Re({},_),{},{displayName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your name"}):(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:(null===B||void 0===B?void 0:B.displayName)||"Not set"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Phone Number"}),S?(0,Vx.jsx)("input",{type:"tel",value:_.phoneNumber,onChange:e=>D(Re(Re({},_),{},{phoneNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+1234567890"}):(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:(null===B||void 0===B?void 0:B.phoneNumber)||"Not set"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Bio"}),S?(0,Vx.jsx)("textarea",{value:_.bio,onChange:e=>D(Re(Re({},_),{},{bio:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Tell us about yourself...",rows:3}):(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:(null===B||void 0===B||null===(e=B.profile)||void 0===e?void 0:e.bio)||"Not set"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Member Since"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:(null===B||void 0===B||null===(n=B.stats)||void 0===n||null===(r=n.joinedAt)||void 0===r?void 0:r.toDate().toLocaleDateString())||"Recently"})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Notifications"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between opacity-50",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-2",children:["WhatsApp",(0,Vx.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Coming Soon"})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"WhatsApp integration in development"})]}),(0,Vx.jsx)("button",{onClick:()=>O("whatsapp"),className:"w-12 h-6 rounded-full transition-colors bg-gray-300 cursor-not-allowed",disabled:!0,children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform translate-x-1"})})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between opacity-50",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-2",children:["Facebook Messenger",(0,Vx.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Coming Soon"})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Facebook integration in development"})]}),(0,Vx.jsx)("button",{onClick:()=>O("facebook"),className:"w-12 h-6 rounded-full transition-colors bg-gray-300 cursor-not-allowed",disabled:!0,children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform translate-x-1"})})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"Email"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Get alerts via email"})]}),(0,Vx.jsx)("button",{onClick:()=>O("email"),className:"w-12 h-6 rounded-full transition-colors ".concat(null!==B&&void 0!==B&&null!==(s=B.notificationPreferences)&&void 0!==s&&s.email?"bg-primary":"bg-gray-300"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==B&&void 0!==B&&null!==(A=B.notificationPreferences)&&void 0!==A&&A.email?"translate-x-6":"translate-x-1")})})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vx.jsx)("span",{className:"font-semibold text-text-primary",children:"Push Notifications (Beta)"}),(0,Vx.jsx)("button",{onClick:()=>en(e=>(0,Vx.jsxs)("div",{className:"text-sm",children:[(0,Vx.jsx)("p",{className:"font-semibold mb-2",children:"About Push Notifications"}),(0,Vx.jsx)("p",{className:"mb-2",children:"Push notifications in web browsers have limited reliability because:"}),(0,Vx.jsxs)("ul",{className:"list-disc ml-4 mb-2 text-xs",children:[(0,Vx.jsx)("li",{children:"They require a VAPID key configuration"}),(0,Vx.jsx)("li",{children:"They only work when the browser is open"}),(0,Vx.jsx)("li",{children:"Some browsers block them by default"})]}),(0,Vx.jsx)("p",{className:"text-xs font-semibold text-primary",children:"We're building a native mobile app that will support reliable push notifications! \ud83d\udcf1"}),(0,Vx.jsx)("button",{onClick:()=>en.dismiss(e.id),className:"mt-2 text-primary text-xs underline",children:"Close"})]}),{duration:8e3}),className:"text-gray-400 hover:text-gray-600",title:"Learn more about push notifications",children:(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vx.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:k?"Browser notifications - limited reliability":"Not supported in this browser"})]}),(0,Vx.jsx)("button",{onClick:async()=>{if(k){F(!0);try{if(Q){await rv.disableNotifications()&&I(!1)}else{await rv.enableNotifications()&&I(!0)}}catch(e){console.error("Push notification error:",e),en.error("Failed to update push notifications")}finally{F(!1)}}else en.error("Push notifications are not supported in your browser")},disabled:!k||U,className:"w-12 h-6 rounded-full transition-colors ".concat(k?Q?"bg-primary":"bg-gray-300":"bg-gray-200 cursor-not-allowed"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(Q?"translate-x-6":"translate-x-1")})})]}),k&&!Q&&(0,Vx.jsx)("div",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-lg",children:"\ud83d\udca1 Tip: Email, WhatsApp, and Facebook are more reliable for critical safety alerts"}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vx.jsx)("span",{className:"font-semibold text-text-primary",children:"SMS Alerts"}),(0,Vx.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-semibold",children:"Free - Limited Time"}),(0,Vx.jsx)("button",{onClick:()=>en(e=>(0,Vx.jsxs)("div",{className:"text-sm max-w-sm",children:[(0,Vx.jsx)("p",{className:"font-semibold mb-2",children:"About SMS Alerts"}),(0,Vx.jsx)("p",{className:"mb-2",children:"SMS messages are expensive to send. Currently offering them for free during beta!"}),(0,Vx.jsxs)("p",{className:"mb-2 text-xs",children:["\u2022 ",(0,Vx.jsx)("span",{className:"font-semibold",children:"Free tier:"})," Up to 5 SMS alerts per week",(0,Vx.jsx)("br",{}),"\u2022 Once WhatsApp and Facebook integrations launch, SMS will become a premium feature",(0,Vx.jsx)("br",{}),"\u2022 Premium SMS subscription: Up to 20 SMS alerts per month for $1/month"]}),(0,Vx.jsx)("p",{className:"text-xs font-semibold text-primary",children:"Use WhatsApp or Email for free unlimited alerts! \ud83d\udcf1"}),(0,Vx.jsx)("button",{onClick:()=>en.dismiss(e.id),className:"mt-2 text-primary text-xs underline",children:"Close"})]}),{duration:1e4}),className:"text-gray-400 hover:text-gray-600",title:"Learn more about SMS alerts",children:(0,Vx.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vx.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:null!==B&&void 0!==B&&null!==(i=B.notificationPreferences)&&void 0!==i&&i.sms?"Active - ".concat(R,"/5 alerts used this week"):"Not enabled"})]}),(0,Vx.jsx)("button",{onClick:()=>O("sms"),className:"w-12 h-6 rounded-full transition-colors ".concat(null!==B&&void 0!==B&&null!==(a=B.notificationPreferences)&&void 0!==a&&a.sms?"bg-primary":"bg-gray-300"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==B&&void 0!==B&&null!==(o=B.notificationPreferences)&&void 0!==o&&o.sms?"translate-x-6":"translate-x-1")})})]}),(null===B||void 0===B||null===(l=B.notificationPreferences)||void 0===l?void 0:l.sms)&&R>=4&&(0,Vx.jsx)("div",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-lg",children:"\u26a0\ufe0f You're approaching the weekly limit of 5 SMS alerts. Consider using email or WhatsApp for unlimited free alerts."})]}),(0,Vx.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Vx.jsx)("button",{onClick:async()=>{F(!0);try{const e=await Nw.sendTestAlert();if(e.data&&e.data.success){const t=e.data.channels,n=[];t.email&&n.push("Email"),t.push&&n.push("Push"),n.length>0?en.success("Test alert sent to: ".concat(n.join(", "),". WhatsApp/SMS/Facebook not tested to save costs, but use same system."),{duration:6e3}):en.error("No notification channels enabled. Enable email to test alerts.",{duration:5e3})}else en.error("Failed to send test alert")}catch(e){console.error("Test alert error:",e),en.error("Failed to send test alert")}finally{F(!1)}},disabled:U,className:"w-full btn btn-primary",children:U?"Sending Test Alert...":"\ud83e\uddea Send Test Alert"}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary mt-2 text-center",children:"Test your notification setup - sends to all enabled channels"})]})]}),null!==B&&void 0!==B&&null!==(c=B.smsSubscription)&&void 0!==c&&c.active?(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-green-50 border-2 border-green-300",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"\u2705 Premium SMS Active"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"You're subscribed to premium SMS alerts - up to 20 SMS per month"}),(0,Vx.jsx)("button",{onClick:async()=>{F(!0);try{const e=await Nw.createPortalSession();e.data&&e.data.url?window.location.href=e.data.url:en.error("Failed to open subscription portal")}catch(e){console.error("Portal session error:",e),en.error("Failed to open subscription portal")}finally{F(!1)}},disabled:U,className:"btn btn-secondary",children:U?"Loading...":"Manage Subscription"})]}):(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-secondary",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Premium SMS Alerts"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Get up to 20 SMS alerts per month for just $1/month"}),(0,Vx.jsxs)("ul",{className:"text-sm text-text-secondary mb-4 space-y-1",children:[(0,Vx.jsx)("li",{children:"\u2713 20 SMS alerts per month"}),(0,Vx.jsx)("li",{children:"\u2713 Priority delivery"}),(0,Vx.jsx)("li",{children:"\u2713 No weekly limits"})]}),(0,Vx.jsxs)("div",{className:"flex gap-3",children:[(0,Vx.jsx)("button",{onClick:async()=>{F(!0);try{const e=await Nw.createCheckoutSession({amount:1,type:"subscription"});e.data&&e.data.url?window.location.href=e.data.url:en.error("Failed to start subscription")}catch(e){console.error("Subscription error:",e),en.error("Failed to start subscription")}finally{F(!1)}},disabled:U,className:"btn btn-primary flex-1",children:"Subscribe for $1/month"}),(0,Vx.jsx)("button",{onClick:()=>E("/about"),className:"btn btn-secondary",children:"Learn More"})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Privacy"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary mb-4",children:"Control what your besties can see on your profile"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"Show Stats to Besties"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:!1!==(null===B||void 0===B||null===(u=B.privacySettings)||void 0===u?void 0:u.showStatsToBesties)?"Besties can see your stats":"Stats are private"})]}),(0,Vx.jsx)("button",{onClick:async()=>{try{var e;const t=!(!1!==(null===B||void 0===B||null===(e=B.privacySettings)||void 0===e?void 0:e.showStatsToBesties));await ym(cp(Qx,"users",b.uid),{"privacySettings.showStatsToBesties":t}),en.success(t?"Stats now visible to besties":"Stats are now private")}catch(t){console.error("Error updating privacy:",t),en.error("Failed to update privacy setting")}},className:"w-12 h-6 rounded-full transition-colors ".concat(!1!==(null===B||void 0===B||null===(d=B.privacySettings)||void 0===d?void 0:d.showStatsToBesties)?"bg-primary":"bg-gray-300"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(!1!==(null===B||void 0===B||null===(h=B.privacySettings)||void 0===h?void 0:h.showStatsToBesties)?"translate-x-6":"translate-x-1")})})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"Show Check-ins to Besties"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:!1!==(null===B||void 0===B||null===(f=B.privacySettings)||void 0===f?void 0:f.showCheckInsToBesties)?"Besties can see your last 7 days of check-ins":"Check-ins are private"})]}),(0,Vx.jsx)("button",{onClick:async()=>{try{var e;const t=!(!1!==(null===B||void 0===B||null===(e=B.privacySettings)||void 0===e?void 0:e.showCheckInsToBesties));await ym(cp(Qx,"users",b.uid),{"privacySettings.showCheckInsToBesties":t}),en.success(t?"Check-ins now visible to besties":"Check-ins are now private")}catch(t){console.error("Error updating privacy:",t),en.error("Failed to update privacy setting")}},className:"w-12 h-6 rounded-full transition-colors ".concat(!1!==(null===B||void 0===B||null===(p=B.privacySettings)||void 0===p?void 0:p.showCheckInsToBesties)?"bg-primary":"bg-gray-300"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(!1!==(null===B||void 0===B||null===(m=B.privacySettings)||void 0===m?void 0:m.showCheckInsToBesties)?"translate-x-6":"translate-x-1")})})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Preferences"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"Dark Mode"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:C?"Dark theme enabled":"Light theme enabled"})]}),(0,Vx.jsx)("button",{onClick:N,className:"w-12 h-6 rounded-full transition-colors ".concat(C?"bg-primary":"bg-gray-300"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(C?"translate-x-6":"translate-x-1")})})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"Keep My Data"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:null!==B&&void 0!==B&&null!==(g=B.settings)&&void 0!==g&&g.holdData?"Data kept indefinitely":"Data deleted after 24 hours"})]}),(0,Vx.jsx)("button",{onClick:async()=>{if(b)try{var e;const t=!(null!==B&&void 0!==B&&null!==(e=B.settings)&&void 0!==e&&e.holdData);await ym(cp(Qx,"users",b.uid),{"settings.holdData":t}),en.success(t?"Data will be kept indefinitely":"Data will be deleted after 24h")}catch(t){console.error("Error updating data retention:",t),en.error("Failed to update setting")}},className:"w-12 h-6 rounded-full transition-colors ".concat(null!==B&&void 0!==B&&null!==(y=B.settings)&&void 0!==y&&y.holdData?"bg-primary":"bg-gray-300"),children:(0,Vx.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==B&&void 0!==B&&null!==(x=B.settings)&&void 0!==x&&x.holdData?"translate-x-6":"translate-x-1")})})]})]})]}),!(null!==B&&void 0!==B&&null!==(w=B.donationStats)&&void 0!==w&&w.isActive)&&(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Support Besties \ud83d\udc9c"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Help us keep Besties free for everyone"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,Vx.jsx)("button",{onClick:()=>M(1),disabled:U,className:"btn btn-secondary",children:"$1/mo"}),(0,Vx.jsx)("button",{onClick:()=>M(5),disabled:U,className:"btn btn-primary",children:"$5/mo"}),(0,Vx.jsx)("button",{onClick:()=>M(10),disabled:U,className:"btn btn-secondary",children:"$10/mo"})]}),(0,Vx.jsx)("button",{onClick:()=>E("/about"),className:"w-full btn bg-white border-2 border-primary text-primary hover:bg-primary/5",children:"Learn More About Besties \u2192"})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Quick Access"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Vx.jsx)("button",{onClick:()=>E("/templates"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udccb Templates"})}),(0,Vx.jsx)("button",{onClick:()=>E("/favorites"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udccd Favorites"})}),(0,Vx.jsx)("button",{onClick:()=>E("/history"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udcca History"})}),(0,Vx.jsx)("button",{onClick:()=>E("/export-data"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udce5 Export Data"})}),(null===B||void 0===B?void 0:B.isAdmin)&&(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("button",{onClick:()=>E("/dev-analytics"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udcc8 Analytics"})}),(0,Vx.jsx)("button",{onClick:()=>E("/monitoring"),className:"btn bg-gradient-primary text-white text-left px-4 py-3",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udd0d Monitoring"})}),(0,Vx.jsx)("button",{onClick:()=>E("/error-dashboard"),className:"btn bg-red-500 text-white text-left px-4 py-3 hover:bg-red-600",children:(0,Vx.jsx)("div",{className:"text-sm",children:"\ud83d\udea8 Errors"})})]})]})]}),(null===B||void 0===B||null===(v=B.donationStats)||void 0===v?void 0:v.isActive)&&(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display mb-2",children:"Thank You! \ud83d\udc9c"}),(0,Vx.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free"}),(0,Vx.jsxs)("div",{className:"text-2xl font-display",children:["$",B.donationStats.monthlyAmount,"/month"]}),(0,Vx.jsxs)("div",{className:"text-sm mt-2 opacity-80",children:["Total donated: $",B.donationStats.totalDonated]})]}),(0,Vx.jsx)("button",{onClick:async()=>{(await Ox()).success?(en.success("Signed out successfully"),E("/login")):en.error("Sign out failed")},className:"w-full btn bg-red-500 text-white hover:bg-red-600 mb-6",children:"Sign Out"})]}),L&&(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Vx.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Vx.jsxs)("div",{className:"text-center mb-4",children:[(0,Vx.jsx)("div",{className:"text-5xl mb-3",children:"\ud83d\udcf1"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"About SMS Alerts"})]}),(0,Vx.jsxs)("div",{className:"space-y-3 text-sm text-gray-700 mb-6",children:[(0,Vx.jsx)("p",{className:"font-semibold text-primary",children:"SMS alerts are currently FREE during beta testing!"}),(0,Vx.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Vx.jsx)("p",{className:"font-semibold mb-1",children:"Free Tier Limits:"}),(0,Vx.jsxs)("ul",{className:"list-disc ml-4 space-y-1",children:[(0,Vx.jsx)("li",{children:"Up to 5 SMS alerts per week"}),(0,Vx.jsx)("li",{children:"Resets every Monday"}),(0,Vx.jsxs)("li",{children:["You've used ",R,"/5 this week"]})]})]}),(0,Vx.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg",children:[(0,Vx.jsx)("p",{className:"font-semibold mb-1",children:"Important to Know:"}),(0,Vx.jsxs)("ul",{className:"list-disc ml-4 space-y-1",children:[(0,Vx.jsx)("li",{children:"SMS messages are expensive to send"}),(0,Vx.jsx)("li",{children:"Once WhatsApp and Facebook integrations launch, SMS will become a premium feature ($1/month for up to 20 alerts)"}),(0,Vx.jsx)("li",{children:"We recommend using email or WhatsApp for unlimited free alerts"})]})]}),(0,Vx.jsx)("p",{className:"text-xs text-gray-600 italic",children:"By enabling SMS, you understand these limitations and agree to use SMS responsibly."})]}),(0,Vx.jsxs)("div",{className:"flex gap-3",children:[(0,Vx.jsx)("button",{onClick:()=>H(!1),className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Vx.jsx)("button",{onClick:async()=>{if(b)try{await ym(cp(Qx,"users",b.uid),{"notificationPreferences.sms":!0,hasSeenSMSPopup:!0}),H(!1),en.success("SMS notifications enabled!")}catch(e){console.error("Error enabling SMS:",e),en.error("Failed to enable SMS")}},className:"flex-1 btn btn-primary",children:"I Understand - Enable SMS"})]})]})})]})},Av=()=>{const{currentUser:e,userData:n}=zx(),[r,s]=(0,t.useState)([]),[A,i]=(0,t.useState)(!0),a=[{id:"safety_starter",name:"Safety Starter",description:"Complete 5 check-ins",icon:"\ud83d\udee1\ufe0f",color:"#4CAF50",requirement:5,stat:"completedCheckIns"},{id:"safety_pro",name:"Safety Pro",description:"Complete 25 check-ins",icon:"\u2b50",color:"#2196F3",requirement:25,stat:"completedCheckIns"},{id:"safety_master",name:"Safety Master",description:"Complete 50 check-ins",icon:"\ud83d\udc51",color:"#9C27B0",requirement:50,stat:"completedCheckIns"},{id:"friend_squad",name:"Friend Squad",description:"Add 3 besties",icon:"\ud83d\udc65",color:"#FF9800",requirement:3,stat:"totalBesties"},{id:"safety_circle",name:"Safety Circle",description:"Add 5 besties",icon:"\ud83e\udd1d",color:"#E91E63",requirement:5,stat:"totalBesties"},{id:"safety_network",name:"Safety Network",description:"Add 10 besties",icon:"\ud83c\udf10",color:"#00BCD4",requirement:10,stat:"totalBesties"},{id:"night_owl",name:"Night Owl",description:"Check-in after midnight",icon:"\ud83e\udd89",color:"#673AB7",requirement:1,stat:"nightOwl"},{id:"early_bird",name:"Early Bird",description:"Check-in before 6 AM",icon:"\ud83d\udc26",color:"#FFC107",requirement:1,stat:"earlyBird"},{id:"streak_master",name:"Streak Master",description:"7 days in a row",icon:"\ud83d\udd25",color:"#FF5722",requirement:7,stat:"streak"},{id:"active_donor",name:"Active Donor",description:"SMS subscription",icon:"\ud83d\udc9c",color:"#E91E63",requirement:1,stat:"donation"},{id:"location_lover",name:"Location Lover",description:"5 favorite locations",icon:"\ud83d\udccd",color:"#8BC34A",requirement:5,stat:"locations"},{id:"template_master",name:"Template Master",description:"3 templates created",icon:"\ud83d\udccb",color:"#FF9800",requirement:3,stat:"templates"}];(0,t.useEffect)(()=>{o()},[e]);const o=async()=>{if(e)try{const t=await fm(cp(Qx,"badges",e.uid));t.exists()&&s(t.data().badges||[])}catch(t){console.error("Error loading badges:",t)}finally{i(!1)}};if(A)return(0,Vx.jsx)("div",{className:"badges-page",children:(0,Vx.jsx)("div",{className:"loading",children:"Loading your badges..."})});const l=a.filter(e=>r.includes(e.id)),c=a.filter(e=>!r.includes(e.id));return(0,Vx.jsxs)("div",{className:"badges-page",children:[(0,Vx.jsxs)("div",{className:"badges-header",children:[(0,Vx.jsx)("h1",{children:"\ud83c\udfc6 Your Badges"}),(0,Vx.jsxs)("div",{className:"badge-stats",children:[(0,Vx.jsx)("span",{className:"earned-count",children:l.length}),(0,Vx.jsxs)("span",{className:"total-count",children:["/ ",a.length]})]})]}),l.length>0&&(0,Vx.jsxs)("div",{className:"badge-section",children:[(0,Vx.jsxs)("h2",{children:["\u2728 Earned (",l.length,")"]}),(0,Vx.jsx)("div",{className:"badges-grid",children:l.map(e=>(0,Vx.jsxs)("div",{className:"badge-card earned",style:{borderColor:e.color,background:"linear-gradient(135deg, ".concat(e.color,"15, ").concat(e.color,"05)")},children:[(0,Vx.jsx)("div",{className:"badge-icon",style:{color:e.color},children:e.icon}),(0,Vx.jsxs)("div",{className:"badge-info",children:[(0,Vx.jsx)("h3",{style:{color:e.color},children:e.name}),(0,Vx.jsx)("p",{children:e.description}),(0,Vx.jsx)("span",{className:"earned-label",style:{background:e.color},children:"\u2713 Earned"})]})]},e.id))})]}),c.length>0&&(0,Vx.jsxs)("div",{className:"badge-section",children:[(0,Vx.jsxs)("h2",{children:["\ud83d\udd12 Locked (",c.length,")"]}),(0,Vx.jsx)("div",{className:"badges-grid",children:c.map(e=>{const t=(e=>{var t,r,s;if(!n||!n.stats)return 0;let A=0;switch(e.stat){case"completedCheckIns":A=n.stats.completedCheckIns||0;break;case"totalBesties":A=n.stats.totalBesties||0;break;case"streak":A=n.stats.currentStreak||0;break;case"donation":A=null!==(t=n.donationStats)&&void 0!==t&&t.isActive?1:0;break;case"locations":A=(null===(r=n.favoriteLocations)||void 0===r?void 0:r.length)||0;break;case"templates":A=n.templateCount||0;break;case"nightOwl":case"earlyBird":A=null!==(s=n.stats)&&void 0!==s&&s[e.stat]?1:0;break;default:A=0}return Math.min(100,A/e.requirement*100)})(e),r=(e=>{var t,r,s;if(!n||!n.stats)return"0 / "+e.requirement;let A=0;switch(e.stat){case"completedCheckIns":A=n.stats.completedCheckIns||0;break;case"totalBesties":A=n.stats.totalBesties||0;break;case"streak":A=n.stats.currentStreak||0;break;case"donation":return null!==(t=n.donationStats)&&void 0!==t&&t.isActive?"Active":"Subscribe";case"locations":A=(null===(r=n.favoriteLocations)||void 0===r?void 0:r.length)||0;break;case"templates":A=n.templateCount||0;break;case"nightOwl":case"earlyBird":return null!==(s=n.stats)&&void 0!==s&&s[e.stat]?"Unlocked!":"Not yet";default:A=0}return"".concat(A," / ").concat(e.requirement)})(e);return(0,Vx.jsxs)("div",{className:"badge-card locked",children:[(0,Vx.jsx)("div",{className:"badge-icon",children:e.icon}),(0,Vx.jsxs)("div",{className:"badge-info",children:[(0,Vx.jsx)("h3",{children:e.name}),(0,Vx.jsx)("p",{children:e.description}),(0,Vx.jsxs)("div",{className:"badge-progress-container",children:[(0,Vx.jsx)("div",{className:"badge-progress-bar",children:(0,Vx.jsx)("div",{className:"badge-progress-fill",style:{width:"".concat(t,"%"),backgroundColor:e.color}})}),(0,Vx.jsx)("span",{className:"badge-progress-text",children:r})]})]})]},e.id)})})]})]})},iv=e=>{if(!e)return!1;return/^\+[1-9]\d{1,14}$/.test(e)},av=()=>{var e;const{currentUser:n,userData:r}=zx(),s=te(),[A,i]=(0,t.useState)((null===r||void 0===r?void 0:r.displayName)||""),[a,o]=(0,t.useState)((null===r||void 0===r||null===(e=r.profile)||void 0===e?void 0:e.bio)||""),[l,c]=(0,t.useState)((null===r||void 0===r?void 0:r.phoneNumber)||""),[u,d]=(0,t.useState)((null===n||void 0===n?void 0:n.email)||""),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[g,y]=(0,t.useState)(null),[x,w]=(0,t.useState)((null===r||void 0===r?void 0:r.photoURL)||null),[v,b]=(0,t.useState)(!1),[B,C]=(0,t.useState)(!1),[N,E]=(0,t.useState)(""),[U,F]=(0,t.useState)(null),[Q,I]=(0,t.useState)(""),k=async()=>{if(!l||l===(null===r||void 0===r?void 0:r.phoneNumber))return void en.error("Please enter a new phone number");const e=l.trim();if(!e)return void en.error("Please enter a phone number");if(!/^[0-9+\s\-()]+$/.test(e))return void en.error("Phone number can only contain digits, +, spaces, hyphens, and parentheses");let t=e.replace(/[\s\-()]/g,"");if(t.startsWith("+")||(t=t.startsWith("0")?"+61"+t.slice(1):"+"+t),!iv(t))return void en.error("Invalid phone number format. Please enter a valid international number (e.g., +61412345678 or 0412345678)",{duration:5e3});const n=t.slice(1);if(n.length<8)return void en.error("Phone number is too short. Please enter a complete phone number");if(n.length>15)return void en.error("Phone number is too long. Please check and try again");b(!0);const s=Hx("phone-recaptcha-container");if(!s.success)return en.error("Failed to set up verification. Please refresh the page."),void b(!1);const A=await Rx(t,s.verifier);b(!1),A.success?(F(A.confirmationResult),I(t),C(!0),en.success("Verification code sent to your phone!")):en.error(A.error||"Failed to send verification code")},j=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await(async()=>{if(!g)return(null===r||void 0===r?void 0:r.photoURL)||null;try{const e=Og(Ix,"profiles/".concat(n.uid,"/").concat(Date.now(),"_").concat(g.name));return await Rg(e,g),await Pg(e)}catch(e){return console.error("Error uploading profile picture:",e),en.error("Failed to upload profile picture"),(null===r||void 0===r?void 0:r.photoURL)||null}})();await ym(cp(Qx,"users",n.uid),{displayName:A,phoneNumber:e||l,photoURL:t,"profile.bio":a,updatedAt:new Date}),u!==n.email&&(await function(e,t){const n=Qn(e);return Kr(n.auth.app)?Promise.reject(ps(n.auth)):ii(n,t,null)}(n,u),en.success("Email updated - please verify your new email")),h&&(await function(e,t){return ii(Qn(e),null,t)}(n,h),en.success("Password updated")),en.success("Profile updated successfully!"),s("/profile")}catch(t){console.error("Error updating profile:",t),"auth/requires-recent-login"===t.code?en.error("Please sign out and sign in again to update email/password"):en.error(t.message||"Failed to update profile")}finally{b(!1)}};return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Edit Profile"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Update your personal information"})]}),(0,Vx.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h&&h!==p)return void en.error("Passwords do not match");if(h&&h.length<6)return void en.error("Password must be at least 6 characters");l&&l!==(null===r||void 0===r?void 0:r.phoneNumber)?k():(b(!0),await j())},className:"space-y-6",children:[(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("label",{className:"block text-lg font-display text-text-primary mb-4",children:"Profile Picture"}),(0,Vx.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Vx.jsx)("div",{className:"w-24 h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-3xl font-display overflow-hidden",children:x?(0,Vx.jsx)("img",{src:x,alt:"Profile",className:"w-full h-full object-cover"}):(null===A||void 0===A?void 0:A[0])||"U"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void en.error("File size must be less than 5MB");y(t),w(URL.createObjectURL(t))}},className:"hidden",id:"profile-picture"}),(0,Vx.jsx)("label",{htmlFor:"profile-picture",className:"btn btn-secondary cursor-pointer inline-block",children:"Choose Photo"}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mt-2",children:"JPG, PNG or GIF. Max size 5MB"})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("h3",{className:"text-lg font-display text-text-primary mb-4",children:"Basic Information"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Display Name"}),(0,Vx.jsx)("input",{type:"text",value:A,onChange:e=>i(e.target.value),className:"input",placeholder:"Your name",required:!0})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Bio"}),(0,Vx.jsx)("textarea",{value:a,onChange:e=>o(e.target.value),className:"input min-h-[80px] resize-none",placeholder:"Tell people about yourself...",maxLength:150}),(0,Vx.jsxs)("div",{className:"text-xs text-text-secondary mt-1",children:[a.length,"/150 characters"]})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Phone Number"}),(0,Vx.jsx)("input",{type:"tel",value:l,onChange:e=>c(e.target.value),className:"input",placeholder:"+61 400 000 000 or 0400 000 000"}),l!==(null===r||void 0===r?void 0:r.phoneNumber)&&l&&(0,Vx.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"\u26a0\ufe0f You'll need to verify this number via SMS before saving"})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("h3",{className:"text-lg font-display text-text-primary mb-4",children:"Account Security"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Email"}),(0,Vx.jsx)("input",{type:"email",value:u,onChange:e=>d(e.target.value),className:"input",placeholder:"your@email.com",required:!0}),(0,Vx.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:"Changing email requires re-verification"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"New Password (optional)"}),(0,Vx.jsx)("input",{type:"password",value:h,onChange:e=>f(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6})]}),h&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Confirm New Password"}),(0,Vx.jsx)("input",{type:"password",value:p,onChange:e=>m(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6})]})]})]}),(0,Vx.jsxs)("div",{className:"flex gap-3",children:[(0,Vx.jsx)("button",{type:"button",onClick:()=>s("/profile"),className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Vx.jsx)("button",{type:"submit",disabled:v,className:"flex-1 btn btn-primary",children:v?"Saving...":"Save Changes"})]})]}),B&&(0,Vx.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Vx.jsxs)("div",{className:"card p-6 max-w-md w-full animate-scale-up",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"Verify Phone Number"}),(0,Vx.jsxs)("p",{className:"text-text-secondary mb-4",children:["We sent a 6-digit code to ",(0,Vx.jsx)("strong",{children:Q})]}),(0,Vx.jsxs)("div",{className:"mb-4",children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Verification Code"}),(0,Vx.jsx)("input",{type:"text",value:N,onChange:e=>E(e.target.value),className:"input",placeholder:"123456",maxLength:6,autoFocus:!0})]}),(0,Vx.jsxs)("div",{className:"flex gap-3",children:[(0,Vx.jsx)("button",{onClick:()=>{C(!1),E(""),F(null)},className:"flex-1 btn btn-secondary",disabled:v,children:"Cancel"}),(0,Vx.jsx)("button",{onClick:async()=>{if(!N||!U)return void en.error("Please enter the verification code");b(!0);const e=await Px(U,N);e.success?(en.success("Phone number verified!"),C(!1),c(Q),j(Q)):(b(!1),en.error(e.error||"Invalid verification code"))},className:"flex-1 btn btn-primary",disabled:v||6!==N.length,children:v?"Verifying...":"Verify & Save"})]}),(0,Vx.jsxs)("p",{className:"text-xs text-text-secondary mt-4 text-center",children:["Didn't receive the code?"," ",(0,Vx.jsx)("button",{onClick:k,className:"text-primary underline",disabled:v,children:"Resend"})]})]})}),(0,Vx.jsx)("div",{id:"phone-recaptcha-container"})]})]})},ov=()=>{var e,n,r;const{currentUser:s,userData:A}=zx(),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)("all"),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(!0);(0,t.useEffect)(()=>{y()},[s,d]);const y=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s){e?u(!0):(l(!0),a([]),p(null),g(!0));try{let t=qp(lp(Qx,"checkins"),Xp("userId","==",s.uid),$p("createdAt","desc"),tm(20));"completed"===d?t=qp(lp(Qx,"checkins"),Xp("userId","==",s.uid),Xp("status","==","completed"),$p("createdAt","desc"),tm(20)):"alerted"===d&&(t=qp(lp(Qx,"checkins"),Xp("userId","==",s.uid),Xp("status","==","alerted"),$p("createdAt","desc"),tm(20))),e&&f&&(t=qp(t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nm._create("startAfter",t,!1)}(f)));const n=await mm(t),r=[];n.forEach(e=>{r.push(Re({id:e.id},e.data()))}),a(e?e=>[...e,...r]:r),p(n.docs[n.docs.length-1]||null),g(20===r.length),l(!1),u(!1)}catch(t){console.error("Error loading history:",t),e||a([]),l(!1),u(!1)}}},x=e=>{switch(e){case"completed":return(0,Vx.jsx)("span",{className:"badge badge-success",children:"\u2705 Safe"});case"alerted":return(0,Vx.jsx)("span",{className:"badge badge-warning",children:"\ud83d\udea8 Alerted"});case"active":return(0,Vx.jsx)("span",{className:"badge badge-primary",children:"\u23f0 Active"});default:return(0,Vx.jsx)("span",{className:"badge",children:"Unknown"})}},w=e=>{if(e<60)return"".concat(e,"m");const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"m"):"".concat(t,"h")};return o?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Check-in History"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"View all your past check-ins"})]}),(0,Vx.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[(0,Vx.jsx)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("all"===d?"bg-primary text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"All"}),(0,Vx.jsx)("button",{onClick:()=>h("completed"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("completed"===d?"bg-success text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"\u2705 Safe"}),(0,Vx.jsx)("button",{onClick:()=>h("alerted"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("alerted"===d?"bg-warning text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"\ud83d\udea8 Alerted"})]}),(0,Vx.jsx)("div",{className:"card p-6 mb-6",children:(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-2xl font-display text-primary",children:(null===A||void 0===A||null===(e=A.stats)||void 0===e?void 0:e.totalCheckIns)||0}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]}),(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-2xl font-display text-success",children:(null===A||void 0===A||null===(n=A.stats)||void 0===n?void 0:n.completedCheckIns)||0}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed"})]}),(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-2xl font-display text-warning",children:(null===A||void 0===A||null===(r=A.stats)||void 0===r?void 0:r.alertedCheckIns)||0}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Alerted"})]})]})}),0===i.length?(0,Vx.jsxs)("div",{className:"card p-12 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No check-ins yet"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Your check-in history will appear here"})]}):(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("div",{className:"space-y-4",children:i.map(e=>{var t;return(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary",children:e.location}),x(e.status)]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:e.createdAt&&Cw(e.createdAt.toDate(),{addSuffix:!0})})]})}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Duration"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:w(e.duration)})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Besties Notified"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:(null===(t=e.bestieIds)||void 0===t?void 0:t.length)||0})]})]}),e.notes&&(0,Vx.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary italic",children:['"',e.notes,'"']})}),e.completedAt&&(0,Vx.jsxs)("div",{className:"mt-3 text-xs text-success",children:["\u2705 Completed ",Cw(e.completedAt.toDate(),{addSuffix:!0})]}),e.alertedAt&&(0,Vx.jsxs)("div",{className:"mt-3 text-xs text-warning",children:["\ud83d\udea8 Alert sent ",Cw(e.alertedAt.toDate(),{addSuffix:!0})]})]},e.id)})}),m&&(0,Vx.jsx)("div",{className:"mt-6 text-center",children:(0,Vx.jsx)("button",{onClick:()=>{y(!0)},disabled:c,className:"btn btn-secondary px-8",children:c?(0,Vx.jsxs)(Vx.Fragment,{children:[(0,Vx.jsx)("span",{className:"spinner-small mr-2"}),"Loading..."]}):"Load More (".concat(20," at a time)")})}),!m&&i.length>0&&(0,Vx.jsx)("div",{className:"mt-6 text-center text-text-secondary text-sm",children:"You've reached the end of your check-in history"})]})]})]})},lv=()=>{const{currentUser:e}=zx(),n=te(),[r,s]=(0,t.useState)([]),[A,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(!e)return;const t=vm(qp(lp(Qx,"templates"),Xp("userId","==",e.uid)),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),s(t),i(!1)},e=>{console.error("Error loading templates:",e),s([]),i(!1)});return()=>t()},[e]);return A?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"My Templates"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Quickly start check-ins with saved templates"})]}),0===r.length?(0,Vx.jsxs)("div",{className:"card p-12 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No templates yet"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"Save templates when completing check-ins for quick access"}),(0,Vx.jsx)("button",{onClick:()=>n("/create"),className:"btn btn-primary",children:"Create Check-In"})]}):(0,Vx.jsx)("div",{className:"space-y-4",children:r.map(e=>{var t;return(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:e.name}),(0,Vx.jsxs)("div",{className:"space-y-1 text-sm text-text-secondary",children:[(0,Vx.jsxs)("div",{children:["\ud83d\udccd ",e.location]}),(0,Vx.jsxs)("div",{children:["\u23f0 ",e.duration," minutes"]}),(0,Vx.jsxs)("div",{children:["\ud83d\udc65 ",(null===(t=e.bestieIds)||void 0===t?void 0:t.length)||0," besties"]}),e.notes&&(0,Vx.jsxs)("div",{className:"italic",children:["\ud83d\udcac ",e.notes]})]})]})}),(0,Vx.jsxs)("div",{className:"flex gap-3",children:[(0,Vx.jsx)("button",{onClick:()=>(e=>{n("/create",{state:{template:e}})})(e),className:"flex-1 btn btn-primary",children:"Use Template"}),(0,Vx.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this template?"))try{await xm(cp(Qx,"templates",e)),en.success("Template deleted")}catch(t){console.error("Error deleting template:",t),en.error("Failed to delete template")}})(e.id),className:"btn bg-danger text-white hover:bg-red-600",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})}),(0,Vx.jsx)("div",{className:"mt-6",children:(0,Vx.jsx)("button",{onClick:()=>n("/create"),className:"w-full btn btn-secondary",children:"\u2795 Create New Check-In"})})]})]})},cv=()=>{const[e,n]=(0,t.useState)({users:{total:0,new7days:0,new30days:0,active7days:0,active30days:0},checkIns:{total:0,active:0,completed:0,alerted:0,avgDuration:0,completionRate:0},besties:{totalConnections:0,avgPerUser:0,pending:0,accepted:0},revenue:{smsSubscribers:0,donorsActive:0,totalDonations:0,mrr:0},engagement:{avgCheckInsPerUser:0,avgBestiesPerUser:0,templatesCreated:0,badgesEarned:0},costs:{estimatedSMS:0,estimatedWhatsApp:0,estimatedEmail:0,totalAlertsSent:0},growth:{userGrowthRate:0,checkInGrowthRate:0,retentionRate:0},funnel:{signups:0,completedOnboarding:0,addedBestie:0,firstCheckIn:0,onboardingRate:0,bestieRate:0,checkInRate:0},behavior:{peakHour:0,peakDay:"",mostCommonDuration:0},topLocations:[],recentAlerts:[]}),[r,s]=(0,t.useState)(!0),[A,i]=(0,t.useState)("7d"),a=(0,t.useCallback)(async()=>{s(!0);try{var e,t;const r=new Date,i=new Date(r.getTime()-6048e5),a=new Date(r.getTime()-2592e6);let o=r;o="7d"===A?i:"30d"===A?a:new Date(0),console.log("[Analytics] Loading users...");const l=await mm(lp(Qx,"users"));console.log("[Analytics] \u2713 Users loaded:",l.size);let c=0,u=0,d=0,h=0,f=0;l.forEach(e=>{var t,n,r;const s=e.data();c++;const A=null===(t=s.stats)||void 0===t||null===(n=t.joinedAt)||void 0===n?void 0:n.toDate();A&&A>i&&u++,A&&A>a&&d++;const o=null===(r=s.lastActive)||void 0===r?void 0:r.toDate();o&&o>i&&h++,o&&o>a&&f++});let p=lp(Qx,"checkins");"all"!==A&&(p=qp(p,Xp("createdAt",">=",wo.fromDate(o)))),console.log("[Analytics] Loading checkins...");const m=await mm(p);console.log("[Analytics] \u2713 Checkins loaded:",m.size);let g=0,y=0,x=0,w=0,v=0;const b={};m.forEach(e=>{const t=e.data();g++,v+=t.duration||0,"active"===t.status&&y++,"completed"===t.status&&x++,"alerted"===t.status&&w++,t.location&&(b[t.location]=(b[t.location]||0)+1)});const B=Object.entries(b).map(e=>{let[t,n]=e;return{location:t,count:n}}).sort((e,t)=>t.count-e.count).slice(0,10),C=g>0?(x/g*100).toFixed(1):0;console.log("[Analytics] Loading besties...");const N=await mm(lp(Qx,"besties"));console.log("[Analytics] \u2713 Besties loaded:",N.size);let E=0,U=0,F=0;N.forEach(e=>{const t=e.data();E++,"pending"===t.status&&U++,"accepted"===t.status&&F++});let Q=0,I=0,k=0,j=0;l.forEach(e=>{var t,n;const r=e.data();var s,A;(null!==(t=r.smsSubscription)&&void 0!==t&&t.active&&(Q++,j+=1),null!==(n=r.donationStats)&&void 0!==n&&n.isActive)&&(I++,k+=(null===(s=r.donationStats)||void 0===s?void 0:s.totalDonated)||0,null!==(A=r.donationStats)&&void 0!==A&&A.monthlyAmount&&(j+=r.donationStats.monthlyAmount))});const S=j;console.log("[Analytics] Loading templates...");const T=await mm(lp(Qx,"templates"));console.log("[Analytics] \u2713 Templates loaded:",T.size),console.log("[Analytics] Loading badges...");const _=await mm(lp(Qx,"badges"));console.log("[Analytics] \u2713 Badges loaded:",_.size);let D=0;_.forEach(e=>{var t;const n=e.data();D+=(null===(t=n.badges)||void 0===t?void 0:t.length)||0}),console.log("[Analytics] Loading recent alerts...");const L=qp(lp(Qx,"checkins"),Xp("status","==","alerted"),$p("alertedAt","desc")),H=await mm(L);console.log("[Analytics] \u2713 Recent alerts loaded:",H.size);const R=[],P=[];H.forEach(e=>{if(R.length<10){const t=e.data();P.push((async()=>{let n="Unknown";try{const r=await fm(e(Qx,"users",t.userId));r.exists()&&(n=r.data().displayName||"Unknown")}catch(r){console.error("Error fetching user name:",r)}R.push({id:e.id,location:t.location,alertedAt:t.alertedAt,userName:n})})())}}),await Promise.all(P);let O=0,M=0,K=0;m.forEach(e=>{const t=e.data();if("alerted"===t.status&&t.bestieIds){const e=t.bestieIds.length;O+=e,K+=Math.ceil(.7*e),M+=Math.floor(.3*e)}});const V=(.0075*M).toFixed(2),G=(.005*K).toFixed(2),W=0,z=new Date(i.getTime()-6048e5);let q=0,Y=0;l.forEach(e=>{var t,n;const r=null===(t=e.data().stats)||void 0===t||null===(n=t.joinedAt)||void 0===n?void 0:n.toDate();r&&r>z&&r<i&&q++}),m.forEach(e=>{var t;const n=null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate();n&&n>z&&n<i&&Y++});const X=q>0?((u-q)/q*100).toFixed(1):u>0?"\u221e":"N/A",J=Y>0?((g-Y)/Y*100).toFixed(1):g>0?"\u221e":"N/A",Z={};m.forEach(e=>{const t=e.data().userId;Z[t]=(Z[t]||0)+1});const $=Object.values(Z).filter(e=>e>1).length,ee=c>0?($/c*100).toFixed(1):0;console.log("[Analytics] Calculating funnel metrics...");let te=0,ne=0,re=0,se=null;l.forEach(e=>{var t,n;const r=e.data();var s,A;se||(se={id:e.id,onboardingCompleted:r.onboardingCompleted,statsExists:!!r.stats,totalBesties:null===(s=r.stats)||void 0===s?void 0:s.totalBesties,totalCheckIns:null===(A=r.stats)||void 0===A?void 0:A.totalCheckIns});r.onboardingCompleted&&te++,(null===(t=r.stats)||void 0===t?void 0:t.totalBesties)>0&&ne++,(null===(n=r.stats)||void 0===n?void 0:n.totalCheckIns)>0&&re++}),console.log("[Analytics] Funnel Debug - Sample User:",se),console.log("[Analytics] Funnel Counts:",{totalUsers:c,completedOnboarding:te,addedBestie:ne,firstCheckIn:re});const Ae=c>0?(te/c*100).toFixed(1):0,ie=te>0?(ne/te*100).toFixed(1):0,ae=ne>0?(re/ne*100).toFixed(1):0,oe=new Array(24).fill(0),le={Mon:0,Tue:0,Wed:0,Thu:0,Fri:0,Sat:0,Sun:0},ce={};m.forEach(e=>{var t;const n=e.data(),r=null===(t=n.createdAt)||void 0===t?void 0:t.toDate();if(r){oe[r.getUTCHours()]++;le[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r.getUTCDay()]]++}n.duration&&(ce[n.duration]=(ce[n.duration]||0)+1)});const ue=oe.indexOf(Math.max(...oe)),de=(null===(e=Object.entries(le).sort((e,t)=>t[1]-e[1])[0])||void 0===e?void 0:e[0])||"N/A",he=(null===(t=Object.entries(ce).sort((e,t)=>t[1]-e[1])[0])||void 0===t?void 0:t[0])||30;n({users:{total:c,new7days:u,new30days:d,active7days:h,active30days:f},checkIns:{total:g,active:y,completed:x,alerted:w,avgDuration:g>0?Math.round(v/g):0,completionRate:C},besties:{totalConnections:E,avgPerUser:c>0?(2*F/c).toFixed(1):0,pending:U,accepted:F},revenue:{smsSubscribers:Q,donorsActive:I,totalDonations:k.toFixed(2),mrr:S.toFixed(2)},engagement:{avgCheckInsPerUser:c>0?(g/c).toFixed(1):0,avgBestiesPerUser:c>0?(2*F/c).toFixed(1):0,templatesCreated:T.size,badgesEarned:D},costs:{estimatedSMS:V,estimatedWhatsApp:G,estimatedEmail:W,totalAlertsSent:O},growth:{userGrowthRate:X,checkInGrowthRate:J,retentionRate:ee},funnel:{signups:c,completedOnboarding:te,addedBestie:ne,firstCheckIn:re,onboardingRate:Ae,bestieRate:ie,checkInRate:ae},behavior:{peakHour:ue,peakDay:de,mostCommonDuration:he},topLocations:B,recentAlerts:R}),s(!1)}catch(r){console.error("Error loading analytics:",r),"failed-precondition"===r.code?(console.error("Firestore index missing. Create index at:",r.message),alert("Analytics require database indices. Check console for index creation link.")):"permission-denied"===r.code?alert("Permission denied. Make sure your user document has the field:\n- isAdmin: true"):alert("Failed to load analytics: ".concat(r.message)),s(!1)}},[A]);return(0,t.useEffect)(()=>{a()},[a]),r?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udcca Developer Analytics"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Real-time app metrics and insights"})]}),(0,Vx.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Vx.jsx)("button",{onClick:()=>i("7d"),className:"px-4 py-2 rounded-full font-semibold ".concat("7d"===A?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 7 Days"}),(0,Vx.jsx)("button",{onClick:()=>i("30d"),className:"px-4 py-2 rounded-full font-semibold ".concat("30d"===A?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 30 Days"}),(0,Vx.jsx)("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-full font-semibold ".concat("all"===A?"bg-primary text-white":"bg-white text-text-primary"),children:"All Time"})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc65 Users"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-primary",children:e.users.total}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Users"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-success",children:e.users.new7days}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"New (7d)"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-success",children:e.users.new30days}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"New (30d)"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.users.active7days}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Active (7d)"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.users.active30days}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Active (30d)"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\u2705 Check-ins"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-primary",children:e.checkIns.total}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-warning",children:e.checkIns.active}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Now"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-success",children:e.checkIns.completed}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-danger",children:e.checkIns.alerted}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Alerted"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-accent",children:e.checkIns.avgDuration}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Minutes"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-success",children:[e.checkIns.completionRate,"%"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Completion"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc9c Besties Network"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-primary",children:e.besties.totalConnections}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Connections"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-success",children:e.besties.accepted}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Accepted"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-warning",children:e.besties.pending}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Pending"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.besties.avgPerUser}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Per User"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcb0 Revenue"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center bg-gradient-primary text-white",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display",children:["$",e.revenue.mrr]}),(0,Vx.jsx)("div",{className:"text-sm opacity-90",children:"MRR"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-primary",children:e.revenue.smsSubscribers}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"SMS Subscribers"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.revenue.donorsActive}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Donors"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-success",children:["$",e.revenue.totalDonations]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Donated"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcc8 Engagement"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-primary",children:e.engagement.avgCheckInsPerUser}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-ins/User"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.engagement.avgBestiesPerUser}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Besties/User"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-accent",children:e.engagement.templatesCreated}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Templates"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-warning",children:e.engagement.badgesEarned}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Badges Earned"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcb8 Cost Tracking (Estimates)"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center bg-danger/10",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-danger",children:["$",e.costs.estimatedSMS]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"SMS Costs"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center bg-success/10",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-success",children:["$",e.costs.estimatedWhatsApp]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"WhatsApp Costs"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center bg-primary/10",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-primary",children:["$",e.costs.estimatedEmail]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Email Costs"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-accent",children:e.costs.totalAlertsSent}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Alerts"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcca Growth Metrics"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display ".concat(parseFloat(e.growth.userGrowthRate)>=0?"text-success":"text-danger"),children:[e.growth.userGrowthRate>0?"+":"",e.growth.userGrowthRate,"%"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"User Growth (WoW)"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display ".concat(parseFloat(e.growth.checkInGrowthRate)>=0?"text-success":"text-danger"),children:[e.growth.checkInGrowthRate>0?"+":"",e.growth.checkInGrowthRate,"%"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-in Growth (WoW)"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-primary",children:[e.growth.retentionRate,"%"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Retention Rate"})]})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83c\udfaf User Funnel"}),(0,Vx.jsx)("div",{className:"card p-6",children:(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"1. Sign Ups"}),(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.signups," users"]})]}),(0,Vx.jsx)("div",{className:"text-2xl font-display text-primary",children:"100%"})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"2. Completed Onboarding"}),(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.completedOnboarding," users"]})]}),(0,Vx.jsxs)("div",{className:"text-2xl font-display text-success",children:[e.funnel.onboardingRate,"%"]})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"3. Added First Bestie"}),(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.addedBestie," users"]})]}),(0,Vx.jsxs)("div",{className:"text-2xl font-display text-warning",children:[e.funnel.bestieRate,"%"]})]}),(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:"4. Created First Check-in"}),(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.firstCheckIn," users"]})]}),(0,Vx.jsxs)("div",{className:"text-2xl font-display text-accent",children:[e.funnel.checkInRate,"%"]})]})]})})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udd50 User Behavior"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-primary",children:[e.behavior.peakHour,":00"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Peak Hour (24h)"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.behavior.peakDay}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Peak Day"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-accent",children:[e.behavior.mostCommonDuration,"m"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Common Duration"})]})]})]}),(0,Vx.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-xl text-text-primary mb-4",children:"\ud83d\udccd Top Check-in Locations"}),e.topLocations.length>0?(0,Vx.jsx)("div",{className:"space-y-2",children:e.topLocations.map((e,t)=>(0,Vx.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("span",{className:"font-semibold text-text-primary",children:e.location}),(0,Vx.jsx)("span",{className:"badge badge-primary",children:e.count})]},t))}):(0,Vx.jsx)("p",{className:"text-text-secondary text-center py-8",children:"No data yet"})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-xl text-text-primary mb-4",children:"\ud83d\udea8 Recent Alerts"}),e.recentAlerts.length>0?(0,Vx.jsx)("div",{className:"space-y-2",children:e.recentAlerts.map(e=>(0,Vx.jsxs)("div",{className:"p-3 bg-danger/10 border border-danger/20 rounded-lg",children:[(0,Vx.jsx)("div",{className:"font-semibold text-danger",children:e.userName}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:e.location}),e.alertedAt&&(0,Vx.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:new Date(e.alertedAt.toDate()).toLocaleString()})]},e.id))}):(0,Vx.jsx)("p",{className:"text-text-secondary text-center py-8",children:"No alerts \ud83c\udf89"})]})]}),(0,Vx.jsx)("button",{onClick:a,className:"w-full btn btn-primary",disabled:r,children:"\ud83d\udd04 Refresh Data"})]})]})},uv=()=>{const{currentUser:e}=zx(),[n,r]=(0,t.useState)([]),[s,A]=(0,t.useState)(""),[i,a]=(0,t.useState)("\ud83d\udccd"),[o,l]=(0,t.useState)(!0);(0,t.useEffect)(()=>{c()},[e]);const c=async()=>{if(e)try{const t=await fm(cp(Qx,"users",e.uid));t.exists()&&r(t.data().favoriteLocations||[]),l(!1)}catch(t){console.error("Error loading favorites:",t),l(!1)}};return o?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Favorite Locations"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Save your frequently visited places for quick check-ins"})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Add Location"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Choose Icon"}),(0,Vx.jsx)("div",{className:"flex flex-wrap gap-2",children:["\ud83d\udccd","\u2615","\ud83c\udf7d\ufe0f","\ud83c\udfac","\ud83c\udf7b","\ud83c\udfe0","\ud83c\udfc3","\ud83d\udecd\ufe0f","\ud83c\udfb5","\ud83c\udfe2","\ud83c\udfeb","\ud83c\udfe5"].map(e=>(0,Vx.jsx)("button",{onClick:()=>a(e),className:"w-12 h-12 rounded-xl text-2xl flex items-center justify-center transition-all ".concat(i===e?"bg-primary text-white scale-110":"bg-gray-100 hover:bg-gray-200"),children:e},e))})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Location Name"}),(0,Vx.jsx)("input",{type:"text",value:s,onChange:e=>A(e.target.value),className:"input",placeholder:"e.g., Local Coffee Shop",maxLength:50})]}),(0,Vx.jsx)("button",{onClick:async()=>{if(!s.trim())return void en.error("Please enter a location");if(n.length>=20)return void en.error("Maximum 20 favorite locations");const t={id:Date.now().toString(),name:s.trim(),emoji:i,usedCount:0},o=[...n,t];try{await ym(cp(Qx,"users",e.uid),{favoriteLocations:o}),r(o),A(""),a("\ud83d\udccd"),en.success("Location added!")}catch(l){console.error("Error adding favorite:",l),en.error("Failed to add location")}},className:"w-full btn btn-primary",children:"\u2795 Add to Favorites"})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsxs)("h3",{className:"font-display text-lg text-text-primary mb-4",children:["Your Favorites (",n.length,"/20)"]}),0===n.length?(0,Vx.jsxs)("div",{className:"card p-12 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccd"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No favorites yet"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Add your frequently visited locations for quick access"})]}):(0,Vx.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(t=>(0,Vx.jsx)("div",{className:"card p-4",children:(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,Vx.jsx)("div",{className:"text-3xl",children:t.emoji}),(0,Vx.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vx.jsx)("div",{className:"font-semibold text-text-primary truncate",children:t.name}),t.usedCount>0&&(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:["Used ",t.usedCount," times"]})]})]}),(0,Vx.jsx)("button",{onClick:()=>(async t=>{const s=n.filter(e=>e.id!==t);try{await ym(cp(Qx,"users",e.uid),{favoriteLocations:s}),r(s),en.success("Location removed")}catch(A){console.error("Error removing favorite:",A),en.error("Failed to remove location")}})(t.id),className:"text-danger hover:bg-danger/10 p-2 rounded-lg transition-colors",children:"\ud83d\uddd1\ufe0f"})]})},t.id))})]})]})]})},dv=()=>{const{currentUser:e,userData:n}=zx(),[r,s]=(0,t.useState)(!1);return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Export Your Data"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Download all your Besties data (GDPR compliant)"})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6 bg-primary/5 border-2 border-primary/20",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-2",children:"\ud83d\udcca Your Data Rights"}),(0,Vx.jsx)("p",{className:"text-text-secondary text-sm mb-4",children:"You have the right to download all your data from Besties at any time. This includes your profile, check-ins, besties, templates, and badges."}),(0,Vx.jsxs)("p",{className:"text-text-secondary text-sm",children:[(0,Vx.jsx)("strong",{children:"What's included:"})," Profile info, check-in history, bestie connections, saved templates, earned badges, and account settings."]})]}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Complete Data Export (JSON)"}),(0,Vx.jsx)("p",{className:"text-text-secondary text-sm",children:"Download all your data in JSON format. Includes everything: profile, check-ins, besties, templates, and badges."}),(0,Vx.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,Vx.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,Vx.jsx)("span",{className:"badge badge-primary",children:"Profile"}),(0,Vx.jsx)("span",{className:"badge badge-success",children:"Check-ins"}),(0,Vx.jsx)("span",{className:"badge badge-secondary",children:"Besties"}),(0,Vx.jsx)("span",{className:"badge badge-accent",children:"Templates"}),(0,Vx.jsx)("span",{className:"badge badge-warning",children:"Badges"})]})]})]})}),(0,Vx.jsx)("button",{onClick:async()=>{s(!0),en("Preparing your data...");try{var t,r;const A={user:{uid:e.uid,email:e.email,displayName:null===n||void 0===n?void 0:n.displayName,phoneNumber:null===n||void 0===n?void 0:n.phoneNumber,photoURL:null===n||void 0===n?void 0:n.photoURL,createdAt:null===n||void 0===n||null===(t=n.stats)||void 0===t||null===(r=t.joinedAt)||void 0===r?void 0:r.toDate(),profile:null===n||void 0===n?void 0:n.profile,stats:null===n||void 0===n?void 0:n.stats},checkIns:[],besties:[],templates:[],badges:[],exportedAt:(new Date).toISOString()},i=qp(lp(Qx,"checkins"),Xp("userId","==",e.uid));(await mm(i)).forEach(e=>{var t,n,r;const s=e.data();A.checkIns.push({id:e.id,location:s.location,duration:s.duration,notes:s.notes,status:s.status,createdAt:null===(t=s.createdAt)||void 0===t?void 0:t.toDate(),completedAt:null===(n=s.completedAt)||void 0===n?void 0:n.toDate(),alertedAt:null===(r=s.alertedAt)||void 0===r?void 0:r.toDate()})});const a=qp(lp(Qx,"besties"),Xp("requesterId","==",e.uid));(await mm(a)).forEach(e=>{var t;const n=e.data();A.besties.push({id:e.id,type:"requested",name:n.recipientName,phone:n.recipientPhone,status:n.status,createdAt:null===(t=n.createdAt)||void 0===t?void 0:t.toDate()})});const o=qp(lp(Qx,"besties"),Xp("recipientId","==",e.uid));(await mm(o)).forEach(e=>{var t;const n=e.data();A.besties.push({id:e.id,type:"received",name:n.requesterName,phone:n.requesterPhone,status:n.status,createdAt:null===(t=n.createdAt)||void 0===t?void 0:t.toDate()})});const l=qp(lp(Qx,"templates"),Xp("userId","==",e.uid));(await mm(l)).forEach(e=>{A.templates.push(Re({id:e.id},e.data()))});const c=qp(lp(Qx,"badges"),Xp("userId","==",e.uid));(await mm(c)).forEach(e=>{A.badges.push(Re({id:e.id},e.data()))});const u=JSON.stringify(A,null,2),d=new Blob([u],{type:"application/json"}),h=URL.createObjectURL(d),f=document.createElement("a");f.href=h,f.download="besties-data-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(f),f.click(),document.body.removeChild(f),en.success("Data exported successfully!"),s(!1)}catch(A){console.error("Error exporting data:",A),en.error("Failed to export data"),s(!1)}},disabled:r,className:"w-full btn btn-primary",children:r?"Exporting...":"\ud83d\udce5 Download JSON"})]}),(0,Vx.jsxs)("div",{className:"card p-6",children:[(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Check-in History (CSV)"}),(0,Vx.jsx)("p",{className:"text-text-secondary text-sm",children:"Download your check-in history as a spreadsheet. Perfect for importing into Excel or Google Sheets."}),(0,Vx.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,Vx.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,Vx.jsx)("span",{className:"badge badge-success",children:"Date"}),(0,Vx.jsx)("span",{className:"badge badge-success",children:"Location"}),(0,Vx.jsx)("span",{className:"badge badge-success",children:"Duration"}),(0,Vx.jsx)("span",{className:"badge badge-success",children:"Status"}),(0,Vx.jsx)("span",{className:"badge badge-success",children:"Notes"})]})]})]})}),(0,Vx.jsx)("button",{onClick:async()=>{s(!0),en("Preparing CSV...");try{const t=qp(lp(Qx,"checkins"),Xp("userId","==",e.uid)),n=await mm(t),r=[["Date","Location","Duration (min)","Status","Notes"].join(",")];n.forEach(e=>{var t;const n=e.data(),s=[(null===(t=n.createdAt)||void 0===t?void 0:t.toDate().toLocaleDateString())||"",'"'.concat(n.location||"",'"'),n.duration||0,n.status||"",'"'.concat(n.notes||"",'"')];r.push(s.join(","))});const A=r.join("\n"),i=new Blob([A],{type:"text/csv"}),a=URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download="besties-checkins-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),en.success("CSV exported successfully!"),s(!1)}catch(t){console.error("Error exporting CSV:",t),en.error("Failed to export CSV"),s(!1)}},disabled:r,className:"w-full btn btn-secondary",children:r?"Exporting...":"\ud83d\udcca Download CSV"})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 mt-6 bg-gray-50",children:[(0,Vx.jsx)("h4",{className:"font-semibold text-text-primary mb-2",children:"\ud83d\udd12 Privacy & Security"}),(0,Vx.jsxs)("ul",{className:"text-sm text-text-secondary space-y-1",children:[(0,Vx.jsx)("li",{children:"\u2022 Your data is exported directly to your device"}),(0,Vx.jsx)("li",{children:"\u2022 We don't store or track what you export"}),(0,Vx.jsx)("li",{children:"\u2022 Files are generated locally in your browser"}),(0,Vx.jsx)("li",{children:"\u2022 All data remains encrypted during export"})]})]})]})]})},hv=()=>{const[e,n]=(0,t.useState)("24h"),[r,s]=(0,t.useState)([]),[A,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)({}),[u,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{h()},[e]);const h=async()=>{d(!0);try{const t=wo.fromDate((()=>{const t=new Date;switch(e){case"1h":return new Date(t.getTime()-36e5);case"24h":default:return new Date(t.getTime()-864e5);case"7d":return new Date(t.getTime()-6048e5)}})()),n=qp(lp(Qx,"errors"),Xp("createdAt",">=",t),$p("createdAt","desc"),tm(50)),r=await mm(n),A=[];r.forEach(e=>A.push(Re({id:e.id},e.data()))),s(A);const a=qp(lp(Qx,"performance"),Xp("createdAt",">=",t),$p("createdAt","desc"),tm(100)),l=await mm(a),u=[];l.forEach(e=>u.push(Re({id:e.id},e.data()))),i(u);const h=qp(lp(Qx,"user_actions"),Xp("createdAt",">=",t),$p("createdAt","desc"),tm(200)),f=await mm(h),p=[];f.forEach(e=>p.push(Re({id:e.id},e.data()))),o(p);const m=qp(lp(Qx,"funnel_events"),Xp("createdAt",">=",t),$p("createdAt","desc")),g=await mm(m),y={};g.forEach(e=>{const t=e.data();y[t.funnel]||(y[t.funnel]={}),y[t.funnel][t.step]||(y[t.funnel][t.step]=0),y[t.funnel][t.step]++}),c(y),d(!1)}catch(t){console.error("Error loading monitoring data:",t),d(!1)}},f=(r.length/Math.max(a.length,1)*100).toFixed(2),p=A.filter(e=>"page_load"===e.type),m=p.length>0?(p.reduce((e,t)=>{var n;return e+((null===(n=t.metrics)||void 0===n?void 0:n.total)||0)},0)/p.length).toFixed(0):0,g=r.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),y=a.filter(e=>"page_view"===e.action),x=y.reduce((e,t)=>{var n;const r=(null===(n=t.details)||void 0===n?void 0:n.page)||"unknown";return e[r]=(e[r]||0)+1,e},{}),w=Object.entries(x).sort((e,t)=>t[1]-e[1]).slice(0,10);return u?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udd0d Monitoring Dashboard"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Real-time errors, performance & user behavior"})]}),(0,Vx.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Vx.jsx)("button",{onClick:()=>n("1h"),className:"px-4 py-2 rounded-full font-semibold ".concat("1h"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last Hour"}),(0,Vx.jsx)("button",{onClick:()=>n("24h"),className:"px-4 py-2 rounded-full font-semibold ".concat("24h"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 24h"}),(0,Vx.jsx)("button",{onClick:()=>n("7d"),className:"px-4 py-2 rounded-full font-semibold ".concat("7d"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 7 Days"})]}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display ".concat(r.length>0?"text-danger":"text-success"),children:r.length}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Errors"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-warning",children:[f,"%"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Error Rate"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsxs)("div",{className:"text-3xl font-display text-primary",children:[m,"ms"]}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Page Load"})]}),(0,Vx.jsxs)("div",{className:"card p-4 text-center",children:[(0,Vx.jsx)("div",{className:"text-3xl font-display text-secondary",children:a.length}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"User Actions"})]})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsxs)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:["\ud83d\udc1b Recent Errors (",r.length,")"]}),0===r.length?(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\u2705"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"No errors! Everything is working perfectly!"})]}):(0,Vx.jsx)("div",{className:"space-y-3",children:r.slice(0,10).map(e=>(0,Vx.jsxs)("div",{className:"card p-4 border-l-4 border-danger",children:[(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Vx.jsx)("span",{className:"badge badge-danger",children:e.type}),(0,Vx.jsx)("span",{className:"text-sm text-text-secondary",children:e.createdAt&&new Date(e.createdAt.toDate()).toLocaleString()})]}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.message}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-2",children:e.url}),e.userId&&(0,Vx.jsxs)("div",{className:"text-xs text-text-secondary",children:["User: ",e.userId]})]})}),e.stack&&(0,Vx.jsxs)("details",{className:"text-xs text-text-secondary mt-2",children:[(0,Vx.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,Vx.jsx)("pre",{className:"mt-2 p-2 bg-gray-50 rounded overflow-auto max-h-40",children:e.stack})]})]},e.id))})]}),Object.keys(g).length>0&&(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Error Types Breakdown"}),(0,Vx.jsx)("div",{className:"space-y-2",children:Object.entries(g).map(e=>{let[t,n]=e;return(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsx)("span",{className:"text-text-primary",children:t}),(0,Vx.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vx.jsx)("div",{className:"h-2 bg-danger/20 rounded-full",style:{width:"".concat(n/r.length*200,"px")},children:(0,Vx.jsx)("div",{className:"h-full bg-danger rounded-full",style:{width:"100%"}})}),(0,Vx.jsx)("span",{className:"text-text-secondary text-sm w-8 text-right",children:n})]})]},t)})})]}),(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\u26a1 Performance Issues"}),0===A.filter(e=>"slow_resource"===e.type).length?(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\ude80"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"No slow resources detected!"})]}):(0,Vx.jsx)("div",{className:"card p-6",children:(0,Vx.jsx)("div",{className:"space-y-2",children:A.filter(e=>"slow_resource"===e.type).slice(0,10).map((e,t)=>(0,Vx.jsxs)("div",{className:"flex items-center justify-between p-3 bg-warning/10 rounded-lg",children:[(0,Vx.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vx.jsx)("div",{className:"text-sm font-semibold text-text-primary truncate",children:e.name}),(0,Vx.jsx)("div",{className:"text-xs text-text-secondary",children:e.createdAt&&new Date(e.createdAt.toDate()).toLocaleString()})]}),(0,Vx.jsxs)("div",{className:"text-warning font-semibold ml-4",children:[Math.round(e.duration),"ms"]})]},t))})})]}),p.length>0&&(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Page Load Breakdown (avg)"}),(0,Vx.jsx)("div",{className:"space-y-2",children:["dns","tcp","request","response","dom","load"].map(e=>{const t=p.reduce((t,n)=>{var r;return t+((null===(r=n.metrics)||void 0===r?void 0:r[e])||0)},0)/p.length;return(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsx)("span",{className:"text-text-primary capitalize",children:e}),(0,Vx.jsxs)("span",{className:"text-text-secondary",children:[Math.round(t),"ms"]})]},e)})})]}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"\ud83d\udcca Top Pages"}),(0,Vx.jsx)("div",{className:"space-y-2",children:w.map(e=>{let[t,n]=e;return(0,Vx.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Vx.jsx)("span",{className:"text-text-primary",children:t}),(0,Vx.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vx.jsx)("div",{className:"h-2 bg-primary/20 rounded-full",style:{width:"".concat(n/y.length*200,"px")},children:(0,Vx.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"100%"}})}),(0,Vx.jsxs)("span",{className:"text-text-secondary text-sm w-12 text-right",children:[n," views"]})]})]},t)})})]}),Object.keys(l).length>0&&(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"\ud83c\udfaf Conversion Funnels"}),Object.entries(l).map(e=>{let[t,n]=e;const r=Object.entries(n).sort(),s=Math.max(...Object.values(n));return(0,Vx.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,Vx.jsxs)("div",{className:"font-semibold text-text-primary mb-3 capitalize",children:[t.replace(/_/g," ")," Funnel"]}),(0,Vx.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>{let[n,A]=e;const i=0===t?100:(A/r[0][1]*100).toFixed(1),a=t>0?((r[t-1][1]-A)/r[t-1][1]*100).toFixed(1):0;return(0,Vx.jsxs)("div",{children:[(0,Vx.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Vx.jsx)("span",{className:"text-text-primary capitalize",children:n.replace(/_/g," ")}),(0,Vx.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Vx.jsxs)("span",{className:"text-text-secondary text-sm",children:[A," users"]}),(0,Vx.jsxs)("span",{className:"text-text-secondary text-sm",children:["(",i,"%)"]}),a>0&&(0,Vx.jsxs)("span",{className:"text-danger text-sm",children:["-",a,"%"]})]})]}),(0,Vx.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Vx.jsx)("div",{className:"h-full ".concat(a>20?"bg-danger":"bg-primary"),style:{width:"".concat(A/s*100,"%")}})})]},n)})})]},t)})]}),(0,Vx.jsx)("button",{onClick:h,className:"w-full btn btn-primary",disabled:u,children:"\ud83d\udd04 Refresh Data"})]})]})},fv=()=>{const{currentUser:e}=zx(),[n,r]=(0,t.useState)([]),[s,A]=(0,t.useState)(!0),[i,a]=(0,t.useState)("all");(0,t.useEffect)(()=>{o()},[e,i]);const o=async()=>{if(e){A(!0);try{const t=qp(lp(Qx,"besties"),Xp("requesterId","==",e.uid),Xp("status","==","accepted")),n=qp(lp(Qx,"besties"),Xp("recipientId","==",e.uid),Xp("status","==","accepted")),[s,a]=await Promise.all([mm(t),mm(n)]),o=new Set([e.uid]);s.forEach(e=>{const t=e.data();t.recipientId&&o.add(t.recipientId)}),a.forEach(e=>{const t=e.data();t.requesterId&&o.add(t.requesterId)});const l=Array.from(o),c=[];for(const r of l){let t=qp(lp(Qx,"checkins"),Xp("userId","==",r),$p("createdAt","desc"),tm(10));"active"===i?t=qp(lp(Qx,"checkins"),Xp("userId","==",r),Xp("status","==","active"),$p("createdAt","desc"),tm(10)):"completed"===i&&(t=qp(lp(Qx,"checkins"),Xp("userId","==",r),Xp("status","==","completed"),$p("createdAt","desc"),tm(10)));const n=await mm(t);for(const s of n.docs){const t=s.data(),n=await fm(cp(Qx,"users",r)),A=n.exists()?n.data():null;c.push(Re(Re({id:s.id},t),{},{userName:(null===A||void 0===A?void 0:A.displayName)||"Unknown User",userPhoto:(null===A||void 0===A?void 0:A.photoURL)||null,isOwn:r===e.uid}))}}c.sort((e,t)=>t.createdAt-e.createdAt),r(c.slice(0,50)),A(!1)}catch(t){console.error("Error loading feed:",t),en.error("Failed to load feed"),A(!1)}}},l=e=>{switch(e){case"active":return"text-warning";case"completed":return"text-success";case"alerted":return"text-danger";default:return"text-text-secondary"}},c=e=>{switch(e){case"active":return"\u23f0";case"completed":return"\u2705";case"alerted":return"\ud83d\udea8";default:return"\ud83d\udccd"}};return s?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Social Feed"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"See what your besties are up to (privacy-safe)"})]}),(0,Vx.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Vx.jsx)("button",{onClick:()=>a("all"),className:"px-4 py-2 rounded-full font-semibold ".concat("all"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"All"}),(0,Vx.jsx)("button",{onClick:()=>a("active"),className:"px-4 py-2 rounded-full font-semibold ".concat("active"===i?"bg-warning text-white":"bg-white text-text-primary"),children:"Active Now"}),(0,Vx.jsx)("button",{onClick:()=>a("completed"),className:"px-4 py-2 rounded-full font-semibold ".concat("completed"===i?"bg-success text-white":"bg-white text-text-primary"),children:"Safe & Sound"})]}),0===n.length?(0,Vx.jsxs)("div",{className:"card p-12 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No activity yet"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"active"===i?"None of your besties are checked in right now":"Add besties to see their check-ins here"})]}):(0,Vx.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,Vx.jsx)("div",{className:"card p-4",children:(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Vx.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-12 h-12 rounded-full object-cover"}):(0,Vx.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-white font-semibold",children:e.userName.charAt(0).toUpperCase()})}),(0,Vx.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Vx.jsx)("span",{className:"font-semibold text-text-primary",children:e.isOwn?"You":e.userName}),(0,Vx.jsx)("span",{className:"text-text-secondary text-sm",children:e.createdAt&&Cw(e.createdAt.toDate(),{addSuffix:!0})})]}),(0,Vx.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Vx.jsx)("span",{className:"text-lg ".concat(l(e.status)),children:c(e.status)}),(0,Vx.jsxs)("span",{className:"text-text-primary",children:["active"===e.status&&"is checked in at","completed"===e.status&&"safely returned from","alerted"===e.status&&"needs help at"]}),(0,Vx.jsx)("span",{className:"font-semibold text-text-primary",children:e.location})]}),(0,Vx.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm text-text-secondary",children:[(0,Vx.jsxs)("span",{children:["\u23f1\ufe0f ",e.duration," minutes"]}),"active"===e.status&&e.alertTime&&(0,Vx.jsxs)("span",{children:["\u2022 Alert in ",Math.round((e.alertTime.toDate()-new Date)/6e4)," min"]}),"completed"===e.status&&e.completedAt&&(0,Vx.jsxs)("span",{children:["\u2022 Completed ",Cw(e.completedAt.toDate(),{addSuffix:!0})]})]}),e.notes&&(0,Vx.jsxs)("div",{className:"mt-2 text-sm text-text-secondary italic",children:['"',e.notes,'"']}),(0,Vx.jsx)("div",{className:"mt-3",children:(0,Vx.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===e.status?"bg-warning/10 text-warning":"completed"===e.status?"bg-success/10 text-success":"alerted"===e.status?"bg-danger/10 text-danger":"bg-gray-100 text-text-secondary"),children:["active"===e.status&&"\ud83d\udfe1 Active","completed"===e.status&&"\ud83d\udfe2 Safe","alerted"===e.status&&"\ud83d\udd34 Alert"]})})]})]})},e.id))}),(0,Vx.jsx)("div",{className:"card p-4 mt-6 bg-primary/5 border border-primary/20",children:(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:[(0,Vx.jsx)("strong",{className:"text-text-primary",children:"\ud83d\udd12 Privacy:"})," Only your accepted besties can see your check-ins. You can only see check-ins from people in your safety circle."]})})]})]})},pv=()=>(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"max-w-4xl mx-auto p-6 pb-20",children:(0,Vx.jsxs)("div",{className:"card p-8",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-6",children:"Privacy Policy"}),(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary mb-6",children:[(0,Vx.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Overview"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is a personal safety check-in application that helps users stay safe by notifying their trusted contacts if they don't check in on time."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Information We Collect"}),(0,Vx.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-3",children:"Information You Provide:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Name and email address (for account creation)"}),(0,Vx.jsx)("li",{children:"Phone number (for SMS notifications)"}),(0,Vx.jsx)("li",{children:"Location information (when you create check-ins)"}),(0,Vx.jsx)("li",{children:"Emergency contact information (names and phone numbers of your Besties)"})]}),(0,Vx.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-3",children:"Automatically Collected Information:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Check-in history and timestamps"}),(0,Vx.jsx)("li",{children:"Device information and IP address"}),(0,Vx.jsx)("li",{children:"Usage analytics (page views, features used)"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"How We Use Your Information"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We use your information to:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Send safety alerts to your designated emergency contacts when you don't check in on time"}),(0,Vx.jsx)("li",{children:"Send emergency notifications when you trigger an SOS alert"}),(0,Vx.jsx)("li",{children:"Verify your identity and prevent fraud"}),(0,Vx.jsx)("li",{children:"Improve our service and user experience"}),(0,Vx.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"How We Share Your Information"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We share your information ONLY in these situations:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"With Your Besties:"})," We share your check-in status, location, and alerts with emergency contacts YOU designate"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"With Service Providers:"})," We use third-party services (Firebase, Twilio, SendGrid) to operate our platform"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"For Safety:"})," We may share information with law enforcement if we believe it's necessary to prevent harm"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"With Your Consent:"})," Any other sharing requires your explicit permission"]})]}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:(0,Vx.jsx)("strong",{children:"We do NOT:"})}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Sell your personal information"}),(0,Vx.jsx)("li",{children:"Share your information for marketing purposes"}),(0,Vx.jsx)("li",{children:"Share your data with third parties except as described above"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Your Data Rights"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"You have the right to:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Access your personal data"}),(0,Vx.jsx)("li",{children:"Delete your account and all associated data"}),(0,Vx.jsx)("li",{children:"Export your data"}),(0,Vx.jsx)("li",{children:"Opt-out of notifications"}),(0,Vx.jsx)("li",{children:"Update your information at any time"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"To exercise these rights, go to Settings in the app or contact us directly."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Data Security"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We protect your data using:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"End-to-end encryption for sensitive data"}),(0,Vx.jsx)("li",{children:"Secure Firebase authentication"}),(0,Vx.jsx)("li",{children:"Regular security audits"}),(0,Vx.jsx)("li",{children:"Limited employee access to personal data"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Third-Party Services"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We use these services:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Firebase"})," (Google): Hosting, database, authentication"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Twilio:"})," SMS notifications"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"SendGrid:"})," Email notifications"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Google Maps:"})," Location autocomplete"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Stripe:"})," Payment processing (optional)"]})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Each service has its own privacy policy."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Children's Privacy"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Besties is not intended for users under 18. We do not knowingly collect information from children."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"International Users"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Your data may be processed in the United States and other countries where our servers are located."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Changes to Privacy Policy"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"We'll notify you of significant changes via email or in-app notification."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Data Retention"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Active accounts:"})," Data retained while account is active"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Deleted accounts:"})," Data permanently deleted within 30 days"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Legal requirements:"})," Some data may be retained longer if required by law"]})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Cookie Policy"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We use cookies for:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Authentication and security"}),(0,Vx.jsx)("li",{children:"Analytics and performance monitoring"}),(0,Vx.jsx)("li",{children:"User preferences"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"You can disable cookies in your browser settings."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"WhatsApp/Messenger Communications"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"By adding emergency contacts, you consent to us sending them safety notifications via:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"SMS"}),(0,Vx.jsx)("li",{children:"Email"}),(0,Vx.jsx)("li",{children:"WhatsApp (if enabled)"}),(0,Vx.jsx)("li",{children:"Facebook Messenger (if enabled)"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Emergency contacts can opt-out at any time by replying STOP or contacting us."})]}),(0,Vx.jsx)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:(0,Vx.jsx)("p",{className:"text-text-secondary text-center",children:"By using Besties, you agree to this Privacy Policy."})})]})})]}),mv=()=>(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"max-w-4xl mx-auto p-6 pb-20",children:(0,Vx.jsxs)("div",{className:"card p-8",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-6",children:"Terms of Service"}),(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary mb-6",children:[(0,Vx.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"1. Acceptance of Terms"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:'By accessing or using Besties ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"These Terms constitute a legally binding agreement between you and Besties. Your continued use of the Service indicates your acceptance of these Terms and any future modifications."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"2. Description of Service"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is a personal safety check-in application that allows users to:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Create timed check-ins with location information"}),(0,Vx.jsx)("li",{children:'Designate emergency contacts ("Besties") to receive alerts'}),(0,Vx.jsx)("li",{children:"Send automatic notifications if check-ins are missed"}),(0,Vx.jsx)("li",{children:"Trigger emergency SOS alerts to designated contacts"}),(0,Vx.jsx)("li",{children:"Share check-in status and location with trusted contacts"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"3. Eligibility"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"You must be at least 18 years old to use the Service. By using Besties, you represent and warrant that:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"You are at least 18 years of age"}),(0,Vx.jsx)("li",{children:"You have the legal capacity to enter into this agreement"}),(0,Vx.jsx)("li",{children:"You will comply with all applicable laws and regulations"}),(0,Vx.jsx)("li",{children:"All information you provide is accurate and complete"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"4. Account Registration"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"To use the Service, you must:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Create an account with accurate information"}),(0,Vx.jsx)("li",{children:"Maintain the security of your account credentials"}),(0,Vx.jsx)("li",{children:"Notify us immediately of any unauthorized access"}),(0,Vx.jsx)("li",{children:"Accept responsibility for all activities under your account"}),(0,Vx.jsx)("li",{children:"Provide a valid phone number for emergency notifications"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"You may not share your account with others or create multiple accounts for fraudulent purposes."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"5. Emergency Contacts and Consent"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:'By adding emergency contacts ("Besties"), you:'}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Confirm you have permission to add their contact information"}),(0,Vx.jsx)("li",{children:"Authorize us to send them alerts on your behalf"}),(0,Vx.jsx)("li",{children:"Acknowledge they will receive notifications via SMS, email, WhatsApp, or other channels"}),(0,Vx.jsx)("li",{children:"Accept responsibility for any costs they may incur from receiving messages"}),(0,Vx.jsx)("li",{children:"Agree to inform them about how their information will be used"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"6. Safety Features and Limitations"}),(0,Vx.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-4 mb-4",children:(0,Vx.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"\u26a0\ufe0f IMPORTANT DISCLAIMER"})}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is designed as a safety tool, but it is NOT a replacement for:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Emergency services (911 or local emergency numbers)"}),(0,Vx.jsx)("li",{children:"Professional security or monitoring services"}),(0,Vx.jsx)("li",{children:"Medical alert systems"}),(0,Vx.jsx)("li",{children:"Personal safety devices or training"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:(0,Vx.jsx)("strong",{children:"You acknowledge that:"})}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"The Service depends on internet connectivity, device battery, and third-party services"}),(0,Vx.jsx)("li",{children:"Notifications may be delayed or fail due to technical issues"}),(0,Vx.jsx)("li",{children:"Location information may be inaccurate or unavailable"}),(0,Vx.jsx)("li",{children:"Emergency contacts may not see or respond to alerts"}),(0,Vx.jsx)("li",{children:"The Service cannot guarantee your safety in emergency situations"})]}),(0,Vx.jsx)("div",{className:"bg-red-50 border-2 border-red-400 rounded-xl p-4 mb-4",children:(0,Vx.jsx)("p",{className:"text-sm font-semibold text-red-800",children:"\ud83d\udea8 IN A TRUE EMERGENCY, ALWAYS CONTACT LOCAL EMERGENCY SERVICES (911) IMMEDIATELY"})})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"7. User Responsibilities"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"You agree to:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Use the Service responsibly and lawfully"}),(0,Vx.jsx)("li",{children:"Provide accurate location and check-in information"}),(0,Vx.jsx)("li",{children:"Keep your emergency contact list updated"}),(0,Vx.jsx)("li",{children:"Complete check-ins on time when safe to do so"}),(0,Vx.jsx)("li",{children:"Not abuse the emergency alert features"}),(0,Vx.jsx)("li",{children:"Respect the privacy of other users"}),(0,Vx.jsx)("li",{children:"Maintain a working device with internet connection"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"8. Prohibited Uses"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"You may NOT:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Use the Service for illegal activities"}),(0,Vx.jsx)("li",{children:"Send false emergency alerts or abuse the SOS feature"}),(0,Vx.jsx)("li",{children:"Harass, stalk, or threaten other users"}),(0,Vx.jsx)("li",{children:"Add contacts without their knowledge or permission"}),(0,Vx.jsx)("li",{children:"Attempt to bypass security features or access restrictions"}),(0,Vx.jsx)("li",{children:"Reverse engineer, decompile, or hack the Service"}),(0,Vx.jsx)("li",{children:"Use automated systems (bots) to access the Service"}),(0,Vx.jsx)("li",{children:"Resell or commercially exploit the Service"}),(0,Vx.jsx)("li",{children:"Impersonate others or provide false information"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"9. User Content"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"You retain ownership of content you submit (locations, notes, photos). By using the Service, you grant us a license to:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Store and process your content to provide the Service"}),(0,Vx.jsx)("li",{children:"Share your check-in information with your designated emergency contacts"}),(0,Vx.jsx)("li",{children:"Use anonymized data for analytics and service improvement"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"You are responsible for the content you share and must not submit illegal, harmful, or infringing content."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"10. Payments and Subscriptions"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"If you choose to support Besties through donations or subscriptions:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Payments are processed securely through Stripe"}),(0,Vx.jsx)("li",{children:"Donations are non-refundable"}),(0,Vx.jsx)("li",{children:"Subscriptions auto-renew until cancelled"}),(0,Vx.jsx)("li",{children:"You can cancel subscriptions anytime through your account settings"}),(0,Vx.jsx)("li",{children:"We reserve the right to change pricing with 30 days notice"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"11. Third-Party Services"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"The Service integrates with third-party providers (Twilio, SendGrid, Firebase, Google Maps, Stripe). Your use of these services is subject to their respective terms and privacy policies. We are not responsible for third-party service failures or changes."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"12. Intellectual Property"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties and all related trademarks, logos, and content are owned by us or our licensors. You may not use our intellectual property without written permission."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"13. Disclaimer of Warranties"}),(0,Vx.jsx)("div",{className:"bg-gray-100 border-2 border-gray-300 rounded-xl p-4 mb-4",children:(0,Vx.jsx)("p",{className:"text-sm font-semibold text-gray-800 uppercase",children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND'})}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We make no warranties that:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"The Service will be uninterrupted, secure, or error-free"}),(0,Vx.jsx)("li",{children:"Notifications will always be delivered on time"}),(0,Vx.jsx)("li",{children:"Location information will be accurate"}),(0,Vx.jsx)("li",{children:"The Service will meet your safety needs or expectations"}),(0,Vx.jsx)("li",{children:"Defects will be corrected"})]})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"14. Limitation of Liability"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Any injuries, harm, or damages resulting from use or inability to use the Service"}),(0,Vx.jsx)("li",{children:"Failed or delayed notifications"}),(0,Vx.jsx)("li",{children:"Inaccurate location information"}),(0,Vx.jsx)("li",{children:"Actions or inactions of emergency contacts"}),(0,Vx.jsx)("li",{children:"Third-party service failures"}),(0,Vx.jsx)("li",{children:"Loss of data or content"}),(0,Vx.jsx)("li",{children:"Indirect, incidental, or consequential damages"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"If we are found liable, our total liability is limited to the amount you paid us in the past 12 months, or $100, whichever is less."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"15. Indemnification"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"You agree to indemnify and hold harmless Besties and its affiliates from any claims, damages, or expenses arising from: (a) your use of the Service, (b) your violation of these Terms, (c) your violation of any third-party rights, or (d) false emergency alerts."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"16. Termination"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"We may terminate or suspend your account if you:"}),(0,Vx.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Vx.jsx)("li",{children:"Violate these Terms"}),(0,Vx.jsx)("li",{children:"Abuse the Service or emergency features"}),(0,Vx.jsx)("li",{children:"Engage in fraudulent activity"}),(0,Vx.jsx)("li",{children:"Pose a risk to other users"})]}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"You may terminate your account anytime through Settings. Upon termination, your data will be deleted as described in our Privacy Policy."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"17. Changes to Terms"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"We may update these Terms at any time. Significant changes will be communicated via email or in-app notification. Continued use after changes constitutes acceptance of the new Terms."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"18. Governing Law and Disputes"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"These Terms are governed by the laws of [Your Jurisdiction]. Any disputes will be resolved through binding arbitration, except where prohibited by law."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"19. Severability"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will continue in full effect."})]}),(0,Vx.jsxs)("section",{className:"mb-8",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"20. Contact Information"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-4",children:"For questions about these Terms, contact us at:"}),(0,Vx.jsxs)("ul",{className:"list-none text-text-secondary space-y-2",children:[(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Email:"})," legal@bestiesapp.com"]}),(0,Vx.jsxs)("li",{children:[(0,Vx.jsx)("strong",{children:"Support:"})," support@bestiesapp.com"]})]})]}),(0,Vx.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,Vx.jsx)("p",{className:"text-text-secondary text-center mb-4",children:(0,Vx.jsx)("strong",{children:"By using Besties, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})}),(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary text-center",children:["For information about how we handle your data, please review our ",(0,Vx.jsx)("a",{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})]})]})})]}),gv=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)("all"),[A,i]=(0,t.useState)("24h"),[a,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=lp(Qx,"errors");if("all"!==A){const t=new Date,n={"24h":864e5,"7d":6048e5,"30d":2592e6};e=qp(e,Xp("timestamp",">=",new Date(t.getTime()-n[A]).getTime()))}"all"!==r&&(e=qp(e,Xp("type","==",r))),e=qp(e,$p("timestamp","desc"),tm(100));const t=vm(e,e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),n(t),o(!1)},e=>{console.error("Error loading errors:",e),o(!1)});return()=>t()},[r,A]);const l=e=>{var t,n;return"uncaught_error"===e.type?"critical":"unhandled_promise"===e.type||null!==(t=e.message)&&void 0!==t&&t.includes("verification failed")?"high":null!==(n=e.message)&&void 0!==n&&n.includes("permission-denied")?"medium":"low"},c={total:e.length,critical:e.filter(e=>"critical"===l(e)).length,high:e.filter(e=>"high"===l(e)).length,medium:e.filter(e=>"medium"===l(e)).length,low:e.filter(e=>"low"===l(e)).length};return a?(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Vx.jsx)("div",{className:"spinner"})})]}):(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Vx.jsxs)("div",{className:"mb-6",children:[(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udea8 Error Dashboard"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Monitor and track application errors"})]}),(0,Vx.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,Vx.jsxs)("div",{className:"card p-4",children:[(0,Vx.jsx)("div",{className:"text-2xl font-bold text-text-primary",children:c.total}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Errors"})]}),(0,Vx.jsxs)("div",{className:"card p-4 border-2 border-red-300",children:[(0,Vx.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c.critical}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Critical"})]}),(0,Vx.jsxs)("div",{className:"card p-4 border-2 border-orange-300",children:[(0,Vx.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:c.high}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"High"})]}),(0,Vx.jsxs)("div",{className:"card p-4 border-2 border-yellow-300",children:[(0,Vx.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:c.medium}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Medium"})]}),(0,Vx.jsxs)("div",{className:"card p-4 border-2 border-blue-300",children:[(0,Vx.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.low}),(0,Vx.jsx)("div",{className:"text-sm text-text-secondary",children:"Low"})]})]}),(0,Vx.jsx)("div",{className:"card p-4 mb-6",children:(0,Vx.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Type"}),(0,Vx.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"input",children:[(0,Vx.jsx)("option",{value:"all",children:"All Types"}),(0,Vx.jsx)("option",{value:"uncaught_error",children:"Uncaught Errors"}),(0,Vx.jsx)("option",{value:"custom_error",children:"Custom Errors"}),(0,Vx.jsx)("option",{value:"unhandled_promise",children:"Promise Rejections"})]})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Time Range"}),(0,Vx.jsxs)("select",{value:A,onChange:e=>i(e.target.value),className:"input",children:[(0,Vx.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,Vx.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,Vx.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,Vx.jsx)("option",{value:"all",children:"All Time"})]})]})]})}),(0,Vx.jsx)("div",{className:"space-y-4",children:0===e.length?(0,Vx.jsxs)("div",{className:"card p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-4xl mb-4",children:"\u2728"}),(0,Vx.jsx)("div",{className:"text-xl font-semibold text-text-primary mb-2",children:"No Errors Found"}),(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Everything is running smoothly!"})]}):e.map(e=>{const t=l(e),n=(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(t);return(0,Vx.jsxs)("div",{className:"card p-4 border-2 ".concat(n),children:[(0,Vx.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Vx.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase ".concat(n),children:t}),(0,Vx.jsx)("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-xs font-semibold text-gray-700",children:e.type}),(0,Vx.jsxs)("span",{className:"text-sm text-text-secondary",children:[Cw(e.timestamp)," ago"]})]}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.message}),e.userId&&(0,Vx.jsxs)("div",{className:"text-sm text-text-secondary",children:["User: ",e.userId]})]})}),(0,Vx.jsxs)("details",{className:"mt-3",children:[(0,Vx.jsx)("summary",{className:"cursor-pointer text-sm font-semibold text-primary hover:underline",children:"View Details"}),(0,Vx.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:(0,Vx.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("strong",{children:"URL:"})," ",e.url]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("strong",{children:"Session:"})," ",e.sessionId]}),e.filename&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("strong",{children:"File:"})," ",e.filename,":",e.lineno,":",e.colno]}),e.details&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("strong",{children:"Details:"}),(0,Vx.jsx)("pre",{className:"mt-1 p-2 bg-white rounded text-xs overflow-x-auto",children:JSON.stringify(e.details,null,2)})]}),e.stack&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("strong",{children:"Stack Trace:"}),(0,Vx.jsx)("pre",{className:"mt-1 p-2 bg-white rounded text-xs overflow-x-auto",children:e.stack})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("strong",{children:"User Agent:"})," ",e.userAgent]})]})})]})]},e.id)})})]})]})},yv=()=>{var e,n;const{alertId:r}=ne(),s=te(),[A,i]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{u()},[r]);const u=async()=>{try{let e=await fm(cp(Qx,"checkins",r)),t="checkin";if(e.exists()||(e=await fm(cp(Qx,"emergency_sos",r)),t="sos"),!e.exists())return void c(!1);const n=Re(Re({id:e.id},e.data()),{},{type:t});i(n);const s=await fm(cp(Qx,"users",n.userId));s.exists()&&o(s.data())}catch(e){console.error("Error loading alert:",e)}finally{c(!1)}};if(l)return(0,Vx.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Vx.jsx)("div",{className:"spinner"})});if(!A)return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-2xl mx-auto p-4 text-center mt-20",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,Vx.jsx)("h1",{className:"text-2xl font-display text-text-primary mb-2",children:"Alert Not Found"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"This alert may have been resolved or removed."}),(0,Vx.jsx)("button",{onClick:()=>s("/"),className:"btn btn-primary",children:"Go Home"})]})]});const d="checkin"===A.type,h="sos"===A.type;return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Vx.jsx)("div",{className:"card p-6 mb-6 ".concat(h?"bg-red-50 border-2 border-red-500":"bg-yellow-50 border-2 border-yellow-500"),children:(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:h?"\ud83c\udd98":"\ud83d\udea8"}),(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:h?"EMERGENCY ALERT":"SAFETY ALERT"}),(0,Vx.jsxs)("p",{className:"text-lg text-text-secondary",children:[(null===a||void 0===a?void 0:a.displayName)||"A friend"," ",h?"triggered an emergency SOS":"hasn't checked in"]})]})}),(0,Vx.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Details"}),(0,Vx.jsxs)("div",{className:"space-y-4",children:[(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Person"}),(0,Vx.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-3",children:[(0,Vx.jsx)("div",{className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white",children:(null===a||void 0===a||null===(e=a.displayName)||void 0===e?void 0:e[0])||"?"}),(null===a||void 0===a?void 0:a.displayName)||"Unknown"]})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Location"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:A.location||"Unknown"})]}),d&&A.meetingWith&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Meeting With"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:A.meetingWith})]}),d&&A.notes&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Notes"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:A.notes})]}),A.photoURL&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Photo"}),(0,Vx.jsx)("img",{src:A.photoURL,alt:"Check-in",className:"w-full rounded-xl max-h-64 object-cover"})]}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Time"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:null===(n=A.createdAt)||void 0===n?void 0:n.toDate().toLocaleString()})]}),d&&A.alertTime&&(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Expected Check-In By"}),(0,Vx.jsx)("div",{className:"font-semibold text-text-primary",children:A.alertTime.toDate().toLocaleTimeString()})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-6 bg-primary/10",children:[(0,Vx.jsx)("h3",{className:"font-display text-lg text-text-primary mb-3",children:"What to do:"}),(0,Vx.jsxs)("ul",{className:"space-y-2 text-text-secondary",children:[(0,Vx.jsxs)("li",{className:"flex gap-2",children:[(0,Vx.jsx)("span",{children:"1."}),(0,Vx.jsxs)("span",{children:["Try calling or messaging ",null===a||void 0===a?void 0:a.displayName]})]}),(0,Vx.jsxs)("li",{className:"flex gap-2",children:[(0,Vx.jsx)("span",{children:"2."}),(0,Vx.jsx)("span",{children:"Check if they're at the location listed above"})]}),(0,Vx.jsxs)("li",{className:"flex gap-2",children:[(0,Vx.jsx)("span",{children:"3."}),(0,Vx.jsx)("span",{children:"If you can't reach them, consider contacting local authorities"})]}),h&&(0,Vx.jsxs)("li",{className:"flex gap-2 font-semibold text-red-600",children:[(0,Vx.jsx)("span",{children:"\u26a0\ufe0f"}),(0,Vx.jsx)("span",{children:"This is an EMERGENCY - act immediately!"})]})]})]}),(null===a||void 0===a?void 0:a.phoneNumber)&&(0,Vx.jsx)("div",{className:"mt-4",children:(0,Vx.jsxs)("a",{href:"tel:".concat(a.phoneNumber),className:"w-full btn btn-primary text-lg py-4 block text-center",children:["\ud83d\udcde Call ",a.displayName]})})]})]})},xv=()=>{var e;const n=te(),{userData:r}=zx();return(0,t.useEffect)(()=>{const e=setTimeout(()=>{n("/settings")},5e3);return()=>clearTimeout(e)},[n]),(0,Vx.jsx)("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,Vx.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83c\udf89"}),(0,Vx.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Thank You for Subscribing!"}),(0,Vx.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-2xl mb-6",children:[(0,Vx.jsx)("p",{className:"text-xl text-text-primary mb-4",children:"Your subscription is being activated..."}),(0,Vx.jsxs)("div",{className:"bg-primary/10 rounded-xl p-6 mb-6",children:[(0,Vx.jsxs)("p",{className:"text-text-primary mb-4",children:[(0,Vx.jsx)("strong",{children:"You're helping keep Besties free for everyone!"})," \ud83d\udc9c"]}),(0,Vx.jsxs)("p",{className:"text-sm text-text-secondary",children:["Your ",null!==r&&void 0!==r&&null!==(e=r.smsSubscription)&&void 0!==e&&e.active?"SMS alerts":"support"," subscription helps us provide this safety service to users who can't afford it. Together, we're making the world a safer place."]})]}),(0,Vx.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Vx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd12"}),(0,Vx.jsx)("div",{className:"font-semibold",children:"Secure"}),(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Protected by Stripe"})]}),(0,Vx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udcf1"}),(0,Vx.jsx)("div",{className:"font-semibold",children:"Active"}),(0,Vx.jsx)("div",{className:"text-text-secondary",children:"SMS alerts enabled"})]}),(0,Vx.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("div",{className:"text-3xl mb-2",children:"\u23f1\ufe0f"}),(0,Vx.jsx)("div",{className:"font-semibold",children:"Anytime"}),(0,Vx.jsx)("div",{className:"text-text-secondary",children:"Cancel anytime"})]})]})]}),(0,Vx.jsx)("p",{className:"text-white/80 text-sm mb-4",children:"Redirecting to settings in 5 seconds..."}),(0,Vx.jsx)("button",{onClick:()=>n("/settings"),className:"btn bg-white text-primary hover:bg-white/90 px-8 py-3",children:"Go to Settings Now \u2192"})]})})},wv=()=>{const e=te();return(0,Vx.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,Vx.jsx)("div",{className:"text-8xl mb-6",children:"\ud83d\ude14"}),(0,Vx.jsx)("h1",{className:"text-4xl font-display text-text-primary mb-4",children:"Subscription Cancelled"}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Vx.jsx)("p",{className:"text-xl text-text-secondary mb-6",children:"Your subscription wasn't completed. Don't worry - you haven't been charged!"}),(0,Vx.jsxs)("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-xl p-6 mb-6",children:[(0,Vx.jsx)("p",{className:"text-text-primary mb-3",children:(0,Vx.jsx)("strong",{children:"Why subscribe to SMS alerts?"})}),(0,Vx.jsxs)("ul",{className:"text-left text-sm text-text-secondary space-y-2",children:[(0,Vx.jsx)("li",{children:"\u2705 Get instant SMS alerts when check-ins expire"}),(0,Vx.jsx)("li",{children:"\u2705 Your besties receive SMS notifications"}),(0,Vx.jsx)("li",{children:"\u2705 More reliable than email for emergencies"}),(0,Vx.jsx)("li",{children:"\u2705 Support keeps Besties free for everyone"})]})]}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary mb-6",children:"Only $1/month - Less than a coffee! \u2615"}),(0,Vx.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,Vx.jsx)("button",{onClick:()=>e("/"),className:"btn btn-secondary px-6",children:"Go Home"}),(0,Vx.jsx)("button",{onClick:()=>{e("/settings")},className:"btn btn-primary px-6",children:"Try Again \u2192"})]})]}),(0,Vx.jsx)("p",{className:"text-xs text-text-secondary",children:"Having trouble? Email us at support@bestiesapp.web.app"})]})})},vv=()=>{var e;const n=te(),{userData:r}=zx(),[s,A]=(0,t.useState)(!1),i=async e=>{A(!0);try{const t=await Nw.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:en.error("Failed to start donation")}catch(t){console.error("Donation error:",t),en.error("Failed to start donation")}finally{A(!1)}};return(0,Vx.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Vx.jsx)($x,{}),(0,Vx.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Vx.jsxs)("div",{className:"text-center mb-8",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc9c"}),(0,Vx.jsx)("h1",{className:"text-4xl font-display text-gradient mb-4",children:"Welcome to Besties"}),(0,Vx.jsx)("p",{className:"text-xl text-text-secondary max-w-2xl mx-auto",children:"Where safety meets friendship, and every check-in keeps someone you love a little bit safer"})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Our Story \ud83d\udcd6"}),(0,Vx.jsxs)("div",{className:"space-y-4 text-text-secondary",children:[(0,Vx.jsxs)("p",{children:["Besties was born from a simple truth: ",(0,Vx.jsx)("span",{className:"font-semibold text-primary",children:"everyone deserves to feel safe"}),", especially when they're out there living their life."]}),(0,Vx.jsx)("p",{children:"We've all been there - walking home alone at night, going on a first date, traveling somewhere new, or just wanting someone to know you made it home okay. Those moments when you wish your best friend could be right there with you, even when they can't."}),(0,Vx.jsx)("p",{className:"text-lg font-semibold text-primary",children:"That's why we built Besties. \ud83d\udcaa"})]})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6 bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Our Mission \ud83c\udfaf"}),(0,Vx.jsxs)("div",{className:"space-y-3 text-gray-700",children:[(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83d\udee1\ufe0f"}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("h3",{className:"font-semibold mb-1",children:"Keep You Safe"}),(0,Vx.jsx)("p",{className:"text-sm",children:"Make safety simple, automatic, and always there when you need it"})]})]}),(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83e\udd1d"}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("h3",{className:"font-semibold mb-1",children:"Build Community"}),(0,Vx.jsx)("p",{className:"text-sm",children:"Create a network of people who look out for each other"})]})]}),(0,Vx.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83d\udc9c"}),(0,Vx.jsxs)("div",{children:[(0,Vx.jsx)("h3",{className:"font-semibold mb-1",children:"Stay Free"}),(0,Vx.jsx)("p",{className:"text-sm",children:"Keep Besties accessible to everyone, regardless of their ability to pay"})]})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"What Makes Us Different \u2728"}),(0,Vx.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,Vx.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83c\udf1f Good Over Profit"}),(0,Vx.jsx)("p",{className:"text-sm text-blue-800",children:"We're not here to make millions. We're here to keep people safe. Every decision we make puts your safety and privacy first, not our profit margins."})]}),(0,Vx.jsxs)("div",{className:"bg-green-50 p-4 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"\ud83d\udd12 Privacy First"}),(0,Vx.jsx)("p",{className:"text-sm text-green-800",children:"Your data is yours. We don't sell it, we don't mine it, and we delete it when you ask us to. Simple as that."})]}),(0,Vx.jsxs)("div",{className:"bg-purple-50 p-4 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-purple-900 mb-2",children:"\ud83d\udcb8 Transparent Pricing"}),(0,Vx.jsx)("p",{className:"text-sm text-purple-800",children:"No hidden fees, no surprise charges. Most features are free forever. Premium features cost what they cost to run - nothing more."})]}),(0,Vx.jsxs)("div",{className:"bg-pink-50 p-4 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-pink-900 mb-2",children:"\ud83d\ude80 Community Driven"}),(0,Vx.jsx)("p",{className:"text-sm text-pink-800",children:"You're not just a user - you're part of the Besties family. We listen, we adapt, and we build features you actually want."})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"What's Coming Next \ud83d\ude80"}),(0,Vx.jsxs)("div",{className:"space-y-3",children:[(0,Vx.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf1"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-text-primary",children:"Native Mobile Apps"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:"iOS and Android apps with reliable push notifications"})]}),(0,Vx.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-semibold",children:"In Development"})]}),(0,Vx.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83d\udcac"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-text-primary",children:"WhatsApp & Facebook Integration"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:"Free unlimited alerts through your favorite messaging apps"})]}),(0,Vx.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-semibold",children:"Q1 2025"})]}),(0,Vx.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83d\udccd"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-text-primary",children:"Live Location Sharing"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:"Share your real-time location with besties during check-ins"})]}),(0,Vx.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-semibold",children:"Q2 2025"})]}),(0,Vx.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83c\udd98"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-text-primary",children:"Quick SOS Button"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:"Instantly alert all besties with one tap in emergencies"})]}),(0,Vx.jsx)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full font-semibold",children:"Planning"})]}),(0,Vx.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83c\udf0d"}),(0,Vx.jsxs)("div",{className:"flex-1",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-text-primary",children:"Global Safety Network"}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:"Connect with verified safety resources in your area"})]}),(0,Vx.jsx)("span",{className:"text-xs bg-pink-100 text-pink-700 px-2 py-1 rounded-full font-semibold",children:"2025"})]})]})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6 bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"The Real Talk \ud83d\udcac"}),(0,Vx.jsxs)("div",{className:"space-y-4 text-gray-700",children:[(0,Vx.jsx)("p",{className:"font-semibold text-lg text-orange-900",children:"Here's the honest truth about running Besties:"}),(0,Vx.jsxs)("p",{children:["Servers cost money. SMS messages cost money. Development takes time. But we knew that going in, and we still chose to make Besties ",(0,Vx.jsx)("span",{className:"font-semibold",children:"free for everyone"}),"."]}),(0,Vx.jsxs)("p",{children:[(0,Vx.jsx)("span",{className:"font-semibold text-primary",children:"If you can afford to donate"}),", it helps us keep the lights on and build cool new features faster. Every dollar goes directly into making Besties better and keeping it running."]}),(0,Vx.jsx)("p",{className:"text-lg font-semibold text-orange-900",children:"But if you can't? That's totally okay. \ud83d\udc9c"}),(0,Vx.jsx)("p",{children:"Use the app. Stay safe. Look out for your friends. That's what matters. We'll cover the costs because keeping you safe is more important than making a profit."}),(0,Vx.jsx)("p",{className:"italic text-sm",children:"You're not a customer. You're not a product. You're part of our community, and we've got your back."})]})]}),!(null!==r&&void 0!==r&&null!==(e=r.donationStats)&&void 0!==e&&e.isActive)&&(0,Vx.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4 text-center",children:"Want to Help Out? \ud83d\udc9c"}),(0,Vx.jsx)("p",{className:"text-text-secondary text-center mb-6",children:"Choose an amount that works for you - every bit helps keep Besties free for everyone"}),(0,Vx.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,Vx.jsxs)("button",{onClick:()=>i(1),disabled:s,className:"btn btn-secondary p-6 flex flex-col items-center gap-2",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\u2615"}),(0,Vx.jsx)("span",{className:"font-display text-xl",children:"$1"}),(0,Vx.jsx)("span",{className:"text-xs text-text-secondary",children:"Coffee"})]}),(0,Vx.jsxs)("button",{onClick:()=>i(5),disabled:s,className:"btn btn-primary p-6 flex flex-col items-center gap-2 transform scale-105 shadow-lg",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83c\udf55"}),(0,Vx.jsx)("span",{className:"font-display text-xl",children:"$5"}),(0,Vx.jsx)("span",{className:"text-xs",children:"Pizza Slice"})]}),(0,Vx.jsxs)("button",{onClick:()=>i(10),disabled:s,className:"btn btn-secondary p-6 flex flex-col items-center gap-2",children:[(0,Vx.jsx)("span",{className:"text-2xl",children:"\ud83c\udfac"}),(0,Vx.jsx)("span",{className:"font-display text-xl",children:"$10"}),(0,Vx.jsx)("span",{className:"text-xs text-text-secondary",children:"Movie Night"})]})]}),(0,Vx.jsx)("p",{className:"text-xs text-center text-text-secondary italic",children:"Monthly contribution - cancel anytime, no questions asked"})]}),(0,Vx.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Vx.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Other Ways to Help \ud83d\ude4c"}),(0,Vx.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,Vx.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udce3 Spread the Word"}),(0,Vx.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:"Tell your friends! Every person who joins makes our community stronger and safer."}),(0,Vx.jsx)("button",{onClick:()=>n("/invite"),className:"text-sm font-semibold text-blue-700 hover:underline",children:"Invite Friends \u2192"})]}),(0,Vx.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"\ud83d\udca1 Share Ideas"}),(0,Vx.jsx)("p",{className:"text-sm text-green-800 mb-3",children:"Got a feature idea? Found a bug? Your feedback makes Besties better for everyone."}),(0,Vx.jsx)("a",{href:"mailto:feedback@besties.app",className:"text-sm font-semibold text-green-700 hover:underline",children:"Send Feedback \u2192"})]}),(0,Vx.jsxs)("div",{className:"p-4 bg-purple-50 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-purple-900 mb-2",children:"\u2b50 Leave a Review"}),(0,Vx.jsx)("p",{className:"text-sm text-purple-800 mb-3",children:"Reviews help others discover Besties and know it's legit."}),(0,Vx.jsx)("span",{className:"text-sm font-semibold text-purple-700",children:"Coming soon on app stores!"})]}),(0,Vx.jsxs)("div",{className:"p-4 bg-pink-50 rounded-xl",children:[(0,Vx.jsx)("h3",{className:"font-semibold text-pink-900 mb-2",children:"\ud83c\udf1f Use the App"}),(0,Vx.jsx)("p",{className:"text-sm text-pink-800 mb-3",children:"Seriously! Check in regularly, add your besties, and stay safe. That's what we're here for."}),(0,Vx.jsx)("button",{onClick:()=>n("/"),className:"text-sm font-semibold text-pink-700 hover:underline",children:"Create Check-in \u2192"})]})]})]}),(0,Vx.jsxs)("div",{className:"text-center py-8",children:[(0,Vx.jsx)("p",{className:"text-text-secondary italic mb-4",children:'"Safety shouldn\'t be a luxury. It should be a given."'}),(0,Vx.jsx)("p",{className:"text-sm text-text-secondary",children:"Built with \ud83d\udc9c by people who care about keeping you safe"}),(0,Vx.jsx)("button",{onClick:()=>n("/"),className:"mt-6 btn btn-primary",children:"Back to Home"})]})]})]})};class bv extends t.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){Kx.logError({type:"react_error",message:e.message,stack:e.stack,componentStack:t.componentStack}),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,Vx.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Vx.jsxs)("div",{className:"card max-w-2xl w-full p-8 text-center",children:[(0,Vx.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude14"}),(0,Vx.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-4",children:"Oops! Something went wrong"}),(0,Vx.jsx)("p",{className:"text-text-secondary mb-6",children:"We're sorry for the inconvenience. The error has been logged and we'll fix it soon."}),!1,(0,Vx.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,Vx.jsx)("button",{onClick:this.handleReload,className:"btn btn-primary",children:"Reload Page"}),(0,Vx.jsx)("button",{onClick:()=>window.location.href="/",className:"btn btn-secondary",children:"Go Home"})]})]})}):this.props.children}}const Bv=bv,Cv=e=>{let{children:n}=e;const{currentUser:r,userData:s,loading:A}=zx();return(0,t.useEffect)(()=>{console.group("\ud83d\udd12 AdminRoute Debug"),console.log("loading:",A),console.log("currentUser:",r),console.log("currentUser.uid:",null===r||void 0===r?void 0:r.uid),console.log("userData:",s),console.log("userData?.isAdmin:",null===s||void 0===s?void 0:s.isAdmin),console.log("Will redirect:",!(null!==s&&void 0!==s&&s.isAdmin)),console.groupEnd()},[A,r,s]),A?(console.log("\u23f3 AdminRoute: Still loading..."),(0,Vx.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Vx.jsx)("div",{className:"spinner"})})):null!==s&&void 0!==s&&s.isAdmin?(console.log("\u2705 AdminRoute: Access granted"),n):(console.error("\u274c AdminRoute: Access denied. userData?.isAdmin =",null===s||void 0===s?void 0:s.isAdmin),(0,Vx.jsx)(ge,{to:"/",replace:!0}))},Nv=()=>{const{pathname:e}=$();return(0,t.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null};function Ev(){const e=$();return(0,t.useEffect)(()=>{Kx.trackPageView(e.pathname)},[e]),null}function Uv(e){let{user:t,children:n}=e;const r=$();if(!t){const e=new URLSearchParams(r.search).get("invite");return e?(0,Vx.jsx)(ge,{to:"/login?invite=".concat(e)}):(0,Vx.jsx)(ge,{to:"/login"})}return n}const Fv=function(){const[e,n]=(0,t.useState)(!0),[r,s]=(0,t.useState)(null);return(0,t.useEffect)(()=>{const e=Fx.onAuthStateChanged(e=>{s(e),n(!1)});return e},[]),e?(0,Vx.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Vx.jsxs)("div",{className:"text-center",children:[(0,Vx.jsx)("div",{className:"spinner mb-4"}),(0,Vx.jsx)("h2",{className:"font-display text-2xl text-primary",children:"Besties"}),(0,Vx.jsx)("p",{className:"text-text-secondary",children:"Loading..."})]})}):(0,Vx.jsx)(Bv,{children:(0,Vx.jsx)(Zx,{children:(0,Vx.jsx)(qx,{children:(0,Vx.jsxs)(Fe,{children:[(0,Vx.jsx)(Ev,{}),(0,Vx.jsx)(Nv,{}),(0,Vx.jsxs)("div",{className:"App",children:[(0,Vx.jsxs)(we,{children:[(0,Vx.jsx)(ye,{path:"/login",element:r?(0,Vx.jsx)(ge,{to:"/"}):(0,Vx.jsx)(Gx,{})}),(0,Vx.jsx)(ye,{path:"/privacy",element:(0,Vx.jsx)(pv,{})}),(0,Vx.jsx)(ye,{path:"/terms",element:(0,Vx.jsx)(mv,{})}),(0,Vx.jsx)(ye,{path:"/alert/:alertId",element:(0,Vx.jsx)(yv,{})}),(0,Vx.jsx)(ye,{path:"/subscription-success",element:r?(0,Vx.jsx)(xv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/subscription-cancel",element:r?(0,Vx.jsx)(wv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/onboarding",element:(0,Vx.jsx)(Uv,{user:r,children:(0,Vx.jsx)(Yx,{})})}),(0,Vx.jsx)(ye,{path:"/",element:(0,Vx.jsx)(Uv,{user:r,children:(0,Vx.jsx)(Lw,{})})}),(0,Vx.jsx)(ye,{path:"/create",element:r?(0,Vx.jsx)(Pw,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/profile",element:r?(0,Vx.jsx)(qw,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/user/:userId",element:r?(0,Vx.jsx)(Yw,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/edit-profile",element:r?(0,Vx.jsx)(av,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/besties",element:r?(0,Vx.jsx)(ev,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/settings",element:r?(0,Vx.jsx)(sv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/badges",element:r?(0,Vx.jsx)(Av,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/history",element:r?(0,Vx.jsx)(ov,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/templates",element:r?(0,Vx.jsx)(lv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/favorites",element:r?(0,Vx.jsx)(uv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/export-data",element:r?(0,Vx.jsx)(dv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/social-feed",element:r?(0,Vx.jsx)(fv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/about",element:r?(0,Vx.jsx)(vv,{}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/dev-analytics",element:r?(0,Vx.jsx)(Cv,{children:(0,Vx.jsx)(cv,{})}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/monitoring",element:r?(0,Vx.jsx)(Cv,{children:(0,Vx.jsx)(hv,{})}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"/error-dashboard",element:r?(0,Vx.jsx)(Cv,{children:(0,Vx.jsx)(gv,{})}):(0,Vx.jsx)(ge,{to:"/login"})}),(0,Vx.jsx)(ye,{path:"*",element:(0,Vx.jsx)(ge,{to:"/"})})]}),(0,Vx.jsx)($t,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#2D3748",fontFamily:"Quicksand, sans-serif",fontWeight:"600"},success:{iconTheme:{primary:"#4CAF50",secondary:"#fff"}},error:{iconTheme:{primary:"#FF6B35",secondary:"#fff"}}}})]})]})})})})};s.createRoot(document.getElementById("root")).render((0,Vx.jsx)(t.StrictMode,{children:(0,Vx.jsx)(Fv,{})}))})()})();
//# sourceMappingURL=main.e4baf34e.js.map