{"version":3,"file":"static/js/237.f7fa842c.chunk.js","mappings":"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","sources":["pages/SocialFeedPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../services/firebase';\r\nimport { collection, query, where, orderBy, getDocs, limit, doc, getDoc } from 'firebase/firestore';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst SocialFeedPage = () => {\r\n  const { currentUser } = useAuth();\r\n  const [feed, setFeed] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all'); // all, active, completed\r\n\r\n  useEffect(() => {\r\n    loadFeed();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentUser, filter]);\r\n\r\n  const loadFeed = async () => {\r\n    if (!currentUser) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Get user's besties\r\n      const bestiesQuery1 = query(\r\n        collection(db, 'besties'),\r\n        where('requesterId', '==', currentUser.uid),\r\n        where('status', '==', 'accepted')\r\n      );\r\n      const bestiesQuery2 = query(\r\n        collection(db, 'besties'),\r\n        where('recipientId', '==', currentUser.uid),\r\n        where('status', '==', 'accepted')\r\n      );\r\n\r\n      const [snap1, snap2] = await Promise.all([\r\n        getDocs(bestiesQuery1),\r\n        getDocs(bestiesQuery2)\r\n      ]);\r\n\r\n      const bestieIds = new Set([currentUser.uid]); // Include own check-ins\r\n      snap1.forEach(doc => {\r\n        const data = doc.data();\r\n        if (data.recipientId) bestieIds.add(data.recipientId);\r\n      });\r\n      snap2.forEach(doc => {\r\n        const data = doc.data();\r\n        if (data.requesterId) bestieIds.add(data.requesterId);\r\n      });\r\n\r\n      const bestieIdsArray = Array.from(bestieIds);\r\n\r\n      // Batch fetch user data to avoid N+1 queries\r\n      const userDataMap = new Map();\r\n      const BATCH_SIZE = 10; // Firestore 'in' operator limit\r\n      \r\n      for (let i = 0; i < bestieIdsArray.length; i += BATCH_SIZE) {\r\n        const batch = bestieIdsArray.slice(i, i + BATCH_SIZE);\r\n        const userPromises = batch.map(userId => getDoc(doc(db, 'users', userId)));\r\n        const userDocs = await Promise.all(userPromises);\r\n        \r\n        userDocs.forEach((userDoc, index) => {\r\n          const userId = batch[index];\r\n          if (userDoc.exists()) {\r\n            userDataMap.set(userId, userDoc.data());\r\n          }\r\n        });\r\n      }\r\n\r\n      // OPTIMIZED: Get check-ins from all besties at once using 'in' operator\r\n      // Firestore 'in' operator supports up to 10 values, so batch if needed\r\n      const feedItems = [];\r\n      \r\n      // Create all queries in parallel batches\r\n      const queryPromises = [];\r\n      \r\n      for (let i = 0; i < bestieIdsArray.length; i += BATCH_SIZE) {\r\n        const batch = bestieIdsArray.slice(i, i + BATCH_SIZE);\r\n        \r\n        // Build query based on filter\r\n        let checkInsQuery;\r\n        if (filter === 'active') {\r\n          checkInsQuery = query(\r\n            collection(db, 'checkins'),\r\n            where('userId', 'in', batch),\r\n            where('status', '==', 'active'),\r\n            orderBy('createdAt', 'desc'),\r\n            limit(50) // Get more per batch, we'll sort and limit later\r\n          );\r\n        } else if (filter === 'completed') {\r\n          checkInsQuery = query(\r\n            collection(db, 'checkins'),\r\n            where('userId', 'in', batch),\r\n            where('status', '==', 'completed'),\r\n            orderBy('createdAt', 'desc'),\r\n            limit(50)\r\n          );\r\n        } else {\r\n          // All check-ins\r\n          checkInsQuery = query(\r\n            collection(db, 'checkins'),\r\n            where('userId', 'in', batch),\r\n            orderBy('createdAt', 'desc'),\r\n            limit(50)\r\n          );\r\n        }\r\n        \r\n        queryPromises.push(getDocs(checkInsQuery));\r\n      }\r\n      \r\n      // Execute all queries in parallel\r\n      const allSnapshots = await Promise.all(queryPromises);\r\n      \r\n      // Process all results\r\n      allSnapshots.forEach(snapshot => {\r\n        snapshot.forEach(checkInDoc => {\r\n          const checkInData = checkInDoc.data();\r\n          const userId = checkInData.userId;\r\n          const userData = userDataMap.get(userId) || null;\r\n\r\n          feedItems.push({\r\n            id: checkInDoc.id,\r\n            ...checkInData,\r\n            userName: userData?.displayName || 'Unknown User',\r\n            userPhoto: userData?.photoURL || null,\r\n            isOwn: userId === currentUser.uid,\r\n          });\r\n        });\r\n      });\r\n\r\n      // Sort by creation time\r\n      feedItems.sort((a, b) => b.createdAt - a.createdAt);\r\n\r\n      setFeed(feedItems.slice(0, 50)); // Show top 50\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error loading feed:', error);\r\n      toast.error('Failed to load feed');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'active':\r\n        return 'text-warning';\r\n      case 'completed':\r\n        return 'text-success';\r\n      case 'alerted':\r\n        return 'text-danger';\r\n      default:\r\n        return 'text-text-secondary';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'active':\r\n        return '‚è∞';\r\n      case 'completed':\r\n        return '‚úÖ';\r\n      case 'alerted':\r\n        return 'üö®';\r\n      default:\r\n        return 'üìç';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-pattern\">\r\n        <div className=\"flex items-center justify-center py-20\">\r\n          <div className=\"spinner\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-pattern\">\r\n\r\n      <div className=\"max-w-4xl mx-auto p-4 pb-20\">\r\n        <div className=\"mb-6\">\r\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">\r\n            Social Feed\r\n          </h1>\r\n          <p className=\"text-text-secondary\">\r\n            See what your besties are up to (privacy-safe)\r\n          </p>\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        <div className=\"flex gap-2 mb-6\">\r\n          <button\r\n            onClick={() => setFilter('all')}\r\n            className={`px-4 py-2 rounded-full font-semibold ${\r\n              filter === 'all' ? 'bg-primary text-white' : 'bg-white text-text-primary'\r\n            }`}\r\n          >\r\n            All\r\n          </button>\r\n          <button\r\n            onClick={() => setFilter('active')}\r\n            className={`px-4 py-2 rounded-full font-semibold ${\r\n              filter === 'active' ? 'bg-warning text-white' : 'bg-white text-text-primary'\r\n            }`}\r\n          >\r\n            Active Now\r\n          </button>\r\n          <button\r\n            onClick={() => setFilter('completed')}\r\n            className={`px-4 py-2 rounded-full font-semibold ${\r\n              filter === 'completed' ? 'bg-success text-white' : 'bg-white text-text-primary'\r\n            }`}\r\n          >\r\n            Safe & Sound\r\n          </button>\r\n        </div>\r\n\r\n        {/* Feed */}\r\n        {feed.length === 0 ? (\r\n          <div className=\"card p-12 text-center\">\r\n            <div className=\"text-6xl mb-4\">üë•</div>\r\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">\r\n              No activity yet\r\n            </h2>\r\n            <p className=\"text-text-secondary\">\r\n              {filter === 'active' \r\n                ? 'None of your besties are checked in right now'\r\n                : 'Add besties to see their check-ins here'}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {feed.map((item) => (\r\n              <div key={item.id} className=\"card p-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  {/* User Avatar */}\r\n                  <div className=\"flex-shrink-0\">\r\n                    {item.userPhoto ? (\r\n                      <img\r\n                        src={item.userPhoto}\r\n                        alt={item.userName}\r\n                        className=\"w-12 h-12 rounded-full object-cover\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-white font-semibold\">\r\n                        {item.userName.charAt(0).toUpperCase()}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Content */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                      <span className=\"font-semibold text-text-primary\">\r\n                        {item.isOwn ? 'You' : item.userName}\r\n                      </span>\r\n                      <span className=\"text-text-secondary text-sm\">\r\n                        {item.createdAt && formatDistanceToNow(item.createdAt.toDate(), { addSuffix: true })}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      <span className={`text-lg ${getStatusColor(item.status)}`}>\r\n                        {getStatusIcon(item.status)}\r\n                      </span>\r\n                      <span className=\"text-text-primary\">\r\n                        {item.status === 'active' && 'is checked in at'}\r\n                        {item.status === 'completed' && 'safely returned from'}\r\n                        {item.status === 'alerted' && 'needs help at'}\r\n                      </span>\r\n                      <span className=\"font-semibold text-text-primary\">\r\n                        {item.location}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 text-sm text-text-secondary\">\r\n                      <span>‚è±Ô∏è {item.duration} minutes</span>\r\n                      {item.status === 'active' && item.alertTime && (\r\n                        <span>\r\n                          ‚Ä¢ Alert in {Math.round((item.alertTime.toDate() - new Date()) / 60000)} min\r\n                        </span>\r\n                      )}\r\n                      {item.status === 'completed' && item.completedAt && (\r\n                        <span>\r\n                          ‚Ä¢ Completed {formatDistanceToNow(item.completedAt.toDate(), { addSuffix: true })}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {item.notes && (\r\n                      <div className=\"mt-2 text-sm text-text-secondary italic\">\r\n                        \"{item.notes}\"\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Status Badge */}\r\n                    <div className=\"mt-3\">\r\n                      <span className={`inline-block px-3 py-1 rounded-full text-xs font-semibold ${\r\n                        item.status === 'active' ? 'bg-warning/10 text-warning' :\r\n                        item.status === 'completed' ? 'bg-success/10 text-success' :\r\n                        item.status === 'alerted' ? 'bg-danger/10 text-danger' :\r\n                        'bg-gray-100 text-text-secondary'\r\n                      }`}>\r\n                        {item.status === 'active' && 'üü° Active'}\r\n                        {item.status === 'completed' && 'üü¢ Safe'}\r\n                        {item.status === 'alerted' && 'üî¥ Alert'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Privacy Note */}\r\n        <div className=\"card p-4 mt-6 bg-primary/5 border border-primary/20\">\r\n          <div className=\"text-sm text-text-secondary\">\r\n            <strong className=\"text-text-primary\">üîí Privacy:</strong> Only your accepted besties can see your check-ins. \r\n            You can only see check-ins from people in your safety circle.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SocialFeedPage;\r\n"],"names":["SocialFeedPage","currentUser","useAuth","feed","setFeed","useState","loading","setLoading","filter","setFilter","useEffect","loadFeed","async","bestiesQuery1","query","collection","db","where","uid","bestiesQuery2","snap1","snap2","Promise","all","getDocs","bestieIds","Set","forEach","doc","data","recipientId","add","requesterId","bestieIdsArray","Array","from","userDataMap","Map","BATCH_SIZE","i","length","batch","slice","userPromises","map","userId","getDoc","userDoc","index","exists","set","feedItems","queryPromises","checkInsQuery","orderBy","limit","push","snapshot","checkInDoc","checkInData","userData","get","_objectSpread","id","userName","displayName","userPhoto","photoURL","isOwn","sort","a","b","createdAt","error","console","toast","getStatusColor","status","getStatusIcon","_jsx","className","children","_jsxs","onClick","concat","item","src","alt","charAt","toUpperCase","formatDistanceToNow","toDate","addSuffix","location","duration","alertTime","Math","round","Date","completedAt","notes"],"sourceRoot":""}