"use strict";(self.webpackChunkbesties_frontend=self.webpackChunkbesties_frontend||[]).push([[774],{2774:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(2555),d=t(5043),i=t(4528),c=t(3984),r=t(5472),n=t(2339),l=t(579);const o=()=>{const{currentUser:e,userData:s}=(0,i.As)(),[t,o]=(0,d.useState)(!1);return(0,l.jsx)("div",{className:"min-h-screen bg-pattern",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Export Your Data"}),(0,l.jsx)("p",{className:"text-text-secondary",children:"Download all your Besties data (GDPR compliant)"})]}),(0,l.jsxs)("div",{className:"card p-6 mb-6 bg-primary/5 border-2 border-primary/20",children:[(0,l.jsx)("h3",{className:"font-display text-lg text-text-primary mb-2",children:"\ud83d\udcca Your Data Rights"}),(0,l.jsx)("p",{className:"text-text-secondary text-sm mb-4",children:"You have the right to download all your data from Besties at any time. This includes your profile, check-ins, besties, templates, and badges."}),(0,l.jsxs)("p",{className:"text-text-secondary text-sm",children:[(0,l.jsx)("strong",{children:"What's included:"})," Profile info, check-in history, bestie connections, saved templates, earned badges, and account settings."]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Complete Data Export (JSON)"}),(0,l.jsx)("p",{className:"text-text-secondary text-sm",children:"Download all your data in JSON format. Includes everything: profile, check-ins, besties, templates, and badges."}),(0,l.jsxs)("div",{className:"mt-3 text-sm",children:[(0,l.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,l.jsx)("span",{className:"badge badge-primary",children:"Profile"}),(0,l.jsx)("span",{className:"badge badge-success",children:"Check-ins"}),(0,l.jsx)("span",{className:"badge badge-secondary",children:"Besties"}),(0,l.jsx)("span",{className:"badge badge-accent",children:"Templates"}),(0,l.jsx)("span",{className:"badge badge-warning",children:"Badges"})]})]})]})}),(0,l.jsx)("button",{onClick:async()=>{o(!0),(0,n.Ay)("Preparing your data...");try{var t,d;const i={user:{uid:e.uid,email:e.email,displayName:null===s||void 0===s?void 0:s.displayName,phoneNumber:null===s||void 0===s?void 0:s.phoneNumber,photoURL:null===s||void 0===s?void 0:s.photoURL,createdAt:null===s||void 0===s||null===(t=s.stats)||void 0===t||null===(d=t.joinedAt)||void 0===d?void 0:d.toDate(),profile:null===s||void 0===s?void 0:s.profile,stats:null===s||void 0===s?void 0:s.stats},checkIns:[],besties:[],templates:[],badges:[],exportedAt:(new Date).toISOString()},l=(0,r.P)((0,r.rJ)(c.db,"checkins"),(0,r._M)("userId","==",e.uid));(await(0,r.GG)(l)).forEach(e=>{var s,t,a;const d=e.data();i.checkIns.push({id:e.id,location:d.location,duration:d.duration,notes:d.notes,status:d.status,createdAt:null===(s=d.createdAt)||void 0===s?void 0:s.toDate(),completedAt:null===(t=d.completedAt)||void 0===t?void 0:t.toDate(),alertedAt:null===(a=d.alertedAt)||void 0===a?void 0:a.toDate()})});const m=(0,r.P)((0,r.rJ)(c.db,"besties"),(0,r._M)("requesterId","==",e.uid));(await(0,r.GG)(m)).forEach(e=>{var s;const t=e.data();i.besties.push({id:e.id,type:"requested",name:t.recipientName,phone:t.recipientPhone,status:t.status,createdAt:null===(s=t.createdAt)||void 0===s?void 0:s.toDate()})});const x=(0,r.P)((0,r.rJ)(c.db,"besties"),(0,r._M)("recipientId","==",e.uid));(await(0,r.GG)(x)).forEach(e=>{var s;const t=e.data();i.besties.push({id:e.id,type:"received",name:t.requesterName,phone:t.requesterPhone,status:t.status,createdAt:null===(s=t.createdAt)||void 0===s?void 0:s.toDate()})});const u=(0,r.P)((0,r.rJ)(c.db,"templates"),(0,r._M)("userId","==",e.uid));(await(0,r.GG)(u)).forEach(e=>{i.templates.push((0,a.A)({id:e.id},e.data()))});const p=(0,r.P)((0,r.rJ)(c.db,"badges"),(0,r._M)("userId","==",e.uid));(await(0,r.GG)(p)).forEach(e=>{i.badges.push((0,a.A)({id:e.id},e.data()))});const h=JSON.stringify(i,null,2),b=new Blob([h],{type:"application/json"}),y=URL.createObjectURL(b),v=document.createElement("a");v.href=y,v.download="besties-data-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(v),v.click(),document.body.removeChild(v),n.Ay.success("Data exported successfully!"),o(!1)}catch(i){console.error("Error exporting data:",i),n.Ay.error("Failed to export data"),o(!1)}},disabled:t,className:"w-full btn btn-primary",children:t?"Exporting...":"\ud83d\udce5 Download JSON"})]}),(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Check-in History (CSV)"}),(0,l.jsx)("p",{className:"text-text-secondary text-sm",children:"Download your check-in history as a spreadsheet. Perfect for importing into Excel or Google Sheets."}),(0,l.jsxs)("div",{className:"mt-3 text-sm",children:[(0,l.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,l.jsx)("span",{className:"badge badge-success",children:"Date"}),(0,l.jsx)("span",{className:"badge badge-success",children:"Location"}),(0,l.jsx)("span",{className:"badge badge-success",children:"Duration"}),(0,l.jsx)("span",{className:"badge badge-success",children:"Status"}),(0,l.jsx)("span",{className:"badge badge-success",children:"Notes"})]})]})]})}),(0,l.jsx)("button",{onClick:async()=>{o(!0),(0,n.Ay)("Preparing CSV...");try{const s=(0,r.P)((0,r.rJ)(c.db,"checkins"),(0,r._M)("userId","==",e.uid)),t=await(0,r.GG)(s),a=[["Date","Location","Duration (min)","Status","Notes"].join(",")];t.forEach(e=>{var s;const t=e.data(),d=[(null===(s=t.createdAt)||void 0===s?void 0:s.toDate().toLocaleDateString())||"",'"'.concat(t.location||"",'"'),t.duration||0,t.status||"",'"'.concat(t.notes||"",'"')];a.push(d.join(","))});const d=a.join("\n"),i=new Blob([d],{type:"text/csv"}),l=URL.createObjectURL(i),m=document.createElement("a");m.href=l,m.download="besties-checkins-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(m),m.click(),document.body.removeChild(m),n.Ay.success("CSV exported successfully!"),o(!1)}catch(s){console.error("Error exporting CSV:",s),n.Ay.error("Failed to export CSV"),o(!1)}},disabled:t,className:"w-full btn btn-secondary",children:t?"Exporting...":"\ud83d\udcca Download CSV"})]})]}),(0,l.jsxs)("div",{className:"card p-6 mt-6 bg-gray-50",children:[(0,l.jsx)("h4",{className:"font-semibold text-text-primary mb-2",children:"\ud83d\udd12 Privacy & Security"}),(0,l.jsxs)("ul",{className:"text-sm text-text-secondary space-y-1",children:[(0,l.jsx)("li",{children:"\u2022 Your data is exported directly to your device"}),(0,l.jsx)("li",{children:"\u2022 We don't store or track what you export"}),(0,l.jsx)("li",{children:"\u2022 Files are generated locally in your browser"}),(0,l.jsx)("li",{children:"\u2022 All data remains encrypted during export"})]})]})]})})}}}]);
//# sourceMappingURL=774.082d639f.chunk.js.map