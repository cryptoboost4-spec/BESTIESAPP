"use strict";(self.webpackChunkbesties_frontend=self.webpackChunkbesties_frontend||[]).push([[321],{321:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(2555),n=s(5043),i=s(3216),l=s(4528),r=s(3984),d=s(5472),o=s(3845),c=s(2339),x=s(579);const m=()=>{var e,t,s,m,p,h,u,v,b,f;const{userId:g}=(0,i.g)(),{currentUser:j}=(0,l.As)(),y=(0,i.Zp)(),[N,w]=(0,n.useState)(null),[k,A]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),[M,B]=(0,n.useState)([]),[I,_]=(0,n.useState)(!0),[,D]=(0,n.useState)(!1),[G,U]=(0,n.useState)(null);(0,n.useEffect)(()=>{L()},[g,j]);const L=async()=>{if(g&&j)if(g!==j.uid)try{var e;const[t,s]=await Promise.all([(0,d.GG)((0,d.P)((0,d.rJ)(r.db,"besties"),(0,d._M)("requesterId","==",j.uid),(0,d._M)("recipientId","==",g),(0,d._M)("status","==","accepted"))),(0,d.GG)((0,d.P)((0,d.rJ)(r.db,"besties"),(0,d._M)("requesterId","==",g),(0,d._M)("recipientId","==",j.uid),(0,d._M)("status","==","accepted")))]),n=!t.empty||!s.empty;if(D(n),!n)return U("Only besties can view profiles"),void _(!1);const i=await(0,d.x7)((0,d.H9)(r.db,"users",g));if(!i.exists())return U("User not found"),void _(!1);const l=(0,a.A)({id:i.id},i.data());w(l);const o=await(0,d.x7)((0,d.H9)(r.db,"badges",g));o.exists()&&A(o.data().badges||[]);if(!1!==(null===l||void 0===l||null===(e=l.privacySettings)||void 0===e?void 0:e.showCheckInsToBesties)){const e=new Date;e.setDate(e.getDate()-7);const t=(0,d.P)((0,d.rJ)(r.db,"checkins"),(0,d._M)("userId","==",g),(0,d._M)("createdAt",">=",e),(0,d.My)("createdAt","desc"),(0,d.AB)(20)),s=(await(0,d.GG)(t)).docs.map(e=>(0,a.A)({id:e.id},e.data()));S(s)}const c=(0,d.P)((0,d.rJ)(r.db,"checkins"),(0,d._M)("userId","==",g),(0,d._M)("bestieUserIds","array-contains",j.uid),(0,d._M)("status","==","alerted")),x=(await(0,d.GG)(c)).docs.map(e=>(0,a.A)({id:e.id},e.data()));B(x),_(!1)}catch(G){console.error("Error loading user profile:",G),U("Failed to load profile"),_(!1)}else y("/profile")};if(I)return(0,x.jsx)("div",{className:"min-h-screen bg-pattern",children:(0,x.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,x.jsx)("div",{className:"spinner"})})});if(G)return(0,x.jsx)("div",{className:"min-h-screen bg-pattern",children:(0,x.jsx)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:(0,x.jsxs)("div",{className:"card p-12 text-center",children:[(0,x.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,x.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:G}),(0,x.jsx)("p",{className:"text-text-secondary mb-6",children:"You can only view profiles of your accepted besties"}),(0,x.jsx)("button",{onClick:()=>y("/besties"),className:"btn btn-primary",children:"Manage Besties"})]})})});const T=null!==N&&void 0!==N&&N.featuredBadges?k.filter(e=>N.featuredBadges.includes(e.id)).slice(0,3):k.slice(0,3),P=!1!==(null===N||void 0===N||null===(e=N.privacySettings)||void 0===e?void 0:e.showStatsToBesties),z=!1!==(null===N||void 0===N||null===(t=N.privacySettings)||void 0===t?void 0:t.showCheckInsToBesties);return(0,x.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,x.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[M.length>0&&(0,x.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"\u26a0\ufe0f Urgent Alert"}),(0,x.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:M.length})]}),M.map(e=>{var t;return(0,x.jsx)("div",{className:"card p-6 bg-red-50 dark:bg-red-900/20 border-2 border-red-500",children:(0,x.jsxs)("div",{className:"flex items-start gap-4",children:[(0,x.jsx)("div",{className:"text-4xl",children:"\ud83d\udea8"}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("h3",{className:"font-display text-lg text-red-900 dark:text-red-100 mb-2",children:[null===N||void 0===N?void 0:N.displayName," Missed Check-In!"]}),(0,x.jsxs)("div",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("strong",{children:"Location:"})," ",e.location||"Unknown"]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("strong",{children:"Expected back:"})," ",null===(t=e.alertTime)||void 0===t?void 0:t.toDate().toLocaleString()]}),e.notes&&(0,x.jsxs)("div",{children:[(0,x.jsx)("strong",{children:"Notes:"})," ",e.notes]})]}),(0,x.jsx)("button",{onClick:()=>y("/history/".concat(e.id)),className:"mt-3 btn btn-sm bg-red-600 hover:bg-red-700 text-white",children:"View Details \u2192"})]})]})},e.id)})]}),(0,x.jsxs)("div",{className:"card p-8 mb-6 text-center relative overflow-hidden shadow-2xl profile-card-aura-".concat((null===N||void 0===N||null===(s=N.profile)||void 0===s?void 0:s.aura)||"none"),style:{background:(null===N||void 0===N||null===(m=N.profile)||void 0===m?void 0:m.backgroundGradient)||"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 50%, #ddd6fe 100%)"},children:[(0,x.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,x.jsx)("div",{className:"absolute top-6 left-6 text-3xl animate-float opacity-40",children:"\ud83d\udc96"}),(0,x.jsx)("div",{className:"absolute top-10 right-8 text-2xl animate-float delay-1s opacity-40",children:"\u2728"}),(0,x.jsx)("div",{className:"absolute bottom-10 left-10 text-2xl animate-float delay-2s opacity-40",children:"\ud83c\udf38"}),(0,x.jsx)("div",{className:"absolute bottom-6 right-6 text-3xl animate-float delay-3s opacity-40",children:"\ud83d\udcab"})]}),(0,x.jsxs)("div",{className:"relative z-10",children:[(0,x.jsx)("div",{className:"w-36 h-36 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-5xl font-display overflow-hidden border-4 border-white shadow-2xl ring-4 ring-purple-200",children:null!==N&&void 0!==N&&N.photoURL?(0,x.jsx)("img",{src:N.photoURL,alt:"Profile",className:"w-full h-full object-cover",loading:"lazy"}):(null===N||void 0===N||null===(p=N.displayName)||void 0===p?void 0:p[0])||"U"}),(0,x.jsx)("h1",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3",children:(null===N||void 0===N?void 0:N.displayName)||"User"}),(0,x.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4 flex-wrap",children:[(0,x.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-primary rounded-full text-sm font-semibold shadow-lg",children:[(0,x.jsx)("span",{children:"\ud83d\udc9c"}),(0,x.jsx)("span",{children:"Your Bestie"})]}),(null===N||void 0===N||null===(h=N.requestAttention)||void 0===h?void 0:h.active)&&(0,x.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-full text-sm font-semibold shadow-lg animate-pulse",children:[(0,x.jsx)("span",{children:"\ud83d\udcac"}),(0,x.jsx)("span",{children:N.requestAttention.tag})]})]}),(null===N||void 0===N||null===(u=N.profile)||void 0===u?void 0:u.bio)&&(0,x.jsxs)("p",{className:"text-gray-800 italic max-w-md mx-auto mt-4 text-lg",children:['"',N.profile.bio,'"']}),(0,x.jsxs)("div",{className:"flex items-center justify-center gap-3 mt-6 flex-wrap",children:[(0,x.jsxs)("button",{onClick:()=>{const e=(null===N||void 0===N?void 0:N.phoneNumber)||(null===N||void 0===N?void 0:N.phone);e?window.location.href="sms:".concat(e):c.Ay.error("No phone number available")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,x.jsx)("span",{children:"\ud83d\udcac"}),(0,x.jsx)("span",{children:"Send Message"})]}),(0,x.jsxs)("button",{onClick:()=>{const e=(null===N||void 0===N?void 0:N.phoneNumber)||(null===N||void 0===N?void 0:N.phone);e?window.location.href="tel:".concat(e):c.Ay.error("No phone number available")},className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,x.jsx)("span",{children:"\ud83d\udcde"}),(0,x.jsx)("span",{children:"Call"})]})]})]})]}),P?(0,x.jsxs)("div",{className:"card p-6 mb-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Stats"}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl",children:[(0,x.jsx)("div",{className:"text-4xl font-display text-pink-700 mb-1",children:(0,x.jsx)(o.A,{end:(null===N||void 0===N||null===(v=N.stats)||void 0===v?void 0:v.completedCheckIns)||0,duration:1500})}),(0,x.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Completed Check-ins"})]}),(0,x.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl",children:[(0,x.jsx)("div",{className:"text-4xl font-display text-blue-700 mb-1",children:(0,x.jsx)(o.A,{end:(null===N||void 0===N||null===(b=N.stats)||void 0===b?void 0:b.totalCheckIns)||0,duration:1500})}),(0,x.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Check-ins"})]}),(0,x.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl",children:[(0,x.jsx)("div",{className:"text-4xl font-display text-purple-700 mb-1",children:(0,x.jsx)(o.A,{end:(null===N||void 0===N||null===(f=N.stats)||void 0===f?void 0:f.totalBesties)||0,duration:1500})}),(0,x.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Besties"})]}),(0,x.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl",children:[(0,x.jsx)("div",{className:"text-4xl font-display text-yellow-700 mb-1",children:(0,x.jsx)(o.A,{end:k.length,duration:1500})}),(0,x.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Badges Earned"})]})]})]}):(0,x.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,x.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,x.jsx)("p",{className:"text-text-secondary",children:"Stats are private"})]}),z?(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Recent Check-ins (Last 7 Days)"}),C.length>0?(0,x.jsx)("div",{className:"space-y-3",children:C.map(e=>{var t,s,a,n,i;return(0,x.jsx)("div",{className:"card p-4",children:(0,x.jsxs)("div",{className:"flex items-start gap-3",children:[(0,x.jsx)("div",{className:"text-3xl",children:(null===(t=e.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("h3",{className:"font-semibold text-text-primary",children:(null===(s=e.activity)||void 0===s?void 0:s.name)||e.activityName||"Check-in"}),(0,x.jsxs)("p",{className:"text-sm text-text-secondary",children:[null===(a=e.createdAt)||void 0===a?void 0:a.toDate().toLocaleDateString()," at"," ",null===(n=e.createdAt)||void 0===n?void 0:n.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(null===(i=e.location)||void 0===i?void 0:i.address)&&(0,x.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:["\ud83d\udccd ",e.location.address]}),e.duration&&(0,x.jsxs)("p",{className:"text-sm text-text-secondary",children:["\u23f1\ufe0f ",e.duration," minutes"]})]}),(0,x.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("completed"===e.status?"bg-green-100 text-green-700":"alerted"===e.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:["completed"===e.status&&"\u2713 Safe","alerted"===e.status&&"\u26a0\ufe0f Alert Sent","active"===e.status&&"\ud83d\udd14 Active"]})]})},e.id)})}):(0,x.jsxs)("div",{className:"card p-8 text-center",children:[(0,x.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc5"}),(0,x.jsx)("p",{className:"text-text-secondary",children:"No check-ins in the last 7 days"})]})]}):(0,x.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,x.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,x.jsx)("p",{className:"text-text-secondary",children:"Check-in history is private"})]}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Featured Badges"}),T.length>0?(0,x.jsx)("div",{className:"grid grid-cols-3 gap-4",children:T.map((e,t)=>(0,x.jsxs)("div",{className:"card p-4 text-center bg-gradient-to-br from-yellow-50 to-orange-50",children:[(0,x.jsx)("div",{className:"text-4xl mb-2",children:e.icon||"\ud83c\udfc6"}),(0,x.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name||e})]},t))}):(0,x.jsxs)("div",{className:"card p-8 text-center",children:[(0,x.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,x.jsx)("p",{className:"text-text-secondary",children:"No featured badges"})]}),k.length>3&&(0,x.jsxs)("p",{className:"text-center text-text-secondary text-sm mt-3",children:["+ ",k.length-3," more badges"]})]}),(0,x.jsx)("div",{className:"space-y-3",children:(0,x.jsx)("button",{onClick:()=>y("/besties"),className:"w-full btn btn-secondary",children:"\u2190 Back to Besties"})})]}),(0,x.jsx)("style",{children:"\n        /* Aura Animations */\n        @keyframes aura-shimmer {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n        @keyframes aura-glow {\n          0%, 100% {\n            box-shadow: 0 0 20px rgba(219, 39, 119, 0.3), 0 0 40px rgba(139, 92, 246, 0.2);\n          }\n          50% {\n            box-shadow: 0 0 40px rgba(219, 39, 119, 0.5), 0 0 80px rgba(139, 92, 246, 0.4);\n          }\n        }\n        @keyframes aura-pulse {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.02); }\n        }\n        @keyframes rainbow-border {\n          0% { border-color: #ff0000; }\n          16% { border-color: #ff7f00; }\n          33% { border-color: #ffff00; }\n          50% { border-color: #00ff00; }\n          66% { border-color: #0000ff; }\n          83% { border-color: #8b00ff; }\n          100% { border-color: #ff0000; }\n        }\n        @keyframes sparkle {\n          0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n          50% { opacity: 1; transform: scale(1) rotate(180deg); }\n        }\n        @keyframes shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n\n        /* Aura Classes */\n        .profile-card-aura-shimmer::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n          animation: shimmer 3s infinite;\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .profile-card-aura-glow {\n          animation: aura-glow 3s ease-in-out infinite;\n        }\n\n        .profile-card-aura-pulse {\n          animation: aura-pulse 2s ease-in-out infinite;\n        }\n\n        .profile-card-aura-rainbow {\n          border: 4px solid;\n          animation: rainbow-border 6s linear infinite;\n        }\n\n        .profile-card-aura-sparkle::after {\n          content: '\u2728';\n          position: absolute;\n          top: 10%;\n          right: 10%;\n          font-size: 2rem;\n          animation: sparkle 2s ease-in-out infinite;\n          pointer-events: none;\n          z-index: 1;\n        }\n      "})]})}},3845:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(579);const n=e=>{let{end:t,duration:s=1e3,suffix:n="",prefix:i="",className:l=""}=e;const r=parseInt(t)||0;return(0,a.jsxs)("span",{className:l,children:[i,r.toLocaleString(),n]})}}}]);
//# sourceMappingURL=321.ecf29e81.chunk.js.map