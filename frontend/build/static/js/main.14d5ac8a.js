/*! For license information please see main.14d5ac8a.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,k={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!_.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(j,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(o=e[c],c);l+=I(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,u=i+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!_.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,R(N);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function N(e,n){m=!1,g&&(g=!1,v(E),E=-1),p=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,S=null,E=-1,j=5,C=-1;function I(){return!(t.unstable_now()-C<j)}function T(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?k():(_=!1,S=null)}}else _=!1}if("function"===typeof x)k=function(){x(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=T,k=function(){P.postMessage(null)}}else k=function(){y(T,0)};function R(e){S=e,_||(_=!0,k())}function D(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,D(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(N))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(Ge){var t=Ge.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(qe){var r=qe}Reflect.construct(e,[],t)}else{try{t.call()}catch(qe){r=qe}e.call(t.prototype)}else{try{throw Error()}catch(qe){r=qe}e()}}catch(qe){if(qe&&r&&"string"===typeof qe.stack){for(var s=qe.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case N:return"Portal";case S:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(Ge){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,ke=null;function _e(e){if(e=Cs(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=Ts(t),we(e.stateNode,e.type,t))}}function Se(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ee(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function je(e,t){return e(t)}function Ce(){}var Ie=!1;function Te(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return je(e,t,n)}finally{Ie=!1,(null!==Ne||null!==ke)&&(Ce(),Ee())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=Ts(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(We){Pe=!1}function De(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Me=!1,Ue=null,Fe={onError:function(e){Oe=!0,Le=e}};function Ve(e,t,n,r,s,i,a,o,l){Oe=!1,Le=null,De.apply(Fe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ye(e){if(He(e)!==e)throw Error(i(188))}function Qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ye(s),e;if(a===r)return Ye(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ze=s.unstable_scheduleCallback,tt=s.unstable_cancelCallback,nt=s.unstable_shouldYield,rt=s.unstable_requestPaint,st=s.unstable_now,it=s.unstable_getCurrentPriorityLevel,at=s.unstable_ImmediatePriority,ot=s.unstable_UserBlockingPriority,lt=s.unstable_NormalPriority,ct=s.unstable_LowPriority,ut=s.unstable_IdlePriority,dt=null,ht=null;var ft=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pt(e)/mt|0)|0},pt=Math.log,mt=Math.LN2;var gt=64,yt=4194304;function vt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=vt(o):0!==(i&=a)&&(r=vt(i))}else 0!==(a=n&~s)?r=vt(a):0!==i&&(r=vt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ft(t)),r|=e[n],t&=~s;return r}function bt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Nt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function kt(){var e=gt;return 0===(4194240&(gt<<=1))&&(gt=64),e}function _t(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function St(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ft(t)]=n}function Et(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ft(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var jt=0;function Ct(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var It,Tt,At,Pt,Rt,Dt=!1,Ot=[],Lt=null,Mt=null,Ft=null,Vt=new Map,Bt=new Map,zt=[],qt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wt(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Vt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function Ht(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Cs(t))&&Tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Kt(e){var t=js(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ke(n)))return e.blockedOn=t,void Rt(e.priority,function(){At(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Cs(n))&&Tt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Yt(e,t,n){Gt(e)&&n.delete(t)}function Qt(){Dt=!1,null!==Lt&&Gt(Lt)&&(Lt=null),null!==Mt&&Gt(Mt)&&(Mt=null),null!==Ft&&Gt(Ft)&&(Ft=null),Vt.forEach(Yt),Bt.forEach(Yt)}function Jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Dt||(Dt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Qt)))}function Xt(e){function t(t){return Jt(t,e)}if(0<Ot.length){Jt(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Lt&&Jt(Lt,e),null!==Mt&&Jt(Mt,e),null!==Ft&&Jt(Ft,e),Vt.forEach(t),Bt.forEach(t),n=0;n<zt.length;n++)(r=zt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&null===(n=zt[0]).blockedOn;)Kt(n),null===n.blockedOn&&zt.shift()}var $t=b.ReactCurrentBatchConfig,Zt=!0;function en(e,t,n,r){var s=jt,i=$t.transition;$t.transition=null;try{jt=1,nn(e,t,n,r)}finally{jt=s,$t.transition=i}}function tn(e,t,n,r){var s=jt,i=$t.transition;$t.transition=null;try{jt=4,nn(e,t,n,r)}finally{jt=s,$t.transition=i}}function nn(e,t,n,r){if(Zt){var s=sn(e,t,n,r);if(null===s)Zr(e,t,r,rn,n),Wt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Lt=Ht(Lt,e,t,n,r,s),!0;case"dragenter":return Mt=Ht(Mt,e,t,n,r,s),!0;case"mouseover":return Ft=Ht(Ft,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vt.set(i,Ht(Vt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Bt.set(i,Ht(Bt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Wt(e,r),4&t&&-1<qt.indexOf(e)){for(;null!==s;){var i=Cs(s);if(null!==i&&It(i),null===(i=sn(e,t,n,r))&&Zr(e,t,r,rn,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var rn=null;function sn(e,t,n,r){if(rn=null,null!==(e=js(e=be(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rn=e,null}function an(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(it()){case at:return 1;case ot:return 4;case lt:case ct:return 16;case ut:return 536870912;default:return 16}default:return 16}}var on=null,ln=null,cn=null;function un(){if(cn)return cn;var e,t,n=ln,r=n.length,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return cn=s.slice(e,1<t?1-t:void 0)}function dn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function hn(){return!0}function fn(){return!1}function pn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?hn:fn,this.isPropagationStopped=fn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hn)},persist:function(){},isPersistent:hn}),t}var mn,gn,yn,vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=pn(vn),bn=M({},vn,{view:0,detail:0}),wn=pn(bn),Nn=M({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&"mousemove"===e.type?(mn=e.screenX-yn.screenX,gn=e.screenY-yn.screenY):gn=mn=0,yn=e),mn)},movementY:function(e){return"movementY"in e?e.movementY:gn}}),kn=pn(Nn),_n=pn(M({},Nn,{dataTransfer:0})),Sn=pn(M({},bn,{relatedTarget:0})),En=pn(M({},vn,{animationName:0,elapsedTime:0,pseudoElement:0})),jn=M({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cn=pn(jn),In=pn(M({},vn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pn[e])&&!!t[e]}function Dn(){return Rn}var On=M({},bn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dn,charCode:function(e){return"keypress"===e.type?dn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=pn(On),Mn=pn(M({},Nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Un=pn(M({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dn})),Fn=pn(M({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=M({},Nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bn=pn(Vn),zn=[9,13,27,32],qn=u&&"CompositionEvent"in window,Wn=null;u&&"documentMode"in document&&(Wn=document.documentMode);var Hn=u&&"TextEvent"in window&&!Wn,Kn=u&&(!qn||Wn&&8<Wn&&11>=Wn),Gn=String.fromCharCode(32),Yn=!1;function Qn(e,t){switch(e){case"keyup":return-1!==zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Xn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function er(e,t,n,r){Se(r),0<(t=ts(t,"onChange")).length&&(n=new xn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tr=null,nr=null;function rr(e){Gr(e,0)}function sr(e){if(G(Is(e)))return e}function ir(e,t){if("change"===e)return t}var ar=!1;if(u){var or;if(u){var lr="oninput"in document;if(!lr){var cr=document.createElement("div");cr.setAttribute("oninput","return;"),lr="function"===typeof cr.oninput}or=lr}else or=!1;ar=or&&(!document.documentMode||9<document.documentMode)}function ur(){tr&&(tr.detachEvent("onpropertychange",dr),nr=tr=null)}function dr(e){if("value"===e.propertyName&&sr(nr)){var t=[];er(t,nr,e,be(e)),Te(rr,t)}}function hr(e,t,n){"focusin"===e?(ur(),nr=n,(tr=t).attachEvent("onpropertychange",dr)):"focusout"===e&&ur()}function fr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return sr(nr)}function pr(e,t){if("click"===e)return sr(t)}function mr(e,t){if("input"===e||"change"===e)return sr(t)}var gr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function yr(e,t){if(gr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!gr(e[s],t[s]))return!1}return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xr(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function br(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?br(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function wr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Xe){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function kr(e){var t=wr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&br(n.ownerDocument.documentElement,n)){if(null!==r&&Nr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=xr(n,i);var a=xr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _r=u&&"documentMode"in document&&11>=document.documentMode,Sr=null,Er=null,jr=null,Cr=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Cr||null==Sr||Sr!==Y(r)||("selectionStart"in(r=Sr)&&Nr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},jr&&yr(jr,r)||(jr=r,0<(r=ts(Er,"onSelect")).length&&(t=new xn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Sr)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ar={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Pr={},Rr={};function Dr(e){if(Pr[e])return Pr[e];if(!Ar[e])return e;var t,n=Ar[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rr)return Pr[e]=n[t];return e}u&&(Rr=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);var Or=Dr("animationend"),Lr=Dr("animationiteration"),Mr=Dr("animationstart"),Ur=Dr("transitionend"),Fr=new Map,Vr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){Fr.set(e,t),l(t,[e])}for(var zr=0;zr<Vr.length;zr++){var qr=Vr[zr];Br(qr.toLowerCase(),"on"+(qr[0].toUpperCase()+qr.slice(1)))}Br(Or,"onAnimationEnd"),Br(Lr,"onAnimationIteration"),Br(Mr,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(Ur,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function Kr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Le;Oe=!1,Le=null,Me||(Me=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Gr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Kr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Kr(s,o,c),i=l}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Yr(e,t){var n=t[_s];void 0===n&&(n=t[_s]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Qr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function Xr(e){if(!e[Jr]){e[Jr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Hr.has(t)||Qr(t,!1,e),Qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Jr]||(t[Jr]=!0,Qr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(an(t)){case 1:var s=en;break;case 4:s=tn;break;default:s=nn}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=js(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=i,s=be(n),a=[];e:{var o=Fr.get(e);if(void 0!==o){var l=xn,c=e;switch(e){case"keypress":if(0===dn(n))break e;case"keydown":case"keyup":l=Ln;break;case"focusin":c="focus",l=Sn;break;case"focusout":c="blur",l=Sn;break;case"beforeblur":case"afterblur":l=Sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Un;break;case Or:case Lr:case Mr:l=En;break;case Ur:l=Fn;break;case"scroll":l=wn;break;case"wheel":l=Bn;break;case"copy":case"cut":case"paste":l=Cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ae(p,h))&&u.push(es(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!js(c)&&!c[ks])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?js(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=kn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Is(l),f=null==c?o:Is(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,js(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=ns(f))p++;for(f=0,m=h;m;m=ns(m))f++;for(;0<p-f;)u=ns(u),p--;for(;0<f-p;)h=ns(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=ns(u),h=ns(h)}u=null}else u=null;null!==l&&rs(a,o,l,u,!1),null!==c&&null!==d&&rs(a,d,c,u,!0)}if("select"===(l=(o=r?Is(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=ir;else if(Zn(o))if(ar)g=mr;else{g=fr;var y=hr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=pr);switch(g&&(g=g(e,r))?er(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Is(r):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(Sr=y,Er=r,jr=null);break;case"focusout":jr=Er=Sr=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,Ir(a,n,s);break;case"selectionchange":if(_r)break;case"keydown":case"keyup":Ir(a,n,s)}var v;if(qn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Xn?Qn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Kn&&"ko"!==n.locale&&(Xn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Xn&&(v=un()):(ln="value"in(on=s)?on.value:on.textContent,Xn=!0)),0<(y=ts(r,x)).length&&(x=new In(x,e,null,n,s),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=Jn(n))&&(x.data=v))),(v=Hn?function(e,t){switch(e){case"compositionend":return Jn(t);case"keypress":return 32!==t.which?null:(Yn=!0,Gn);case"textInput":return(e=t.data)===Gn&&Yn?null:e;default:return null}}(e,n):function(e,t){if(Xn)return"compositionend"===e||!qn&&Qn(e,t)?(e=un(),cn=ln=on=null,Xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ts(r,"onBeforeInput")).length&&(s=new In("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Gr(a,t)})}function es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ts(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ae(e,n))&&r.unshift(es(e,i,s)),null!=(i=Ae(e,t))&&r.push(es(e,i,s))),e=e.return}return r}function ns(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function rs(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,i))&&a.unshift(es(n,l,o)):s||null!=(l=Ae(n,i))&&a.push(es(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ss=/\r\n?/g,is=/\u0000|\uFFFD/g;function as(e){return("string"===typeof e?e:""+e).replace(ss,"\n").replace(is,"")}function os(e,t,n){if(t=as(t),as(e)!==t&&n)throw Error(i(425))}function ls(){}var cs=null,us=null;function ds(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var hs="function"===typeof setTimeout?setTimeout:void 0,fs="function"===typeof clearTimeout?clearTimeout:void 0,ps="function"===typeof Promise?Promise:void 0,ms="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ps?function(e){return ps.resolve(null).then(e).catch(gs)}:hs;function gs(e){setTimeout(function(){throw e})}function ys(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Xt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Xt(t)}function vs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function xs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),ws="__reactFiber$"+bs,Ns="__reactProps$"+bs,ks="__reactContainer$"+bs,_s="__reactEvents$"+bs,Ss="__reactListeners$"+bs,Es="__reactHandles$"+bs;function js(e){var t=e[ws];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[ws]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xs(e);null!==e;){if(n=e[ws])return n;e=xs(e)}return t}n=(e=n).parentNode}return null}function Cs(e){return!(e=e[ws]||e[ks])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Is(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Ts(e){return e[Ns]||null}var As=[],Ps=-1;function Rs(e){return{current:e}}function Ds(e){0>Ps||(e.current=As[Ps],As[Ps]=null,Ps--)}function Os(e,t){Ps++,As[Ps]=e.current,e.current=t}var Ls={},Ms=Rs(Ls),Us=Rs(!1),Fs=Ls;function Vs(e,t){var n=e.type.contextTypes;if(!n)return Ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zs(){Ds(Us),Ds(Ms)}function qs(e,t,n){if(Ms.current!==Ls)throw Error(i(168));Os(Ms,t),Os(Us,n)}function Ws(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Hs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,Fs=Ms.current,Os(Ms,e),Os(Us,Us.current),!0}function Ks(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ws(e,t,Fs),r.__reactInternalMemoizedMergedChildContext=e,Ds(Us),Ds(Ms),Os(Ms,e)):Ds(Us),Os(Us,n)}var Gs=null,Ys=!1,Qs=!1;function Js(e){null===Gs?Gs=[e]:Gs.push(e)}function Xs(){if(!Qs&&null!==Gs){Qs=!0;var e=0,t=jt;try{var n=Gs;for(jt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Gs=null,Ys=!1}catch(Be){throw null!==Gs&&(Gs=Gs.slice(e+1)),Ze(at,Xs),Be}finally{jt=t,Qs=!1}}return null}var $s=[],Zs=0,ei=null,ti=0,ni=[],ri=0,si=null,ii=1,ai="";function oi(e,t){$s[Zs++]=ti,$s[Zs++]=ei,ei=e,ti=t}function li(e,t,n){ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,si=e;var r=ii;e=ai;var s=32-ft(r)-1;r&=~(1<<s),n+=1;var i=32-ft(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ii=1<<32-ft(t)+s|n<<s|r,ai=i+e}else ii=1<<i|n<<s|r,ai=e}function ci(e){null!==e.return&&(oi(e,1),li(e,1,0))}function ui(e){for(;e===ei;)ei=$s[--Zs],$s[Zs]=null,ti=$s[--Zs],$s[Zs]=null;for(;e===si;)si=ni[--ri],ni[ri]=null,ai=ni[--ri],ni[ri]=null,ii=ni[--ri],ni[ri]=null}var di=null,hi=null,fi=!1,pi=null;function mi(e,t){var n=Vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function gi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,di=e,hi=vs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,di=e,hi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==si?{id:ii,overflow:ai}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Vc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,di=e,hi=null,!0);default:return!1}}function yi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function vi(e){if(fi){var t=hi;if(t){var n=t;if(!gi(e,t)){if(yi(e))throw Error(i(418));t=vs(n.nextSibling);var r=di;t&&gi(e,t)?mi(r,n):(e.flags=-4097&e.flags|2,fi=!1,di=e)}}else{if(yi(e))throw Error(i(418));e.flags=-4097&e.flags|2,fi=!1,di=e}}}function xi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;di=e}function bi(e){if(e!==di)return!1;if(!fi)return xi(e),fi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ds(e.type,e.memoizedProps)),t&&(t=hi)){if(yi(e))throw wi(),Error(i(418));for(;t;)mi(e,t),t=vs(t.nextSibling)}if(xi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){hi=vs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}hi=null}}else hi=di?vs(e.stateNode.nextSibling):null;return!0}function wi(){for(var e=hi;e;)e=vs(e.nextSibling)}function Ni(){hi=di=null,fi=!1}function ki(e){null===pi?pi=[e]:pi.push(e)}var _i=b.ReactCurrentBatchConfig;function Si(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ei(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ji(e){return(0,e._init)(e._payload)}function Ci(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=zc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Kc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===P&&ji(i)===t.type)?((r=s(t,n.props)).ref=Si(e,t,n),r.return=e,r):((r=qc(n.type,n.key,n.props,null,e.mode,r)).ref=Si(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Wc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Kc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=qc(t.type,t.key,t.props,null,e.mode,n)).ref=Si(e,null,t),n.return=e,n;case N:return(t=Gc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Wc(t,e.mode,n,null)).return=e,t;Ei(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case P:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);Ei(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case P:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);Ei(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),fi&&oi(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return fi&&oi(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),fi&&oi(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var x=f(s,m,v.value,c);if(null===x){null===m&&(m=y);break}e&&m&&null===x.alternate&&t(s,m),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,m=y}if(v.done)return n(s,m),fi&&oi(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return fi&&oi(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),fi&&oi(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ji(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=Si(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=Wc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=qc(a.type,a.key,a.props,null,r.mode,l)).ref=Si(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Gc(a,r.mode,l)).return=r,r=i}return o(r);case P:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);Ei(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Kc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Ii=Ci(!0),Ti=Ci(!1),Ai=Rs(null),Pi=null,Ri=null,Di=null;function Oi(){Di=Ri=Pi=null}function Li(e){var t=Ai.current;Ds(Ai),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ui(e,t){Pi=e,Di=Ri=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Co=!0),e.firstContext=null)}function Fi(e){var t=e._currentValue;if(Di!==e)if(e={context:e,memoizedValue:t,next:null},null===Ri){if(null===Pi)throw Error(i(308));Ri=e,Pi.dependencies={lanes:0,firstContext:e}}else Ri=Ri.next=e;return t}var Vi=null;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Bi(t)):(n.next=s.next,s.next=n),t.interleaved=n,qi(e,r)}function qi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Wi=!1;function Hi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ki(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,qi(e,n)}return null===(s=r.interleaved)?(t.next=t,Bi(r)):(t.next=s.next,s.next=t),r.interleaved=t,qi(e,n)}function Qi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Et(e,n)}}function Ji(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xi(e,t,n,r){var s=e.updateQueue;Wi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Wi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Hl|=a,e.lanes=a,e.memoizedState=d}}function $i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Zi={},ea=Rs(Zi),ta=Rs(Zi),na=Rs(Zi);function ra(e){if(e===Zi)throw Error(i(174));return e}function sa(e,t){switch(Os(na,t),Os(ta,e),Os(ea,Zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ds(ea),Os(ea,t)}function ia(){Ds(ea),Ds(ta),Ds(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Os(ta,e),Os(ea,n))}function oa(e){ta.current===e&&(Ds(ea),Ds(ta))}var la=Rs(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=b.ReactCurrentDispatcher,fa=b.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,ya=null,va=!1,xa=!1,ba=0,wa=0;function Na(){throw Error(i(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gr(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,s,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?oo:lo,e=n(r,s),xa){a=0;do{if(xa=!1,ba=0,25<=a)throw Error(i(301));a+=1,ya=ga=null,t.updateQueue=null,ha.current=co,e=n(r,s)}while(xa)}if(ha.current=ao,t=null!==ga&&null!==ga.next,pa=0,ya=ga=ma=null,va=!1,t)throw Error(i(300));return e}function Sa(){var e=0!==ba;return ba=0,e}function Ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function ja(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Ca(e,t){return"function"===typeof t?t(e):t}function Ia(e){var t=ja(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ma.lanes|=d,Hl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,gr(r,t.memoizedState)||(Co=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,ma.lanes|=a,Hl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=ja(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);gr(a,t.memoizedState)||(Co=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Pa(e,t){var n=ma,r=ja(),s=t(),a=!gr(r.memoizedState,s);if(a&&(r.memoizedState=s,Co=!0),r=r.queue,Wa(Oa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Fa(9,Da.bind(null,n,r,s,t),void 0,null),null===Ul)throw Error(i(349));0!==(30&pa)||Ra(n,t,s)}return s}function Ra(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Da(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ma(e)}function Oa(e,t,n){return n(function(){La(t)&&Ma(e)})}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch(Xe){return!0}}function Ma(e){var t=qi(e,1);null!==t&&dc(t,e,1,-1)}function Ua(e){var t=Ea();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=no.bind(null,ma,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Va(){return ja().memoizedState}function Ba(e,t,n,r){var s=Ea();ma.flags|=e,s.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function za(e,t,n,r){var s=ja();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&ka(r,a.deps))return void(s.memoizedState=Fa(t,n,i,r))}ma.flags|=e,s.memoizedState=Fa(1|t,n,i,r)}function qa(e,t){return Ba(8390656,8,e,t)}function Wa(e,t){return za(2048,8,e,t)}function Ha(e,t){return za(4,2,e,t)}function Ka(e,t){return za(4,4,e,t)}function Ga(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ya(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Ga.bind(null,t,e),n)}function Qa(){}function Ja(e,t){var n=ja();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=ja();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,Co=!0),e.memoizedState=n):(gr(n,t)||(n=kt(),ma.lanes|=n,Hl|=n,e.baseState=!0),t)}function Za(e,t){var n=jt;jt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{jt=n,fa.transition=r}}function eo(){return ja().memoizedState}function to(e,t,n){var r=uc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ro(e))so(t,n);else if(null!==(n=zi(e,t,n,r))){dc(n,e,r,cc()),io(n,t,r)}}function no(e,t,n){var r=uc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ro(e))so(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,gr(o,a)){var l=t.interleaved;return null===l?(s.next=s,Bi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(qe){}null!==(n=zi(e,t,s,r))&&(dc(n,e,r,s=cc()),io(n,t,r))}}function ro(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function so(e,t){xa=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Et(e,n)}}var ao={readContext:Fi,useCallback:Na,useContext:Na,useEffect:Na,useImperativeHandle:Na,useInsertionEffect:Na,useLayoutEffect:Na,useMemo:Na,useReducer:Na,useRef:Na,useState:Na,useDebugValue:Na,useDeferredValue:Na,useTransition:Na,useMutableSource:Na,useSyncExternalStore:Na,useId:Na,unstable_isNewReconciler:!1},oo={readContext:Fi,useCallback:function(e,t){return Ea().memoizedState=[e,void 0===t?null:t],e},useContext:Fi,useEffect:qa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=Ea();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ea();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=to.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ea().memoizedState=e},useState:Ua,useDebugValue:Qa,useDeferredValue:function(e){return Ea().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=Za.bind(null,e[1]),Ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,s=Ea();if(fi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ul)throw Error(i(349));0!==(30&pa)||Ra(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,qa(Oa.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Da.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ea(),t=Ul.identifierPrefix;if(fi){var n=ai;t=":"+t+"R"+(n=(ii&~(1<<32-ft(ii)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lo={readContext:Fi,useCallback:Ja,useContext:Fi,useEffect:Wa,useImperativeHandle:Ya,useInsertionEffect:Ha,useLayoutEffect:Ka,useMemo:Xa,useReducer:Ia,useRef:Va,useState:function(){return Ia(Ca)},useDebugValue:Qa,useDeferredValue:function(e){return $a(ja(),ga.memoizedState,e)},useTransition:function(){return[Ia(Ca)[0],ja().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Pa,useId:eo,unstable_isNewReconciler:!1},co={readContext:Fi,useCallback:Ja,useContext:Fi,useEffect:Wa,useImperativeHandle:Ya,useInsertionEffect:Ha,useLayoutEffect:Ka,useMemo:Xa,useReducer:Ta,useRef:Va,useState:function(){return Ta(Ca)},useDebugValue:Qa,useDeferredValue:function(e){var t=ja();return null===ga?t.memoizedState=e:$a(t,ga.memoizedState,e)},useTransition:function(){return[Ta(Ca)[0],ja().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Pa,useId:eo,unstable_isNewReconciler:!1};function uo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Gi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Yi(e,i,s))&&(dc(t,e,s,r),Qi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Gi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Yi(e,i,s))&&(dc(t,e,s,r),Qi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cc(),r=uc(e),s=Gi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Yi(e,s,r))&&(dc(t,e,r,n),Qi(t,e,r))}};function po(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!yr(n,r)||!yr(s,i))}function mo(e,t,n){var r=!1,s=Ls,i=t.contextType;return"object"===typeof i&&null!==i?i=Fi(i):(s=Bs(t)?Fs:Ms.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Vs(e,s):Ls),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Hi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Fi(i):(i=Bs(t)?Fs:Ms.current,s.context=Vs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ho(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&fo.enqueueReplaceState(s,s.state,null),Xi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch($e){s="\nError generating stack: "+$e.message+"\n"+$e.stack}return{value:e,source:t,stack:s,digest:null}}function xo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function bo(e,t){try{console.error(t.value)}catch(Ge){setTimeout(function(){throw Ge})}}var wo="function"===typeof WeakMap?WeakMap:Map;function No(e,t,n){(n=Gi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,ec=r),bo(0,t)},n}function ko(e,t,n){(n=Gi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){bo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){bo(0,t),"function"!==typeof r&&(null===tc?tc=new Set([this]):tc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function _o(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Dc.bind(null,e,t,n),t.then(e,e))}function So(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Eo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Gi(-1,1)).tag=2,Yi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var jo=b.ReactCurrentOwner,Co=!1;function Io(e,t,n,r){t.child=null===e?Ti(t,null,n,r):Ii(t,e.child,n,r)}function To(e,t,n,r,s){n=n.render;var i=t.ref;return Ui(t,s),r=_a(e,t,n,r,i,s),n=Sa(),null===e||Co?(fi&&n&&ci(t),t.flags|=1,Io(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Ao(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Bc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Po(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:yr)(a,r)&&e.ref===t.ref)return Zo(e,t,s)}return t.flags|=1,(e=zc(i,r)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(yr(i,r)&&e.ref===t.ref){if(Co=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Zo(e,t,s);0!==(131072&e.flags)&&(Co=!0)}}return Oo(e,t,n,r,s)}function Ro(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(zl,Bl),Bl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Os(zl,Bl),Bl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Os(zl,Bl),Bl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Os(zl,Bl),Bl|=r;return Io(e,t,s,n),t.child}function Do(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,n,r,s){var i=Bs(n)?Fs:Ms.current;return i=Vs(t,i),Ui(t,s),n=_a(e,t,n,r,i,s),r=Sa(),null===e||Co?(fi&&r&&ci(t),t.flags|=1,Io(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Lo(e,t,n,r,s){if(Bs(n)){var i=!0;Hs(t)}else i=!1;if(Ui(t,s),null===t.stateNode)$o(e,t),mo(t,n,r),yo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Fi(c):c=Vs(t,c=Bs(n)?Fs:Ms.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&go(t,a,r,c),Wi=!1;var h=t.memoizedState;a.state=h,Xi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Us.current||Wi?("function"===typeof u&&(ho(t,n,u,r),l=t.memoizedState),(o=Wi||po(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ki(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:uo(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Fi(l):l=Vs(t,l=Bs(n)?Fs:Ms.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&go(t,a,r,l),Wi=!1,h=t.memoizedState,a.state=h,Xi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Us.current||Wi?("function"===typeof f&&(ho(t,n,f,r),p=t.memoizedState),(c=Wi||po(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Mo(e,t,n,r,i,s)}function Mo(e,t,n,r,s,i){Do(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ks(t,n,!1),Zo(e,t,i);r=t.stateNode,jo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ii(t,e.child,null,i),t.child=Ii(t,null,o,i)):Io(e,t,o,i),t.memoizedState=r.state,s&&Ks(t,n,!0),t.child}function Uo(e){var t=e.stateNode;t.pendingContext?qs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&qs(0,t.context,!1),sa(e,t.containerInfo)}function Fo(e,t,n,r,s){return Ni(),ki(s),t.flags|=256,Io(e,t,n,r),t.child}var Vo,Bo,zo,qo,Wo={dehydrated:null,treeContext:null,retryLane:0};function Ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ko(e,t,n){var r,s=t.pendingProps,a=la.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Os(la,1&a),null===e)return vi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Hc(l,s,0,null),e=Wc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ho(n),t.memoizedState=Wo,e):Go(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Yo(e,t,o,r=xo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Hc({mode:"visible",children:r.children},s,0,null),(a=Wc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ii(t,e.child,null,o),t.child.memoizedState=Ho(o),t.memoizedState=Wo,a);if(0===(1&t.mode))return Yo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Yo(e,t,o,r=xo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),Co||l){if(null!==(r=Ul)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,qi(e,s),dc(r,e,s,-1))}return _c(),Yo(e,t,o,r=xo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,hi=vs(s.nextSibling),di=t,fi=!0,pi=null,null!==e&&(ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,ii=e.id,ai=e.overflow,si=t),t=Go(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=zc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=zc(r,o):(o=Wc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ho(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Wo,s}return e=(o=e.child).sibling,s=zc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Go(e,t){return(t=Hc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Yo(e,t,n,r){return null!==r&&ki(r),Ii(t,e.child,null,n),(e=Go(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Mi(e.return,t,n)}function Jo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Io(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n,t);else if(19===e.tag)Qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Os(la,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Jo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ca(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Jo(t,!0,n,null,i);break;case"together":Jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=zc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function el(e,t){if(!fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var r=t.pendingProps;switch(ui(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tl(t),null;case 1:case 17:return Bs(t.type)&&zs(),tl(t),null;case 3:return r=t.stateNode,ia(),Ds(Us),Ds(Ms),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==pi&&(mc(pi),pi=null))),Bo(e,t),tl(t),null;case 5:oa(t);var s=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)zo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return tl(t),null}if(e=ra(ea.current),bi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ws]=t,r[Ns]=a,e=0!==(1&t.mode),n){case"dialog":Yr("cancel",r),Yr("close",r);break;case"iframe":case"object":case"embed":Yr("load",r);break;case"video":case"audio":for(s=0;s<Wr.length;s++)Yr(Wr[s],r);break;case"source":Yr("error",r);break;case"img":case"image":case"link":Yr("error",r),Yr("load",r);break;case"details":Yr("toggle",r);break;case"input":J(r,a),Yr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Yr("invalid",r);break;case"textarea":se(r,a),Yr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Yr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ls)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ws]=t,e[Ns]=r,Vo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Yr("cancel",e),Yr("close",e),s=r;break;case"iframe":case"object":case"embed":Yr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Wr.length;s++)Yr(Wr[s],e);s=r;break;case"source":Yr("error",e),s=r;break;case"img":case"image":case"link":Yr("error",e),Yr("load",e),s=r;break;case"details":Yr("toggle",e),s=r;break;case"input":J(e,r),s=Q(e,r),Yr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Yr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Yr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Yr("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return tl(t),null;case 6:if(e&&null!=t.stateNode)qo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ws]=t,(a=r.nodeValue!==n)&&null!==(e=di))switch(e.tag){case 3:os(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&os(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ws]=t,t.stateNode=r}return tl(t),null;case 13:if(Ds(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(fi&&null!==hi&&0!==(1&t.mode)&&0===(128&t.flags))wi(),Ni(),t.flags|=98560,a=!1;else if(a=bi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ws]=t}else Ni(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;tl(t),a=!1}else null!==pi&&(mc(pi),pi=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===ql&&(ql=3):_c())),null!==t.updateQueue&&(t.flags|=4),tl(t),null);case 4:return ia(),Bo(e,t),null===e&&Xr(t.stateNode.containerInfo),tl(t),null;case 10:return Li(t.type._context),tl(t),null;case 19:if(Ds(la),null===(a=t.memoizedState))return tl(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)el(a,!1);else{if(0!==ql||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,el(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Os(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&st()>Xl&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),el(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!fi)return tl(t),null}else 2*st()-a.renderingStartTime>Xl&&1073741824!==n&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=st(),t.sibling=null,n=la.current,Os(la,r?1&n|2:1&n),t):(tl(t),null);case 22:case 23:return bc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Bl)&&(tl(t),6&t.subtreeFlags&&(t.flags|=8192)):tl(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function rl(e,t){switch(ui(t),t.tag){case 1:return Bs(t.type)&&zs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Ds(Us),Ds(Ms),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oa(t),null;case 13:if(Ds(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Ni()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ds(la),null;case 4:return ia(),null;case 10:return Li(t.type._context),null;case 22:case 23:return bc(),null;default:return null}}Vo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Bo=function(){},zo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=ls)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Yr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var sl=!1,il=!1,al="function"===typeof WeakSet?WeakSet:Set,ol=null;function ll(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Xe){Rc(e,t,Xe)}else n.current=null}function cl(e,t,n){try{n()}catch(Xe){Rc(e,t,Xe)}}var ul=!1;function dl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&cl(t,n,i)}s=s.next}while(s!==r)}}function hl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function pl(e){var t=e.alternate;null!==t&&(e.alternate=null,pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ws],delete t[Ns],delete t[_s],delete t[Ss],delete t[Es])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ml(e){return 5===e.tag||3===e.tag||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ls));else if(4!==r&&null!==(e=e.child))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}var xl=null,bl=!1;function wl(e,t,n){for(n=n.child;null!==n;)Nl(e,t,n),n=n.sibling}function Nl(e,t,n){if(ht&&"function"===typeof ht.onCommitFiberUnmount)try{ht.onCommitFiberUnmount(dt,n)}catch(et){}switch(n.tag){case 5:il||ll(n,t);case 6:var r=xl,s=bl;xl=null,wl(e,t,n),bl=s,null!==(xl=r)&&(bl?(e=xl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):xl.removeChild(n.stateNode));break;case 18:null!==xl&&(bl?(e=xl,n=n.stateNode,8===e.nodeType?ys(e.parentNode,n):1===e.nodeType&&ys(e,n),Xt(e)):ys(xl,n.stateNode));break;case 4:r=xl,s=bl,xl=n.stateNode.containerInfo,bl=!0,wl(e,t,n),xl=r,bl=s;break;case 0:case 11:case 14:case 15:if(!il&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&cl(n,t,a),s=s.next}while(s!==r)}wl(e,t,n);break;case 1:if(!il&&(ll(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(et){Rc(n,t,et)}wl(e,t,n);break;case 21:wl(e,t,n);break;case 22:1&n.mode?(il=(r=il)||null!==n.memoizedState,wl(e,t,n),il=r):wl(e,t,n);break;default:wl(e,t,n)}}function kl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new al),t.forEach(function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function _l(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:xl=l.stateNode,bl=!1;break e;case 3:case 4:xl=l.stateNode.containerInfo,bl=!0;break e}l=l.return}if(null===xl)throw Error(i(160));Nl(a,o,s),xl=null,bl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(qe){Rc(s,t,qe)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Sl(t,e),t=t.sibling}function Sl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_l(t,e),El(e),4&r){try{dl(3,e,e.return),hl(3,e)}catch(ze){Rc(e,e.return,ze)}try{dl(5,e,e.return)}catch(ze){Rc(e,e.return,ze)}}break;case 1:_l(t,e),El(e),512&r&&null!==n&&ll(n,n.return);break;case 5:if(_l(t,e),El(e),512&r&&null!==n&&ll(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(ze){Rc(e,e.return,ze)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(s,h):"dangerouslySetInnerHTML"===d?ue(s,h):"children"===d?de(s,h):x(s,d,h,u)}switch(l){case"input":$(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ns]=a}catch(ze){Rc(e,e.return,ze)}}break;case 6:if(_l(t,e),El(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(ze){Rc(e,e.return,ze)}}break;case 3:if(_l(t,e),El(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Xt(t.containerInfo)}catch(ze){Rc(e,e.return,ze)}break;case 4:default:_l(t,e),El(e);break;case 13:_l(t,e),El(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Jl=st())),4&r&&kl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(il=(u=il)||d,_l(t,e),il=u):_l(t,e),El(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(ol=e,d=e.child;null!==d;){for(h=ol=d;null!==ol;){switch(p=(f=ol).child,f.tag){case 0:case 11:case 14:case 15:dl(4,f,f.return);break;case 1:ll(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(ze){Rc(r,n,ze)}}break;case 5:ll(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(h);continue}}null!==p?(p.return=f,ol=p):Tl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(ze){Rc(e,e.return,ze)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(ze){Rc(e,e.return,ze)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_l(t,e),El(e),4&r&&kl(e);case 21:}}function El(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ml(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(i(161))}}catch(wt){Rc(e,e.return,wt)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function jl(e,t,n){ol=e,Cl(e,t,n)}function Cl(e,t,n){for(var r=0!==(1&e.mode);null!==ol;){var s=ol,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||sl;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||il;o=sl;var c=il;if(sl=a,(il=l)&&!c)for(ol=s;null!==ol;)l=(a=ol).child,22===a.tag&&null!==a.memoizedState?Al(s):null!==l?(l.return=a,ol=l):Al(s);for(;null!==i;)ol=i,Cl(i,t,n),i=i.sibling;ol=s,sl=o,il=c}Il(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,ol=i):Il(e)}}function Il(e){for(;null!==ol;){var t=ol;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:il||hl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!il)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:uo(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&$i(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$i(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Xt(h)}}}break;default:throw Error(i(163))}il||512&t.flags&&fl(t)}catch(f){Rc(t,t.return,f)}}if(t===e){ol=null;break}if(null!==(n=t.sibling)){n.return=t.return,ol=n;break}ol=t.return}}function Tl(e){for(;null!==ol;){var t=ol;if(t===e){ol=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ol=n;break}ol=t.return}}function Al(e){for(;null!==ol;){var t=ol;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hl(4,t)}catch(wt){Rc(t,n,wt)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(wt){Rc(t,s,wt)}}var i=t.return;try{fl(t)}catch(wt){Rc(t,i,wt)}break;case 5:var a=t.return;try{fl(t)}catch(wt){Rc(t,a,wt)}}}catch(wt){Rc(t,t.return,wt)}if(t===e){ol=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ol=o;break}ol=t.return}}var Pl,Rl=Math.ceil,Dl=b.ReactCurrentDispatcher,Ol=b.ReactCurrentOwner,Ll=b.ReactCurrentBatchConfig,Ml=0,Ul=null,Fl=null,Vl=0,Bl=0,zl=Rs(0),ql=0,Wl=null,Hl=0,Kl=0,Gl=0,Yl=null,Ql=null,Jl=0,Xl=1/0,$l=null,Zl=!1,ec=null,tc=null,nc=!1,rc=null,sc=0,ic=0,ac=null,oc=-1,lc=0;function cc(){return 0!==(6&Ml)?st():-1!==oc?oc:oc=st()}function uc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Vl?Vl&-Vl:null!==_i.transition?(0===lc&&(lc=kt()),lc):0!==(e=jt)?e:e=void 0===(e=window.event)?16:an(e.type)}function dc(e,t,n,r){if(50<ic)throw ic=0,ac=null,Error(i(185));St(e,n,r),0!==(2&Ml)&&e===Ul||(e===Ul&&(0===(2&Ml)&&(Kl|=n),4===ql&&gc(e,Vl)),hc(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Xl=st()+500,Ys&&Xs()))}function hc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-ft(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=bt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=xt(e,e===Ul?Vl:0);if(0===r)null!==n&&tt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&tt(n),1===t)0===e.tag?function(e){Ys=!0,Js(e)}(yc.bind(null,e)):Js(yc.bind(null,e)),ms(function(){0===(6&Ml)&&Xs()}),n=null;else{switch(Ct(r)){case 1:n=at;break;case 4:n=ot;break;case 16:default:n=lt;break;case 536870912:n=ut}n=Uc(n,fc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fc(e,t){if(oc=-1,lc=0,0!==(6&Ml))throw Error(i(327));var n=e.callbackNode;if(Ac()&&e.callbackNode!==n)return null;var r=xt(e,e===Ul?Vl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Sc(e,r);else{t=r;var s=Ml;Ml|=2;var a=kc();for(Ul===e&&Vl===t||($l=null,Xl=st()+500,wc(e,t));;)try{jc();break}catch(et){Nc(e,et)}Oi(),Dl.current=a,Ml=s,null!==Fl?t=0:(Ul=null,Vl=0,t=ql)}if(0!==t){if(2===t&&(0!==(s=Nt(e))&&(r=s,t=pc(e,s))),1===t)throw n=Wl,wc(e,0),gc(e,r),hc(e,st()),n;if(6===t)gc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=Sc(e,r))&&(0!==(a=Nt(e))&&(r=a,t=pc(e,a))),1===t))throw n=Wl,wc(e,0),gc(e,r),hc(e,st()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Tc(e,Ql,$l);break;case 3:if(gc(e,r),(130023424&r)===r&&10<(t=Jl+500-st())){if(0!==xt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){cc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hs(Tc.bind(null,e,Ql,$l),t);break}Tc(e,Ql,$l);break;case 4:if(gc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ft(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=st()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rl(r/1960))-r)){e.timeoutHandle=hs(Tc.bind(null,e,Ql,$l),r);break}Tc(e,Ql,$l);break;default:throw Error(i(329))}}}return hc(e,st()),e.callbackNode===n?fc.bind(null,e):null}function pc(e,t){var n=Yl;return e.current.memoizedState.isDehydrated&&(wc(e,t).flags|=256),2!==(e=Sc(e,t))&&(t=Ql,Ql=n,null!==t&&mc(t)),e}function mc(e){null===Ql?Ql=e:Ql.push.apply(Ql,e)}function gc(e,t){for(t&=~Gl,t&=~Kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ft(t),r=1<<n;e[n]=-1,t&=~r}}function yc(e){if(0!==(6&Ml))throw Error(i(327));Ac();var t=xt(e,0);if(0===(1&t))return hc(e,st()),null;var n=Sc(e,t);if(0!==e.tag&&2===n){var r=Nt(e);0!==r&&(t=r,n=pc(e,r))}if(1===n)throw n=Wl,wc(e,0),gc(e,t),hc(e,st()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Ql,$l),hc(e,st()),null}function vc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Xl=st()+500,Ys&&Xs())}}function xc(e){null!==rc&&0===rc.tag&&0===(6&Ml)&&Ac();var t=Ml;Ml|=1;var n=Ll.transition,r=jt;try{if(Ll.transition=null,jt=1,e)return e()}finally{jt=r,Ll.transition=n,0===(6&(Ml=t))&&Xs()}}function bc(){Bl=zl.current,Ds(zl)}function wc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,fs(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(ui(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&zs();break;case 3:ia(),Ds(Us),Ds(Ms),da();break;case 5:oa(r);break;case 4:ia();break;case 13:case 19:Ds(la);break;case 10:Li(r.type._context);break;case 22:case 23:bc()}n=n.return}if(Ul=e,Fl=e=zc(e.current,null),Vl=Bl=t,ql=0,Wl=null,Gl=Kl=Hl=0,Ql=Yl=null,null!==Vi){for(t=0;t<Vi.length;t++)if(null!==(r=(n=Vi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Vi=null}return e}function Nc(e,t){for(;;){var n=Fl;try{if(Oi(),ha.current=ao,va){for(var r=ma.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}va=!1}if(pa=0,ya=ga=ma=null,xa=!1,ba=0,Ol.current=null,null===n||null===n.return){ql=1,Wl=t,Fl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Vl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=So(o);if(null!==p){p.flags&=-257,Eo(p,o,l,0,t),1&p.mode&&_o(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){_o(a,u,t),_c();break e}c=Error(i(426))}else if(fi&&1&l.mode){var y=So(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Eo(y,o,l,0,t),ki(vo(c,l));break e}}a=c=vo(c,l),4!==ql&&(ql=2),null===Yl?Yl=[a]:Yl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ji(a,No(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===tc||!tc.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Ji(a,ko(a,l,t));break e}}a=a.return}while(null!==a)}Ic(n)}catch(b){t=b,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function kc(){var e=Dl.current;return Dl.current=ao,null===e?ao:e}function _c(){0!==ql&&3!==ql&&2!==ql||(ql=4),null===Ul||0===(268435455&Hl)&&0===(268435455&Kl)||gc(Ul,Vl)}function Sc(e,t){var n=Ml;Ml|=2;var r=kc();for(Ul===e&&Vl===t||($l=null,wc(e,t));;)try{Ec();break}catch(Be){Nc(e,Be)}if(Oi(),Ml=n,Dl.current=r,null!==Fl)throw Error(i(261));return Ul=null,Vl=0,ql}function Ec(){for(;null!==Fl;)Cc(Fl)}function jc(){for(;null!==Fl&&!nt();)Cc(Fl)}function Cc(e){var t=Pl(e.alternate,e,Bl);e.memoizedProps=e.pendingProps,null===t?Ic(e):Fl=t,Ol.current=null}function Ic(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=nl(n,t,Bl)))return void(Fl=n)}else{if(null!==(n=rl(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return ql=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===ql&&(ql=5)}function Tc(e,t,n){var r=jt,s=Ll.transition;try{Ll.transition=null,jt=1,function(e,t,n,r){do{Ac()}while(null!==rc);if(0!==(6&Ml))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ft(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Ul&&(Fl=Ul=null,Vl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||nc||(nc=!0,Uc(lt,function(){return Ac(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ll.transition,Ll.transition=null;var o=jt;jt=1;var l=Ml;Ml|=4,Ol.current=null,function(e,t){if(cs=Zt,Nr(e=wr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Ut){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(us={focusedElem:e,selectionRange:n},Zt=!1,ol=t;null!==ol;)if(e=(t=ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ol=e;else for(;null!==ol;){t=ol;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:uo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(Ut){Rc(t,t.return,Ut)}if(null!==(e=t.sibling)){e.return=t.return,ol=e;break}ol=t.return}m=ul,ul=!1}(e,n),Sl(n,e),kr(us),Zt=!!cs,us=cs=null,e.current=n,jl(n,e,s),rt(),Ml=l,jt=o,Ll.transition=a}else e.current=n;if(nc&&(nc=!1,rc=e,sc=s),a=e.pendingLanes,0===a&&(tc=null),function(e){if(ht&&"function"===typeof ht.onCommitFiberRoot)try{ht.onCommitFiberRoot(dt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),hc(e,st()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,e=ec,ec=null,e;0!==(1&sc)&&0!==e.tag&&Ac(),a=e.pendingLanes,0!==(1&a)?e===ac?ic++:(ic=0,ac=e):ic=0,Xs()}(e,t,n,r)}finally{Ll.transition=s,jt=r}return null}function Ac(){if(null!==rc){var e=Ct(sc),t=Ll.transition,n=jt;try{if(Ll.transition=null,jt=16>e?16:e,null===rc)var r=!1;else{if(e=rc,rc=null,sc=0,0!==(6&Ml))throw Error(i(331));var s=Ml;for(Ml|=4,ol=e.current;null!==ol;){var a=ol,o=a.child;if(0!==(16&ol.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ol=u;null!==ol;){var d=ol;switch(d.tag){case 0:case 11:case 15:dl(8,d,a)}var h=d.child;if(null!==h)h.return=d,ol=h;else for(;null!==ol;){var f=(d=ol).sibling,p=d.return;if(pl(d),d===u){ol=null;break}if(null!==f){f.return=p,ol=f;break}ol=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ol=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ol=o;else e:for(;null!==ol;){if(0!==(2048&(a=ol).flags))switch(a.tag){case 0:case 11:case 15:dl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ol=v;break e}ol=a.return}}var x=e.current;for(ol=x;null!==ol;){var b=(o=ol).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,ol=b;else e:for(o=x;null!==ol;){if(0!==(2048&(l=ol).flags))try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(N){Rc(l,l.return,N)}if(l===o){ol=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ol=w;break e}ol=l.return}}if(Ml=s,Xs(),ht&&"function"===typeof ht.onPostCommitFiberRoot)try{ht.onPostCommitFiberRoot(dt,e)}catch(N){}r=!0}return r}finally{jt=n,Ll.transition=t}}return!1}function Pc(e,t,n){e=Yi(e,t=No(0,t=vo(n,t),1),1),t=cc(),null!==e&&(St(e,1,t),hc(e,t))}function Rc(e,t,n){if(3===e.tag)Pc(e,e,n);else for(;null!==t;){if(3===t.tag){Pc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tc||!tc.has(r))){t=Yi(t,e=ko(t,e=vo(n,e),1),1),e=cc(),null!==t&&(St(t,1,e),hc(t,e));break}}t=t.return}}function Dc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cc(),e.pingedLanes|=e.suspendedLanes&n,Ul===e&&(Vl&n)===n&&(4===ql||3===ql&&(130023424&Vl)===Vl&&500>st()-Jl?wc(e,0):Gl|=n),hc(e,t)}function Oc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=yt,0===(130023424&(yt<<=1))&&(yt=4194304)));var n=cc();null!==(e=qi(e,t))&&(St(e,t,n),hc(e,n))}function Lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Oc(e,n)}function Uc(e,t){return Ze(e,t)}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vc(e,t,n,r){return new Fc(e,t,n,r)}function Bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zc(e,t){var n=e.alternate;return null===n?((n=Vc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Bc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Wc(n.children,s,a,t);case _:o=8,s|=8;break;case S:return(e=Vc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case I:return(e=Vc(13,n,t,s)).elementType=I,e.lanes=a,e;case T:return(e=Vc(19,n,t,s)).elementType=T,e.lanes=a,e;case R:return Hc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case j:o=9;break e;case C:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Vc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Wc(e,t,n,r){return(e=Vc(7,e,r,t)).lanes=n,e}function Hc(e,t,n,r){return(e=Vc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Kc(e,t,n){return(e=Vc(6,e,null,t)).lanes=n,e}function Gc(e,t,n){return(t=Vc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_t(0),this.expirationTimes=_t(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qc(e,t,n,r,s,i,a,o,l){return e=new Yc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Vc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hi(i),e}function Jc(e){if(!e)return Ls;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Bs(n))return Ws(e,n,t)}return t}function Xc(e,t,n,r,s,i,a,o,l){return(e=Qc(n,r,!0,e,0,i,0,o,l)).context=Jc(null),n=e.current,(i=Gi(r=cc(),s=uc(n))).callback=void 0!==t&&null!==t?t:null,Yi(n,i,s),e.current.lanes=s,St(e,s,r),hc(e,r),e}function $c(e,t,n,r){var s=t.current,i=cc(),a=uc(s);return n=Jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Gi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Yi(s,t,a))&&(dc(e,s,a,i),Qi(e,s,a)),a}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function eu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tu(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}Pl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Us.current)Co=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:Uo(t),Ni();break;case 5:aa(t);break;case 1:Bs(t.type)&&Hs(t);break;case 4:sa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Os(Ai,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Os(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ko(e,t,n):(Os(la,1&la.current),null!==(e=Zo(e,t,n))?e.sibling:null);Os(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Xo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Os(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n)}return Zo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,fi&&0!==(1048576&t.flags)&&li(t,ti,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$o(e,t),e=t.pendingProps;var s=Vs(t,Ms.current);Ui(t,n),s=_a(null,t,r,e,s,n);var a=Sa();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bs(r)?(a=!0,Hs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Hi(t),s.updater=fo,t.stateNode=s,s._reactInternals=t,yo(t,r,e,n),t=Mo(null,t,r,!0,a,n)):(t.tag=0,fi&&a&&ci(t),Io(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($o(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=uo(r,e),s){case 0:t=Oo(null,t,r,e,n);break e;case 1:t=Lo(null,t,r,e,n);break e;case 11:t=To(null,t,r,e,n);break e;case 14:t=Ao(null,t,r,uo(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Oo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 1:return r=t.type,s=t.pendingProps,Lo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 3:e:{if(Uo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Ki(e,t),Xi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Fo(e,t,r,n,s=vo(Error(i(423)),t));break e}if(r!==s){t=Fo(e,t,r,n,s=vo(Error(i(424)),t));break e}for(hi=vs(t.stateNode.containerInfo.firstChild),di=t,fi=!0,pi=null,n=Ti(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ni(),r===s){t=Zo(e,t,n);break e}Io(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&vi(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ds(r,s)?o=null:null!==a&&ds(r,a)&&(t.flags|=32),Do(e,t),Io(e,t,o,n),t.child;case 6:return null===e&&vi(t),null;case 13:return Ko(e,t,n);case 4:return sa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ii(t,null,r,n):Io(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,To(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Os(Ai,r._currentValue),r._currentValue=o,null!==a)if(gr(a.value,o)){if(a.children===s.children&&!Us.current){t=Zo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Gi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Mi(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Mi(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Io(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ui(t,n),r=r(s=Fi(s)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return s=uo(r=t.type,t.pendingProps),Ao(e,t,r,s=uo(r.type,s),n);case 15:return Po(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:uo(r,s),$o(e,t),t.tag=1,Bs(r)?(e=!0,Hs(t)):e=!1,Ui(t,n),mo(t,r,s),yo(t,r,s,n),Mo(null,t,r,!0,e,n);case 19:return Xo(e,t,n);case 22:return Ro(e,t,n)}throw Error(i(156,t.tag))};var nu="function"===typeof reportError?reportError:function(e){console.error(e)};function ru(e){this._internalRoot=e}function su(e){this._internalRoot=e}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function au(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(){}function lu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Zc(a);o.call(e)}}$c(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Zc(a);i.call(e)}}var a=Xc(t,r,e,0,null,!1,0,"",ou);return e._reactRootContainer=a,e[ks]=a.current,Xr(8===e.nodeType?e.parentNode:e),xc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Zc(l);o.call(e)}}var l=Qc(e,0,!1,null,0,!1,0,"",ou);return e._reactRootContainer=l,e[ks]=l.current,Xr(8===e.nodeType?e.parentNode:e),xc(function(){$c(t,l,n,r)}),l}(n,t,e,s,r);return Zc(a)}su.prototype.render=ru.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));$c(e,t,null,null)},su.prototype.unmount=ru.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;xc(function(){$c(null,e,null,null)}),t[ks]=null}},su.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&0!==t&&t<zt[n].priority;n++);zt.splice(n,0,e),0===n&&Kt(e)}},It=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vt(t.pendingLanes);0!==n&&(Et(t,1|n),hc(t,st()),0===(6&Ml)&&(Xl=st()+500,Xs()))}break;case 13:xc(function(){var t=qi(e,1);if(null!==t){var n=cc();dc(t,e,1,n)}}),tu(e,1)}},Tt=function(e){if(13===e.tag){var t=qi(e,134217728);if(null!==t)dc(t,e,134217728,cc());tu(e,134217728)}},At=function(e){if(13===e.tag){var t=uc(e),n=qi(e,t);if(null!==n)dc(n,e,t,cc());tu(e,t)}},Pt=function(){return jt},Rt=function(e,t){var n=jt;try{return jt=e,t()}finally{jt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ts(r);if(!s)throw Error(i(90));G(r),$(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=vc,Ce=xc;var cu={usingClientEntryPoint:!1,Events:[Cs,Is,Ts,Se,Ee,vc]},uu={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},du={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{dt=hu.inject(du),ht=hu}catch(We){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!iu(e))throw Error(i(299));var n=!1,r="",s=nu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Qc(e,1,!1,null,0,n,0,r,s),e[ks]=t.current,Xr(8===e.nodeType?e.parentNode:e),new ru(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return xc(e)},t.hydrate=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!iu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=nu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Xc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ks]=t.current,Xr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new su(t)},t.render=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!au(e))throw Error(i(40));return!!e._reactRootContainer&&(xc(function(){lu(null,null,e,!1,function(){e._reactRootContainer=null,e[ks]=null})}),!0)},t.unstable_batchedUpdates=vc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!au(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return lu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Be){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Be){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:t})}function x(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let b={get action(){return p},get location(){return e(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),m=e,()=>{i.removeEventListener(l,v),m=null}},createHref:e=>t(i,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let s=h(b.location,e,t);n&&n(s,e),g=y()+1;let o=d(s,g),l=b.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,t){p=r.Replace;let s=h(b.location,e,t);n&&n(s,e),g=y();let i=d(s,g),o=b.createHref(s);u.replaceState(i,"",o),a&&m&&m({action:p,location:b.location,delta:0})},go:e=>u.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let s=P(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=A(s);a=I(i[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=V([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))s(e,t,r);else s(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=b(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,N=3,k=2,_=1,S=10,E=-2,j=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=E),t&&(r+=k),n.filter(e=>!j(e)).reduce((e,t)=>e+(w.test(t)?N:""===t?_:S),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:V([i,u.pathname]),pathnameBase:B(V([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=V([i,u.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function D(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:i=""}="string"===typeof e?p(e):e;if(r)if(a=r,R.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),u(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?O(r.substring(1),"/"):O(r,t)}else n=t;var a;return{pathname:n,search:z(s),hash:q(i)}}function O(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),L("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),L("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),L("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=D(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const V=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],K=(new Set(H),["get",...H]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const Y=s.createContext(null);const Q=s.createContext(null);const J=s.createContext(null);const X=s.createContext(null);const $=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext(X)}function te(){return ee()||c(!1),s.useContext(X).location}function ne(e){s.useContext(J).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext($);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=s.useRef(!1);return ne(()=>{n.current=!0}),s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},s)))},[e,t])}():function(){ee()||c(!1);let e=s.useContext(Y),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:i}=s.useContext($),{pathname:a}=te(),o=JSON.stringify(U(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return ne(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=F(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:V([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:i}=s.useContext($),{pathname:a}=te(),o=JSON.stringify(U(i,r.v7_relativeSplatPath));return s.useMemo(()=>F(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,i){ee()||c(!1);let{navigator:a}=s.useContext(J),{matches:o}=s.useContext($),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=y(e,{pathname:v});let b=ue(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:V([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&b?s.createElement(X.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},b):b}function ae(){let e=function(){var e;let t=s.useContext(Z),n=pe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const oe=s.createElement(ae,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement($.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Y);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement($.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,c=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||oe,u&&(d<0&&0===i?(p="route-fallback",!1||ge[p]||(ge[p]=!0),c=!0,f=null):d===i&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:c?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=s.useContext(Y);return t||c(!1),t}function pe(e){let t=s.useContext(Q);return t||c(!1),t}function me(e){let t=function(){let e=s.useContext($);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const ge={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||c(!1);let{future:a,static:o}=s.useContext(J),{matches:l}=s.useContext($),{pathname:u}=te(),d=re(),h=F(t,U(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:i}),[d,f,i,n,r]),null}function xe(e){c(!1)}function be(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;ee()&&c(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:d,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,x=s.useMemo(()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,f,m,g,y,v,a]);return null==x?null:s.createElement(J.Provider,{value:h},s.createElement(X.Provider,{children:n,value:x}))}function we(e){let{children:t,location:n}=e;return ie(Ne(t),n)}new Promise(()=>{});s.Component;function Ne(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,Ne(e.props.children,i));e.type!==xe&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ne(e.props.children,i)),n.push(a)}),n}var ke=n(950),_e=n.t(ke,2);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const je=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Be){}new Map;const Ce=i.startTransition;_e.flushSync,i.useId;function Ie(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=a.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},p=s.useCallback(e=>{d&&Ce?Ce(()=>u(e)):u(e)},[u,d]);return s.useLayoutEffect(()=>l.listen(p),[l,p]),s.useEffect(()=>ye(r),[r]),s.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=Ee(e,je),{basename:g}=s.useContext(J),y=!1;if("string"===typeof d&&Ae.test(d)&&(n=d,Te))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(Be){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||c(!1);let{basename:r,navigator:i}=s.useContext(J),{hash:a,pathname:o,search:l}=se(e,{relative:n}),u=o;return"/"!==r&&(u="/"===o?r:V([r,o])),i.createHref({pathname:u,search:l,hash:a})}(d,{relative:i}),x=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=se(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});return s.createElement("a",Se({},m,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:t,target:u}))});var Re,De;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Re||(Re={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));function Oe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Me(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}function Ue(e,t,n){return(t=Me(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach(function(t){Ue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Be={data:""},ze=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Be},qe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,We=/\/\*[^]*?\*\/|  +/g,He=/\n+/g,Ke=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?Ke(a,i):i+"{"+Ke(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=Ke(a,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ke.p?Ke.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Ge={},Ye=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Ye(e[n]);return t}return e},Qe=(e,t,n,r,s)=>{let i=Ye(e),a=Ge[i]||(Ge[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!Ge[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=qe.exec(e.replace(We,""));)t[4]?r.shift():t[3]?(n=t[3].replace(He," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(He," ").trim();return r[0]})(e);Ge[a]=Ke(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Ge.g?Ge.g:null;return n&&(Ge.g=Ge[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Ge[a],t,r,o),a};function Je(e){let t=this||{},n=e.call?e(t.p):e;return Qe(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":Ke(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,ze(t.target),t.g,t.o,t.k)}Je.bind({g:1});let Xe,$e,Ze,et=Je.bind({k:1});function tt(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:$e&&$e()},o),n.o=/ *go\d+/.test(l),o.className=Je.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),Ze&&c[0]&&Ze(o),Xe(c,o)}return t?t(s):s}}var nt,rt,st,it,at,ot,lt,ct,ut,dt,ht,ft,pt,mt,gt,yt,vt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,xt=(()=>{let e=0;return()=>(++e).toString()})(),bt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),wt="default",Nt=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return Ve(Ve({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return Ve(Ve({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Ve(Ve({},e),t.toast):e)});case 2:let{toast:r}=t;return Nt(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return Ve(Ve({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?Ve(Ve({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Ve(Ve({},e),{},{toasts:[]}):Ve(Ve({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Ve(Ve({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return Ve(Ve({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Ve(Ve({},e),{},{pauseDuration:e.pauseDuration+i}))})}},kt=[],_t={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},St={},Et=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;St[t]=Nt(St[t]||_t,e),kt.forEach(e=>{let[n,r]=e;n===t&&r(St[t])})},jt=e=>Object.keys(St).forEach(t=>Et(e,t)),Ct=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return t=>{Et(t,e)}},It={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Tt=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return Ve(Ve({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||xt()})}(t,e,n);return Ct(r.toasterId||(e=>Object.keys(St).find(t=>St[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},At=(e,t)=>Tt("blank")(e,t);At.error=Tt("error"),At.success=Tt("success"),At.loading=Tt("loading"),At.custom=Tt("custom"),At.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Ct(t)(n):jt(n)},At.dismissAll=e=>At.dismiss(void 0,e),At.remove=(e,t)=>{let n={type:4,toastId:e};t?Ct(t)(n):jt(n)},At.removeAll=e=>At.remove(void 0,e),At.promise=(e,t,n)=>{let r=At.loading(t.loading,Ve(Ve({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?vt(t.success,e):void 0;return s?At.success(s,Ve(Ve({id:r},n),null==n?void 0:n.success)):At.dismiss(r),e}).catch(e=>{let s=t.error?vt(t.error,e):void 0;s?At.error(s,Ve(Ve({id:r},n),null==n?void 0:n.error)):At.dismiss(r)}),e};var Pt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt,[n,r]=(0,s.useState)(St[t]||_t),i=(0,s.useRef)(St[t]);(0,s.useEffect)(()=>(i.current!==St[t]&&r(St[t]),kt.push([t,r]),()=>{let e=kt.findIndex(e=>{let[n]=e;return n===t});e>-1&&kt.splice(e,1)}),[t]);let a=n.toasts.map(t=>{var n,r,s;return Ve(Ve(Ve(Ve({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||It[t.type],style:Ve(Ve(Ve({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return Ve(Ve({},n),{},{toasts:a})}(e,t),i=(0,s.useRef)(new Map).current,a=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,n)},[]);(0,s.useEffect)(()=>{if(r)return;let e=Date.now(),s=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(!(r<0))return setTimeout(()=>At.dismiss(n.id,t),r);n.visible&&At.dismiss(n.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[n,r,t]);let o=(0,s.useCallback)(Ct(t),[t]),l=(0,s.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,s.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,s.useCallback)(()=>{r&&o({type:6,time:Date.now()})},[r,o]),d=(0,s.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:i}=t||{},a=n.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[n]);return(0,s.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},Rt=et(nt||(nt=Oe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Dt=et(rt||(rt=Oe(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Ot=et(st||(st=Oe(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Lt=tt("div")(it||(it=Oe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Rt,Dt,e=>e.secondary||"#fff",Ot),Mt=et(at||(at=Oe(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Ut=tt("div")(ot||(ot=Oe(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Mt),Ft=et(lt||(lt=Oe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Vt=et(ct||(ct=Oe(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Bt=tt("div")(ut||(ut=Oe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Ft,Vt,e=>e.secondary||"#fff"),zt=tt("div")(dt||(dt=Oe(["\n  position: absolute;\n"]))),qt=tt("div")(ht||(ht=Oe(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Wt=et(ft||(ft=Oe(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Ht=tt("div")(pt||(pt=Oe(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Wt),Kt=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:i}=t;return void 0!==n?"string"==typeof n?s.createElement(Ht,null,n):n:"blank"===r?null:s.createElement(qt,null,s.createElement(Ut,Ve({},i)),"loading"!==r&&s.createElement(zt,null,"error"===r?s.createElement(Lt,Ve({},i)):s.createElement(Bt,Ve({},i))))},Gt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Yt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Qt=tt("div")(mt||(mt=Oe(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Jt=tt("div")(gt||(gt=Oe(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Xt=s.memo(e=>{let{toast:t,position:n,style:r,children:i}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=bt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Gt(n),Yt(n)];return{animation:t?"".concat(et(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(et(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=s.createElement(Kt,{toast:t}),l=s.createElement(Jt,Ve({},t.ariaProps),vt(t.message,t));return s.createElement(Qt,{className:t.className,style:Ve(Ve(Ve({},a),r),t.style)},"function"==typeof i?i({icon:o,message:l}):s.createElement(s.Fragment,null,o,l))});!function(e,t,n,r){Ke.p=t,Xe=e,$e=n,Ze=r}(s.createElement);var $t=e=>{let{id:t,className:n,style:r,onHeightUpdate:i,children:a}=e,o=s.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return s.createElement("div",{ref:o,className:n,style:r},a)},Zt=Je(yt||(yt=Oe(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),en=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:i,children:a,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:u,handlers:d}=Pt(r,o);return s.createElement("div",{"data-rht-toaster":o||"",style:Ve({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Ve(Ve({left:0,right:0,display:"flex",position:"absolute",transition:bt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(r,d.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:n}));return s.createElement($t,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?Zt:"",style:o},"custom"===e.type?vt(e.message,e):a?a(e):s.createElement(Xt,{toast:e,position:r}))}))},tn=At;const nn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},rn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new sn;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class sn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const an=function(e){return function(e){const t=nn(e);return rn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},on=function(e){try{return rn.decodeString(e,!0)}catch(Be){console.error("base64Decode failed: ",Be)}return null};const ln=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,cn=()=>{try{return ln()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAtcxae1F5cJljA2q8JbmcvYuXpxS_EGhw",REACT_APP_FIREBASE_AUTH_DOMAIN:"bestiesapp.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"bestiesapp",REACT_APP_FIREBASE_STORAGE_BUCKET:"bestiesapp.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"816425843858",REACT_APP_FIREBASE_APP_ID:"1:816425843858:web:60eaaa2ddd094b6e797a4b",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCegUYW6OZ2rVE3V31ewJbzkhfrPbKzFgk",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51SR1CfEelNu8QcRAALMompJfse2B7tXODHYIpbcRcawyAN3fMi75mMAXpTyP66c444ydSE0Y01yczaw64TgyKW85005IvwbRX2"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Be){return}const t=e&&on(e[1]);return t&&JSON.parse(t)})()}catch(Be){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Be))}},un=e=>{var t,n;return null===(n=null===(t=cn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},dn=e=>{const t=un(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},hn=()=>{var e;return null===(e=cn())||void 0===e?void 0:e.config},fn=e=>{var t;return null===(t=cn())||void 0===t?void 0:t["_".concat(e)]};class pn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function mn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[an(JSON.stringify({alg:"none",type:"JWT"})),an(JSON.stringify(i)),""].join(".")}function gn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yn(){return!function(){var e;const t=null===(e=cn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Be){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vn(){try{return"object"===typeof indexedDB}catch(Be){return!1}}function xn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class bn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(Nn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new bn(n,i,t)}}const Nn=/\{\$([^}]+)}/g;function kn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(_n(n)&&_n(i)){if(!kn(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _n(e){return null!==e&&"object"===typeof e}function Sn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function En(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function jn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Cn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=In),void 0===r.error&&(r.error=In),void 0===r.complete&&(r.complete=In);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Be){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Be){"undefined"!==typeof console&&console.error&&console.error(Be)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}function Tn(e){return e&&e._delegate?e._delegate:e}class An{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pn="[DEFAULT]";class Rn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new pn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Be){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Be){if(r)return null;throw Be}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch(Be){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Be){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Pn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Dn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const On=[];var Ln;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ln||(Ln={}));const Mn={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},Un=Ln.INFO,Fn={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},Vn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Fn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Bn{constructor(e){this.name=e,this._logLevel=Un,this._logHandler=Vn,this._userLogHandler=null,On.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Mn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...t),this._logHandler(this,Ln.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...t),this._logHandler(this,Ln.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...t),this._logHandler(this,Ln.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...t),this._logHandler(this,Ln.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...t),this._logHandler(this,Ln.ERROR,...t)}}let zn,qn;const Wn=new WeakMap,Hn=new WeakMap,Kn=new WeakMap,Gn=new WeakMap,Yn=new WeakMap;let Qn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Hn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Kn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $n(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Jn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qn||(qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zn(this),n),$n(Wn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $n(e.apply(Zn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Zn(this),t,...r);return Kn.set(i,t.sort?t.sort():[t]),$n(i)}}function Xn(e){return"function"===typeof e?Jn(e):(e instanceof IDBTransaction&&function(e){if(Hn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Hn.set(e,t)}(e),t=e,(zn||(zn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Qn):e);var t}function $n(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t($n(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Wn.set(t,e)}).catch(()=>{}),Yn.set(t,e),t}(e);if(Gn.has(e))return Gn.get(e);const t=Xn(e);return t!==e&&(Gn.set(e,t),Yn.set(t,e)),t}const Zn=e=>Yn.get(e);function er(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=$n(a);return r&&a.addEventListener("upgradeneeded",e=>{r($n(a.result),e.oldVersion,e.newVersion,$n(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function tr(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),$n(n).then(()=>{})}const nr=["get","getKey","getAll","getAllKeys","count"],rr=["put","add","delete","clear"],sr=new Map;function ir(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(sr.get(t))return sr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=rr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!nr.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return sr.set(t,i),i}Qn=(e=>Ve(Ve({},e),{},{get:(t,n,r)=>ir(t,n)||e.get(t,n,r),has:(t,n)=>!!ir(t,n)||e.has(t,n)}))(Qn);class ar{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const or="@firebase/app",lr="0.10.13",cr=new Bn("@firebase/app"),ur="@firebase/app-compat",dr="@firebase/analytics-compat",hr="@firebase/analytics",fr="@firebase/app-check-compat",pr="@firebase/app-check",mr="@firebase/auth",gr="@firebase/auth-compat",yr="@firebase/database",vr="@firebase/data-connect",xr="@firebase/database-compat",br="@firebase/functions",wr="@firebase/functions-compat",Nr="@firebase/installations",kr="@firebase/installations-compat",_r="@firebase/messaging",Sr="@firebase/messaging-compat",Er="@firebase/performance",jr="@firebase/performance-compat",Cr="@firebase/remote-config",Ir="@firebase/remote-config-compat",Tr="@firebase/storage",Ar="@firebase/storage-compat",Pr="@firebase/firestore",Rr="@firebase/vertexai-preview",Dr="@firebase/firestore-compat",Or="firebase",Lr="[DEFAULT]",Mr={[or]:"fire-core",[ur]:"fire-core-compat",[hr]:"fire-analytics",[dr]:"fire-analytics-compat",[pr]:"fire-app-check",[fr]:"fire-app-check-compat",[mr]:"fire-auth",[gr]:"fire-auth-compat",[yr]:"fire-rtdb",[vr]:"fire-data-connect",[xr]:"fire-rtdb-compat",[br]:"fire-fn",[wr]:"fire-fn-compat",[Nr]:"fire-iid",[kr]:"fire-iid-compat",[_r]:"fire-fcm",[Sr]:"fire-fcm-compat",[Er]:"fire-perf",[jr]:"fire-perf-compat",[Cr]:"fire-rc",[Ir]:"fire-rc-compat",[Tr]:"fire-gcs",[Ar]:"fire-gcs-compat",[Pr]:"fire-fst",[Dr]:"fire-fst-compat",[Rr]:"fire-vertex","fire-js":"fire-js",[Or]:"fire-js-all"},Ur=new Map,Fr=new Map,Vr=new Map;function Br(e,t){try{e.container.addComponent(t)}catch(Be){cr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Be)}}function zr(e){const t=e.name;if(Vr.has(t))return cr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Vr.set(t,e);for(const n of Ur.values())Br(n,e);for(const n of Fr.values())Br(n,e);return!0}function qr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wr(e){return void 0!==e.settings}const Hr=new wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Kr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}const Gr="10.14.1";function Yr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Lr,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Hr.create("bad-app-name",{appName:String(s)});if(n||(n=hn()),!n)throw Hr.create("no-options");const i=Ur.get(s);if(i){if(kn(n,i.options)&&kn(r,i.config))return i;throw Hr.create("duplicate-app",{appName:s})}const a=new Dn(s);for(const l of Vr.values())a.addComponent(l);const o=new Kr(n,r,a);return Ur.set(s,o),o}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr;const t=Ur.get(e);if(!t&&e===Lr&&hn())return Yr();if(!t)throw Hr.create("no-app",{appName:e});return t}function Jr(e,t,n){var r;let s=null!==(r=Mr[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void cr.warn(e.join(" "))}zr(new An("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Xr="firebase-heartbeat-store";let $r=null;function Zr(){return $r||($r=er("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xr)}catch(Be){console.warn(Be)}}}).catch(e=>{throw Hr.create("idb-open",{originalErrorMessage:e.message})})),$r}async function es(e,t){try{const n=(await Zr()).transaction(Xr,"readwrite"),r=n.objectStore(Xr);await r.put(t,ts(e)),await n.done}catch(Be){if(Be instanceof bn)cr.warn(Be.message);else{const t=Hr.create("idb-set",{originalErrorMessage:null===Be||void 0===Be?void 0:Be.message});cr.warn(t.message)}}}function ts(e){return"".concat(e.name,"!").concat(e.options.appId)}class ns{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ss(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rs();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Be){cr.warn(Be)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=rs(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),is(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),is(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=an(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Be){return cr.warn(Be),""}}}function rs(){return(new Date).toISOString().substring(0,10)}class ss{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!vn()&&xn().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Zr()).transaction(Xr),n=await t.objectStore(Xr).get(ts(e));return await t.done,n}catch(Be){if(Be instanceof bn)cr.warn(Be.message);else{const t=Hr.create("idb-get",{originalErrorMessage:null===Be||void 0===Be?void 0:Be.message});cr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return es(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return es(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function is(e){return an(JSON.stringify({version:2,heartbeats:e})).length}var as;as="",zr(new An("platform-logger",e=>new ar(e),"PRIVATE")),zr(new An("heartbeat",e=>new ns(e),"PRIVATE")),Jr(or,lr,as),Jr(or,lr,"esm2017"),Jr("fire-js","");Jr("firebase","10.14.1","app");function os(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ls(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cs=ls,us=new wn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ds=new Bn("@firebase/auth");function hs(e){if(ds.logLevel<=Ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ds.error("Auth (".concat(Gr,"): ").concat(e),...n)}}function fs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw vs(e,...n)}function ps(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vs(e,...n)}function ms(e,t,n){const r=Object.assign(Object.assign({},cs()),{[t]:n});return new wn("auth","Firebase",r).create(t,{appName:e.name})}function gs(e){return ms(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ys(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&fs(e,"argument-error"),ms(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function vs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return us.create(e,...n)}function xs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw vs(t,...r)}}function bs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hs(t),new Error(t)}function ws(e,t){e||bs(t)}function Ns(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ks(){return"http:"===_s()||"https:"===_s()}function _s(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ss(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ks()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Es{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ss()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function js(e,t){ws(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Cs{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Is={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ts=new Es(3e4,6e4);function As(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ps(e,t,n,r){return Rs(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=Sn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Cs.fetch()(Os(e,e.config.apiHost,n,a),l)})}async function Rs(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Is),t);try{const t=new Ms(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Us(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Us(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Us(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Us(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ms(e,o,a);fs(e,o)}}catch(Be){if(Be instanceof bn)throw Be;fs(e,"network-request-failed",{message:String(Be)})}}async function Ds(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Ps(e,t,n,r,s);return"mfaPendingCredential"in i&&fs(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Os(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?js(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function Ls(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ms{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ps(this.auth,"network-request-failed")),Ts.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Us(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ps(e,t,r);return s.customData._tokenResponse=n,s}function Fs(e){return void 0!==e&&void 0!==e.enterprise}class Vs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ls(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Bs(e,t){return Ps(e,"GET","/v2/recaptchaConfig",As(e,t))}async function zs(e,t){return Ps(e,"POST","/v1/accounts:lookup",t)}function qs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Be){}}function Ws(e){return 1e3*Number(e)}function Hs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return hs("JWT malformed, contained fewer than 3 sections"),null;try{const e=on(n);return e?JSON.parse(e):(hs("Failed to decode base64 JWT payload"),null)}catch(Be){return hs("Caught error parsing JWT payload as JSON",null===Be||void 0===Be?void 0:Be.toString()),null}}function Ks(e){const t=Hs(e);return xs(t,"internal-error"),xs("undefined"!==typeof t.exp,"internal-error"),xs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Gs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Be){throw Be instanceof bn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Be)&&e.auth.currentUser===e&&await e.auth.signOut(),Be}}class Ys{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Be){return void((null===Be||void 0===Be?void 0:Be.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Qs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qs(this.lastLoginAt),this.creationTime=qs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Js(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Gs(e,zs(n,{idToken:r}));xs(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Xs(i.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qs(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Xs(e){return e.map(e=>{var{providerId:t}=e,n=os(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xs(e.idToken,"internal-error"),xs("undefined"!==typeof e.idToken,"internal-error"),xs("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ks(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xs(0!==e.length,"internal-error");const t=Ks(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(xs(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Rs(e,{},async()=>{const n=Sn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Os(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Cs.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new $s;return n&&(xs("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(xs("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(xs("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return bs("not implemented")}}function Zs(e,t){xs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ei{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=os(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ys(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qs(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Gs(this,this.stsTokenManager.getToken(this.auth,e));return xs(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Tn(e),r=await n.getIdToken(t),s=Hs(r);xs(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:qs(Ws(s.auth_time)),issuedAtTime:qs(Ws(s.iat)),expirationTime:qs(Ws(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Tn(e);await Js(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(xs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Js(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Gs(this,async function(e,t){return Ps(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:x,isAnonymous:b,providerData:w,stsTokenManager:N}=t;xs(v&&N,e,"internal-error");const k=$s.fromJSON(this.name,N);xs("string"===typeof v,e,"internal-error"),Zs(u,e.name),Zs(d,e.name),xs("boolean"===typeof x,e,"internal-error"),xs("boolean"===typeof b,e,"internal-error"),Zs(h,e.name),Zs(f,e.name),Zs(p,e.name),Zs(m,e.name),Zs(g,e.name),Zs(y,e.name);const _=new ei({uid:v,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(_.providerData=w.map(e=>Object.assign({},e))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new $s;r.updateFromServerResponse(t);const s=new ei({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Js(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];xs(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Xs(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new $s;a.updateFromIdToken(n);const o=new ei({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Qs(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const ti=new Map;function ni(e){ws(e instanceof Function,"Expected a class definition");let t=ti.get(e);return t?(ws(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ti.set(e,t),t)}class ri{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ri.type="NONE";const si=ri;function ii(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ai{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=ii(this.userKey,r.apiKey,s),this.fullPersistenceKey=ii("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ai(ni(si),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ni(si);const i=ii(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=ei._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new ai(s,e,n)):new ai(s,e,n)}}function oi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(di(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(li(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fi(t))return"Blackberry";if(pi(t))return"Webos";if(ci(t))return"Safari";if((t.includes("chrome/")||ui(t))&&!t.includes("edge/"))return"Chrome";if(hi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/firefox\//i.test(e)}function ci(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/crios\//i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/iemobile/i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/android/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/blackberry/i.test(e)}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/webos/i.test(e)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gi(){return function(){const e=gn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn();return mi(e)||hi(e)||pi(e)||fi(e)||/windows phone/i.test(e)||di(e)}function vi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oi(gn());break;case"Worker":t="".concat(oi(gn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Gr,"/").concat(r)}class xi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Be){r(Be)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Be){t.reverse();for(const n of t)try{n()}catch(jt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Be||void 0===Be?void 0:Be.message})}}}class bi{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class wi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ki(this),this.idTokenSubscription=new ki(this),this.beforeStateQueue=new xi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=us,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ni(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ai.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Be){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await zs(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Be){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Be))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xs(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Be){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Js(e)}catch(Be){if((null===Be||void 0===Be?void 0:Be.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wr(this.app))return Promise.reject(gs(this));const t=e?Tn(e):null;return t&&xs(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&xs(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ps(e,"GET","/v2/passwordPolicy",As(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ps(e,"POST","/v2/accounts:revokeToken",As(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ni(e)||this._popupRedirectResolver;xs(t,this,"argument-error"),this.redirectPersistenceManager=await ai.create(this,[ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xs(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xs(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ds.logLevel<=Ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ds.warn("Auth (".concat(Gr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ni(e){return Tn(e)}class ki{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Cn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return xs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _i={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Si(e){return _i.loadJS(e)}function Ei(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ji{constructor(e){this.type="recaptcha-enterprise",this.auth=Ni(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Fs(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Bs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Vs(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Fs(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=_i.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Si(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ci(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new ji(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ii(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ci(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Ci(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Ti(e,t,n){const r=Ni(e);xs(r._canInitEmulator,r,"emulator-config-failed"),xs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Ai(t),{host:a,port:o}=function(e){const t=Ai(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Pi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Pi(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ai(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ri{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,t){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function Di(e,t){return Ps(e,"POST","/v1/accounts:signUp",t)}async function Oi(e,t){return Ds(e,"POST","/v1/accounts:signInWithPassword",As(e,t))}class Li extends Ri{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Li(e,t,"password")}static _fromEmailAndCode(e,t){return new Li(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ii(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oi);case"emailLink":return async function(e,t){return Ds(e,"POST","/v1/accounts:signInWithEmailLink",As(e,t))}(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ii(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Di);case"emailLink":return async function(e,t){return Ds(e,"POST","/v1/accounts:signInWithEmailLink",As(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Mi(e,t){return Ds(e,"POST","/v1/accounts:signInWithIdp",As(e,t))}class Ui extends Ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=os(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Ui(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Mi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Mi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sn(t)}return e}}const Fi={USER_NOT_FOUND:"user-not-found"};class Vi extends Ri{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ds(e,"POST","/v1/accounts:signInWithPhoneNumber",As(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ds(e,"POST","/v1/accounts:signInWithPhoneNumber",As(e,t));if(n.temporaryProof)throw Us(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ds(e,"POST","/v1/accounts:signInWithPhoneNumber",As(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Fi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Vi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Bi{constructor(e){var t,n,r,s,i,a;const o=En(jn(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);xs(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=En(jn(e)).link,n=t?En(jn(t)).deep_link_id:null,r=En(jn(e)).deep_link_id;return(r?En(jn(r)).link:null)||r||n||t||e}(e);try{return new Bi(t)}catch(n){return null}}}class zi{constructor(){this.providerId=zi.PROVIDER_ID}static credential(e,t){return Li._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Bi.parseLink(t);return xs(n,"argument-error"),Li._fromEmailAndCode(e,n.code,n.tenantId)}}zi.PROVIDER_ID="password",zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wi extends qi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hi extends Wi{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hi.credential(t.oauthAccessToken)}catch(n){return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hi.PROVIDER_ID="facebook.com";class Ki extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ui._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ki.credential(n,r)}catch(s){return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com",Ki.PROVIDER_ID="google.com";class Gi extends Wi{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gi.credential(t.oauthAccessToken)}catch(n){return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com",Gi.PROVIDER_ID="github.com";class Yi extends Wi{constructor(){super("twitter.com")}static credential(e,t){return Ui._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Yi.credential(n,r)}catch(s){return null}}}async function Qi(e,t){return Ds(e,"POST","/v1/accounts:signUp",As(e,t))}Yi.TWITTER_SIGN_IN_METHOD="twitter.com",Yi.PROVIDER_ID="twitter.com";class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ei._fromIdTokenResponse(e,n,r),i=Xi(n);return new Ji({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Xi(n);return new Ji({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Xi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class $i extends bn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,$i.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new $i(e,t,n,r)}}function Zi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw $i._fromErrorAndOperation(e,n,t,r);throw n})}async function ea(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Gs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ji._forOperation(e,"link",r)}async function ta(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Wr(r.app))return Promise.reject(gs(r));const s="reauthenticate";try{const i=await Gs(e,Zi(r,s,t,e),n);xs(i.idToken,r,"internal-error");const a=Hs(i.idToken);xs(a,r,"internal-error");const{sub:o}=a;return xs(e.uid===o,r,"user-mismatch"),Ji._forOperation(e,s,i)}catch(Be){throw(null===Be||void 0===Be?void 0:Be.code)==="auth/".concat("user-not-found")&&fs(r,"user-mismatch"),Be}}async function na(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Wr(e.app))return Promise.reject(gs(e));const r="signIn",s=await Zi(e,r,t),i=await Ji._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function ra(e,t){return na(Ni(e),t)}async function sa(e){const t=Ni(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ia(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await Gs(e,async function(e,t){return Ps(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}new WeakMap;const aa="__sak";class oa{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class la extends oa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);gi()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}la.type="LOCAL";const ca=la;class ua extends oa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ua.type="SESSION";const da=ua;class ha{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ha(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ha.receivers=[];class pa{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=fa("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function ma(){return window}function ga(){return"undefined"!==typeof ma().WorkerGlobalScope&&"function"===typeof ma().importScripts}const ya="firebaseLocalStorageDb",va="firebaseLocalStorage",xa="fbase_key";class ba{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wa(e,t){return e.transaction([va],t?"readwrite":"readonly").objectStore(va)}function Na(){const e=indexedDB.open(ya,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(va,{keyPath:xa})}catch(Be){n(Be)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(va)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ya);return new ba(e).toPromise()}(),t(await Na()))})})}async function ka(e,t,n){const r=wa(e,!0).put({[xa]:t,value:n});return new ba(r).toPromise()}function _a(e,t){const n=wa(e,!0).delete(t);return new ba(n).toPromise()}class Sa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Na()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Be){if(t++>3)throw Be;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ga()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ha._getInstance(ga()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new pa(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Na();return await ka(e,aa,"1"),await _a(e,aa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ka(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=wa(e,!1).get(t),r=await new ba(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_a(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=wa(e,!1).getAll();return new ba(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Sa.type="LOCAL";const Ea=Sa;Ei("rcb"),new Es(3e4,6e4);const ja="recaptcha";async function Ca(e,t,n){var r;const s=await n.verify();try{let i;if(xs("string"===typeof s,e,"argument-error"),xs(n.type===ja,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){xs("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ps(e,"POST","/v2/accounts/mfaEnrollment:start",As(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{xs("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;xs(n,e,"missing-multi-factor-info");const a=await function(e,t){return Ps(e,"POST","/v2/accounts/mfaSignIn:start",As(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ps(e,"POST","/v1/accounts:sendVerificationCode",As(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Ia{constructor(e){this.providerId=Ia.PROVIDER_ID,this.auth=Ni(e)}verifyPhoneNumber(e,t){return Ca(this.auth,e,Tn(t))}static credential(e,t){return Vi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ia.credentialFromTaggedObject(t)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vi._fromTokenResponse(n,r):null}}function Ta(e,t){return t?ni(t):(xs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ia.PROVIDER_ID="phone",Ia.PHONE_SIGN_IN_METHOD="phone";class Aa extends Ri{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pa(e){return na(e.auth,new Aa(e),e.bypassAuthState)}function Ra(e){const{auth:t,user:n}=e;return xs(n,t,"internal-error"),ta(n,new Aa(e),e.bypassAuthState)}async function Da(e){const{auth:t,user:n}=e;return xs(n,t,"internal-error"),ea(n,new Aa(e),e.bypassAuthState)}class Oa{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Be){this.reject(Be)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Be){this.reject(Be)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pa;case"linkViaPopup":case"linkViaRedirect":return Da;case"reauthViaPopup":case"reauthViaRedirect":return Ra;default:fs(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const La=new Es(2e3,1e4);class Ma extends Oa{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xs(e,this.auth,"internal-error"),e}async onExecution(){ws(1===this.filter.length,"Popup operations only handle one event");const e=fa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,La.get())};e()}}Ma.currentPopupAction=null;const Ua=new Map;class Fa extends Oa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ua.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=za(t),r=Ba(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Be){e=()=>Promise.reject(Be)}Ua.set(this.auth._key(),e)}return this.bypassAuthState||Ua.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Va(e,t){Ua.set(e._key(),t)}function Ba(e){return ni(e._redirectPersistence)}function za(e){return ii("pendingRedirect",e.config.apiKey,e.name)}async function qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Wr(e.app))return Promise.reject(gs(e));const r=Ni(e),s=Ta(r,t),i=new Fa(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Wa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ka(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ka(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ps(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ha(e))}saveEventToCache(e){this.cachedEventUids.add(Ha(e)),this.lastProcessedEventTime=Date.now()}}function Ha(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ka(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ga=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ya=/^https?/;async function Qa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ps(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ja(r))return}catch(n){}fs(e,"unauthorized-domain")}function Ja(e){const t=Ns(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Ya.test(n))return!1;if(Ga.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Xa=new Es(3e4,6e4);function $a(){const e=ma().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Za(e){return new Promise((t,n)=>{var r,s,i;function a(){$a(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$a(),n(ps(e,"network-request-failed"))},timeout:Xa.get()})}if(null===(s=null===(r=ma().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=ma().gapi)||void 0===i?void 0:i.load)){const t=Ei("iframefcb");return ma()[t]=()=>{gapi.load?a():n(ps(e,"network-request-failed"))},Si("".concat(_i.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw eo=null,e})}let eo=null;const to=new Es(5e3,15e3),no={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ro=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function so(e){const t=e.config;xs(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?js(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Gr},s=ro.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Sn(r).slice(1))}async function io(e){const t=await function(e){return eo=eo||Za(e),eo}(e),n=ma().gapi;return xs(n,e,"internal-error"),t.open({where:document.body,url:so(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:no,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=ps(e,"network-request-failed"),i=ma().setTimeout(()=>{r(s)},to.get());function a(){ma().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const ao={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Be){}}}function lo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ao),{width:r.toString(),height:s.toString(),top:i,left:a}),c=gn().toLowerCase();n&&(o=ui(c)?"_blank":n),li(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return mi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new oo(null);const d=window.open(t||"",o,u);xs(d,e,"popup-blocked");try{d.focus()}catch(Be){}return new oo(d)}const co="__/auth/handler",uo="emulator/auth/handler",ho=encodeURIComponent("fac");async function fo(e,t,n,r,s,i){xs(e.config.authDomain,e,"auth-domain-config-required"),xs(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Gr,eventId:s};if(t instanceof qi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Wi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ho,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(co);return js(t,uo)}(e),"?").concat(Sn(o).slice(1)).concat(c)}const po="webStorageSupport";const mo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=da,this._completeRedirectFn=qa,this._overrideRedirectResult=Va}async _openPopup(e,t,n,r){var s;ws(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return lo(e,await fo(e,t,n,Ns(),r),fa())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ma().location.href=e}(await fo(e,t,n,Ns(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ws(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await io(e),n=new Wa(e);return t.register("authEvent",t=>{xs(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(po,{type:po},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[po];void 0!==s&&t(!!s),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Qa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yi()||ci()||mi()}};var go="@firebase/auth",yo="1.7.9";class vo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xo=fn("authIdTokenMaxAge")||300;let bo=null;var wo;!function(e){_i=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ps("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),wo="Browser",zr(new An("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;xs(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:wo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vi(wo)},c=new wi(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ni);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),zr(new An("auth-internal",e=>(e=>new vo(e))(Ni(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(go,yo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(wo)),Jr(go,yo,"esm2017");var No,ko,_o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},So={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ko=So.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},No=So.Integer=r}).apply("undefined"!==typeof _o?_o:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Eo,jo,Co,Io,To,Ao,Po,Ro,Do="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Oo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Do&&Do];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout(()=>{throw e},0)}function _(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let j,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},T=()=>{const e=s.Promise.resolve(void 0);j=()=>{e.then(A)}};var A=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(Ge){k(Ge)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function P(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(Ge){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch($e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}B.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,s){if(r&&r.once)return Y(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[W]=l=new B(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[W]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;w(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){R.call(this,"d")}function xe(){R.call(this,"c")}d(ve,R),d(xe,R);var be={},we=null;function Ne(){return we=we||new ne}function ke(e){R.call(this,be.La,e)}function _e(e){const t=Ne();re(t,new ke(t))}function Se(e,t){R.call(this,be.STAT_EVENT,e),this.stat=t}function Ee(e){const t=Ne();re(t,new Se(t,e))}function je(e,t){R.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Te(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(ke,R),be.STAT_EVENT="statevent",d(Se,R),be.Ma="timingevent",d(je,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=vt(ft(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Ke(e),e.A=ft(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),At(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=K(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function He(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function Ke(e){e.S=Date.now()+e.I,Ye(e,e.I)}function Ye(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Qe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Je(e){0==e.j.G||e.J||pn(e.j,e)}function Ze(e){Qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function et(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||at(n.h,e)))if(!e.K&&at(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(qe){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fn(n),nn(n)}un(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=it(n.h)&&n.ca){try{n.ca()}catch(qe){}n.ca=void 0}}else gn(n,11)}else if((e.K||n.g==e)&&fn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ot(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,yt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=vn(r,r.J?r.ia:null,r.W),a.K){lt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Qe(o),Ke(o)),r.g=a}else cn(r);0<n.i.length&&sn(n)}else"stop"!=c[0]&&"close"!=c[0]||gn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gn(n,7):tn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(qe){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Xt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Xt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=h||7==t||_e(),Qe(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=$t(this.g);e="";var i=r.length,a=4==Xt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ze(this),Je(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Ze(this),Je(this);break e}Te(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,et(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=He(this,o),e==Ue){4==h&&(this.s=4,Ee(14),n=!1),Te(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ee(15),Te(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Te(this.i,this.l,e,null),et(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),dn(d),d.M=!0,Ee(11))}}else Te(this.i,this.l,o,"[Invalid Chunked Response]"),Ze(this),Je(this)}else Te(this.i,this.l,o,null),et(this,o);4==h&&Ze(this),this.o&&!this.J&&(4==h?pn(this.j,this):(this.o=!1,Ke(this)))}else(function(e){const t={};e=(e.g&&2<=Xt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Ze(this),Je(this)}}}catch(tt){}},Oe.prototype.cancel=function(){this.J=!0,Ze(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Ee(17)),Ze(this),this.s=2,Je(this)):Ye(this,this.S-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function st(e){return!!e.h||!!e.g&&e.g.size>=e.j}function it(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ot(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function ut(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}rt.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ht){this.h=e.h,pt(this,e.j),this.o=e.o,this.g=e.g,mt(this,e.s),this.l=e.l;var t=e.i,n=new jt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),gt(this,n),this.m=e.m}else e&&(t=String(e).match(dt))?(this.h=!1,pt(this,t[1]||"",!0),this.o=xt(t[2]||""),this.g=xt(t[3]||"",!0),mt(this,t[4]),this.l=xt(t[5]||"",!0),gt(this,t[6]||"",!0),this.m=xt(t[7]||"")):(this.h=!1,this.i=new jt(null,this.h))}function ft(e){return new ht(e)}function pt(e,t,n){e.j=n?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function gt(e,t,n){t instanceof jt?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),At(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=bt(t,St)),e.i=new jt(t,e.h))}function yt(e,t,n){e.i.set(t,n)}function vt(e){return yt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ht.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bt(t,Nt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,Nt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?_t:kt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,Et)),e.join("")};var Nt=/[#\/\?@]/g,kt=/[#\?:]/g,_t=/[#\?]/g,St=/[#\?@]/g,Et=/#/g;function jt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function It(e,t){Ct(e),t=Pt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Ct(e),t=Pt(e,t),e.g.has(t)}function At(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(Pt(e,t),h(n)),e.h+=n.length)}function Pt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch($e){}}function Dt(){this.g=new fe}function Ot(e,t,n){const r=n||"";try{ut(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Be){throw t.push(r+"type="+encodeURIComponent("_badmap")),Be}}function Lt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Mt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ut(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Vt(e)}function Vt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Bt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Bt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):yt(e,t,n))}function qt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=jt.prototype).add=function(e,t){Ct(this),this.i=null,e=Pt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Ct(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Ct(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(Pt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ct(this),this.i=null,Tt(this,e=Pt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Lt,pe),Lt.prototype.g=function(){return new Mt(this.l,this.j)},Lt.prototype.i=function(e){return function(){return e}}({}),d(Mt,ne),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Vt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vt(this)),this.g&&(this.readyState=3,Vt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ut(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):Vt(this),3==this.readyState&&Ut(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Qa=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(qt,ne);var Wt=/^https?$/i,Ht=["POST","PUT"];function Kt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Gt(e),Qt(e)}function Gt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Yt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Xt(e)||2!=e.Z()))if(e.u&&4==Xt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(dt)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Wt.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Xt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Gt(e)}}finally{Qt(e)}}}function Qt(e,t){if(e.g){Jt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Be){}}}function Jt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Xt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function en(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zt("baseRetryDelayMs",5e3,e),this.cb=Zt("retryDelaySeedMs",1e4,e),this.Wa=Zt("forwardChannelMaxRetries",2,e),this.wa=Zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new rt(e&&e.concurrentRequestLimit),this.Da=new Dt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tn(e){if(rn(e),3==e.G){var t=e.U++,n=ft(e.I);if(yt(n,"SID",e.K),yt(n,"RID",t),yt(n,"TYPE","terminate"),on(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=vt(ft(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(Xe){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ke(t)}yn(e)}function nn(e){e.g&&(dn(e),e.g.cancel(),e.g=null)}function rn(e){nn(e),e.u&&(s.clearTimeout(e.u),e.u=null),fn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function sn(e){if(!st(e.h)&&!e.s){e.s=!0;var t=e.Ga;j||T(),C||(j(),C=!0),I.add(t,e),e.B=0}}function an(e,t){var n;n=t?t.l:e.U++;const r=ft(e.I);yt(r,"SID",e.K),yt(r,"RID",n),yt(r,"AID",e.T),on(e,r),e.m&&e.o&&zt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=ln(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ot(e.h,n),Fe(n,r,t)}function on(e,t){e.H&&v(e.H,function(e,n){yt(t,n,e)}),e.l&&ut({},function(e,n){yt(t,n,e)})}function ln(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Ot(o,e,"req"+n+"_")}catch(tt){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function cn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;j||T(),C||(j(),C=!0),I.add(t,e),e.v=0}}function un(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),mn(e,e.v)),e.v++,!0)}function dn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function hn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ft(e.qa);yt(t,"RID","rpc"),yt(t,"SID",e.K),yt(t,"AID",e.T),yt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&yt(t,"TO",e.ja),yt(t,"TYPE","xmlhttp"),on(e,t),e.m&&e.o&&zt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=vt(ft(t)),n.m=null,n.P=!0,Ve(n,e)}function fn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function pn(e,t){var n=null;if(e.g==t){fn(e),dn(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.D,lt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new je(r,n)),sn(e)}else cn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(it(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),mn(e,e.B)),e.B++,!0))}(e,t)||2==r&&un(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:gn(e,5);break;case 4:gn(e,10);break;case 3:gn(e,6);break;default:gn(e,2)}}function mn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function gn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ht(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||pt(r,"https"),vt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Rt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Rt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Rt(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),yn(e),rn(e)}function yn(e){if(e.G=0,e.ka=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function vn(e,t,n){var r=n instanceof ht?ft(n):new ht(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ht(null);r&&pt(a,r),t&&(a.g=t),i&&mt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&yt(r,n,t),yt(r,"VER",e.la),on(e,r),r}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new qt(new Lt({eb:n})):new qt(e.pa)).Ha(e.J),t}function bn(){}function wn(){}function Nn(e,t){ne.call(this),this.g=new en(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sn(this)}function kn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){xe.call(this),this.status=1}function Sn(e){this.g=e}(e=qt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch($e){return void Kt(this,$e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ht,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jt(this),this.u=!0,this.g.send(e),this.u=!1}catch($e){Kt(this,$e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qt(this,!0)),qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Yt(this):this.bb())},e.bb=function(){Yt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch(We){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(We){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=en.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=vn(this,null,this.W),sn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=x(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ln(this,s,t),yt(n=ft(this.I),"RID",e),yt(n,"CVER",22),this.D&&yt(n,"X-HTTP-Session-Id",this.D),on(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Bt(i)))+"&"+t:this.m&&zt(n,this.m,i)),ot(this.h,s),this.Ua&&yt(n,"TYPE","init"),this.P?(yt(n,"$req",t),yt(n,"SID","null"),s.T=!0,Fe(s,n,null)):Fe(s,n,t),this.G=2}}else 3==this.G&&(e?an(this,e):0==this.i.length||st(this.h)||an(this))},e.Fa=function(){if(this.u=null,hn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),nn(this),hn(this))},e.Za=function(){null!=this.C&&(this.C=null,nn(this),un(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},wn.prototype.g=function(e,t){return new Nn(e,t)},d(Nn,ne),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){tn(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.G&&sn(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,tn(this.g),delete this.g,Nn.aa.N.call(this)},d(kn,ve),d(_n,xe),d(Sn,bn),Sn.prototype.ua=function(){re(this.g,"a")},Sn.prototype.ta=function(e){re(this.g,new kn(e))},Sn.prototype.sa=function(e){re(this.g,new _n)},Sn.prototype.ra=function(){re(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Ro=Oo.createWebChannelTransport=function(){return new wn},Po=Oo.getStatEventTarget=function(){return Ne()},Ao=Oo.Event=be,To=Oo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Io=Oo.ErrorCode=Pe,Re.COMPLETE="complete",Co=Oo.EventType=Re,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,jo=Oo.WebChannel=ge,Oo.FetchXmlHttpFactory=Lt,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,Eo=Oo.XhrIo=qt}).apply("undefined"!==typeof Do?Do:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Lo="@firebase/firestore";class Mo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mo.UNAUTHENTICATED=new Mo(null),Mo.GOOGLE_CREDENTIALS=new Mo("google-credentials-uid"),Mo.FIRST_PARTY=new Mo("first-party-uid"),Mo.MOCK_USER=new Mo("mock-user");let Uo="10.14.0";const Fo=new Bn("@firebase/firestore");function Vo(){return Fo.logLevel}function Bo(e){if(Fo.logLevel<=Ln.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Wo);Fo.debug("Firestore (".concat(Uo,"): ").concat(e),...s)}}function zo(e){if(Fo.logLevel<=Ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Wo);Fo.error("Firestore (".concat(Uo,"): ").concat(e),...s)}}function qo(e){if(Fo.logLevel<=Ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Wo);Fo.warn("Firestore (".concat(Uo,"): ").concat(e),...s)}}function Wo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(ze){return e}}function Ho(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Uo,") INTERNAL ASSERTION FAILED: ")+e;throw zo(t),new Error(t)}function Ko(e,t){e||Ho()}function Go(e,t){return e}const Yo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qo extends bn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Jo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class $o{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mo.UNAUTHENTICATED))}shutdown(){}}class Zo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class el{constructor(e){this.t=e,this.currentUser=Mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ko(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Jo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jo,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Bo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Bo("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jo)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Bo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ko("string"==typeof t.accessToken),new Xo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ko(null===e||"string"==typeof e),new Mo(e)}}class tl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new tl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ko(void 0===this.o);const n=e=>{null!=e.error&&Bo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Bo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Bo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Bo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ko("string"==typeof e.token),this.R=e.token,new rl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function il(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class al{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=il(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function ol(e,t){return e<t?-1:e>t?1:0}function ll(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class cl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qo(Yo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qo(Yo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Qo(Yo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qo(Yo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cl.fromMillis(Date.now())}static fromDate(e){return cl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new cl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ol(this.nanoseconds,e.nanoseconds):ol(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ul{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ul(e)}static min(){return new ul(new cl(0,0))}static max(){return new ul(new cl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ho(),void 0===n?n=e.length-t:n>e.length-t&&Ho(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===dl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hl extends dl{construct(e,t,n){return new hl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new hl(e)}static emptyPath(){return new hl([])}}const fl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pl extends dl{construct(e,t,n){return new pl(e,t,n)}static isValidIdentifier(e){return fl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Qo(Yo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Qo(Yo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Qo(Yo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pl(t)}static emptyPath(){return new pl([])}}class ml{constructor(e){this.path=e}static fromPath(e){return new ml(hl.fromString(e))}static fromName(e){return new ml(hl.fromString(e).popFirst(5))}static empty(){return new ml(hl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ml(new hl(e.slice()))}}class gl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}gl.UNKNOWN_ID=-1;function yl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ul.fromTimestamp(1e9===r?new cl(n+1,0):new cl(n,r));return new xl(s,ml.empty(),t)}function vl(e){return new xl(e.readTime,e.key,-1)}class xl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xl(ul.min(),ml.empty(),-1)}static max(){return new xl(ul.max(),ml.empty(),-1)}}function bl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ml.comparator(e.documentKey,t.documentKey),0!==n?n:ol(e.largestBatchId,t.largestBatchId))}const wl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function kl(e){if(e.code!==Yo.FAILED_PRECONDITION||e.message!==wl)throw e;Bo("LocalStore","Unexpectedly lost primary lease")}class _l{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ho(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _l((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _l?t:_l.resolve(t)}catch(e){return _l.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_l.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_l.reject(t)}static resolve(e){return new _l((t,n)=>{t(e)})}static reject(e){return new _l((t,n)=>{n(e)})}static waitFor(e){return new _l((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=_l.resolve(!1);for(const n of e)t=t.next(e=>e?_l.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new _l((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new _l((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Sl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function El(e){return"IndexedDbTransactionError"===e.name}class jl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Cl(e){return null==e}function Il(e){return 0===e&&1/e==-1/0}function Tl(e){return"number"==typeof e&&Number.isInteger(e)&&!Il(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}jl.oe=-1;const Al=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rl=Pl,Dl=[...Rl,"indexConfiguration","indexState","indexEntries"];function Ol(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ll(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ml(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ul{constructor(e,t){this.comparator=e,this.root=t||Vl.EMPTY}insert(e,t){return new Ul(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vl.BLACK,null,null))}remove(e){return new Ul(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fl(this.root,e,this.comparator,!0)}}class Fl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vl{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Vl.RED,this.left=null!=r?r:Vl.EMPTY,this.right=null!=s?s:Vl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Vl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ho();if(this.right.isRed())throw Ho();const e=this.left.check();if(e!==this.right.check())throw Ho();return e+(this.isRed()?0:1)}}Vl.EMPTY=null,Vl.RED=!0,Vl.BLACK=!1,Vl.EMPTY=new class{constructor(){this.size=0}get key(){throw Ho()}get value(){throw Ho()}get color(){throw Ho()}get left(){throw Ho()}get right(){throw Ho()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Vl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bl{constructor(e){this.comparator=e,this.data=new Ul(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zl(this.data.getIterator())}getIteratorFrom(e){return new zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Bl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bl(this.comparator);return t.data=e,t}}class zl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ql{constructor(e){this.fields=e,e.sort(pl.comparator)}static empty(){return new ql([])}unionWith(e){let t=new Bl(pl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ql(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Wl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Wl("Invalid base64 string: "+e):e}}(e);return new Hl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ol(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hl.EMPTY_BYTE_STRING=new Hl("");const Kl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gl(e){if(Ko(!!e),"string"==typeof e){let t=0;const n=Kl.exec(e);if(Ko(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yl(e.seconds),nanos:Yl(e.nanos)}}function Yl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ql(e){return"string"==typeof e?Hl.fromBase64String(e):Hl.fromUint8Array(e)}function Jl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xl(e){const t=e.mapValue.fields.__previous_value__;return Jl(t)?Xl(t):t}function $l(e){const t=Gl(e.mapValue.fields.__local_write_time__.timestampValue);return new cl(t.seconds,t.nanos)}class Zl{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ec("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}const tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jl(e)?4:vc(e)?9007199254740991:gc(e)?10:11:Ho()}function rc(e,t){if(e===t)return!0;const n=nc(e);if(n!==nc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $l(e).isEqual($l(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Gl(e.timestampValue),r=Gl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ql(e.bytesValue).isEqual(Ql(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yl(e.geoPointValue.latitude)===Yl(t.geoPointValue.latitude)&&Yl(e.geoPointValue.longitude)===Yl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yl(e.integerValue)===Yl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yl(e.doubleValue),r=Yl(t.doubleValue);return n===r?Il(n)===Il(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ll(e.arrayValue.values||[],t.arrayValue.values||[],rc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ol(n)!==Ol(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!rc(n[s],r[s])))return!1;return!0}(e,t);default:return Ho()}}function sc(e,t){return void 0!==(e.values||[]).find(e=>rc(e,t))}function ic(e,t){if(e===t)return 0;const n=nc(e),r=nc(t);if(n!==r)return ol(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ol(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yl(e.integerValue||e.doubleValue),r=Yl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ac(e.timestampValue,t.timestampValue);case 4:return ac($l(e),$l(t));case 5:return ol(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ql(e),r=Ql(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=ol(n[s],r[s]);if(0!==e)return e}return ol(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ol(Yl(e.latitude),Yl(t.latitude));return 0!==n?n:ol(Yl(e.longitude),Yl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return oc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=ol((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:oc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===tc.mapValue&&t===tc.mapValue)return 0;if(e===tc.mapValue)return 1;if(t===tc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=ol(r[a],i[a]);if(0!==e)return e;const t=ic(n[r[a]],s[i[a]]);if(0!==t)return t}return ol(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Ho()}}function ac(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ol(e,t);const n=Gl(e),r=Gl(t),s=ol(n.seconds,r.seconds);return 0!==s?s:ol(n.nanos,r.nanos)}function oc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ic(n[s],r[s]);if(e)return e}return ol(n.length,r.length)}function lc(e){return cc(e)}function cc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Gl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ql(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ml.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=cc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(cc(e.fields[s]));return n+"}"}(e.mapValue):Ho()}function uc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function dc(e){return!!e&&"integerValue"in e}function hc(e){return!!e&&"arrayValue"in e}function fc(e){return!!e&&"nullValue"in e}function pc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mc(e){return!!e&&"mapValue"in e}function gc(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ll(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=yc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function vc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class xc{constructor(e){this.value=e}static empty(){return new xc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(t)}setAll(e){let t=pl.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=yc(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ll(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new xc(yc(this.value))}}function bc(e){const t=[];return Ll(e.fields,(e,n)=>{const r=new pl([e]);if(mc(n)){const e=bc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ql(t)}class wc{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new wc(e,0,ul.min(),ul.min(),ul.min(),xc.empty(),0)}static newFoundDocument(e,t,n,r){return new wc(e,1,t,ul.min(),n,r,0)}static newNoDocument(e,t){return new wc(e,2,t,ul.min(),ul.min(),xc.empty(),0)}static newUnknownDocument(e,t){return new wc(e,3,t,ul.min(),ul.min(),xc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ul.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ul.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Nc{constructor(e,t){this.position=e,this.inclusive=t}}function kc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ml.comparator(ml.fromName(a.referenceValue),n.key):ic(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function _c(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rc(e.position[n],t.position[n]))return!1;return!0}class Sc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ec(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class jc{}class Cc extends jc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Lc(e,t,n):"array-contains"===t?new Vc(e,n):"in"===t?new Bc(e,n):"not-in"===t?new zc(e,n):"array-contains-any"===t?new qc(e,n):new Cc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Mc(e,n):new Uc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ic(t,this.value)):null!==t&&nc(this.value)===nc(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ho()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ic extends jc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ic(e,t)}matches(e){return Tc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tc(e){return"and"===e.op}function Ac(e){return Pc(e)&&Tc(e)}function Pc(e){for(const t of e.filters)if(t instanceof Ic)return!1;return!0}function Rc(e){if(e instanceof Cc)return e.field.canonicalString()+e.op.toString()+lc(e.value);if(Ac(e))return e.filters.map(e=>Rc(e)).join(",");{const t=e.filters.map(e=>Rc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Dc(e,t){return e instanceof Cc?function(e,t){return t instanceof Cc&&e.op===t.op&&e.field.isEqual(t.field)&&rc(e.value,t.value)}(e,t):e instanceof Ic?function(e,t){return t instanceof Ic&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Dc(n,t.filters[r]),!0)}(e,t):void Ho()}function Oc(e){return e instanceof Cc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(lc(e.value))}(e):e instanceof Ic?function(e){return e.op.toString()+" {"+e.getFilters().map(Oc).join(" ,")+"}"}(e):"Filter"}class Lc extends Cc{constructor(e,t,n){super(e,t,n),this.key=ml.fromName(n.referenceValue)}matches(e){const t=ml.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mc extends Cc{constructor(e,t){super(e,"in",t),this.keys=Fc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Uc extends Cc{constructor(e,t){super(e,"not-in",t),this.keys=Fc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ml.fromName(e.referenceValue))}class Vc extends Cc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hc(t)&&sc(t.arrayValue,this.value)}}class Bc extends Cc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sc(this.value.arrayValue,t)}}class zc extends Cc{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sc(this.value.arrayValue,t)}}class qc extends Cc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>sc(this.value.arrayValue,e))}}class Wc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Hc(e){return new Wc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Kc(e){const t=Go(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Rc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Cl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>lc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>lc(e)).join(",")),t.ue=e}return t.ue}function Gc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ec(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Dc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_c(e.startAt,t.startAt)&&_c(e.endAt,t.endAt)}function Yc(e){return ml.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Qc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Jc(e,t,n,r,s,i,a,o){return new Qc(e,t,n,r,s,i,a,o)}function Xc(e){return new Qc(e)}function $c(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Zc(e){return null!==e.collectionGroup}function eu(e){const t=Go(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Bl(pl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Sc(r,n))}),e.has(pl.keyField().canonicalString())||t.ce.push(new Sc(pl.keyField(),n))}return t.ce}function tu(e){const t=Go(e);return t.le||(t.le=nu(t,eu(e))),t.le}function nu(e,t){if("F"===e.limitType)return Hc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Sc(e.field,t)});const n=e.endAt?new Nc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nc(e.startAt.position,e.startAt.inclusive):null;return Hc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ru(e,t){const n=e.filters.concat([t]);return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function su(e,t,n){return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function iu(e,t){return Gc(tu(e),tu(t))&&e.limitType===t.limitType}function au(e){return"".concat(Kc(tu(e)),"|lt:").concat(e.limitType)}function ou(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Oc(e)).join(", "),"]")),Cl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>lc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>lc(e)).join(",")),"Target(".concat(t,")")}(tu(e)),"; limitType=").concat(e.limitType,")")}function lu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ml.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of eu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=kc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,eu(e),t))&&!(e.endAt&&!function(e,t,n){const r=kc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,eu(e),t))}(e,t)}function cu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function uu(e){return(t,n)=>{let r=!1;for(const s of eu(e)){const e=du(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function du(e,t,n){const r=e.field.isKeyField()?ml.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ic(r,s):Ho()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ho()}}class hu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ll(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ml(this.inner)}size(){return this.innerSize}}const fu=new Ul(ml.comparator);function pu(){return fu}const mu=new Ul(ml.comparator);function gu(){let e=mu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function yu(e){let t=mu;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function vu(){return bu()}function xu(){return bu()}function bu(){return new hu(e=>e.toString(),(e,t)=>e.isEqual(t))}const wu=new Ul(ml.comparator),Nu=new Bl(ml.comparator);function ku(){let e=Nu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const _u=new Bl(ol);function Su(){return _u}function Eu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Il(t)?"-0":t}}function ju(e){return{integerValue:""+e}}function Cu(e,t){return Tl(t)?ju(t):Eu(e,t)}class Iu{constructor(){this._=void 0}}function Tu(e,t,n){return e instanceof Ru?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Jl(t)&&(t=Xl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Du?Ou(e,t):e instanceof Lu?Mu(e,t):function(e,t){const n=Pu(e,t),r=Fu(n)+Fu(e.Pe);return dc(n)&&dc(e.Pe)?ju(r):Eu(e.serializer,r)}(e,t)}function Au(e,t,n){return e instanceof Du?Ou(e,t):e instanceof Lu?Mu(e,t):n}function Pu(e,t){return e instanceof Uu?function(e){return dc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ru extends Iu{}class Du extends Iu{constructor(e){super(),this.elements=e}}function Ou(e,t){const n=Vu(t);for(const r of e.elements)n.some(e=>rc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Lu extends Iu{constructor(e){super(),this.elements=e}}function Mu(e,t){let n=Vu(t);for(const r of e.elements)n=n.filter(e=>!rc(e,r));return{arrayValue:{values:n}}}class Uu extends Iu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fu(e){return Yl(e.integerValue||e.doubleValue)}function Vu(e){return hc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bu{constructor(e,t){this.version=e,this.transformResults=t}}class zu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zu}static exists(e){return new zu(void 0,e)}static updateTime(e){return new zu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wu{}function Hu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new td(e.key,zu.none()):new Ju(e.key,e.data,zu.none());{const n=e.data,r=xc.empty();let s=new Bl(pl.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Xu(e.key,r,new ql(s.toArray()),zu.none())}}function Ku(e,t,n){e instanceof Ju?function(e,t,n){const r=e.value.clone(),s=Zu(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xu?function(e,t,n){if(!qu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Zu(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll($u(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gu(e,t,n,r){return e instanceof Ju?function(e,t,n,r){if(!qu(e.precondition,t))return n;const s=e.value.clone(),i=ed(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xu?function(e,t,n,r){if(!qu(e.precondition,t))return n;const s=ed(e.fieldTransforms,r,t),i=t.data;return i.setAll($u(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return qu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Pu(r.transform,e||null);null!=s&&(null===n&&(n=xc.empty()),n.set(r.field,s))}return n||null}function Qu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ll(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Du&&t instanceof Du||e instanceof Lu&&t instanceof Lu?ll(e.elements,t.elements,rc):e instanceof Uu&&t instanceof Uu?rc(e.Pe,t.Pe):e instanceof Ru&&t instanceof Ru}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ju extends Wu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xu extends Wu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $u(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Zu(e,t,n){const r=new Map;Ko(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Au(a,o,n[s]))}return r}function ed(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Tu(e,i,t))}return r}class td extends Wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nd extends Wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ku(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xu();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Hu(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(ul.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ku())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(e,t)=>Qu(e,t))&&ll(this.baseMutations,e.baseMutations,(e,t)=>Qu(e,t))}}class sd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ko(e.mutations.length===n.length);let r=wu;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new sd(e,t,n,r)}}class id{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ad{constructor(e,t){this.count=e,this.unchangedNames=t}}var od,ld;function cd(e){switch(e){default:return Ho();case Yo.CANCELLED:case Yo.UNKNOWN:case Yo.DEADLINE_EXCEEDED:case Yo.RESOURCE_EXHAUSTED:case Yo.INTERNAL:case Yo.UNAVAILABLE:case Yo.UNAUTHENTICATED:return!1;case Yo.INVALID_ARGUMENT:case Yo.NOT_FOUND:case Yo.ALREADY_EXISTS:case Yo.PERMISSION_DENIED:case Yo.FAILED_PRECONDITION:case Yo.ABORTED:case Yo.OUT_OF_RANGE:case Yo.UNIMPLEMENTED:case Yo.DATA_LOSS:return!0}}function ud(e){if(void 0===e)return zo("GRPC error has no .code"),Yo.UNKNOWN;switch(e){case od.OK:return Yo.OK;case od.CANCELLED:return Yo.CANCELLED;case od.UNKNOWN:return Yo.UNKNOWN;case od.DEADLINE_EXCEEDED:return Yo.DEADLINE_EXCEEDED;case od.RESOURCE_EXHAUSTED:return Yo.RESOURCE_EXHAUSTED;case od.INTERNAL:return Yo.INTERNAL;case od.UNAVAILABLE:return Yo.UNAVAILABLE;case od.UNAUTHENTICATED:return Yo.UNAUTHENTICATED;case od.INVALID_ARGUMENT:return Yo.INVALID_ARGUMENT;case od.NOT_FOUND:return Yo.NOT_FOUND;case od.ALREADY_EXISTS:return Yo.ALREADY_EXISTS;case od.PERMISSION_DENIED:return Yo.PERMISSION_DENIED;case od.FAILED_PRECONDITION:return Yo.FAILED_PRECONDITION;case od.ABORTED:return Yo.ABORTED;case od.OUT_OF_RANGE:return Yo.OUT_OF_RANGE;case od.UNIMPLEMENTED:return Yo.UNIMPLEMENTED;case od.DATA_LOSS:return Yo.DATA_LOSS;default:return Ho()}}(ld=od||(od={}))[ld.OK=0]="OK",ld[ld.CANCELLED=1]="CANCELLED",ld[ld.UNKNOWN=2]="UNKNOWN",ld[ld.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ld[ld.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ld[ld.NOT_FOUND=5]="NOT_FOUND",ld[ld.ALREADY_EXISTS=6]="ALREADY_EXISTS",ld[ld.PERMISSION_DENIED=7]="PERMISSION_DENIED",ld[ld.UNAUTHENTICATED=16]="UNAUTHENTICATED",ld[ld.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ld[ld.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ld[ld.ABORTED=10]="ABORTED",ld[ld.OUT_OF_RANGE=11]="OUT_OF_RANGE",ld[ld.UNIMPLEMENTED=12]="UNIMPLEMENTED",ld[ld.INTERNAL=13]="INTERNAL",ld[ld.UNAVAILABLE=14]="UNAVAILABLE",ld[ld.DATA_LOSS=15]="DATA_LOSS";let dd=null;function hd(){return new TextEncoder}const fd=new No([4294967295,4294967295],0);function pd(e){const t=hd().encode(e),n=new ko;return n.update(t),new Uint8Array(n.digest())}function md(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new No([n,r],0),new No([s,i],0)]}class gd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new yd("Invalid padding: ".concat(t));if(n<0)throw new yd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new yd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new yd("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=No.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(No.fromNumber(n)));return 1===r.compare(fd)&&(r=new No([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=pd(e),[n,r]=md(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new gd(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=pd(e),[n,r]=md(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class yd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vd{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vd(ul.min(),r,new Ul(ol),pu(),ku())}}class xd{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xd(n,t,ku(),ku(),ku())}}class bd{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class wd{constructor(e,t){this.targetId=e,this.me=t}}class Nd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class kd{constructor(){this.fe=0,this.ge=Ed(),this.pe=Hl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ku(),t=ku(),n=ku();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ho()}}),new xd(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Ed()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ko(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _d{constructor(e){this.Le=e,this.Be=new Map,this.ke=pu(),this.qe=Sd(),this.Qe=new Ul(ol)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ho()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Yc(s))if(0===n){const e=new ml(s.path);this.Ue(t,e,wc.newNoDocument(e,ul.min()))}else Ko(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==dd||dd.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Ql(n).toUint8Array()}catch(e){if(e instanceof Wl)return qo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new gd(i,r,s)}catch(e){return qo(e instanceof yd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Yc(s.target)){const t=new ml(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,wc.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=ku();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new vd(e,t,this.Qe,this.ke,n);return this.ke=pu(),this.qe=Sd(),this.Qe=new Ul(ol),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bl(ol),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Bo("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Sd(){return new Ul(ml.comparator)}function Ed(){return new Ul(ml.comparator)}const jd={asc:"ASCENDING",desc:"DESCENDING"},Cd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Id={and:"AND",or:"OR"};class Td{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ad(e,t){return e.useProto3Json||Cl(t)?t:{value:t}}function Pd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Dd(e,t){return Pd(e,t.toTimestamp())}function Od(e){return Ko(!!e),ul.fromTimestamp(function(e){const t=Gl(e);return new cl(t.seconds,t.nanos)}(e))}function Ld(e,t){return Md(e,t).canonicalString()}function Md(e,t){const n=function(e){return new hl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ud(e){const t=hl.fromString(e);return Ko(sh(t)),t}function Fd(e,t){return Ld(e.databaseId,t.path)}function Vd(e,t){const n=Ud(t);if(n.get(1)!==e.databaseId.projectId)throw new Qo(Yo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qo(Yo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ml(Wd(n))}function Bd(e,t){return Ld(e.databaseId,t)}function zd(e){const t=Ud(e);return 4===t.length?hl.emptyPath():Wd(t)}function qd(e){return new hl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wd(e){return Ko(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hd(e,t,n){return{name:Fd(e,t),fields:n.value.mapValue.fields}}function Kd(e,t){let n;if(t instanceof Ju)n={update:Hd(e,t.key,t.value)};else if(t instanceof td)n={delete:Fd(e,t.key)};else if(t instanceof Xu)n={update:Hd(e,t.key,t.data),updateMask:rh(t.fieldMask)};else{if(!(t instanceof nd))return Ho();n={verify:Fd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ru)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Du)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Lu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Uu)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ho()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Dd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ho()}(e,t.precondition)),n}function Gd(e,t){return{documents:[Bd(e,t.path)]}}function Yd(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bd(e,s);const i=function(e){if(0!==e.length)return nh(Ic.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:eh(e.field),direction:Xd(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ad(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Qd(e){let t=zd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ko(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Jd(e);return t instanceof Ic&&Ac(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Sc(th(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Cl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Nc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Nc(n,t)}(n.endAt)),Jc(t,s,a,i,o,"F",l,c)}function Jd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=th(e.unaryFilter.field);return Cc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=th(e.unaryFilter.field);return Cc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=th(e.unaryFilter.field);return Cc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=th(e.unaryFilter.field);return Cc.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ho()}}(e):void 0!==e.fieldFilter?function(e){return Cc.create(th(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ho()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ic.create(e.compositeFilter.filters.map(e=>Jd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ho()}}(e.compositeFilter.op))}(e):Ho()}function Xd(e){return jd[e]}function $d(e){return Cd[e]}function Zd(e){return Id[e]}function eh(e){return{fieldPath:e.canonicalString()}}function th(e){return pl.fromServerFormat(e.fieldPath)}function nh(e){return e instanceof Cc?function(e){if("=="===e.op){if(pc(e.value))return{unaryFilter:{field:eh(e.field),op:"IS_NAN"}};if(fc(e.value))return{unaryFilter:{field:eh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pc(e.value))return{unaryFilter:{field:eh(e.field),op:"IS_NOT_NAN"}};if(fc(e.value))return{unaryFilter:{field:eh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eh(e.field),op:$d(e.op),value:e.value}}}(e):e instanceof Ic?function(e){const t=e.getFilters().map(e=>nh(e));return 1===t.length?t[0]:{compositeFilter:{op:Zd(e.op),filters:t}}}(e):Ho()}function rh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function sh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ih{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ul.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ul.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hl.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ah{constructor(e){this.ct=e}}function oh(e){const t=Qd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?su(t,t.limit,"L"):t}class lh{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Yl(e.integerValue));else if("doubleValue"in e){const n=Yl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Il(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Gl(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ql(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?vc(e)?this.dt(t,Number.MAX_SAFE_INTEGER):gc(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ho()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Yl(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),ml.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}lh.vt=new lh;class ch{constructor(){this.un=new uh}addToCollectionParentIndex(e,t){return this.un.add(t),_l.resolve()}getCollectionParents(e,t){return _l.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return _l.resolve()}deleteFieldIndex(e,t){return _l.resolve()}deleteAllFieldIndexes(e){return _l.resolve()}createTargetIndexes(e,t){return _l.resolve()}getDocumentsMatchingTarget(e,t){return _l.resolve(null)}getIndexType(e,t){return _l.resolve(0)}getFieldIndexes(e,t){return _l.resolve([])}getNextCollectionGroupToUpdate(e){return _l.resolve(null)}getMinOffset(e,t){return _l.resolve(xl.min())}getMinOffsetFromCollectionGroup(e,t){return _l.resolve(xl.min())}updateCollectionGroup(e,t,n){return _l.resolve()}updateIndexEntries(e,t){return _l.resolve()}}class uh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bl(hl.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Bl(hl.comparator)).toArray()}}new Uint8Array(0);class dh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new dh(e,dh.DEFAULT_COLLECTION_PERCENTILE,dh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}dh.DEFAULT_COLLECTION_PERCENTILE=10,dh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dh.DEFAULT=new dh(41943040,dh.DEFAULT_COLLECTION_PERCENTILE,dh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dh.DISABLED=new dh(-1,0,0);class hh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hh(0)}static kn(){return new hh(-1)}}class fh{constructor(){this.changes=new hu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_l.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ph{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Gu(n.mutation,e,ql.empty(),cl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ku()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ku();const r=vu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=gu();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=vu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ku()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=pu();const i=bu(),a=bu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Xu)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Gu(a.mutation,t,a.mutation.getFieldMask(),cl.now())):i.set(t.key,ql.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ph(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=bu();let r=new Ul((e,t)=>e-t),s=ku();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||ql.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||ku()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=xu();l.forEach(e=>{if(!s.has(e)){const r=Hu(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return _l.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ml.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):_l.resolve(vu());let a=-1,o=s;return i.next(t=>_l.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?_l.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,ku())).next(e=>({batchId:a,changes:yu(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ml(t)).next(e=>{let t=gu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=gu();return this.indexManager.getCollectionParents(e,s).next(a=>_l.forEach(a,a=>{const o=function(e,t){return new Qc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,wc.newInvalidDocument(r)))});let n=gu();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Gu(i.mutation,r,ql.empty(),cl.now()),lu(t,r)&&(n=n.insert(e,r))}),n})}}class gh{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return _l.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Od(e.createTime)}}(t)),_l.resolve()}getNamedQuery(e,t){return _l.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:oh(e.bundledQuery),readTime:Od(e.readTime)}}(t)),_l.resolve()}}class yh{constructor(){this.overlays=new Ul(ml.comparator),this.Ir=new Map}getOverlay(e,t){return _l.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vu();return _l.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),_l.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),_l.resolve()}getOverlaysForCollection(e,t,n){const r=vu(),s=t.length+1,i=new ml(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return _l.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Ul((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=vu(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=vu(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return _l.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new id(t,n));let s=this.Ir.get(t);void 0===s&&(s=ku(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class vh{constructor(){this.sessionToken=Hl.EMPTY_BYTE_STRING}getSessionToken(e){return _l.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_l.resolve()}}class xh{constructor(){this.Tr=new Bl(bh.Er),this.dr=new Bl(bh.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new bh(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new bh(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new ml(new hl([])),n=new bh(t,e),r=new bh(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ml(new hl([])),n=new bh(t,e),r=new bh(t,e+1);let s=ku();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new bh(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class bh{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ml.comparator(e.key,t.key)||ol(e.wr,t.wr)}static Ar(e,t){return ol(e.wr,t.wr)||ml.comparator(e.key,t.key)}}class wh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bl(bh.Er)}checkEmpty(e){return _l.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new rd(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new bh(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _l.resolve(i)}lookupMutationBatch(e,t){return _l.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return _l.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _l.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return _l.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bh(t,0),r=new bh(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),_l.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bl(ol);return t.forEach(e=>{const t=new bh(e,0),r=new bh(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),_l.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ml.isDocumentKey(s)||(s=s.child(""));const i=new bh(new ml(s),0);let a=new Bl(ol);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),_l.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ko(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return _l.forEach(t.mutations,r=>{const s=new bh(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new bh(t,0),r=this.br.firstAfterOrEqual(n);return _l.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_l.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nh{constructor(e){this.Mr=e,this.docs=new Ul(ml.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _l.resolve(n?n.document.mutableCopy():wc.newInvalidDocument(t))}getEntries(e,t){let n=pu();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():wc.newInvalidDocument(e))}),_l.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=pu();const i=t.path,a=new ml(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||bl(vl(a),n)<=0||(r.has(a.key)||lu(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return _l.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Ho()}Or(e,t){return _l.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new kh(this)}getSize(e){return _l.resolve(this.size)}}class kh extends fh{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),_l.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class _h{constructor(e){this.persistence=e,this.Nr=new hu(e=>Kc(e),Gc),this.lastRemoteSnapshotVersion=ul.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xh,this.targetCount=0,this.kr=hh.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),_l.resolve()}getLastRemoteSnapshotVersion(e){return _l.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _l.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),_l.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),_l.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new hh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,_l.resolve()}updateTargetData(e,t){return this.Kn(t),_l.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,_l.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_l.waitFor(s).next(()=>r)}getTargetCount(e){return _l.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return _l.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),_l.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),_l.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),_l.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return _l.resolve(n)}containsKey(e,t){return _l.resolve(this.Br.containsKey(t))}}class Sh{constructor(e,t){this.qr={},this.overlays={},this.Qr=new jl(0),this.Kr=!1,this.Kr=!0,this.$r=new vh,this.referenceDelegate=e(this),this.Ur=new _h(this),this.indexManager=new ch,this.remoteDocumentCache=function(e){return new Nh(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new ah(t),this.Gr=new gh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new wh(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Bo("MemoryPersistence","Starting transaction:",e);const r=new Eh(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return _l.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Eh extends Nl{constructor(e){super(),this.currentSequenceNumber=e}}class jh{constructor(e){this.persistence=e,this.Jr=new xh,this.Yr=null}static Zr(e){return new jh(e)}get Xr(){if(this.Yr)return this.Yr;throw Ho()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),_l.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),_l.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),_l.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _l.forEach(this.Xr,n=>{const r=ml.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,ul.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return _l.or([()=>_l.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Ch{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=ku(),r=ku();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ch(e,t.fromCache,n,r)}}class Ih{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Th{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=yn()?8:Sl(gn())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Ih;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Vo()<=Ln.DEBUG&&Bo("QueryEngine","SDK will not create cache indexes for query:",ou(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),_l.resolve()):(Vo()<=Ln.DEBUG&&Bo("QueryEngine","Query:",ou(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Vo()<=Ln.DEBUG&&Bo("QueryEngine","The SDK decides to create cache indexes for query:",ou(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tu(t))):_l.resolve())}Yi(e,t){if($c(t))return _l.resolve(null);let n=tu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=su(t,null,"F"),n=tu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ku(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,su(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return $c(t)||r.isEqual(ul.min())?_l.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?_l.resolve(null):(Vo()<=Ln.DEBUG&&Bo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ou(t)),this.rs(e,i,t,yl(r,-1)).next(e=>e))})}ts(e,t){let n=new Bl(uu(e));return t.forEach((t,r)=>{lu(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Vo()<=Ln.DEBUG&&Bo("QueryEngine","Using full collection scan to execute query:",ou(t)),this.Ji.getDocumentsMatchingQuery(e,t,xl.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Ah{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Ul(ol),this._s=new hu(e=>Kc(e),Gc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Ph(e,t,n,r){return new Ah(e,t,n,r)}async function Rh(e,t){const n=Go(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=ku();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Dh(e){const t=Go(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Oh(e,t,n){let r=ku(),s=ku();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=pu();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ul.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Bo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function Lh(e,t){const n=Go(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Mh(e,t){const n=Go(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,_l.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new ih(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Uh(e,t,n){const r=Go(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!El(e))throw e;Bo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function Fh(e,t,n){const r=Go(e);let s=ul.min(),i=ku();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Go(e),s=r._s.get(n);return void 0!==s?_l.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,tu(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:ul.min(),n?i:ku())).next(e=>(Vh(r,cu(t),e),{documents:e,Ts:i})))}function Vh(e,t,n){let r=e.us.get(t)||ul.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Bh{constructor(){this.activeTargetIds=Su()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zh{constructor(){this.so=new Bh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qh{_o(e){}shutdown(){}}class Wh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Bo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Bo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hh=null;function Kh(){return null===Hh?Hh=268435456+Math.round(2147483648*Math.random()):Hh++,"0x"+Hh.toString(16)}const Gh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yh{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Qh="WebChannelConnection";class Jh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=Kh(),a=this.xo(e,t.toUriEncodedString());Bo("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(Bo("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw qo("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Gh[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=Kh();return new Promise((i,a)=>{const o=new Eo;o.setWithCredentials(!0),o.listenOnce(Co.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Io.NO_ERROR:const t=o.getResponseJson();Bo(Qh,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Io.TIMEOUT:Bo(Qh,"RPC '".concat(e,"' ").concat(s," timed out")),a(new Qo(Yo.DEADLINE_EXCEEDED,"Request time out"));break;case Io.HTTP_ERROR:const n=o.getStatus();if(Bo(Qh,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Yo).indexOf(t)>=0?t:Yo.UNKNOWN}(t.status);a(new Qo(e,t.message))}else a(new Qo(Yo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Qo(Yo.UNAVAILABLE,"Connection failed."));break;default:Ho()}}finally{Bo(Qh,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Bo(Qh,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Kh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ro(),a=Po(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Bo(Qh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new Yh({Io:t=>{h?Bo(Qh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Bo(Qh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,jo.EventType.OPEN,()=>{h||(Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,jo.EventType.CLOSE,()=>{h||(h=!0,Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,jo.EventType.ERROR,t=>{h||(h=!0,qo(Qh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Qo(Yo.UNAVAILABLE,"The operation could not be completed")))}),p(u,jo.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Ko(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=od[e];if(void 0!==t)return ud(t)}(t),s=a.message;void 0===n&&(n=Yo.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Qo(n,s)),u.close()}else Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.bo(s)}}),p(a,Ao.STAT_EVENT,t=>{t.stat===To.PROXY?Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===To.NOPROXY&&Bo(Qh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Xh(){return"undefined"!=typeof document?document:null}function $h(e){return new Td(e,!0)}class Zh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Bo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ef{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zh(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Yo.RESOURCE_EXHAUSTED?(zo(t.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Yo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Qo(Yo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Bo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Bo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tf extends ef{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ho()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Ko(void 0===t||"string"==typeof t),Hl.fromBase64String(t||"")):(Ko(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Hl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Yo.UNKNOWN:ud(e.code);return new Qo(t,e.message||"")}(a);n=new Nd(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vd(e,r.document.name),i=Od(r.document.updateTime),a=r.document.createTime?Od(r.document.createTime):ul.min(),o=new xc({mapValue:{fields:r.document.fields}}),l=wc.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new bd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Vd(e,r.document),i=r.readTime?Od(r.readTime):ul.min(),a=wc.newNoDocument(s,i),o=r.removedTargetIds||[];n=new bd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Vd(e,r.document),i=r.removedTargetIds||[];n=new bd([],i,s,null)}else{if(!("filter"in t))return Ho();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new ad(r,s),a=e.targetId;n=new wd(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ul.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ul.min():t.readTime?Od(t.readTime):ul.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=qd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Yc(r)?{documents:Gd(e,r)}:{query:Yd(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rd(e,t.resumeToken);const r=Ad(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ul.min())>0){n.readTime=Pd(e,t.snapshotVersion.toTimestamp());const r=Ad(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ho()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=qd(this.serializer),t.removeTarget=e,this.a_(t)}}class nf extends ef{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ko(!!e.streamToken),this.lastStreamToken=e.streamToken,Ko(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ko(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Ko(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Od(e.updateTime):Od(t);return n.isEqual(ul.min())&&(n=Od(t)),new Bu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Od(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=qd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Kd(this.serializer,e))};this.a_(t)}}class rf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Qo(Yo.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,Md(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Yo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Qo(Yo.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,Md(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Yo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Qo(Yo.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(zo(t),this.D_=!1):Bo("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class af{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{mf(this)&&(Bo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Go(e);t.L_.add(4),await lf(t),t.q_.set("Unknown"),t.L_.delete(4),await of(t)}(this))})}),this.q_=new sf(n,r)}}async function of(e){if(mf(e))for(const t of e.B_)await t(!0)}async function lf(e){for(const t of e.B_)await t(!1)}function cf(e,t){const n=Go(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),pf(n)?ff(n):Df(n).r_()&&df(n,t))}function uf(e,t){const n=Go(e),r=Df(n);n.N_.delete(t),r.r_()&&hf(n,t),0===n.N_.size&&(r.r_()?r.o_():mf(n)&&n.q_.set("Unknown"))}function df(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ul.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Df(e).A_(t)}function hf(e,t){e.Q_.xe(t),Df(e).R_(t)}function ff(e){e.Q_=new _d({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Df(e).start(),e.q_.v_()}function pf(e){return mf(e)&&!Df(e).n_()&&e.N_.size>0}function mf(e){return 0===Go(e).L_.size}function gf(e){e.Q_=void 0}async function yf(e){e.q_.set("Online")}async function vf(e){e.N_.forEach((t,n)=>{df(e,t)})}async function xf(e,t){gf(e),pf(e)?(e.q_.M_(t),ff(e)):e.q_.set("Unknown")}async function bf(e,t,n){if(e.q_.set("Online"),t instanceof Nd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Bo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wf(e,n)}else if(t instanceof bd?e.Q_.Ke(t):t instanceof wd?e.Q_.He(t):e.Q_.We(t),!n.isEqual(ul.min()))try{const t=await Dh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Hl.EMPTY_BYTE_STRING,r.snapshotVersion)),hf(e,t);const s=new ih(r.target,t,n,r.sequenceNumber);df(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Bo("RemoteStore","Failed to raise snapshot:",t),await wf(e,t)}}async function wf(e,t,n){if(!El(t))throw t;e.L_.add(1),await lf(e),e.q_.set("Offline"),n||(n=()=>Dh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Bo("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await of(e)})}function Nf(e,t){return t().catch(n=>wf(e,n,t))}async function kf(e){const t=Go(e),n=Of(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;_f(t);)try{const e=await Lh(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Sf(t,e)}catch(e){await wf(t,e)}Ef(t)&&jf(t)}function _f(e){return mf(e)&&e.O_.length<10}function Sf(e,t){e.O_.push(t);const n=Of(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Ef(e){return mf(e)&&!Of(e).n_()&&e.O_.length>0}function jf(e){Of(e).start()}async function Cf(e){Of(e).p_()}async function If(e){const t=Of(e);for(const n of e.O_)t.m_(n.mutations)}async function Tf(e,t,n){const r=e.O_.shift(),s=sd.from(r,t,n);await Nf(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await kf(e)}async function Af(e,t){t&&Of(e).V_&&await async function(e,t){if(function(e){return cd(e)&&e!==Yo.ABORTED}(t.code)){const n=e.O_.shift();Of(e).s_(),await Nf(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await kf(e)}}(e,t),Ef(e)&&jf(e)}async function Pf(e,t){const n=Go(e);n.asyncQueue.verifyOperationInProgress(),Bo("RemoteStore","RemoteStore received new credentials");const r=mf(n);n.L_.add(3),await lf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await of(n)}async function Rf(e,t){const n=Go(e);t?(n.L_.delete(2),await of(n)):t||(n.L_.add(2),await lf(n),n.q_.set("Unknown"))}function Df(e){return e.K_||(e.K_=function(e,t,n){const r=Go(e);return r.w_(),new tf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:yf.bind(null,e),Ro:vf.bind(null,e),mo:xf.bind(null,e),d_:bf.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),pf(e)?ff(e):e.q_.set("Unknown")):(await e.K_.stop(),gf(e))})),e.K_}function Of(e){return e.U_||(e.U_=function(e,t,n){const r=Go(e);return r.w_(),new nf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Cf.bind(null,e),mo:Af.bind(null,e),f_:If.bind(null,e),g_:Tf.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await kf(e)):(await e.U_.stop(),e.O_.length>0&&(Bo("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Lf{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Lf(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qo(Yo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mf(e,t){if(zo("AsyncQueue","".concat(t,": ").concat(e)),El(e))return new Qo(Yo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Uf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ml.comparator(t.key,n.key):(e,t)=>ml.comparator(e.key,t.key),this.keyedMap=gu(),this.sortedSet=new Ul(this.comparator)}static emptySet(e){return new Uf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Uf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ff{constructor(){this.W_=new Ul(ml.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ho():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Vf{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Vf(e,t,Uf.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Bf{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zf{constructor(){this.queries=qf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Go(e),r=n.queries;n.queries=qf(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Qo(Yo.ABORTED,"Firestore shutting down"))}}function qf(){return new hu(e=>au(e),iu)}async function Wf(e,t){const n=Go(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new Bf,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Mf(e,"Initialization of query '".concat(ou(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Yf(n)}async function Hf(e,t){const n=Go(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Kf(e,t){const n=Go(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Yf(n)}function Gf(e,t,n){const r=Go(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Yf(e){e.Y_.forEach(e=>{e.next()})}var Qf,Jf;(Jf=Qf||(Qf={})).ea="default",Jf.Cache="cache";class Xf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Vf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qf.Cache}}class $f{constructor(e){this.key=e}}class Zf{constructor(e){this.key=e}}class ep{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ku(),this.mutatedKeys=ku(),this.Aa=uu(e),this.Ra=new Uf(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Ff,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=lu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ho()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new Vf(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ff,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ku(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Zf(e))}),this.da.forEach(n=>{e.has(n)||t.push(new $f(n))}),t}ba(e){this.Ta=e.Ts,this.da=ku();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Vf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class tp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class np{constructor(e){this.key=e,this.va=!1}}class rp{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new hu(e=>au(e),iu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ul(ml.comparator),this.Na=new Map,this.La=new xh,this.Ba={},this.ka=new Map,this.qa=hh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function sp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Sp(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ap(r,t,n,!0),s}async function ip(e,t){const n=Sp(e);await ap(n,t,!0,!1)}async function ap(e,t,n,r){const s=await Mh(e.localStore,tu(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await op(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&cf(e.remoteStore,s),o}async function op(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Fh(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return xp(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await Fh(e.localStore,t,!0),a=new ep(t,i.Ts),o=a.ma(i.documents),l=xd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);xp(e,n,c.wa);const u=new tp(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function lp(e,t,n){const r=Go(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!iu(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&uf(r.remoteStore,s.targetId),yp(r,s.targetId)}).catch(kl)):(yp(r,s.targetId),await Uh(r.localStore,s.targetId,!0))}async function cp(e,t){const n=Go(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uf(n.remoteStore,r.targetId))}async function up(e,t){const n=Go(e);try{const e=await function(e,t){const n=Go(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Hl.EMPTY_BYTE_STRING,ul.min()).withLastLimboFreeSnapshotVersion(ul.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=pu(),l=ku();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Oh(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(ul.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return _l.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Ko(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Ko(r.va):e.removedDocuments.size>0&&(Ko(r.va),r.va=!1))}),await Np(n,e,t)}catch(e){await kl(e)}}function dp(e,t,n){const r=Go(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Go(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Yf(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function hp(e,t,n){const r=Go(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new Ul(ml.comparator);e=e.insert(i,wc.newNoDocument(i,ul.min()));const n=ku().add(i),s=new vd(ul.min(),new Map,new Ul(ol),e,n);await up(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),wp(r)}else await Uh(r.localStore,t,!1).then(()=>yp(r,t,n)).catch(kl)}async function fp(e,t){const n=Go(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Go(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=_l.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Ko(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ku();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);gp(n,r,null),mp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Np(n,e)}catch(e){await kl(e)}}async function pp(e,t,n){const r=Go(e);try{const e=await function(e,t){const n=Go(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ko(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);gp(r,t,n),mp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Np(r,e)}catch(n){await kl(n)}}function mp(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function gp(e,t,n){const r=Go(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function yp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||vp(e,t)})}function vp(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(uf(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),wp(e))}function xp(e,t,n){for(const r of n)r instanceof $f?(e.La.addReference(r.key,t),bp(e,r)):r instanceof Zf?(Bo("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||vp(e,r.key)):Ho()}function bp(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Bo("SyncEngine","New document in limbo: "+n),e.xa.add(r),wp(e))}function wp(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ml(hl.fromString(t)),r=e.qa.next();e.Na.set(r,new np(n)),e.Oa=e.Oa.insert(n,r),cf(e.remoteStore,new ih(tu(Xc(n.path)),r,"TargetPurposeLimboResolution",jl.oe))}}async function Np(e,t,n){const r=Go(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ch.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=Go(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>_l.forEach(t,t=>_l.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>_l.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!El(e))throw e;Bo("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function kp(e,t){const n=Go(e);if(!n.currentUser.isEqual(t)){Bo("SyncEngine","User change. New user:",t.toKey());const e=await Rh(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Qo(Yo.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Np(n,e.hs)}}function _p(e,t){const n=Go(e),r=n.Na.get(t);if(r&&r.va)return ku().add(r.key);{let e=ku();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Sp(e){const t=Go(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=up.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_p.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hp.bind(null,t),t.Ca.d_=Kf.bind(null,t.eventManager),t.Ca.$a=Gf.bind(null,t.eventManager),t}function Ep(e){const t=Go(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pp.bind(null,t),t}class jp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Ph(this.persistence,new Th,e.initialUser,this.serializer)}Ga(e){return new Sh(jh.Zr,this.serializer)}Wa(e){return new zh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jp.provider={build:()=>new jp};class Cp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>dp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=kp.bind(null,this.syncEngine),await Rf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zf}createDatastore(e){const t=$h(e.databaseInfo.databaseId),n=function(e){return new Jh(e)}(e.databaseInfo);return function(e,t,n,r){return new rf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new af(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>dp(this.syncEngine,e,0),Wh.D()?new Wh:new qh)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new rp(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Go(e);Bo("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await lf(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Cp.provider={build:()=>new Cp};class Ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Tp{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Mo.UNAUTHENTICATED,this.clientId=al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Bo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Bo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(ze){const n=Mf(ze,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ap(e,t){e.asyncQueue.verifyOperationInProgress(),Bo("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Rh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Pp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rp(e);Bo("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Pf(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Pf(t.remoteStore,n)),e._onlineComponents=t}async function Rp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bo("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ap(e,e._uninitializedComponentsProvider._offline)}catch(ze){const n=ze;if(!function(e){return"FirebaseError"===e.name?e.code===Yo.FAILED_PRECONDITION||e.code===Yo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await Ap(e,new jp)}}else Bo("FirestoreClient","Using default OfflineComponentProvider"),await Ap(e,new jp);return e._offlineComponents}async function Dp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bo("FirestoreClient","Using user provided OnlineComponentProvider"),await Pp(e,e._uninitializedComponentsProvider._online)):(Bo("FirestoreClient","Using default OnlineComponentProvider"),await Pp(e,new Cp))),e._onlineComponents}function Op(e){return Dp(e).then(e=>e.syncEngine)}async function Lp(e){const t=await Dp(e),n=t.eventManager;return n.onListen=sp.bind(null,t.syncEngine),n.onUnlisten=lp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ip.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=cp.bind(null,t.syncEngine),n}function Mp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Jo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ip({next:o=>{i.Za(),t.enqueueAndForget(()=>Hf(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Qo(Yo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Qo(Yo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Xf(Xc(n.path),i,{includeMetadataChanges:!0,_a:!0});return Wf(e,a)}(await Lp(e),e.asyncQueue,t,n,r)),r.promise}function Up(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Jo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ip({next:n=>{i.Za(),t.enqueueAndForget(()=>Hf(e,a)),n.fromCache&&"server"===r.source?s.reject(new Qo(Yo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Xf(n,i,{includeMetadataChanges:!0,_a:!0});return Wf(e,a)}(await Lp(e),e.asyncQueue,t,n,r)),r.promise}function Fp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Vp=new Map;function Bp(e,t,n){if(!n)throw new Qo(Yo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zp(e){if(!ml.isDocumentKey(e))throw new Qo(Yo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qp(e){if(ml.isDocumentKey(e))throw new Qo(Yo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ho()}function Hp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qo(Yo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wp(e);throw new Qo(Yo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Kp(e,t){if(t<=0)throw new Qo(Yo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Gp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Qo(Yo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qo(Yo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Qo(Yo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Qo(Yo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Qo(Yo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Qo(Yo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qo(Yo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qo(Yo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $o;switch(e.type){case"firstParty":return new nl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qo(Yo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vp.get(e);t&&(Bo("ComponentProvider","Removing Datastore"),Vp.delete(e),t.terminate())}(this),Promise.resolve()}}class Qp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qp(this.firestore,e,this._query)}}class Jp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jp(this.firestore,e,this._key)}}class Xp extends Qp{constructor(e,t,n){super(e,t,Xc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jp(this.firestore,null,new ml(e))}withConverter(e){return new Xp(this.firestore,e,this._path)}}function $p(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Tn(e),Bp("collection","path",t),e instanceof Yp){const n=hl.fromString(t,...r);return qp(n),new Xp(e,null,n)}{if(!(e instanceof Jp||e instanceof Xp))throw new Qo(Yo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(hl.fromString(t,...r));return qp(n),new Xp(e.firestore,null,n)}}function Zp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Tn(e),1===arguments.length&&(t=al.newId()),Bp("doc","path",t),e instanceof Yp){const n=hl.fromString(t,...r);return zp(n),new Jp(e,null,new ml(n))}{if(!(e instanceof Jp||e instanceof Xp))throw new Qo(Yo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(hl.fromString(t,...r));return zp(n),new Jp(e.firestore,e instanceof Xp?e.converter:null,new ml(n))}}class em{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zh(this,"async_queue_retry"),this.Vu=()=>{const e=Xh();e&&Bo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Xh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Xh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Jo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Be){if(!El(Be))throw Be;Bo("AsyncQueue","Operation failed with retryable error: "+Be)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw zo("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Lf.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Ho()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function tm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class nm extends Yp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new em,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new em(e),this._firestoreClient=void 0,await e}}}function rm(e){if(e._terminated)throw new Qo(Yo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||sm(e),e._firestoreClient}function sm(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Zl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Fp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Tp(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class im{constructor(e){this._byteString=e}static fromBase64String(e){try{return new im(Hl.fromBase64String(e))}catch(e){throw new Qo(Yo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new im(Hl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class am{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class om{constructor(e){this._methodName=e}}class lm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qo(Yo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qo(Yo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ol(this._lat,e._lat)||ol(this._long,e._long)}}class cm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const um=/^__.*__$/;class dm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}class hm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ho()}}class pm{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Im(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(fm(this.Cu)&&um.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$h(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pm({Cu:e,methodName:t,qu:n,path:pl.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gm(e){const t=e._freezeSettings(),n=$h(e._databaseId);return new mm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ym(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);Sm("Data must be an object, but it was:",a,r);const o=km(r,a);let l,c;if(i.merge)l=new ql(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Em(t,r,n);if(!a.contains(s))throw new Qo(Yo.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Tm(e,s)||e.push(s)}l=new ql(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new dm(new xc(o),l,c)}class vm extends om{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vm}}function xm(e,t,n,r){const s=e.Qu(1,t,n);Sm("Data must be an object, but it was:",s,r);const i=[],a=xc.empty();Ll(r,(e,r)=>{const o=Cm(t,e,n);r=Tn(r);const l=s.Nu(o);if(r instanceof vm)i.push(o);else{const e=Nm(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new ql(i);return new hm(a,o,s.fieldTransforms)}function bm(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[Em(t,r,n)],l=[s];if(i.length%2!=0)throw new Qo(Yo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(Em(t,i[h])),l.push(i[h+1]);const c=[],u=xc.empty();for(let h=o.length-1;h>=0;--h)if(!Tm(c,o[h])){const e=o[h];let t=l[h];t=Tn(t);const n=a.Nu(e);if(t instanceof vm)c.push(e);else{const r=Nm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ql(c);return new hm(u,d,a.fieldTransforms)}function wm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Nm(n,e.Qu(r?4:3,t))}function Nm(e,t){if(_m(e=Tn(e)))return Sm("Unsupported field value:",t,e),km(e,t);if(e instanceof om)return function(e,t){if(!fm(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Nm(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Tn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Cu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=cl.fromDate(e);return{timestampValue:Pd(t.serializer,n)}}if(e instanceof cl){const n=new cl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pd(t.serializer,n)}}if(e instanceof lm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof im)return{bytesValue:Rd(t.serializer,e._byteString)};if(e instanceof Jp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ld(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof cm)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Eu(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Wp(e)))}(e,t)}function km(e,t){const n={};return Ml(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ll(e,(e,r)=>{const s=Nm(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function _m(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof cl||e instanceof lm||e instanceof im||e instanceof Jp||e instanceof om||e instanceof cm)}function Sm(e,t,n){if(!_m(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Wp(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Em(e,t,n){if((t=Tn(t))instanceof am)return t._internalPath;if("string"==typeof t)return Cm(e,t);throw Im("Field path arguments must be of type string or ",e,!1,void 0,n)}const jm=new RegExp("[~\\*/\\[\\]]");function Cm(e,t,n){if(t.search(jm)>=0)throw Im("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new am(...t.split("."))._internalPath}catch(r){throw Im("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Im(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Qo(Yo.INVALID_ARGUMENT,o+e+l)}function Tm(e,t){return e.some(e=>e.isEqual(t))}class Am{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pm extends Am{data(){return super.data()}}function Rm(e,t){return"string"==typeof t?Cm(e,t):t instanceof am?t._internalPath:t._delegate._internalPath}function Dm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qo(Yo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Om{}class Lm extends Om{}function Mm(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Om&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Vm).length,n=e.filter(e=>e instanceof Um).length;if(t>1||t>0&&n>0)throw new Qo(Yo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Um extends Lm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Um(e,t,n)}_apply(e){const t=this._parse(e);return Qm(e._query,t),new Qp(e.firestore,e.converter,ru(e._query,t))}_parse(e){const t=gm(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Ym(a,i);const t=[];for(const n of a)t.push(Gm(r,e,n));o={arrayValue:{values:t}}}else o=Gm(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ym(a,i),o=wm(n,t,a,"in"===i||"not-in"===i);return Cc.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Fm(e,t,n){const r=t,s=Rm("where",e);return Um._create(s,r,n)}class Vm extends Om{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ic.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Qm(n,s),n=ru(n,s)}(e._query,t),new Qp(e.firestore,e.converter,ru(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bm extends Lm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bm(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(t,n)}(e._query,this._field,this._direction);return new Qp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function zm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Rm("orderBy",e);return Bm._create(n,t)}class qm extends Lm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new qm(e,t,n)}_apply(e){return new Qp(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}function Wm(e){return Kp("limit",e),qm._create("limit",e,"F")}class Hm extends Lm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Hm(e,t,n)}_apply(e){const t=Km(e,this.type,this._docOrFields,this._inclusive);return new Qp(e.firestore,e.converter,function(e,t){return new Qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Km(e,t,n,r){if(n[0]=Tn(n[0]),n[0]instanceof Am)return function(e,t,n,r,s){if(!r)throw new Qo(Yo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const a of eu(e))if(a.field.isKeyField())i.push(uc(t,r.key));else{const e=r.data.field(a.field);if(Jl(e))throw new Qo(Yo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new Nc(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=gm(e.firestore);return function(e,t,n,r,s,i){const a=e.explicitOrderBy;if(s.length>a.length)throw new Qo(Yo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const o=[];for(let l=0;l<s.length;l++){const i=s[l];if(a[l].field.isKeyField()){if("string"!=typeof i)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!Zc(e)&&-1!==i.indexOf("/"))throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(hl.fromString(i));if(!ml.isDocumentKey(n))throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new ml(n);o.push(uc(t,s))}else{const e=wm(n,r,i);o.push(e)}}return new Nc(o,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Gm(e,t,n){if("string"==typeof(n=Tn(n))){if(""===n)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zc(t)&&-1!==n.indexOf("/"))throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(hl.fromString(n));if(!ml.isDocumentKey(r))throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return uc(e,new ml(r))}if(n instanceof Jp)return uc(e,n._key);throw new Qo(Yo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Wp(n),"."))}function Ym(e,t){if(!Array.isArray(e)||0===e.length)throw new Qo(Yo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Qm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Qo(Yo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qo(Yo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Jm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ql(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ho()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ll(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Yl(e.doubleValue));return new cm(s)}convertGeoPoint(e){return new lm(Yl(e.latitude),Yl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Xl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const t=Gl(e);return new cl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=hl.fromString(e);Ko(sh(n));const r=new ec(n.get(1),n.get(3)),s=new ml(n.popFirst(5));return r.isEqual(t)||zo("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Xm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class $m{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zm extends Am{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new eg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class eg extends Zm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class tg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $m(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new eg(this._firestore,this._userDataWriter,n.key,n,new $m(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qo(Yo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new eg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $m(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new eg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $m(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:ng(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ng(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ho()}}function rg(e){e=Hp(e,Jp);const t=Hp(e.firestore,nm);return Mp(rm(t),e._key).then(n=>hg(t,e,n))}class sg extends Jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new im(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jp(this.firestore,null,t)}}function ig(e){e=Hp(e,Qp);const t=Hp(e.firestore,nm),n=rm(t),r=new sg(t);return Dm(e._query),Up(n,e._query).then(n=>new tg(t,r,e,n))}function ag(e,t,n){e=Hp(e,Jp);const r=Hp(e.firestore,nm),s=Xm(e.converter,t,n);return dg(r,[ym(gm(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,zu.none())])}function og(e,t,n){e=Hp(e,Jp);const r=Hp(e.firestore,nm),s=gm(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=Tn(t))||t instanceof am?bm(s,"updateDoc",e._key,t,n,o):xm(s,"updateDoc",e._key,t),dg(r,[i.toMutation(e._key,zu.exists(!0))])}function lg(e){return dg(Hp(e.firestore,nm),[new td(e._key,zu.none())])}function cg(e,t){const n=Hp(e.firestore,nm),r=Zp(e),s=Xm(e.converter,t);return dg(n,[ym(gm(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,zu.exists(!1))]).then(()=>r)}function ug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=Tn(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||tm(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(tm(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof Jp)d=Hp(e.firestore,nm),h=Xc(e._key.path),u={next:t=>{n[l]&&n[l](hg(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Hp(e,Qp);d=Hp(t.firestore,nm),h=t._query;const r=new sg(d);u={next:e=>{n[l]&&n[l](new tg(d,r,t,e))},error:n[l+1],complete:n[l+2]},Dm(e._query)}return function(e,t,n,r){const s=new Ip(r),i=new Xf(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Wf(await Lp(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>Hf(await Lp(e),i))}}(rm(d),h,c,u)}function dg(e,t){return function(e,t){const n=new Jo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ep(e);try{const e=await function(e,t){const n=Go(e),r=cl.now(),s=t.reduce((e,t)=>e.add(t.key),ku());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=pu(),l=ku();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Yu(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Xu(e.key,t,bc(t.value.mapValue),zu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:yu(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Ul(ol)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Np(r,e.changes),await kf(r.remoteStore)}catch(e){const t=Mf(e,"Failed to persist write");n.reject(t)}}(await Op(e),t,n)),n.promise}(rm(e),t)}function hg(e,t,n){const r=n.docs.get(t._key),s=new sg(e);return new Zm(e,s,t._key,r,new $m(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Uo=e}(Gr),zr(new An("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new nm(new el(e.getProvider("auth-internal")),new sl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qo(Yo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jr(Lo,"4.7.3",e),Jr(Lo,"4.7.3","esm2017")}();const fg="firebasestorage.googleapis.com",pg="storageBucket";class mg extends bn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(vg(e),"Firebase Storage: ".concat(t," (").concat(vg(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mg.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var gg,yg;function vg(e){return"storage/"+e}function xg(){return new mg(gg.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function bg(){return new mg(gg.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wg(){return new mg(gg.CANCELED,"User canceled the upload/download.")}function Ng(){return new mg(gg.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kg(e){return new mg(gg.INVALID_ARGUMENT,e)}function _g(){return new mg(gg.APP_DELETED,"The Firebase app was deleted.")}function Sg(e,t){return new mg(gg.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Eg(e){throw new mg(gg.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(gg||(gg={}));class jg{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=jg.makeFromUrl(e,t)}catch(Be){return new jg(e,"")}if(""===n.path)return n;throw r=e,new mg(gg.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===fg?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new jg(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new mg(gg.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Cg{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ig(e){return"string"===typeof e||e instanceof String}function Tg(e){return Ag()&&e instanceof Blob}function Ag(){return"undefined"!==typeof Blob}function Pg(e,t,n,r){if(r<t)throw kg("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw kg("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Rg(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Dg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Og(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(yg||(yg={}));class Lg{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Mg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===yg.NO_ERROR,s=n.getStatus();if(!t||Og(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===yg.ABORT;return void e(!1,new Mg(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new Mg(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Be){r(Be)}else if(null!==s){const e=xg();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?_g():wg())}else{r(bg())}};this.canceled_?t(0,new Mg(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Mg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ug(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Fg(){const e=Ug();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ag())return new Blob(n);throw new mg(gg.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Vg(e){if("undefined"===typeof atob)throw t="base-64",new mg(gg.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Bg="raw",zg="base64",qg="base64url",Wg="data_url";class Hg{constructor(e,t){this.data=e,this.contentType=t||null}}function Kg(e,t){switch(e){case Bg:return new Hg(Gg(t));case zg:case qg:return new Hg(Yg(e,t));case Wg:return new Hg(function(e){const t=new Qg(e);return t.base64?Yg(zg,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Be){throw Sg(Wg,"Malformed data URL.")}return Gg(t)}(t.rest)}(t),new Qg(t).contentType)}throw xg()}function Gg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Yg(e,t){switch(e){case zg:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Sg(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case qg:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Sg(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Vg(t)}catch(Be){if(Be.message.includes("polyfill"))throw Be;throw Sg(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Qg{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Sg(Wg,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Jg{constructor(e,t){let n=0,r="";Tg(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Tg(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Jg(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Jg(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ag()){const e=t.map(e=>e instanceof Jg?e.data_:e);return new Jg(Fg.apply(null,e))}{const e=t.map(e=>Ig(e)?Kg(Bg,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new Jg(r,!0)}}uploadData(){return this.data_}}function Xg(e){let t;try{t=JSON.parse(e)}catch(Be){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function $g(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Zg(e,t){return t}class ey{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Zg}}let ty=null;function ny(){if(ty)return ty;const e=[];e.push(new ey("bucket")),e.push(new ey("generation")),e.push(new ey("metageneration")),e.push(new ey("name","fullPath",!0));const t=new ey("name");t.xform=function(e,t){return function(e){return!Ig(e)||e.length<2?e:$g(e)}(t)},e.push(t);const n=new ey("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ey("timeCreated")),e.push(new ey("updated")),e.push(new ey("md5Hash",null,!0)),e.push(new ey("cacheControl",null,!0)),e.push(new ey("contentDisposition",null,!0)),e.push(new ey("contentEncoding",null,!0)),e.push(new ey("contentLanguage",null,!0)),e.push(new ey("contentType",null,!0)),e.push(new ey("metadata","customMetadata",!0)),ty=e,ty}function ry(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new jg(n,r);return t._makeStorageReference(s)}})}(r,e),r}function sy(e,t,n){const r=Xg(t);if(null===r)return null;return ry(e,r,n)}function iy(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class ay{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function oy(e){if(!e)throw xg()}function ly(e,t){return function(n,r){const s=sy(e,r,t);return oy(null!==s),s}}function cy(e,t){return function(n,r){const s=sy(e,r,t);return oy(null!==s),function(e,t,n,r){const s=Xg(t);if(null===s)return null;if(!Ig(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return Rg("/b/"+a(s)+"/o/"+a(i),n,r)+Dg({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function uy(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new mg(gg.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new mg(gg.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new mg(gg.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new mg(gg.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function dy(e){const t=uy(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new mg(gg.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function hy(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function fy(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=hy(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+iy(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Jg.getBlob(c,r,u);if(null===d)throw Ng();const h={name:l.fullPath},f=Rg(i,e.host,e._protocol),p=e.maxUploadRetryTime,m=new ay(f,"POST",ly(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=uy(t),m}class py{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw Eg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Eg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Eg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Be){return-1}}getResponse(){if(!this.sent_)throw Eg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Eg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class my extends py{initXhr(){this.xhr_.responseType="text"}}function gy(){return new my}class yy{constructor(e,t){this._service=e,this._location=t instanceof jg?t:jg.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new yy(e,t)}get root(){const e=new jg(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $g(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new jg(this._location.bucket,e);return new yy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new mg(gg.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function vy(e,t,n){e._throwIfRoot("uploadBytes");const r=fy(e.storage,e._location,ny(),new Jg(t,!0),n);return e.storage.makeRequestWithTokens(r,gy).then(t=>({metadata:t,ref:e}))}function xy(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Rg(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new ay(r,"GET",cy(e,n),s);return i.errorHandler=dy(t),i}(e.storage,e._location,ny());return e.storage.makeRequestWithTokens(t,gy).then(e=>{if(null===e)throw new mg(gg.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function by(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new jg(e._location.bucket,n);return new yy(e.storage,r)}function wy(e,t){if(e instanceof _y){const n=e;if(null==n._bucket)throw new mg(gg.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pg+"' property when initializing the app?");const r=new yy(n,n._bucket);return null!=t?wy(r,t):r}return void 0!==t?by(e,t):e}function Ny(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _y)return new yy(e,t);throw kg("To use ref(service, url), the first argument must be a Storage instance.")}return wy(e,t)}function ky(e,t){const n=null===t||void 0===t?void 0:t[pg];return null==n?null:jg.makeFromBucketSpec(n,e)}class _y{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=fg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?jg.makeFromBucketSpec(r,this._host):ky(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=jg.makeFromBucketSpec(this._url,e):this._bucket=ky(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yy(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Cg(_g());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=Dg(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Lg(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Sy="@firebase/storage",Ey="0.13.2",jy="storage";function Cy(e,t,n){return vy(e=Tn(e),t,n)}function Iy(e){return xy(e=Tn(e))}function Ty(e,t){return Ny(e=Tn(e),t)}function Ay(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new _y(r,s,i,n,Gr)}zr(new An(jy,Ay,"PUBLIC").setMultipleInstances(!0)),Jr(Sy,Ey,""),Jr(Sy,Ey,"esm2017");function Py(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function Ry(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>Ry(e));if("function"===typeof e||"object"===typeof e)return Py(e,e=>Ry(e));throw new Error("Data cannot be encoded in JSON: "+e)}function Dy(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>Dy(e)):"function"===typeof e||"object"===typeof e?Py(e,e=>Dy(e)):e}const Oy="functions",Ly={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class My extends bn{constructor(e,t,n){super("".concat(Oy,"/").concat(e),t||""),this.details=n}}class Uy{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(Be){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(Be){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const Fy="us-central1";class Vy{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fy,i=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Uy(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=Fy}catch(Be){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function By(e,t,n){return r=>function(e,t,n,r){const s=e._url(t);return qy(e,s,n,r)}(e,t,r,n||{})}async function zy(e,t,n,r){let s;n["Content-Type"]="application/json";try{s=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(Be){return{status:0,json:null}}let i=null;try{i=await s.json()}catch(Be){}return{status:s.status,json:i}}async function qy(e,t,n,r){const s={data:n=Ry(n)},i={},a=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),null!==a.appCheckToken&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new My("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),l=await Promise.race([zy(t,s,i,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new My("cancelled","Firebase Functions instance was deleted.");const c=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),s=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!Ly[t])return new My("internal","internal");r=Ly[t],s=t}const i=e.message;"string"===typeof i&&(s=i),n=e.details,void 0!==n&&(n=Dy(n))}}catch(Be){}return"ok"===r?null:new My(r,s,n)}(l.status,l.json);if(c)throw c;if(!l.json)throw new My("internal","Response is not valid JSON object.");let u=l.json.data;if("undefined"===typeof u&&(u=l.json.result),"undefined"===typeof u)throw new My("internal","Response is missing data field.");return{data:Dy(u)}}const Wy="@firebase/functions",Hy="0.11.8";function Ky(e,t,n){return By(Tn(e),t,n)}!function(e,t){zr(new An(Oy,(t,n)=>{let{instanceIdentifier:r}=n;const s=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),a=t.getProvider("messaging-internal"),o=t.getProvider("app-check-internal");return new Vy(s,i,a,o,r,e)},"PUBLIC").setMultipleInstances(!0)),Jr(Wy,Hy,t),Jr(Wy,Hy,"esm2017")}(fetch.bind(self));const Gy="@firebase/installations",Yy="0.6.9",Qy=1e4,Jy="w:".concat(Yy),Xy="FIS_v2",$y=36e5,Zy=new wn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ev(e){return e instanceof bn&&e.code.includes("request-failed")}function tv(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function nv(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function rv(e,t){const n=(await t.json()).error;return Zy.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function sv(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function iv(e,t){let{refreshToken:n}=t;const r=sv(e);return r.append("Authorization",function(e){return"".concat(Xy," ").concat(e)}(n)),r}async function av(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ov(e){return new Promise(t=>{setTimeout(t,e)})}const lv=/^[cdef][\w-]{21}$/;function cv(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return lv.test(t)?t:""}catch(e){return""}}function uv(e){return"".concat(e.appName,"!").concat(e.appId)}const dv=new Map;function hv(e,t){const n=uv(e);fv(n,t),function(e,t){const n=mv();n&&n.postMessage({key:e,fid:t});gv()}(n,t)}function fv(e,t){const n=dv.get(e);if(n)for(const r of n)r(t)}let pv=null;function mv(){return!pv&&"BroadcastChannel"in self&&(pv=new BroadcastChannel("[Firebase] FID Change"),pv.onmessage=e=>{fv(e.data.key,e.data.fid)}),pv}function gv(){0===dv.size&&pv&&(pv.close(),pv=null)}const yv="firebase-installations-store";let vv=null;function xv(){return vv||(vv=er("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(yv)}})),vv}async function bv(e,t){const n=uv(e),r=(await xv()).transaction(yv,"readwrite"),s=r.objectStore(yv),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||hv(e,t.fid),t}async function wv(e){const t=uv(e),n=(await xv()).transaction(yv,"readwrite");await n.objectStore(yv).delete(t),await n.done}async function Nv(e,t){const n=uv(e),r=(await xv()).transaction(yv,"readwrite"),s=r.objectStore(yv),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||hv(e,a.fid),a}async function kv(e){let t;const n=await Nv(e.appConfig,n=>{const r=function(e){const t=e||{fid:cv(),registrationStatus:0};return Ev(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Zy.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=tv(n),a=sv(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:Xy,appId:n.appId,sdkVersion:Jy},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await av(()=>fetch(i,c));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:nv(e.authToken)}}throw await rv("Create Installation",u)}(e,t);return bv(e.appConfig,n)}catch(Be){throw ev(Be)&&409===Be.customData.serverCode?await wv(e.appConfig):await bv(e.appConfig,{fid:t.fid,registrationStatus:0}),Be}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:_v(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function _v(e){let t=await Sv(e.appConfig);for(;1===t.registrationStatus;)await ov(100),t=await Sv(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await kv(e);return n||t}return t}function Sv(e){return Nv(e,e=>{if(!e)throw Zy.create("installation-not-found");return Ev(e)})}function Ev(e){return 1===(t=e).registrationStatus&&t.registrationTime+Qy<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function jv(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(tv(e),"/").concat(n,"/authTokens:generate")}(n,t),i=iv(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:Jy,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await av(()=>fetch(s,l));if(c.ok){return nv(await c.json())}throw await rv("Generate Auth Token",c)}async function Cv(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Nv(e.appConfig,r=>{if(!Tv(r))throw Zy.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+$y}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Iv(e.appConfig);for(;1===n.authToken.requestStatus;)await ov(100),n=await Iv(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Cv(e,t):r}(e,n),r;{if(!navigator.onLine)throw Zy.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await jv(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await bv(e.appConfig,r),n}catch(Be){if(!ev(Be)||401!==Be.customData.serverCode&&404!==Be.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await bv(e.appConfig,n)}else await wv(e.appConfig);throw Be}}(e,n),n}});return t?await t:r.authToken}function Iv(e){return Nv(e,e=>{if(!Tv(e))throw Zy.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Qy<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Tv(e){return void 0!==e&&2===e.registrationStatus}async function Av(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await kv(e);t&&await t}(n);return(await Cv(n,t)).token}function Pv(e){return Zy.create("missing-app-config-values",{valueName:e})}const Rv="installations",Dv=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Pv("App Configuration");if(!e.name)throw Pv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Pv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:qr(t,"heartbeat"),_delete:()=>Promise.resolve()}},Ov=e=>{const t=qr(e.getProvider("app").getImmediate(),Rv).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await kv(t);return r?r.catch(console.error):Cv(t).catch(console.error),n.fid}(t),getToken:e=>Av(t,e)}};zr(new An(Rv,Dv,"PUBLIC")),zr(new An("installations-internal",Ov,"PRIVATE")),Jr(Gy,Yy),Jr(Gy,Yy,"esm2017");const Lv="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Mv="google.c.a.c_id";var Uv,Fv;function Vv(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bv(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Uv||(Uv={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Fv||(Fv={}));const zv="fcm_token_details_db",qv="fcm_token_object_Store";const Wv="firebase-messaging-store";let Hv=null;function Kv(){return Hv||(Hv=er("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Wv)}})),Hv}async function Gv(e){const t=Qv(e),n=await Kv(),r=await n.transaction(Wv).objectStore(Wv).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes(zv))return null}let t=null;return(await er(zv,5,{upgrade:async(n,r,s,i)=>{var a;if(r<2)return;if(!n.objectStoreNames.contains(qv))return;const o=i.objectStore(qv),l=await o.index("fcmSenderId").get(e);if(await o.clear(),l)if(2===r){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(a=e.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:Vv(e.vapidKey)}}}else if(3===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Vv(e.auth),p256dh:Vv(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Vv(e.vapidKey)}}}else if(4===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Vv(e.auth),p256dh:Vv(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Vv(e.vapidKey)}}}}})).close(),await tr(zv),await tr("fcm_vapid_details_db"),await tr("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await Yv(e,t),t}}async function Yv(e,t){const n=Qv(e),r=(await Kv()).transaction(Wv,"readwrite");return await r.objectStore(Wv).put(t,n),await r.done,t}function Qv(e){let{appConfig:t}=e;return t.appId}const Jv=new wn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function Xv(e,t){const n={method:"DELETE",headers:await Zv(e)};try{const r=await fetch("".concat($v(e.appConfig),"/").concat(t),n),s=await r.json();if(s.error){const e=s.error.message;throw Jv.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw Jv.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function $v(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function Zv(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function ex(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:s}=e;const i={web:{endpoint:r,auth:n,p256dh:t}};return s!==Lv&&(i.web.applicationPubKey=s),i}async function tx(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bv(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Vv(t.getKey("auth")),p256dh:Vv(t.getKey("p256dh"))},r=await Gv(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,s=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&s&&i}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await Zv(e),r=ex(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch("".concat($v(e.appConfig),"/").concat(t.token),s);i=await n.json()}catch(a){throw Jv.create("token-update-failed",{errorInfo:null===a||void 0===a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw Jv.create("token-update-failed",{errorInfo:e})}if(!i.token)throw Jv.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await Yv(e.firebaseDependencies,r),n}catch(Be){throw Be}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Xv(e.firebaseDependencies,r.token)}catch(Be){console.warn(Be)}return nx(e.firebaseDependencies,n)}return nx(e.firebaseDependencies,n)}async function nx(e,t){const n=await async function(e,t){const n=await Zv(e),r=ex(t),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const t=await fetch($v(e.appConfig),s);i=await t.json()}catch(a){throw Jv.create("token-subscribe-failed",{errorInfo:null===a||void 0===a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw Jv.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw Jv.create("token-subscribe-no-token");return i.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await Yv(e,r),r.token}function rx(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const s=t.notification.image;s&&(e.notification.image=s);const i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,s,i,a;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const o=null!==(s=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==s?s:null===(i=t.notification)||void 0===i?void 0:i.click_action;o&&(e.fcmOptions.link=o);const l=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function sx(e){return Jv.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ix{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw sx("App Configuration Object");if(!e.name)throw sx("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw sx(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function ax(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(Be){throw Jv.create("failed-service-worker-registration",{browserErrorMessage:null===Be||void 0===Be?void 0:Be.message})}}async function ox(e,t){if(!navigator)throw Jv.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Jv.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Lv)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await ax(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Jv.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),tx(e)}async function lx(e,t,n){const r=function(e){switch(e){case Fv.NOTIFICATION_CLICKED:return"notification_open";case Fv.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Mv],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function cx(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Fv.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(rx(n)):e.onMessageHandler.next(rx(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&Mv in e})(r)&&"1"===r["google.c.a.e"]&&await lx(e,n.messageType,r)}const ux="@firebase/messaging",dx="0.12.12",hx=e=>{const t=new ix(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>cx(t,e)),t},fx=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>ox(t,e)}};async function px(){try{await xn()}catch(Be){return!1}return"undefined"!==typeof window&&vn()&&!("undefined"===typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function mx(e,t){return function(e,t){if(!navigator)throw Jv.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=Tn(e),t)}zr(new An("messaging",hx,"PUBLIC")),zr(new An("messaging-internal",fx,"PRIVATE")),Jr(ux,dx),Jr(ux,dx,"esm2017");const gx=Yr({apiKey:"AIzaSyAtcxae1F5cJljA2q8JbmcvYuXpxS_EGhw",authDomain:"bestiesapp.firebaseapp.com",projectId:"bestiesapp",storageBucket:"bestiesapp.firebasestorage.app",messagingSenderId:"816425843858",appId:"1:816425843858:web:60eaaa2ddd094b6e797a4b"}),yx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();const t=qr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=qr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(kn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;fs(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:mo,persistence:[Ea,ca,da]}),r=fn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>xo)return;const r=null===t||void 0===t?void 0:t.token;bo!==r&&(bo=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Tn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Tn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=un("auth");return i&&Ti(n,"http://".concat(i)),n}(gx),vx=function(e,t){const n="string"==typeof e?e:t||"(default)",r=qr("object"==typeof e?e:Qr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=dn("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Hp(e,Yp))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Mo.MOCK_USER;else{t=mn(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Qo(Yo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Mo(i)}e._authCredentials=new Zo(new Xo(t,n))}}(r,...e)}return r}(gx),xx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr(),t=arguments.length>1?arguments[1]:void 0;e=Tn(e);const n=qr(e,jy).getImmediate({identifier:t}),r=dn("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:mn(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(gx),bx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fy;const n=qr(Tn(e),Oy).getImmediate({identifier:t}),r=dn("functions");return r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(Tn(e),t,n)}(n,...r),n}(gx),wx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();return px().then(e=>{if(!e)throw Jv.create("unsupported-browser")},e=>{throw Jv.create("indexed-db-unsupported")}),qr(Tn(e),"messaging").getImmediate()}(gx),Nx=new Ki,kx=async()=>{try{const e=await async function(e,t,n){if(Wr(e.app))return Promise.reject(ps(e,"operation-not-supported-in-this-environment"));const r=Ni(e);ys(e,t,qi);const s=Ta(r,n);return new Ma(r,"signInViaPopup",t,s).executeNotNull()}(yx,Nx);return{success:!0,user:e.user}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:e.message}}},_x=async(e,t)=>{try{const n=await function(e,t,n){return Wr(e.app)?Promise.reject(gs(e)):ra(Tn(e),zi.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&sa(e),t})}(yx,e,t);return{success:!0,user:n.user}}catch(n){return console.error("Email sign in error:",n),{success:!1,error:n.message}}},Sx=async(e,t,n)=>{try{const r=await async function(e,t,n){if(Wr(e.app))return Promise.reject(gs(e));const r=Ni(e),s=Ii(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qi),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&sa(e),t}),a=await Ji._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(yx,e,t);return await ag(Zp(vx,"users",r.user.uid),{displayName:n,email:r.user.email},{merge:!0}),{success:!0,user:r.user}}catch(r){return console.error("Email sign up error:",r),{success:!1,error:r.message}}},Ex=async()=>{try{return await function(e){return Tn(e).signOut()}(yx),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e.message}}};const jx=new class{constructor(){this.sessionId=this.generateSessionId(),this.userId=null,this.userAgent=navigator.userAgent,this.startTime=Date.now(),this.errors=[],this.performance=[],this.setupErrorHandlers()}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}setUser(e){this.userId=e}setupErrorHandlers(){window.addEventListener("error",e=>{var t;this.logError({type:"uncaught_error",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{var t,n;this.logError({type:"unhandled_promise",message:(null===(t=e.reason)||void 0===t?void 0:t.message)||String(e.reason),stack:null===(n=e.reason)||void 0===n?void 0:n.stack})}),this.trackPerformance()}logError(e){const t=Ve(Ve({},e),{},{sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href,userAgent:this.userAgent});this.errors.push(t),this.sendToFirestore("errors",t),console.error("Error tracked:",t)}logCustomError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logError({type:"custom_error",message:e,details:t,stack:(new Error).stack})}trackPerformance(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&this.logPerformance({type:"page_load",metrics:{dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,dom:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,load:e.loadEventEnd-e.loadEventStart,total:e.loadEventEnd-e.fetchStart}})},0)});const e=new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>1e3&&this.logPerformance({type:"slow_resource",name:t.name,duration:t.duration,size:t.transferSize})});e.observe({entryTypes:["resource","measure"]})}logPerformance(e){const t=Ve(Ve({},e),{},{sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href});this.performance.push(t),this.sendToFirestore("performance",t)}trackAction(e){const t={action:e,details:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href};this.sendToFirestore("user_actions",t)}trackPageView(e){this.trackAction("page_view",{page:e})}trackFunnelStep(e,t){const n={funnel:e,step:t,metadata:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href};this.sendToFirestore("funnel_events",n)}async sendToFirestore(e,t){try{await cg($p(vx,e),Ve(Ve({},t),{},{createdAt:cl.now()}))}catch(n){console.error("Failed to send to Firestore:",n),this.storeLocally(e,t)}}storeLocally(e,t){try{const n="besties_".concat(e),r=JSON.parse(localStorage.getItem(n)||"[]");r.push(t),r.length>100&&r.shift(),localStorage.setItem(n,JSON.stringify(r))}catch(n){console.error("Failed to store locally:",n)}}getSessionSummary(){return{sessionId:this.sessionId,userId:this.userId,duration:Date.now()-this.startTime,errors:this.errors.length,url:window.location.href,userAgent:this.userAgent}}},Cx=jx;var Ix=n(579);const Tx=()=>{const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),d=re();(0,s.useEffect)(()=>{Cx.trackFunnelStep("signup","view_login_page")},[]);const h=async()=>{u(!0),Cx.trackFunnelStep("signup","click_google_signin");const e=await kx();u(!1),e.success?(Cx.trackFunnelStep("signup","complete_google_signin"),tn.success("Welcome to Besties!"),d("/onboarding")):(Cx.logCustomError("Google sign-in failed",{error:e.error}),tn.error(e.error||"Sign in failed"))};return(0,Ix.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"w-full max-w-md",children:[(0,Ix.jsxs)("div",{className:"text-center mb-8 animate-fade-in",children:[(0,Ix.jsx)("h1",{className:"font-display text-6xl text-gradient mb-2",children:"Besties"}),(0,Ix.jsx)("p",{className:"text-xl text-text-secondary font-semibold",children:"Your besties have your back \ud83d\udc9c"})]}),(0,Ix.jsxs)("div",{className:"card p-8 animate-slide-up",children:[(0,Ix.jsxs)("button",{onClick:h,disabled:c,className:"w-full btn btn-primary mb-3",children:[(0,Ix.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,Ix.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Ix.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Ix.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Ix.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Ix.jsxs)("button",{onClick:h,disabled:!0,className:"w-full btn bg-[#1877F2] text-white hover:bg-[#166FE5] mb-6 opacity-50 cursor-not-allowed",title:"Facebook login coming soon",children:[(0,Ix.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook (Coming Soon)"]}),(0,Ix.jsxs)("div",{className:"relative mb-6",children:[(0,Ix.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Ix.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Ix.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Ix.jsx)("span",{className:"px-2 bg-white text-text-secondary",children:"Or"})})]}),(0,Ix.jsxs)("form",{onSubmit:async t=>{let r;t.preventDefault(),u(!0),Cx.trackFunnelStep("signup",o?"click_email_signup":"click_email_signin"),r=o?await Sx(e,n,i):await _x(e,n),u(!1),r.success?(Cx.trackFunnelStep("signup",o?"complete_email_signup":"complete_email_signin"),tn.success(o?"Account created!":"Welcome back!"),d(o?"/onboarding":"/")):(Cx.logCustomError("Email auth failed",{error:r.error,isSignUp:o}),tn.error(r.error||"Authentication failed"))},className:"space-y-4",children:[o&&(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Display Name"}),(0,Ix.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"input",placeholder:"Your name",required:!0})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Email"}),(0,Ix.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"input",placeholder:"you@example.com",required:!0})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Password"}),(0,Ix.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,minLength:6})]}),(0,Ix.jsx)("button",{type:"submit",disabled:c,className:"w-full btn btn-secondary",children:c?"Please wait...":o?"Sign Up":"Sign In"})]}),(0,Ix.jsx)("div",{className:"mt-6 text-center",children:(0,Ix.jsx)("button",{onClick:()=>l(!o),className:"text-primary font-semibold hover:underline",children:o?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),(0,Ix.jsx)("div",{className:"text-center mt-6 text-sm text-text-secondary",children:(0,Ix.jsx)("p",{children:"By continuing, you agree to our Terms of Service"})})]})})},Ax=(0,s.createContext)(),Px=()=>{const e=(0,s.useContext)(Ax);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Rx=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),c=(0,s.useRef)(null),u=async(e,t)=>{if(e&&t&&t!==e.uid)try{const n=Zp(vx,"users",t);if(!(await rg(n)).exists())return console.log("Invalid invite - user does not exist"),void localStorage.removeItem("pending_invite");const r=[Mm($p(vx,"besties"),Fm("requesterId","==",t),Fm("recipientId","==",e.uid)),Mm($p(vx,"besties"),Fm("requesterId","==",e.uid),Fm("recipientId","==",t)),Mm($p(vx,"besties"),Fm("requesterId","==",t),Fm("recipientPhone","==",e.phoneNumber||e.email))];let s=!1;for(let t of r){const n=await ig(t);if(!n.empty){const t=n.docs[0];await og(Zp(vx,"besties",t.id),{status:"accepted",acceptedAt:cl.now(),recipientId:e.uid}),s=!0;break}}s||await cg($p(vx,"besties"),{requesterId:t,recipientId:e.uid,status:"accepted",acceptedAt:cl.now(),createdAt:cl.now()}),localStorage.removeItem("pending_invite")}catch(n){console.error("Auto-add bestie failed:",n)}};return(0,s.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("invite");e&&(localStorage.setItem("pending_invite",e),window.history.replaceState({},"","/"),yx.currentUser&&u(yx.currentUser,e))},[]),(0,s.useEffect)(()=>{const e=yx.onAuthStateChanged(async e=>{if(r(e),e){Cx.setUser(e.uid);const t=Zp(vx,"users",e.uid),n=await rg(t);if(n.exists()){const e={lastActive:cl.now()};void 0===n.data().onboardingCompleted&&(e.onboardingCompleted=!0),await og(t,e)}else await ag(t,{displayName:e.displayName||"New User",email:e.email,phoneNumber:e.phoneNumber||null,photoURL:e.photoURL||null,stats:{joinedAt:cl.now(),totalCheckIns:0,completedCheckIns:0,alertedCheckIns:0,totalBesties:0},notifications:{whatsapp:!1,email:!0},smsSubscription:{active:!1},lastActive:cl.now(),onboardingCompleted:!1});const r=localStorage.getItem("pending_invite");r&&await u(e,r),c.current&&c.current(),c.current=ug(t,e=>{e.exists()&&a(Ve({id:e.id},e.data())),l(!1)})}else c.current&&(c.current(),c.current=null),Cx.setUser(null),a(null),l(!1)});return()=>{e(),c.current&&c.current()}},[]),(0,Ix.jsx)(Ax.Provider,{value:{currentUser:n,userData:i,loading:o},children:t})},Dx=e=>{let{userId:t,onAddClick:n}=e;const r=re(),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(!0),[d,h]=(0,s.useState)(null),[f,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(t)try{const[e,n]=await Promise.all([ig(Mm($p(vx,"besties"),Fm("requesterId","==",t),Fm("status","==","accepted"))),ig(Mm($p(vx,"besties"),Fm("recipientId","==",t),Fm("status","==","accepted")))]),r=[];for(const t of e.docs){const e=t.data(),n=await rg(Zp(vx,"users",e.recipientId));r.push({id:e.recipientId,name:n.exists()?n.data().displayName:"Bestie",photoURL:n.exists()?n.data().photoURL:null})}for(const t of n.docs){const e=t.data(),n=await rg(Zp(vx,"users",e.requesterId));r.push({id:e.requesterId,name:n.exists()?n.data().displayName:"Bestie",photoURL:n.exists()?n.data().photoURL:null})}a(r);const s=await rg(Zp(vx,"users",t)),i=s.exists()&&s.data().featuredCircle||[],o=i.map(e=>r.find(t=>t.id===e)).filter(Boolean);if(o.length<r.length&&o.length<5){const e=r.filter(e=>!i.includes(e.id));o.push(...e.slice(0,5-o.length))}l(o.slice(0,5)),u(!1)}catch(e){console.error("Error loading besties:",e),u(!1)}})()},[t]);const m=async e=>{const n=e.map(e=>e.id);await og(Zp(vx,"users",t),{featuredCircle:n})},g=Array.from({length:5},(e,t)=>o[t]||null);return c?(0,Ix.jsx)("div",{className:"card p-8 flex items-center justify-center",children:(0,Ix.jsx)("div",{className:"spinner"})}):(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("div",{className:"relative w-full max-w-xs mx-auto",style:{paddingBottom:"100%"},children:(0,Ix.jsxs)("div",{className:"absolute inset-0",children:[(0,Ix.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:(0,Ix.jsx)("div",{className:"w-20 h-20 bg-gradient-primary rounded-full flex items-center justify-center text-white text-base font-display shadow-lg border-2 border-white",children:"YOU"})}),g.map((e,t)=>{const s=(72*t-90)*(Math.PI/180),i=50+80*Math.cos(s),a=50+80*Math.sin(s);return(0,Ix.jsx)("div",{className:"absolute",style:{left:"".concat(i,"%"),top:"".concat(a,"%"),transform:"translate(-50%, -50%)"},children:e?(0,Ix.jsxs)("div",{className:"relative group",children:[(0,Ix.jsx)("button",{onClick:()=>h(d===t?null:t),className:"relative w-14 h-14 bg-gradient-secondary rounded-full flex items-center justify-center text-white text-lg font-display shadow-lg border-2 border-white hover:scale-110 transition-transform overflow-hidden",children:e.photoURL?(0,Ix.jsx)("img",{src:e.photoURL,alt:e.name,className:"w-full h-full object-cover"}):e.name[0]}),(0,Ix.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:(0,Ix.jsx)("div",{className:"bg-text-primary text-white px-2 py-1 rounded-lg text-xs whitespace-nowrap",children:e.name})}),d===t&&(0,Ix.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-30 w-36",children:[(0,Ix.jsx)("button",{onClick:()=>{return t=e.id,r("/user/".concat(t)),void h(null);var t},className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udc64 View Profile"}),(0,Ix.jsx)("button",{onClick:()=>p(!0),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udd04 Replace"}),(0,Ix.jsx)("button",{onClick:()=>(async e=>{const t=o.filter((t,n)=>n!==e);l(t),await m(t),h(null),tn.success("Removed from circle")})(t),className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600",children:"\u274c Remove"})]})]}):n?(0,Ix.jsx)("button",{onClick:n,className:"w-14 h-14 border-3 border-dashed border-primary/40 rounded-full flex items-center justify-center text-primary text-xl hover:border-primary hover:bg-primary/10 transition-all hover:scale-110",children:"+"}):null},t)})]})}),(0,Ix.jsxs)("div",{className:"text-center mt-6",children:[(0,Ix.jsxs)("div",{className:"font-display text-base text-text-primary mb-1",children:[o.length,"/5 Besties in Circle"]}),(0,Ix.jsx)("div",{className:"text-xs text-text-secondary",children:"Your featured safety network \u2b50"})]}),f&&(0,Ix.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:(0,Ix.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full max-h-96 overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Ix.jsx)("h3",{className:"text-xl font-display mb-4",children:"Replace with:"}),(0,Ix.jsxs)("div",{className:"space-y-2",children:[i.filter(e=>!o.find(t=>t.id===e.id)).map(e=>(0,Ix.jsxs)("button",{onClick:()=>(async e=>{const t=[...o];t[d]=e,l(t),await m(t),p(!1),h(null),tn.success("Bestie replaced")})(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,Ix.jsx)("div",{className:"w-10 h-10 bg-gradient-secondary rounded-full flex items-center justify-center text-white font-display overflow-hidden",children:e.photoURL?(0,Ix.jsx)("img",{src:e.photoURL,alt:e.name,className:"w-full h-full object-cover"}):e.name[0]}),(0,Ix.jsx)("div",{className:"text-left",children:(0,Ix.jsx)("div",{className:"font-semibold",children:e.name})})]},e.id)),0===i.filter(e=>!o.find(t=>t.id===e.id)).length&&(0,Ix.jsx)("p",{className:"text-center text-gray-500 py-4",children:"All besties are in your circle!"})]}),(0,Ix.jsx)("button",{onClick:()=>p(!1),className:"mt-4 w-full btn btn-secondary",children:"Cancel"})]})})]})},Ox=()=>{const{currentUser:e,userData:t}=Px(),n=re(),[r,i]=(0,s.useState)("welcome"),[a,o]=(0,s.useState)(0),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{null!==t&&void 0!==t&&t.displayName&&!l?c(t.displayName):null!==e&&void 0!==e&&e.displayName&&!l&&c(e.displayName)},[t,e,l]);const g=[{emoji:"\ud83d\udc4b",title:"Welcome to Besties!",description:"Your personal safety check-in app that keeps your loved ones informed."},{emoji:"\u23f0",title:"How It Works",description:"Create a check-in with a time limit. If you don't mark yourself safe before time runs out, your besties get alerted."},{emoji:"\ud83d\udc9c",title:"Your Safety Network",description:"Add up to 5 besties to your circle. They'll be notified if you miss a check-in, so they can make sure you're okay."},{emoji:"\ud83d\udcf1",title:"Stay Connected",description:"Your besties get SMS alerts when you miss a check-in. They can also see your location and notes from your last check-in."},{emoji:"\u2728",title:"Let's Get Started!",description:"We'll help you set up your profile and add your first bestie. Then you'll be ready to create your first check-in!"}],y=g[a];(0,s.useEffect)(()=>{"bestie-circle"===r&&e&&v()},[r,e]);const v=async()=>{m(!0);try{const[t,n]=await Promise.all([ig(Mm($p(vx,"besties"),Fm("requesterId","==",e.uid),Fm("status","==","accepted"))),ig(Mm($p(vx,"besties"),Fm("recipientId","==",e.uid),Fm("status","==","accepted")))]);f(!t.empty||!n.empty)}catch(t){console.error("Error checking besties:",t)}finally{m(!1)}},x=async()=>{if(l.trim())try{await og(Zp(vx,"users",e.uid),{displayName:l.trim()}),i("photo")}catch(t){console.error("Error updating name:",t),tn.error("Failed to update name")}else tn.error("Please enter a name")},b=async t=>{const n=t.target.files[0];if(n)if(n.size>5242880)tn.error("Photo must be less than 5MB");else{d(!0);try{const t=Ty(xx,"profile-pictures/".concat(e.uid,"/").concat(Date.now(),"_").concat(n.name));await Cy(t,n);const r=await Iy(t);await og(Zp(vx,"users",e.uid),{photoURL:r}),tn.success("Photo uploaded!"),i("bestie-circle")}catch(r){console.error("Error uploading photo:",r),tn.error("Failed to upload photo")}finally{d(!1)}}},w=()=>{i("bestie-circle")},N=async()=>{try{await og(Zp(vx,"users",e.uid),{onboardingCompleted:!0}),n(h?"/create":"/profile")}catch(t){console.error("Error completing onboarding:",t),tn.error("Failed to complete onboarding")}};return"welcome"===r?(0,Ix.jsx)("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Ix.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83d\udc9c"}),(0,Ix.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Welcome to Besties!"}),(0,Ix.jsx)("p",{className:"text-xl text-white/90 mb-8",children:"Your personal safety network in your pocket"}),(0,Ix.jsx)("button",{onClick:()=>i("slides"),className:"btn bg-white text-primary hover:bg-white/90 text-lg px-8 py-4",children:"Get Started \u2192"})]})}):"slides"===r?(0,Ix.jsx)("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Ix.jsx)("div",{className:"text-7xl mb-6",children:y.emoji}),(0,Ix.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-4",children:y.title}),(0,Ix.jsx)("p",{className:"text-lg text-text-secondary mb-8",children:y.description}),(0,Ix.jsx)("div",{className:"flex justify-center gap-2 mb-8",children:g.map((e,t)=>(0,Ix.jsx)("div",{className:"w-2 h-2 rounded-full transition-all ".concat(t===a?"bg-primary w-6":"bg-gray-300")},t))}),(0,Ix.jsx)("div",{className:"flex gap-3",children:a<g.length-1?(0,Ix.jsxs)(Ix.Fragment,{children:[(0,Ix.jsx)("button",{onClick:()=>i("name"),className:"flex-1 btn btn-secondary",children:"Skip"}),(0,Ix.jsx)("button",{onClick:()=>o(a+1),className:"flex-1 btn btn-primary",children:"Next \u2192"})]}):(0,Ix.jsx)("button",{onClick:()=>i("name"),className:"w-full btn btn-primary text-lg py-4",children:"Let's check your details! \u2192"})})]})}):"name"===r?(0,Ix.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"max-w-md w-full",children:[(0,Ix.jsxs)("div",{className:"text-center mb-8",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc64"}),(0,Ix.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Is this name correct?"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"This is how your besties will see you"})]}),(0,Ix.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full p-4 border-2 border-gray-300 rounded-xl focus:border-primary focus:outline-none text-lg mb-6",placeholder:"Your name"}),(0,Ix.jsx)("button",{onClick:x,className:"w-full btn btn-primary text-lg py-4",children:"Looks Good! \u2713"})]})}):"photo"===r?(0,Ix.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"max-w-md w-full",children:[(0,Ix.jsxs)("div",{className:"text-center mb-8",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf7"}),(0,Ix.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Add a Profile Picture?"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Help your besties recognize you (optional)"})]}),(null===t||void 0===t?void 0:t.photoURL)&&(0,Ix.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Ix.jsx)("img",{src:t.photoURL,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-primary"})}),(0,Ix.jsxs)("label",{className:"block w-full mb-4",children:[(0,Ix.jsx)("div",{className:"btn btn-primary text-lg py-4 text-center cursor-pointer",children:u?"Uploading...":"\ud83d\udce4 Upload Photo"}),(0,Ix.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:u})]}),(0,Ix.jsx)("button",{onClick:w,className:"w-full btn btn-secondary text-lg py-4",disabled:u,children:"Skip for Now \u2192"})]})}):"bestie-circle"===r?p?(0,Ix.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,Ix.jsx)("div",{className:"spinner"})}):(0,Ix.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4 overflow-y-auto",children:(0,Ix.jsxs)("div",{className:"max-w-2xl w-full py-8",children:[(0,Ix.jsxs)("div",{className:"text-center mb-8",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\u2b50"}),(0,Ix.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Your Bestie Circle"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-6",children:"These are the 5 besties who get notified if you miss a check-in."}),!h&&(0,Ix.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:(0,Ix.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"\u26a0\ufe0f You need at least one bestie to create a check-in"})}),h&&(0,Ix.jsx)("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:(0,Ix.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"\u2705 Great! You already have a bestie in your circle"})})]}),(0,Ix.jsx)("div",{className:"mb-8",children:(0,Ix.jsx)(Dx,{})}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg mb-4 text-center",children:"How It Works:"}),(0,Ix.jsxs)("ul",{className:"space-y-3 text-sm text-text-secondary",children:[(0,Ix.jsxs)("li",{className:"flex gap-3",children:[(0,Ix.jsx)("span",{className:"text-2xl",children:"1\ufe0f\u20e3"}),(0,Ix.jsx)("span",{children:"Choose up to 5 besties for your safety circle"})]}),(0,Ix.jsxs)("li",{className:"flex gap-3",children:[(0,Ix.jsx)("span",{className:"text-2xl",children:"2\ufe0f\u20e3"}),(0,Ix.jsx)("span",{children:"They'll get SMS alerts if you miss a check-in"})]}),(0,Ix.jsxs)("li",{className:"flex gap-3",children:[(0,Ix.jsx)("span",{className:"text-2xl",children:"3\ufe0f\u20e3"}),(0,Ix.jsx)("span",{children:"You can change who's in your circle anytime"})]})]})]}),h?(0,Ix.jsx)("button",{onClick:N,className:"w-full btn btn-primary text-lg py-4",children:"Start Creating Check-Ins! \u2192"}):(0,Ix.jsxs)(Ix.Fragment,{children:[(0,Ix.jsx)("button",{onClick:N,className:"w-full btn btn-primary text-lg py-4 mb-3",children:"\u2795 Add Your First Bestie"}),(0,Ix.jsx)("p",{className:"text-xs text-center text-text-secondary",children:"You'll be taken to your profile. Click on a + button in your bestie circle to continue"})]})]})}):null},Lx=()=>{var e;const{userData:t}=Px(),n=te(),r=e=>n.pathname===e;return(0,Ix.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:(0,Ix.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Ix.jsx)(Pe,{to:"/",className:"flex items-center gap-2",children:(0,Ix.jsx)("span",{className:"font-display text-2xl text-gradient",children:"Besties"})}),(0,Ix.jsxs)("nav",{className:"hidden md:flex items-center gap-6",children:[(0,Ix.jsx)(Pe,{to:"/",className:"font-semibold transition-colors ".concat(r("/")?"text-primary":"text-text-secondary hover:text-primary"),children:"Home"}),(0,Ix.jsx)(Pe,{to:"/besties",className:"font-semibold transition-colors ".concat(r("/besties")?"text-primary":"text-text-secondary hover:text-primary"),children:"Besties"}),(0,Ix.jsx)(Pe,{to:"/profile",className:"font-semibold transition-colors ".concat(r("/profile")?"text-primary":"text-text-secondary hover:text-primary"),children:"Profile"})]}),(0,Ix.jsx)(Pe,{to:"/profile",className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display",children:(null===t||void 0===t||null===(e=t.displayName)||void 0===e?void 0:e[0])||"U"})]}),(0,Ix.jsxs)("div",{className:"md:hidden flex items-center justify-around pb-2",children:[(0,Ix.jsxs)(Pe,{to:"/",className:"flex flex-col items-center gap-1 ".concat(r("/")?"text-primary":"text-text-secondary"),children:[(0,Ix.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Ix.jsx)("span",{className:"text-xs font-semibold",children:"Home"})]}),(0,Ix.jsxs)(Pe,{to:"/besties",className:"flex flex-col items-center gap-1 ".concat(r("/besties")?"text-primary":"text-text-secondary"),children:[(0,Ix.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,Ix.jsx)("span",{className:"text-xs font-semibold",children:"Besties"})]}),(0,Ix.jsxs)(Pe,{to:"/profile",className:"flex flex-col items-center gap-1 ".concat(r("/profile")?"text-primary":"text-text-secondary"),children:[(0,Ix.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,Ix.jsx)("span",{className:"text-xs font-semibold",children:"Profile"})]})]})]})})};function Mx(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ux(e){return Mx(e,Date.now())}function Fx(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function Vx(e,t){const n=Fx(e),r=Fx(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}Math.pow(10,8);const Bx=43200;function zx(e,t){const n=Fx(e),r=Fx(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function qx(e){const t=Fx(e);return t.setHours(23,59,59,999),t}function Wx(e){const t=Fx(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Hx(e){const t=Fx(e);return+qx(t)===+Wx(t)}function Kx(e,t){const n=Fx(e),r=Fx(t),s=Vx(n,r),i=Math.abs(zx(n,r));let a;if(i<1)a=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let t=Vx(n,r)===-s;Hx(Fx(e))&&1===i&&1===Vx(e,r)&&(t=!1),a=s*(i-Number(t))}return 0===a?0:a}function Gx(e,t){return+Fx(e)-+Fx(t)}function Yx(e,t,n){const r=Gx(e,t)/1e3;return(s=null===n||void 0===n?void 0:n.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(r);var s}const Qx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Jx(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Xx={date:Jx({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Jx({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Jx({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},$x={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Zx(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function eb(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}var tb;const nb={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=Qx[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Xx,formatRelative:(e,t,n,r)=>$x[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Zx({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Zx({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Zx({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Zx({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Zx({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(tb={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(tb.matchPattern);if(!n)return null;const r=n[0],s=e.match(tb.parsePattern);if(!s)return null;let i=tb.valueCallback?tb.valueCallback(s[0]):s[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:eb({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:eb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:eb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:eb({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:eb({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let rb={};function sb(){return rb}function ib(e){const t=Fx(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ab(e,t,n){var r,s;const i=sb(),a=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:i.locale)&&void 0!==r?r:nb,o=Vx(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:null===n||void 0===n?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=Fx(t),u=Fx(e)):(c=Fx(e),u=Fx(t));const d=Yx(u,c),h=(ib(u)-ib(c))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return null!==n&&void 0!==n&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,l):d<10?a.formatDistance("lessThanXSeconds",10,l):d<20?a.formatDistance("lessThanXSeconds",20,l):d<40?a.formatDistance("halfAMinute",0,l):d<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):0===f?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",f,l);if(f<45)return a.formatDistance("xMinutes",f,l);if(f<90)return a.formatDistance("aboutXHours",1,l);if(f<1440){const e=Math.round(f/60);return a.formatDistance("aboutXHours",e,l)}if(f<2520)return a.formatDistance("xDays",1,l);if(f<Bx){const e=Math.round(f/1440);return a.formatDistance("xDays",e,l)}if(f<86400)return p=Math.round(f/Bx),a.formatDistance("aboutXMonths",p,l);if(p=Kx(u,c),p<12){const e=Math.round(f/Bx);return a.formatDistance("xMonths",e,l)}{const e=p%12,t=Math.trunc(p/12);return e<3?a.formatDistance("aboutXYears",t,l):e<9?a.formatDistance("overXYears",t,l):a.formatDistance("almostXYears",t+1,l)}}function ob(e,t){return ab(e,Ux(e),t)}const lb=Ky(bx,"extendCheckIn"),cb=Ky(bx,"completeCheckIn"),ub=Ky(bx,"sendBestieInvite"),db=Ky(bx,"acceptBestieRequest"),hb=Ky(bx,"declineBestieRequest"),fb=Ky(bx,"triggerEmergencySOS"),pb=Ky(bx,"createCheckoutSession"),mb=Ky(bx,"createPortalSession"),gb={extendCheckIn:lb,completeCheckIn:cb,sendBestieInvite:ub,acceptBestieRequest:db,declineBestieRequest:hb,triggerEmergencySOS:fb,createCheckoutSession:pb,createPortalSession:mb},yb=[{title:"You're Safe!",subtitle:"Your besties have been notified \ud83d\udc9c",emoji:"\u2705"},{title:"Way to Go!",subtitle:"You're taking care of yourself!",emoji:"\ud83c\udf89"},{title:"Safety First!",subtitle:"Your besties are proud of you!",emoji:"\u2b50"},{title:"Great Job!",subtitle:"Staying safe makes everyone happy!",emoji:"\ud83d\udc9c"},{title:"You Did It!",subtitle:"Another successful check-in!",emoji:"\ud83c\udf8a"},{title:"Well Done!",subtitle:"Keep up the great safety habits!",emoji:"\u2728"},{title:"Amazing!",subtitle:"You're making safety a priority!",emoji:"\ud83c\udf1f"},{title:"Perfect!",subtitle:"Your besties can rest easy now!",emoji:"\ud83d\udcaf"}],vb=()=>{const e=(0,s.useMemo)(()=>yb[Math.floor(Math.random()*yb.length)],[]);return(0,Ix.jsxs)("div",{className:"card p-8 bg-gradient-primary text-white text-center overflow-hidden relative",children:[(0,Ix.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((e,t)=>(0,Ix.jsx)("div",{className:"absolute text-2xl animate-bounce-slow",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(2*Math.random(),"s")},children:["\ud83c\udf89","\u2728","\ud83d\udc9c","\ud83c\udf8a","\u2b50"][Math.floor(5*Math.random())]},t))}),(0,Ix.jsxs)("div",{className:"relative z-10",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:e.emoji}),(0,Ix.jsx)("h2",{className:"font-display text-3xl mb-2",children:e.title}),(0,Ix.jsx)("p",{className:"text-lg opacity-90 mb-4",children:e.subtitle}),(0,Ix.jsx)("div",{className:"text-sm opacity-75",children:"Check-in completed successfully"})]})]})},xb=e=>{var t;let{checkIn:n}=e;const[r,i]=(0,s.useState)(0),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(n.notes||""),[p,m]=(0,s.useState)(n.photoURL||null),[g,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=()=>{const e=n.alertTime.toDate()-new Date;i(Math.max(0,e))};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[n.alertTime]);const v=async()=>{c(!0);const e=tn.loading("Marking you safe...");try{var t;const s=await gb.completeCheckIn({checkInId:n.id});var r;if(null===(t=s.data)||void 0===t||!t.success)throw new Error((null===(r=s.error)||void 0===r?void 0:r.message)||"Failed to complete check-in");{const t=Zp(vx,"checkins",n.id),r=await rg(t);if(!r.exists()||"completed"!==r.data().status)throw new Error("Check-in status verification failed");tn.success("You're safe! \ud83d\udc9c",{id:e}),o(!0),setTimeout(()=>o(!1),3e3)}}catch(s){console.error("Error completing check-in:",s),"unavailable"===s.code?tn.error("Cannot reach server. Please check your internet connection.",{id:e}):tn.error(s.message||"Failed to complete check-in. Please try again.",{id:e})}finally{c(!1)}},x=async e=>{c(!0);const t=tn.loading("Extending check-in by ".concat(e," minutes..."));try{var r;const i=await gb.extendCheckIn({checkInId:n.id,additionalMinutes:e});var s;if(null===(r=i.data)||void 0===r||!r.success)throw new Error((null===(s=i.error)||void 0===s?void 0:s.message)||"Failed to extend check-in");{const r=Zp(vx,"checkins",n.id);if(!(await rg(r)).exists())throw new Error("Unable to verify extension");tn.success("Extended by ".concat(e," minutes!"),{id:t})}}catch(i){console.error("Error extending check-in:",i),"unavailable"===i.code?tn.error("Cannot reach server. Please check your internet connection.",{id:t}):tn.error(i.message||"Failed to extend check-in. Please try again.",{id:t})}finally{c(!1)}},b=async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)tn.error("Photo must be less than 5MB");else{y(!0);try{const e=Ty(xx,"checkins/".concat(n.id,"/").concat(Date.now(),"_").concat(t.name));await Cy(e,t);const r=await Iy(e);await og(Zp(vx,"checkins",n.id),{photoURL:r}),m(r),tn.success("Photo uploaded!")}catch(r){console.error("Error uploading photo:",r),tn.error("Failed to upload photo")}finally{y(!1)}}},w="alerted"===n.status;return a?(0,Ix.jsx)(vb,{}):(0,Ix.jsxs)("div",{className:"card p-6 ".concat(w?"border-2 border-danger":""),children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Ix.jsx)("div",{className:"flex-1",children:(0,Ix.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary",children:n.location}),w&&(0,Ix.jsx)("span",{className:"badge badge-warning text-xs",children:"ALERTED"})]})})}),(p||!w)&&(0,Ix.jsx)("div",{className:"mb-4",children:p?(0,Ix.jsxs)("div",{className:"relative",children:[(0,Ix.jsx)("img",{src:p,alt:"Check-in",className:"w-full h-48 object-cover rounded-xl"}),!w&&(0,Ix.jsxs)("label",{className:"absolute bottom-2 right-2 bg-white/90 hover:bg-white px-3 py-2 rounded-lg cursor-pointer text-sm font-semibold shadow-lg transition-all",children:["\ud83d\udcf7 Change Photo",(0,Ix.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:g})]})]}):!w&&(0,Ix.jsxs)("label",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-all",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcf7"}),(0,Ix.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:g?"Uploading...":"Add Photo"}),(0,Ix.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Click to upload (max 5MB)"}),(0,Ix.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:g})]})}),(0,Ix.jsx)("div",{className:"mb-4",children:u?(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-xl focus:border-primary focus:outline-none resize-none",rows:"3",placeholder:"Add notes about your check-in..."}),(0,Ix.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Ix.jsx)("button",{onClick:async()=>{try{await og(Zp(vx,"checkins",n.id),{notes:h}),d(!1),tn.success("Notes updated!")}catch(e){console.error("Error saving notes:",e),tn.error("Failed to save notes")}},className:"btn btn-primary text-sm flex-1",children:"\ud83d\udcbe Save Notes"}),(0,Ix.jsx)("button",{onClick:()=>{d(!1),f(n.notes||"")},className:"btn btn-secondary text-sm flex-1",children:"Cancel"})]})]}):(0,Ix.jsx)("div",{children:h?(0,Ix.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl",children:[(0,Ix.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,Ix.jsx)("div",{className:"text-xs font-semibold text-gray-500",children:"NOTES:"}),!w&&(0,Ix.jsx)("button",{onClick:()=>d(!0),className:"text-xs text-primary font-semibold hover:underline",children:"Edit"})]}),(0,Ix.jsx)("p",{className:"text-sm text-text-secondary",children:h})]}):!w&&(0,Ix.jsx)("button",{onClick:()=>d(!0),className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-3 text-sm font-semibold text-gray-600 hover:border-primary hover:bg-primary/5 transition-all",children:"\ud83d\udcdd Add Notes"})})}),(0,Ix.jsxs)("div",{className:"mb-4",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ix.jsx)("span",{className:"text-sm text-text-secondary",children:"Time remaining:"}),(0,Ix.jsx)("span",{className:"font-display text-xl ".concat(0===r?"text-danger":"text-primary"),children:0===r?"EXPIRED":(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),r=Math.floor(t%3600/60),s=t%60;return n>0?"".concat(n,"h ").concat(r,"m ").concat(s,"s"):"".concat(r,"m ").concat(s,"s")})(r)})]}),(0,Ix.jsx)("div",{className:"progress-bar",children:(0,Ix.jsx)("div",{className:"progress-fill",style:{width:"".concat((()=>{const e=60*n.duration*1e3,t=e-r;return Math.min(100,Math.max(0,t/e*100))})(),"%")}})}),!w&&(0,Ix.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[(0,Ix.jsx)("button",{onClick:()=>x(15),disabled:l,className:"btn btn-secondary text-sm py-2",children:"+15m"}),(0,Ix.jsx)("button",{onClick:()=>x(30),disabled:l,className:"btn btn-secondary text-sm py-2",children:"+30m"}),(0,Ix.jsx)("button",{onClick:()=>x(60),disabled:l,className:"btn btn-secondary text-sm py-2",children:"+1h"})]})]}),(0,Ix.jsx)("div",{className:"mb-4",children:(0,Ix.jsxs)("div",{className:"text-sm text-text-secondary mb-2",children:["Watching over you: ",(null===(t=n.bestieIds)||void 0===t?void 0:t.length)||0," besties"]})}),!w&&(0,Ix.jsx)("button",{onClick:v,disabled:l,className:"w-full btn btn-success text-lg mb-4",children:"\u2705 I'm Safe!"}),w&&(0,Ix.jsxs)("div",{className:"bg-danger/10 border border-danger rounded-xl p-4 text-center",children:[(0,Ix.jsx)("p",{className:"font-semibold text-danger mb-2",children:"\ud83d\udea8 Your besties have been alerted!"}),(0,Ix.jsx)("p",{className:"text-sm text-text-secondary mb-4",children:"They know you haven't checked in"}),(0,Ix.jsx)("button",{onClick:v,disabled:l,className:"btn btn-success w-full",children:"\u2705 I'm Safe! (False Alarm)"})]}),(0,Ix.jsxs)("div",{className:"mt-4 text-xs text-text-secondary text-center",children:["Started ",ob(n.createdAt.toDate(),{addSuffix:!0})]})]})},bb=e=>{let{onQuickCheckIn:t}=e;return(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Quick Check-In"}),(0,Ix.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{emoji:"\u2615",label:"Coffee Date",minutes:30,color:"from-amber-400 to-orange-500"},{emoji:"\ud83c\udf7d\ufe0f",label:"Dinner",minutes:60,color:"from-rose-400 to-pink-500"},{emoji:"\ud83c\udfac",label:"Movie",minutes:120,color:"from-purple-400 to-indigo-500"},{emoji:"\ud83c\udf7b",label:"Drinks",minutes:90,color:"from-blue-400 to-cyan-500"}].map(e=>(0,Ix.jsxs)("button",{onClick:()=>t(e.minutes),className:"card p-6 hover:shadow-card-hover transition-all hover:scale-105 active:scale-95 bg-gradient-to-br ".concat(e.color," text-white"),children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:e.emoji}),(0,Ix.jsx)("div",{className:"font-display text-lg mb-1",children:e.label}),(0,Ix.jsxs)("div",{className:"text-sm opacity-90",children:[e.minutes," minutes"]})]},e.label))})]})},wb=()=>{const[e,t]=(0,s.useState)(!1),n=async e=>{t(!0);try{const t=await gb.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:tn.error("Failed to start donation")}catch(n){console.error("Donation error:",n),tn.error("Failed to start donation")}finally{t(!1)}};return(0,Ix.jsxs)("div",{className:"card p-6 bg-gradient-to-br from-primary/5 to-secondary/5 border-2 border-primary/20",children:[(0,Ix.jsxs)("div",{className:"text-center mb-4",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc9c"}),(0,Ix.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Keep Besties Free"}),(0,Ix.jsx)("p",{className:"text-text-secondary text-sm",children:"Your donation helps us keep safety accessible to everyone"})]}),(0,Ix.jsxs)("div",{className:"space-y-3",children:[(0,Ix.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Ix.jsx)("button",{onClick:()=>n(1),disabled:e,className:"btn btn-secondary text-sm",children:"$1/mo"}),(0,Ix.jsx)("button",{onClick:()=>n(5),disabled:e,className:"btn btn-primary text-sm",children:"$5/mo"}),(0,Ix.jsx)("button",{onClick:()=>n(10),disabled:e,className:"btn btn-secondary text-sm",children:"$10/mo"})]}),(0,Ix.jsx)("div",{className:"text-xs text-text-secondary text-center",children:"100% goes to keeping the app free \ud83d\udc9c"})]})]})},Nb=e=>{let{templates:t=[],onSelect:n}=e;return 0===t.length?null:(0,Ix.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(e=>(0,Ix.jsxs)("button",{onClick:()=>n(e),className:"card p-4 text-left hover:shadow-card-hover transition-all hover:scale-105 active:scale-95",children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.name}),(0,Ix.jsxs)("div",{className:"text-sm text-text-secondary mb-2",children:["\ud83d\udccd ",e.location]}),(0,Ix.jsxs)("div",{className:"text-xs text-primary font-semibold",children:["\u23f0 ",e.duration," min"]})]},e.id))})},kb=()=>{const{currentUser:e,userData:t}=Px(),[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(null),o=()=>{r(!1),a(null),tn("SOS cancelled")},l=async()=>{try{let s="Location unavailable";if(navigator.geolocation)try{const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:3e3})});s="GPS: ".concat(e.coords.latitude.toFixed(4),", ").concat(e.coords.longitude.toFixed(4))}catch(n){console.error("Location error:",n)}await cg($p(vx,"emergency_sos"),{userId:e.uid,userName:(null===t||void 0===t?void 0:t.displayName)||"User",location:s,timestamp:cl.now(),status:"active",type:"sos",message:"\ud83d\udea8 EMERGENCY - User needs immediate help!"}),tn.success("\ud83d\udea8 Emergency alert sent to all besties!"),r(!1)}catch(s){console.error("Error sending SOS:",s),tn.error("Failed to send emergency alert"),r(!1)}};return n?(0,Ix.jsx)("div",{className:"fixed inset-0 bg-danger/95 z-50 flex items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-9xl font-display text-white mb-8 animate-pulse",children:i}),(0,Ix.jsx)("h2",{className:"text-3xl font-display text-white mb-4",children:"EMERGENCY SOS"}),(0,Ix.jsx)("p",{className:"text-xl text-white mb-8",children:"Sending alert to all besties..."}),(0,Ix.jsx)("button",{onClick:o,className:"btn bg-white text-danger text-xl px-12 py-4",children:"CANCEL"})]})}):(0,Ix.jsxs)("button",{onClick:()=>{a(5),r(!0);const e=setInterval(()=>{a(t=>t<=1?(clearInterval(e),l(),null):t-1)},1e3)},className:"fixed bottom-24 right-6 w-20 h-20 bg-danger text-white rounded-full shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 flex flex-col items-center justify-center transition-all duration-200 z-40 animate-pulse",title:"Emergency SOS - Hold for 5 seconds",children:[(0,Ix.jsx)("span",{className:"text-3xl",children:"\ud83c\udd98"}),(0,Ix.jsx)("span",{className:"text-xs font-bold",children:"SOS"})]})},_b=()=>{var e,t,n,r;const{currentUser:i,userData:a}=Px(),o=re(),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)([]),[h,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{a&&!a.onboardingCompleted&&o("/onboarding")},[a,o]),(0,s.useEffect)(()=>{if(!i)return;const e=ug(Mm($p(vx,"checkins"),Fm("userId","==",i.uid),Fm("status","in",["active","alerted"])),e=>{const t=[];e.forEach(e=>{t.push(Ve({id:e.id},e.data()))}),c(t),f(!1)},e=>{console.error("Error loading check-ins:",e),c([]),f(!1)}),t=ug(Mm($p(vx,"templates"),Fm("userId","==",i.uid)),e=>{const t=[];e.forEach(e=>{t.push(Ve({id:e.id},e.data()))}),d(t)},e=>{console.error("Error loading templates:",e),d([])});return()=>{e(),t()}},[i]);return h?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6 animate-fade-in",children:[(0,Ix.jsxs)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:["Hey ",(null===a||void 0===a?void 0:a.displayName)||"there","! \ud83d\udc4b"]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:l.length>0?"You have ".concat(l.length," active check-in").concat(l.length>1?"s":""):"Ready to check in?"})]}),0===l.length&&(0,Ix.jsx)(bb,{onQuickCheckIn:e=>{o("/create",{state:{quickMinutes:e}})}}),l.length>0&&(0,Ix.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"Active Check-Ins"}),l.map(e=>(0,Ix.jsx)(xb,{checkIn:e},e.id))]}),u.length>0&&0===l.length&&(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Your Templates"}),(0,Ix.jsx)(Nb,{templates:u,onSelect:e=>{o("/create",{state:{template:e}})}})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary",children:"Your Safety Stats"}),(0,Ix.jsx)("button",{onClick:()=>o("/history"),className:"text-primary font-semibold hover:underline text-sm",children:"View History \u2192"})]}),(0,Ix.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary",children:(null===a||void 0===a||null===(e=a.stats)||void 0===e?void 0:e.completedCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-ins"})]}),(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:(null===a||void 0===a||null===(t=a.stats)||void 0===t?void 0:t.totalBesties)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Besties"})]}),(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-accent",children:(null===a||void 0===a||null===(n=a.stats)||void 0===n?void 0:n.totalCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]})]})]}),!(null!==a&&void 0!==a&&null!==(r=a.donationStats)&&void 0!==r&&r.isActive)&&(0,Ix.jsx)(wb,{}),0===l.length&&(0,Ix.jsx)("button",{onClick:()=>o("/create"),className:"w-full btn btn-primary text-lg py-4",children:"\u2728 Create Custom Check-In"})]}),(0,Ix.jsx)(kb,{})]})},Sb={core:!0,auth:!0,checkIns:!0,besties:!0,templates:!0,quickButtons:!0,celebrationMessages:!0,gpsLocation:!0,manualLocation:!0,extendButtons:!0,bestieCircle:!0,badges:!0,shareableCards:!0,mediaUpload:!0,photoCapture:!0,donations:!0,smsSubscription:!0,emergency:!1,reversePin:!1,liveTracking:!1,videoRecording:!1,facebookLogin:!1,phoneAuth:!1},Eb=e=>!0===Sb[e],jb=()=>{const{currentUser:e,userData:t}=Px(),n=re(),r=te(),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(30),[c,u]=(0,s.useState)([]),[d,h]=(0,s.useState)(""),[f,p]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),x=(0,s.useRef)(null),b=(0,s.useRef)(null);(0,s.useEffect)(()=>{t&&!t.onboardingCompleted&&n("/onboarding")},[t,n]);(0,s.useEffect)(()=>{var e,t;if(Cx.trackFunnelStep("checkin","view_create_page"),w(),null!==(e=r.state)&&void 0!==e&&e.quickMinutes&&(Cx.trackFunnelStep("checkin","use_quick_button",{minutes:r.state.quickMinutes}),l(r.state.quickMinutes)),null!==(t=r.state)&&void 0!==t&&t.template){Cx.trackFunnelStep("checkin","use_template");const e=r.state.template;a(e.location||""),l(e.duration||30),u(e.bestieIds||[]),h(e.notes||"")}},[r.state]),(0,s.useEffect)(()=>{const e="AIzaSyCegUYW6OZ2rVE3V31ewJbzkhfrPbKzFgk";if(window.google&&window.google.maps&&window.google.maps.places)return void v(!0);const t=document.createElement("script");return t.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places"),t.async=!0,t.defer=!0,t.onload=()=>{v(!0)},t.onerror=()=>{console.error("Failed to load Google Maps API"),tn.error("Failed to load address autocomplete",{duration:2e3})},document.head.appendChild(t),()=>{t.parentNode&&t.parentNode.removeChild(t)}},[]),(0,s.useEffect)(()=>{if(y&&x.current){try{b.current=new window.google.maps.places.Autocomplete(x.current,{types:["establishment","geocode"],fields:["formatted_address","name","geometry"]}),b.current.addListener("place_changed",()=>{const e=b.current.getPlace();if(e.formatted_address){const t=e.name&&e.name!==e.formatted_address?"".concat(e.name,", ").concat(e.formatted_address):e.formatted_address;a(t)}})}catch(e){console.error("Error initializing autocomplete:",e)}return()=>{b.current&&window.google.maps.event.clearInstanceListeners(b.current)}}},[y]);const w=async()=>{if(e)try{const[t,n]=await Promise.all([ig(Mm($p(vx,"besties"),Fm("requesterId","==",e.uid),Fm("status","==","accepted"))),ig(Mm($p(vx,"besties"),Fm("recipientId","==",e.uid),Fm("status","==","accepted")))]),r=[];t.forEach(e=>{const t=e.data();r.push({id:t.recipientId,name:t.recipientName||"Bestie",phone:t.recipientPhone})}),n.forEach(e=>{const t=e.data();r.push({id:t.requesterId,name:t.requesterName||"Bestie",phone:t.requesterPhone})}),p(r)}catch(t){console.error("Error loading besties:",t),tn.error("Failed to load besties")}};return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Create Check-In"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Set up your safety check-in"})]}),(0,Ix.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),0===c.length)return Cx.trackFunnelStep("checkin","error_no_besties"),void tn.error("Please select at least one bestie");if(!i.trim())return Cx.trackFunnelStep("checkin","error_no_location"),void tn.error("Please enter a location");if(o<15||o>180)return void tn.error("Duration must be between 15 and 180 minutes");g(!0),Cx.trackFunnelStep("checkin","submit_checkin",{besties:c.length,duration:o,hasNotes:!!d});const r=tn.loading("Creating your check-in...");try{const t=new Date,s=new Date(t.getTime()+60*o*1e3),a={userId:e.uid,location:i,duration:o,alertTime:cl.fromDate(s),bestieIds:c,notes:d||null,status:"active",createdAt:cl.now(),lastUpdate:cl.now()},l=await cg($p(vx,"checkins"),a),u=await rg(Zp(vx,"checkins",l.id));if(!u.exists())throw new Error("Check-in was not saved properly. Please try again.");const h=u.data();if(h.userId!==e.uid||"active"!==h.status)throw new Error("Check-in data verification failed. Please try again.");if(!h.bestieIds||h.bestieIds.length!==c.length)throw new Error("Bestie list was not saved correctly. Please try again.");if(!c.every(e=>h.bestieIds.includes(e)))throw new Error("Bestie list verification failed. Please try again.");Cx.trackFunnelStep("checkin","complete_checkin"),tn.success("Check-in created! Stay safe! \ud83d\udc9c",{id:r}),n("/")}catch(s){console.error("Error creating check-in:",s),Cx.logCustomError("Failed to create check-in",{error:s.message}),"permission-denied"===s.code?tn.error("Permission denied. Please check your account settings.",{id:r}):"unavailable"===s.code?tn.error("Unable to connect to server. Please check your internet connection.",{id:r}):s.message.includes("verification failed")?tn.error(s.message,{id:r}):tn.error("Failed to create check-in. Please try again.",{id:r})}finally{g(!1)}},className:"space-y-6",children:[(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Where are you going? \ud83d\udccd"}),(0,Ix.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,Ix.jsx)("input",{ref:x,type:"text",value:i,onChange:e=>a(e.target.value),className:"input flex-1",placeholder:"Type an address or place name...",required:!0,autoComplete:"off"}),Eb("gpsLocation")&&(0,Ix.jsx)("button",{type:"button",onClick:()=>{Eb("gpsLocation")?navigator.geolocation?(g(!0),navigator.geolocation.getCurrentPosition(e=>{a("GPS: ".concat(e.coords.latitude.toFixed(4),", ").concat(e.coords.longitude.toFixed(4))),g(!1),tn.success("Location captured!")},e=>{g(!1),tn.error("Could not get location"),console.error("Geolocation error:",e)})):tn.error("Geolocation not supported"):tn.error("GPS location is not enabled")},className:"btn btn-secondary px-4",disabled:m,children:"\ud83d\udccd GPS"})]}),(0,Ix.jsx)("div",{className:"flex flex-wrap gap-2",children:["\ud83d\udccd Coffee Shop","\ud83c\udf7d\ufe0f Restaurant","\ud83c\udfac Cinema","\ud83c\udfe0 Their Place","\ud83c\udfb5 Concert/Event","\ud83c\udf7b Bar/Pub","\ud83c\udfc3 Gym","\ud83d\udecd\ufe0f Shopping Center"].map(e=>(0,Ix.jsx)("button",{type:"button",onClick:()=>a(e),className:"px-3 py-1 bg-accent/20 text-primary rounded-full text-sm hover:bg-accent/30 transition-colors",children:e},e))})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"How long? \u23f0"}),(0,Ix.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[15,30,60,120].map(e=>(0,Ix.jsx)("button",{type:"button",onClick:()=>l(e),className:"py-3 rounded-xl font-semibold transition-all ".concat(o===e?"bg-gradient-primary text-white shadow-lg":"bg-gray-100 text-text-primary hover:bg-gray-200"),children:e<60?"".concat(e,"m"):"".concat(e/60,"h")},e))}),(0,Ix.jsx)("input",{type:"range",min:"15",max:"180",step:"15",value:o,onChange:e=>l(parseInt(e.target.value)),className:"w-full"}),(0,Ix.jsxs)("div",{className:"text-center text-sm text-text-secondary mt-2",children:[o," minutes"]})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Who should we alert? \ud83d\udc9c (1-5)"}),0===f.length?(0,Ix.jsxs)("div",{className:"text-center py-8",children:[(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"You don't have any besties yet!"}),(0,Ix.jsx)("button",{type:"button",onClick:()=>n("/besties"),className:"btn btn-primary",children:"Add Your First Bestie"})]}):(0,Ix.jsx)("div",{className:"space-y-2",children:f.map(e=>(0,Ix.jsx)("button",{type:"button",onClick:()=>(e=>{if(c.includes(e))u(c.filter(t=>t!==e));else{if(c.length>=5)return void tn.error("Maximum 5 besties per check-in");u([...c,e])}})(e.id),className:"w-full p-4 rounded-xl border-2 transition-all text-left ".concat(c.includes(e.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"),children:(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ix.jsx)("div",{className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display",children:e.name[0]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:e.name}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:e.phone})]})]}),c.includes(e.id)&&(0,Ix.jsx)("div",{className:"text-primary text-xl",children:"\u2713"})]})},e.id))}),(0,Ix.jsxs)("div",{className:"mt-3 text-sm text-text-secondary",children:["Selected: ",c.length,"/5"]})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Notes (Optional) \ud83d\udcdd"}),(0,Ix.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"input min-h-[100px] resize-none",placeholder:"Any additional info for your besties..."})]}),(0,Ix.jsx)("button",{type:"submit",disabled:m||0===c.length,className:"w-full btn btn-primary text-lg py-4",children:m?"Creating...":"\ud83d\udee1\ufe0f Start Check-In"})]})]})]})},Cb=e=>{let{onClose:t}=e;const{userData:n}=Px(),[r,i]=(0,s.useState)(0),a=(0,s.useRef)(null),o="https://bestiesapp.web.app/?invite=".concat(null===n||void 0===n?void 0:n.uid),l=[{id:1,name:"Classic Pink",bgGradient:"linear-gradient(135deg, #FF6B9D 0%, #C06C84 100%)",emoji:"\ud83d\udc9c",title:"Let's Be Safety Besties!",subtitle:"".concat((null===n||void 0===n?void 0:n.displayName)||"Your friend"," wants you on their safety network")},{id:2,name:"Ocean Blue",bgGradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",emoji:"\ud83c\udf0a",title:"Join My Safety Circle",subtitle:"".concat((null===n||void 0===n?void 0:n.displayName)||"Your friend"," trusts you to be their safety bestie")},{id:3,name:"Sunset Orange",bgGradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",emoji:"\ud83c\udf05",title:"Stay Safe Together",subtitle:"".concat((null===n||void 0===n?void 0:n.displayName)||"Your friend"," invited you to Besties")},{id:4,name:"Forest Green",bgGradient:"linear-gradient(135deg, #0ba360 0%, #3cba92 100%)",emoji:"\ud83c\udf3f",title:"Safety Network Invite",subtitle:"Be a safety bestie for ".concat((null===n||void 0===n?void 0:n.displayName)||"your friend")},{id:5,name:"Lavender Dream",bgGradient:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",emoji:"\u2728",title:"Join Besties App",subtitle:"".concat((null===n||void 0===n?void 0:n.displayName)||"Your friend"," wants to stay connected and safe")},{id:6,name:"Bold Red",bgGradient:"linear-gradient(135deg, #eb3349 0%, #f45c43 100%)",emoji:"\u2764\ufe0f",title:"Be My Safety Buddy",subtitle:"".concat((null===n||void 0===n?void 0:n.displayName)||"Your friend"," needs you in their safety circle")}],c=l[r];return(0,Ix.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,Ix.jsxs)("div",{className:"card max-w-2xl w-full p-6 animate-scale-up max-h-[90vh] overflow-y-auto",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Choose Your Card"}),(0,Ix.jsx)("button",{onClick:t,className:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:"\u2715"})]}),(0,Ix.jsx)("div",{className:"mb-6",children:(0,Ix.jsxs)("div",{ref:a,className:"w-full rounded-2xl p-8 text-white text-center shadow-xl transition-all duration-300",style:{background:c.bgGradient},children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:c.emoji}),(0,Ix.jsx)("h3",{className:"font-display text-3xl mb-4",children:c.title}),(0,Ix.jsx)("p",{className:"text-lg opacity-90 mb-6",children:c.subtitle}),(0,Ix.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4",children:[(0,Ix.jsx)("div",{className:"text-sm font-semibold opacity-90 mb-1",children:"Join at:"}),(0,Ix.jsx)("div",{className:"text-sm font-mono break-all",children:"bestiesapp.web.app"})]})]})}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("div",{className:"text-sm font-semibold text-text-secondary mb-3",children:"Select a design:"}),(0,Ix.jsx)("div",{className:"grid grid-cols-3 gap-3",children:l.map((e,t)=>(0,Ix.jsxs)("button",{onClick:()=>i(t),className:"relative rounded-xl p-4 text-center transition-all ".concat(r===t?"ring-4 ring-primary scale-105":"hover:scale-105 opacity-70 hover:opacity-100"),style:{background:e.bgGradient},children:[(0,Ix.jsx)("div",{className:"text-3xl mb-1",children:e.emoji}),(0,Ix.jsx)("div",{className:"text-xs text-white font-semibold",children:e.name}),r===t&&(0,Ix.jsx)("div",{className:"absolute top-1 right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,Ix.jsx)("span",{className:"text-primary text-sm",children:"\u2713"})})]},e.id))})]}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Ix.jsxs)("button",{onClick:()=>{const e="".concat(c.emoji," *").concat(c.title,"*\n\n").concat(c.subtitle,"\n\n").concat(o),t=encodeURIComponent(e);window.open("https://wa.me/?text=".concat(t),"_blank")},className:"btn bg-[#25D366] text-white hover:bg-[#20BA5A] flex items-center justify-center gap-2",children:[(0,Ix.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),(0,Ix.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(o);window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(e),"_blank")},className:"btn bg-[#1877F2] text-white hover:bg-[#166FE5] flex items-center justify-center gap-2",children:[(0,Ix.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,Ix.jsxs)("button",{onClick:()=>{const e=encodeURIComponent("".concat(c.emoji," ").concat(c.title)),t=encodeURIComponent(o);window.open("https://twitter.com/intent/tweet?text=".concat(e,"&url=").concat(t),"_blank")},className:"btn bg-black text-white hover:bg-gray-800 flex items-center justify-center gap-2",children:[(0,Ix.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X (Twitter)"]}),(0,Ix.jsxs)("button",{onClick:()=>{const e="".concat(c.emoji," ").concat(c.title,"\n\n").concat(c.subtitle,"\n\n").concat(o),t=encodeURIComponent(e);window.location.href="sms:?body=".concat(t)},className:"btn bg-success text-white hover:bg-green-600 flex items-center justify-center gap-2",children:[(0,Ix.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"SMS"]})]}),(0,Ix.jsx)("button",{onClick:async()=>{const e="".concat(c.emoji," ").concat(c.title,"\n\n").concat(c.subtitle,"\n\n").concat(o);try{await navigator.clipboard.writeText(e),tn.success("Card copied to clipboard!")}catch(t){tn.error("Failed to copy")}},className:"w-full btn btn-primary",children:"\ud83d\udccb Copy Card & Link"})]})})},Ib=()=>{var e,t,n,r,i,a,o;const{currentUser:l,userData:c}=Px(),u=re(),[d,h]=(0,s.useState)([]),[f,p]=(0,s.useState)(!0),[m,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{y()},[l]);const y=async()=>{if(l)try{const e=await rg(Zp(vx,"badges",l.uid));e.exists()&&h(e.data().badges||[]),p(!1)}catch(e){console.error("Error loading badges:",e),p(!1)}},v=d.slice(0,3);return f?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"card p-6 mb-6 text-center",children:[(0,Ix.jsx)("div",{className:"w-24 h-24 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-4xl font-display overflow-hidden",children:null!==c&&void 0!==c&&c.photoURL?(0,Ix.jsx)("img",{src:c.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===c||void 0===c||null===(e=c.displayName)||void 0===e?void 0:e[0])||(null===l||void 0===l||null===(t=l.email)||void 0===t?void 0:t[0])||"U"}),(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:(null===c||void 0===c?void 0:c.displayName)||"User"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:null===l||void 0===l?void 0:l.email}),(null===c||void 0===c||null===(n=c.profile)||void 0===n?void 0:n.bio)&&(0,Ix.jsxs)("p",{className:"text-text-secondary italic max-w-md mx-auto mb-4",children:['"',c.profile.bio,'"']}),(0,Ix.jsx)("button",{onClick:()=>u("/edit-profile"),className:"btn btn-secondary mb-2",children:"\u270f\ufe0f Edit Profile"}),(0,Ix.jsx)("button",{onClick:()=>g(!0),className:"btn bg-gradient-primary text-white",children:"\ud83d\udce4 Share Profile"})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Your Bestie Circle"}),(0,Ix.jsx)("button",{onClick:()=>u("/besties"),className:"text-primary font-semibold hover:underline",children:"Manage \u2192"})]}),(0,Ix.jsx)(Dx,{userId:null===l||void 0===l?void 0:l.uid,onAddClick:()=>u("/besties")})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Badges"}),(0,Ix.jsx)("button",{onClick:()=>u("/badges"),className:"text-primary font-semibold hover:underline",children:"View All \u2192"})]}),v.length>0?(0,Ix.jsx)("div",{className:"grid grid-cols-3 gap-4",children:v.map(e=>(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,Ix.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name})]},e.id))}):(0,Ix.jsxs)("div",{className:"card p-8 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Complete check-ins and add besties to earn badges!"})]})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Your Stats"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Ix.jsxs)("div",{className:"text-center p-4 bg-primary/5 rounded-xl",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary mb-1",children:(null===c||void 0===c||null===(r=c.stats)||void 0===r?void 0:r.completedCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed Check-ins"})]}),(0,Ix.jsxs)("div",{className:"text-center p-4 bg-secondary/5 rounded-xl",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary mb-1",children:(null===c||void 0===c||null===(i=c.stats)||void 0===i?void 0:i.totalBesties)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Besties"})]}),(0,Ix.jsxs)("div",{className:"text-center p-4 bg-success/5 rounded-xl",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-success mb-1",children:d.length}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Badges Earned"})]}),(0,Ix.jsxs)("div",{className:"text-center p-4 bg-accent/5 rounded-xl",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary mb-1",children:(null===c||void 0===c||null===(a=c.stats)||void 0===a?void 0:a.totalCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Check-ins"})]})]})]}),(null===c||void 0===c||null===(o=c.donationStats)||void 0===o?void 0:o.isActive)&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,Ix.jsx)("h3",{className:"font-display text-xl mb-2",children:"\ud83d\udc9c Thank You!"}),(0,Ix.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free for everyone"}),(0,Ix.jsxs)("div",{className:"text-2xl font-display",children:["$",c.donationStats.totalDonated," donated"]})]}),(0,Ix.jsx)("div",{className:"space-y-3",children:(0,Ix.jsx)("button",{onClick:()=>u("/settings"),className:"w-full btn btn-secondary",children:"\u2699\ufe0f Settings"})})]}),m&&(0,Ix.jsx)(Cb,{onClose:()=>g(!1)})]})},Tb=()=>{var e,t;const{userId:n}=function(){let{matches:e}=s.useContext($),t=e[e.length-1];return t?t.params:{}}(),{currentUser:r}=Px(),i=re(),[a,o]=(0,s.useState)(null),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(!0),[,h]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{m()},[n,r]);const m=async()=>{if(n&&r)if(n!==r.uid)try{const[e,t]=await Promise.all([ig(Mm($p(vx,"besties"),Fm("requesterId","==",r.uid),Fm("recipientId","==",n),Fm("status","==","accepted"))),ig(Mm($p(vx,"besties"),Fm("requesterId","==",n),Fm("recipientId","==",r.uid),Fm("status","==","accepted")))]),s=!e.empty||!t.empty;if(h(s),!s)return p("Only besties can view profiles"),void d(!1);const i=await rg(Zp(vx,"users",n));if(!i.exists())return p("User not found"),void d(!1);o(Ve({id:i.id},i.data()));const a=await rg(Zp(vx,"badges",n));a.exists()&&c(a.data().badges||[]),d(!1)}catch(f){console.error("Error loading user profile:",f),p("Failed to load profile"),d(!1)}else i("/profile")};if(u)return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]});if(f)return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:(0,Ix.jsxs)("div",{className:"card p-12 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:f}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-6",children:"You can only view profiles of people in your Bestie Circle"}),(0,Ix.jsx)("button",{onClick:()=>i("/besties"),className:"btn btn-primary",children:"Manage Besties"})]})})]});const g=l.slice(0,3);return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"card p-6 mb-6 text-center",children:[(0,Ix.jsx)("div",{className:"w-24 h-24 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-4xl font-display overflow-hidden",children:null!==a&&void 0!==a&&a.photoURL?(0,Ix.jsx)("img",{src:a.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===a||void 0===a||null===(e=a.displayName)||void 0===e?void 0:e[0])||"U"}),(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:(null===a||void 0===a?void 0:a.displayName)||"User"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-2",children:null===a||void 0===a?void 0:a.email}),(0,Ix.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-semibold",children:[(0,Ix.jsx)("span",{children:"\ud83d\udc9c"}),(0,Ix.jsx)("span",{children:"Your Bestie"})]}),(null===a||void 0===a||null===(t=a.profile)||void 0===t?void 0:t.bio)&&(0,Ix.jsxs)("p",{className:"text-text-secondary italic max-w-md mx-auto mt-4",children:['"',a.profile.bio,'"']})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Badges"}),g.length>0?(0,Ix.jsx)("div",{className:"grid grid-cols-3 gap-4",children:g.map((e,t)=>(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:e.icon||"\ud83c\udfc6"}),(0,Ix.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name||e})]},t))}):(0,Ix.jsxs)("div",{className:"card p-8 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"No badges earned yet"})]}),l.length>3&&(0,Ix.jsxs)("p",{className:"text-center text-text-secondary text-sm mt-3",children:["+ ",l.length-3," more badges"]})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcca"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Stats are private"})]}),(0,Ix.jsx)("button",{onClick:()=>i("/besties"),className:"w-full btn btn-secondary",children:"\u2190 Back to Besties"})]})]})},Ab=e=>{let{bestie:t}=e;const n=re();return(0,Ix.jsxs)("div",{className:"card p-4 cursor-pointer hover:shadow-lg transition-all",onClick:()=>{t.userId&&n("/user/".concat(t.userId))},children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ix.jsx)("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-lg flex-shrink-0",children:t.name[0]}),(0,Ix.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary truncate",children:t.name}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary truncate",children:t.phone})]})]}),t.role&&(0,Ix.jsx)("div",{className:"badge text-xs ".concat("guardian"===t.role?"badge-primary":"badge-success"),children:"guardian"===t.role?"\ud83d\udee1\ufe0f Watching Over You":"\ud83d\udc9c You Watch Over"})]})},Pb={AU:{code:"+61",pattern:/^0[2-9]\d{8}$/,format:e=>e.replace(/^0/,"+61"),name:"Australia"},US:{code:"+1",pattern:/^[2-9]\d{9}$/,format:e=>"+1"+e,name:"United States"},CA:{code:"+1",pattern:/^[2-9]\d{9}$/,format:e=>"+1"+e,name:"Canada"},GB:{code:"+44",pattern:/^0[1-9]\d{9}$/,format:e=>e.replace(/^0/,"+44"),name:"United Kingdom"},NZ:{code:"+64",pattern:/^0[2-9]\d{7,9}$/,format:e=>e.replace(/^0/,"+64"),name:"New Zealand"},IN:{code:"+91",pattern:/^[6-9]\d{9}$/,format:e=>"+91"+e,name:"India"},DE:{code:"+49",pattern:/^0[1-9]\d{9,10}$/,format:e=>e.replace(/^0/,"+49"),name:"Germany"},FR:{code:"+33",pattern:/^0[1-9]\d{8}$/,format:e=>e.replace(/^0/,"+33"),name:"France"},IT:{code:"+39",pattern:/^3\d{8,9}$/,format:e=>"+39"+e,name:"Italy"},ES:{code:"+34",pattern:/^[6-9]\d{8}$/,format:e=>"+34"+e,name:"Spain"},JP:{code:"+81",pattern:/^0[7-9]0\d{8}$/,format:e=>e.replace(/^0/,"+81"),name:"Japan"},CN:{code:"+86",pattern:/^1[3-9]\d{9}$/,format:e=>"+86"+e,name:"China"},BR:{code:"+55",pattern:/^[1-9]{2}9\d{8}$/,format:e=>"+55"+e,name:"Brazil"},MX:{code:"+52",pattern:/^[1-9]\d{9}$/,format:e=>"+52"+e,name:"Mexico"},ZA:{code:"+27",pattern:/^0[1-9]\d{8}$/,format:e=>e.replace(/^0/,"+27"),name:"South Africa"},SG:{code:"+65",pattern:/^[89]\d{7}$/,format:e=>"+65"+e,name:"Singapore"}},Rb=e=>{let{onClose:t,onSuccess:n}=e;const{userData:r}=Px(),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)("AU"),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(""),[f,p]=(0,s.useState)(!1),m="https://bestiesapp.web.app/?invite=".concat(null===r||void 0===r?void 0:r.uid),g="Hey! I'm using Besties to stay safe. Join me and be my safety bestie! ".concat(m);return(0,Ix.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,Ix.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"500px",maxHeight:"90vh",overflowY:"auto"},children:[(0,Ix.jsx)("h2",{children:"\ud83d\udcf1 Invite Bestie"}),(0,Ix.jsx)("p",{children:"They'll get an SMS invite to join the app"}),f?(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("button",{onClick:()=>p(!1),style:{marginBottom:"1rem",background:"none",border:"none",color:"#6b7280",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\u2190 Back to SMS Invite"}),(0,Ix.jsxs)("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px"},children:[(0,Ix.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.5rem",fontWeight:"bold"},children:"YOUR INVITE LINK:"}),(0,Ix.jsx)("div",{style:{fontSize:"0.875rem",wordBreak:"break-all",color:"#1f2937"},children:m})]}),(0,Ix.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,Ix.jsx)("button",{onClick:()=>{const e=encodeURIComponent(g);window.open("https://wa.me/?text=".concat(e),"_blank")},style:{padding:"0.75rem",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"WhatsApp"}),(0,Ix.jsx)("button",{onClick:()=>{const e=encodeURIComponent(m);window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(e),"_blank")},style:{padding:"0.75rem",background:"#1877F2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"Facebook"}),(0,Ix.jsx)("button",{onClick:()=>{const e=encodeURIComponent("Join me on Besties - your safety network!"),t=encodeURIComponent(m);window.open("https://twitter.com/intent/tweet?text=".concat(e,"&url=").concat(t),"_blank")},style:{padding:"0.75rem",background:"#000000",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"X (Twitter)"}),(0,Ix.jsx)("button",{onClick:()=>{const e=encodeURIComponent(g);window.location.href="sms:?body=".concat(e)},style:{padding:"0.75rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"SMS"})]}),(0,Ix.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(g),tn.success("Link copied to clipboard!")},style:{width:"100%",padding:"0.75rem",background:"#6366f1",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"\ud83d\udccb Copy Link"})]}):(0,Ix.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h("");const r=(e=>{const t=e.replace(/[\s-]/g,"");if(t.startsWith("+"))return t;const n=Pb[o];return n&&n.pattern.test(t)?n.format(t):t.startsWith("+")?t:"+"+t})(i),s=(a=r)?a.startsWith("+")?/^\+[1-9]\d{1,14}$/.test(a)?null:"Invalid phone number format":"Phone number must include country code":"Phone number is required";var a;if(s)return h(s),void tn.error(s);u(!0);try{await ub({recipientPhone:r}),tn.success("Invite sent via SMS! \u2713"),null===n||void 0===n||n(),t()}catch(d){console.error("Error:",d);const t=d.message||"Failed to send invite";h(t),tn.error(t)}finally{u(!1)}},children:[(0,Ix.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,Ix.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Country"}),(0,Ix.jsx)("select",{value:o,onChange:e=>l(e.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"1rem"},children:Object.entries(Pb).map(e=>{let[t,n]=e;return(0,Ix.jsxs)("option",{value:t,children:[n.name," (",n.code,")"]},t)})})]}),(0,Ix.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,Ix.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Phone Number"}),(0,Ix.jsx)("input",{type:"tel",placeholder:"AU"===o?"0412 345 678":"Enter phone number",value:i,onChange:e=>{const t=e.target.value;a(t),h("")},required:!0,className:d?"input-error":"",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:d?"2px solid #ef4444":"2px solid #e5e7eb",fontSize:"1rem"}}),d&&(0,Ix.jsx)("p",{className:"error-message",style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.5rem"},children:d}),(0,Ix.jsx)("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.5rem"},children:"AU"===o?"e.g., 0412 345 678 (auto-converts to +61)":"US"===o||"CA"===o?"e.g., 555 123 4567 (auto-converts to +1)":"Enter local format or international format (+...)"})]}),(0,Ix.jsx)("button",{type:"submit",disabled:c,style:{width:"100%",marginBottom:"0.75rem"},children:c?"Sending SMS...":"\ud83d\udce4 Send SMS Invite"}),(0,Ix.jsx)("button",{type:"button",onClick:()=>p(!0),style:{width:"100%",background:"#f3f4f6",color:"#1f2937",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"bold"},children:"\ud83d\udce4 Or Share Your Link"})]})]})})},Db=e=>{let{request:t}=e;const[n,r]=(0,s.useState)(!1);return(0,Ix.jsxs)("div",{className:"card p-4 border-2 border-primary/20",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Ix.jsx)("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-lg",children:t.requesterName[0]}),(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:t.requesterName}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:t.requesterPhone})]})]}),t.personalMessage&&(0,Ix.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 text-sm text-text-secondary italic",children:['"',t.personalMessage,'"']}),(0,Ix.jsxs)("div",{className:"flex gap-2",children:[(0,Ix.jsx)("button",{onClick:async()=>{tn("Decline feature coming soon")},disabled:n,className:"flex-1 btn btn-secondary text-sm",children:"Decline"}),(0,Ix.jsx)("button",{onClick:async()=>{r(!0);const e=await gb.acceptBestieRequest(t.id);r(!1),e.success?tn.success("You're now besties with ".concat(t.requesterName,"! \ud83d\udc9c")):tn.error("Failed to accept request")},disabled:n,className:"flex-1 btn btn-primary text-sm",children:n?"Accepting...":"Accept"})]})]})},Ob=()=>{const{currentUser:e}=Px(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!e)return;const t=ug(Mm($p(vx,"besties"),Fm("recipientId","==",e.uid),Fm("status","==","pending")),e=>{const t=[];e.forEach(e=>{t.push(Ve({id:e.id},e.data()))}),i(t)});return(async()=>{try{const[t,r]=await Promise.all([ig(Mm($p(vx,"besties"),Fm("requesterId","==",e.uid),Fm("status","==","accepted"))),ig(Mm($p(vx,"besties"),Fm("recipientId","==",e.uid),Fm("status","==","accepted")))]),s=[];t.forEach(e=>{const t=e.data();s.push({id:e.id,userId:t.recipientId,name:t.recipientName,phone:t.recipientPhone,role:"added"})}),r.forEach(e=>{const t=e.data();s.push({id:e.id,userId:t.requesterId,name:t.requesterName,phone:t.requesterPhone,role:"guardian"})}),n(s),c(!1)}catch(t){console.error("Error loading besties:",t),n([]),c(!1)}})(),()=>t()},[e]);const u=t.slice(0,5),d=t.slice(5);return l?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Your Besties"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Manage your safety network"})]}),r.length>0&&(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsxs)("h2",{className:"text-xl font-display text-text-primary mb-4",children:["Pending Requests (",r.length,")"]}),(0,Ix.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,Ix.jsx)(Db,{request:e},e.id))})]}),u.length>0&&(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Circle Besties (Top 5)"}),(0,Ix.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:u.map(e=>(0,Ix.jsx)(Ab,{bestie:e},e.id))})]}),d.length>0&&(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Other Besties"}),(0,Ix.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:d.map(e=>(0,Ix.jsx)(Ab,{bestie:e},e.id))})]}),0===t.length&&0===r.length&&(0,Ix.jsxs)("div",{className:"card p-12 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc9c"}),(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No besties yet!"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-6",children:"Add friends who'll have your back when you need them"}),(0,Ix.jsx)("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"Add Your First Bestie"})]}),t.length>0&&(0,Ix.jsx)("button",{onClick:()=>o(!0),className:"w-full btn btn-primary",children:"\u2795 Add Another Bestie"})]}),(0,Ix.jsx)("button",{onClick:()=>o(!0),className:"fab",title:"Add bestie",children:(0,Ix.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ix.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a&&(0,Ix.jsx)(Rb,{onClose:()=>o(!1)})]})},Lb=(0,s.createContext)(),Mb=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)});(0,s.useEffect)(()=>{localStorage.setItem("darkMode",JSON.stringify(n)),n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);return(0,Ix.jsx)(Lb.Provider,{value:{isDark:n,toggle:()=>r(!n)},children:t})},Ub={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAtcxae1F5cJljA2q8JbmcvYuXpxS_EGhw",REACT_APP_FIREBASE_AUTH_DOMAIN:"bestiesapp.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"bestiesapp",REACT_APP_FIREBASE_STORAGE_BUCKET:"bestiesapp.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"816425843858",REACT_APP_FIREBASE_APP_ID:"1:816425843858:web:60eaaa2ddd094b6e797a4b",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyCegUYW6OZ2rVE3V31ewJbzkhfrPbKzFgk",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51SR1CfEelNu8QcRAALMompJfse2B7tXODHYIpbcRcawyAN3fMi75mMAXpTyP66c444ydSE0Y01yczaw64TgyKW85005IvwbRX2"}.REACT_APP_FIREBASE_VAPID_KEY;const Fb=new class{constructor(){this.initialized=!1,this.token=null}isSupported(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}getPermissionStatus(){return this.isSupported()?Notification.permission:"unsupported"}async requestPermission(){if(!this.isSupported())throw new Error("Push notifications are not supported in this browser");if("granted"===Notification.permission)return!0;return"granted"===await Notification.requestPermission()}async initializeServiceWorker(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.log("Service Worker registered:",e),e}catch(e){return console.error("Service Worker registration failed:",e),null}}async getToken(){try{if(!Ub)return console.warn("VAPID key not configured"),null;const e=await this.initializeServiceWorker();if(!e)return console.error("Could not register service worker"),null;await new Promise(e=>setTimeout(e,1e3));const t=await async function(e,t){return ox(e=Tn(e),t)}(wx,{vapidKey:Ub,serviceWorkerRegistration:e});return t?(console.log("FCM Token obtained:",t),this.token=t,t):(console.warn("No FCM token available. Request permission to generate one."),null)}catch(e){return console.error("Error getting FCM token:",e),null}}async saveTokenToFirestore(e){try{const t=yx.currentUser;return t?(await og(Zp(vx,"users",t.uid),{fcmToken:e,notificationsEnabled:!0,lastTokenUpdate:new Date}),console.log("FCM token saved to Firestore"),!0):(console.warn("No user logged in to save token"),!1)}catch(t){return console.error("Error saving FCM token:",t),!1}}async enableNotifications(){try{if(!this.isSupported())return tn.error("Push notifications are not supported in your browser"),!1;if(!await this.requestPermission())return tn.error("Notification permission denied"),!1;const e=await this.getToken();if(!e)return tn.error("Could not get notification token"),!1;return await this.saveTokenToFirestore(e)?(this.setupForegroundListener(),this.initialized=!0,tn.success("Push notifications enabled!"),!0):(tn.error("Could not save notification settings"),!1)}catch(e){return console.error("Error enabling notifications:",e),tn.error("Failed to enable notifications"),!1}}async disableNotifications(){try{const e=yx.currentUser;return!!e&&(await og(Zp(vx,"users",e.uid),{notificationsEnabled:!1,fcmToken:null}),this.token=null,this.initialized=!1,tn.success("Push notifications disabled"),!0)}catch(e){return console.error("Error disabling notifications:",e),tn.error("Failed to disable notifications"),!1}}setupForegroundListener(){mx(wx,e=>{console.log("Foreground message received:",e);const{title:t,body:n,icon:r}=e.notification||{};tn.custom(e=>(0,Ix.jsxs)("div",{className:"".concat(e.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,Ix.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,Ix.jsxs)("div",{className:"flex items-start",children:[r&&(0,Ix.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,Ix.jsx)("img",{className:"h-10 w-10 rounded-full",src:r,alt:""})}),(0,Ix.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Ix.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t}),(0,Ix.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]})}),(0,Ix.jsx)("div",{className:"flex border-l border-gray-200",children:(0,Ix.jsx)("button",{onClick:()=>tn.dismiss(e.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-primary hover:text-primary/80 focus:outline-none",children:"Close"})})]}),{duration:6e3,position:"top-right"}),"Notification"in window&&"granted"===Notification.permission&&new Notification(t,{body:n,icon:r||"/logo192.png",badge:"/logo192.png",tag:"besties-notification",requireInteraction:!1})})}async sendTestNotification(){return"Notification"in window&&"granted"===Notification.permission&&(new Notification("Besties Test Notification",{body:"Push notifications are working!",icon:"/logo192.png",badge:"/logo192.png"}),!0)}},Vb=Fb,Bb=()=>{var e,t,n,r,i,a,o,l,c,u,d,h,f;const{currentUser:p,userData:m}=Px(),{isDark:g,toggle:y}=(()=>{const e=(0,s.useContext)(Lb);if(!e)throw new Error("useDarkMode must be used within DarkModeProvider");return e})(),v=re(),[x,b]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[k,_]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=Vb.isSupported();_(e),e&&N((null===m||void 0===m?void 0:m.notificationsEnabled)||!1)},[m]);const S=async e=>{if(p)try{var t;const n=!(null!==m&&void 0!==m&&null!==(t=m.notificationPreferences)&&void 0!==t&&t[e]);await og(Zp(vx,"users",p.uid),{["notificationPreferences.".concat(e)]:n}),tn.success("".concat(e," notifications ").concat(n?"enabled":"disabled"))}catch(n){console.error("Error updating notification:",n),tn.error("Failed to update notification setting")}},E=async e=>{b(!0);try{const t=await gb.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:tn.error("Failed to start donation")}catch(t){console.error("Donation error:",t),tn.error("Failed to start donation")}finally{b(!1)}};return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Settings"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Manage your account and preferences"})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Account"}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Email"}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:null===p||void 0===p?void 0:p.email})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Display Name"}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:null===m||void 0===m?void 0:m.displayName})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Member Since"}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:(null===m||void 0===m||null===(e=m.stats)||void 0===e||null===(t=e.joinedAt)||void 0===t?void 0:t.toDate().toLocaleDateString())||"Recently"})]})]})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Notifications"}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:"WhatsApp (Free)"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Get alerts via WhatsApp"})]}),(0,Ix.jsx)("button",{onClick:()=>S("whatsapp"),className:"w-12 h-6 rounded-full transition-colors ".concat(null!==m&&void 0!==m&&null!==(n=m.notificationPreferences)&&void 0!==n&&n.whatsapp?"bg-primary":"bg-gray-300"),children:(0,Ix.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==m&&void 0!==m&&null!==(r=m.notificationPreferences)&&void 0!==r&&r.whatsapp?"translate-x-6":"translate-x-1")})})]}),(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:"Email"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Get alerts via email"})]}),(0,Ix.jsx)("button",{onClick:()=>S("email"),className:"w-12 h-6 rounded-full transition-colors ".concat(null!==m&&void 0!==m&&null!==(i=m.notificationPreferences)&&void 0!==i&&i.email?"bg-primary":"bg-gray-300"),children:(0,Ix.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==m&&void 0!==m&&null!==(a=m.notificationPreferences)&&void 0!==a&&a.email?"translate-x-6":"translate-x-1")})})]}),(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:"Push Notifications"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:k?"Get browser push notifications for check-in reminders":"Not supported in this browser"})]}),(0,Ix.jsx)("button",{onClick:async()=>{if(k){b(!0);try{if(w){await Vb.disableNotifications()&&N(!1)}else{await Vb.enableNotifications()&&N(!0)}}catch(e){console.error("Push notification error:",e),tn.error("Failed to update push notifications")}finally{b(!1)}}else tn.error("Push notifications are not supported in your browser")},disabled:!k||x,className:"w-12 h-6 rounded-full transition-colors ".concat(k?w?"bg-primary":"bg-gray-300":"bg-gray-200 cursor-not-allowed"),children:(0,Ix.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(w?"translate-x-6":"translate-x-1")})})]}),(0,Ix.jsxs)("div",{className:"flex items-center justify-between opacity-50",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:"SMS"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Requires subscription"})]}),(0,Ix.jsx)("div",{className:"text-sm text-primary font-semibold",children:null!==m&&void 0!==m&&null!==(o=m.smsSubscription)&&void 0!==o&&o.active?"Active":"Inactive"})]})]})]}),!(null!==m&&void 0!==m&&null!==(l=m.smsSubscription)&&void 0!==l&&l.active)&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-secondary",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"SMS Alerts"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"Enable SMS alerts for just $1/month"}),(0,Ix.jsx)("button",{onClick:async()=>{b(!0);try{const e=await gb.createCheckoutSession({amount:1,type:"subscription"});e.data&&e.data.url?window.location.href=e.data.url:tn.error("Failed to start subscription")}catch(e){console.error("Subscription error:",e),tn.error("Failed to start subscription")}finally{b(!1)}},disabled:x,className:"btn btn-primary",children:"Subscribe for $1/month"})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Preferences"}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:"Dark Mode"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:g?"Dark theme enabled":"Light theme enabled"})]}),(0,Ix.jsx)("button",{onClick:y,className:"w-12 h-6 rounded-full transition-colors ".concat(g?"bg-primary":"bg-gray-300"),children:(0,Ix.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(g?"translate-x-6":"translate-x-1")})})]}),(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:"Keep My Data"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:null!==m&&void 0!==m&&null!==(c=m.settings)&&void 0!==c&&c.holdData?"Data kept indefinitely":"Data deleted after 24 hours"})]}),(0,Ix.jsx)("button",{onClick:async()=>{if(p)try{var e;const t=!(null!==m&&void 0!==m&&null!==(e=m.settings)&&void 0!==e&&e.holdData);await og(Zp(vx,"users",p.uid),{"settings.holdData":t}),tn.success(t?"Data will be kept indefinitely":"Data will be deleted after 24h")}catch(t){console.error("Error updating data retention:",t),tn.error("Failed to update setting")}},className:"w-12 h-6 rounded-full transition-colors ".concat(null!==m&&void 0!==m&&null!==(u=m.settings)&&void 0!==u&&u.holdData?"bg-primary":"bg-gray-300"),children:(0,Ix.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==m&&void 0!==m&&null!==(d=m.settings)&&void 0!==d&&d.holdData?"translate-x-6":"translate-x-1")})})]})]})]}),!(null!==m&&void 0!==m&&null!==(h=m.donationStats)&&void 0!==h&&h.isActive)&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Support Besties \ud83d\udc9c"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"Help us keep Besties free for everyone"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Ix.jsx)("button",{onClick:()=>E(1),disabled:x,className:"btn btn-secondary",children:"$1/mo"}),(0,Ix.jsx)("button",{onClick:()=>E(5),disabled:x,className:"btn btn-primary",children:"$5/mo"}),(0,Ix.jsx)("button",{onClick:()=>E(10),disabled:x,className:"btn btn-secondary",children:"$10/mo"})]})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Quick Access"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Ix.jsx)("button",{onClick:()=>v("/templates"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udccb Templates"})}),(0,Ix.jsx)("button",{onClick:()=>v("/favorites"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udccd Favorites"})}),(0,Ix.jsx)("button",{onClick:()=>v("/history"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udcca History"})}),(0,Ix.jsx)("button",{onClick:()=>v("/export-data"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udce5 Export Data"})}),(0,Ix.jsx)("button",{onClick:()=>v("/dev-analytics"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udcc8 Analytics"})}),(0,Ix.jsx)("button",{onClick:()=>v("/monitoring"),className:"btn bg-gradient-primary text-white text-left px-4 py-3",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udd0d Monitoring"})}),(0,Ix.jsx)("button",{onClick:()=>v("/error-dashboard"),className:"btn bg-red-500 text-white text-left px-4 py-3 hover:bg-red-600",children:(0,Ix.jsx)("div",{className:"text-sm",children:"\ud83d\udea8 Errors"})})]})]}),(null===m||void 0===m||null===(f=m.donationStats)||void 0===f?void 0:f.isActive)&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,Ix.jsx)("h2",{className:"text-xl font-display mb-2",children:"Thank You! \ud83d\udc9c"}),(0,Ix.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free"}),(0,Ix.jsxs)("div",{className:"text-2xl font-display",children:["$",m.donationStats.monthlyAmount,"/month"]}),(0,Ix.jsxs)("div",{className:"text-sm mt-2 opacity-80",children:["Total donated: $",m.donationStats.totalDonated]})]}),(0,Ix.jsx)("button",{onClick:async()=>{(await Ex()).success?(tn.success("Signed out successfully"),v("/login")):tn.error("Sign out failed")},className:"w-full btn bg-red-500 text-white hover:bg-red-600",children:"Sign Out"})]})]})},zb=()=>{const{currentUser:e,userData:t}=Px(),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)(!0),o=[{id:"safety_starter",name:"Safety Starter",description:"Complete 5 check-ins",icon:"\ud83d\udee1\ufe0f",color:"#4CAF50",requirement:5,stat:"completedCheckIns"},{id:"safety_pro",name:"Safety Pro",description:"Complete 25 check-ins",icon:"\u2b50",color:"#2196F3",requirement:25,stat:"completedCheckIns"},{id:"safety_master",name:"Safety Master",description:"Complete 50 check-ins",icon:"\ud83d\udc51",color:"#9C27B0",requirement:50,stat:"completedCheckIns"},{id:"friend_squad",name:"Friend Squad",description:"Add 3 besties",icon:"\ud83d\udc65",color:"#FF9800",requirement:3,stat:"totalBesties"},{id:"safety_circle",name:"Safety Circle",description:"Add 5 besties",icon:"\ud83e\udd1d",color:"#E91E63",requirement:5,stat:"totalBesties"},{id:"safety_network",name:"Safety Network",description:"Add 10 besties",icon:"\ud83c\udf10",color:"#00BCD4",requirement:10,stat:"totalBesties"},{id:"night_owl",name:"Night Owl",description:"Check-in after midnight",icon:"\ud83e\udd89",color:"#673AB7",requirement:1,stat:"nightOwl"},{id:"early_bird",name:"Early Bird",description:"Check-in before 6 AM",icon:"\ud83d\udc26",color:"#FFC107",requirement:1,stat:"earlyBird"},{id:"streak_master",name:"Streak Master",description:"7 days in a row",icon:"\ud83d\udd25",color:"#FF5722",requirement:7,stat:"streak"},{id:"active_donor",name:"Active Donor",description:"SMS subscription",icon:"\ud83d\udc9c",color:"#E91E63",requirement:1,stat:"donation"},{id:"location_lover",name:"Location Lover",description:"5 favorite locations",icon:"\ud83d\udccd",color:"#8BC34A",requirement:5,stat:"locations"},{id:"template_master",name:"Template Master",description:"3 templates created",icon:"\ud83d\udccb",color:"#FF9800",requirement:3,stat:"templates"}];(0,s.useEffect)(()=>{l()},[e]);const l=async()=>{if(e)try{const t=await rg(Zp(vx,"badges",e.uid));t.exists()&&r(t.data().badges||[])}catch(t){console.error("Error loading badges:",t)}finally{a(!1)}};if(i)return(0,Ix.jsx)("div",{className:"badges-page",children:(0,Ix.jsx)("div",{className:"loading",children:"Loading your badges..."})});const c=o.filter(e=>n.includes(e.id)),u=o.filter(e=>!n.includes(e.id));return(0,Ix.jsxs)("div",{className:"badges-page",children:[(0,Ix.jsxs)("div",{className:"badges-header",children:[(0,Ix.jsx)("h1",{children:"\ud83c\udfc6 Your Badges"}),(0,Ix.jsxs)("div",{className:"badge-stats",children:[(0,Ix.jsx)("span",{className:"earned-count",children:c.length}),(0,Ix.jsxs)("span",{className:"total-count",children:["/ ",o.length]})]})]}),c.length>0&&(0,Ix.jsxs)("div",{className:"badge-section",children:[(0,Ix.jsxs)("h2",{children:["\u2728 Earned (",c.length,")"]}),(0,Ix.jsx)("div",{className:"badges-grid",children:c.map(e=>(0,Ix.jsxs)("div",{className:"badge-card earned",style:{borderColor:e.color,background:"linear-gradient(135deg, ".concat(e.color,"15, ").concat(e.color,"05)")},children:[(0,Ix.jsx)("div",{className:"badge-icon",style:{color:e.color},children:e.icon}),(0,Ix.jsxs)("div",{className:"badge-info",children:[(0,Ix.jsx)("h3",{style:{color:e.color},children:e.name}),(0,Ix.jsx)("p",{children:e.description}),(0,Ix.jsx)("span",{className:"earned-label",style:{background:e.color},children:"\u2713 Earned"})]})]},e.id))})]}),u.length>0&&(0,Ix.jsxs)("div",{className:"badge-section",children:[(0,Ix.jsxs)("h2",{children:["\ud83d\udd12 Locked (",u.length,")"]}),(0,Ix.jsx)("div",{className:"badges-grid",children:u.map(e=>{const n=(e=>{var n,r,s;if(!t||!t.stats)return 0;let i=0;switch(e.stat){case"completedCheckIns":i=t.stats.completedCheckIns||0;break;case"totalBesties":i=t.stats.totalBesties||0;break;case"streak":i=t.stats.currentStreak||0;break;case"donation":i=null!==(n=t.donationStats)&&void 0!==n&&n.isActive?1:0;break;case"locations":i=(null===(r=t.favoriteLocations)||void 0===r?void 0:r.length)||0;break;case"templates":i=t.templateCount||0;break;case"nightOwl":case"earlyBird":i=null!==(s=t.stats)&&void 0!==s&&s[e.stat]?1:0;break;default:i=0}return Math.min(100,i/e.requirement*100)})(e),r=(e=>{var n,r,s;if(!t||!t.stats)return"0 / "+e.requirement;let i=0;switch(e.stat){case"completedCheckIns":i=t.stats.completedCheckIns||0;break;case"totalBesties":i=t.stats.totalBesties||0;break;case"streak":i=t.stats.currentStreak||0;break;case"donation":return null!==(n=t.donationStats)&&void 0!==n&&n.isActive?"Active":"Subscribe";case"locations":i=(null===(r=t.favoriteLocations)||void 0===r?void 0:r.length)||0;break;case"templates":i=t.templateCount||0;break;case"nightOwl":case"earlyBird":return null!==(s=t.stats)&&void 0!==s&&s[e.stat]?"Unlocked!":"Not yet";default:i=0}return"".concat(i," / ").concat(e.requirement)})(e);return(0,Ix.jsxs)("div",{className:"badge-card locked",children:[(0,Ix.jsx)("div",{className:"badge-icon",children:e.icon}),(0,Ix.jsxs)("div",{className:"badge-info",children:[(0,Ix.jsx)("h3",{children:e.name}),(0,Ix.jsx)("p",{children:e.description}),(0,Ix.jsxs)("div",{className:"badge-progress-container",children:[(0,Ix.jsx)("div",{className:"badge-progress-bar",children:(0,Ix.jsx)("div",{className:"badge-progress-fill",style:{width:"".concat(n,"%"),backgroundColor:e.color}})}),(0,Ix.jsx)("span",{className:"badge-progress-text",children:r})]})]})]},e.id)})})]})]})},qb=()=>{var e;const{currentUser:t,userData:n}=Px(),r=re(),[i,a]=(0,s.useState)((null===n||void 0===n?void 0:n.displayName)||""),[o,l]=(0,s.useState)((null===n||void 0===n||null===(e=n.profile)||void 0===e?void 0:e.bio)||""),[c,u]=(0,s.useState)((null===n||void 0===n?void 0:n.phoneNumber)||""),[d,h]=(0,s.useState)((null===t||void 0===t?void 0:t.email)||""),[f,p]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[y,v]=(0,s.useState)(null),[x,b]=(0,s.useState)((null===n||void 0===n?void 0:n.photoURL)||null),[w,N]=(0,s.useState)(!1);return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Edit Profile"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Update your personal information"})]}),(0,Ix.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f&&f!==m)tn.error("Passwords do not match");else if(f&&f.length<6)tn.error("Password must be at least 6 characters");else{N(!0);try{const e=await(async()=>{if(!y)return(null===n||void 0===n?void 0:n.photoURL)||null;try{const e=Ty(xx,"profiles/".concat(t.uid,"/").concat(Date.now(),"_").concat(y.name));return await Cy(e,y),await Iy(e)}catch(e){return console.error("Error uploading profile picture:",e),tn.error("Failed to upload profile picture"),(null===n||void 0===n?void 0:n.photoURL)||null}})();await og(Zp(vx,"users",t.uid),{displayName:i,phoneNumber:c,photoURL:e,"profile.bio":o,updatedAt:new Date}),d!==t.email&&(await function(e,t){const n=Tn(e);return Wr(n.auth.app)?Promise.reject(gs(n.auth)):ia(n,t,null)}(t,d),tn.success("Email updated - please verify your new email")),f&&(await function(e,t){return ia(Tn(e),null,t)}(t,f),tn.success("Password updated")),tn.success("Profile updated successfully!"),r("/profile")}catch(s){console.error("Error updating profile:",s),"auth/requires-recent-login"===s.code?tn.error("Please sign out and sign in again to update email/password"):tn.error(s.message||"Failed to update profile")}finally{N(!1)}}},className:"space-y-6",children:[(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("label",{className:"block text-lg font-display text-text-primary mb-4",children:"Profile Picture"}),(0,Ix.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Ix.jsx)("div",{className:"w-24 h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-3xl font-display overflow-hidden",children:x?(0,Ix.jsx)("img",{src:x,alt:"Profile",className:"w-full h-full object-cover"}):(null===i||void 0===i?void 0:i[0])||"U"}),(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void tn.error("File size must be less than 5MB");v(t),b(URL.createObjectURL(t))}},className:"hidden",id:"profile-picture"}),(0,Ix.jsx)("label",{htmlFor:"profile-picture",className:"btn btn-secondary cursor-pointer inline-block",children:"Choose Photo"}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary mt-2",children:"JPG, PNG or GIF. Max size 5MB"})]})]})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("h3",{className:"text-lg font-display text-text-primary mb-4",children:"Basic Information"}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Display Name"}),(0,Ix.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"input",placeholder:"Your name",required:!0})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Bio"}),(0,Ix.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),className:"input min-h-[80px] resize-none",placeholder:"Tell people about yourself...",maxLength:150}),(0,Ix.jsxs)("div",{className:"text-xs text-text-secondary mt-1",children:[o.length,"/150 characters"]})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Phone Number"}),(0,Ix.jsx)("input",{type:"tel",value:c,onChange:e=>u(e.target.value),className:"input",placeholder:"+61 400 000 000"})]})]})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("h3",{className:"text-lg font-display text-text-primary mb-4",children:"Account Security"}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Email"}),(0,Ix.jsx)("input",{type:"email",value:d,onChange:e=>h(e.target.value),className:"input",placeholder:"your@email.com",required:!0}),(0,Ix.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:"Changing email requires re-verification"})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"New Password (optional)"}),(0,Ix.jsx)("input",{type:"password",value:f,onChange:e=>p(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6})]}),f&&(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Confirm New Password"}),(0,Ix.jsx)("input",{type:"password",value:m,onChange:e=>g(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6})]})]})]}),(0,Ix.jsxs)("div",{className:"flex gap-3",children:[(0,Ix.jsx)("button",{type:"button",onClick:()=>r("/profile"),className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Ix.jsx)("button",{type:"submit",disabled:w,className:"flex-1 btn btn-primary",children:w?"Saving...":"Save Changes"})]})]})]})]})},Wb=()=>{var e,t,n;const{currentUser:r,userData:i}=Px(),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)("all"),[p,m]=(0,s.useState)(null),[g,y]=(0,s.useState)(!0);(0,s.useEffect)(()=>{v()},[r,h]);const v=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r){e?d(!0):(c(!0),o([]),m(null),y(!0));try{let t=Mm($p(vx,"checkins"),Fm("userId","==",r.uid),zm("createdAt","desc"),Wm(20));"completed"===h?t=Mm($p(vx,"checkins"),Fm("userId","==",r.uid),Fm("status","==","completed"),zm("createdAt","desc"),Wm(20)):"alerted"===h&&(t=Mm($p(vx,"checkins"),Fm("userId","==",r.uid),Fm("status","==","alerted"),zm("createdAt","desc"),Wm(20))),e&&p&&(t=Mm(t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hm._create("startAfter",t,!1)}(p)));const n=await ig(t),s=[];n.forEach(e=>{s.push(Ve({id:e.id},e.data()))}),o(e?e=>[...e,...s]:s),m(n.docs[n.docs.length-1]||null),y(20===s.length),c(!1),d(!1)}catch(t){console.error("Error loading history:",t),e||o([]),c(!1),d(!1)}}},x=e=>{switch(e){case"completed":return(0,Ix.jsx)("span",{className:"badge badge-success",children:"\u2705 Safe"});case"alerted":return(0,Ix.jsx)("span",{className:"badge badge-warning",children:"\ud83d\udea8 Alerted"});case"active":return(0,Ix.jsx)("span",{className:"badge badge-primary",children:"\u23f0 Active"});default:return(0,Ix.jsx)("span",{className:"badge",children:"Unknown"})}},b=e=>{if(e<60)return"".concat(e,"m");const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"m"):"".concat(t,"h")};return l?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Check-in History"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"View all your past check-ins"})]}),(0,Ix.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[(0,Ix.jsx)("button",{onClick:()=>f("all"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("all"===h?"bg-primary text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"All"}),(0,Ix.jsx)("button",{onClick:()=>f("completed"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("completed"===h?"bg-success text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"\u2705 Safe"}),(0,Ix.jsx)("button",{onClick:()=>f("alerted"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("alerted"===h?"bg-warning text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"\ud83d\udea8 Alerted"})]}),(0,Ix.jsx)("div",{className:"card p-6 mb-6",children:(0,Ix.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-2xl font-display text-primary",children:(null===i||void 0===i||null===(e=i.stats)||void 0===e?void 0:e.totalCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]}),(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-2xl font-display text-success",children:(null===i||void 0===i||null===(t=i.stats)||void 0===t?void 0:t.completedCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed"})]}),(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"text-2xl font-display text-warning",children:(null===i||void 0===i||null===(n=i.stats)||void 0===n?void 0:n.alertedCheckIns)||0}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Alerted"})]})]})}),0===a.length?(0,Ix.jsxs)("div",{className:"card p-12 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No check-ins yet"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Your check-in history will appear here"})]}):(0,Ix.jsxs)(Ix.Fragment,{children:[(0,Ix.jsx)("div",{className:"space-y-4",children:a.map(e=>{var t;return(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary",children:e.location}),x(e.status)]}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:e.createdAt&&ob(e.createdAt.toDate(),{addSuffix:!0})})]})}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"text-text-secondary",children:"Duration"}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:b(e.duration)})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("div",{className:"text-text-secondary",children:"Besties Notified"}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary",children:(null===(t=e.bestieIds)||void 0===t?void 0:t.length)||0})]})]}),e.notes&&(0,Ix.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Ix.jsxs)("div",{className:"text-sm text-text-secondary italic",children:['"',e.notes,'"']})}),e.completedAt&&(0,Ix.jsxs)("div",{className:"mt-3 text-xs text-success",children:["\u2705 Completed ",ob(e.completedAt.toDate(),{addSuffix:!0})]}),e.alertedAt&&(0,Ix.jsxs)("div",{className:"mt-3 text-xs text-warning",children:["\ud83d\udea8 Alert sent ",ob(e.alertedAt.toDate(),{addSuffix:!0})]})]},e.id)})}),g&&(0,Ix.jsx)("div",{className:"mt-6 text-center",children:(0,Ix.jsx)("button",{onClick:()=>{v(!0)},disabled:u,className:"btn btn-secondary px-8",children:u?(0,Ix.jsxs)(Ix.Fragment,{children:[(0,Ix.jsx)("span",{className:"spinner-small mr-2"}),"Loading..."]}):"Load More (".concat(20," at a time)")})}),!g&&a.length>0&&(0,Ix.jsx)("div",{className:"mt-6 text-center text-text-secondary text-sm",children:"You've reached the end of your check-in history"})]})]})]})},Hb=()=>{const{currentUser:e}=Px(),t=re(),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!e)return;const t=ug(Mm($p(vx,"templates"),Fm("userId","==",e.uid)),e=>{const t=[];e.forEach(e=>{t.push(Ve({id:e.id},e.data()))}),r(t),a(!1)},e=>{console.error("Error loading templates:",e),r([]),a(!1)});return()=>t()},[e]);return i?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"My Templates"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Quickly start check-ins with saved templates"})]}),0===n.length?(0,Ix.jsxs)("div",{className:"card p-12 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No templates yet"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-6",children:"Save templates when completing check-ins for quick access"}),(0,Ix.jsx)("button",{onClick:()=>t("/create"),className:"btn btn-primary",children:"Create Check-In"})]}):(0,Ix.jsx)("div",{className:"space-y-4",children:n.map(e=>{var n;return(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:e.name}),(0,Ix.jsxs)("div",{className:"space-y-1 text-sm text-text-secondary",children:[(0,Ix.jsxs)("div",{children:["\ud83d\udccd ",e.location]}),(0,Ix.jsxs)("div",{children:["\u23f0 ",e.duration," minutes"]}),(0,Ix.jsxs)("div",{children:["\ud83d\udc65 ",(null===(n=e.bestieIds)||void 0===n?void 0:n.length)||0," besties"]}),e.notes&&(0,Ix.jsxs)("div",{className:"italic",children:["\ud83d\udcac ",e.notes]})]})]})}),(0,Ix.jsxs)("div",{className:"flex gap-3",children:[(0,Ix.jsx)("button",{onClick:()=>(e=>{t("/create",{state:{template:e}})})(e),className:"flex-1 btn btn-primary",children:"Use Template"}),(0,Ix.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this template?"))try{await lg(Zp(vx,"templates",e)),tn.success("Template deleted")}catch(t){console.error("Error deleting template:",t),tn.error("Failed to delete template")}})(e.id),className:"btn bg-danger text-white hover:bg-red-600",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})}),(0,Ix.jsx)("div",{className:"mt-6",children:(0,Ix.jsx)("button",{onClick:()=>t("/create"),className:"w-full btn btn-secondary",children:"\u2795 Create New Check-In"})})]})]})},Kb=()=>{const[e,t]=(0,s.useState)({users:{total:0,new7days:0,new30days:0,active7days:0,active30days:0},checkIns:{total:0,active:0,completed:0,alerted:0,avgDuration:0,completionRate:0},besties:{totalConnections:0,avgPerUser:0,pending:0,accepted:0},revenue:{smsSubscribers:0,donorsActive:0,totalDonations:0,mrr:0},engagement:{avgCheckInsPerUser:0,avgBestiesPerUser:0,templatesCreated:0,badgesEarned:0},topLocations:[],recentAlerts:[]}),[n,r]=(0,s.useState)(!0),[i,a]=(0,s.useState)("7d");(0,s.useEffect)(()=>{o()},[i]);const o=async()=>{r(!0);try{const e=new Date,n=new Date(e.getTime()-6048e5),s=new Date(e.getTime()-2592e6),i=await ig($p(vx,"users"));let a=0,o=0,l=0,c=0,u=0;i.forEach(e=>{var t,r,i;const d=e.data();a++;const h=null===(t=d.stats)||void 0===t||null===(r=t.joinedAt)||void 0===r?void 0:r.toDate();h&&h>n&&o++,h&&h>s&&l++;const f=null===(i=d.lastActive)||void 0===i?void 0:i.toDate();f&&f>n&&c++,f&&f>s&&u++});const d=await ig($p(vx,"checkins"));let h=0,f=0,p=0,m=0,g=0;const y={};d.forEach(e=>{const t=e.data();h++,g+=t.duration||0,"active"===t.status&&f++,"completed"===t.status&&p++,"alerted"===t.status&&m++,t.location&&(y[t.location]=(y[t.location]||0)+1)});const v=Object.entries(y).map(e=>{let[t,n]=e;return{location:t,count:n}}).sort((e,t)=>t.count-e.count).slice(0,10),x=h>0?(p/h*100).toFixed(1):0,b=await ig($p(vx,"besties"));let w=0,N=0,k=0;b.forEach(e=>{const t=e.data();w++,"pending"===t.status&&N++,"accepted"===t.status&&k++});let _=0,S=0,E=0;i.forEach(e=>{var t,n;const r=e.data();var s;(null!==(t=r.smsSubscription)&&void 0!==t&&t.active&&_++,null!==(n=r.donationStats)&&void 0!==n&&n.isActive)&&(S++,E+=(null===(s=r.donationStats)||void 0===s?void 0:s.totalDonated)||0)});const j=1*_+E,C=await ig($p(vx,"templates")),I=await ig($p(vx,"badges"));let T=0;I.forEach(e=>{var t;const n=e.data();T+=(null===(t=n.badges)||void 0===t?void 0:t.length)||0});const A=Mm($p(vx,"checkins"),Fm("status","==","alerted"),zm("alertedAt","desc")),P=await ig(A),R=[];P.forEach(e=>{if(R.length<10){const t=e.data();R.push({id:e.id,location:t.location,alertedAt:t.alertedAt,userName:t.userName||"Unknown"})}}),t({users:{total:a,new7days:o,new30days:l,active7days:c,active30days:u},checkIns:{total:h,active:f,completed:p,alerted:m,avgDuration:h>0?Math.round(g/h):0,completionRate:x},besties:{totalConnections:w,avgPerUser:a>0?(k/a).toFixed(1):0,pending:N,accepted:k},revenue:{smsSubscribers:_,donorsActive:S,totalDonations:E.toFixed(2),mrr:j.toFixed(2)},engagement:{avgCheckInsPerUser:a>0?(h/a).toFixed(1):0,avgBestiesPerUser:a>0?(k/a).toFixed(1):0,templatesCreated:C.size,badgesEarned:T},topLocations:v,recentAlerts:R}),r(!1)}catch(e){console.error("Error loading analytics:",e),r(!1)}};return n?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udcca Developer Analytics"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Real-time app metrics and insights"})]}),(0,Ix.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Ix.jsx)("button",{onClick:()=>a("7d"),className:"px-4 py-2 rounded-full font-semibold ".concat("7d"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 7 Days"}),(0,Ix.jsx)("button",{onClick:()=>a("30d"),className:"px-4 py-2 rounded-full font-semibold ".concat("30d"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 30 Days"}),(0,Ix.jsx)("button",{onClick:()=>a("all"),className:"px-4 py-2 rounded-full font-semibold ".concat("all"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"All Time"})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc65 Users"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary",children:e.users.total}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Users"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-success",children:e.users.new7days}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"New (7d)"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-success",children:e.users.new30days}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"New (30d)"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.users.active7days}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Active (7d)"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.users.active30days}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Active (30d)"})]})]})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\u2705 Check-ins"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary",children:e.checkIns.total}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-warning",children:e.checkIns.active}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Now"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-success",children:e.checkIns.completed}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-danger",children:e.checkIns.alerted}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Alerted"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-accent",children:e.checkIns.avgDuration}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Minutes"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsxs)("div",{className:"text-3xl font-display text-success",children:[e.checkIns.completionRate,"%"]}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Completion"})]})]})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc9c Besties Network"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary",children:e.besties.totalConnections}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Connections"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-success",children:e.besties.accepted}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Accepted"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-warning",children:e.besties.pending}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Pending"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.besties.avgPerUser}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Per User"})]})]})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcb0 Revenue"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Ix.jsxs)("div",{className:"card p-4 text-center bg-gradient-primary text-white",children:[(0,Ix.jsxs)("div",{className:"text-3xl font-display",children:["$",e.revenue.mrr]}),(0,Ix.jsx)("div",{className:"text-sm opacity-90",children:"MRR"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary",children:e.revenue.smsSubscribers}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"SMS Subscribers"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.revenue.donorsActive}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Donors"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsxs)("div",{className:"text-3xl font-display text-success",children:["$",e.revenue.totalDonations]}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Donated"})]})]})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcc8 Engagement"}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-primary",children:e.engagement.avgCheckInsPerUser}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-ins/User"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.engagement.avgBestiesPerUser}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Besties/User"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-accent",children:e.engagement.templatesCreated}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Templates"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-warning",children:e.engagement.badgesEarned}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Badges Earned"})]})]})]}),(0,Ix.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-xl text-text-primary mb-4",children:"\ud83d\udccd Top Check-in Locations"}),e.topLocations.length>0?(0,Ix.jsx)("div",{className:"space-y-2",children:e.topLocations.map((e,t)=>(0,Ix.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Ix.jsx)("span",{className:"font-semibold text-text-primary",children:e.location}),(0,Ix.jsx)("span",{className:"badge badge-primary",children:e.count})]},t))}):(0,Ix.jsx)("p",{className:"text-text-secondary text-center py-8",children:"No data yet"})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-xl text-text-primary mb-4",children:"\ud83d\udea8 Recent Alerts"}),e.recentAlerts.length>0?(0,Ix.jsx)("div",{className:"space-y-2",children:e.recentAlerts.map(e=>(0,Ix.jsxs)("div",{className:"p-3 bg-danger/10 border border-danger/20 rounded-lg",children:[(0,Ix.jsx)("div",{className:"font-semibold text-danger",children:e.userName}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:e.location}),e.alertedAt&&(0,Ix.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:new Date(e.alertedAt.toDate()).toLocaleString()})]},e.id))}):(0,Ix.jsx)("p",{className:"text-text-secondary text-center py-8",children:"No alerts \ud83c\udf89"})]})]}),(0,Ix.jsx)("button",{onClick:o,className:"w-full btn btn-primary",disabled:n,children:"\ud83d\udd04 Refresh Data"})]})]})},Gb=()=>{const{currentUser:e}=Px(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(""),[a,o]=(0,s.useState)("\ud83d\udccd"),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{u()},[e]);const u=async()=>{if(e)try{const t=await rg(Zp(vx,"users",e.uid));t.exists()&&n(t.data().favoriteLocations||[]),c(!1)}catch(t){console.error("Error loading favorites:",t),c(!1)}};return l?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Favorite Locations"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Save your frequently visited places for quick check-ins"})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Add Location"}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Choose Icon"}),(0,Ix.jsx)("div",{className:"flex flex-wrap gap-2",children:["\ud83d\udccd","\u2615","\ud83c\udf7d\ufe0f","\ud83c\udfac","\ud83c\udf7b","\ud83c\udfe0","\ud83c\udfc3","\ud83d\udecd\ufe0f","\ud83c\udfb5","\ud83c\udfe2","\ud83c\udfeb","\ud83c\udfe5"].map(e=>(0,Ix.jsx)("button",{onClick:()=>o(e),className:"w-12 h-12 rounded-xl text-2xl flex items-center justify-center transition-all ".concat(a===e?"bg-primary text-white scale-110":"bg-gray-100 hover:bg-gray-200"),children:e},e))})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Location Name"}),(0,Ix.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),className:"input",placeholder:"e.g., Local Coffee Shop",maxLength:50})]}),(0,Ix.jsx)("button",{onClick:async()=>{if(!r.trim())return void tn.error("Please enter a location");if(t.length>=20)return void tn.error("Maximum 20 favorite locations");const s={id:Date.now().toString(),name:r.trim(),emoji:a,usedCount:0},l=[...t,s];try{await og(Zp(vx,"users",e.uid),{favoriteLocations:l}),n(l),i(""),o("\ud83d\udccd"),tn.success("Location added!")}catch(c){console.error("Error adding favorite:",c),tn.error("Failed to add location")}},className:"w-full btn btn-primary",children:"\u2795 Add to Favorites"})]})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsxs)("h3",{className:"font-display text-lg text-text-primary mb-4",children:["Your Favorites (",t.length,"/20)"]}),0===t.length?(0,Ix.jsxs)("div",{className:"card p-12 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccd"}),(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No favorites yet"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Add your frequently visited locations for quick access"})]}):(0,Ix.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(r=>(0,Ix.jsx)("div",{className:"card p-4",children:(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,Ix.jsx)("div",{className:"text-3xl",children:r.emoji}),(0,Ix.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ix.jsx)("div",{className:"font-semibold text-text-primary truncate",children:r.name}),r.usedCount>0&&(0,Ix.jsxs)("div",{className:"text-sm text-text-secondary",children:["Used ",r.usedCount," times"]})]})]}),(0,Ix.jsx)("button",{onClick:()=>(async r=>{const s=t.filter(e=>e.id!==r);try{await og(Zp(vx,"users",e.uid),{favoriteLocations:s}),n(s),tn.success("Location removed")}catch(i){console.error("Error removing favorite:",i),tn.error("Failed to remove location")}})(r.id),className:"text-danger hover:bg-danger/10 p-2 rounded-lg transition-colors",children:"\ud83d\uddd1\ufe0f"})]})},r.id))})]})]})]})},Yb=()=>{const{currentUser:e,userData:t}=Px(),[n,r]=(0,s.useState)(!1);return(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Export Your Data"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Download all your Besties data (GDPR compliant)"})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6 bg-primary/5 border-2 border-primary/20",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary mb-2",children:"\ud83d\udcca Your Data Rights"}),(0,Ix.jsx)("p",{className:"text-text-secondary text-sm mb-4",children:"You have the right to download all your data from Besties at any time. This includes your profile, check-ins, besties, templates, and badges."}),(0,Ix.jsxs)("p",{className:"text-text-secondary text-sm",children:[(0,Ix.jsx)("strong",{children:"What's included:"})," Profile info, check-in history, bestie connections, saved templates, earned badges, and account settings."]})]}),(0,Ix.jsxs)("div",{className:"space-y-4",children:[(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Complete Data Export (JSON)"}),(0,Ix.jsx)("p",{className:"text-text-secondary text-sm",children:"Download all your data in JSON format. Includes everything: profile, check-ins, besties, templates, and badges."}),(0,Ix.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Ix.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,Ix.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,Ix.jsx)("span",{className:"badge badge-primary",children:"Profile"}),(0,Ix.jsx)("span",{className:"badge badge-success",children:"Check-ins"}),(0,Ix.jsx)("span",{className:"badge badge-secondary",children:"Besties"}),(0,Ix.jsx)("span",{className:"badge badge-accent",children:"Templates"}),(0,Ix.jsx)("span",{className:"badge badge-warning",children:"Badges"})]})]})]})}),(0,Ix.jsx)("button",{onClick:async()=>{r(!0),tn("Preparing your data...");try{var n,s;const i={user:{uid:e.uid,email:e.email,displayName:null===t||void 0===t?void 0:t.displayName,phoneNumber:null===t||void 0===t?void 0:t.phoneNumber,photoURL:null===t||void 0===t?void 0:t.photoURL,createdAt:null===t||void 0===t||null===(n=t.stats)||void 0===n||null===(s=n.joinedAt)||void 0===s?void 0:s.toDate(),profile:null===t||void 0===t?void 0:t.profile,stats:null===t||void 0===t?void 0:t.stats},checkIns:[],besties:[],templates:[],badges:[],exportedAt:(new Date).toISOString()},a=Mm($p(vx,"checkins"),Fm("userId","==",e.uid));(await ig(a)).forEach(e=>{var t,n,r;const s=e.data();i.checkIns.push({id:e.id,location:s.location,duration:s.duration,notes:s.notes,status:s.status,createdAt:null===(t=s.createdAt)||void 0===t?void 0:t.toDate(),completedAt:null===(n=s.completedAt)||void 0===n?void 0:n.toDate(),alertedAt:null===(r=s.alertedAt)||void 0===r?void 0:r.toDate()})});const o=Mm($p(vx,"besties"),Fm("requesterId","==",e.uid));(await ig(o)).forEach(e=>{var t;const n=e.data();i.besties.push({id:e.id,type:"requested",name:n.recipientName,phone:n.recipientPhone,status:n.status,createdAt:null===(t=n.createdAt)||void 0===t?void 0:t.toDate()})});const l=Mm($p(vx,"besties"),Fm("recipientId","==",e.uid));(await ig(l)).forEach(e=>{var t;const n=e.data();i.besties.push({id:e.id,type:"received",name:n.requesterName,phone:n.requesterPhone,status:n.status,createdAt:null===(t=n.createdAt)||void 0===t?void 0:t.toDate()})});const c=Mm($p(vx,"templates"),Fm("userId","==",e.uid));(await ig(c)).forEach(e=>{i.templates.push(Ve({id:e.id},e.data()))});const u=Mm($p(vx,"badges"),Fm("userId","==",e.uid));(await ig(u)).forEach(e=>{i.badges.push(Ve({id:e.id},e.data()))});const d=JSON.stringify(i,null,2),h=new Blob([d],{type:"application/json"}),f=URL.createObjectURL(h),p=document.createElement("a");p.href=f,p.download="besties-data-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(p),p.click(),document.body.removeChild(p),tn.success("Data exported successfully!"),r(!1)}catch(i){console.error("Error exporting data:",i),tn.error("Failed to export data"),r(!1)}},disabled:n,className:"w-full btn btn-primary",children:n?"Exporting...":"\ud83d\udce5 Download JSON"})]}),(0,Ix.jsxs)("div",{className:"card p-6",children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Check-in History (CSV)"}),(0,Ix.jsx)("p",{className:"text-text-secondary text-sm",children:"Download your check-in history as a spreadsheet. Perfect for importing into Excel or Google Sheets."}),(0,Ix.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Ix.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,Ix.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,Ix.jsx)("span",{className:"badge badge-success",children:"Date"}),(0,Ix.jsx)("span",{className:"badge badge-success",children:"Location"}),(0,Ix.jsx)("span",{className:"badge badge-success",children:"Duration"}),(0,Ix.jsx)("span",{className:"badge badge-success",children:"Status"}),(0,Ix.jsx)("span",{className:"badge badge-success",children:"Notes"})]})]})]})}),(0,Ix.jsx)("button",{onClick:async()=>{r(!0),tn("Preparing CSV...");try{const t=Mm($p(vx,"checkins"),Fm("userId","==",e.uid)),n=await ig(t),s=[["Date","Location","Duration (min)","Status","Notes"].join(",")];n.forEach(e=>{var t;const n=e.data(),r=[(null===(t=n.createdAt)||void 0===t?void 0:t.toDate().toLocaleDateString())||"",'"'.concat(n.location||"",'"'),n.duration||0,n.status||"",'"'.concat(n.notes||"",'"')];s.push(r.join(","))});const i=s.join("\n"),a=new Blob([i],{type:"text/csv"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="besties-checkins-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l),tn.success("CSV exported successfully!"),r(!1)}catch(t){console.error("Error exporting CSV:",t),tn.error("Failed to export CSV"),r(!1)}},disabled:n,className:"w-full btn btn-secondary",children:n?"Exporting...":"\ud83d\udcca Download CSV"})]})]}),(0,Ix.jsxs)("div",{className:"card p-6 mt-6 bg-gray-50",children:[(0,Ix.jsx)("h4",{className:"font-semibold text-text-primary mb-2",children:"\ud83d\udd12 Privacy & Security"}),(0,Ix.jsxs)("ul",{className:"text-sm text-text-secondary space-y-1",children:[(0,Ix.jsx)("li",{children:"\u2022 Your data is exported directly to your device"}),(0,Ix.jsx)("li",{children:"\u2022 We don't store or track what you export"}),(0,Ix.jsx)("li",{children:"\u2022 Files are generated locally in your browser"}),(0,Ix.jsx)("li",{children:"\u2022 All data remains encrypted during export"})]})]})]})]})},Qb=()=>{const[e,t]=(0,s.useState)("24h"),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)({}),[d,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{f()},[e]);const f=async()=>{h(!0);try{const t=cl.fromDate((()=>{const t=new Date;switch(e){case"1h":return new Date(t.getTime()-36e5);case"24h":default:return new Date(t.getTime()-864e5);case"7d":return new Date(t.getTime()-6048e5)}})()),n=Mm($p(vx,"errors"),Fm("createdAt",">=",t),zm("createdAt","desc"),Wm(50)),s=await ig(n),i=[];s.forEach(e=>i.push(Ve({id:e.id},e.data()))),r(i);const o=Mm($p(vx,"performance"),Fm("createdAt",">=",t),zm("createdAt","desc"),Wm(100)),c=await ig(o),d=[];c.forEach(e=>d.push(Ve({id:e.id},e.data()))),a(d);const f=Mm($p(vx,"user_actions"),Fm("createdAt",">=",t),zm("createdAt","desc"),Wm(200)),p=await ig(f),m=[];p.forEach(e=>m.push(Ve({id:e.id},e.data()))),l(m);const g=Mm($p(vx,"funnel_events"),Fm("createdAt",">=",t),zm("createdAt","desc")),y=await ig(g),v={};y.forEach(e=>{const t=e.data();v[t.funnel]||(v[t.funnel]={}),v[t.funnel][t.step]||(v[t.funnel][t.step]=0),v[t.funnel][t.step]++}),u(v),h(!1)}catch(t){console.error("Error loading monitoring data:",t),h(!1)}},p=(n.length/Math.max(o.length,1)*100).toFixed(2),m=i.filter(e=>"page_load"===e.type),g=m.length>0?(m.reduce((e,t)=>{var n;return e+((null===(n=t.metrics)||void 0===n?void 0:n.total)||0)},0)/m.length).toFixed(0):0,y=n.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),v=o.filter(e=>"page_view"===e.action),x=v.reduce((e,t)=>{var n;const r=(null===(n=t.details)||void 0===n?void 0:n.page)||"unknown";return e[r]=(e[r]||0)+1,e},{}),b=Object.entries(x).sort((e,t)=>t[1]-e[1]).slice(0,10);return d?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udd0d Monitoring Dashboard"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Real-time errors, performance & user behavior"})]}),(0,Ix.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Ix.jsx)("button",{onClick:()=>t("1h"),className:"px-4 py-2 rounded-full font-semibold ".concat("1h"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last Hour"}),(0,Ix.jsx)("button",{onClick:()=>t("24h"),className:"px-4 py-2 rounded-full font-semibold ".concat("24h"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 24h"}),(0,Ix.jsx)("button",{onClick:()=>t("7d"),className:"px-4 py-2 rounded-full font-semibold ".concat("7d"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 7 Days"})]}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display ".concat(n.length>0?"text-danger":"text-success"),children:n.length}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Errors"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsxs)("div",{className:"text-3xl font-display text-warning",children:[p,"%"]}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Error Rate"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsxs)("div",{className:"text-3xl font-display text-primary",children:[g,"ms"]}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Page Load"})]}),(0,Ix.jsxs)("div",{className:"card p-4 text-center",children:[(0,Ix.jsx)("div",{className:"text-3xl font-display text-secondary",children:o.length}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"User Actions"})]})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsxs)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:["\ud83d\udc1b Recent Errors (",n.length,")"]}),0===n.length?(0,Ix.jsxs)("div",{className:"card p-8 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\u2705"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"No errors! Everything is working perfectly!"})]}):(0,Ix.jsx)("div",{className:"space-y-3",children:n.slice(0,10).map(e=>(0,Ix.jsxs)("div",{className:"card p-4 border-l-4 border-danger",children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ix.jsx)("span",{className:"badge badge-danger",children:e.type}),(0,Ix.jsx)("span",{className:"text-sm text-text-secondary",children:e.createdAt&&new Date(e.createdAt.toDate()).toLocaleString()})]}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.message}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary mb-2",children:e.url}),e.userId&&(0,Ix.jsxs)("div",{className:"text-xs text-text-secondary",children:["User: ",e.userId]})]})}),e.stack&&(0,Ix.jsxs)("details",{className:"text-xs text-text-secondary mt-2",children:[(0,Ix.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,Ix.jsx)("pre",{className:"mt-2 p-2 bg-gray-50 rounded overflow-auto max-h-40",children:e.stack})]})]},e.id))})]}),Object.keys(y).length>0&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Error Types Breakdown"}),(0,Ix.jsx)("div",{className:"space-y-2",children:Object.entries(y).map(e=>{let[t,r]=e;return(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsx)("span",{className:"text-text-primary",children:t}),(0,Ix.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ix.jsx)("div",{className:"h-2 bg-danger/20 rounded-full",style:{width:"".concat(r/n.length*200,"px")},children:(0,Ix.jsx)("div",{className:"h-full bg-danger rounded-full",style:{width:"100%"}})}),(0,Ix.jsx)("span",{className:"text-text-secondary text-sm w-8 text-right",children:r})]})]},t)})})]}),(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\u26a1 Performance Issues"}),0===i.filter(e=>"slow_resource"===e.type).length?(0,Ix.jsxs)("div",{className:"card p-8 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\ude80"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"No slow resources detected!"})]}):(0,Ix.jsx)("div",{className:"card p-6",children:(0,Ix.jsx)("div",{className:"space-y-2",children:i.filter(e=>"slow_resource"===e.type).slice(0,10).map((e,t)=>(0,Ix.jsxs)("div",{className:"flex items-center justify-between p-3 bg-warning/10 rounded-lg",children:[(0,Ix.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ix.jsx)("div",{className:"text-sm font-semibold text-text-primary truncate",children:e.name}),(0,Ix.jsx)("div",{className:"text-xs text-text-secondary",children:e.createdAt&&new Date(e.createdAt.toDate()).toLocaleString()})]}),(0,Ix.jsxs)("div",{className:"text-warning font-semibold ml-4",children:[Math.round(e.duration),"ms"]})]},t))})})]}),m.length>0&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Page Load Breakdown (avg)"}),(0,Ix.jsx)("div",{className:"space-y-2",children:["dns","tcp","request","response","dom","load"].map(e=>{const t=m.reduce((t,n)=>{var r;return t+((null===(r=n.metrics)||void 0===r?void 0:r[e])||0)},0)/m.length;return(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsx)("span",{className:"text-text-primary capitalize",children:e}),(0,Ix.jsxs)("span",{className:"text-text-secondary",children:[Math.round(t),"ms"]})]},e)})})]}),(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"\ud83d\udcca Top Pages"}),(0,Ix.jsx)("div",{className:"space-y-2",children:b.map(e=>{let[t,n]=e;return(0,Ix.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ix.jsx)("span",{className:"text-text-primary",children:t}),(0,Ix.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ix.jsx)("div",{className:"h-2 bg-primary/20 rounded-full",style:{width:"".concat(n/v.length*200,"px")},children:(0,Ix.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"100%"}})}),(0,Ix.jsxs)("span",{className:"text-text-secondary text-sm w-12 text-right",children:[n," views"]})]})]},t)})})]}),Object.keys(c).length>0&&(0,Ix.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Ix.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"\ud83c\udfaf Conversion Funnels"}),Object.entries(c).map(e=>{let[t,n]=e;const r=Object.entries(n).sort(),s=Math.max(...Object.values(n));return(0,Ix.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,Ix.jsxs)("div",{className:"font-semibold text-text-primary mb-3 capitalize",children:[t.replace(/_/g," ")," Funnel"]}),(0,Ix.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>{let[n,i]=e;const a=0===t?100:(i/r[0][1]*100).toFixed(1),o=t>0?((r[t-1][1]-i)/r[t-1][1]*100).toFixed(1):0;return(0,Ix.jsxs)("div",{children:[(0,Ix.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ix.jsx)("span",{className:"text-text-primary capitalize",children:n.replace(/_/g," ")}),(0,Ix.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ix.jsxs)("span",{className:"text-text-secondary text-sm",children:[i," users"]}),(0,Ix.jsxs)("span",{className:"text-text-secondary text-sm",children:["(",a,"%)"]}),o>0&&(0,Ix.jsxs)("span",{className:"text-danger text-sm",children:["-",o,"%"]})]})]}),(0,Ix.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Ix.jsx)("div",{className:"h-full ".concat(o>20?"bg-danger":"bg-primary"),style:{width:"".concat(i/s*100,"%")}})})]},n)})})]},t)})]}),(0,Ix.jsx)("button",{onClick:f,className:"w-full btn btn-primary",disabled:d,children:"\ud83d\udd04 Refresh Data"})]})]})},Jb=()=>{const{currentUser:e}=Px(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0),[a,o]=(0,s.useState)("all");(0,s.useEffect)(()=>{l()},[e,a]);const l=async()=>{if(e){i(!0);try{const t=Mm($p(vx,"besties"),Fm("requesterId","==",e.uid),Fm("status","==","accepted")),r=Mm($p(vx,"besties"),Fm("recipientId","==",e.uid),Fm("status","==","accepted")),[s,o]=await Promise.all([ig(t),ig(r)]),l=new Set([e.uid]);s.forEach(e=>{const t=e.data();t.recipientId&&l.add(t.recipientId)}),o.forEach(e=>{const t=e.data();t.requesterId&&l.add(t.requesterId)});const c=Array.from(l),u=[];for(const n of c){let t=Mm($p(vx,"checkins"),Fm("userId","==",n),zm("createdAt","desc"),Wm(10));"active"===a?t=Mm($p(vx,"checkins"),Fm("userId","==",n),Fm("status","==","active"),zm("createdAt","desc"),Wm(10)):"completed"===a&&(t=Mm($p(vx,"checkins"),Fm("userId","==",n),Fm("status","==","completed"),zm("createdAt","desc"),Wm(10)));const r=await ig(t);for(const s of r.docs){const t=s.data(),r=await rg(Zp(vx,"users",n)),i=r.exists()?r.data():null;u.push(Ve(Ve({id:s.id},t),{},{userName:(null===i||void 0===i?void 0:i.displayName)||"Unknown User",userPhoto:(null===i||void 0===i?void 0:i.photoURL)||null,isOwn:n===e.uid}))}}u.sort((e,t)=>t.createdAt-e.createdAt),n(u.slice(0,50)),i(!1)}catch(t){console.error("Error loading feed:",t),tn.error("Failed to load feed"),i(!1)}}},c=e=>{switch(e){case"active":return"text-warning";case"completed":return"text-success";case"alerted":return"text-danger";default:return"text-text-secondary"}},u=e=>{switch(e){case"active":return"\u23f0";case"completed":return"\u2705";case"alerted":return"\ud83d\udea8";default:return"\ud83d\udccd"}};return r?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Social Feed"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"See what your besties are up to (privacy-safe)"})]}),(0,Ix.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Ix.jsx)("button",{onClick:()=>o("all"),className:"px-4 py-2 rounded-full font-semibold ".concat("all"===a?"bg-primary text-white":"bg-white text-text-primary"),children:"All"}),(0,Ix.jsx)("button",{onClick:()=>o("active"),className:"px-4 py-2 rounded-full font-semibold ".concat("active"===a?"bg-warning text-white":"bg-white text-text-primary"),children:"Active Now"}),(0,Ix.jsx)("button",{onClick:()=>o("completed"),className:"px-4 py-2 rounded-full font-semibold ".concat("completed"===a?"bg-success text-white":"bg-white text-text-primary"),children:"Safe & Sound"})]}),0===t.length?(0,Ix.jsxs)("div",{className:"card p-12 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No activity yet"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"active"===a?"None of your besties are checked in right now":"Add besties to see their check-ins here"})]}):(0,Ix.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,Ix.jsx)("div",{className:"card p-4",children:(0,Ix.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ix.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Ix.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-12 h-12 rounded-full object-cover"}):(0,Ix.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-white font-semibold",children:e.userName.charAt(0).toUpperCase()})}),(0,Ix.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ix.jsx)("span",{className:"font-semibold text-text-primary",children:e.isOwn?"You":e.userName}),(0,Ix.jsx)("span",{className:"text-text-secondary text-sm",children:e.createdAt&&ob(e.createdAt.toDate(),{addSuffix:!0})})]}),(0,Ix.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Ix.jsx)("span",{className:"text-lg ".concat(c(e.status)),children:u(e.status)}),(0,Ix.jsxs)("span",{className:"text-text-primary",children:["active"===e.status&&"is checked in at","completed"===e.status&&"safely returned from","alerted"===e.status&&"needs help at"]}),(0,Ix.jsx)("span",{className:"font-semibold text-text-primary",children:e.location})]}),(0,Ix.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm text-text-secondary",children:[(0,Ix.jsxs)("span",{children:["\u23f1\ufe0f ",e.duration," minutes"]}),"active"===e.status&&e.alertTime&&(0,Ix.jsxs)("span",{children:["\u2022 Alert in ",Math.round((e.alertTime.toDate()-new Date)/6e4)," min"]}),"completed"===e.status&&e.completedAt&&(0,Ix.jsxs)("span",{children:["\u2022 Completed ",ob(e.completedAt.toDate(),{addSuffix:!0})]})]}),e.notes&&(0,Ix.jsxs)("div",{className:"mt-2 text-sm text-text-secondary italic",children:['"',e.notes,'"']}),(0,Ix.jsx)("div",{className:"mt-3",children:(0,Ix.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===e.status?"bg-warning/10 text-warning":"completed"===e.status?"bg-success/10 text-success":"alerted"===e.status?"bg-danger/10 text-danger":"bg-gray-100 text-text-secondary"),children:["active"===e.status&&"\ud83d\udfe1 Active","completed"===e.status&&"\ud83d\udfe2 Safe","alerted"===e.status&&"\ud83d\udd34 Alert"]})})]})]})},e.id))}),(0,Ix.jsx)("div",{className:"card p-4 mt-6 bg-primary/5 border border-primary/20",children:(0,Ix.jsxs)("div",{className:"text-sm text-text-secondary",children:[(0,Ix.jsx)("strong",{className:"text-text-primary",children:"\ud83d\udd12 Privacy:"})," Only your accepted besties can see your check-ins. You can only see check-ins from people in your safety circle."]})})]})]})},Xb=()=>(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"max-w-4xl mx-auto p-6 pb-20",children:(0,Ix.jsxs)("div",{className:"card p-8",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-6",children:"Privacy Policy"}),(0,Ix.jsxs)("p",{className:"text-sm text-text-secondary mb-6",children:[(0,Ix.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Overview"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is a personal safety check-in application that helps users stay safe by notifying their trusted contacts if they don't check in on time."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Information We Collect"}),(0,Ix.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-3",children:"Information You Provide:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Name and email address (for account creation)"}),(0,Ix.jsx)("li",{children:"Phone number (for SMS notifications)"}),(0,Ix.jsx)("li",{children:"Location information (when you create check-ins)"}),(0,Ix.jsx)("li",{children:"Emergency contact information (names and phone numbers of your Besties)"})]}),(0,Ix.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-3",children:"Automatically Collected Information:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Check-in history and timestamps"}),(0,Ix.jsx)("li",{children:"Device information and IP address"}),(0,Ix.jsx)("li",{children:"Usage analytics (page views, features used)"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"How We Use Your Information"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We use your information to:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Send safety alerts to your designated emergency contacts when you don't check in on time"}),(0,Ix.jsx)("li",{children:"Send emergency notifications when you trigger an SOS alert"}),(0,Ix.jsx)("li",{children:"Verify your identity and prevent fraud"}),(0,Ix.jsx)("li",{children:"Improve our service and user experience"}),(0,Ix.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"How We Share Your Information"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We share your information ONLY in these situations:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"With Your Besties:"})," We share your check-in status, location, and alerts with emergency contacts YOU designate"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"With Service Providers:"})," We use third-party services (Firebase, Twilio, SendGrid) to operate our platform"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"For Safety:"})," We may share information with law enforcement if we believe it's necessary to prevent harm"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"With Your Consent:"})," Any other sharing requires your explicit permission"]})]}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:(0,Ix.jsx)("strong",{children:"We do NOT:"})}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Sell your personal information"}),(0,Ix.jsx)("li",{children:"Share your information for marketing purposes"}),(0,Ix.jsx)("li",{children:"Share your data with third parties except as described above"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Your Data Rights"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"You have the right to:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Access your personal data"}),(0,Ix.jsx)("li",{children:"Delete your account and all associated data"}),(0,Ix.jsx)("li",{children:"Export your data"}),(0,Ix.jsx)("li",{children:"Opt-out of notifications"}),(0,Ix.jsx)("li",{children:"Update your information at any time"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"To exercise these rights, go to Settings in the app or contact us directly."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Data Security"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We protect your data using:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"End-to-end encryption for sensitive data"}),(0,Ix.jsx)("li",{children:"Secure Firebase authentication"}),(0,Ix.jsx)("li",{children:"Regular security audits"}),(0,Ix.jsx)("li",{children:"Limited employee access to personal data"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Third-Party Services"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We use these services:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Firebase"})," (Google): Hosting, database, authentication"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Twilio:"})," SMS notifications"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"SendGrid:"})," Email notifications"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Google Maps:"})," Location autocomplete"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Stripe:"})," Payment processing (optional)"]})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Each service has its own privacy policy."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Children's Privacy"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Besties is not intended for users under 18. We do not knowingly collect information from children."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"International Users"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Your data may be processed in the United States and other countries where our servers are located."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Changes to Privacy Policy"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"We'll notify you of significant changes via email or in-app notification."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Data Retention"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Active accounts:"})," Data retained while account is active"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Deleted accounts:"})," Data permanently deleted within 30 days"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Legal requirements:"})," Some data may be retained longer if required by law"]})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Cookie Policy"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We use cookies for:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Authentication and security"}),(0,Ix.jsx)("li",{children:"Analytics and performance monitoring"}),(0,Ix.jsx)("li",{children:"User preferences"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"You can disable cookies in your browser settings."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"WhatsApp/Messenger Communications"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"By adding emergency contacts, you consent to us sending them safety notifications via:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"SMS"}),(0,Ix.jsx)("li",{children:"Email"}),(0,Ix.jsx)("li",{children:"WhatsApp (if enabled)"}),(0,Ix.jsx)("li",{children:"Facebook Messenger (if enabled)"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Emergency contacts can opt-out at any time by replying STOP or contacting us."})]}),(0,Ix.jsx)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:(0,Ix.jsx)("p",{className:"text-text-secondary text-center",children:"By using Besties, you agree to this Privacy Policy."})})]})})]}),$b=()=>(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"max-w-4xl mx-auto p-6 pb-20",children:(0,Ix.jsxs)("div",{className:"card p-8",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-6",children:"Terms of Service"}),(0,Ix.jsxs)("p",{className:"text-sm text-text-secondary mb-6",children:[(0,Ix.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"1. Acceptance of Terms"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:'By accessing or using Besties ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"These Terms constitute a legally binding agreement between you and Besties. Your continued use of the Service indicates your acceptance of these Terms and any future modifications."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"2. Description of Service"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is a personal safety check-in application that allows users to:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Create timed check-ins with location information"}),(0,Ix.jsx)("li",{children:'Designate emergency contacts ("Besties") to receive alerts'}),(0,Ix.jsx)("li",{children:"Send automatic notifications if check-ins are missed"}),(0,Ix.jsx)("li",{children:"Trigger emergency SOS alerts to designated contacts"}),(0,Ix.jsx)("li",{children:"Share check-in status and location with trusted contacts"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"3. Eligibility"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"You must be at least 18 years old to use the Service. By using Besties, you represent and warrant that:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"You are at least 18 years of age"}),(0,Ix.jsx)("li",{children:"You have the legal capacity to enter into this agreement"}),(0,Ix.jsx)("li",{children:"You will comply with all applicable laws and regulations"}),(0,Ix.jsx)("li",{children:"All information you provide is accurate and complete"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"4. Account Registration"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"To use the Service, you must:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Create an account with accurate information"}),(0,Ix.jsx)("li",{children:"Maintain the security of your account credentials"}),(0,Ix.jsx)("li",{children:"Notify us immediately of any unauthorized access"}),(0,Ix.jsx)("li",{children:"Accept responsibility for all activities under your account"}),(0,Ix.jsx)("li",{children:"Provide a valid phone number for emergency notifications"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"You may not share your account with others or create multiple accounts for fraudulent purposes."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"5. Emergency Contacts and Consent"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:'By adding emergency contacts ("Besties"), you:'}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Confirm you have permission to add their contact information"}),(0,Ix.jsx)("li",{children:"Authorize us to send them alerts on your behalf"}),(0,Ix.jsx)("li",{children:"Acknowledge they will receive notifications via SMS, email, WhatsApp, or other channels"}),(0,Ix.jsx)("li",{children:"Accept responsibility for any costs they may incur from receiving messages"}),(0,Ix.jsx)("li",{children:"Agree to inform them about how their information will be used"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"6. Safety Features and Limitations"}),(0,Ix.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-4 mb-4",children:(0,Ix.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"\u26a0\ufe0f IMPORTANT DISCLAIMER"})}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is designed as a safety tool, but it is NOT a replacement for:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Emergency services (911 or local emergency numbers)"}),(0,Ix.jsx)("li",{children:"Professional security or monitoring services"}),(0,Ix.jsx)("li",{children:"Medical alert systems"}),(0,Ix.jsx)("li",{children:"Personal safety devices or training"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:(0,Ix.jsx)("strong",{children:"You acknowledge that:"})}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"The Service depends on internet connectivity, device battery, and third-party services"}),(0,Ix.jsx)("li",{children:"Notifications may be delayed or fail due to technical issues"}),(0,Ix.jsx)("li",{children:"Location information may be inaccurate or unavailable"}),(0,Ix.jsx)("li",{children:"Emergency contacts may not see or respond to alerts"}),(0,Ix.jsx)("li",{children:"The Service cannot guarantee your safety in emergency situations"})]}),(0,Ix.jsx)("div",{className:"bg-red-50 border-2 border-red-400 rounded-xl p-4 mb-4",children:(0,Ix.jsx)("p",{className:"text-sm font-semibold text-red-800",children:"\ud83d\udea8 IN A TRUE EMERGENCY, ALWAYS CONTACT LOCAL EMERGENCY SERVICES (911) IMMEDIATELY"})})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"7. User Responsibilities"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"You agree to:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Use the Service responsibly and lawfully"}),(0,Ix.jsx)("li",{children:"Provide accurate location and check-in information"}),(0,Ix.jsx)("li",{children:"Keep your emergency contact list updated"}),(0,Ix.jsx)("li",{children:"Complete check-ins on time when safe to do so"}),(0,Ix.jsx)("li",{children:"Not abuse the emergency alert features"}),(0,Ix.jsx)("li",{children:"Respect the privacy of other users"}),(0,Ix.jsx)("li",{children:"Maintain a working device with internet connection"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"8. Prohibited Uses"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"You may NOT:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Use the Service for illegal activities"}),(0,Ix.jsx)("li",{children:"Send false emergency alerts or abuse the SOS feature"}),(0,Ix.jsx)("li",{children:"Harass, stalk, or threaten other users"}),(0,Ix.jsx)("li",{children:"Add contacts without their knowledge or permission"}),(0,Ix.jsx)("li",{children:"Attempt to bypass security features or access restrictions"}),(0,Ix.jsx)("li",{children:"Reverse engineer, decompile, or hack the Service"}),(0,Ix.jsx)("li",{children:"Use automated systems (bots) to access the Service"}),(0,Ix.jsx)("li",{children:"Resell or commercially exploit the Service"}),(0,Ix.jsx)("li",{children:"Impersonate others or provide false information"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"9. User Content"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"You retain ownership of content you submit (locations, notes, photos). By using the Service, you grant us a license to:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Store and process your content to provide the Service"}),(0,Ix.jsx)("li",{children:"Share your check-in information with your designated emergency contacts"}),(0,Ix.jsx)("li",{children:"Use anonymized data for analytics and service improvement"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"You are responsible for the content you share and must not submit illegal, harmful, or infringing content."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"10. Payments and Subscriptions"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"If you choose to support Besties through donations or subscriptions:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Payments are processed securely through Stripe"}),(0,Ix.jsx)("li",{children:"Donations are non-refundable"}),(0,Ix.jsx)("li",{children:"Subscriptions auto-renew until cancelled"}),(0,Ix.jsx)("li",{children:"You can cancel subscriptions anytime through your account settings"}),(0,Ix.jsx)("li",{children:"We reserve the right to change pricing with 30 days notice"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"11. Third-Party Services"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"The Service integrates with third-party providers (Twilio, SendGrid, Firebase, Google Maps, Stripe). Your use of these services is subject to their respective terms and privacy policies. We are not responsible for third-party service failures or changes."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"12. Intellectual Property"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties and all related trademarks, logos, and content are owned by us or our licensors. You may not use our intellectual property without written permission."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"13. Disclaimer of Warranties"}),(0,Ix.jsx)("div",{className:"bg-gray-100 border-2 border-gray-300 rounded-xl p-4 mb-4",children:(0,Ix.jsx)("p",{className:"text-sm font-semibold text-gray-800 uppercase",children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND'})}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We make no warranties that:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"The Service will be uninterrupted, secure, or error-free"}),(0,Ix.jsx)("li",{children:"Notifications will always be delivered on time"}),(0,Ix.jsx)("li",{children:"Location information will be accurate"}),(0,Ix.jsx)("li",{children:"The Service will meet your safety needs or expectations"}),(0,Ix.jsx)("li",{children:"Defects will be corrected"})]})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"14. Limitation of Liability"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Any injuries, harm, or damages resulting from use or inability to use the Service"}),(0,Ix.jsx)("li",{children:"Failed or delayed notifications"}),(0,Ix.jsx)("li",{children:"Inaccurate location information"}),(0,Ix.jsx)("li",{children:"Actions or inactions of emergency contacts"}),(0,Ix.jsx)("li",{children:"Third-party service failures"}),(0,Ix.jsx)("li",{children:"Loss of data or content"}),(0,Ix.jsx)("li",{children:"Indirect, incidental, or consequential damages"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"If we are found liable, our total liability is limited to the amount you paid us in the past 12 months, or $100, whichever is less."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"15. Indemnification"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"You agree to indemnify and hold harmless Besties and its affiliates from any claims, damages, or expenses arising from: (a) your use of the Service, (b) your violation of these Terms, (c) your violation of any third-party rights, or (d) false emergency alerts."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"16. Termination"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"We may terminate or suspend your account if you:"}),(0,Ix.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Ix.jsx)("li",{children:"Violate these Terms"}),(0,Ix.jsx)("li",{children:"Abuse the Service or emergency features"}),(0,Ix.jsx)("li",{children:"Engage in fraudulent activity"}),(0,Ix.jsx)("li",{children:"Pose a risk to other users"})]}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"You may terminate your account anytime through Settings. Upon termination, your data will be deleted as described in our Privacy Policy."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"17. Changes to Terms"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"We may update these Terms at any time. Significant changes will be communicated via email or in-app notification. Continued use after changes constitutes acceptance of the new Terms."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"18. Governing Law and Disputes"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"These Terms are governed by the laws of [Your Jurisdiction]. Any disputes will be resolved through binding arbitration, except where prohibited by law."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"19. Severability"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will continue in full effect."})]}),(0,Ix.jsxs)("section",{className:"mb-8",children:[(0,Ix.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"20. Contact Information"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-4",children:"For questions about these Terms, contact us at:"}),(0,Ix.jsxs)("ul",{className:"list-none text-text-secondary space-y-2",children:[(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Email:"})," legal@bestiesapp.com"]}),(0,Ix.jsxs)("li",{children:[(0,Ix.jsx)("strong",{children:"Support:"})," support@bestiesapp.com"]})]})]}),(0,Ix.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,Ix.jsx)("p",{className:"text-text-secondary text-center mb-4",children:(0,Ix.jsx)("strong",{children:"By using Besties, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})}),(0,Ix.jsxs)("p",{className:"text-sm text-text-secondary text-center",children:["For information about how we handle your data, please review our ",(0,Ix.jsx)("a",{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})]})]})})]}),Zb=()=>{const{userData:e}=Px(),t=re(),[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)("all"),[o,l]=(0,s.useState)("24h"),[c,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(e){!0===e.isAdmin||t("/")}},[e,t]),(0,s.useEffect)(()=>{let e=$p(vx,"errors");if("all"!==o){const t=new Date,n={"24h":864e5,"7d":6048e5,"30d":2592e6};e=Mm(e,Fm("timestamp",">=",new Date(t.getTime()-n[o]).getTime()))}"all"!==i&&(e=Mm(e,Fm("type","==",i))),e=Mm(e,zm("timestamp","desc"),Wm(100));const t=ug(e,e=>{const t=[];e.forEach(e=>{t.push(Ve({id:e.id},e.data()))}),r(t),u(!1)},e=>{console.error("Error loading errors:",e),u(!1)});return()=>t()},[i,o]);const d=e=>{var t,n;return"uncaught_error"===e.type?"critical":"unhandled_promise"===e.type||null!==(t=e.message)&&void 0!==t&&t.includes("verification failed")?"high":null!==(n=e.message)&&void 0!==n&&n.includes("permission-denied")?"medium":"low"},h={total:n.length,critical:n.filter(e=>"critical"===d(e)).length,high:n.filter(e=>"high"===d(e)).length,medium:n.filter(e=>"medium"===d(e)).length,low:n.filter(e=>"low"===d(e)).length};return c?(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Ix.jsx)("div",{className:"spinner"})})]}):(0,Ix.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Ix.jsx)(Lx,{}),(0,Ix.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Ix.jsxs)("div",{className:"mb-6",children:[(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udea8 Error Dashboard"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Monitor and track application errors"})]}),(0,Ix.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,Ix.jsxs)("div",{className:"card p-4",children:[(0,Ix.jsx)("div",{className:"text-2xl font-bold text-text-primary",children:h.total}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Errors"})]}),(0,Ix.jsxs)("div",{className:"card p-4 border-2 border-red-300",children:[(0,Ix.jsx)("div",{className:"text-2xl font-bold text-red-600",children:h.critical}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Critical"})]}),(0,Ix.jsxs)("div",{className:"card p-4 border-2 border-orange-300",children:[(0,Ix.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:h.high}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"High"})]}),(0,Ix.jsxs)("div",{className:"card p-4 border-2 border-yellow-300",children:[(0,Ix.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:h.medium}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Medium"})]}),(0,Ix.jsxs)("div",{className:"card p-4 border-2 border-blue-300",children:[(0,Ix.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:h.low}),(0,Ix.jsx)("div",{className:"text-sm text-text-secondary",children:"Low"})]})]}),(0,Ix.jsx)("div",{className:"card p-4 mb-6",children:(0,Ix.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Type"}),(0,Ix.jsxs)("select",{value:i,onChange:e=>a(e.target.value),className:"input",children:[(0,Ix.jsx)("option",{value:"all",children:"All Types"}),(0,Ix.jsx)("option",{value:"uncaught_error",children:"Uncaught Errors"}),(0,Ix.jsx)("option",{value:"custom_error",children:"Custom Errors"}),(0,Ix.jsx)("option",{value:"unhandled_promise",children:"Promise Rejections"})]})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Time Range"}),(0,Ix.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"input",children:[(0,Ix.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,Ix.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,Ix.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,Ix.jsx)("option",{value:"all",children:"All Time"})]})]})]})}),(0,Ix.jsx)("div",{className:"space-y-4",children:0===n.length?(0,Ix.jsxs)("div",{className:"card p-8 text-center",children:[(0,Ix.jsx)("div",{className:"text-4xl mb-4",children:"\u2728"}),(0,Ix.jsx)("div",{className:"text-xl font-semibold text-text-primary mb-2",children:"No Errors Found"}),(0,Ix.jsx)("div",{className:"text-text-secondary",children:"Everything is running smoothly!"})]}):n.map(e=>{const t=d(e),n=(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(t);return(0,Ix.jsxs)("div",{className:"card p-4 border-2 ".concat(n),children:[(0,Ix.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Ix.jsxs)("div",{className:"flex-1",children:[(0,Ix.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ix.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase ".concat(n),children:t}),(0,Ix.jsx)("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-xs font-semibold text-gray-700",children:e.type}),(0,Ix.jsxs)("span",{className:"text-sm text-text-secondary",children:[ob(e.timestamp)," ago"]})]}),(0,Ix.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.message}),e.userId&&(0,Ix.jsxs)("div",{className:"text-sm text-text-secondary",children:["User: ",e.userId]})]})}),(0,Ix.jsxs)("details",{className:"mt-3",children:[(0,Ix.jsx)("summary",{className:"cursor-pointer text-sm font-semibold text-primary hover:underline",children:"View Details"}),(0,Ix.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:(0,Ix.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("strong",{children:"URL:"})," ",e.url]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("strong",{children:"Session:"})," ",e.sessionId]}),e.filename&&(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("strong",{children:"File:"})," ",e.filename,":",e.lineno,":",e.colno]}),e.details&&(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("strong",{children:"Details:"}),(0,Ix.jsx)("pre",{className:"mt-1 p-2 bg-white rounded text-xs overflow-x-auto",children:JSON.stringify(e.details,null,2)})]}),e.stack&&(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("strong",{children:"Stack Trace:"}),(0,Ix.jsx)("pre",{className:"mt-1 p-2 bg-white rounded text-xs overflow-x-auto",children:e.stack})]}),(0,Ix.jsxs)("div",{children:[(0,Ix.jsx)("strong",{children:"User Agent:"})," ",e.userAgent]})]})})]})]},e.id)})})]})]})};class ew extends s.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){Cx.logError({type:"react_error",message:e.message,stack:e.stack,componentStack:t.componentStack}),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,Ix.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Ix.jsxs)("div",{className:"card max-w-2xl w-full p-8 text-center",children:[(0,Ix.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude14"}),(0,Ix.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-4",children:"Oops! Something went wrong"}),(0,Ix.jsx)("p",{className:"text-text-secondary mb-6",children:"We're sorry for the inconvenience. The error has been logged and we'll fix it soon."}),!1,(0,Ix.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,Ix.jsx)("button",{onClick:this.handleReload,className:"btn btn-primary",children:"Reload Page"}),(0,Ix.jsx)("button",{onClick:()=>window.location.href="/",className:"btn btn-secondary",children:"Go Home"})]})]})}):this.props.children}}const tw=ew;function nw(){const e=te();return(0,s.useEffect)(()=>{Cx.trackPageView(e.pathname)},[e]),null}const rw=function(){const[e,t]=(0,s.useState)(!0),[n,r]=(0,s.useState)(null);return(0,s.useEffect)(()=>{const e=yx.onAuthStateChanged(e=>{r(e),t(!1)});return e},[]),e?(0,Ix.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Ix.jsxs)("div",{className:"text-center",children:[(0,Ix.jsx)("div",{className:"spinner mb-4"}),(0,Ix.jsx)("h2",{className:"font-display text-2xl text-primary",children:"Besties"}),(0,Ix.jsx)("p",{className:"text-text-secondary",children:"Loading..."})]})}):(0,Ix.jsx)(tw,{children:(0,Ix.jsx)(Mb,{children:(0,Ix.jsx)(Rx,{children:(0,Ix.jsxs)(Ie,{children:[(0,Ix.jsx)(nw,{}),(0,Ix.jsxs)("div",{className:"App",children:[(0,Ix.jsxs)(we,{children:[(0,Ix.jsx)(xe,{path:"/login",element:n?(0,Ix.jsx)(ve,{to:"/"}):(0,Ix.jsx)(Tx,{})}),(0,Ix.jsx)(xe,{path:"/privacy",element:(0,Ix.jsx)(Xb,{})}),(0,Ix.jsx)(xe,{path:"/terms",element:(0,Ix.jsx)($b,{})}),(0,Ix.jsx)(xe,{path:"/onboarding",element:n?(0,Ix.jsx)(Ox,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/",element:n?(0,Ix.jsx)(_b,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/create",element:n?(0,Ix.jsx)(jb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/profile",element:n?(0,Ix.jsx)(Ib,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/user/:userId",element:n?(0,Ix.jsx)(Tb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/edit-profile",element:n?(0,Ix.jsx)(qb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/besties",element:n?(0,Ix.jsx)(Ob,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/settings",element:n?(0,Ix.jsx)(Bb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/badges",element:n?(0,Ix.jsx)(zb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/history",element:n?(0,Ix.jsx)(Wb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/templates",element:n?(0,Ix.jsx)(Hb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/dev-analytics",element:n?(0,Ix.jsx)(Kb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/favorites",element:n?(0,Ix.jsx)(Gb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/export-data",element:n?(0,Ix.jsx)(Yb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/monitoring",element:n?(0,Ix.jsx)(Qb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/social-feed",element:n?(0,Ix.jsx)(Jb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"/error-dashboard",element:n?(0,Ix.jsx)(Zb,{}):(0,Ix.jsx)(ve,{to:"/login"})}),(0,Ix.jsx)(xe,{path:"*",element:(0,Ix.jsx)(ve,{to:"/"})})]}),(0,Ix.jsx)(en,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#2D3748",fontFamily:"Quicksand, sans-serif",fontWeight:"600"},success:{iconTheme:{primary:"#4CAF50",secondary:"#fff"}},error:{iconTheme:{primary:"#FF6B35",secondary:"#fff"}}}})]})]})})})})};a.createRoot(document.getElementById("root")).render((0,Ix.jsx)(s.StrictMode,{children:(0,Ix.jsx)(rw,{})}))})();
//# sourceMappingURL=main.14d5ac8a.js.map