{"version":3,"file":"static/js/475.53a44719.chunk.js","mappings":"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","sources":["pages/AdminBackfillPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { functions } from '../services/firebase';\nimport { httpsCallable } from 'firebase/functions';\nimport toast from 'react-hot-toast';\n\nconst AdminBackfillPage = () => {\n  const { userData } = useAuth();\n  const [running, setRunning] = useState(false);\n  const [result, setResult] = useState(null);\n\n  const runBackfill = async () => {\n    if (!window.confirm('Are you sure you want to run the bestieUserIds backfill? This will update all existing bestie relationships.')) {\n      return;\n    }\n\n    setRunning(true);\n    setResult(null);\n\n    try {\n      console.log('üöÄ Calling backfill function...');\n      const backfillFunc = httpsCallable(functions, 'backfillBestieUserIds');\n      const response = await backfillFunc();\n\n      console.log('‚úÖ Backfill completed:', response.data);\n      setResult(response.data);\n      toast.success('Backfill completed successfully!');\n    } catch (error) {\n      console.error('‚ùå Backfill failed:', error);\n      toast.error(`Backfill failed: ${error.message}`);\n      setResult({\n        success: false,\n        error: error.message\n      });\n    } finally {\n      setRunning(false);\n    }\n  };\n\n  // Check if user is admin\n  if (!userData?.isAdmin) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n          <div className=\"card p-12 text-center\">\n            <div className=\"text-6xl mb-4\">üîí</div>\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">Admin Only</h2>\n            <p className=\"text-text-secondary\">\n              You must be an admin to access this page\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n        <div className=\"card p-8\">\n          <h1 className=\"text-3xl font-display text-gradient mb-6\">\n            üîß Admin Backfill Tools\n          </h1>\n\n          <div className=\"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6\">\n            <h2 className=\"text-xl font-display text-yellow-900 mb-3\">\n              ‚ö†Ô∏è Backfill bestieUserIds\n            </h2>\n            <p className=\"text-gray-700 mb-4\">\n              This will populate the <code className=\"bg-yellow-100 px-2 py-1 rounded\">bestieUserIds</code> array\n              for all existing accepted bestie relationships.\n            </p>\n            <div className=\"bg-white rounded-lg p-4 mb-4\">\n              <h3 className=\"font-semibold mb-2\">What this does:</h3>\n              <ul className=\"list-disc list-inside space-y-1 text-sm text-gray-700\">\n                <li>Queries all accepted besties in the database</li>\n                <li>For each bestie pair, adds both users to each other's bestieUserIds array</li>\n                <li>Enables besties to view each other's profiles (required by Firebase rules)</li>\n                <li>Safe to run multiple times (won't create duplicates)</li>\n              </ul>\n            </div>\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n              <h3 className=\"font-semibold text-blue-900 mb-2\">üí° When to use this:</h3>\n              <p className=\"text-sm text-blue-800\">\n                Run this if besties can't view each other's profiles or see bestie data.\n                This typically happens if the onCreate Cloud Function wasn't deployed when\n                bestie relationships were created.\n              </p>\n            </div>\n          </div>\n\n          <button\n            onClick={runBackfill}\n            disabled={running}\n            className={`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all ${\n              running\n                ? 'bg-gray-400 cursor-not-allowed'\n                : 'bg-gradient-primary hover:scale-105 shadow-lg'\n            } text-white`}\n          >\n            {running ? (\n              <span className=\"flex items-center justify-center gap-3\">\n                <div className=\"spinner\"></div>\n                Running backfill...\n              </span>\n            ) : (\n              '‚ñ∂Ô∏è Run Backfill Now'\n            )}\n          </button>\n\n          {result && (\n            <div className={`mt-6 p-6 rounded-xl ${\n              result.success ? 'bg-green-50 border-2 border-green-200' : 'bg-red-50 border-2 border-red-200'\n            }`}>\n              <h3 className={`text-xl font-display mb-4 ${\n                result.success ? 'text-green-900' : 'text-red-900'\n              }`}>\n                {result.success ? '‚úÖ Success!' : '‚ùå Failed'}\n              </h3>\n\n              {result.success && (\n                <div className=\"space-y-3\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-green-700\">{result.processed || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Besties Processed</div>\n                    </div>\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-blue-700\">{result.updated || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Successfully Updated</div>\n                    </div>\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-yellow-700\">{result.skipped || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Skipped</div>\n                    </div>\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-red-700\">{result.errors?.length || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Errors</div>\n                    </div>\n                  </div>\n\n                  {result.errors && result.errors.length > 0 && (\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <h4 className=\"font-semibold text-red-900 mb-2\">Errors:</h4>\n                      <ul className=\"text-sm text-gray-700 space-y-1\">\n                        {result.errors.map((err, idx) => (\n                          <li key={idx}>\n                            Bestie {err.bestieId}: {err.error}\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n\n                  <p className=\"text-green-800 font-semibold mt-4\">\n                    üéâ All besties should now be able to view each other's profiles!\n                  </p>\n                </div>\n              )}\n\n              {!result.success && (\n                <div className=\"text-red-800\">\n                  <p className=\"font-semibold mb-2\">Error:</p>\n                  <pre className=\"bg-white p-4 rounded overflow-auto text-sm\">\n                    {result.error || JSON.stringify(result, null, 2)}\n                  </pre>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminBackfillPage;\n"],"names":["AdminBackfillPage","_result$errors","userData","useAuth","running","setRunning","useState","result","setResult","isAdmin","_jsx","className","children","_jsxs","onClick","async","window","confirm","console","log","backfillFunc","httpsCallable","functions","response","data","toast","success","error","concat","message","disabled","processed","updated","skipped","errors","length","map","err","idx","bestieId","JSON","stringify"],"sourceRoot":""}