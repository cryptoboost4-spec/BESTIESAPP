{"version":3,"file":"static/js/619.063eb98d.chunk.js","mappings":"sMAIA,MA8ZA,EA9Z4BA,KAC1B,MAAOC,EAAWC,IAAgBC,EAAAA,EAAAA,UAAS,QACpCC,EAAQC,IAAaF,EAAAA,EAAAA,UAAS,KAC9BG,EAAaC,IAAkBJ,EAAAA,EAAAA,UAAS,KACxCK,EAAaC,IAAkBN,EAAAA,EAAAA,UAAS,KACxCO,EAAYC,IAAiBR,EAAAA,EAAAA,UAAS,CAAC,IACvCS,EAASC,IAAcV,EAAAA,EAAAA,WAAS,IAEvCW,EAAAA,EAAAA,WAAU,KACRC,KAEC,CAACd,IAEJ,MAcMc,EAAqBC,UACzBH,GAAW,GACX,IACE,MAAMI,EAAYC,EAAAA,GAAUC,SAjBNC,MACxB,MAAMC,EAAM,IAAIC,KAChB,OAAQrB,GACN,IAAK,KACH,OAAO,IAAIqB,KAAKD,EAAIE,UAAY,MAClC,IAAK,MAIL,QACE,OAAO,IAAID,KAAKD,EAAIE,UAAY,OAHlC,IAAK,KACH,OAAO,IAAID,KAAKD,EAAIE,UAAY,UASGH,IAG/BI,GAAcC,EAAAA,EAAAA,IAClBC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,WACfC,EAAAA,EAAAA,IAAM,YAAa,KAAMX,IACzBY,EAAAA,EAAAA,IAAQ,YAAa,SACrBC,EAAAA,EAAAA,IAAM,KAEFC,QAAmBC,EAAAA,EAAAA,IAAQR,GAC3BS,EAAa,GACnBF,EAAWG,QAAQC,GAAOF,EAAWG,MAAIC,EAAAA,EAAAA,GAAC,CAAEC,GAAIH,EAAIG,IAAOH,EAAII,UAC/DlC,EAAU4B,GAGV,MAAMO,GAAYf,EAAAA,EAAAA,IAChBC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,gBACfC,EAAAA,EAAAA,IAAM,YAAa,KAAMX,IACzBY,EAAAA,EAAAA,IAAQ,YAAa,SACrBC,EAAAA,EAAAA,IAAM,MAEFW,QAAiBT,EAAAA,EAAAA,IAAQQ,GACzBE,EAAW,GACjBD,EAASP,QAAQC,GAAOO,EAASN,MAAIC,EAAAA,EAAAA,GAAC,CAAEC,GAAIH,EAAIG,IAAOH,EAAII,UAC3DhC,EAAemC,GAGf,MAAMC,GAAelB,EAAAA,EAAAA,IACnBC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,iBACfC,EAAAA,EAAAA,IAAM,YAAa,KAAMX,IACzBY,EAAAA,EAAAA,IAAQ,YAAa,SACrBC,EAAAA,EAAAA,IAAM,MAEFc,QAAoBZ,EAAAA,EAAAA,IAAQW,GAC5BE,EAAc,GACpBD,EAAYV,QAAQC,GAAOU,EAAYT,MAAIC,EAAAA,EAAAA,GAAC,CAAEC,GAAIH,EAAIG,IAAOH,EAAII,UACjE9B,EAAeoC,GAGf,MAAMC,GAAcrB,EAAAA,EAAAA,IAClBC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,kBACfC,EAAAA,EAAAA,IAAM,YAAa,KAAMX,IACzBY,EAAAA,EAAAA,IAAQ,YAAa,SACrBC,EAAAA,EAAAA,IAAM,MAEFiB,QAAmBf,EAAAA,EAAAA,IAAQc,GAG3BE,EAAU,CAAC,EACjBD,EAAWb,QAAQC,IACjB,MAAMI,EAAOJ,EAAII,OACZS,EAAQT,EAAKU,UAChBD,EAAQT,EAAKU,QAAU,CAAC,GAErBD,EAAQT,EAAKU,QAAQV,EAAKW,QAC7BF,EAAQT,EAAKU,QAAQV,EAAKW,MAAQ,GAEpCF,EAAQT,EAAKU,QAAQV,EAAKW,UAE5BvC,EAAcqC,GAEdnC,GAAW,EACb,CAAE,MAAOsC,GACPC,QAAQD,MAAM,iCAAkCA,GAChDtC,GAAW,EACb,GAIIwC,GAAcjD,EAAOkD,OAASC,KAAKC,IAAIhD,EAAY8C,OAAQ,GAAM,KAAKG,QAAQ,GAG9EC,EAAYpD,EAAYqD,OAAOC,GAAgB,cAAXA,EAAEC,MACtCC,EAAcJ,EAAUJ,OAAS,GAClCI,EAAUK,OAAO,CAACC,EAAKJ,KAAC,IAAAK,EAAA,OAAKD,IAAgB,QAATC,EAAAL,EAAEM,eAAO,IAAAD,OAAA,EAATA,EAAWE,QAAS,IAAI,GAAKT,EAAUJ,QAAQG,QAAQ,GAC5F,EAGEW,EAAehE,EAAO2D,OAAO,CAACM,EAAKC,KACvCD,EAAIC,EAAIT,OAASQ,EAAIC,EAAIT,OAAS,GAAK,EAChCQ,GACN,CAAC,GAGEE,EAAY/D,EAAYmD,OAAOa,GAAkB,cAAbA,EAAEC,QACtCC,EAAaH,EAAUR,OAAO,CAACM,EAAKM,KAAQ,IAADC,EAC/C,MAAMC,GAAiB,QAAVD,EAAAD,EAAGG,eAAO,IAAAF,OAAA,EAAVA,EAAYC,OAAQ,UAEjC,OADAR,EAAIQ,IAASR,EAAIQ,IAAS,GAAK,EACxBR,GACN,CAAC,GACEU,EAAWC,OAAOC,QAAQP,GAC7BQ,KAAK,CAACV,EAAGW,IAAMA,EAAE,GAAKX,EAAE,IACxBY,MAAM,EAAG,IAEZ,OAAIxE,GAEAyE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,UACtCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yCAAwCC,UACrDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iBAOrBD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,UAEtCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,+CAA8CC,SAAC,uCAG7DF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,sBAAqBC,SAAC,sDAIrCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kBAAiBC,SAAA,EAC9BF,EAAAA,EAAAA,KAAA,UACEI,QAASA,IAAMvF,EAAa,MAC5BoF,UAAS,wCAAAI,OACO,OAAdzF,EAAqB,wBAA0B,8BAC9CsF,SACJ,eAGDF,EAAAA,EAAAA,KAAA,UACEI,QAASA,IAAMvF,EAAa,OAC5BoF,UAAS,wCAAAI,OACO,QAAdzF,EAAsB,wBAA0B,8BAC/CsF,SACJ,cAGDF,EAAAA,EAAAA,KAAA,UACEI,QAASA,IAAMvF,EAAa,MAC5BoF,UAAS,wCAAAI,OACO,OAAdzF,EAAqB,wBAA0B,8BAC9CsF,SACJ,oBAMHC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6CAA4CC,SAAA,EACzDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAAA,OAAKC,UAAS,yBAAAI,OAA2BtF,EAAOkD,OAAS,EAAI,cAAgB,gBAAiBiC,SAC3FnF,EAAOkD,UAEV+B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,SAAC,qBAG/CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qCAAoCC,SAAA,CAChDlC,EAAU,QAEbgC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,SAAC,mBAG/CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qCAAoCC,SAAA,CAChDzB,EAAY,SAEfuB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,SAAC,sBAG/CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uCAAsCC,SAClD/E,EAAY8C,UAEf+B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,SAAC,wBAKjDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,+CAA8CC,SAAA,CAAC,+BACxCnF,EAAOkD,OAAO,OAGhB,IAAlBlD,EAAOkD,QACNkC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,SAAC,YAC/BF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,sBAAqBC,SAAC,oDAGrCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvBnF,EAAOgF,MAAM,EAAG,IAAIO,IAAIxC,IACvBqC,EAAAA,EAAAA,MAAA,OAAoBF,UAAU,oCAAmCC,SAAA,EAC/DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wCAAuCC,UACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,SAAQC,SAAA,EACrBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BC,SAAA,EAC3CF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,qBAAoBC,SAAEpC,EAAMU,QAC5CwB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,8BAA6BC,SAC1CpC,EAAMyC,WAAa,IAAItE,KAAK6B,EAAMyC,UAAUC,UAAUC,uBAG3DT,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uCAAsCC,SAClDpC,EAAM4C,WAETV,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mCAAkCC,SAC9CpC,EAAM6C,MAER7C,EAAM8C,SACLT,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,CAAC,SACpCpC,EAAM8C,eAKpB9C,EAAM+C,QACLV,EAAAA,EAAAA,MAAA,WAASF,UAAU,mCAAkCC,SAAA,EACnDF,EAAAA,EAAAA,KAAA,WAASC,UAAU,iBAAgBC,SAAC,iBACpCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qDAAoDC,SAChEpC,EAAM+C,aA1BL/C,EAAMb,UAqCvB0C,OAAOmB,KAAK/B,GAAcd,OAAS,IAClCkC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8CAA6CC,SAAC,2BAG5DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvBP,OAAOC,QAAQb,GAAcuB,IAAIS,IAAA,IAAEvC,EAAMwC,GAAMD,EAAA,OAC9CZ,EAAAA,EAAAA,MAAA,OAAgBF,UAAU,oCAAmCC,SAAA,EAC3DF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,oBAAmBC,SAAE1B,KACrC2B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gCAAgCgB,MAAO,CAAEC,MAAM,GAADb,OAAMW,EAAQjG,EAAOkD,OAAU,IAAG,OAAOiC,UACpGF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gCAAgCgB,MAAO,CAAEC,MAAO,aAEjElB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,6CAA4CC,SAAEc,SANxDxC,WAelB2B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,+CAA8CC,SAAC,8BAIG,IAA/DjF,EAAYqD,OAAOC,GAAgB,kBAAXA,EAAEC,MAA0BP,QACnDkC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,SAAC,kBAC/BF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,sBAAqBC,SAAC,oCAGrCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,WAAUC,UACvBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvBjF,EACEqD,OAAOC,GAAgB,kBAAXA,EAAEC,MACduB,MAAM,EAAG,IACTO,IAAI,CAACa,EAAMC,KACVjB,EAAAA,EAAAA,MAAA,OAAeF,UAAU,iEAAgEC,SAAA,EACvFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mDAAkDC,SAC9DiB,EAAKE,QAERrB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,SACzCiB,EAAKZ,WAAa,IAAItE,KAAKkF,EAAKZ,UAAUC,UAAUC,uBAGzDN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kCAAiCC,SAAA,CAC7ChC,KAAKoD,MAAMH,EAAKI,UAAU,UAVrBH,WAoBrB/C,EAAUJ,OAAS,IAClBkC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8CAA6CC,SAAC,+BAG5DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvB,CAAC,MAAO,MAAO,UAAW,WAAY,MAAO,QAAQI,IAAIkB,IACxD,MAAMC,EAAMpD,EAAUK,OAAO,CAACC,EAAKJ,KAAC,IAAAmD,EAAA,OAAK/C,IAAgB,QAAT+C,EAAAnD,EAAEM,eAAO,IAAA6C,OAAA,EAATA,EAAYF,KAAW,IAAI,GAAKnD,EAAUJ,OAC1F,OACEkC,EAAAA,EAAAA,MAAA,OAAkBF,UAAU,oCAAmCC,SAAA,EAC7DF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,+BAA8BC,SAAEsB,KAChDrB,EAAAA,EAAAA,MAAA,QAAMF,UAAU,sBAAqBC,SAAA,CAAEhC,KAAKoD,MAAMG,GAAK,UAF/CD,WAWpBrB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8CAA6CC,SAAC,4BAG5DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvBR,EAASY,IAAIqB,IAAA,IAAEnC,EAAMwB,GAAMW,EAAA,OAC1BxB,EAAAA,EAAAA,MAAA,OAAgBF,UAAU,oCAAmCC,SAAA,EAC3DF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,oBAAmBC,SAAEV,KACrCW,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iCAAiCgB,MAAO,CAAEC,MAAM,GAADb,OAAMW,EAAQ9B,EAAUjB,OAAU,IAAG,OAAOiC,UACxGF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iCAAiCgB,MAAO,CAAEC,MAAO,aAElEf,EAAAA,EAAAA,MAAA,QAAMF,UAAU,8CAA6CC,SAAA,CAAEc,EAAM,iBAN/DxB,UAcfG,OAAOmB,KAAKzF,GAAY4C,OAAS,IAChCkC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,8CAA6CC,SAAC,oCAG3DP,OAAOC,QAAQvE,GAAYiF,IAAIsB,IAAsB,IAApBhE,EAAQiE,GAAMD,EAC9C,MAAME,EAAcnC,OAAOC,QAAQiC,GAAOhC,OACpCkC,EAAW7D,KAAKC,OAAOwB,OAAOqC,OAAOH,IAE3C,OACE1B,EAAAA,EAAAA,MAAA,OAAkBF,UAAU,iBAAgBC,SAAA,EAC1CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kDAAiDC,SAAA,CAC7DtC,EAAOqE,QAAQ,KAAM,KAAK,cAE7BjC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvB4B,EAAYxB,IAAI,CAAA4B,EAAgBd,KAAS,IAAvBvD,EAAMmD,GAAMkB,EAC7B,MAAMC,EAAqB,IAARf,EAAY,KAAQJ,EAAQc,EAAY,GAAG,GAAM,KAAK1D,QAAQ,GAC3EgE,EAAUhB,EAAM,IAAOU,EAAYV,EAAM,GAAG,GAAKJ,GAASc,EAAYV,EAAM,GAAG,GAAM,KAAKhD,QAAQ,GAAK,EAE7G,OACE+B,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACrDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,+BAA8BC,SAAErC,EAAKoE,QAAQ,KAAM,QACnE9B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,8BAA6BC,SAAA,CAAEc,EAAM,aACrDb,EAAAA,EAAAA,MAAA,QAAMF,UAAU,8BAA6BC,SAAA,CAAC,IAAEiC,EAAW,QAC1DC,EAAU,IACTjC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,sBAAqBC,SAAA,CAAC,IAAEkC,EAAQ,cAItDpC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+CAA8CC,UAC3DF,EAAAA,EAAAA,KAAA,OACEC,UAAS,UAAAI,OAAY+B,EAAU,GAAK,YAAc,cAClDnB,MAAO,CAAEC,MAAM,GAADb,OAAMW,EAAQe,EAAY,IAAG,YAdvClE,SAVRD,SAsClBoC,EAAAA,EAAAA,KAAA,UACEI,QAAS1E,EACTuE,UAAU,yBACVoC,SAAU9G,EAAQ2E,SACnB,mC","sources":["pages/MonitoringDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db } from '../services/firebase';\r\nimport { collection, query, orderBy, limit, getDocs, where, Timestamp } from 'firebase/firestore';\r\n\r\nconst MonitoringDashboard = () => {\r\n  const [timeRange, setTimeRange] = useState('24h');\r\n  const [errors, setErrors] = useState([]);\r\n  const [performance, setPerformance] = useState([]);\r\n  const [userActions, setUserActions] = useState([]);\r\n  const [funnelData, setFunnelData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadMonitoringData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [timeRange]);\r\n\r\n  const getTimeRangeStart = () => {\r\n    const now = new Date();\r\n    switch (timeRange) {\r\n      case '1h':\r\n        return new Date(now.getTime() - 60 * 60 * 1000);\r\n      case '24h':\r\n        return new Date(now.getTime() - 24 * 60 * 60 * 1000);\r\n      case '7d':\r\n        return new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n      default:\r\n        return new Date(now.getTime() - 24 * 60 * 60 * 1000);\r\n    }\r\n  };\r\n\r\n  const loadMonitoringData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const startTime = Timestamp.fromDate(getTimeRangeStart());\r\n\r\n      // Load errors\r\n      const errorsQuery = query(\r\n        collection(db, 'errors'),\r\n        where('createdAt', '>=', startTime),\r\n        orderBy('createdAt', 'desc'),\r\n        limit(50)\r\n      );\r\n      const errorsSnap = await getDocs(errorsQuery);\r\n      const errorsList = [];\r\n      errorsSnap.forEach(doc => errorsList.push({ id: doc.id, ...doc.data() }));\r\n      setErrors(errorsList);\r\n\r\n      // Load performance metrics\r\n      const perfQuery = query(\r\n        collection(db, 'performance'),\r\n        where('createdAt', '>=', startTime),\r\n        orderBy('createdAt', 'desc'),\r\n        limit(100)\r\n      );\r\n      const perfSnap = await getDocs(perfQuery);\r\n      const perfList = [];\r\n      perfSnap.forEach(doc => perfList.push({ id: doc.id, ...doc.data() }));\r\n      setPerformance(perfList);\r\n\r\n      // Load user actions\r\n      const actionsQuery = query(\r\n        collection(db, 'user_actions'),\r\n        where('createdAt', '>=', startTime),\r\n        orderBy('createdAt', 'desc'),\r\n        limit(200)\r\n      );\r\n      const actionsSnap = await getDocs(actionsQuery);\r\n      const actionsList = [];\r\n      actionsSnap.forEach(doc => actionsList.push({ id: doc.id, ...doc.data() }));\r\n      setUserActions(actionsList);\r\n\r\n      // Load funnel events (limit to prevent unbounded reads)\r\n      const funnelQuery = query(\r\n        collection(db, 'funnel_events'),\r\n        where('createdAt', '>=', startTime),\r\n        orderBy('createdAt', 'desc'),\r\n        limit(1000)\r\n      );\r\n      const funnelSnap = await getDocs(funnelQuery);\r\n      \r\n      // Analyze funnel data\r\n      const funnels = {};\r\n      funnelSnap.forEach(doc => {\r\n        const data = doc.data();\r\n        if (!funnels[data.funnel]) {\r\n          funnels[data.funnel] = {};\r\n        }\r\n        if (!funnels[data.funnel][data.step]) {\r\n          funnels[data.funnel][data.step] = 0;\r\n        }\r\n        funnels[data.funnel][data.step]++;\r\n      });\r\n      setFunnelData(funnels);\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error loading monitoring data:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Calculate error rate\r\n  const errorRate = ((errors.length / Math.max(userActions.length, 1)) * 100).toFixed(2);\r\n\r\n  // Calculate average page load time\r\n  const pageLoads = performance.filter(p => p.type === 'page_load');\r\n  const avgPageLoad = pageLoads.length > 0\r\n    ? (pageLoads.reduce((sum, p) => sum + (p.metrics?.total || 0), 0) / pageLoads.length).toFixed(0)\r\n    : 0;\r\n\r\n  // Group errors by type\r\n  const errorsByType = errors.reduce((acc, err) => {\r\n    acc[err.type] = (acc[err.type] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n\r\n  // Most visited pages\r\n  const pageViews = userActions.filter(a => a.action === 'page_view');\r\n  const pageVisits = pageViews.reduce((acc, pv) => {\r\n    const page = pv.details?.page || 'unknown';\r\n    acc[page] = (acc[page] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  const topPages = Object.entries(pageVisits)\r\n    .sort((a, b) => b[1] - a[1])\r\n    .slice(0, 10);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-pattern\">\r\n        <div className=\"flex items-center justify-center py-20\">\r\n          <div className=\"spinner\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-pattern\">\r\n\r\n      <div className=\"max-w-7xl mx-auto p-4 pb-20\">\r\n        <div className=\"mb-6\">\r\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">\r\n            üîç Monitoring Dashboard\r\n          </h1>\r\n          <p className=\"text-text-secondary\">Real-time errors, performance & user behavior</p>\r\n        </div>\r\n\r\n        {/* Time Range Filter */}\r\n        <div className=\"flex gap-2 mb-6\">\r\n          <button\r\n            onClick={() => setTimeRange('1h')}\r\n            className={`px-4 py-2 rounded-full font-semibold ${\r\n              timeRange === '1h' ? 'bg-primary text-white' : 'bg-white text-text-primary'\r\n            }`}\r\n          >\r\n            Last Hour\r\n          </button>\r\n          <button\r\n            onClick={() => setTimeRange('24h')}\r\n            className={`px-4 py-2 rounded-full font-semibold ${\r\n              timeRange === '24h' ? 'bg-primary text-white' : 'bg-white text-text-primary'\r\n            }`}\r\n          >\r\n            Last 24h\r\n          </button>\r\n          <button\r\n            onClick={() => setTimeRange('7d')}\r\n            className={`px-4 py-2 rounded-full font-semibold ${\r\n              timeRange === '7d' ? 'bg-primary text-white' : 'bg-white text-text-primary'\r\n            }`}\r\n          >\r\n            Last 7 Days\r\n          </button>\r\n        </div>\r\n\r\n        {/* Key Metrics */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n          <div className=\"card p-4 text-center\">\r\n            <div className={`text-3xl font-display ${errors.length > 0 ? 'text-danger' : 'text-success'}`}>\r\n              {errors.length}\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">Total Errors</div>\r\n          </div>\r\n\r\n          <div className=\"card p-4 text-center\">\r\n            <div className=\"text-3xl font-display text-warning\">\r\n              {errorRate}%\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">Error Rate</div>\r\n          </div>\r\n\r\n          <div className=\"card p-4 text-center\">\r\n            <div className=\"text-3xl font-display text-primary\">\r\n              {avgPageLoad}ms\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">Avg Page Load</div>\r\n          </div>\r\n\r\n          <div className=\"card p-4 text-center\">\r\n            <div className=\"text-3xl font-display text-secondary\">\r\n              {userActions.length}\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">User Actions</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Errors */}\r\n        <div className=\"mb-6\">\r\n          <h2 className=\"text-2xl font-display text-text-primary mb-4\">\r\n            üêõ Recent Errors ({errors.length})\r\n          </h2>\r\n          \r\n          {errors.length === 0 ? (\r\n            <div className=\"card p-8 text-center\">\r\n              <div className=\"text-4xl mb-2\">‚úÖ</div>\r\n              <p className=\"text-text-secondary\">No errors! Everything is working perfectly!</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {errors.slice(0, 10).map(error => (\r\n                <div key={error.id} className=\"card p-4 border-l-4 border-danger\">\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <span className=\"badge badge-danger\">{error.type}</span>\r\n                        <span className=\"text-sm text-text-secondary\">\r\n                          {error.createdAt && new Date(error.createdAt.toDate()).toLocaleString()}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"font-semibold text-text-primary mb-1\">\r\n                        {error.message}\r\n                      </div>\r\n                      <div className=\"text-sm text-text-secondary mb-2\">\r\n                        {error.url}\r\n                      </div>\r\n                      {error.userId && (\r\n                        <div className=\"text-xs text-text-secondary\">\r\n                          User: {error.userId}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  {error.stack && (\r\n                    <details className=\"text-xs text-text-secondary mt-2\">\r\n                      <summary className=\"cursor-pointer\">Stack Trace</summary>\r\n                      <pre className=\"mt-2 p-2 bg-gray-50 rounded overflow-auto max-h-40\">\r\n                        {error.stack}\r\n                      </pre>\r\n                    </details>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Error Types Breakdown */}\r\n        {Object.keys(errorsByType).length > 0 && (\r\n          <div className=\"card p-6 mb-6\">\r\n            <h3 className=\"font-display text-lg text-text-primary mb-4\">\r\n              Error Types Breakdown\r\n            </h3>\r\n            <div className=\"space-y-2\">\r\n              {Object.entries(errorsByType).map(([type, count]) => (\r\n                <div key={type} className=\"flex items-center justify-between\">\r\n                  <span className=\"text-text-primary\">{type}</span>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"h-2 bg-danger/20 rounded-full\" style={{ width: `${(count / errors.length) * 200}px` }}>\r\n                      <div className=\"h-full bg-danger rounded-full\" style={{ width: '100%' }} />\r\n                    </div>\r\n                    <span className=\"text-text-secondary text-sm w-8 text-right\">{count}</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Performance Metrics */}\r\n        <div className=\"mb-6\">\r\n          <h2 className=\"text-2xl font-display text-text-primary mb-4\">\r\n            ‚ö° Performance Issues\r\n          </h2>\r\n          \r\n          {performance.filter(p => p.type === 'slow_resource').length === 0 ? (\r\n            <div className=\"card p-8 text-center\">\r\n              <div className=\"text-4xl mb-2\">üöÄ</div>\r\n              <p className=\"text-text-secondary\">No slow resources detected!</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"card p-6\">\r\n              <div className=\"space-y-2\">\r\n                {performance\r\n                  .filter(p => p.type === 'slow_resource')\r\n                  .slice(0, 10)\r\n                  .map((perf, idx) => (\r\n                    <div key={idx} className=\"flex items-center justify-between p-3 bg-warning/10 rounded-lg\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"text-sm font-semibold text-text-primary truncate\">\r\n                          {perf.name}\r\n                        </div>\r\n                        <div className=\"text-xs text-text-secondary\">\r\n                          {perf.createdAt && new Date(perf.createdAt.toDate()).toLocaleString()}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-warning font-semibold ml-4\">\r\n                        {Math.round(perf.duration)}ms\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Page Performance */}\r\n        {pageLoads.length > 0 && (\r\n          <div className=\"card p-6 mb-6\">\r\n            <h3 className=\"font-display text-lg text-text-primary mb-4\">\r\n              Page Load Breakdown (avg)\r\n            </h3>\r\n            <div className=\"space-y-2\">\r\n              {['dns', 'tcp', 'request', 'response', 'dom', 'load'].map(metric => {\r\n                const avg = pageLoads.reduce((sum, p) => sum + (p.metrics?.[metric] || 0), 0) / pageLoads.length;\r\n                return (\r\n                  <div key={metric} className=\"flex items-center justify-between\">\r\n                    <span className=\"text-text-primary capitalize\">{metric}</span>\r\n                    <span className=\"text-text-secondary\">{Math.round(avg)}ms</span>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Top Pages */}\r\n        <div className=\"card p-6 mb-6\">\r\n          <h3 className=\"font-display text-lg text-text-primary mb-4\">\r\n            üìä Top Pages\r\n          </h3>\r\n          <div className=\"space-y-2\">\r\n            {topPages.map(([page, count]) => (\r\n              <div key={page} className=\"flex items-center justify-between\">\r\n                <span className=\"text-text-primary\">{page}</span>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"h-2 bg-primary/20 rounded-full\" style={{ width: `${(count / pageViews.length) * 200}px` }}>\r\n                    <div className=\"h-full bg-primary rounded-full\" style={{ width: '100%' }} />\r\n                  </div>\r\n                  <span className=\"text-text-secondary text-sm w-12 text-right\">{count} views</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Funnel Analysis */}\r\n        {Object.keys(funnelData).length > 0 && (\r\n          <div className=\"card p-6 mb-6\">\r\n            <h3 className=\"font-display text-lg text-text-primary mb-4\">\r\n              üéØ Conversion Funnels\r\n            </h3>\r\n            {Object.entries(funnelData).map(([funnel, steps]) => {\r\n              const stepEntries = Object.entries(steps).sort();\r\n              const maxCount = Math.max(...Object.values(steps));\r\n              \r\n              return (\r\n                <div key={funnel} className=\"mb-6 last:mb-0\">\r\n                  <div className=\"font-semibold text-text-primary mb-3 capitalize\">\r\n                    {funnel.replace(/_/g, ' ')} Funnel\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    {stepEntries.map(([step, count], idx) => {\r\n                      const percentage = idx === 0 ? 100 : ((count / stepEntries[0][1]) * 100).toFixed(1);\r\n                      const dropOff = idx > 0 ? (((stepEntries[idx - 1][1] - count) / stepEntries[idx - 1][1]) * 100).toFixed(1) : 0;\r\n                      \r\n                      return (\r\n                        <div key={step}>\r\n                          <div className=\"flex items-center justify-between mb-1\">\r\n                            <span className=\"text-text-primary capitalize\">{step.replace(/_/g, ' ')}</span>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <span className=\"text-text-secondary text-sm\">{count} users</span>\r\n                              <span className=\"text-text-secondary text-sm\">({percentage}%)</span>\r\n                              {dropOff > 0 && (\r\n                                <span className=\"text-danger text-sm\">-{dropOff}%</span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"h-3 bg-gray-200 rounded-full overflow-hidden\">\r\n                            <div\r\n                              className={`h-full ${dropOff > 20 ? 'bg-danger' : 'bg-primary'}`}\r\n                              style={{ width: `${(count / maxCount) * 100}%` }}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {/* Refresh Button */}\r\n        <button\r\n          onClick={loadMonitoringData}\r\n          className=\"w-full btn btn-primary\"\r\n          disabled={loading}\r\n        >\r\n          üîÑ Refresh Data\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonitoringDashboard;\r\n"],"names":["MonitoringDashboard","timeRange","setTimeRange","useState","errors","setErrors","performance","setPerformance","userActions","setUserActions","funnelData","setFunnelData","loading","setLoading","useEffect","loadMonitoringData","async","startTime","Timestamp","fromDate","getTimeRangeStart","now","Date","getTime","errorsQuery","query","collection","db","where","orderBy","limit","errorsSnap","getDocs","errorsList","forEach","doc","push","_objectSpread","id","data","perfQuery","perfSnap","perfList","actionsQuery","actionsSnap","actionsList","funnelQuery","funnelSnap","funnels","funnel","step","error","console","errorRate","length","Math","max","toFixed","pageLoads","filter","p","type","avgPageLoad","reduce","sum","_p$metrics","metrics","total","errorsByType","acc","err","pageViews","a","action","pageVisits","pv","_pv$details","page","details","topPages","Object","entries","sort","b","slice","_jsx","className","children","_jsxs","onClick","concat","map","createdAt","toDate","toLocaleString","message","url","userId","stack","keys","_ref","count","style","width","perf","idx","name","round","duration","metric","avg","_p$metrics2","_ref2","_ref3","steps","stepEntries","maxCount","values","replace","_ref4","percentage","dropOff","disabled"],"sourceRoot":""}