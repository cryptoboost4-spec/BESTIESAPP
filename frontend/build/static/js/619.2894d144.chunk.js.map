{"version":3,"file":"static/js/619.2894d144.chunk.js","mappings":"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","sources":["pages/MonitoringDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { db } from '../services/firebase';\nimport { collection, query, orderBy, limit, getDocs, where, Timestamp } from 'firebase/firestore';\n\nconst MonitoringDashboard = () => {\n  const [timeRange, setTimeRange] = useState('24h');\n  const [errors, setErrors] = useState([]);\n  const [performance, setPerformance] = useState([]);\n  const [userActions, setUserActions] = useState([]);\n  const [funnelData, setFunnelData] = useState({});\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadMonitoringData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timeRange]);\n\n  const getTimeRangeStart = () => {\n    const now = new Date();\n    switch (timeRange) {\n      case '1h':\n        return new Date(now.getTime() - 60 * 60 * 1000);\n      case '24h':\n        return new Date(now.getTime() - 24 * 60 * 60 * 1000);\n      case '7d':\n        return new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n      default:\n        return new Date(now.getTime() - 24 * 60 * 60 * 1000);\n    }\n  };\n\n  const loadMonitoringData = async () => {\n    setLoading(true);\n    try {\n      const startTime = Timestamp.fromDate(getTimeRangeStart());\n\n      // Load errors\n      const errorsQuery = query(\n        collection(db, 'errors'),\n        where('createdAt', '>=', startTime),\n        orderBy('createdAt', 'desc'),\n        limit(50)\n      );\n      const errorsSnap = await getDocs(errorsQuery);\n      const errorsList = [];\n      errorsSnap.forEach(doc => errorsList.push({ id: doc.id, ...doc.data() }));\n      setErrors(errorsList);\n\n      // Load performance metrics\n      const perfQuery = query(\n        collection(db, 'performance'),\n        where('createdAt', '>=', startTime),\n        orderBy('createdAt', 'desc'),\n        limit(100)\n      );\n      const perfSnap = await getDocs(perfQuery);\n      const perfList = [];\n      perfSnap.forEach(doc => perfList.push({ id: doc.id, ...doc.data() }));\n      setPerformance(perfList);\n\n      // Load user actions\n      const actionsQuery = query(\n        collection(db, 'user_actions'),\n        where('createdAt', '>=', startTime),\n        orderBy('createdAt', 'desc'),\n        limit(200)\n      );\n      const actionsSnap = await getDocs(actionsQuery);\n      const actionsList = [];\n      actionsSnap.forEach(doc => actionsList.push({ id: doc.id, ...doc.data() }));\n      setUserActions(actionsList);\n\n      // Load funnel events\n      const funnelQuery = query(\n        collection(db, 'funnel_events'),\n        where('createdAt', '>=', startTime),\n        orderBy('createdAt', 'desc')\n      );\n      const funnelSnap = await getDocs(funnelQuery);\n      \n      // Analyze funnel data\n      const funnels = {};\n      funnelSnap.forEach(doc => {\n        const data = doc.data();\n        if (!funnels[data.funnel]) {\n          funnels[data.funnel] = {};\n        }\n        if (!funnels[data.funnel][data.step]) {\n          funnels[data.funnel][data.step] = 0;\n        }\n        funnels[data.funnel][data.step]++;\n      });\n      setFunnelData(funnels);\n\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading monitoring data:', error);\n      setLoading(false);\n    }\n  };\n\n  // Calculate error rate\n  const errorRate = ((errors.length / Math.max(userActions.length, 1)) * 100).toFixed(2);\n\n  // Calculate average page load time\n  const pageLoads = performance.filter(p => p.type === 'page_load');\n  const avgPageLoad = pageLoads.length > 0\n    ? (pageLoads.reduce((sum, p) => sum + (p.metrics?.total || 0), 0) / pageLoads.length).toFixed(0)\n    : 0;\n\n  // Group errors by type\n  const errorsByType = errors.reduce((acc, err) => {\n    acc[err.type] = (acc[err.type] || 0) + 1;\n    return acc;\n  }, {});\n\n  // Most visited pages\n  const pageViews = userActions.filter(a => a.action === 'page_view');\n  const pageVisits = pageViews.reduce((acc, pv) => {\n    const page = pv.details?.page || 'unknown';\n    acc[page] = (acc[page] || 0) + 1;\n    return acc;\n  }, {});\n  const topPages = Object.entries(pageVisits)\n    .sort((a, b) => b[1] - a[1])\n    .slice(0, 10);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n\n      <div className=\"max-w-7xl mx-auto p-4 pb-20\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">\n            üîç Monitoring Dashboard\n          </h1>\n          <p className=\"text-text-secondary\">Real-time errors, performance & user behavior</p>\n        </div>\n\n        {/* Time Range Filter */}\n        <div className=\"flex gap-2 mb-6\">\n          <button\n            onClick={() => setTimeRange('1h')}\n            className={`px-4 py-2 rounded-full font-semibold ${\n              timeRange === '1h' ? 'bg-primary text-white' : 'bg-white text-text-primary'\n            }`}\n          >\n            Last Hour\n          </button>\n          <button\n            onClick={() => setTimeRange('24h')}\n            className={`px-4 py-2 rounded-full font-semibold ${\n              timeRange === '24h' ? 'bg-primary text-white' : 'bg-white text-text-primary'\n            }`}\n          >\n            Last 24h\n          </button>\n          <button\n            onClick={() => setTimeRange('7d')}\n            className={`px-4 py-2 rounded-full font-semibold ${\n              timeRange === '7d' ? 'bg-primary text-white' : 'bg-white text-text-primary'\n            }`}\n          >\n            Last 7 Days\n          </button>\n        </div>\n\n        {/* Key Metrics */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"card p-4 text-center\">\n            <div className={`text-3xl font-display ${errors.length > 0 ? 'text-danger' : 'text-success'}`}>\n              {errors.length}\n            </div>\n            <div className=\"text-sm text-text-secondary\">Total Errors</div>\n          </div>\n\n          <div className=\"card p-4 text-center\">\n            <div className=\"text-3xl font-display text-warning\">\n              {errorRate}%\n            </div>\n            <div className=\"text-sm text-text-secondary\">Error Rate</div>\n          </div>\n\n          <div className=\"card p-4 text-center\">\n            <div className=\"text-3xl font-display text-primary\">\n              {avgPageLoad}ms\n            </div>\n            <div className=\"text-sm text-text-secondary\">Avg Page Load</div>\n          </div>\n\n          <div className=\"card p-4 text-center\">\n            <div className=\"text-3xl font-display text-secondary\">\n              {userActions.length}\n            </div>\n            <div className=\"text-sm text-text-secondary\">User Actions</div>\n          </div>\n        </div>\n\n        {/* Recent Errors */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-display text-text-primary mb-4\">\n            üêõ Recent Errors ({errors.length})\n          </h2>\n          \n          {errors.length === 0 ? (\n            <div className=\"card p-8 text-center\">\n              <div className=\"text-4xl mb-2\">‚úÖ</div>\n              <p className=\"text-text-secondary\">No errors! Everything is working perfectly!</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {errors.slice(0, 10).map(error => (\n                <div key={error.id} className=\"card p-4 border-l-4 border-danger\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"badge badge-danger\">{error.type}</span>\n                        <span className=\"text-sm text-text-secondary\">\n                          {error.createdAt && new Date(error.createdAt.toDate()).toLocaleString()}\n                        </span>\n                      </div>\n                      <div className=\"font-semibold text-text-primary mb-1\">\n                        {error.message}\n                      </div>\n                      <div className=\"text-sm text-text-secondary mb-2\">\n                        {error.url}\n                      </div>\n                      {error.userId && (\n                        <div className=\"text-xs text-text-secondary\">\n                          User: {error.userId}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  {error.stack && (\n                    <details className=\"text-xs text-text-secondary mt-2\">\n                      <summary className=\"cursor-pointer\">Stack Trace</summary>\n                      <pre className=\"mt-2 p-2 bg-gray-50 rounded overflow-auto max-h-40\">\n                        {error.stack}\n                      </pre>\n                    </details>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Error Types Breakdown */}\n        {Object.keys(errorsByType).length > 0 && (\n          <div className=\"card p-6 mb-6\">\n            <h3 className=\"font-display text-lg text-text-primary mb-4\">\n              Error Types Breakdown\n            </h3>\n            <div className=\"space-y-2\">\n              {Object.entries(errorsByType).map(([type, count]) => (\n                <div key={type} className=\"flex items-center justify-between\">\n                  <span className=\"text-text-primary\">{type}</span>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"h-2 bg-danger/20 rounded-full\" style={{ width: `${(count / errors.length) * 200}px` }}>\n                      <div className=\"h-full bg-danger rounded-full\" style={{ width: '100%' }} />\n                    </div>\n                    <span className=\"text-text-secondary text-sm w-8 text-right\">{count}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Performance Metrics */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-display text-text-primary mb-4\">\n            ‚ö° Performance Issues\n          </h2>\n          \n          {performance.filter(p => p.type === 'slow_resource').length === 0 ? (\n            <div className=\"card p-8 text-center\">\n              <div className=\"text-4xl mb-2\">üöÄ</div>\n              <p className=\"text-text-secondary\">No slow resources detected!</p>\n            </div>\n          ) : (\n            <div className=\"card p-6\">\n              <div className=\"space-y-2\">\n                {performance\n                  .filter(p => p.type === 'slow_resource')\n                  .slice(0, 10)\n                  .map((perf, idx) => (\n                    <div key={idx} className=\"flex items-center justify-between p-3 bg-warning/10 rounded-lg\">\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"text-sm font-semibold text-text-primary truncate\">\n                          {perf.name}\n                        </div>\n                        <div className=\"text-xs text-text-secondary\">\n                          {perf.createdAt && new Date(perf.createdAt.toDate()).toLocaleString()}\n                        </div>\n                      </div>\n                      <div className=\"text-warning font-semibold ml-4\">\n                        {Math.round(perf.duration)}ms\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Page Performance */}\n        {pageLoads.length > 0 && (\n          <div className=\"card p-6 mb-6\">\n            <h3 className=\"font-display text-lg text-text-primary mb-4\">\n              Page Load Breakdown (avg)\n            </h3>\n            <div className=\"space-y-2\">\n              {['dns', 'tcp', 'request', 'response', 'dom', 'load'].map(metric => {\n                const avg = pageLoads.reduce((sum, p) => sum + (p.metrics?.[metric] || 0), 0) / pageLoads.length;\n                return (\n                  <div key={metric} className=\"flex items-center justify-between\">\n                    <span className=\"text-text-primary capitalize\">{metric}</span>\n                    <span className=\"text-text-secondary\">{Math.round(avg)}ms</span>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {/* Top Pages */}\n        <div className=\"card p-6 mb-6\">\n          <h3 className=\"font-display text-lg text-text-primary mb-4\">\n            üìä Top Pages\n          </h3>\n          <div className=\"space-y-2\">\n            {topPages.map(([page, count]) => (\n              <div key={page} className=\"flex items-center justify-between\">\n                <span className=\"text-text-primary\">{page}</span>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-2 bg-primary/20 rounded-full\" style={{ width: `${(count / pageViews.length) * 200}px` }}>\n                    <div className=\"h-full bg-primary rounded-full\" style={{ width: '100%' }} />\n                  </div>\n                  <span className=\"text-text-secondary text-sm w-12 text-right\">{count} views</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Funnel Analysis */}\n        {Object.keys(funnelData).length > 0 && (\n          <div className=\"card p-6 mb-6\">\n            <h3 className=\"font-display text-lg text-text-primary mb-4\">\n              üéØ Conversion Funnels\n            </h3>\n            {Object.entries(funnelData).map(([funnel, steps]) => {\n              const stepEntries = Object.entries(steps).sort();\n              const maxCount = Math.max(...Object.values(steps));\n              \n              return (\n                <div key={funnel} className=\"mb-6 last:mb-0\">\n                  <div className=\"font-semibold text-text-primary mb-3 capitalize\">\n                    {funnel.replace(/_/g, ' ')} Funnel\n                  </div>\n                  <div className=\"space-y-2\">\n                    {stepEntries.map(([step, count], idx) => {\n                      const percentage = idx === 0 ? 100 : ((count / stepEntries[0][1]) * 100).toFixed(1);\n                      const dropOff = idx > 0 ? (((stepEntries[idx - 1][1] - count) / stepEntries[idx - 1][1]) * 100).toFixed(1) : 0;\n                      \n                      return (\n                        <div key={step}>\n                          <div className=\"flex items-center justify-between mb-1\">\n                            <span className=\"text-text-primary capitalize\">{step.replace(/_/g, ' ')}</span>\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"text-text-secondary text-sm\">{count} users</span>\n                              <span className=\"text-text-secondary text-sm\">({percentage}%)</span>\n                              {dropOff > 0 && (\n                                <span className=\"text-danger text-sm\">-{dropOff}%</span>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"h-3 bg-gray-200 rounded-full overflow-hidden\">\n                            <div\n                              className={`h-full ${dropOff > 20 ? 'bg-danger' : 'bg-primary'}`}\n                              style={{ width: `${(count / maxCount) * 100}%` }}\n                            />\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Refresh Button */}\n        <button\n          onClick={loadMonitoringData}\n          className=\"w-full btn btn-primary\"\n          disabled={loading}\n        >\n          üîÑ Refresh Data\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MonitoringDashboard;\n"],"names":["MonitoringDashboard","timeRange","setTimeRange","useState","errors","setErrors","performance","setPerformance","userActions","setUserActions","funnelData","setFunnelData","loading","setLoading","useEffect","loadMonitoringData","async","startTime","Timestamp","fromDate","getTimeRangeStart","now","Date","getTime","errorsQuery","query","collection","db","where","orderBy","limit","errorsSnap","getDocs","errorsList","forEach","doc","push","_objectSpread","id","data","perfQuery","perfSnap","perfList","actionsQuery","actionsSnap","actionsList","funnelQuery","funnelSnap","funnels","funnel","step","error","console","errorRate","length","Math","max","toFixed","pageLoads","filter","p","type","avgPageLoad","reduce","sum","_p$metrics","metrics","total","errorsByType","acc","err","pageViews","a","action","pageVisits","pv","_pv$details","page","details","topPages","Object","entries","sort","b","slice","_jsx","className","children","_jsxs","onClick","concat","map","createdAt","toDate","toLocaleString","message","url","userId","stack","keys","_ref","count","style","width","perf","idx","name","round","duration","metric","avg","_p$metrics2","_ref2","_ref3","steps","stepEntries","maxCount","values","replace","_ref4","percentage","dropOff","disabled"],"sourceRoot":""}