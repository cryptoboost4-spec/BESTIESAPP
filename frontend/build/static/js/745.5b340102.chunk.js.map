{"version":3,"file":"static/js/745.5b340102.chunk.js","mappings":"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","sources":["config/features.js","config/telegram.js","components/settings/NotificationSettings.jsx","components/settings/MessengerContactsList.jsx","components/settings/MessengerLinkDisplay.jsx","components/settings/TestAlertModal.jsx","components/settings/PremiumSMSSection.jsx","components/settings/PrivacySettings.jsx","components/settings/SecurityPasscodes.jsx","components/settings/PreferencesAndQuickAccess.jsx","components/settings/LegalSection.jsx","pages/SettingsPage.jsx","config/messenger.js"],"sourcesContent":["// Feature flags - enable/disable features without code changes\r\nexport const FEATURES = {\r\n  // Core (always on)\r\n  core: true,\r\n  auth: true,\r\n  checkIns: true,\r\n  besties: true,\r\n  \r\n  // MVP Launch (enabled)\r\n  templates: true,\r\n  quickButtons: true,\r\n  celebrationMessages: true,\r\n  gpsLocation: true,\r\n  manualLocation: true,\r\n  extendButtons: true,\r\n  \r\n  // Gamification (enabled)\r\n  bestieCircle: true,\r\n  badges: true,\r\n  shareableCards: true,\r\n  \r\n  // Media (enabled)\r\n  mediaUpload: true,\r\n  photoCapture: true,\r\n  \r\n  // Payments (enabled)\r\n  donations: true,\r\n  smsSubscription: true,\r\n\r\n  // Messaging (enabled)\r\n  messengerAlerts: true,\r\n  telegramAlerts: true,\r\n\r\n  // Future features (disabled for now)\r\n  emergency: false,\r\n  reversePin: false,\r\n  liveTracking: false,\r\n  videoRecording: false,\r\n  facebookLogin: false, // Enable when account is unblocked\r\n  phoneAuth: false // Not needed for MVP\r\n};\r\n\r\n// Helper to check if feature is enabled\r\nexport const isEnabled = (feature) => FEATURES[feature] === true;\r\n\r\nexport default FEATURES;\r\n","// Telegram Bot Configuration\r\nexport const TELEGRAM_CONFIG = {\r\n  // Bot username (without @)\r\n  botUsername: 'Bestiesappbot',\r\n\r\n  // Generate deep link for user to connect their Telegram\r\n  getLinkForUser: (userId) => `https://t.me/Bestiesappbot?start=${userId}`,\r\n\r\n  // Direct link to bot (for general access)\r\n  botLink: 'https://t.me/Bestiesappbot'\r\n};\r\n\r\nexport default TELEGRAM_CONFIG;\r\n","import React from 'react';\r\nimport { TELEGRAM_CONFIG } from '../../config/telegram';\r\nimport InfoButton from '../InfoButton';\r\n\r\nconst NotificationSettings = ({\r\n  userData,\r\n  currentUserId,\r\n  toggleNotification,\r\n  togglePushNotifications,\r\n  pushNotificationsSupported,\r\n  pushNotificationsEnabled,\r\n  loading,\r\n  smsWeeklyCount,\r\n  onOpenTestModal\r\n}) => {\r\n  const handleConnectTelegram = () => {\r\n    const telegramLink = TELEGRAM_CONFIG.getLinkForUser(currentUserId);\r\n    window.open(telegramLink, '_blank');\r\n  };\r\n\r\n  return (\r\n    <div className=\"card p-6 mb-6\">\r\n      <h2 className=\"text-xl font-display text-text-primary mb-4\">Notifications</h2>\r\n\r\n      <div className=\"space-y-4\">\r\n        {/* WhatsApp - Coming Soon */}\r\n        <div className=\"flex items-center justify-between opacity-50\">\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"font-semibold text-text-primary flex items-center gap-2 flex-wrap\">\r\n              WhatsApp\r\n              <span className=\"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full whitespace-nowrap\">Coming Soon</span>\r\n              <InfoButton message=\"WhatsApp notifications will be sent when your besties check in or need help. This is the most reliable option for mobile alerts and will be completely free!\" />\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">Integration in development</div>\r\n          </div>\r\n          <button\r\n            className=\"w-12 h-6 rounded-full transition-colors bg-gray-300 dark:bg-gray-600 cursor-not-allowed flex-shrink-0 ml-3\"\r\n            disabled\r\n          >\r\n            <div className=\"w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform translate-x-1\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Telegram */}\r\n        <div className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"font-semibold text-text-primary flex items-center gap-2 flex-wrap\">\r\n                Telegram\r\n                <span className=\"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-1 rounded-full whitespace-nowrap\">Free & Unlimited</span>\r\n                <InfoButton message=\"Connect YOUR Telegram account to receive safety alerts when your besties need help. Click 'Connect' below, then send /start to the bot!\" />\r\n              </div>\r\n              <div className=\"text-sm text-text-secondary mt-1\">\r\n                {userData?.telegramChatId ? '‚úÖ Connected' : '‚ö†Ô∏è Not connected'}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => toggleNotification('telegram')}\r\n              disabled={!userData?.telegramChatId}\r\n              className={`w-12 h-6 rounded-full transition-colors flex-shrink-0 ml-3 ${\r\n                !userData?.telegramChatId\r\n                  ? 'bg-gray-200 dark:bg-gray-700 cursor-not-allowed'\r\n                  : userData?.notificationPreferences?.telegram\r\n                  ? 'bg-primary'\r\n                  : 'bg-gray-300 dark:bg-gray-600'\r\n              }`}\r\n            >\r\n              <div\r\n                className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\r\n                  userData?.notificationPreferences?.telegram\r\n                    ? 'translate-x-6'\r\n                    : 'translate-x-1'\r\n                }`}\r\n              />\r\n            </button>\r\n          </div>\r\n          {!userData?.telegramChatId && (\r\n            <button\r\n              onClick={handleConnectTelegram}\r\n              className=\"btn btn-primary w-full text-sm py-2\"\r\n            >\r\n              <svg className=\"w-4 h-4 mr-2 inline\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path d=\"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18.717-.962 3.767-1.362 5.001-.168.525-.504.7-.826.717-.698.025-1.23-.461-1.907-.903-1.061-.696-1.659-1.128-2.69-1.806-1.19-.782-.42-1.211.26-1.911.177-.184 3.252-2.98 3.31-3.233.007-.032.014-.15-.056-.212-.07-.062-.174-.041-.249-.024-.106.024-1.793 1.139-5.062 3.345-.479.329-.913.489-1.302.481-.428-.009-1.252-.242-1.865-.442-.752-.245-1.349-.374-1.297-.789.027-.216.324-.437.892-.663 3.498-1.524 5.831-2.529 6.998-3.015 3.332-1.386 4.025-1.627 4.476-1.635.099-.001.321.023.465.14.121.098.155.231.171.324.016.093.036.304.02.469z\"/>\r\n              </svg>\r\n              Connect Telegram\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Push Notifications */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"font-semibold text-text-primary flex items-center\">\r\n              Push Notifications\r\n              <InfoButton message=\"Browser push notifications work when your browser is open. For mobile alerts, we recommend Telegram or SMS.\" />\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">\r\n              {pushNotificationsSupported\r\n                ? 'Browser notifications'\r\n                : 'Not supported in this browser'}\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={togglePushNotifications}\r\n            disabled={!pushNotificationsSupported || loading}\r\n            className={`w-12 h-6 rounded-full transition-colors ${\r\n              !pushNotificationsSupported\r\n                ? 'bg-gray-200 dark:bg-gray-700 cursor-not-allowed'\r\n                : pushNotificationsEnabled\r\n                ? 'bg-primary'\r\n                : 'bg-gray-300 dark:bg-gray-600'\r\n            }`}\r\n          >\r\n            <div\r\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\r\n                pushNotificationsEnabled\r\n                  ? 'translate-x-6'\r\n                  : 'translate-x-1'\r\n              }`}\r\n            />\r\n          </button>\r\n        </div>\r\n\r\n        {/* SMS Alerts */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <div className=\"font-semibold text-text-primary flex items-center\">\r\n                SMS Alerts\r\n                <InfoButton message=\"Text message alerts - currently free during beta (5 per week).\" />\r\n              </div>\r\n              <span className=\"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-1 rounded-full font-semibold\">\r\n                Free Beta\r\n              </span>\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">\r\n              {userData?.notificationPreferences?.sms\r\n                ? `Active - ${smsWeeklyCount}/5 this week`\r\n                : 'Not enabled'}\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={() => toggleNotification('sms')}\r\n            className={`w-12 h-6 rounded-full transition-colors ${\r\n              userData?.notificationPreferences?.sms\r\n                ? 'bg-primary'\r\n                : 'bg-gray-300 dark:bg-gray-600'\r\n            }`}\r\n          >\r\n            <div\r\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\r\n                userData?.notificationPreferences?.sms\r\n                  ? 'translate-x-6'\r\n                  : 'translate-x-1'\r\n              }`}\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Test Alert Button */}\r\n      <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n        <button\r\n          onClick={onOpenTestModal}\r\n          disabled={loading}\r\n          className=\"w-full btn btn-primary\"\r\n        >\r\n          üß™ Test Notifications\r\n        </button>\r\n        <p className=\"text-xs text-text-secondary mt-2 text-center\">\r\n          Send a test notification to verify your setup\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationSettings;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { collection, query, where, onSnapshot } from 'firebase/firestore';\r\nimport { db } from '../../services/firebase';\r\n\r\nconst MessengerContactsList = ({ userId }) => {\r\n  const [contacts, setContacts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n\r\n  // Real-time listener for contacts\r\n  useEffect(() => {\r\n    if (!userId) return;\r\n\r\n    const contactsRef = collection(db, 'messengerContacts');\r\n    const q = query(contactsRef, where('userId', '==', userId));\r\n\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const contactsData = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      }));\r\n\r\n      // Filter out expired contacts and sort by connection time\r\n      const now = Date.now();\r\n      const activeContacts = contactsData\r\n        .filter(contact => contact.expiresAt?.toMillis() > now)\r\n        .sort((a, b) => b.connectedAt?.toMillis() - a.connectedAt?.toMillis());\r\n\r\n      setContacts(activeContacts);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [userId]);\r\n\r\n  // Update countdown timers every minute\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setRefreshKey(prev => prev + 1);\r\n    }, 60000); // Refresh every minute\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleManualRefresh = () => {\r\n    setRefreshKey(prev => prev + 1);\r\n  };\r\n\r\n  const getTimeRemaining = (expiresAt) => {\r\n    const now = Date.now();\r\n    const expiryTime = expiresAt?.toMillis();\r\n    const remaining = expiryTime - now;\r\n\r\n    if (remaining <= 0) return 'Expired';\r\n\r\n    const hours = Math.floor(remaining / (1000 * 60 * 60));\r\n    const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));\r\n\r\n    if (hours > 0) {\r\n      return `${hours}h ${minutes}m remaining`;\r\n    }\r\n    return `${minutes}m remaining`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"animate-pulse space-y-3\">\r\n        <div className=\"h-16 bg-gray-200 dark:bg-gray-700 rounded-lg\"></div>\r\n        <div className=\"h-16 bg-gray-200 dark:bg-gray-700 rounded-lg\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (contacts.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <div className=\"text-4xl mb-2\">üí¨</div>\r\n        <p className=\"text-text-secondary text-sm\">\r\n          No active Messenger contacts yet\r\n        </p>\r\n        <p className=\"text-text-secondary text-xs mt-1\">\r\n          Share your link to get emergency contacts connected!\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h3 className=\"text-sm font-semibold text-text-primary\">\r\n          Connected Contacts ({contacts.length})\r\n        </h3>\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-xs text-text-secondary\">\r\n            Auto-updates\r\n          </span>\r\n          <button\r\n            onClick={handleManualRefresh}\r\n            className=\"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n            title=\"Refresh countdown timers\"\r\n          >\r\n            <svg className=\"w-4 h-4 text-text-secondary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {contacts.map((contact) => (\r\n        <div\r\n          key={`${contact.id}-${refreshKey}`}\r\n          className=\"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg\"\r\n        >\r\n          {/* Profile Photo */}\r\n          <div className=\"flex-shrink-0\">\r\n            {contact.photoURL ? (\r\n              <img\r\n                src={contact.photoURL}\r\n                alt={contact.name}\r\n                className=\"w-12 h-12 rounded-full object-cover\"\r\n              />\r\n            ) : (\r\n              <div className=\"w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white font-semibold\">\r\n                {contact.name?.charAt(0) || '?'}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Contact Info */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"font-semibold text-text-primary truncate\">\r\n              {contact.name}\r\n            </div>\r\n            <div className=\"text-xs text-text-secondary\">\r\n              {getTimeRemaining(contact.expiresAt)}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Messenger Icon */}\r\n          <div className=\"flex-shrink-0\">\r\n            <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center\">\r\n              <svg className=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path d=\"M12 2C6.477 2 2 6.145 2 11.235c0 2.894 1.447 5.48 3.71 7.155V22l3.477-1.906c.929.257 1.915.394 2.813.394 5.523 0 10-4.145 10-9.235C22 6.145 17.523 2 12 2zm.972 12.413l-2.562-2.732-5.002 2.732 5.502-5.838 2.623 2.732 4.941-2.732-5.502 5.838z\"/>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      <div className=\"text-xs text-text-secondary mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n        üí° <strong>Tip:</strong> Contacts can reconnect anytime by sending you another message using your Messenger link.\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessengerContactsList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { collection, query, where, onSnapshot } from 'firebase/firestore';\r\nimport { db } from '../../services/firebase';\r\nimport { MESSENGER_CONFIG } from '../../config/messenger';\r\nimport InfoButton from '../InfoButton';\r\nimport MessengerContactsList from './MessengerContactsList';\r\n\r\nconst MessengerLinkDisplay = ({ userId }) => {\r\n  const [copied, setCopied] = useState(false);\r\n  const [showContacts, setShowContacts] = useState(false);\r\n  const [activeContactCount, setActiveContactCount] = useState(0);\r\n  const messengerLink = MESSENGER_CONFIG.getLinkForUser(userId);\r\n\r\n  // Listen to active contact count\r\n  useEffect(() => {\r\n    if (!userId) return;\r\n\r\n    const contactsRef = collection(db, 'messengerContacts');\r\n    const q = query(contactsRef, where('userId', '==', userId));\r\n\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const now = Date.now();\r\n      const activeCount = snapshot.docs.filter(doc =>\r\n        doc.data().expiresAt?.toMillis() > now\r\n      ).length;\r\n      setActiveContactCount(activeCount);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [userId]);\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(messengerLink);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (err) {\r\n      console.error('Failed to copy:', err);\r\n    }\r\n  };\r\n\r\n  const shareViaMessenger = () => {\r\n    window.open(\r\n      `https://www.facebook.com/dialog/send?link=${encodeURIComponent(messengerLink)}&app_id=464891037130549&redirect_uri=${encodeURIComponent(window.location.href)}`,\r\n      '_blank'\r\n    );\r\n  };\r\n\r\n  const infoMessage = `Share your personal Messenger link with emergency contacts. When they click it and send any message, they're connected for 20 hours. They'll get alerts if you don't check in safely.\r\n\r\nHow it works:\r\n1. Share link with emergency contacts\r\n2. They click & send ANY message on Messenger\r\n3. Connected for 20 hours automatically\r\n4. Select them when creating check-ins\r\n5. They get alerts if you don't check in\r\n\r\nWhy use this?\r\n‚Ä¢ Unlimited contacts (no 5-person limit)\r\n‚Ä¢ Completely free forever\r\n‚Ä¢ Easy setup - just one message\r\n‚Ä¢ Auto-expires after 20 hours for privacy\r\n‚Ä¢ Instant real-time alerts`;\r\n\r\n  return (\r\n    <div className=\"card p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-xl font-display text-text-primary flex items-center gap-2\">\r\n          Facebook Messenger Contacts\r\n          <InfoButton message={infoMessage} />\r\n        </h2>\r\n        <span className=\"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-3 py-1 rounded-full font-semibold\">\r\n          Free & Unlimited\r\n        </span>\r\n      </div>\r\n\r\n      {/* Link */}\r\n      <div className=\"mb-3\">\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"flex-1 bg-gray-100 dark:bg-gray-800 rounded-lg px-3 py-2 text-sm font-mono text-text-primary overflow-x-auto whitespace-nowrap\">\r\n            {messengerLink}\r\n          </div>\r\n          <button\r\n            onClick={handleCopy}\r\n            className={`btn ${copied ? 'btn-success' : 'btn-secondary'} flex-shrink-0`}\r\n          >\r\n            {copied ? 'Copied!' : 'Copy'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Share Icons - Compact */}\r\n      <div className=\"flex items-center justify-center gap-3 mb-3\">\r\n        <button\r\n          onClick={shareViaMessenger}\r\n          className=\"w-10 h-10 rounded-full bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center transition-colors\"\r\n          title=\"Share via Messenger\"\r\n        >\r\n          <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path d=\"M12 2C6.477 2 2 6.145 2 11.235c0 2.894 1.447 5.48 3.71 7.155V22l3.477-1.906c.929.257 1.915.394 2.813.394 5.523 0 10-4.145 10-9.235C22 6.145 17.523 2 12 2z\"/>\r\n          </svg>\r\n        </button>\r\n        <a\r\n          href={`https://wa.me/?text=${encodeURIComponent(`Add me as your safety bestie! ${messengerLink}`)}`}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"w-10 h-10 rounded-full bg-green-500 hover:bg-green-600 text-white flex items-center justify-center transition-colors\"\r\n          title=\"Share via WhatsApp\"\r\n        >\r\n          <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z\"/>\r\n          </svg>\r\n        </a>\r\n        <a\r\n          href={`sms:?body=${encodeURIComponent(`Add me as your safety bestie! ${messengerLink}`)}`}\r\n          className=\"w-10 h-10 rounded-full bg-gray-500 hover:bg-gray-600 text-white flex items-center justify-center transition-colors\"\r\n          title=\"Share via SMS\"\r\n        >\r\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n          </svg>\r\n        </a>\r\n        <button\r\n          onClick={handleCopy}\r\n          className={`w-10 h-10 rounded-full ${copied ? 'bg-green-500' : 'bg-purple-500 hover:bg-purple-600'} text-white flex items-center justify-center transition-colors`}\r\n          title={copied ? 'Copied!' : 'Copy Link'}\r\n        >\r\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            {copied ? (\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n            ) : (\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n            )}\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Active Connections Link */}\r\n      <button\r\n        onClick={() => setShowContacts(!showContacts)}\r\n        className=\"w-full text-sm text-primary hover:text-primary-dark transition-colors flex items-center justify-center gap-2\"\r\n      >\r\n        {activeContactCount > 0 ? (\r\n          <>\r\n            <span className=\"font-semibold\">{activeContactCount}</span>\r\n            active connection{activeContactCount !== 1 ? 's' : ''}\r\n          </>\r\n        ) : (\r\n          'No active connections'\r\n        )}\r\n        <svg\r\n          className={`w-4 h-4 transition-transform ${showContacts ? 'rotate-180' : ''}`}\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Contacts List (Collapsible) */}\r\n      {showContacts && (\r\n        <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n          <MessengerContactsList userId={userId} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessengerLinkDisplay;\r\n","import React, { useState } from 'react';\r\n\r\nconst TestAlertModal = ({ isOpen, onClose, userData, onSendTest, loading }) => {\r\n  const [selectedChannels, setSelectedChannels] = useState({\r\n    push: true,\r\n    sms: false,\r\n    telegram: false\r\n  });\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const availableChannels = [\r\n    {\r\n      id: 'push',\r\n      name: 'Push Notifications',\r\n      enabled: userData?.notificationsEnabled,\r\n      description: 'Browser push notification'\r\n    },\r\n    {\r\n      id: 'telegram',\r\n      name: 'Telegram',\r\n      enabled: userData?.notificationPreferences?.telegram && userData?.telegramChatId,\r\n      description: 'Send to your Telegram'\r\n    },\r\n    {\r\n      id: 'sms',\r\n      name: 'SMS',\r\n      enabled: userData?.notificationPreferences?.sms && userData?.phoneNumber,\r\n      description: 'Send text message'\r\n    }\r\n  ];\r\n\r\n  const toggleChannel = (channelId) => {\r\n    setSelectedChannels(prev => ({\r\n      ...prev,\r\n      [channelId]: !prev[channelId]\r\n    }));\r\n  };\r\n\r\n  const handleSend = () => {\r\n    onSendTest(selectedChannels);\r\n  };\r\n\r\n  const selectedCount = Object.values(selectedChannels).filter(Boolean).length;\r\n  const hasEnabledSelected = availableChannels.some(ch => ch.enabled && selectedChannels[ch.id]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" onClick={onClose}>\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\" onClick={e => e.stopPropagation()}>\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-2xl font-display text-text-primary\">Test Alerts</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-text-secondary hover:text-text-primary transition-colors\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <p className=\"text-sm text-text-secondary mb-4\">\r\n          Select which notification channels to test.\r\n        </p>\r\n\r\n        {/* Channel Selection */}\r\n        <div className=\"space-y-3 mb-6\">\r\n          {availableChannels.map(channel => (\r\n            <div\r\n              key={channel.id}\r\n              className={`border rounded-lg p-4 transition-colors ${\r\n                channel.enabled\r\n                  ? selectedChannels[channel.id]\r\n                    ? 'border-primary bg-purple-50 dark:bg-purple-900/20'\r\n                    : 'border-gray-300 dark:border-gray-600 hover:border-primary'\r\n                  : 'border-gray-200 dark:border-gray-700 opacity-50 cursor-not-allowed'\r\n              }`}\r\n            >\r\n              <label className={`flex items-start gap-3 ${channel.enabled ? 'cursor-pointer' : 'cursor-not-allowed'}`}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedChannels[channel.id]}\r\n                  onChange={() => toggleChannel(channel.id)}\r\n                  disabled={!channel.enabled}\r\n                  className=\"mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary\"\r\n                />\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"font-semibold text-text-primary\">{channel.name}</span>\r\n                    {channel.enabled && (\r\n                      <span className=\"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-0.5 rounded-full\">\r\n                        Enabled\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm text-text-secondary mt-1\">{channel.description}</p>\r\n                  {!channel.enabled && (\r\n                    <p className=\"text-xs text-orange-600 dark:text-orange-400 mt-1\">\r\n                      Enable this in notification settings first\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </label>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 btn btn-secondary\"\r\n            disabled={loading}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSend}\r\n            disabled={loading || !hasEnabledSelected}\r\n            className=\"flex-1 btn btn-primary\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n                </svg>\r\n                Sending...\r\n              </>\r\n            ) : (\r\n              `Send Test ${selectedCount > 0 ? `(${selectedCount})` : ''}`\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TestAlertModal;\r\n","import React from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport apiService from '../../services/api';\r\n\r\nconst PremiumSMSSection = ({ userData, handleSMSSubscription, loading, setLoading, navigate }) => {\r\n  return (\r\n    <>\r\n      {!userData?.smsSubscription?.active ? (\r\n        <div className=\"card p-6 mb-6 bg-gradient-secondary dark:from-purple-900/30 dark:to-pink-900/30\">\r\n          <h2 className=\"text-xl font-display text-text-primary mb-2\">Premium SMS Alerts</h2>\r\n          <p className=\"text-text-secondary mb-4\">\r\n            Get up to 20 SMS alerts per month for just $1/month\r\n          </p>\r\n          <ul className=\"text-sm text-text-secondary mb-4 space-y-1\">\r\n            <li>‚úì 20 SMS alerts per month</li>\r\n            <li>‚úì Priority delivery</li>\r\n            <li>‚úì No weekly limits</li>\r\n          </ul>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={handleSMSSubscription}\r\n              disabled={loading}\r\n              className=\"btn btn-primary flex-1\"\r\n            >\r\n              Subscribe for $1/month\r\n            </button>\r\n            <button\r\n              onClick={() => navigate('/about')}\r\n              className=\"btn btn-secondary\"\r\n            >\r\n              Learn More\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"card p-6 mb-6 bg-green-50 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-600\">\r\n          <h2 className=\"text-xl font-display text-text-primary mb-2\">‚úÖ Premium SMS Active</h2>\r\n          <p className=\"text-text-secondary mb-4\">\r\n            You're subscribed to premium SMS alerts - up to 20 SMS per month\r\n          </p>\r\n          <button\r\n            onClick={async () => {\r\n              setLoading(true);\r\n              try {\r\n                const result = await apiService.createPortalSession();\r\n                if (result.data && result.data.url) {\r\n                  window.location.href = result.data.url;\r\n                } else {\r\n                  toast.error('Failed to open subscription portal');\r\n                }\r\n              } catch (error) {\r\n                console.error('Portal session error:', error);\r\n                toast.error('Failed to open subscription portal');\r\n              } finally {\r\n                setLoading(false);\r\n              }\r\n            }}\r\n            disabled={loading}\r\n            className=\"btn btn-secondary\"\r\n          >\r\n            {loading ? 'Loading...' : 'Manage Subscription'}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PremiumSMSSection;\r\n","import React from 'react';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport { db } from '../../services/firebase';\r\nimport toast from 'react-hot-toast';\r\nimport InfoButton from '../InfoButton';\r\n\r\nconst PrivacySettings = ({ userData, currentUser }) => {\r\n  return (\r\n    <div className=\"card p-6 mb-6\">\r\n      <h2 className=\"text-xl font-display text-text-primary mb-2\">Privacy</h2>\r\n      <p className=\"text-sm text-text-secondary mb-4\">Control what your besties can see on your profile</p>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"font-semibold text-text-primary flex items-center\">\r\n              Show Stats to Besties\r\n              <InfoButton message=\"Control whether your besties can see your check-in stats and safety record on your profile. This includes streaks, badges, and check-in history.\" />\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">\r\n              {userData?.privacySettings?.showStatsToBesties !== false\r\n                ? 'Besties can see your stats'\r\n                : 'Stats are private'}\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={async () => {\r\n              try {\r\n                const newValue = !(userData?.privacySettings?.showStatsToBesties !== false);\r\n                await updateDoc(doc(db, 'users', currentUser.uid), {\r\n                  'privacySettings.showStatsToBesties': newValue,\r\n                });\r\n                toast.success(newValue ? 'Stats now visible to besties' : 'Stats are now private');\r\n              } catch (error) {\r\n                console.error('Error updating privacy:', error);\r\n                toast.error('Failed to update privacy setting');\r\n              }\r\n            }}\r\n            className={`w-12 h-6 rounded-full transition-colors ${\r\n              userData?.privacySettings?.showStatsToBesties !== false\r\n                ? 'bg-primary'\r\n                : 'bg-gray-300 dark:bg-gray-600'\r\n            }`}\r\n          >\r\n            <div\r\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\r\n                userData?.privacySettings?.showStatsToBesties !== false\r\n                  ? 'translate-x-6'\r\n                  : 'translate-x-1'\r\n              }`}\r\n            />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          <div>\r\n            <div className=\"font-semibold text-text-primary mb-2 flex items-center\">\r\n              Check-in Visibility\r\n              <InfoButton message=\"Choose who can see your check-ins in their activity feed. This helps you control your privacy while still letting your closest besties know you're safe.\" />\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary mb-3\">\r\n              Control who can see your check-ins (last 7 days)\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            {/* Option 1: All Besties */}\r\n            <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700\"\r\n              style={{\r\n                borderColor: (userData?.privacySettings?.checkInVisibility || 'all_besties') === 'all_besties' ? '#FF6B9D' : '#e5e7eb'\r\n              }}>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"checkInVisibility\"\r\n                value=\"all_besties\"\r\n                checked={(userData?.privacySettings?.checkInVisibility || 'all_besties') === 'all_besties'}\r\n                onChange={async (e) => {\r\n                  try {\r\n                    await updateDoc(doc(db, 'users', currentUser.uid), {\r\n                      'privacySettings.checkInVisibility': 'all_besties',\r\n                    });\r\n                    toast.success('All besties can now see your check-ins');\r\n                  } catch (error) {\r\n                    console.error('Error updating privacy:', error);\r\n                    toast.error('Failed to update privacy setting');\r\n                  }\r\n                }}\r\n                className=\"mt-1\"\r\n              />\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-semibold text-text-primary\">All Besties</div>\r\n                <div className=\"text-sm text-text-secondary\">\r\n                  All your besties can see your check-ins.\r\n                </div>\r\n              </div>\r\n            </label>\r\n\r\n            {/* Option 2: Circle Only */}\r\n            <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700\"\r\n              style={{\r\n                borderColor: (userData?.privacySettings?.checkInVisibility || 'all_besties') === 'circle' ? '#FF6B9D' : '#e5e7eb'\r\n              }}>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"checkInVisibility\"\r\n                value=\"circle\"\r\n                checked={(userData?.privacySettings?.checkInVisibility || 'all_besties') === 'circle'}\r\n                onChange={async (e) => {\r\n                  try {\r\n                    await updateDoc(doc(db, 'users', currentUser.uid), {\r\n                      'privacySettings.checkInVisibility': 'circle',\r\n                    });\r\n                    toast.success('Only circle besties can see your check-ins');\r\n                  } catch (error) {\r\n                    console.error('Error updating privacy:', error);\r\n                    toast.error('Failed to update privacy setting');\r\n                  }\r\n                }}\r\n                className=\"mt-1\"\r\n              />\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-semibold text-text-primary\">Bestie Circle Only</div>\r\n                <div className=\"text-sm text-text-secondary\">\r\n                  Only your top 5 circle besties can see your check-ins.\r\n                </div>\r\n              </div>\r\n            </label>\r\n\r\n            {/* Option 3: Alerts Only */}\r\n            <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700\"\r\n              style={{\r\n                borderColor: (userData?.privacySettings?.checkInVisibility || 'all_besties') === 'alerts_only' ? '#FF6B9D' : '#e5e7eb'\r\n              }}>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"checkInVisibility\"\r\n                value=\"alerts_only\"\r\n                checked={(userData?.privacySettings?.checkInVisibility || 'all_besties') === 'alerts_only'}\r\n                onChange={async (e) => {\r\n                  try {\r\n                    await updateDoc(doc(db, 'users', currentUser.uid), {\r\n                      'privacySettings.checkInVisibility': 'alerts_only',\r\n                    });\r\n                    toast.success('Check-ins only visible when alerts trigger');\r\n                  } catch (error) {\r\n                    console.error('Error updating privacy:', error);\r\n                    toast.error('Failed to update privacy setting');\r\n                  }\r\n                }}\r\n                className=\"mt-1\"\r\n              />\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-semibold text-text-primary\">Alerts Only (Most Private)</div>\r\n                <div className=\"text-sm text-text-secondary\">\r\n                  Check-ins are hidden until an alert goes off.\r\n                </div>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrivacySettings;\r\n","import React from 'react';\r\nimport InfoButton from '../InfoButton';\r\n\r\nconst SecurityPasscodes = ({\r\n  userData,\r\n  showPasscodeInfo,\r\n  setShowPasscodeInfo,\r\n  setPasscodeType,\r\n  setShowPasscodeModal,\r\n  handleRemovePasscode,\r\n  loading\r\n}) => {\r\n  return (\r\n    <div className=\"card p-6 mb-6\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h2 className=\"text-xl font-display text-text-primary\">Security Passcodes</h2>\r\n        <button\r\n          onClick={() => setShowPasscodeInfo(!showPasscodeInfo)}\r\n          className=\"text-primary text-sm font-semibold hover:underline\"\r\n        >\r\n          {showPasscodeInfo ? 'Hide Info' : 'Learn More'}\r\n        </button>\r\n      </div>\r\n      <p className=\"text-sm text-text-secondary mb-4\">\r\n        Protect your check-ins with passcodes\r\n      </p>\r\n\r\n      {showPasscodeInfo && (\r\n        <div className=\"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4\">\r\n          <h3 className=\"font-semibold text-blue-900 dark:text-blue-300 mb-2\">How Passcodes Work:</h3>\r\n          <ul className=\"text-sm text-blue-800 dark:text-blue-300 space-y-2 list-disc ml-4\">\r\n            <li><strong>Safety Passcode:</strong> Required to end check-ins or cancel SOS alerts. This ensures only you can mark yourself safe.</li>\r\n            <li><strong>Duress Code:</strong> A special code that <em>appears</em> to cancel the alert, but secretly triggers an emergency alert to all besties in your circle. Use this if you're in danger and being forced to cancel.</li>\r\n            <li>Both codes must be different and at least 4 digits.</li>\r\n            <li>Your codes are encrypted and stored securely.</li>\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"space-y-4\">\r\n        {/* Safety Passcode */}\r\n        <div className=\"border-2 border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"font-semibold text-text-primary flex items-center\">\r\n                üîí Safety<br />Passcode\r\n                <InfoButton message=\"Required to cancel check-ins or SOS alerts. This ensures only you can mark yourself safe, protecting you from coercion.\" />\r\n              </div>\r\n              {userData?.security?.safetyPasscode && (\r\n                <div className=\"text-green-600 text-xl\">‚úì</div>\r\n              )}\r\n            </div>\r\n            {userData?.security?.safetyPasscode ? (\r\n              <button\r\n                onClick={() => {\r\n                  setPasscodeType('safety');\r\n                  setShowPasscodeModal(true);\r\n                }}\r\n                className=\"text-primary text-sm font-semibold hover:underline\"\r\n              >\r\n                Edit\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={() => {\r\n                  setPasscodeType('safety');\r\n                  setShowPasscodeModal(true);\r\n                }}\r\n                className=\"btn btn-primary btn-sm px-6\"\r\n              >\r\n                Set\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"text-sm text-text-secondary mb-1\">\r\n            {userData?.security?.safetyPasscode ? 'Passcode is set' : 'Not set'}\r\n          </div>\r\n          {userData?.security?.safetyPasscode && (\r\n            <button\r\n              onClick={() => handleRemovePasscode('safety')}\r\n              disabled={loading}\r\n              className=\"text-red-600 text-sm font-semibold hover:underline mt-2\"\r\n            >\r\n              Remove Passcode\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Duress Code */}\r\n        <div className=\"border-2 border-red-200 dark:border-red-600 rounded-lg p-4 bg-red-50/50 dark:bg-red-900/10\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"font-semibold text-text-primary flex items-center\">\r\n                üö® Duress<br />Code\r\n                <InfoButton message=\"A special code that appears to cancel alerts but secretly sends an emergency signal to all besties. Use if you're in danger and being forced to cancel.\" />\r\n              </div>\r\n              {userData?.security?.duressCode && (\r\n                <div className=\"text-green-600 text-xl\">‚úì</div>\r\n              )}\r\n            </div>\r\n            {userData?.security?.duressCode ? (\r\n              <button\r\n                onClick={() => {\r\n                  setPasscodeType('duress');\r\n                  setShowPasscodeModal(true);\r\n                }}\r\n                className=\"text-primary text-sm font-semibold hover:underline\"\r\n              >\r\n                Edit\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={() => {\r\n                  setPasscodeType('duress');\r\n                  setShowPasscodeModal(true);\r\n                }}\r\n                className=\"btn btn-primary btn-sm px-6\"\r\n              >\r\n                Set\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"text-sm text-text-secondary mb-1\">\r\n            {userData?.security?.duressCode ? 'Duress code is set' : 'Not set'}\r\n          </div>\r\n          {userData?.security?.duressCode && (\r\n            <button\r\n              onClick={() => handleRemovePasscode('duress')}\r\n              disabled={loading}\r\n              className=\"text-red-600 text-sm font-semibold hover:underline mt-2\"\r\n            >\r\n              Remove Code\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SecurityPasscodes;\r\n","import React from 'react';\r\nimport InfoButton from '../InfoButton';\r\n\r\nconst PreferencesAndQuickAccess = ({ isDark, toggleDarkMode, toggleHoldData, userData, navigate }) => {\r\n  return (\r\n    <>\r\n      {/* Preferences */}\r\n      <div className=\"card p-6 mb-6\">\r\n        <h2 className=\"text-xl font-display text-text-primary mb-4\">Preferences</h2>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"font-semibold text-text-primary flex items-center\">\r\n                Dark Mode\r\n                <InfoButton message=\"Toggle between light and dark color themes. Dark mode is easier on your eyes at night and can save battery on OLED screens.\" />\r\n              </div>\r\n              <div className=\"text-sm text-text-secondary\">\r\n                {isDark ? 'Dark mode enabled' : 'Light mode enabled'}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={toggleDarkMode}\r\n              className={`w-12 h-6 rounded-full transition-colors ${\r\n                isDark ? 'bg-primary' : 'bg-gray-300 dark:bg-gray-600'\r\n              }`}\r\n            >\r\n              <div\r\n                className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\r\n                  isDark ? 'translate-x-6' : 'translate-x-1'\r\n                }`}\r\n              />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"font-semibold text-text-primary flex items-center\">\r\n                Data Retention\r\n                <InfoButton message={`Choose whether to keep your check-in history indefinitely or auto-delete after 7 days. We keep running totals (like badge progress) but delete actual location/check-in data for privacy.`} />\r\n              </div>\r\n              <div className=\"text-sm text-text-secondary\">\r\n                {userData?.settings?.holdData\r\n                  ? 'Keeping all check-in history'\r\n                  : 'Auto-delete after 7 days (default)'}\r\n              </div>\r\n              <button\r\n                onClick={() => navigate('/data-policy')}\r\n                className=\"text-xs text-primary hover:underline mt-1\"\r\n              >\r\n                Learn how we handle your data ‚Üí\r\n              </button>\r\n            </div>\r\n            <button\r\n              onClick={toggleHoldData}\r\n              className={`w-12 h-6 rounded-full transition-colors ${\r\n                userData?.settings?.holdData\r\n                  ? 'bg-primary'\r\n                  : 'bg-gray-300 dark:bg-gray-600'\r\n              }`}\r\n            >\r\n              <div\r\n                className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\r\n                  userData?.settings?.holdData ? 'translate-x-6' : 'translate-x-1'\r\n                }`}\r\n              />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Access */}\r\n      <div className=\"card p-6 mb-6\">\r\n        <h2 className=\"text-xl font-display text-text-primary mb-4\">Quick Access</h2>\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <button\r\n            onClick={() => navigate('/history')}\r\n            className=\"btn btn-secondary text-left px-4 py-3\"\r\n          >\r\n            <div className=\"text-sm\">üìä History</div>\r\n          </button>\r\n          <button\r\n            onClick={() => navigate('/export-data')}\r\n            className=\"btn btn-secondary text-left px-4 py-3\"\r\n          >\r\n            <div className=\"text-sm\">üì• Export Data</div>\r\n          </button>\r\n          {userData?.isAdmin && (\r\n            <>\r\n              <button\r\n                onClick={() => navigate('/dev-analytics')}\r\n                className=\"btn btn-secondary text-left px-4 py-3\"\r\n              >\r\n                <div className=\"text-sm\">üìà Analytics</div>\r\n              </button>\r\n              <button\r\n                onClick={() => navigate('/monitoring')}\r\n                className=\"btn bg-gradient-primary text-white text-left px-4 py-3\"\r\n              >\r\n                <div className=\"text-sm\">üîç Monitoring</div>\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PreferencesAndQuickAccess;\r\n","import React from 'react';\r\n\r\nconst LegalSection = ({ navigate }) => {\r\n  return (\r\n    <div className=\"card p-6 mb-6\">\r\n      <h2 className=\"text-xl font-display text-text-primary mb-4\">Legal & Privacy</h2>\r\n\r\n      <div className=\"space-y-3\">\r\n        <a\r\n          href=\"/privacy\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"text-2xl\">üîí</span>\r\n            <div>\r\n              <div className=\"font-semibold text-text-primary\">Privacy Policy</div>\r\n              <div className=\"text-xs text-text-secondary\">How we protect your data</div>\r\n            </div>\r\n          </div>\r\n          <span className=\"text-gray-400 dark:text-gray-500\">‚Üí</span>\r\n        </a>\r\n\r\n        <a\r\n          href=\"/terms\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"text-2xl\">üìú</span>\r\n            <div>\r\n              <div className=\"font-semibold text-text-primary\">Terms of Service</div>\r\n              <div className=\"text-xs text-text-secondary\">Terms and conditions</div>\r\n            </div>\r\n          </div>\r\n          <span className=\"text-gray-400 dark:text-gray-500\">‚Üí</span>\r\n        </a>\r\n\r\n        <a\r\n          href=\"/about\"\r\n          className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"text-2xl\">üíï</span>\r\n            <div>\r\n              <div className=\"font-semibold text-text-primary\">About Besties</div>\r\n              <div className=\"text-xs text-text-secondary\">Our story and mission</div>\r\n            </div>\r\n          </div>\r\n          <span className=\"text-gray-400 dark:text-gray-500\">‚Üí</span>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LegalSection;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useDarkMode } from '../contexts/DarkModeContext';\r\nimport { db, authService } from '../services/firebase';\r\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\r\nimport toast from 'react-hot-toast';\r\nimport apiService from '../services/api';\r\nimport notificationService from '../services/notifications';\r\nimport NotificationSettings from '../components/settings/NotificationSettings';\r\nimport MessengerLinkDisplay from '../components/settings/MessengerLinkDisplay';\r\nimport TestAlertModal from '../components/settings/TestAlertModal';\r\nimport PremiumSMSSection from '../components/settings/PremiumSMSSection';\r\nimport PrivacySettings from '../components/settings/PrivacySettings';\r\nimport SecurityPasscodes from '../components/settings/SecurityPasscodes';\r\nimport PreferencesAndQuickAccess from '../components/settings/PreferencesAndQuickAccess';\r\nimport LegalSection from '../components/settings/LegalSection';\r\nimport { FEATURES } from '../config/features';\r\n\r\nconst SettingsPage = () => {\r\n  const { currentUser, userData } = useAuth();\r\n  const { isDark, toggle: toggleDarkMode } = useDarkMode();\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [pushNotificationsEnabled, setPushNotificationsEnabled] = useState(false);\r\n  const [pushNotificationsSupported, setPushNotificationsSupported] = useState(true);\r\n\r\n  // SMS popup state\r\n  const [showSMSPopup, setShowSMSPopup] = useState(false);\r\n  const [smsWeeklyCount, setSmsWeeklyCount] = useState(0);\r\n\r\n  // Test alert modal state\r\n  const [showTestAlertModal, setShowTestAlertModal] = useState(false);\r\n\r\n  // Passcode states\r\n  const [showPasscodeModal, setShowPasscodeModal] = useState(false);\r\n  const [passcodeType, setPasscodeType] = useState(null); // 'safety' or 'duress'\r\n  const [passcode, setPasscode] = useState('');\r\n  const [confirmPasscode, setConfirmPasscode] = useState('');\r\n  const [showPasscodeInfo, setShowPasscodeInfo] = useState(false);\r\n\r\n  // Check if push notifications are supported and enabled\r\n  useEffect(() => {\r\n    const isSupported = notificationService.isSupported();\r\n    setPushNotificationsSupported(isSupported);\r\n\r\n    if (isSupported) {\r\n      setPushNotificationsEnabled(userData?.notificationsEnabled || false);\r\n    }\r\n  }, [userData]);\r\n\r\n  // Auto-scroll to section based on hash (like EditProfilePage)\r\n  useEffect(() => {\r\n    const hash = window.location.hash.slice(1); // Remove #\r\n    if (hash) {\r\n      // Wait for content to render\r\n      setTimeout(() => {\r\n        const element = document.getElementById(hash);\r\n        if (element) {\r\n          element.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n          // Optional: highlight the section briefly\r\n          element.style.transition = 'background-color 0.3s';\r\n          element.style.backgroundColor = 'rgba(168, 85, 247, 0.1)';\r\n          setTimeout(() => {\r\n            element.style.backgroundColor = '';\r\n          }, 2000);\r\n\r\n          // Mark profile completion tasks as reviewed\r\n          if (currentUser && hash === 'notifications') {\r\n            updateDoc(doc(db, 'users', currentUser.uid), {\r\n              'profileCompletion.reviewedNotifications': true,\r\n            }).catch(err => console.error('Error updating profile completion:', err));\r\n          } else if (currentUser && hash === 'privacy') {\r\n            updateDoc(doc(db, 'users', currentUser.uid), {\r\n              'profileCompletion.reviewedPrivacy': true,\r\n            }).catch(err => console.error('Error updating profile completion:', err));\r\n          } else if (currentUser && hash === 'security') {\r\n            updateDoc(doc(db, 'users', currentUser.uid), {\r\n              'profileCompletion.reviewedPasscode': true,\r\n            }).catch(err => console.error('Error updating profile completion:', err));\r\n          }\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Load SMS weekly count\r\n  useEffect(() => {\r\n    const loadSmsCount = async () => {\r\n      if (!currentUser) return;\r\n\r\n      try {\r\n        const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\r\n        if (userDoc.exists()) {\r\n          const data = userDoc.data();\r\n          setSmsWeeklyCount(data.smsWeeklyCount || 0);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading SMS count:', error);\r\n      }\r\n    };\r\n\r\n    loadSmsCount();\r\n  }, [currentUser]);\r\n\r\n  const toggleNotification = async (type) => {\r\n    if (!currentUser) return;\r\n\r\n    // Special handling for SMS\r\n    if (type === 'sms') {\r\n      const currentValue = userData?.notificationPreferences?.sms || false;\r\n\r\n      // If enabling for the first time\r\n      if (!currentValue && !userData?.hasSeenSMSPopup) {\r\n        setShowSMSPopup(true);\r\n        return;\r\n      }\r\n\r\n      // Check weekly limit\r\n      if (!currentValue && smsWeeklyCount >= 5) {\r\n        toast.error('You\\'ve reached the weekly limit of 5 SMS alerts. Limit resets every Monday.', { duration: 6000 });\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const newValue = !userData?.notificationPreferences?.[type];\r\n\r\n      // Validate WhatsApp requires phone number\r\n      if (type === 'whatsapp' && newValue) {\r\n        toast.error('WhatsApp integration coming soon! üöÄ', { duration: 4000 });\r\n        return;\r\n      }\r\n\r\n      // Validate Facebook\r\n      if (type === 'facebook' && newValue) {\r\n        toast.error('Facebook integration coming soon! üöÄ', { duration: 4000 });\r\n        return;\r\n      }\r\n\r\n      await updateDoc(doc(db, 'users', currentUser.uid), {\r\n        [`notificationPreferences.${type}`]: newValue,\r\n      });\r\n\r\n      // Track analytics\r\n      const { logAnalyticsEvent } = require('../services/firebase');\r\n      logAnalyticsEvent('notification_setting_changed', {\r\n        notification_type: type,\r\n        enabled: newValue\r\n      });\r\n\r\n      toast.success(`${type} notifications ${newValue ? 'enabled' : 'disabled'}`);\r\n    } catch (error) {\r\n      console.error('Error updating notification:', error);\r\n      toast.error('Failed to update notification setting');\r\n    }\r\n  };\r\n\r\n  const handleSMSPopupAccept = async () => {\r\n    if (!currentUser) return;\r\n\r\n    try {\r\n      await updateDoc(doc(db, 'users', currentUser.uid), {\r\n        'notificationPreferences.sms': true,\r\n        hasSeenSMSPopup: true,\r\n      });\r\n      setShowSMSPopup(false);\r\n      toast.success('SMS notifications enabled!');\r\n    } catch (error) {\r\n      console.error('Error enabling SMS:', error);\r\n      toast.error('Failed to enable SMS');\r\n    }\r\n  };\r\n\r\n  const toggleHoldData = async () => {\r\n    if (!currentUser) return;\r\n\r\n    try {\r\n      const newValue = !userData?.settings?.holdData;\r\n      await updateDoc(doc(db, 'users', currentUser.uid), {\r\n        'settings.holdData': newValue,\r\n      });\r\n\r\n      // Track analytics\r\n      const { logAnalyticsEvent } = require('../services/firebase');\r\n      logAnalyticsEvent('data_retention_changed', {\r\n        hold_data: newValue\r\n      });\r\n\r\n      toast.success(newValue ? 'Data will be kept indefinitely' : 'Data will be deleted after 24h');\r\n    } catch (error) {\r\n      console.error('Error updating data retention:', error);\r\n      toast.error('Failed to update setting');\r\n    }\r\n  };\r\n\r\n  const handleSavePasscode = async () => {\r\n    if (!passcode) {\r\n      toast.error('Please enter a passcode');\r\n      return;\r\n    }\r\n\r\n    if (passcode.length < 4) {\r\n      toast.error('Passcode must be at least 4 digits');\r\n      return;\r\n    }\r\n\r\n    if (passcode !== confirmPasscode) {\r\n      toast.error('Passcodes do not match');\r\n      return;\r\n    }\r\n\r\n    // Check that safety and duress codes are different\r\n    if (passcodeType === 'duress') {\r\n      if (passcode === userData?.security?.safetyPasscode) {\r\n        toast.error('Duress code must be different from safety passcode');\r\n        return;\r\n      }\r\n    } else if (passcodeType === 'safety') {\r\n      if (passcode === userData?.security?.duressCode) {\r\n        toast.error('Safety passcode must be different from duress code');\r\n        return;\r\n      }\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const fieldName = passcodeType === 'safety' ? 'safetyPasscode' : 'duressCode';\r\n      await updateDoc(doc(db, 'users', currentUser.uid), {\r\n        [`security.${fieldName}`]: passcode,\r\n      });\r\n\r\n      toast.success(`${passcodeType === 'safety' ? 'Safety passcode' : 'Duress code'} updated!`);\r\n      setShowPasscodeModal(false);\r\n      setPasscode('');\r\n      setConfirmPasscode('');\r\n      setPasscodeType(null);\r\n    } catch (error) {\r\n      console.error('Error saving passcode:', error);\r\n      toast.error('Failed to save passcode');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemovePasscode = async (type) => {\r\n    if (!currentUser) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const fieldName = type === 'safety' ? 'safetyPasscode' : 'duressCode';\r\n      await updateDoc(doc(db, 'users', currentUser.uid), {\r\n        [`security.${fieldName}`]: null,\r\n      });\r\n\r\n      toast.success(`${type === 'safety' ? 'Safety passcode' : 'Duress code'} removed`);\r\n    } catch (error) {\r\n      console.error('Error removing passcode:', error);\r\n      toast.error('Failed to remove passcode');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSMSSubscription = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await apiService.createCheckoutSession({ amount: 1, type: 'subscription' });\r\n\r\n      if (result.data && result.data.url) {\r\n        window.location.href = result.data.url;\r\n      } else {\r\n        toast.error('Failed to start subscription');\r\n      }\r\n    } catch (error) {\r\n      console.error('Subscription error:', error);\r\n      toast.error('Failed to start subscription');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const handleDonation = async (amount) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await apiService.createCheckoutSession({ amount, type: 'donation' });\r\n\r\n      if (result.data && result.data.url) {\r\n        window.location.href = result.data.url;\r\n      } else {\r\n        toast.error('Failed to start donation');\r\n      }\r\n    } catch (error) {\r\n      console.error('Donation error:', error);\r\n      toast.error('Failed to start donation');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const togglePushNotifications = async () => {\r\n    if (!pushNotificationsSupported) {\r\n      toast.error('Push notifications are not supported in your browser');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      if (pushNotificationsEnabled) {\r\n        // Disable notifications\r\n        const success = await notificationService.disableNotifications();\r\n        if (success) {\r\n          setPushNotificationsEnabled(false);\r\n        }\r\n      } else {\r\n        // Enable notifications - this will request permission\r\n        const success = await notificationService.enableNotifications();\r\n        if (success) {\r\n          setPushNotificationsEnabled(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Push notification error:', error);\r\n      toast.error('Failed to update push notifications');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSendTestAlert = async (selectedChannels) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await apiService.sendTestAlert(selectedChannels);\r\n\r\n      if (result.data && result.data.success) {\r\n        const channels = result.data.channels;\r\n        const testedChannels = [];\r\n        if (channels.email) testedChannels.push('Email');\r\n        if (channels.push) testedChannels.push('Push');\r\n        if (channels.sms) testedChannels.push('SMS');\r\n        if (channels.whatsapp) testedChannels.push('WhatsApp');\r\n        if (channels.telegram) testedChannels.push('Telegram');\r\n\r\n        if (testedChannels.length > 0) {\r\n          toast.success(`‚úÖ Test alerts sent successfully to: ${testedChannels.join(', ')}!`, { duration: 6000 });\r\n          setShowTestAlertModal(false);\r\n        } else {\r\n          toast.error('No channels were tested. Make sure channels are enabled and configured.', { duration: 5000 });\r\n        }\r\n      } else {\r\n        toast.error('Failed to send test alert');\r\n      }\r\n    } catch (error) {\r\n      console.error('Test alert error:', error);\r\n      toast.error(error.message || 'Failed to send test alert');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSignOut = async () => {\r\n    const result = await authService.signOut();\r\n    if (result.success) {\r\n      toast.success('Signed out successfully');\r\n      navigate('/login');\r\n    } else {\r\n      toast.error('Sign out failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-pattern\">\r\n\r\n      <div className=\"max-w-4xl mx-auto p-4 pb-24 md:pb-6\">\r\n        <div className=\"mb-6\">\r\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">Settings</h1>\r\n          <p className=\"text-text-secondary\">Manage your account and preferences</p>\r\n        </div>\r\n        {/* Notification Preferences */}\r\n        <div id=\"notifications\">\r\n          <NotificationSettings\r\n            userData={userData}\r\n            currentUserId={currentUser.uid}\r\n            toggleNotification={toggleNotification}\r\n            togglePushNotifications={togglePushNotifications}\r\n            pushNotificationsSupported={pushNotificationsSupported}\r\n            pushNotificationsEnabled={pushNotificationsEnabled}\r\n            loading={loading}\r\n            smsWeeklyCount={smsWeeklyCount}\r\n            onOpenTestModal={() => setShowTestAlertModal(true)}\r\n          />\r\n        </div>\r\n\r\n        {/* Messenger Integration */}\r\n        {FEATURES.messengerAlerts && (\r\n          <div id=\"messenger\">\r\n            <MessengerLinkDisplay userId={currentUser?.uid} />\r\n          </div>\r\n        )}\r\n\r\n        {/* SMS Subscription */}\r\n        <PremiumSMSSection\r\n          userData={userData}\r\n          handleSMSSubscription={handleSMSSubscription}\r\n          loading={loading}\r\n          setLoading={setLoading}\r\n          navigate={navigate}\r\n        />\r\n\r\n\r\n        {/* Privacy Settings */}\r\n        <div id=\"privacy\">\r\n          <PrivacySettings userData={userData} currentUser={currentUser} />\r\n        </div>\r\n\r\n\r\n\r\n        {/* Security - Passcodes */}\r\n        <div id=\"security\">\r\n          <SecurityPasscodes\r\n            userData={userData}\r\n            showPasscodeInfo={showPasscodeInfo}\r\n            setShowPasscodeInfo={setShowPasscodeInfo}\r\n            setPasscodeType={setPasscodeType}\r\n            setShowPasscodeModal={setShowPasscodeModal}\r\n            handleRemovePasscode={handleRemovePasscode}\r\n            loading={loading}\r\n          />\r\n        </div>\r\n\r\n        {/* Preferences */}\r\n        <PreferencesAndQuickAccess\r\n          isDark={isDark}\r\n          toggleDarkMode={toggleDarkMode}\r\n          toggleHoldData={toggleHoldData}\r\n          userData={userData}\r\n          navigate={navigate}\r\n        />\r\n\r\n        {/* Active Donation */}\r\n        {userData?.donationStats?.isActive && (\r\n          <div className=\"card p-6 mb-6 bg-gradient-primary text-white\">\r\n            <h2 className=\"text-xl font-display mb-2\">Thank You! üíú</h2>\r\n            <p className=\"mb-2\">You're helping keep Besties free</p>\r\n            <div className=\"text-2xl font-display\">\r\n              ${userData.donationStats.monthlyAmount}/month\r\n            </div>\r\n            <div className=\"text-sm mt-2 opacity-80\">\r\n              Total donated: ${userData.donationStats.totalDonated}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Legal & Policies */}\r\n        <LegalSection navigate={navigate} />\r\n\r\n        {/* Log Out Button */}\r\n        <div className=\"card p-6 mb-6\">\r\n          <button\r\n            onClick={handleSignOut}\r\n            className=\"w-full btn bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 py-3 text-base font-medium transition-colors\"\r\n          >\r\n            Log Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Passcode Modal */}\r\n      {showPasscodeModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6\">\r\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">\r\n              {passcodeType === 'safety' ? 'üîí Set Safety Passcode' : '‚ö†Ô∏è Set Duress Code'}\r\n            </h2>\r\n            <p className=\"text-text-secondary mb-4\">\r\n              {passcodeType === 'safety'\r\n                ? 'This passcode will be required to end check-ins and cancel alerts.'\r\n                : 'This code appears to cancel alerts but secretly triggers an emergency alert to your besties.'}\r\n            </p>\r\n\r\n            {passcodeType === 'duress' && (\r\n              <div className=\"bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 rounded-lg p-3 mb-4\">\r\n                <p className=\"text-sm text-orange-800 dark:text-orange-300\">\r\n                  ‚ö†Ô∏è <strong>Warning:</strong> Use your duress code only in genuine emergencies when you're being forced to cancel an alert under duress.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"space-y-4 mb-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\r\n                  {passcodeType === 'safety' ? 'Passcode' : 'Duress Code'}\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  value={passcode}\r\n                  onChange={(e) => setPasscode(e.target.value.replace(/\\D/g, ''))}\r\n                  className=\"w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-primary focus:outline-none text-center text-2xl tracking-widest bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                  maxLength={6}\r\n                  autoFocus\r\n                />\r\n                <p className=\"text-xs text-text-secondary mt-1\">At least 4 digits</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\r\n                  Confirm {passcodeType === 'safety' ? 'Passcode' : 'Code'}\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  value={confirmPasscode}\r\n                  onChange={(e) => setConfirmPasscode(e.target.value.replace(/\\D/g, ''))}\r\n                  className=\"w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-primary focus:outline-none text-center text-2xl tracking-widest bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                  maxLength={6}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-3\">\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowPasscodeModal(false);\r\n                    setPasscode('');\r\n                    setConfirmPasscode('');\r\n                    setPasscodeType(null);\r\n                  }}\r\n                  className=\"flex-1 btn btn-secondary\"\r\n                  disabled={loading}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleSavePasscode}\r\n                  disabled={loading || !passcode || !confirmPasscode}\r\n                  className={`flex-1 btn ${passcodeType === 'duress' ? 'bg-orange-600 hover:bg-orange-700' : 'btn-primary'} text-white`}\r\n                >\r\n                  {loading ? 'Saving...' : 'Save'}\r\n                </button>\r\n              </div>\r\n              {(passcodeType === 'safety' && userData?.security?.safetyPasscode) || (passcodeType === 'duress' && userData?.security?.duressCode) ? (\r\n                <button\r\n                  onClick={() => {\r\n                    handleRemovePasscode(passcodeType);\r\n                    setShowPasscodeModal(false);\r\n                    setPasscode('');\r\n                    setConfirmPasscode('');\r\n                    setPasscodeType(null);\r\n                  }}\r\n                  disabled={loading}\r\n                  className=\"w-full btn bg-red-500 text-white hover:bg-red-600 text-sm\"\r\n                >\r\n                  Remove {passcodeType === 'safety' ? 'Safety Passcode' : 'Duress Code'}\r\n                </button>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* SMS First-Time Popup */}\r\n      {showSMSPopup && (\r\n        <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6\">\r\n            <div className=\"text-center mb-4\">\r\n              <div className=\"text-5xl mb-3\">üì±</div>\r\n              <h2 className=\"text-2xl font-display text-text-primary mb-2\">About SMS Alerts</h2>\r\n            </div>\r\n\r\n            <div className=\"space-y-3 text-sm text-gray-700 dark:text-gray-300 mb-6\">\r\n              <p className=\"font-semibold text-primary\">\r\n                SMS alerts are currently FREE during beta testing!\r\n              </p>\r\n\r\n              <div className=\"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-lg\">\r\n                <p className=\"font-semibold mb-1\">Free Tier Limits:</p>\r\n                <ul className=\"list-disc ml-4 space-y-1\">\r\n                  <li>Up to 5 SMS alerts per week</li>\r\n                  <li>Resets every Monday</li>\r\n                  <li>You've used {smsWeeklyCount}/5 this week</li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div className=\"bg-orange-50 dark:bg-orange-900/30 p-3 rounded-lg\">\r\n                <p className=\"font-semibold mb-1\">Important to Know:</p>\r\n                <ul className=\"list-disc ml-4 space-y-1\">\r\n                  <li>SMS messages are expensive to send</li>\r\n                  <li>Once WhatsApp and Facebook integrations launch, SMS will become a premium feature ($1/month for up to 20 alerts)</li>\r\n                  <li>We recommend using email or WhatsApp for unlimited free alerts</li>\r\n                </ul>\r\n              </div>\r\n\r\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 italic\">\r\n                By enabling SMS, you understand these limitations and agree to use SMS responsibly.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => setShowSMSPopup(false)}\r\n                className=\"flex-1 btn btn-secondary\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSMSPopupAccept}\r\n                className=\"flex-1 btn btn-primary\"\r\n              >\r\n                I Understand - Enable SMS\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Test Alert Modal */}\r\n      <TestAlertModal\r\n        isOpen={showTestAlertModal}\r\n        onClose={() => setShowTestAlertModal(false)}\r\n        userData={userData}\r\n        onSendTest={handleSendTestAlert}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","// Facebook Messenger configuration\r\nexport const MESSENGER_CONFIG = {\r\n  // Facebook Page username (for m.me links)\r\n  pageUsername: 'besties.safety',\r\n\r\n  // M.me link template - replace {userId} with actual user ID\r\n  getLinkForUser: (userId) => `https://m.me/besties.safety?ref=${userId}`,\r\n\r\n  // Contact expiry time (20 hours in milliseconds)\r\n  contactExpiryHours: 20,\r\n  contactExpiryMs: 20 * 60 * 60 * 1000\r\n};\r\n\r\nexport default MESSENGER_CONFIG;\r\n"],"names":["FEATURES","core","auth","checkIns","besties","templates","quickButtons","celebrationMessages","gpsLocation","manualLocation","extendButtons","bestieCircle","badges","shareableCards","mediaUpload","photoCapture","donations","smsSubscription","messengerAlerts","telegramAlerts","emergency","reversePin","liveTracking","videoRecording","facebookLogin","phoneAuth","isEnabled","feature","TELEGRAM_CONFIG","botUsername","getLinkForUser","userId","concat","botLink","_ref","_userData$notificatio","_userData$notificatio2","_userData$notificatio3","_userData$notificatio4","_userData$notificatio5","userData","currentUserId","toggleNotification","togglePushNotifications","pushNotificationsSupported","pushNotificationsEnabled","loading","smsWeeklyCount","onOpenTestModal","_jsxs","className","children","_jsx","InfoButton","message","disabled","telegramChatId","onClick","notificationPreferences","telegram","handleConnectTelegram","telegramLink","window","open","fill","viewBox","d","sms","contacts","setContacts","useState","setLoading","refreshKey","setRefreshKey","useEffect","contactsRef","collection","db","q","query","where","unsubscribe","onSnapshot","snapshot","contactsData","docs","map","doc","_objectSpread","id","data","now","Date","activeContacts","filter","contact","_contact$expiresAt","expiresAt","toMillis","sort","a","b","_b$connectedAt","_a$connectedAt","connectedAt","interval","setInterval","prev","clearInterval","getTimeRemaining","remaining","hours","Math","floor","minutes","length","handleManualRefresh","title","stroke","strokeLinecap","strokeLinejoin","strokeWidth","_contact$name","photoURL","src","alt","name","charAt","copied","setCopied","showContacts","setShowContacts","activeContactCount","setActiveContactCount","messengerLink","MESSENGER_CONFIG","activeCount","_doc$data$expiresAt","handleCopy","async","navigator","clipboard","writeText","setTimeout","err","console","error","shareViaMessenger","encodeURIComponent","location","href","target","rel","_Fragment","MessengerContactsList","isOpen","onClose","onSendTest","selectedChannels","setSelectedChannels","push","availableChannels","enabled","notificationsEnabled","description","phoneNumber","selectedCount","Object","values","Boolean","hasEnabledSelected","some","ch","e","stopPropagation","channel","type","checked","onChange","toggleChannel","channelId","handleSend","cx","cy","r","_userData$smsSubscrip","handleSMSSubscription","navigate","active","result","apiService","url","toast","_userData$privacySett","_userData$privacySett3","_userData$privacySett4","_userData$privacySett5","_userData$privacySett6","_userData$privacySett7","_userData$privacySett8","_userData$privacySett9","_userData$privacySett0","currentUser","privacySettings","showStatsToBesties","_userData$privacySett2","newValue","updateDoc","uid","success","style","borderColor","checkInVisibility","value","_userData$security","_userData$security2","_userData$security3","_userData$security4","_userData$security5","_userData$security6","_userData$security7","_userData$security8","showPasscodeInfo","setShowPasscodeInfo","setPasscodeType","setShowPasscodeModal","handleRemovePasscode","security","safetyPasscode","duressCode","_userData$settings","_userData$settings2","_userData$settings3","isDark","toggleDarkMode","toggleHoldData","settings","holdData","isAdmin","SettingsPage","_userData$donationSta","useAuth","toggle","useDarkMode","useNavigate","setPushNotificationsEnabled","setPushNotificationsSupported","showSMSPopup","setShowSMSPopup","setSmsWeeklyCount","showTestAlertModal","setShowTestAlertModal","showPasscodeModal","passcodeType","passcode","setPasscode","confirmPasscode","setConfirmPasscode","isSupported","notificationService","hash","slice","element","document","getElementById","scrollIntoView","behavior","block","transition","backgroundColor","catch","userDoc","getDoc","exists","loadSmsCount","fieldName","NotificationSettings","currentValue","hasSeenSMSPopup","duration","logAnalyticsEvent","require","notification_type","disableNotifications","enableNotifications","MessengerLinkDisplay","PremiumSMSSection","amount","PrivacySettings","SecurityPasscodes","PreferencesAndQuickAccess","hold_data","donationStats","isActive","monthlyAmount","totalDonated","LegalSection","authService","signOut","inputMode","pattern","replace","placeholder","maxLength","autoFocus","TestAlertModal","channels","testedChannels","email","whatsapp","join","pageUsername","contactExpiryHours","contactExpiryMs"],"sourceRoot":""}