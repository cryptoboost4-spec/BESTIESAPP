"use strict";(self.webpackChunkbesties_frontend=self.webpackChunkbesties_frontend||[]).push([[321],{321:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(2555),n=s(5043),i=s(3216),l=s(4528),r=s(7400),d=s(5472),o=s(559),c=s(3845),x=s(2339),m=s(579);const p=()=>{var e,t,s,p,u,h,f,v,b,g;const{userId:j}=(0,i.g)(),{currentUser:y}=(0,l.As)(),N=(0,i.Zp)(),[w,k]=(0,n.useState)(null),[A,C]=(0,n.useState)([]),[S,B]=(0,n.useState)([]),[I,M]=(0,n.useState)(!0),[,_]=(0,n.useState)(!1),[D,G]=(0,n.useState)(null);(0,n.useEffect)(()=>{L()},[j,y]);const L=async()=>{if(j&&y)if(j!==y.uid)try{var e;const[t,s]=await Promise.all([(0,d.GG)((0,d.P)((0,d.rJ)(r.db,"besties"),(0,d._M)("requesterId","==",y.uid),(0,d._M)("recipientId","==",j),(0,d._M)("status","==","accepted"))),(0,d.GG)((0,d.P)((0,d.rJ)(r.db,"besties"),(0,d._M)("requesterId","==",j),(0,d._M)("recipientId","==",y.uid),(0,d._M)("status","==","accepted")))]),n=!t.empty||!s.empty;if(_(n),!n)return G("Only besties can view profiles"),void M(!1);const i=await(0,d.x7)((0,d.H9)(r.db,"users",j));if(!i.exists())return G("User not found"),void M(!1);const l=(0,a.A)({id:i.id},i.data());k(l);const o=await(0,d.x7)((0,d.H9)(r.db,"badges",j));o.exists()&&C(o.data().badges||[]);if(!1!==(null===l||void 0===l||null===(e=l.privacySettings)||void 0===e?void 0:e.showCheckInsToBesties)){const e=new Date;e.setDate(e.getDate()-7);const t=(0,d.P)((0,d.rJ)(r.db,"checkins"),(0,d._M)("userId","==",j),(0,d._M)("createdAt",">=",e),(0,d.My)("createdAt","desc"),(0,d.AB)(20)),s=(await(0,d.GG)(t)).docs.map(e=>(0,a.A)({id:e.id},e.data()));B(s)}M(!1)}catch(D){console.error("Error loading user profile:",D),G("Failed to load profile"),M(!1)}else N("/profile")};if(I)return(0,m.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,m.jsx)(o.A,{}),(0,m.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,m.jsx)("div",{className:"spinner"})})]});if(D)return(0,m.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,m.jsx)(o.A,{}),(0,m.jsx)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:(0,m.jsxs)("div",{className:"card p-12 text-center",children:[(0,m.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,m.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:D}),(0,m.jsx)("p",{className:"text-text-secondary mb-6",children:"You can only view profiles of your accepted besties"}),(0,m.jsx)("button",{onClick:()=>N("/besties"),className:"btn btn-primary",children:"Manage Besties"})]})})]});const T=null!==w&&void 0!==w&&w.featuredBadges?A.filter(e=>w.featuredBadges.includes(e.id)).slice(0,3):A.slice(0,3),U=!1!==(null===w||void 0===w||null===(e=w.privacySettings)||void 0===e?void 0:e.showStatsToBesties),P=!1!==(null===w||void 0===w||null===(t=w.privacySettings)||void 0===t?void 0:t.showCheckInsToBesties);return(0,m.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,m.jsx)(o.A,{}),(0,m.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,m.jsxs)("div",{className:"card p-8 mb-6 text-center relative overflow-hidden shadow-2xl profile-card-aura-".concat((null===w||void 0===w||null===(s=w.profile)||void 0===s?void 0:s.aura)||"none"),style:{background:(null===w||void 0===w||null===(p=w.profile)||void 0===p?void 0:p.backgroundGradient)||"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 50%, #ddd6fe 100%)"},children:[(0,m.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,m.jsx)("div",{className:"absolute top-6 left-6 text-3xl animate-float opacity-40",children:"\ud83d\udc96"}),(0,m.jsx)("div",{className:"absolute top-10 right-8 text-2xl animate-float delay-1s opacity-40",children:"\u2728"}),(0,m.jsx)("div",{className:"absolute bottom-10 left-10 text-2xl animate-float delay-2s opacity-40",children:"\ud83c\udf38"}),(0,m.jsx)("div",{className:"absolute bottom-6 right-6 text-3xl animate-float delay-3s opacity-40",children:"\ud83d\udcab"})]}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsx)("div",{className:"w-36 h-36 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-5xl font-display overflow-hidden border-4 border-white shadow-2xl ring-4 ring-purple-200",children:null!==w&&void 0!==w&&w.photoURL?(0,m.jsx)("img",{src:w.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===w||void 0===w||null===(u=w.displayName)||void 0===u?void 0:u[0])||"U"}),(0,m.jsx)("h1",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3",children:(null===w||void 0===w?void 0:w.displayName)||"User"}),(0,m.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4 flex-wrap",children:[(0,m.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-primary rounded-full text-sm font-semibold shadow-lg",children:[(0,m.jsx)("span",{children:"\ud83d\udc9c"}),(0,m.jsx)("span",{children:"Your Bestie"})]}),(null===w||void 0===w||null===(h=w.requestAttention)||void 0===h?void 0:h.active)&&(0,m.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-full text-sm font-semibold shadow-lg animate-pulse",children:[(0,m.jsx)("span",{children:"\ud83d\udcac"}),(0,m.jsx)("span",{children:w.requestAttention.tag})]})]}),(null===w||void 0===w||null===(f=w.profile)||void 0===f?void 0:f.bio)&&(0,m.jsxs)("p",{className:"text-gray-800 italic max-w-md mx-auto mt-4 text-lg",children:['"',w.profile.bio,'"']}),(0,m.jsxs)("div",{className:"flex items-center justify-center gap-3 mt-6 flex-wrap",children:[(0,m.jsxs)("button",{onClick:()=>{const e=(null===w||void 0===w?void 0:w.phoneNumber)||(null===w||void 0===w?void 0:w.phone);e?window.location.href="sms:".concat(e):x.Ay.error("No phone number available")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,m.jsx)("span",{children:"\ud83d\udcac"}),(0,m.jsx)("span",{children:"Send Message"})]}),(0,m.jsxs)("button",{onClick:()=>{const e=(null===w||void 0===w?void 0:w.phoneNumber)||(null===w||void 0===w?void 0:w.phone);e?window.location.href="tel:".concat(e):x.Ay.error("No phone number available")},className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,m.jsx)("span",{children:"\ud83d\udcde"}),(0,m.jsx)("span",{children:"Call"})]})]})]})]}),U?(0,m.jsxs)("div",{className:"card p-6 mb-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Stats"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl",children:[(0,m.jsx)("div",{className:"text-4xl font-display text-pink-700 mb-1",children:(0,m.jsx)(c.A,{end:(null===w||void 0===w||null===(v=w.stats)||void 0===v?void 0:v.completedCheckIns)||0,duration:1500})}),(0,m.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Completed Check-ins"})]}),(0,m.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl",children:[(0,m.jsx)("div",{className:"text-4xl font-display text-blue-700 mb-1",children:(0,m.jsx)(c.A,{end:(null===w||void 0===w||null===(b=w.stats)||void 0===b?void 0:b.totalCheckIns)||0,duration:1500})}),(0,m.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Check-ins"})]}),(0,m.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl",children:[(0,m.jsx)("div",{className:"text-4xl font-display text-purple-700 mb-1",children:(0,m.jsx)(c.A,{end:(null===w||void 0===w||null===(g=w.stats)||void 0===g?void 0:g.totalBesties)||0,duration:1500})}),(0,m.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Besties"})]}),(0,m.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl",children:[(0,m.jsx)("div",{className:"text-4xl font-display text-yellow-700 mb-1",children:(0,m.jsx)(c.A,{end:A.length,duration:1500})}),(0,m.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Badges Earned"})]})]})]}):(0,m.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,m.jsx)("p",{className:"text-text-secondary",children:"Stats are private"})]}),P?(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Recent Check-ins (Last 7 Days)"}),S.length>0?(0,m.jsx)("div",{className:"space-y-3",children:S.map(e=>{var t,s,a,n,i;return(0,m.jsx)("div",{className:"card p-4",children:(0,m.jsxs)("div",{className:"flex items-start gap-3",children:[(0,m.jsx)("div",{className:"text-3xl",children:(null===(t=e.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("h3",{className:"font-semibold text-text-primary",children:(null===(s=e.activity)||void 0===s?void 0:s.name)||e.activityName||"Check-in"}),(0,m.jsxs)("p",{className:"text-sm text-text-secondary",children:[null===(a=e.createdAt)||void 0===a?void 0:a.toDate().toLocaleDateString()," at"," ",null===(n=e.createdAt)||void 0===n?void 0:n.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(null===(i=e.location)||void 0===i?void 0:i.address)&&(0,m.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:["\ud83d\udccd ",e.location.address]}),e.duration&&(0,m.jsxs)("p",{className:"text-sm text-text-secondary",children:["\u23f1\ufe0f ",e.duration," minutes"]})]}),(0,m.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("completed"===e.status?"bg-green-100 text-green-700":"alerted"===e.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:["completed"===e.status&&"\u2713 Safe","alerted"===e.status&&"\u26a0\ufe0f Alert Sent","active"===e.status&&"\ud83d\udd14 Active"]})]})},e.id)})}):(0,m.jsxs)("div",{className:"card p-8 text-center",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc5"}),(0,m.jsx)("p",{className:"text-text-secondary",children:"No check-ins in the last 7 days"})]})]}):(0,m.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,m.jsx)("p",{className:"text-text-secondary",children:"Check-in history is private"})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Featured Badges"}),T.length>0?(0,m.jsx)("div",{className:"grid grid-cols-3 gap-4",children:T.map((e,t)=>(0,m.jsxs)("div",{className:"card p-4 text-center bg-gradient-to-br from-yellow-50 to-orange-50",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:e.icon||"\ud83c\udfc6"}),(0,m.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name||e})]},t))}):(0,m.jsxs)("div",{className:"card p-8 text-center",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,m.jsx)("p",{className:"text-text-secondary",children:"No featured badges"})]}),A.length>3&&(0,m.jsxs)("p",{className:"text-center text-text-secondary text-sm mt-3",children:["+ ",A.length-3," more badges"]})]}),(0,m.jsx)("div",{className:"space-y-3",children:(0,m.jsx)("button",{onClick:()=>N("/besties"),className:"w-full btn btn-secondary",children:"\u2190 Back to Besties"})})]}),(0,m.jsx)("style",{children:"\n        /* Aura Animations */\n        @keyframes aura-shimmer {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n        @keyframes aura-glow {\n          0%, 100% {\n            box-shadow: 0 0 20px rgba(219, 39, 119, 0.3), 0 0 40px rgba(139, 92, 246, 0.2);\n          }\n          50% {\n            box-shadow: 0 0 40px rgba(219, 39, 119, 0.5), 0 0 80px rgba(139, 92, 246, 0.4);\n          }\n        }\n        @keyframes aura-pulse {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.02); }\n        }\n        @keyframes rainbow-border {\n          0% { border-color: #ff0000; }\n          16% { border-color: #ff7f00; }\n          33% { border-color: #ffff00; }\n          50% { border-color: #00ff00; }\n          66% { border-color: #0000ff; }\n          83% { border-color: #8b00ff; }\n          100% { border-color: #ff0000; }\n        }\n        @keyframes sparkle {\n          0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n          50% { opacity: 1; transform: scale(1) rotate(180deg); }\n        }\n        @keyframes shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n\n        /* Aura Classes */\n        .profile-card-aura-shimmer::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n          animation: shimmer 3s infinite;\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .profile-card-aura-glow {\n          animation: aura-glow 3s ease-in-out infinite;\n        }\n\n        .profile-card-aura-pulse {\n          animation: aura-pulse 2s ease-in-out infinite;\n        }\n\n        .profile-card-aura-rainbow {\n          border: 4px solid;\n          animation: rainbow-border 6s linear infinite;\n        }\n\n        .profile-card-aura-sparkle::after {\n          content: '\u2728';\n          position: absolute;\n          top: 10%;\n          right: 10%;\n          font-size: 2rem;\n          animation: sparkle 2s ease-in-out infinite;\n          pointer-events: none;\n          z-index: 1;\n        }\n      "})]})}},3845:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(579);const n=e=>{let{end:t,duration:s=1e3,suffix:n="",prefix:i="",className:l=""}=e;const r=parseInt(t)||0;return(0,a.jsxs)("span",{className:l,children:[i,r.toLocaleString(),n]})}}}]);
//# sourceMappingURL=321.9fe2f866.chunk.js.map