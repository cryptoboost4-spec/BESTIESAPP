{"version":3,"file":"static/js/225.86c4c064.chunk.js","mappings":"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","sources":["services/notifications.js","components/InfoButton.jsx","components/settings/NotificationSettings.jsx","components/settings/PremiumSMSSection.jsx","components/settings/PrivacySettings.jsx","components/settings/SecurityPasscodes.jsx","components/settings/PreferencesAndQuickAccess.jsx","components/settings/LegalSection.jsx","pages/SettingsPage.jsx"],"sourcesContent":["import { messaging, getToken, onMessage, db, auth } from './firebase';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport toast from 'react-hot-toast';\n\n// VAPID key - This needs to be generated in Firebase Console\n// Go to: Project Settings > Cloud Messaging > Web Push certificates\nconst VAPID_KEY = process.env.REACT_APP_FIREBASE_VAPID_KEY;\n\nclass NotificationService {\n  constructor() {\n    this.initialized = false;\n    this.token = null;\n  }\n\n  // Check if notifications are supported\n  isSupported() {\n    return 'Notification' in window && 'serviceWorker' in navigator && 'PushManager' in window;\n  }\n\n  // Check current permission status\n  getPermissionStatus() {\n    if (!this.isSupported()) return 'unsupported';\n    return Notification.permission;\n  }\n\n  // Request notification permission\n  async requestPermission() {\n    if (!this.isSupported()) {\n      throw new Error('Push notifications are not supported in this browser');\n    }\n\n    if (Notification.permission === 'granted') {\n      return true;\n    }\n\n    if (Notification.permission === 'denied') {\n      throw new Error('PERMISSION_DENIED');\n    }\n\n    try {\n      const permission = await Notification.requestPermission();\n      return permission === 'granted';\n    } catch (error) {\n      // Some browsers (like Samsung Internet) may block the permission request\n      console.error('Permission request error:', error);\n      throw new Error('PERMISSION_BLOCKED');\n    }\n  }\n\n  // Initialize service worker\n  async initializeServiceWorker() {\n    if (!('serviceWorker' in navigator)) {\n      console.warn('Service Worker not supported');\n      return null;\n    }\n\n    try {\n      const registration = await navigator.serviceWorker.register('/firebase-messaging-sw.js');\n      console.log('Service Worker registered:', registration);\n      return registration;\n    } catch (error) {\n      console.error('Service Worker registration failed:', error);\n      return null;\n    }\n  }\n\n  // Get FCM token\n  async getToken() {\n    try {\n      if (!VAPID_KEY) {\n        console.warn('VAPID key not configured');\n        toast.error('Push notifications require additional setup. Please use email or WhatsApp notifications instead.', { duration: 6000 });\n        return null;\n      }\n\n      // Make sure service worker is registered first\n      const registration = await this.initializeServiceWorker();\n      if (!registration) {\n        console.error('Could not register service worker');\n        return null;\n      }\n\n      // Wait a bit for service worker to be ready\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      const token = await getToken(messaging, {\n        vapidKey: VAPID_KEY,\n        serviceWorkerRegistration: registration\n      });\n\n      if (token) {\n        console.log('FCM Token obtained:', token);\n        this.token = token;\n        return token;\n      } else {\n        console.warn('No FCM token available. Request permission to generate one.');\n        return null;\n      }\n    } catch (error) {\n      console.error('Error getting FCM token:', error);\n      return null;\n    }\n  }\n\n  // Save token to user document\n  async saveTokenToFirestore(token) {\n    try {\n      const user = auth.currentUser;\n      if (!user) {\n        console.warn('No user logged in to save token');\n        return false;\n      }\n\n      await updateDoc(doc(db, 'users', user.uid), {\n        fcmToken: token,\n        notificationsEnabled: true,\n        lastTokenUpdate: new Date()\n      });\n\n      console.log('FCM token saved to Firestore');\n      return true;\n    } catch (error) {\n      console.error('Error saving FCM token:', error);\n      return false;\n    }\n  }\n\n  // Enable notifications\n  async enableNotifications() {\n    try {\n      // Check support\n      if (!this.isSupported()) {\n        toast.error('Push notifications are not supported in your browser');\n        return false;\n      }\n\n      // Request permission\n      try {\n        const hasPermission = await this.requestPermission();\n        if (!hasPermission) {\n          toast.error('Notification permission denied. Please enable notifications in your browser settings.');\n          return false;\n        }\n      } catch (error) {\n        if (error.message === 'PERMISSION_DENIED') {\n          toast.error('Push notifications are blocked. Go to your browser settings to enable them.', { duration: 6000 });\n          return false;\n        } else if (error.message === 'PERMISSION_BLOCKED') {\n          toast.error('Could not request notification permission. Please enable notifications in your browser settings.', { duration: 6000 });\n          return false;\n        }\n        throw error;\n      }\n\n      // Get token\n      const token = await this.getToken();\n      if (!token) {\n        toast.error('Could not get notification token');\n        return false;\n      }\n\n      // Save to Firestore\n      const saved = await this.saveTokenToFirestore(token);\n      if (!saved) {\n        toast.error('Could not save notification settings');\n        return false;\n      }\n\n      // Set up foreground message listener\n      this.setupForegroundListener();\n\n      this.initialized = true;\n      toast.success('Push notifications enabled!');\n      return true;\n    } catch (error) {\n      console.error('Error enabling notifications:', error);\n      toast.error('Failed to enable notifications');\n      return false;\n    }\n  }\n\n  // Disable notifications\n  async disableNotifications() {\n    try {\n      const user = auth.currentUser;\n      if (!user) return false;\n\n      await updateDoc(doc(db, 'users', user.uid), {\n        notificationsEnabled: false,\n        fcmToken: null\n      });\n\n      this.token = null;\n      this.initialized = false;\n\n      toast.success('Push notifications disabled');\n      return true;\n    } catch (error) {\n      console.error('Error disabling notifications:', error);\n      toast.error('Failed to disable notifications');\n      return false;\n    }\n  }\n\n  // Setup listener for foreground messages\n  setupForegroundListener() {\n    onMessage(messaging, (payload) => {\n      console.log('Foreground message received:', payload);\n\n      const { title, body, icon } = payload.notification || {};\n\n      // Show toast notification\n      toast.custom((t) => (\n        <div\n          className={`${\n            t.visible ? 'animate-enter' : 'animate-leave'\n          } max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5`}\n        >\n          <div className=\"flex-1 w-0 p-4\">\n            <div className=\"flex items-start\">\n              {icon && (\n                <div className=\"flex-shrink-0 pt-0.5\">\n                  <img className=\"h-10 w-10 rounded-full\" src={icon} alt=\"\" />\n                </div>\n              )}\n              <div className=\"ml-3 flex-1\">\n                <p className=\"text-sm font-medium text-gray-900\">{title}</p>\n                <p className=\"mt-1 text-sm text-gray-500\">{body}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex border-l border-gray-200\">\n            <button\n              onClick={() => toast.dismiss(t.id)}\n              className=\"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-primary hover:text-primary/80 focus:outline-none\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      ), {\n        duration: 6000,\n        position: 'top-right',\n      });\n\n      // Also show browser notification if possible\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(title, {\n          body,\n          icon: icon || '/logo192.png',\n          badge: '/logo192.png',\n          tag: 'besties-notification',\n          requireInteraction: false\n        });\n      }\n    });\n  }\n\n  // Test notification\n  async sendTestNotification() {\n    if ('Notification' in window && Notification.permission === 'granted') {\n      new Notification('Besties Test Notification', {\n        body: 'Push notifications are working!',\n        icon: '/logo192.png',\n        badge: '/logo192.png'\n      });\n      return true;\n    }\n    return false;\n  }\n}\n\n// Create singleton instance\nconst notificationService = new NotificationService();\n\nexport default notificationService;\n","import React, { useState, useRef, useEffect } from 'react';\n\nconst InfoButton = ({ message }) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n  const [tooltipPosition, setTooltipPosition] = useState('left');\n  const buttonRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  // Close tooltip when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (tooltipRef.current && !tooltipRef.current.contains(event.target) &&\n          !buttonRef.current.contains(event.target)) {\n        setShowTooltip(false);\n      }\n    };\n\n    if (showTooltip) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [showTooltip]);\n\n  // Calculate optimal tooltip position to keep it on screen\n  useEffect(() => {\n    if (showTooltip && buttonRef.current) {\n      const buttonRect = buttonRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const tooltipWidth = 200; // maxWidth from styling\n\n      // Check if tooltip would go off right edge\n      if (buttonRect.left + tooltipWidth > viewportWidth - 20) {\n        setTooltipPosition('right');\n      } else {\n        setTooltipPosition('left');\n      }\n    }\n  }, [showTooltip]);\n\n  const handleClick = (e) => {\n    e.stopPropagation();\n    setShowTooltip(!showTooltip);\n  };\n\n  return (\n    <div className=\"relative inline-block ml-2\">\n      <button\n        ref={buttonRef}\n        type=\"button\"\n        onClick={handleClick}\n        className=\"text-primary dark:text-purple-400 hover:text-pink-600 dark:hover:text-pink-400 transition-colors\"\n        title=\"Learn more\"\n      >\n        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n        </svg>\n      </button>\n\n      {/* Tooltip Bubble */}\n      {showTooltip && (\n        <div\n          ref={tooltipRef}\n          className={`absolute ${tooltipPosition === 'right' ? 'right-0' : 'left-0'} top-full mt-2 z-50 animate-scale-up`}\n          style={{ minWidth: '160px', maxWidth: '200px' }}\n        >\n          <div className=\"bg-white dark:bg-gray-800 bg-opacity-100 dark:bg-opacity-100 rounded-lg shadow-xl border-2 border-primary dark:border-purple-400 p-2.5\">\n            <div className=\"flex items-start gap-1.5\">\n              <span className=\"text-sm flex-shrink-0\">‚ÑπÔ∏è</span>\n              <div className=\"flex-1\">\n                <p className=\"text-xs text-gray-900 dark:text-gray-100 leading-snug font-medium\">{message}</p>\n                <button\n                  onClick={() => setShowTooltip(false)}\n                  className=\"mt-1.5 text-primary dark:text-purple-400 text-xs font-semibold underline hover:no-underline\"\n                >\n                  Got it!\n                </button>\n              </div>\n            </div>\n            {/* Arrow pointing up */}\n            <div className={`absolute bottom-full ${tooltipPosition === 'right' ? 'right-3' : 'left-3'} w-0 h-0 border-l-6 border-r-6 border-b-6 border-transparent border-b-primary dark:border-b-purple-400`}></div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default InfoButton;\n","import React from 'react';\nimport InfoButton from '../InfoButton';\n\nconst NotificationSettings = ({\n  userData,\n  toggleNotification,\n  togglePushNotifications,\n  pushNotificationsSupported,\n  pushNotificationsEnabled,\n  loading,\n  smsWeeklyCount,\n  handleSendTestAlert\n}) => {\n  return (\n    <div className=\"card p-6 mb-6\">\n      <h2 className=\"text-xl font-display text-text-primary mb-4\">Notifications</h2>\n\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between opacity-50\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"font-semibold text-text-primary flex items-center gap-2 flex-wrap\">\n              WhatsApp\n              <span className=\"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full whitespace-nowrap\">Coming Soon</span>\n              <InfoButton message=\"WhatsApp notifications will be sent when your besties check in or need help. This is the most reliable option for mobile alerts and will be completely free!\" />\n            </div>\n            <div className=\"text-sm text-text-secondary\">Integration in development</div>\n          </div>\n          <button\n            onClick={() => toggleNotification('whatsapp')}\n            className=\"w-12 h-6 rounded-full transition-colors bg-gray-300 dark:bg-gray-600 cursor-not-allowed flex-shrink-0 ml-3\"\n            disabled\n          >\n            <div className=\"w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform translate-x-1\" />\n          </button>\n        </div>\n\n        <div className=\"flex items-center justify-between opacity-50\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"font-semibold text-text-primary flex items-center gap-2 flex-wrap\">\n              Facebook Messenger\n              <span className=\"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full whitespace-nowrap\">Coming Soon</span>\n              <InfoButton message=\"Facebook Messenger notifications will keep you updated on your besties' safety. Perfect if you use Messenger regularly!\" />\n            </div>\n            <div className=\"text-sm text-text-secondary\">Integration in development</div>\n          </div>\n          <button\n            onClick={() => toggleNotification('facebook')}\n            className=\"w-12 h-6 rounded-full transition-colors bg-gray-300 dark:bg-gray-600 cursor-not-allowed flex-shrink-0 ml-3\"\n            disabled\n          >\n            <div className=\"w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform translate-x-1\" />\n          </button>\n        </div>\n\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <div className=\"font-semibold text-text-primary flex items-center\">\n              Email\n              <InfoButton message=\"Receive email alerts when your besties check in or trigger an emergency alert. Emails are sent instantly and work on all devices.\" />\n            </div>\n            <div className=\"text-sm text-text-secondary\">Get alerts via email</div>\n          </div>\n          <button\n            onClick={() => toggleNotification('email')}\n            className={`w-12 h-6 rounded-full transition-colors ${\n              userData?.notificationPreferences?.email\n                ? 'bg-primary'\n                : 'bg-gray-300 dark:bg-gray-600'\n            }`}\n          >\n            <div\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\n                userData?.notificationPreferences?.email\n                  ? 'translate-x-6'\n                  : 'translate-x-1'\n              }`}\n            />\n          </button>\n        </div>\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <div className=\"font-semibold text-text-primary flex items-center\">\n              Push Notifications (Beta)\n              <InfoButton message=\"Browser push notifications only work when your browser is open. For reliable alerts, we recommend using Email or SMS. We're building a mobile app with better push notifications soon! üì±\" />\n            </div>\n            <div className=\"text-sm text-text-secondary\">\n              {pushNotificationsSupported\n                ? 'Browser notifications - limited reliability'\n                : 'Not supported in this browser'}\n            </div>\n          </div>\n          <button\n            onClick={togglePushNotifications}\n            disabled={!pushNotificationsSupported || loading}\n            className={`w-12 h-6 rounded-full transition-colors ${\n              !pushNotificationsSupported\n                ? 'bg-gray-200 dark:bg-gray-700 cursor-not-allowed'\n                : pushNotificationsEnabled\n                ? 'bg-primary'\n                : 'bg-gray-300 dark:bg-gray-600'\n            }`}\n          >\n            <div\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\n                pushNotificationsEnabled\n                  ? 'translate-x-6'\n                  : 'translate-x-1'\n              }`}\n            />\n          </button>\n        </div>\n\n        {pushNotificationsSupported && !pushNotificationsEnabled && (\n          <div className=\"text-xs text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/30 p-2 rounded-lg\">\n            üí° Tip: Email, WhatsApp, and Facebook are more reliable for critical safety alerts\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <div className=\"font-semibold text-text-primary flex items-center\">\n                SMS Alerts\n                <InfoButton message=\"Text message alerts are currently free during beta (up to 5 per week). Once WhatsApp and Facebook integrations launch, SMS will become a premium feature at $1/month for 20 alerts. Use Email for unlimited free alerts!\" />\n              </div>\n              <span className=\"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-1 rounded-full font-semibold\">\n                Free - Limited Time\n              </span>\n            </div>\n            <div className=\"text-sm text-text-secondary\">\n              {userData?.notificationPreferences?.sms\n                ? `Active - ${smsWeeklyCount}/5 alerts used this week`\n                : 'Not enabled'}\n            </div>\n          </div>\n          <button\n            onClick={() => toggleNotification('sms')}\n            className={`w-12 h-6 rounded-full transition-colors ${\n              userData?.notificationPreferences?.sms\n                ? 'bg-primary'\n                : 'bg-gray-300 dark:bg-gray-600'\n            }`}\n          >\n            <div\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\n                userData?.notificationPreferences?.sms\n                  ? 'translate-x-6'\n                  : 'translate-x-1'\n              }`}\n            />\n          </button>\n        </div>\n\n        {userData?.notificationPreferences?.sms && smsWeeklyCount >= 4 && (\n          <div className=\"text-xs text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/30 p-2 rounded-lg\">\n            ‚ö†Ô∏è You're approaching the weekly limit of 5 SMS alerts. Consider using email or WhatsApp for unlimited free alerts.\n          </div>\n        )}\n      </div>\n\n      {/* Test Alert Button */}\n      <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\n        <button\n          onClick={handleSendTestAlert}\n          disabled={loading}\n          className=\"w-full btn btn-primary\"\n        >\n          {loading ? 'Sending Test Alert...' : 'üß™ Send Test Alert'}\n        </button>\n        <p className=\"text-xs text-text-secondary mt-2 text-center\">\n          Test your notification setup - sends to all enabled channels\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationSettings;\n","import React from 'react';\nimport toast from 'react-hot-toast';\nimport apiService from '../../services/api';\n\nconst PremiumSMSSection = ({ userData, handleSMSSubscription, loading, setLoading, navigate }) => {\n  return (\n    <>\n      {!userData?.smsSubscription?.active ? (\n        <div className=\"card p-6 mb-6 bg-gradient-secondary dark:from-purple-900/30 dark:to-pink-900/30\">\n          <h2 className=\"text-xl font-display text-text-primary mb-2\">Premium SMS Alerts</h2>\n          <p className=\"text-text-secondary mb-4\">\n            Get up to 20 SMS alerts per month for just $1/month\n          </p>\n          <ul className=\"text-sm text-text-secondary mb-4 space-y-1\">\n            <li>‚úì 20 SMS alerts per month</li>\n            <li>‚úì Priority delivery</li>\n            <li>‚úì No weekly limits</li>\n          </ul>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleSMSSubscription}\n              disabled={loading}\n              className=\"btn btn-primary flex-1\"\n            >\n              Subscribe for $1/month\n            </button>\n            <button\n              onClick={() => navigate('/about')}\n              className=\"btn btn-secondary\"\n            >\n              Learn More\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"card p-6 mb-6 bg-green-50 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-600\">\n          <h2 className=\"text-xl font-display text-text-primary mb-2\">‚úÖ Premium SMS Active</h2>\n          <p className=\"text-text-secondary mb-4\">\n            You're subscribed to premium SMS alerts - up to 20 SMS per month\n          </p>\n          <button\n            onClick={async () => {\n              setLoading(true);\n              try {\n                const result = await apiService.createPortalSession();\n                if (result.data && result.data.url) {\n                  window.location.href = result.data.url;\n                } else {\n                  toast.error('Failed to open subscription portal');\n                }\n              } catch (error) {\n                console.error('Portal session error:', error);\n                toast.error('Failed to open subscription portal');\n              } finally {\n                setLoading(false);\n              }\n            }}\n            disabled={loading}\n            className=\"btn btn-secondary\"\n          >\n            {loading ? 'Loading...' : 'Manage Subscription'}\n          </button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default PremiumSMSSection;\n","import React from 'react';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { db } from '../../services/firebase';\nimport toast from 'react-hot-toast';\nimport InfoButton from '../InfoButton';\n\nconst PrivacySettings = ({ userData, currentUser }) => {\n  return (\n    <div className=\"card p-6 mb-6\">\n      <h2 className=\"text-xl font-display text-text-primary mb-2\">Privacy</h2>\n      <p className=\"text-sm text-text-secondary mb-4\">Control what your besties can see on your profile</p>\n\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <div className=\"font-semibold text-text-primary flex items-center\">\n              Show Stats to Besties\n              <InfoButton message=\"Control whether your besties can see your check-in stats and safety record on your profile. This includes streaks, badges, and check-in history.\" />\n            </div>\n            <div className=\"text-sm text-text-secondary\">\n              {userData?.privacySettings?.showStatsToBesties !== false\n                ? 'Besties can see your stats'\n                : 'Stats are private'}\n            </div>\n          </div>\n          <button\n            onClick={async () => {\n              try {\n                const newValue = !(userData?.privacySettings?.showStatsToBesties !== false);\n                await updateDoc(doc(db, 'users', currentUser.uid), {\n                  'privacySettings.showStatsToBesties': newValue,\n                });\n                toast.success(newValue ? 'Stats now visible to besties' : 'Stats are now private');\n              } catch (error) {\n                console.error('Error updating privacy:', error);\n                toast.error('Failed to update privacy setting');\n              }\n            }}\n            className={`w-12 h-6 rounded-full transition-colors ${\n              userData?.privacySettings?.showStatsToBesties !== false\n                ? 'bg-primary'\n                : 'bg-gray-300 dark:bg-gray-600'\n            }`}\n          >\n            <div\n              className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\n                userData?.privacySettings?.showStatsToBesties !== false\n                  ? 'translate-x-6'\n                  : 'translate-x-1'\n              }`}\n            />\n          </button>\n        </div>\n\n        <div className=\"space-y-3\">\n          <div>\n            <div className=\"font-semibold text-text-primary mb-2 flex items-center\">\n              Check-in Visibility\n              <InfoButton message=\"Choose who can see your check-ins in their activity feed. This helps you control your privacy while still letting your closest besties know you're safe.\" />\n            </div>\n            <div className=\"text-sm text-text-secondary mb-3\">\n              Control who can see your check-ins (last 7 days)\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            {/* Option 1: All Besties */}\n            <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700\"\n              style={{\n                borderColor: (userData?.privacySettings?.checkInVisibility || 'all_besties') === 'all_besties' ? '#FF6B9D' : '#e5e7eb'\n              }}>\n              <input\n                type=\"radio\"\n                name=\"checkInVisibility\"\n                value=\"all_besties\"\n                checked={(userData?.privacySettings?.checkInVisibility || 'all_besties') === 'all_besties'}\n                onChange={async (e) => {\n                  try {\n                    await updateDoc(doc(db, 'users', currentUser.uid), {\n                      'privacySettings.checkInVisibility': 'all_besties',\n                    });\n                    toast.success('All besties can now see your check-ins');\n                  } catch (error) {\n                    console.error('Error updating privacy:', error);\n                    toast.error('Failed to update privacy setting');\n                  }\n                }}\n                className=\"mt-1\"\n              />\n              <div className=\"flex-1\">\n                <div className=\"font-semibold text-text-primary\">All Besties</div>\n                <div className=\"text-sm text-text-secondary\">\n                  All your besties can see your check-ins.\n                </div>\n              </div>\n            </label>\n\n            {/* Option 2: Circle Only */}\n            <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700\"\n              style={{\n                borderColor: (userData?.privacySettings?.checkInVisibility || 'all_besties') === 'circle' ? '#FF6B9D' : '#e5e7eb'\n              }}>\n              <input\n                type=\"radio\"\n                name=\"checkInVisibility\"\n                value=\"circle\"\n                checked={(userData?.privacySettings?.checkInVisibility || 'all_besties') === 'circle'}\n                onChange={async (e) => {\n                  try {\n                    await updateDoc(doc(db, 'users', currentUser.uid), {\n                      'privacySettings.checkInVisibility': 'circle',\n                    });\n                    toast.success('Only circle besties can see your check-ins');\n                  } catch (error) {\n                    console.error('Error updating privacy:', error);\n                    toast.error('Failed to update privacy setting');\n                  }\n                }}\n                className=\"mt-1\"\n              />\n              <div className=\"flex-1\">\n                <div className=\"font-semibold text-text-primary\">Bestie Circle Only</div>\n                <div className=\"text-sm text-text-secondary\">\n                  Only your top 5 circle besties can see your check-ins.\n                </div>\n              </div>\n            </label>\n\n            {/* Option 3: Alerts Only */}\n            <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700\"\n              style={{\n                borderColor: (userData?.privacySettings?.checkInVisibility || 'all_besties') === 'alerts_only' ? '#FF6B9D' : '#e5e7eb'\n              }}>\n              <input\n                type=\"radio\"\n                name=\"checkInVisibility\"\n                value=\"alerts_only\"\n                checked={(userData?.privacySettings?.checkInVisibility || 'all_besties') === 'alerts_only'}\n                onChange={async (e) => {\n                  try {\n                    await updateDoc(doc(db, 'users', currentUser.uid), {\n                      'privacySettings.checkInVisibility': 'alerts_only',\n                    });\n                    toast.success('Check-ins only visible when alerts trigger');\n                  } catch (error) {\n                    console.error('Error updating privacy:', error);\n                    toast.error('Failed to update privacy setting');\n                  }\n                }}\n                className=\"mt-1\"\n              />\n              <div className=\"flex-1\">\n                <div className=\"font-semibold text-text-primary\">Alerts Only (Most Private)</div>\n                <div className=\"text-sm text-text-secondary\">\n                  Check-ins are hidden until an alert goes off.\n                </div>\n              </div>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PrivacySettings;\n","import React from 'react';\nimport InfoButton from '../InfoButton';\n\nconst SecurityPasscodes = ({\n  userData,\n  showPasscodeInfo,\n  setShowPasscodeInfo,\n  setPasscodeType,\n  setShowPasscodeModal,\n  handleRemovePasscode,\n  loading\n}) => {\n  return (\n    <div className=\"card p-6 mb-6\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <h2 className=\"text-xl font-display text-text-primary\">Security Passcodes</h2>\n        <button\n          onClick={() => setShowPasscodeInfo(!showPasscodeInfo)}\n          className=\"text-primary text-sm font-semibold hover:underline\"\n        >\n          {showPasscodeInfo ? 'Hide Info' : 'Learn More'}\n        </button>\n      </div>\n      <p className=\"text-sm text-text-secondary mb-4\">\n        Protect your check-ins with passcodes\n      </p>\n\n      {showPasscodeInfo && (\n        <div className=\"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4\">\n          <h3 className=\"font-semibold text-blue-900 dark:text-blue-300 mb-2\">How Passcodes Work:</h3>\n          <ul className=\"text-sm text-blue-800 dark:text-blue-300 space-y-2 list-disc ml-4\">\n            <li><strong>Safety Passcode:</strong> Required to end check-ins or cancel SOS alerts. This ensures only you can mark yourself safe.</li>\n            <li><strong>Duress Code:</strong> A special code that <em>appears</em> to cancel the alert, but secretly triggers an emergency alert to all besties in your circle. Use this if you're in danger and being forced to cancel.</li>\n            <li>Both codes must be different and at least 4 digits.</li>\n            <li>Your codes are encrypted and stored securely.</li>\n          </ul>\n        </div>\n      )}\n\n      <div className=\"space-y-4\">\n        {/* Safety Passcode */}\n        <div className=\"border-2 border-gray-200 dark:border-gray-600 rounded-lg p-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"font-semibold text-text-primary flex items-center\">\n                üîí Safety<br />Passcode\n                <InfoButton message=\"Required to cancel check-ins or SOS alerts. This ensures only you can mark yourself safe, protecting you from coercion.\" />\n              </div>\n              {userData?.security?.safetyPasscode && (\n                <div className=\"text-green-600 text-xl\">‚úì</div>\n              )}\n            </div>\n            {userData?.security?.safetyPasscode ? (\n              <button\n                onClick={() => {\n                  setPasscodeType('safety');\n                  setShowPasscodeModal(true);\n                }}\n                className=\"text-primary text-sm font-semibold hover:underline\"\n              >\n                Edit\n              </button>\n            ) : (\n              <button\n                onClick={() => {\n                  setPasscodeType('safety');\n                  setShowPasscodeModal(true);\n                }}\n                className=\"btn btn-primary btn-sm px-6\"\n              >\n                Set\n              </button>\n            )}\n          </div>\n          <div className=\"text-sm text-text-secondary mb-1\">\n            {userData?.security?.safetyPasscode ? 'Passcode is set' : 'Not set'}\n          </div>\n          {userData?.security?.safetyPasscode && (\n            <button\n              onClick={() => handleRemovePasscode('safety')}\n              disabled={loading}\n              className=\"text-red-600 text-sm font-semibold hover:underline mt-2\"\n            >\n              Remove Passcode\n            </button>\n          )}\n        </div>\n\n        {/* Duress Code */}\n        <div className=\"border-2 border-red-200 dark:border-red-600 rounded-lg p-4 bg-red-50/50 dark:bg-red-900/10\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"font-semibold text-text-primary flex items-center\">\n                üö® Duress<br />Code\n                <InfoButton message=\"A special code that appears to cancel alerts but secretly sends an emergency signal to all besties. Use if you're in danger and being forced to cancel.\" />\n              </div>\n              {userData?.security?.duressCode && (\n                <div className=\"text-green-600 text-xl\">‚úì</div>\n              )}\n            </div>\n            {userData?.security?.duressCode ? (\n              <button\n                onClick={() => {\n                  setPasscodeType('duress');\n                  setShowPasscodeModal(true);\n                }}\n                className=\"text-primary text-sm font-semibold hover:underline\"\n              >\n                Edit\n              </button>\n            ) : (\n              <button\n                onClick={() => {\n                  setPasscodeType('duress');\n                  setShowPasscodeModal(true);\n                }}\n                className=\"btn btn-primary btn-sm px-6\"\n              >\n                Set\n              </button>\n            )}\n          </div>\n          <div className=\"text-sm text-text-secondary mb-1\">\n            {userData?.security?.duressCode ? 'Duress code is set' : 'Not set'}\n          </div>\n          {userData?.security?.duressCode && (\n            <button\n              onClick={() => handleRemovePasscode('duress')}\n              disabled={loading}\n              className=\"text-red-600 text-sm font-semibold hover:underline mt-2\"\n            >\n              Remove Code\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SecurityPasscodes;\n","import React from 'react';\nimport InfoButton from '../InfoButton';\n\nconst PreferencesAndQuickAccess = ({ isDark, toggleDarkMode, toggleHoldData, userData, navigate }) => {\n  return (\n    <>\n      {/* Preferences */}\n      <div className=\"card p-6 mb-6\">\n        <h2 className=\"text-xl font-display text-text-primary mb-4\">Preferences</h2>\n\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"font-semibold text-text-primary flex items-center\">\n                Dark Mode\n                <InfoButton message=\"Toggle between light and dark color themes. Dark mode is easier on your eyes at night and can save battery on OLED screens.\" />\n              </div>\n              <div className=\"text-sm text-text-secondary\">\n                {isDark ? 'Dark mode enabled' : 'Light mode enabled'}\n              </div>\n            </div>\n            <button\n              onClick={toggleDarkMode}\n              className={`w-12 h-6 rounded-full transition-colors ${\n                isDark ? 'bg-primary' : 'bg-gray-300 dark:bg-gray-600'\n              }`}\n            >\n              <div\n                className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\n                  isDark ? 'translate-x-6' : 'translate-x-1'\n                }`}\n              />\n            </button>\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <div className=\"font-semibold text-text-primary flex items-center\">\n                Data Retention\n                <InfoButton message=\"Choose whether to keep your check-in history indefinitely or auto-delete after 24 hours. Keeping history lets you track patterns, while auto-delete maximizes privacy.\" />\n              </div>\n              <div className=\"text-sm text-text-secondary\">\n                {userData?.settings?.holdData\n                  ? 'Keeping all check-in history'\n                  : 'Auto-delete after 24h (default)'}\n              </div>\n            </div>\n            <button\n              onClick={toggleHoldData}\n              className={`w-12 h-6 rounded-full transition-colors ${\n                userData?.settings?.holdData\n                  ? 'bg-primary'\n                  : 'bg-gray-300 dark:bg-gray-600'\n              }`}\n            >\n              <div\n                className={`w-5 h-5 bg-white dark:bg-gray-300 rounded-full transition-transform ${\n                  userData?.settings?.holdData ? 'translate-x-6' : 'translate-x-1'\n                }`}\n              />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Access */}\n      <div className=\"card p-6 mb-6\">\n        <h2 className=\"text-xl font-display text-text-primary mb-4\">Quick Access</h2>\n        <div className=\"grid grid-cols-2 gap-3\">\n          <button\n            onClick={() => navigate('/history')}\n            className=\"btn btn-secondary text-left px-4 py-3\"\n          >\n            <div className=\"text-sm\">üìä History</div>\n          </button>\n          <button\n            onClick={() => navigate('/export-data')}\n            className=\"btn btn-secondary text-left px-4 py-3\"\n          >\n            <div className=\"text-sm\">üì• Export Data</div>\n          </button>\n          {userData?.isAdmin && (\n            <>\n              <button\n                onClick={() => navigate('/dev-analytics')}\n                className=\"btn btn-secondary text-left px-4 py-3\"\n              >\n                <div className=\"text-sm\">üìà Analytics</div>\n              </button>\n              <button\n                onClick={() => navigate('/monitoring')}\n                className=\"btn bg-gradient-primary text-white text-left px-4 py-3\"\n              >\n                <div className=\"text-sm\">üîç Monitoring</div>\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PreferencesAndQuickAccess;\n","import React from 'react';\n\nconst LegalSection = ({ navigate }) => {\n  return (\n    <div className=\"card p-6 mb-6\">\n      <h2 className=\"text-xl font-display text-text-primary mb-4\">Legal & Privacy</h2>\n\n      <div className=\"space-y-3\">\n        <a\n          href=\"/privacy\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-2xl\">üîí</span>\n            <div>\n              <div className=\"font-semibold text-text-primary\">Privacy Policy</div>\n              <div className=\"text-xs text-text-secondary\">How we protect your data</div>\n            </div>\n          </div>\n          <span className=\"text-gray-400 dark:text-gray-500\">‚Üí</span>\n        </a>\n\n        <a\n          href=\"/terms\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-2xl\">üìú</span>\n            <div>\n              <div className=\"font-semibold text-text-primary\">Terms of Service</div>\n              <div className=\"text-xs text-text-secondary\">Terms and conditions</div>\n            </div>\n          </div>\n          <span className=\"text-gray-400 dark:text-gray-500\">‚Üí</span>\n        </a>\n\n        <a\n          href=\"/about\"\n          className=\"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-2xl\">üíï</span>\n            <div>\n              <div className=\"font-semibold text-text-primary\">About Besties</div>\n              <div className=\"text-xs text-text-secondary\">Our story and mission</div>\n            </div>\n          </div>\n          <span className=\"text-gray-400 dark:text-gray-500\">‚Üí</span>\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default LegalSection;\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useDarkMode } from '../contexts/DarkModeContext';\nimport { db, authService } from '../services/firebase';\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\nimport toast from 'react-hot-toast';\nimport apiService from '../services/api';\nimport notificationService from '../services/notifications';\nimport NotificationSettings from '../components/settings/NotificationSettings';\nimport PremiumSMSSection from '../components/settings/PremiumSMSSection';\nimport PrivacySettings from '../components/settings/PrivacySettings';\nimport SecurityPasscodes from '../components/settings/SecurityPasscodes';\nimport PreferencesAndQuickAccess from '../components/settings/PreferencesAndQuickAccess';\nimport LegalSection from '../components/settings/LegalSection';\n\nconst SettingsPage = () => {\n  const { currentUser, userData } = useAuth();\n  const { isDark, toggle: toggleDarkMode } = useDarkMode();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [pushNotificationsEnabled, setPushNotificationsEnabled] = useState(false);\n  const [pushNotificationsSupported, setPushNotificationsSupported] = useState(true);\n\n  // SMS popup state\n  const [showSMSPopup, setShowSMSPopup] = useState(false);\n  const [smsWeeklyCount, setSmsWeeklyCount] = useState(0);\n\n  // Passcode states\n  const [showPasscodeModal, setShowPasscodeModal] = useState(false);\n  const [passcodeType, setPasscodeType] = useState(null); // 'safety' or 'duress'\n  const [passcode, setPasscode] = useState('');\n  const [confirmPasscode, setConfirmPasscode] = useState('');\n  const [showPasscodeInfo, setShowPasscodeInfo] = useState(false);\n\n  // Check if push notifications are supported and enabled\n  useEffect(() => {\n    const isSupported = notificationService.isSupported();\n    setPushNotificationsSupported(isSupported);\n\n    if (isSupported) {\n      setPushNotificationsEnabled(userData?.notificationsEnabled || false);\n    }\n  }, [userData]);\n\n  // Auto-scroll to section based on hash (like EditProfilePage)\n  useEffect(() => {\n    const hash = window.location.hash.slice(1); // Remove #\n    if (hash) {\n      // Wait for content to render\n      setTimeout(() => {\n        const element = document.getElementById(hash);\n        if (element) {\n          element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          // Optional: highlight the section briefly\n          element.style.transition = 'background-color 0.3s';\n          element.style.backgroundColor = 'rgba(168, 85, 247, 0.1)';\n          setTimeout(() => {\n            element.style.backgroundColor = '';\n          }, 2000);\n        }\n      }, 100);\n    }\n  }, []);\n\n  // Load SMS weekly count\n  useEffect(() => {\n    const loadSmsCount = async () => {\n      if (!currentUser) return;\n\n      try {\n        const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\n        if (userDoc.exists()) {\n          const data = userDoc.data();\n          setSmsWeeklyCount(data.smsWeeklyCount || 0);\n        }\n      } catch (error) {\n        console.error('Error loading SMS count:', error);\n      }\n    };\n\n    loadSmsCount();\n  }, [currentUser]);\n\n  const toggleNotification = async (type) => {\n    if (!currentUser) return;\n\n    // Special handling for SMS\n    if (type === 'sms') {\n      const currentValue = userData?.notificationPreferences?.sms || false;\n\n      // If enabling for the first time\n      if (!currentValue && !userData?.hasSeenSMSPopup) {\n        setShowSMSPopup(true);\n        return;\n      }\n\n      // Check weekly limit\n      if (!currentValue && smsWeeklyCount >= 5) {\n        toast.error('You\\'ve reached the weekly limit of 5 SMS alerts. Limit resets every Monday.', { duration: 6000 });\n        return;\n      }\n    }\n\n    try {\n      const newValue = !userData?.notificationPreferences?.[type];\n\n      // Validate WhatsApp requires phone number\n      if (type === 'whatsapp' && newValue) {\n        toast.error('WhatsApp integration coming soon! üöÄ', { duration: 4000 });\n        return;\n      }\n\n      // Validate Facebook\n      if (type === 'facebook' && newValue) {\n        toast.error('Facebook integration coming soon! üöÄ', { duration: 4000 });\n        return;\n      }\n\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        [`notificationPreferences.${type}`]: newValue,\n      });\n      toast.success(`${type} notifications ${newValue ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Error updating notification:', error);\n      toast.error('Failed to update notification setting');\n    }\n  };\n\n  const handleSMSPopupAccept = async () => {\n    if (!currentUser) return;\n\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        'notificationPreferences.sms': true,\n        hasSeenSMSPopup: true,\n      });\n      setShowSMSPopup(false);\n      toast.success('SMS notifications enabled!');\n    } catch (error) {\n      console.error('Error enabling SMS:', error);\n      toast.error('Failed to enable SMS');\n    }\n  };\n\n  const toggleHoldData = async () => {\n    if (!currentUser) return;\n\n    try {\n      const newValue = !userData?.settings?.holdData;\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        'settings.holdData': newValue,\n      });\n      toast.success(newValue ? 'Data will be kept indefinitely' : 'Data will be deleted after 24h');\n    } catch (error) {\n      console.error('Error updating data retention:', error);\n      toast.error('Failed to update setting');\n    }\n  };\n\n  const handleSavePasscode = async () => {\n    if (!passcode) {\n      toast.error('Please enter a passcode');\n      return;\n    }\n\n    if (passcode.length < 4) {\n      toast.error('Passcode must be at least 4 digits');\n      return;\n    }\n\n    if (passcode !== confirmPasscode) {\n      toast.error('Passcodes do not match');\n      return;\n    }\n\n    // Check that safety and duress codes are different\n    if (passcodeType === 'duress') {\n      if (passcode === userData?.security?.safetyPasscode) {\n        toast.error('Duress code must be different from safety passcode');\n        return;\n      }\n    } else if (passcodeType === 'safety') {\n      if (passcode === userData?.security?.duressCode) {\n        toast.error('Safety passcode must be different from duress code');\n        return;\n      }\n    }\n\n    setLoading(true);\n    try {\n      const fieldName = passcodeType === 'safety' ? 'safetyPasscode' : 'duressCode';\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        [`security.${fieldName}`]: passcode,\n      });\n\n      toast.success(`${passcodeType === 'safety' ? 'Safety passcode' : 'Duress code'} updated!`);\n      setShowPasscodeModal(false);\n      setPasscode('');\n      setConfirmPasscode('');\n      setPasscodeType(null);\n    } catch (error) {\n      console.error('Error saving passcode:', error);\n      toast.error('Failed to save passcode');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemovePasscode = async (type) => {\n    if (!currentUser) return;\n\n    setLoading(true);\n    try {\n      const fieldName = type === 'safety' ? 'safetyPasscode' : 'duressCode';\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        [`security.${fieldName}`]: null,\n      });\n\n      toast.success(`${type === 'safety' ? 'Safety passcode' : 'Duress code'} removed`);\n    } catch (error) {\n      console.error('Error removing passcode:', error);\n      toast.error('Failed to remove passcode');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSMSSubscription = async () => {\n    setLoading(true);\n    try {\n      const result = await apiService.createCheckoutSession({ amount: 1, type: 'subscription' });\n\n      if (result.data && result.data.url) {\n        window.location.href = result.data.url;\n      } else {\n        toast.error('Failed to start subscription');\n      }\n    } catch (error) {\n      console.error('Subscription error:', error);\n      toast.error('Failed to start subscription');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // eslint-disable-next-line no-unused-vars\n  const handleDonation = async (amount) => {\n    setLoading(true);\n    try {\n      const result = await apiService.createCheckoutSession({ amount, type: 'donation' });\n\n      if (result.data && result.data.url) {\n        window.location.href = result.data.url;\n      } else {\n        toast.error('Failed to start donation');\n      }\n    } catch (error) {\n      console.error('Donation error:', error);\n      toast.error('Failed to start donation');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const togglePushNotifications = async () => {\n    if (!pushNotificationsSupported) {\n      toast.error('Push notifications are not supported in your browser');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      if (pushNotificationsEnabled) {\n        // Disable notifications\n        const success = await notificationService.disableNotifications();\n        if (success) {\n          setPushNotificationsEnabled(false);\n        }\n      } else {\n        // Enable notifications - this will request permission\n        const success = await notificationService.enableNotifications();\n        if (success) {\n          setPushNotificationsEnabled(true);\n        }\n      }\n    } catch (error) {\n      console.error('Push notification error:', error);\n      toast.error('Failed to update push notifications');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSendTestAlert = async () => {\n    setLoading(true);\n    try {\n      const result = await apiService.sendTestAlert();\n\n      if (result.data && result.data.success) {\n        const channels = result.data.channels;\n        const testedChannels = [];\n        if (channels.email) testedChannels.push('Email');\n        if (channels.push) testedChannels.push('Push');\n\n        if (testedChannels.length > 0) {\n          toast.success(`Test alert sent to: ${testedChannels.join(', ')}. WhatsApp/SMS/Facebook not tested to save costs, but use same system.`, { duration: 6000 });\n        } else {\n          toast.error('No notification channels enabled. Enable email to test alerts.', { duration: 5000 });\n        }\n      } else {\n        toast.error('Failed to send test alert');\n      }\n    } catch (error) {\n      console.error('Test alert error:', error);\n      toast.error('Failed to send test alert');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    const result = await authService.signOut();\n    if (result.success) {\n      toast.success('Signed out successfully');\n      navigate('/login');\n    } else {\n      toast.error('Sign out failed');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-24 md:pb-6\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">Settings</h1>\n          <p className=\"text-text-secondary\">Manage your account and preferences</p>\n        </div>\n        {/* Notification Preferences */}\n        <div id=\"notifications\">\n          <NotificationSettings\n            userData={userData}\n            toggleNotification={toggleNotification}\n            togglePushNotifications={togglePushNotifications}\n            pushNotificationsSupported={pushNotificationsSupported}\n            pushNotificationsEnabled={pushNotificationsEnabled}\n            loading={loading}\n            smsWeeklyCount={smsWeeklyCount}\n            handleSendTestAlert={handleSendTestAlert}\n          />\n        </div>\n\n        {/* SMS Subscription */}\n        <PremiumSMSSection\n          userData={userData}\n          handleSMSSubscription={handleSMSSubscription}\n          loading={loading}\n          setLoading={setLoading}\n          navigate={navigate}\n        />\n\n\n        {/* Privacy Settings */}\n        <div id=\"privacy\">\n          <PrivacySettings userData={userData} currentUser={currentUser} />\n        </div>\n\n\n\n        {/* Security - Passcodes */}\n        <div id=\"security\">\n          <SecurityPasscodes\n            userData={userData}\n            showPasscodeInfo={showPasscodeInfo}\n            setShowPasscodeInfo={setShowPasscodeInfo}\n            setPasscodeType={setPasscodeType}\n            setShowPasscodeModal={setShowPasscodeModal}\n            handleRemovePasscode={handleRemovePasscode}\n            loading={loading}\n          />\n        </div>\n\n        {/* Preferences */}\n        <PreferencesAndQuickAccess\n          isDark={isDark}\n          toggleDarkMode={toggleDarkMode}\n          toggleHoldData={toggleHoldData}\n          userData={userData}\n          navigate={navigate}\n        />\n\n        {/* Active Donation */}\n        {userData?.donationStats?.isActive && (\n          <div className=\"card p-6 mb-6 bg-gradient-primary text-white\">\n            <h2 className=\"text-xl font-display mb-2\">Thank You! üíú</h2>\n            <p className=\"mb-2\">You're helping keep Besties free</p>\n            <div className=\"text-2xl font-display\">\n              ${userData.donationStats.monthlyAmount}/month\n            </div>\n            <div className=\"text-sm mt-2 opacity-80\">\n              Total donated: ${userData.donationStats.totalDonated}\n            </div>\n          </div>\n        )}\n\n        {/* Legal & Policies */}\n        <LegalSection navigate={navigate} />\n\n        {/* Log Out Button */}\n        <div className=\"card p-6 mb-6\">\n          <button\n            onClick={handleSignOut}\n            className=\"w-full btn bg-red-500 hover:bg-red-600 text-white py-3 text-lg font-semibold\"\n          >\n            üö™ Log Out\n          </button>\n        </div>\n      </div>\n\n      {/* Passcode Modal */}\n      {showPasscodeModal && (\n        <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6\">\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">\n              {passcodeType === 'safety' ? 'üîí Set Safety Passcode' : '‚ö†Ô∏è Set Duress Code'}\n            </h2>\n            <p className=\"text-text-secondary mb-4\">\n              {passcodeType === 'safety'\n                ? 'This passcode will be required to end check-ins and cancel alerts.'\n                : 'This code appears to cancel alerts but secretly triggers an emergency alert to your besties.'}\n            </p>\n\n            {passcodeType === 'duress' && (\n              <div className=\"bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 rounded-lg p-3 mb-4\">\n                <p className=\"text-sm text-orange-800 dark:text-orange-300\">\n                  ‚ö†Ô∏è <strong>Warning:</strong> Use your duress code only in genuine emergencies when you're being forced to cancel an alert under duress.\n                </p>\n              </div>\n            )}\n\n            <div className=\"space-y-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  {passcodeType === 'safety' ? 'Passcode' : 'Duress Code'}\n                </label>\n                <input\n                  type=\"password\"\n                  inputMode=\"numeric\"\n                  pattern=\"[0-9]*\"\n                  value={passcode}\n                  onChange={(e) => setPasscode(e.target.value.replace(/\\D/g, ''))}\n                  className=\"w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-primary focus:outline-none text-center text-2xl tracking-widest bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  maxLength={6}\n                  autoFocus\n                />\n                <p className=\"text-xs text-text-secondary mt-1\">At least 4 digits</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-text-primary mb-2\">\n                  Confirm {passcodeType === 'safety' ? 'Passcode' : 'Code'}\n                </label>\n                <input\n                  type=\"password\"\n                  inputMode=\"numeric\"\n                  pattern=\"[0-9]*\"\n                  value={confirmPasscode}\n                  onChange={(e) => setConfirmPasscode(e.target.value.replace(/\\D/g, ''))}\n                  className=\"w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-primary focus:outline-none text-center text-2xl tracking-widest bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  maxLength={6}\n                />\n              </div>\n            </div>\n\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => {\n                    setShowPasscodeModal(false);\n                    setPasscode('');\n                    setConfirmPasscode('');\n                    setPasscodeType(null);\n                  }}\n                  className=\"flex-1 btn btn-secondary\"\n                  disabled={loading}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSavePasscode}\n                  disabled={loading || !passcode || !confirmPasscode}\n                  className={`flex-1 btn ${passcodeType === 'duress' ? 'bg-orange-600 hover:bg-orange-700' : 'btn-primary'} text-white`}\n                >\n                  {loading ? 'Saving...' : 'Save'}\n                </button>\n              </div>\n              {(passcodeType === 'safety' && userData?.security?.safetyPasscode) || (passcodeType === 'duress' && userData?.security?.duressCode) ? (\n                <button\n                  onClick={() => {\n                    handleRemovePasscode(passcodeType);\n                    setShowPasscodeModal(false);\n                    setPasscode('');\n                    setConfirmPasscode('');\n                    setPasscodeType(null);\n                  }}\n                  disabled={loading}\n                  className=\"w-full btn bg-red-500 text-white hover:bg-red-600 text-sm\"\n                >\n                  Remove {passcodeType === 'safety' ? 'Safety Passcode' : 'Duress Code'}\n                </button>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* SMS First-Time Popup */}\n      {showSMSPopup && (\n        <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6\">\n            <div className=\"text-center mb-4\">\n              <div className=\"text-5xl mb-3\">üì±</div>\n              <h2 className=\"text-2xl font-display text-text-primary mb-2\">About SMS Alerts</h2>\n            </div>\n\n            <div className=\"space-y-3 text-sm text-gray-700 dark:text-gray-300 mb-6\">\n              <p className=\"font-semibold text-primary\">\n                SMS alerts are currently FREE during beta testing!\n              </p>\n\n              <div className=\"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-lg\">\n                <p className=\"font-semibold mb-1\">Free Tier Limits:</p>\n                <ul className=\"list-disc ml-4 space-y-1\">\n                  <li>Up to 5 SMS alerts per week</li>\n                  <li>Resets every Monday</li>\n                  <li>You've used {smsWeeklyCount}/5 this week</li>\n                </ul>\n              </div>\n\n              <div className=\"bg-orange-50 dark:bg-orange-900/30 p-3 rounded-lg\">\n                <p className=\"font-semibold mb-1\">Important to Know:</p>\n                <ul className=\"list-disc ml-4 space-y-1\">\n                  <li>SMS messages are expensive to send</li>\n                  <li>Once WhatsApp and Facebook integrations launch, SMS will become a premium feature ($1/month for up to 20 alerts)</li>\n                  <li>We recommend using email or WhatsApp for unlimited free alerts</li>\n                </ul>\n              </div>\n\n              <p className=\"text-xs text-gray-600 dark:text-gray-400 italic\">\n                By enabling SMS, you understand these limitations and agree to use SMS responsibly.\n              </p>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowSMSPopup(false)}\n                className=\"flex-1 btn btn-secondary\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSMSPopupAccept}\n                className=\"flex-1 btn btn-primary\"\n              >\n                I Understand - Enable SMS\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SettingsPage;\n"],"names":["VAPID_KEY","process","REACT_APP_FIREBASE_VAPID_KEY","constructor","this","initialized","token","isSupported","window","navigator","getPermissionStatus","Notification","permission","requestPermission","Error","error","console","initializeServiceWorker","warn","registration","serviceWorker","register","log","getToken","toast","duration","Promise","resolve","setTimeout","messaging","vapidKey","serviceWorkerRegistration","saveTokenToFirestore","user","auth","currentUser","updateDoc","doc","db","uid","fcmToken","notificationsEnabled","lastTokenUpdate","Date","enableNotifications","message","setupForegroundListener","success","disableNotifications","onMessage","payload","title","body","icon","notification","custom","t","_jsxs","className","concat","visible","children","_jsx","src","alt","onClick","dismiss","id","position","badge","tag","requireInteraction","sendTestNotification","_ref","showTooltip","setShowTooltip","useState","tooltipPosition","setTooltipPosition","buttonRef","useRef","tooltipRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","buttonRect","getBoundingClientRect","viewportWidth","innerWidth","tooltipWidth","left","ref","type","e","stopPropagation","fill","viewBox","fillRule","d","clipRule","style","minWidth","maxWidth","_userData$notificatio","_userData$notificatio2","_userData$notificatio3","_userData$notificatio4","_userData$notificatio5","_userData$notificatio6","userData","toggleNotification","togglePushNotifications","pushNotificationsSupported","pushNotificationsEnabled","loading","smsWeeklyCount","handleSendTestAlert","InfoButton","disabled","notificationPreferences","email","sms","_userData$smsSubscrip","handleSMSSubscription","setLoading","navigate","_Fragment","smsSubscription","active","async","result","apiService","data","url","location","href","_userData$privacySett","_userData$privacySett3","_userData$privacySett4","_userData$privacySett5","_userData$privacySett6","_userData$privacySett7","_userData$privacySett8","_userData$privacySett9","_userData$privacySett0","privacySettings","showStatsToBesties","_userData$privacySett2","newValue","borderColor","checkInVisibility","name","value","checked","onChange","_userData$security","_userData$security2","_userData$security3","_userData$security4","_userData$security5","_userData$security6","_userData$security7","_userData$security8","showPasscodeInfo","setShowPasscodeInfo","setPasscodeType","setShowPasscodeModal","handleRemovePasscode","security","safetyPasscode","duressCode","_userData$settings","_userData$settings2","_userData$settings3","isDark","toggleDarkMode","toggleHoldData","settings","holdData","isAdmin","rel","SettingsPage","_userData$donationSta","useAuth","toggle","useDarkMode","useNavigate","setPushNotificationsEnabled","setPushNotificationsSupported","showSMSPopup","setShowSMSPopup","setSmsWeeklyCount","showPasscodeModal","passcodeType","passcode","setPasscode","confirmPasscode","setConfirmPasscode","notificationService","hash","slice","element","getElementById","scrollIntoView","behavior","block","transition","backgroundColor","userDoc","getDoc","exists","loadSmsCount","fieldName","NotificationSettings","currentValue","hasSeenSMSPopup","channels","testedChannels","push","length","join","PremiumSMSSection","amount","PrivacySettings","SecurityPasscodes","PreferencesAndQuickAccess","donationStats","isActive","monthlyAmount","totalDonated","LegalSection","authService","signOut","inputMode","pattern","replace","placeholder","maxLength","autoFocus"],"sourceRoot":""}