{"version":3,"file":"static/js/683.5487e4de.chunk.js","mappings":"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","sources":["pages/OnboardingPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db, storage } from '../services/firebase';\nimport { doc, updateDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport toast from 'react-hot-toast';\n\nconst OnboardingPage = () => {\n  const { currentUser, userData } = useAuth();\n  const navigate = useNavigate();\n  const [step, setStep] = useState('welcome'); // welcome, slides, name, photo, invite-welcome, bestie-circle\n  const [slideIndex, setSlideIndex] = useState(0);\n  const [displayName, setDisplayName] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [hasBesties, setHasBesties] = useState(false);\n  const [checkingBesties, setCheckingBesties] = useState(false);\n  const [inviterInfo, setInviterInfo] = useState(null);\n\n  // Check for inviter info on mount\n  useEffect(() => {\n    const storedInviterInfo = sessionStorage.getItem('inviter_info') || localStorage.getItem('inviter_info');\n    if (storedInviterInfo) {\n      try {\n        setInviterInfo(JSON.parse(storedInviterInfo));\n      } catch (e) {\n        console.error('Failed to parse inviter info:', e);\n      }\n    }\n  }, []);\n\n  // Prefill name from user data when it loads\n  useEffect(() => {\n    if (userData?.displayName && !displayName) {\n      setDisplayName(userData.displayName);\n    } else if (currentUser?.displayName && !displayName) {\n      setDisplayName(currentUser.displayName);\n    }\n  }, [userData, currentUser, displayName]);\n\n  const slides = [\n    {\n      emoji: 'üëã',\n      title: 'Welcome to Besties!',\n      description: 'Your personal safety check-in app that keeps your loved ones informed.',\n    },\n    {\n      emoji: '‚è∞',\n      title: 'How It Works',\n      description: 'Create a check-in with a time limit. If you don\\'t mark yourself safe before time runs out, your besties get alerted.',\n    },\n    {\n      emoji: 'üíú',\n      title: 'Your Safety Network',\n      description: 'Add up to 5 besties to your circle. They\\'ll be notified if you miss a check-in, so they can make sure you\\'re okay.',\n    },\n    {\n      emoji: 'üì±',\n      title: 'Stay Connected',\n      description: 'Your besties get SMS alerts when you miss a check-in. They can also see your location and notes from your last check-in.',\n    },\n    {\n      emoji: '‚ú®',\n      title: 'Let\\'s Get Started!',\n      description: 'We\\'ll help you set up your profile and add your first bestie. Then you\\'ll be ready to create your first check-in!',\n    },\n  ];\n\n  const currentSlide = slides[slideIndex];\n\n  // Check if user already has besties\n  useEffect(() => {\n    if (step === 'bestie-circle' && currentUser) {\n      checkForBesties();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [step, currentUser]);\n\n  const checkForBesties = async () => {\n    setCheckingBesties(true);\n    try {\n      // If there's a pending invite, wait for it to be processed\n      // AuthContext removes pending_invite after processing\n      const pendingInvite = sessionStorage.getItem('pending_invite') || localStorage.getItem('pending_invite');\n      if (pendingInvite) {\n        // Wait up to 3 seconds for invite to process\n        for (let i = 0; i < 6; i++) {\n          await new Promise(resolve => setTimeout(resolve, 500));\n          const stillPending = sessionStorage.getItem('pending_invite') || localStorage.getItem('pending_invite');\n          if (!stillPending) break; // Invite processed!\n        }\n      }\n\n      // Now check for besties in Firestore\n      const [requesterQuery, recipientQuery] = await Promise.all([\n        getDocs(query(collection(db, 'besties'), where('requesterId', '==', currentUser.uid), where('status', '==', 'accepted'))),\n        getDocs(query(collection(db, 'besties'), where('recipientId', '==', currentUser.uid), where('status', '==', 'accepted'))),\n      ]);\n\n      setHasBesties(!requesterQuery.empty || !recipientQuery.empty);\n    } catch (error) {\n      console.error('Error checking besties:', error);\n    } finally {\n      setCheckingBesties(false);\n    }\n  };\n\n  const handleSaveName = async () => {\n    if (!displayName.trim()) {\n      toast.error('Please enter a name');\n      return;\n    }\n\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        displayName: displayName.trim(),\n      });\n      setStep('photo');\n    } catch (error) {\n      console.error('Error updating name:', error);\n      toast.error('Failed to update name');\n    }\n  };\n\n  const handlePhotoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (file.size > 5 * 1024 * 1024) {\n      toast.error('Photo must be less than 5MB');\n      return;\n    }\n\n    setUploading(true);\n    const uploadToast = toast.loading('Uploading photo...');\n\n    try {\n      const storageRef = ref(storage, `profile-pictures/${currentUser.uid}/${Date.now()}_${file.name}`);\n      await uploadBytes(storageRef, file);\n      const downloadURL = await getDownloadURL(storageRef);\n\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        photoURL: downloadURL,\n      });\n\n      toast.success('Photo uploaded!', { id: uploadToast });\n\n      // If user joined via invite, show welcome screen first\n      if (inviterInfo) {\n        setStep('invite-welcome');\n      } else {\n        setStep('bestie-circle');\n      }\n    } catch (error) {\n      console.error('Error uploading photo:', error);\n      toast.error('Failed to upload photo', { id: uploadToast });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleSkipPhoto = () => {\n    // If user joined via invite, show welcome screen first\n    if (inviterInfo) {\n      setStep('invite-welcome');\n    } else {\n      setStep('bestie-circle');\n    }\n  };\n\n  const handleFinish = async () => {\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        onboardingCompleted: true,\n      });\n\n      if (hasBesties) {\n        navigate('/create');\n      } else {\n        navigate('/profile');\n      }\n    } catch (error) {\n      console.error('Error completing onboarding:', error);\n      toast.error('Failed to complete onboarding');\n    }\n  };\n\n  // Welcome Screen\n  if (step === 'welcome') {\n    return (\n      <div className=\"min-h-screen bg-gradient-primary flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full text-center\">\n          <div className=\"text-8xl mb-6 animate-bounce\">üíú</div>\n          <h1 className=\"text-4xl font-display text-white mb-4\">Welcome to Besties!</h1>\n          <p className=\"text-xl text-white/90 mb-8\">\n            Your personal safety network in your pocket\n          </p>\n          <button\n            onClick={() => setStep('slides')}\n            className=\"btn bg-white dark:bg-gray-800 text-primary hover:bg-white/90 dark:hover:bg-gray-700 text-lg px-8 py-4\"\n          >\n            Get Started ‚Üí\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Slides\n  if (step === 'slides') {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-800 flex flex-col items-center justify-center p-4\">\n        <div className=\"max-w-md w-full text-center\">\n          <div className=\"text-7xl mb-6\">{currentSlide.emoji}</div>\n          <h2 className=\"text-3xl font-display text-gray-800 dark:text-gray-200 mb-4\">\n            {currentSlide.title}\n          </h2>\n          <p className=\"text-lg text-gray-600 dark:text-gray-400 mb-8\">\n            {currentSlide.description}\n          </p>\n\n          {/* Dots */}\n          <div className=\"flex justify-center gap-2 mb-8\">\n            {slides.map((_, index) => (\n              <div\n                key={index}\n                className={`w-2 h-2 rounded-full transition-all ${\n                  index === slideIndex ? 'bg-primary w-6' : 'bg-gray-300 dark:bg-gray-600'\n                }`}\n              />\n            ))}\n          </div>\n\n          {/* Navigation */}\n          <div className=\"flex gap-3\">\n            {slideIndex < slides.length - 1 ? (\n              <>\n                <button\n                  onClick={() => setStep('name')}\n                  className=\"flex-1 btn btn-secondary\"\n                >\n                  Skip\n                </button>\n                <button\n                  onClick={() => setSlideIndex(slideIndex + 1)}\n                  className=\"flex-1 btn btn-primary\"\n                >\n                  Next ‚Üí\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={() => setStep('name')}\n                className=\"w-full btn btn-primary text-lg py-4\"\n              >\n                Let's check your details! ‚Üí\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Name Edit\n  if (step === 'name') {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-800 flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full\">\n          <div className=\"text-center mb-8\">\n            <div className=\"text-6xl mb-4\">üë§</div>\n            <h2 className=\"text-3xl font-display text-gray-800 dark:text-gray-200 mb-2\">\n              Is this name correct?\n            </h2>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              This is how your besties will see you\n            </p>\n          </div>\n\n          <input\n            type=\"text\"\n            value={displayName}\n            onChange={(e) => setDisplayName(e.target.value)}\n            className=\"w-full p-4 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-xl focus:border-primary focus:outline-none text-lg mb-6\"\n            placeholder=\"Your name\"\n          />\n\n          <button\n            onClick={handleSaveName}\n            className=\"w-full btn btn-primary text-lg py-4\"\n          >\n            Looks Good! ‚úì\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Photo Upload\n  if (step === 'photo') {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-800 flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full\">\n          <div className=\"text-center mb-8\">\n            <div className=\"text-6xl mb-4\">üì∑</div>\n            <h2 className=\"text-3xl font-display text-gray-800 dark:text-gray-200 mb-2\">\n              Add a Profile Picture?\n            </h2>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              Help your besties recognize you (optional)\n            </p>\n          </div>\n\n          {userData?.photoURL && (\n            <div className=\"mb-6 flex justify-center\">\n              <img\n                src={userData.photoURL}\n                alt=\"Profile\"\n                className=\"w-32 h-32 rounded-full object-cover border-4 border-primary\"\n              />\n            </div>\n          )}\n\n          <label className=\"block w-full mb-4\">\n            <div className=\"btn btn-primary text-lg py-4 text-center cursor-pointer\">\n              {uploading ? 'Uploading...' : 'üì§ Upload Photo'}\n            </div>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handlePhotoUpload}\n              className=\"hidden\"\n              disabled={uploading}\n            />\n          </label>\n\n          <button\n            onClick={handleSkipPhoto}\n            className=\"w-full btn btn-secondary text-lg py-4\"\n            disabled={uploading}\n          >\n            Skip for Now ‚Üí\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Invite Welcome Screen (only shown if user joined via invite)\n  if (step === 'invite-welcome' && inviterInfo) {\n    return (\n      <div className=\"min-h-screen bg-gradient-secondary flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full text-center\">\n          <div className=\"text-8xl mb-6 animate-bounce\">üíú</div>\n\n          {/* Inviter's Photo */}\n          {inviterInfo.photoURL ? (\n            <div className=\"mb-6 flex justify-center\">\n              <img\n                src={inviterInfo.photoURL}\n                alt={inviterInfo.displayName}\n                className=\"w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl\"\n              />\n            </div>\n          ) : (\n            <div className=\"mb-6 flex justify-center\">\n              <div className=\"w-32 h-32 rounded-full bg-gradient-primary flex items-center justify-center text-white text-5xl font-display border-4 border-white shadow-xl\">\n                {inviterInfo.displayName?.[0] || '?'}\n              </div>\n            </div>\n          )}\n\n          <h1 className=\"text-4xl font-display text-white mb-4\">\n            Welcome to Besties!\n          </h1>\n          <p className=\"text-2xl text-white/90 mb-2\">\n            You accepted <span className=\"font-bold\">{inviterInfo.displayName}'s</span> request\n          </p>\n          <p className=\"text-xl text-white/90 mb-8\">\n            You are now besties! üéâ\n          </p>\n\n          <button\n            onClick={() => {\n              // Clean up inviter info and proceed to bestie circle\n              sessionStorage.removeItem('inviter_info');\n              localStorage.removeItem('inviter_info');\n              setInviterInfo(null);\n              setStep('bestie-circle');\n            }}\n            className=\"btn bg-white dark:bg-gray-800 text-primary hover:bg-white/90 dark:hover:bg-gray-700 text-lg px-8 py-4\"\n          >\n            Continue ‚Üí\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Bestie Circle Intro\n  if (step === 'bestie-circle') {\n    if (checkingBesties) {\n      return (\n        <div className=\"min-h-screen bg-white dark:bg-gray-800 flex items-center justify-center\">\n          <div className=\"spinner\"></div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-800 flex items-center justify-center p-4 overflow-y-auto\">\n        <div className=\"max-w-2xl w-full py-8\">\n          <div className=\"text-center mb-8\">\n            <div className=\"text-6xl mb-4\">‚≠ê</div>\n            <h2 className=\"text-3xl font-display text-gray-800 dark:text-gray-200 mb-2\">\n              Your Bestie Circle\n            </h2>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n              These are the 5 besties who get notified if you miss a check-in.\n            </p>\n\n            {!hasBesties && (\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border-2 border-yellow-300 dark:border-yellow-600 rounded-xl p-4 mb-6\">\n                <p className=\"text-sm font-semibold text-yellow-800 dark:text-yellow-200\">\n                  ‚ö†Ô∏è You need at least one bestie to create a check-in\n                </p>\n              </div>\n            )}\n\n            {hasBesties && (\n              <div className=\"bg-green-50 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-600 rounded-xl p-4 mb-6\">\n                <p className=\"text-sm font-semibold text-green-800 dark:text-green-200\">\n                  ‚úÖ Great! You already have a bestie in your circle\n                </p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"card p-6 mb-6\">\n            <h3 className=\"font-display text-lg mb-4 text-center text-gray-800 dark:text-gray-200\">How It Works:</h3>\n            <ul className=\"space-y-3 text-sm text-gray-600 dark:text-gray-400\">\n              <li className=\"flex gap-3\">\n                <span className=\"text-2xl\">1Ô∏è‚É£</span>\n                <span>Choose up to 5 besties for your safety circle</span>\n              </li>\n              <li className=\"flex gap-3\">\n                <span className=\"text-2xl\">2Ô∏è‚É£</span>\n                <span>They'll get SMS alerts if you miss a check-in</span>\n              </li>\n              <li className=\"flex gap-3\">\n                <span className=\"text-2xl\">3Ô∏è‚É£</span>\n                <span>You can change who's in your circle anytime</span>\n              </li>\n            </ul>\n          </div>\n\n          {hasBesties ? (\n            <button\n              onClick={handleFinish}\n              className=\"w-full btn btn-primary text-lg py-4\"\n            >\n              Start Creating Check-Ins! ‚Üí\n            </button>\n          ) : (\n            <>\n              <button\n                onClick={handleFinish}\n                className=\"w-full btn btn-primary text-lg py-4 mb-3\"\n              >\n                ‚ûï Add Your First Bestie\n              </button>\n\n              <p className=\"text-xs text-center text-gray-600 dark:text-gray-400\">\n                You'll be taken to your profile. Click on a + button in your bestie circle to continue\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default OnboardingPage;\n"],"names":["OnboardingPage","currentUser","userData","useAuth","navigate","useNavigate","step","setStep","useState","slideIndex","setSlideIndex","displayName","setDisplayName","uploading","setUploading","hasBesties","setHasBesties","checkingBesties","setCheckingBesties","inviterInfo","setInviterInfo","useEffect","storedInviterInfo","sessionStorage","getItem","localStorage","JSON","parse","e","console","error","slides","emoji","title","description","currentSlide","checkForBesties","async","i","Promise","resolve","setTimeout","requesterQuery","recipientQuery","all","getDocs","query","collection","db","where","uid","empty","handleSaveName","trim","updateDoc","doc","toast","handlePhotoUpload","file","target","files","size","uploadToast","loading","storageRef","ref","storage","concat","Date","now","name","uploadBytes","downloadURL","getDownloadURL","photoURL","success","id","handleSkipPhoto","handleFinish","onboardingCompleted","_jsx","className","children","_jsxs","onClick","map","_","index","length","_Fragment","type","value","onChange","placeholder","src","alt","accept","disabled","_inviterInfo$displayN","removeItem"],"sourceRoot":""}