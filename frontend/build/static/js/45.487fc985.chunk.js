"use strict";(self.webpackChunkbesties_frontend=self.webpackChunkbesties_frontend||[]).push([[45],{3045:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var s=a(5043),r=a(3216),n=a(4528),i=a(7400),l=a(5472),o=a(559),d=a(2339),c=a(579);const m=e=>{let{onClose:t,circleCount:a}=e;const s=e=>{const a=window.location.origin,s="Hey! I'm using Besties to stay safe when I go out. It's a safety app where your close friends can check in on you. Want to be part of my safety circle? \ud83d\udc9c\n\nJoin me on Besties: ".concat(a),r=encodeURIComponent(s),n=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);switch(e){case"whatsapp":n?window.location.href="whatsapp://send?text=".concat(r):window.open("https://wa.me/?text=".concat(r),"_blank");break;case"messenger":n?(window.location.href="fb-messenger://share?link=".concat(encodeURIComponent(a)),setTimeout(()=>{window.open("https://www.facebook.com/dialog/send?link=".concat(encodeURIComponent(a),"&app_id=&redirect_uri=").concat(encodeURIComponent(a)),"_blank")},1500)):window.open("https://www.facebook.com/dialog/send?link=".concat(encodeURIComponent(a),"&app_id=&redirect_uri=").concat(encodeURIComponent(a)),"_blank","width=600,height=400");break;case"instagram":navigator.clipboard.writeText(s).then(()=>{d.Ay.success("Message copied! Opening Instagram DMs..."),n?(window.location.href="instagram://direct/inbox",setTimeout(()=>{window.open("https://www.instagram.com/direct/inbox/","_blank")},1500)):window.open("https://www.instagram.com/direct/inbox/","_blank")}).catch(()=>{d.Ay.error("Failed to copy message")});break;case"sms":window.location.href="sms:?body=".concat(r);break;case"facebook":const e=encodeURIComponent("Join my safety circle on Besties! \ud83d\udc9c"),t=encodeURIComponent(a);n?(window.location.href="fb://profile",setTimeout(()=>{window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(t,"&quote=").concat(e),"_blank")},1500)):window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(t,"&quote=").concat(e),"_blank","width=600,height=400")}d.Ay.success("Opening ".concat(e,"...")),t()};return(0,c.jsx)("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/75 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:t,children:(0,c.jsxs)("div",{className:"card max-w-lg w-full p-0 animate-scale-up overflow-hidden relative bg-gradient-to-br from-pink-50 via-purple-50 to-pink-50 dark:from-pink-900/20 dark:via-purple-900/20 dark:to-pink-900/20 border-2 border-pink-200 dark:border-pink-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("button",{onClick:t,className:"absolute top-4 right-4 z-10 w-8 h-8 rounded-full bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors shadow-md text-gray-700 dark:text-gray-300",children:"\u2715"}),(0,c.jsxs)("div",{className:"bg-gradient-to-r from-primary via-purple-500 to-pink-500 p-4 md:p-8 text-center relative overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 md:w-32 md:h-32 bg-white/10 rounded-full -mr-12 md:-mr-16 -mt-12 md:-mt-16"}),(0,c.jsx)("div",{className:"absolute bottom-0 left-0 w-16 h-16 md:w-24 md:h-24 bg-white/10 rounded-full -ml-8 md:-ml-12 -mb-8 md:-mb-12"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl md:text-6xl mb-2 md:mb-3 animate-bounce-slow",children:"\ud83d\udc9c"}),(0,c.jsx)("h3",{className:"text-xl md:text-3xl font-display text-white mb-2 drop-shadow-lg",children:"Complete Your Circle!"}),(0,c.jsx)("div",{className:"inline-block bg-white/20 backdrop-blur-sm px-3 md:px-4 py-1.5 md:py-2 rounded-full",children:(0,c.jsxs)("p",{className:"text-white font-semibold text-sm md:text-base",children:[(0,c.jsx)("span",{className:"text-xl md:text-2xl font-display",children:a}),(0,c.jsx)("span",{className:"text-white/80",children:" / "}),(0,c.jsx)("span",{className:"text-xl md:text-2xl font-display",children:"5"}),(0,c.jsx)("span",{className:"text-xs md:text-sm ml-2",children:"besties"})]})})]})]}),(0,c.jsxs)("div",{className:"p-4 md:p-6",children:[(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-5 mb-4 md:mb-6 shadow-lg border-2 border-pink-100 dark:border-pink-800",children:(0,c.jsxs)("div",{className:"flex items-start gap-2 md:gap-3",children:[(0,c.jsx)("div",{className:"text-2xl md:text-3xl flex-shrink-0",children:"\ud83d\udee1\ufe0f"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"font-display text-base md:text-lg text-primary dark:text-purple-400 mb-1 md:mb-2",children:"Why you need 5 besties"}),(0,c.jsx)("p",{className:"text-xs md:text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"A full circle means maximum protection! Your 5 trusted friends will get alerts when you check in and can help if something goes wrong. The more besties, the safer you are. \ud83d\udc95"})]})]})}),(0,c.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,c.jsx)("h4",{className:"text-base md:text-lg font-display text-center text-primary dark:text-purple-400 mb-3 md:mb-4",children:"\u2728 Invite Friends to Join You \u2728"}),(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:[(0,c.jsxs)("button",{onClick:()=>s("whatsapp"),className:"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-[#25D366] hover:bg-[#20BA5A] text-white transition-all hover:scale-105 shadow-md",title:"Share on WhatsApp",children:[(0,c.jsx)("svg",{className:"w-6 h-6 md:w-10 md:h-10",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),(0,c.jsx)("span",{className:"text-[10px] md:text-sm font-semibold",children:"WhatsApp"})]}),(0,c.jsxs)("button",{onClick:()=>s("messenger"),className:"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-[#0084FF] hover:bg-[#0073E6] text-white transition-all hover:scale-105 shadow-md",title:"Share on Messenger",children:[(0,c.jsx)("svg",{className:"w-6 h-6 md:w-10 md:h-10",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z"})}),(0,c.jsx)("span",{className:"text-[10px] md:text-sm font-semibold",children:"Messenger"})]}),(0,c.jsxs)("button",{onClick:()=>s("instagram"),className:"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] hover:opacity-90 text-white transition-all hover:scale-105 shadow-md",title:"Share on Instagram",children:[(0,c.jsx)("svg",{className:"w-6 h-6 md:w-10 md:h-10",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),(0,c.jsx)("span",{className:"text-[10px] md:text-sm font-semibold",children:"Instagram"})]}),(0,c.jsxs)("button",{onClick:()=>s("sms"),className:"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-success hover:bg-green-600 text-white transition-all hover:scale-105 shadow-md",title:"Share via SMS",children:[(0,c.jsx)("svg",{className:"w-6 h-6 md:w-10 md:h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,c.jsx)("span",{className:"text-[10px] md:text-sm font-semibold",children:"SMS"})]}),(0,c.jsxs)("button",{onClick:()=>s("facebook"),className:"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-[#1877F2] hover:bg-[#166FE5] text-white transition-all hover:scale-105 shadow-md",title:"Share on Facebook",children:[(0,c.jsx)("svg",{className:"w-6 h-6 md:w-10 md:h-10",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),(0,c.jsx)("span",{className:"text-[10px] md:text-sm font-semibold",children:"Facebook"})]}),(0,c.jsxs)("button",{onClick:t,className:"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 transition-all hover:scale-105 shadow-md",children:[(0,c.jsx)("div",{className:"w-6 h-6 md:w-10 md:h-10 flex items-center justify-center text-xl md:text-2xl",children:"\ud83d\udc4b"}),(0,c.jsx)("span",{className:"text-[10px] md:text-sm font-semibold",children:"Maybe Later"})]})]})]}),(0,c.jsx)("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 italic",children:"\ud83d\udc95 Building your safety circle is one of the smartest things you can do"})]}),(0,c.jsx)("style",{children:"\n          @keyframes bounce-slow {\n            0%, 100% { transform: translateY(0); }\n            50% { transform: translateY(-10px); }\n          }\n          .animate-bounce-slow {\n            animation: bounce-slow 2s ease-in-out infinite;\n          }\n        "})]})})};var x=a(7766);const h=e=>{let{userId:t,onAddClick:a}=e;const n=(0,r.Zp)(),[o,h]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[u,b]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null),[w,v]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(t)try{const[e,a]=await Promise.all([(0,l.GG)((0,l.P)((0,l.rJ)(i.db,"besties"),(0,l._M)("requesterId","==",t),(0,l._M)("status","==","accepted"))),(0,l.GG)((0,l.P)((0,l.rJ)(i.db,"besties"),(0,l._M)("recipientId","==",t),(0,l._M)("status","==","accepted")))]),s=[];for(const t of e.docs){const e=t.data(),a=await(0,l.x7)((0,l.H9)(i.db,"users",e.recipientId)),r=a.exists()?a.data():{};s.push({id:e.recipientId,name:r.displayName||"Bestie",photoURL:r.photoURL||null,requestAttention:r.requestAttention||null})}for(const t of a.docs){const e=t.data(),a=await(0,l.x7)((0,l.H9)(i.db,"users",e.requesterId)),r=a.exists()?a.data():{};s.push({id:e.requesterId,name:r.displayName||"Bestie",photoURL:r.photoURL||null,requestAttention:r.requestAttention||null})}h(s);const r=await(0,l.x7)((0,l.H9)(i.db,"users",t)),n=r.exists()&&r.data().featuredCircle||[],o=n.map(e=>s.find(t=>t.id===e)).filter(Boolean),d=o.length<s.length&&o.length<5;if(d){const e=s.filter(e=>!n.includes(e.id));o.push(...e.slice(0,5-o.length))}const c=o.slice(0,5);p(c),d&&c.length>0&&await N(c),b(!1)}catch(e){console.error("Error loading besties:",e),b(!1)}})()},[t]);const N=async e=>{const a=e.map(e=>e.id);await(0,l.mZ)((0,l.H9)(i.db,"users",t),{featuredCircle:a})},C=Array.from({length:5},(e,t)=>g[t]||null),A=["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500"];return u?(0,c.jsx)("div",{className:"card p-8 flex items-center justify-center",children:(0,c.jsx)("div",{className:"spinner"})}):(0,c.jsxs)("div",{className:"card p-8 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 border-2 border-purple-100",children:[(0,c.jsx)("h3",{className:"text-center text-2xl font-display text-gradient mb-6",children:"Bestie Circle \u2b50"}),(0,c.jsx)("div",{className:"relative w-full max-w-sm mx-auto aspect-square",children:(0,c.jsxs)("div",{className:"absolute inset-0",children:[C.map((e,t)=>{if(!e)return null;const a=(72*t-90)*(Math.PI/180),s=50+45*Math.cos(a),r=50+45*Math.sin(a);return(0,c.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:0},children:[(0,c.jsx)("line",{x1:"50%",y1:"50%",x2:"".concat(s,"%"),y2:"".concat(r,"%"),stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:"4 2",opacity:"0.3"}),(0,c.jsx)("defs",{children:(0,c.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,c.jsx)("stop",{offset:"0%",stopColor:"#a855f7"}),(0,c.jsx)("stop",{offset:"100%",stopColor:"#ec4899"})]})})]},"line-".concat(t))}),(0,c.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:(0,c.jsx)("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-base md:text-lg font-display shadow-2xl border-4 border-white ring-4 ring-purple-200 animate-pulse-gentle",children:"YOU"})}),C.map((e,t)=>{const a=(72*t-90)*(Math.PI/180),s=50+45*Math.cos(a),r=50+45*Math.sin(a);return(0,c.jsx)("div",{className:"absolute",style:{left:"".concat(s,"%"),top:"".concat(r,"%"),transform:"translate(-50%, -50%)"},children:e?(0,c.jsxs)("div",{className:"relative group",children:[(0,c.jsxs)("button",{onClick:()=>y(f===t?null:t),className:"relative hover:scale-110 transition-all duration-300",children:[(0,c.jsx)("div",{className:"w-16 h-16 md:w-20 md:h-20 ".concat(A[t]," rounded-full shadow-xl border-4 border-white hover:shadow-2xl ring-2 ring-purple-200 hover:ring-4 hover:ring-purple-300 overflow-hidden flex items-center justify-center"),children:(0,c.jsx)(x.A,{photoURL:e.photoURL,name:e.name||"Bestie",requestAttention:e.requestAttention,size:"xl",showBubble:!0,className:"w-full h-full"})}),(0,c.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity rounded-full pointer-events-none"})]}),(0,c.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none z-20 transform group-hover:-translate-y-1",children:(0,c.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap shadow-lg",children:[e.name||"Unknown",(0,c.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-pink-600"})]})}),f===t&&(0,c.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-[200] w-36",children:[(0,c.jsx)("button",{onClick:()=>{return t=e.id,n("/user/".concat(t)),void y(null);var t},className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udc64 View Profile"}),(0,c.jsx)("button",{onClick:()=>v(!0),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udd04 Replace"}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(g.length<5)return d.Ay.error("Circle must be full to remove members. Use Replace instead."),void y(null);const t=g.filter((t,a)=>a!==e);p(t),await N(t),y(null),d.Ay.success("Removed from circle")})(t),className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600",children:"\u274c Remove"})]})]}):(0,c.jsx)("button",{onClick:()=>k(!0),className:"w-16 h-16 md:w-20 md:h-20 border-4 border-dashed ".concat(A[t].replace("bg-","border-")," rounded-full flex items-center justify-center ").concat(A[t].replace("bg-","text-")," text-3xl md:text-4xl font-bold hover:scale-110 hover:bg-purple-100 transition-all shadow-lg hover:shadow-xl animate-pulse-slow"),title:"Invite a bestie to your circle",children:"+"})},t)})]})}),(0,c.jsxs)("div",{className:"text-center mt-8",children:[(0,c.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md border-2 border-purple-200 mb-2",children:[(0,c.jsx)("span",{className:"text-2xl",children:"\u2b50"}),(0,c.jsxs)("span",{className:"font-display text-lg text-gradient font-bold",children:[g.length,"/5 Circle Members"]})]}),(0,c.jsx)("div",{className:"text-sm text-gray-600 mt-2",children:5===g.length?"Your circle is complete! \ud83c\udf89":0===g.length?"Start building your safety network":"Add ".concat(5-g.length," more to complete your circle")})]}),(0,c.jsx)("style",{children:"\n        @keyframes pulse-gentle {\n          0%, 100% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.03);\n          }\n        }\n        .animate-pulse-gentle {\n          animation: pulse-gentle 3s ease-in-out infinite;\n        }\n        @keyframes pulse-slow {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.6;\n          }\n        }\n        .animate-pulse-slow {\n          animation: pulse-slow 2s ease-in-out infinite;\n        }\n      "}),w&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>v(!1),children:(0,c.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full max-h-96 overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("h3",{className:"text-xl font-display mb-4",children:"Replace with:"}),(0,c.jsxs)("div",{className:"space-y-2",children:[o.filter(e=>!g.find(t=>t.id===e.id)).map(e=>(0,c.jsxs)("button",{onClick:()=>(async e=>{const t=[...g];t[f]=e,p(t),await N(t),v(!1),y(null),d.Ay.success("Bestie replaced")})(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,c.jsx)(x.A,{photoURL:e.photoURL,name:e.name||"Unknown",requestAttention:e.requestAttention,size:"md",showBubble:!0}),(0,c.jsx)("div",{className:"text-left",children:(0,c.jsx)("div",{className:"font-semibold",children:e.name||"Unknown"})})]},e.id)),0===o.filter(e=>!g.find(t=>t.id===e.id)).length&&(0,c.jsx)("p",{className:"text-center text-gray-500 py-4",children:"All besties are in your circle!"})]}),(0,c.jsx)("button",{onClick:()=>v(!1),className:"mt-4 w-full btn btn-secondary",children:"Cancel"})]})}),j&&(0,c.jsx)(m,{onClose:()=>k(!1),circleCount:g.length})]})};var g=a(5239),p=a.n(g);const u=e=>{var t,a,r,o;let{onClose:m}=e;const{userData:x,currentUser:h}=(0,n.As)(),[g,u]=(0,s.useState)([]),[b,f]=(0,s.useState)(!0),[y,w]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[k,N]=(0,s.useState)(!1),[C,A]=(0,s.useState)(null),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{B()},[h]);const B=async()=>{if(h)try{const e=await(0,l.x7)((0,l.H9)(i.db,"badges",h.uid));if(e.exists()){const t=e.data().badges||[],a=(null===x||void 0===x?void 0:x.featuredBadges)||[],s=a.map(e=>t.find(t=>t.id===e)).filter(Boolean).slice(0,3);if(s.length<3){const e=t.filter(e=>!a.includes(e.id));s.push(...e.slice(0,3-s.length))}u(s)}f(!1)}catch(e){console.error("Error loading badges:",e),f(!1)}},F=(null===x||void 0===x||null===(t=x.profile)||void 0===t?void 0:t.backgroundGradient)||"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",I="".concat(window.location.origin,"/?invite=").concat(null===h||void 0===h?void 0:h.uid),z="Come be my safety Bestie! \ud83d\udc9c",M=async()=>{if(S.current){w(!0);try{await new Promise(e=>setTimeout(e,500));const e=(await p()(S.current,{backgroundColor:null,scale:2,logging:!1,useCORS:!0,allowTaint:!0})).toDataURL("image/png");return j(e),e}catch(e){return console.error("Error generating image:",e),d.Ay.error("Failed to generate image"),null}finally{w(!1)}}},U=async()=>{let e=v;if(!e&&(e=await M(),!e))return;const t=document.createElement("a");t.download="besties-profile-share.png",t.href=e,t.click(),d.Ay.success("Image downloaded! Share it anywhere \ud83d\udc9c")},D=e=>{A(e),N(!0)},R=(e,t)=>{const a="".concat(z,"\n\n").concat(I),s=encodeURIComponent(a),r=encodeURIComponent(I),n=encodeURIComponent(z),i=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);switch(e){case"whatsapp":i?window.location.href="whatsapp://send?text=".concat(s):window.open("https://wa.me/?text=".concat(s),"_blank");break;case"messenger":i?(window.location.href="fb-messenger://share?link=".concat(r),setTimeout(()=>{window.open("https://www.facebook.com/dialog/send?link=".concat(r,"&app_id=&redirect_uri=").concat(r),"_blank")},1500)):window.open("https://www.facebook.com/dialog/send?link=".concat(r,"&app_id=&redirect_uri=").concat(r),"_blank","width=600,height=400");break;case"instagram":navigator.clipboard.writeText(a).then(()=>{d.Ay.success("Link copied! Opening Instagram DMs..."),i?(window.location.href="instagram://direct/inbox",setTimeout(()=>{window.open("https://www.instagram.com/direct/inbox/","_blank")},1500)):window.open("https://www.instagram.com/direct/inbox/","_blank")}).catch(()=>{d.Ay.error("Failed to copy link")});break;case"facebook":i?(window.location.href="fb://profile/".concat(h.uid),setTimeout(()=>{window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(r,"&quote=").concat(n),"_blank")},1500)):window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(r,"&quote=").concat(n),"_blank","width=600,height=400");break;case"twitter":i?(window.location.href="twitter://post?message=".concat(n," ").concat(r),setTimeout(()=>{window.open("https://twitter.com/intent/tweet?text=".concat(n,"&url=").concat(r),"_blank")},1500)):window.open("https://twitter.com/intent/tweet?text=".concat(n,"&url=").concat(r),"_blank","width=600,height=400");break;case"sms":window.location.href="sms:?body=".concat(s)}};return b?(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4",children:(0,c.jsx)("div",{className:"card p-8 bg-white dark:bg-gray-800",children:(0,c.jsx)("div",{className:"spinner"})})}):(0,c.jsxs)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:[(0,c.jsxs)("div",{className:"card max-w-2xl w-full p-6 animate-scale-up max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,c.jsx)("h2",{className:"text-2xl font-display text-text-primary dark:text-white",children:"Share Your Profile"}),(0,c.jsx)("button",{onClick:m,className:"w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors text-gray-700 dark:text-gray-300",children:"\u2715"})]}),(0,c.jsx)("p",{className:"text-text-secondary dark:text-gray-300 mb-6",children:"Choose how you'd like to share your Besties profile with friends!"}),(0,c.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:(0,c.jsxs)("div",{ref:S,className:"w-full rounded-2xl p-8 text-center shadow-xl relative overflow-hidden",style:{background:F,width:"600px"},children:[(0,c.jsx)("div",{className:"w-32 h-32 bg-gradient-primary rounded-full flex items-center justify-center text-white text-5xl font-display overflow-hidden mx-auto mb-4 border-4 border-white shadow-xl",children:null!==x&&void 0!==x&&x.photoURL?(0,c.jsx)("img",{src:x.photoURL,alt:"Profile",className:"w-full h-full object-cover",crossOrigin:"anonymous"}):(null===x||void 0===x||null===(a=x.displayName)||void 0===a?void 0:a[0])||(null===h||void 0===h||null===(r=h.email)||void 0===r?void 0:r[0])||"U"}),(0,c.jsx)("h3",{className:"font-display text-4xl text-gray-800 mb-3",children:(null===x||void 0===x?void 0:x.displayName)||"User"}),(null===x||void 0===x||null===(o=x.profile)||void 0===o?void 0:o.bio)&&(0,c.jsxs)("p",{className:"text-gray-700 italic max-w-md mx-auto mb-4 text-base",children:['"',x.profile.bio,'"']}),(0,c.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 mb-4 shadow-2xl",children:[(0,c.jsx)("p",{className:"text-2xl font-display text-primary mb-2",children:"\ud83d\udc9c Come be my safety Bestie!"}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Join me on the Besties safety app"})]}),g.length>0&&(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Top Badges"}),(0,c.jsx)("div",{className:"flex gap-4 justify-center",children:g.map(e=>(0,c.jsxs)("div",{className:"flex flex-col items-center bg-white/90 backdrop-blur-sm rounded-xl p-3 shadow-md",children:[(0,c.jsx)("div",{className:"text-4xl mb-1",children:e.icon}),(0,c.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:e.name})]},e.id))})]}),(0,c.jsxs)("div",{className:"mt-6 pt-4 border-t-2 border-white/40",children:[(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"Download"}),(0,c.jsx)("div",{className:"font-display text-2xl text-gray-800",children:"Besties"}),(0,c.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Your Safety Network"})]})]})}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,c.jsxs)("button",{onClick:()=>D("whatsapp"),className:"btn bg-[#25D366] text-white hover:bg-[#20BA5A] flex items-center justify-center gap-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"WhatsApp"]}),(0,c.jsxs)("button",{onClick:()=>D("messenger"),className:"btn bg-[#0084FF] text-white hover:bg-[#0073E6] flex items-center justify-center gap-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z"})}),"Messenger"]}),(0,c.jsxs)("button",{onClick:()=>D("instagram"),className:"btn bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] text-white hover:opacity-90 flex items-center justify-center gap-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"Instagram DM"]}),(0,c.jsxs)("button",{onClick:()=>D("facebook"),className:"btn bg-[#1877F2] text-white hover:bg-[#166FE5] flex items-center justify-center gap-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,c.jsxs)("button",{onClick:()=>D("twitter"),className:"btn bg-black text-white hover:bg-gray-800 flex items-center justify-center gap-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X (Twitter)"]}),(0,c.jsxs)("button",{onClick:()=>D("sms"),className:"btn bg-success text-white hover:bg-green-600 flex items-center justify-center gap-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"SMS"]})]}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)("button",{onClick:async()=>{const e="".concat(z,"\n\n").concat(I);try{await navigator.clipboard.writeText(e),d.Ay.success("Link copied to clipboard!")}catch(t){d.Ay.error("Failed to copy")}},className:"flex-1 btn btn-secondary",children:"\ud83d\udccb Copy Link"}),(0,c.jsx)("button",{onClick:U,disabled:y,className:"flex-1 btn btn-primary",children:y?"\u23f3 Generating...":"\ud83d\udce5 Download Card"})]}),(0,c.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-4",children:"Share your profile with friends so they can join your safety network!"})]}),k&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/70 dark:bg-black/80 flex items-center justify-center z-[60] p-4 animate-fade-in",children:(0,c.jsxs)("div",{className:"card max-w-md w-full p-6 animate-scale-up bg-white dark:bg-gray-800",children:[(0,c.jsxs)("div",{className:"text-center mb-6",children:[(0,c.jsx)("div",{className:"text-6xl mb-4 animate-bounce-slow",children:"\ud83c\udfa8"}),(0,c.jsx)("h3",{className:"text-2xl font-display text-text-primary dark:text-white mb-2",children:"How do you want to share?"}),(0,c.jsx)("p",{className:"text-sm text-text-secondary dark:text-gray-300",children:"Choose between a beautiful card or a simple link"})]}),(0,c.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,c.jsx)("button",{onClick:async()=>{N(!1);let e=v;(e||(e=await M(),e))&&(d.Ay.success("Card ready! Download and share it \ud83d\udc9c"),U(),setTimeout(()=>{R(C,!0)},1e3))},className:"w-full p-4 border-2 border-primary bg-purple-50 dark:bg-purple-900/30 rounded-xl hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-all group",disabled:y,children:(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"text-4xl",children:"\ud83d\uddbc\ufe0f"}),(0,c.jsxs)("div",{className:"flex-1 text-left",children:[(0,c.jsx)("div",{className:"font-display text-lg text-primary dark:text-purple-400 mb-1",children:"Share Beautiful Card"}),(0,c.jsx)("div",{className:"text-xs text-text-secondary dark:text-gray-400",children:"Custom image with your profile & badges"})]}),(0,c.jsx)("div",{className:"text-2xl opacity-0 group-hover:opacity-100 transition-opacity dark:text-white",children:"\u2192"})]})}),(0,c.jsx)("button",{onClick:()=>{N(!1),R(C,!1)},className:"w-full p-4 border-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-600 transition-all group",children:(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"text-4xl",children:"\ud83d\udd17"}),(0,c.jsxs)("div",{className:"flex-1 text-left",children:[(0,c.jsx)("div",{className:"font-display text-lg text-gray-800 dark:text-gray-200 mb-1",children:"Share Simple Link"}),(0,c.jsx)("div",{className:"text-xs text-text-secondary dark:text-gray-400",children:"Quick text message with link"})]}),(0,c.jsx)("div",{className:"text-2xl opacity-0 group-hover:opacity-100 transition-opacity dark:text-white",children:"\u2192"})]})})]}),(0,c.jsx)("button",{onClick:()=>N(!1),className:"w-full btn btn-secondary",children:"Cancel"})]})}),(0,c.jsx)("style",{children:"\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes bounce-slow {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out;\n        }\n        .animate-bounce-slow {\n          animation: bounce-slow 2s ease-in-out infinite;\n        }\n      "})]})};var b=a(3319),f=a(8147);const y=[{id:"pink",name:"Pink Dream",gradient:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)"},{id:"purple",name:"Purple Magic",gradient:"linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)"},{id:"blue",name:"Ocean Blue",gradient:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)"},{id:"green",name:"Fresh Green",gradient:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)"},{id:"sunset",name:"Sunset Glow",gradient:"linear-gradient(135deg, #fed7aa 0%, #fca5a5 100%)"},{id:"lavender",name:"Lavender Fields",gradient:"linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)"},{id:"peach",name:"Peachy Keen",gradient:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)"},{id:"mint",name:"Mint Fresh",gradient:"linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%)"}],w=[{id:"none",name:"None",emoji:"\ud83d\udeab",description:"No animation"},{id:"shimmer",name:"Shimmer",emoji:"\u2728",description:"Subtle shimmering effect"},{id:"glow",name:"Glow",emoji:"\ud83c\udf1f",description:"Soft pulsing glow"},{id:"sparkle",name:"Sparkle",emoji:"\ud83d\udcab",description:"Sparkling particles"},{id:"pulse",name:"Pulse",emoji:"\ud83d\udc97",description:"Gentle pulsing"},{id:"rainbow",name:"Rainbow",emoji:"\ud83c\udf08",description:"Rainbow border effect"}],v=e=>{var t,a,n,o,m;let{currentUser:x,userData:h}=e;const g=(0,r.Zp)(),[p,u]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[N,C]=(0,s.useState)(!1),A=(0,s.useRef)(null),S=(null===h||void 0===h||null===(t=h.profile)||void 0===t?void 0:t.backgroundGradient)||y[0].gradient,B=(null===h||void 0===h||null===(a=h.profile)||void 0===a?void 0:a.aura)||"none";return(0,c.jsxs)("div",{id:"profile-card-shareable",className:"card p-8 mb-6 text-center relative overflow-hidden shadow-2xl profile-card-aura-".concat(B),style:{background:S},children:[(0,c.jsxs)("div",{className:"absolute top-4 right-4 color-picker-container flex flex-col gap-2 z-20",children:[(0,c.jsx)("button",{onClick:()=>g("/edit-profile"),className:"w-10 h-10 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all hover:bg-white dark:hover:bg-gray-800 text-xl",title:"Edit profile",children:"\u270f\ufe0f"}),(0,c.jsx)("button",{onClick:()=>k(!j),className:"w-10 h-10 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all hover:bg-white dark:hover:bg-gray-800",title:"Change background color",children:"\ud83c\udfa8"}),(0,c.jsx)("button",{onClick:()=>C(!N),className:"w-10 h-10 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all hover:bg-white dark:hover:bg-gray-800",title:"Change profile aura",children:"\u2728"}),j&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-40",onClick:()=>k(!1)}),(0,c.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border-2 border-gray-200 dark:border-gray-600 p-4 z-50 w-80 max-h-[500px] overflow-y-auto",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h3",{className:"text-lg font-display text-gray-800 dark:text-gray-200",children:"Choose Background"}),(0,c.jsx)("button",{onClick:()=>k(!1),className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-400",children:"\u2715"})]}),(0,c.jsx)("div",{className:"grid grid-cols-2 gap-3",children:y.map(e=>(0,c.jsx)("button",{onClick:()=>(async e=>{try{await(0,l.mZ)((0,l.H9)(i.db,"users",x.uid),{"profile.backgroundGradient":e.gradient}),d.Ay.success("Background changed to ".concat(e.name,"!")),k(!1)}catch(t){console.error("Error updating background:",t),d.Ay.error("Failed to update background")}})(e),className:"h-16 rounded-lg shadow-md hover:scale-105 transition-transform border-2 border-transparent hover:border-primary",style:{background:e.gradient},title:e.name,children:(0,c.jsx)("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 drop-shadow-sm",children:e.name})},e.id))})]})]}),N&&(0,c.jsxs)("div",{className:"aura-picker-container",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 z-40",onClick:()=>C(!1)}),(0,c.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border-2 border-gray-200 dark:border-gray-600 p-4 z-50 w-80 max-h-[500px] overflow-y-auto",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h3",{className:"text-lg font-display text-gray-800 dark:text-gray-200",children:"Choose Profile Aura \u2728"}),(0,c.jsx)("button",{onClick:()=>C(!1),className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-400",children:"\u2715"})]}),(0,c.jsx)("div",{className:"space-y-2",children:w.map(e=>{var t,a;return(0,c.jsx)("button",{onClick:()=>(async e=>{try{await(0,l.mZ)((0,l.H9)(i.db,"users",x.uid),{"profile.aura":e.id}),d.Ay.success("Aura changed to ".concat(e.name,"! ").concat(e.emoji)),C(!1)}catch(t){console.error("Error updating aura:",t),d.Ay.error("Failed to update aura")}})(e),className:"w-full p-3 rounded-lg shadow-md hover:scale-105 transition-transform border-2 text-left ".concat(((null===h||void 0===h||null===(t=h.profile)||void 0===t?void 0:t.aura)||"none")===e.id?"border-primary bg-purple-50 dark:bg-purple-900/30":"border-transparent hover:border-primary bg-gray-50 dark:bg-gray-700"),children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.name}),(0,c.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]}),((null===h||void 0===h||null===(a=h.profile)||void 0===a?void 0:a.aura)||"none")===e.id&&(0,c.jsx)("span",{className:"text-primary",children:"\u2713"})]})},e.id)})})]})]})]}),(0,c.jsxs)("div",{className:"relative inline-block photo-menu-container z-10",children:[(0,c.jsx)("button",{onClick:()=>u(!p),className:"w-36 h-36 bg-gradient-primary rounded-full flex items-center justify-center text-white text-5xl font-display overflow-hidden hover:opacity-90 transition-all hover:scale-105 border-4 border-white shadow-2xl ring-4 ring-purple-200",children:null!==h&&void 0!==h&&h.photoURL?(0,c.jsx)("img",{src:h.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===h||void 0===h||null===(n=h.displayName)||void 0===n?void 0:n[0])||(null===x||void 0===x||null===(o=x.email)||void 0===o?void 0:o[0])||"U"}),p&&(0,c.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border-2 border-gray-200 dark:border-gray-600 p-2 z-30 w-48",children:[(0,c.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-3 py-1",children:"Manage Photo"}),(0,c.jsx)("button",{onClick:()=>{var e;null===(e=A.current)||void 0===e||e.click(),u(!1)},disabled:b,className:"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-sm font-semibold text-gray-700 dark:text-gray-300",children:"\ud83d\udd04 Replace"}),(0,c.jsx)("button",{onClick:async()=>{try{await(0,l.mZ)((0,l.H9)(i.db,"users",x.uid),{photoURL:(null===x||void 0===x?void 0:x.photoURL)||null}),d.Ay.success("Profile picture removed"),u(!1)}catch(e){console.error("Error removing photo:",e),d.Ay.error("Failed to remove photo")}},className:"w-full text-left px-3 py-2 hover:bg-red-50 dark:hover:bg-red-900/30 rounded text-sm font-semibold text-red-600 dark:text-red-400",children:"\u274c Remove"})]}),(0,c.jsx)("input",{ref:A,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)d.Ay.error("Photo must be less than 5MB");else{v(!0);try{const e=(0,f.KR)(i.IG,"profile-pictures/".concat(x.uid,"/").concat(Date.now(),"_").concat(t.name));await(0,f.D)(e,t);const a=await(0,f.qk)(e);await(0,l.mZ)((0,l.H9)(i.db,"users",x.uid),{photoURL:a}),d.Ay.success("Profile picture updated!"),u(!1)}catch(a){console.error("Error uploading photo:",a),d.Ay.error("Failed to upload photo")}finally{v(!1)}}},className:"hidden"})]}),(0,c.jsx)("h1",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3 mt-4",children:(null===h||void 0===h?void 0:h.displayName)||"User"}),(null===h||void 0===h||null===(m=h.profile)||void 0===m?void 0:m.bio)&&(0,c.jsxs)("p",{className:"text-gray-800 dark:text-gray-200 italic max-w-md mx-auto mt-4 text-lg",children:['"',h.profile.bio,'"']}),(0,c.jsxs)("div",{className:"mt-6 relative z-10",children:[(0,c.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 font-semibold",children:"Share your profile:"}),(0,c.jsxs)("div",{className:"flex gap-2 justify-center flex-wrap",children:[(0,c.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(x.uid),t="Come be my bestie on Besties! \ud83d\udc9c";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(window.location.href="fb://profile/".concat(x.uid),setTimeout(()=>{window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e),"&quote=").concat(encodeURIComponent(t)),"_blank")},1500)):window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e),"&quote=").concat(encodeURIComponent(t)),"_blank")},className:"w-8 h-8 rounded-full bg-[#1877f2] hover:bg-[#1864d9] text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110",title:"Share on Facebook",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,c.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(x.uid),t="Come be my bestie on Besties! \ud83d\udc9c";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(window.location.href="twitter://post?message=".concat(encodeURIComponent(t+" "+e)),setTimeout(()=>{window.open("https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(e),"&text=").concat(encodeURIComponent(t)),"_blank")},1500)):window.open("https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(e),"&text=").concat(encodeURIComponent(t)),"_blank")},className:"w-8 h-8 rounded-full bg-black hover:bg-gray-800 text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110",title:"Share on X (Twitter)",children:(0,c.jsx)("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),(0,c.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(x.uid),t="Come be my bestie on Besties! \ud83d\udc9c";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(window.location.href="whatsapp://send?text=".concat(encodeURIComponent(t+" "+e)),setTimeout(()=>{window.open("https://wa.me/?text=".concat(encodeURIComponent(t+" "+e)),"_blank")},1500)):window.open("https://wa.me/?text=".concat(encodeURIComponent(t+" "+e)),"_blank")},className:"w-8 h-8 rounded-full bg-[#25d366] hover:bg-[#20bd5a] text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110",title:"Share on WhatsApp",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),(0,c.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(x.uid);navigator.clipboard.writeText(e),d.Ay.success("Profile link copied! Share it on Instagram \ud83d\udc9c")},className:"w-8 h-8 rounded-full bg-gradient-to-tr from-[#f09433] via-[#e6683c] to-[#bc1888] hover:opacity-90 text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110",title:"Copy link for Instagram",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),(0,c.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(x.uid);navigator.clipboard.writeText(e),d.Ay.success("Profile link copied to clipboard!")},className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-700 text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110",title:"Copy link",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})},j=e=>{let{profileCompletion:t,animatedProgress:a,onTaskNavigation:s}=e;return t.percentage>=100?null:(0,c.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-2 border-purple-100 dark:border-gray-600",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h2",{className:"text-xl font-display text-gradient",children:"Profile Completion \u2728"}),(0,c.jsxs)("span",{className:"text-2xl font-bold text-gradient",children:[t.completed,"/",t.total]})]}),(0,c.jsxs)("div",{className:"w-full h-4 bg-white dark:bg-gray-700 rounded-full overflow-hidden mb-4 shadow-inner relative",children:[(0,c.jsx)("div",{className:"h-full ".concat((r=t.percentage,100===r?"bg-green-500":r>=60?"bg-yellow-500":"bg-red-500")," transition-all duration-1000 ease-out relative overflow-hidden"),style:{width:"".concat(a,"%")},children:(0,c.jsx)("div",{className:"absolute inset-0 shimmer-effect"})}),(0,c.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,c.jsxs)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 drop-shadow-sm",children:[Math.round(t.percentage),"%"]})})]}),(0,c.jsx)("div",{className:"space-y-2",children:t.tasks.map((e,t)=>(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,c.jsx)("span",{className:"text-lg",children:e.completed?"\u2705":"\u2b55"}),(0,c.jsx)("span",{className:"text-sm ".concat(e.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-700 dark:text-gray-300 font-semibold"),children:e.name})]}),!e.completed&&(e.path||e.action)&&(0,c.jsx)("button",{onClick:()=>s(e),className:"btn btn-sm btn-primary text-xs px-3 py-1",children:"Go \u2192"})]},t))}),(0,c.jsx)("style",{children:"\n        @keyframes shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n        .shimmer-effect {\n          background: linear-gradient(\n            90deg,\n            transparent,\n            rgba(255, 255, 255, 0.4),\n            transparent\n          );\n          animation: shimmer 2s infinite;\n        }\n      "})]});var r},k=e=>{var t;let{weeklySummary:a,hasWeekOfActivity:s,userData:r,bestiesCount:n}=e;return(0,c.jsxs)("div",{className:"card p-6 mb-6",children:[(0,c.jsx)("h2",{className:"text-xl font-display text-gray-800 dark:text-gray-200 mb-4",children:"Weekly Summary"}),(0,c.jsx)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/30 dark:to-purple-900/30 rounded-xl p-4",children:(0,c.jsxs)("div",{className:"flex items-start gap-3",children:[(0,c.jsx)("span",{className:"text-4xl",children:a.emoji}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h3",{className:"font-semibold text-lg text-gray-800 dark:text-gray-200 mb-1",children:a.message}),(0,c.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["\ud83d\udca1 ",a.tip]}),s&&(0,c.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"font-semibold text-primary",children:(null===r||void 0===r||null===(t=r.stats)||void 0===t?void 0:t.totalCheckIns)||0}),(0,c.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:" check-ins"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"font-semibold text-secondary",children:n}),(0,c.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:" besties"})]})]})]})]})})]})};var N=a(3845);const C=e=>{let{loginStreak:t}=e;return t<=0?null:(0,c.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/30 dark:to-red-900/30",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-xl font-display text-gray-800 dark:text-gray-200 mb-1",children:"Daily Login Streak"}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Keep it going! \ud83d\udcaa"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-5xl mb-1",children:"\ud83d\udd25"}),(0,c.jsx)("div",{className:"text-3xl font-display text-orange-600 dark:text-orange-400",children:(0,c.jsx)(N.A,{end:t,duration:1500})}),(0,c.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"days"})]})]})})},A=e=>{let{currentUser:t,badges:a,featuredBadgeIds:n,setFeaturedBadgeIds:o,setConfettiTrigger:m}=e;const x=(0,r.Zp)(),[h,g]=(0,s.useState)(!1),p=a.filter(e=>n.includes(e.id)),u=a.filter(e=>!n.includes(e.id)),b=[...p,...u];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"mb-6 relative",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,c.jsx)("h2",{className:"text-2xl font-display text-gray-800 dark:text-gray-200",children:"Your Badges"}),(0,c.jsx)("button",{onClick:()=>x("/badges"),className:"text-primary font-semibold hover:underline text-sm",children:"View All \u2192"})]}),(0,c.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:[n.length>0?"\u2b50 ".concat(n.length," featured badge").concat(n.length>1?"s":""," shown first \u2022 "):"",(0,c.jsx)("button",{onClick:()=>g(!0),className:"text-primary hover:underline",children:"Choose your top 3 to feature"})]}),b.length>0?(0,c.jsxs)(c.Fragment,{children:[p.length>0&&(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:p.map(e=>(0,c.jsxs)("div",{className:"card p-4 text-center transition-all bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 border-2 border-yellow-400 dark:border-yellow-600 shadow-lg",children:[(0,c.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,c.jsx)("div",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:e.name}),(0,c.jsx)("div",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"\u2b50 Featured"})]},e.id))})}),u.length>0&&(0,c.jsx)("div",{children:u.length>6?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Scroll to see all badges \u2192"}),(0,c.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:u.map(e=>(0,c.jsxs)("div",{className:"card p-4 text-center transition-all bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-700 flex-shrink-0 w-32",children:[(0,c.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,c.jsx)("div",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:e.name})]},e.id))})]}):(0,c.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(e=>(0,c.jsxs)("div",{className:"card p-4 text-center transition-all bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-700",children:[(0,c.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,c.jsx)("div",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:e.name})]},e.id))})})]}):(0,c.jsxs)("div",{className:"card p-8 text-center",children:[(0,c.jsx)("div",{className:"text-5xl mb-3",children:"\ud83c\udfc6"}),(0,c.jsx)("p",{className:"text-gray-800 dark:text-gray-200 font-semibold mb-2",children:"Start earning badges!"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Complete check-ins, invite friends, and stay safe to unlock achievements"}),(0,c.jsx)("button",{onClick:()=>x("/badges"),className:"btn btn-primary text-sm",children:"See All Available Badges"})]})]}),h&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h2",{className:"text-2xl font-display text-gray-800 dark:text-gray-200",children:"Choose Featured Badges"}),(0,c.jsx)("button",{onClick:()=>g(!1),className:"w-8 h-8 rounded-full bg-red-500 text-white hover:bg-red-600 flex items-center justify-center text-xl font-bold transition-colors",title:"Close",children:"\xd7"})]}),(0,c.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Select up to 3 badges to showcase on your profile (",n.length,"/3 selected)"]}),a.length>0?(0,c.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:a.map(e=>{const a=n.includes(e.id);return(0,c.jsxs)("button",{onClick:()=>(async e=>{let a=[...n];if(a.includes(e))a=a.filter(t=>t!==e);else{if(a.length>=3)return void d.Ay.error("You can only feature up to 3 badges");a.push(e),m(!0),setTimeout(()=>m(!1),100)}try{await(0,l.mZ)((0,l.H9)(i.db,"users",t.uid),{featuredBadges:a}),o(a),d.Ay.success("Featured badges updated!")}catch(s){console.error("Error updating featured badges:",s),d.Ay.error("Failed to update badges")}})(e.id),className:"p-4 rounded-xl text-center transition-all ".concat(a?"bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 border-2 border-primary shadow-lg scale-105":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-2 border-transparent"),children:[(0,c.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,c.jsx)("div",{className:"font-semibold text-xs text-gray-800 dark:text-gray-200",children:e.name}),a&&(0,c.jsx)("div",{className:"text-xs text-primary mt-1",children:"\u2713 Featured"})]},e.id)})}):(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)("div",{className:"text-5xl mb-3",children:"\ud83c\udfc6"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No badges yet! Complete tasks to earn them."})]}),(0,c.jsx)("div",{className:"mt-6 flex justify-center",children:(0,c.jsx)("button",{onClick:()=>x("/badges"),className:"btn btn-primary",children:"See How to Earn Badges \u2192"})})]})}),(0,c.jsx)("style",{children:"\n        /* Hide scrollbar for horizontal badge scroll */\n        .scrollbar-hide {\n          -ms-overflow-style: none;  /* IE and Edge */\n          scrollbar-width: none;  /* Firefox */\n        }\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;  /* Chrome, Safari, Opera */\n        }\n      "})]})},S=e=>{var t;let{bestiesCount:a,emergencyContactCount:s,daysActive:r,userData:n,badges:i,loginStreak:l,nighttimeCheckIns:o,weekendCheckIns:d}=e;return(0,c.jsxs)("div",{className:"card p-8 mb-6 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 dark:from-purple-900/30 dark:via-pink-900/30 dark:to-orange-900/30",children:[(0,c.jsx)("h2",{className:"text-3xl font-display text-gradient mb-6 text-center",children:"Your Impact \u2728"}),(0,c.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udc9c"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:a,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Besties"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udee1\ufe0f"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:s,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Times Selected"}),(0,c.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"as Emergency Contact"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udcc5"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:r,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Days Active"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\u2705"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:(null===n||void 0===n||null===(t=n.stats)||void 0===t?void 0:t.completedCheckIns)||0,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Safe Check-ins"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udfc6"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:i.length,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Badges Earned"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udd25"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:l,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Day Streak"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udf19"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:o,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Night Check-ins"}),(0,c.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"9 PM - 6 AM"})]})]}),(0,c.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udf89"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-2",children:(0,c.jsx)(N.A,{end:d,duration:1500})}),(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Weekend Check-ins"}),(0,c.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sat & Sun"})]})]})]})]})},B=e=>{var t;let{userData:a}=e;return null!==a&&void 0!==a&&null!==(t=a.donationStats)&&void 0!==t&&t.isActive?(0,c.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,c.jsx)("h3",{className:"font-display text-xl mb-2",children:"\ud83d\udc9c Thank You!"}),(0,c.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free for everyone"}),(0,c.jsxs)("div",{className:"text-2xl font-display",children:["$",(0,c.jsx)(N.A,{end:a.donationStats.totalDonated,duration:2e3})," donated"]})]}):null},F=()=>(0,c.jsx)("style",{children:"\n      /* Aura Animations */\n      @keyframes aura-shimmer {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.7; }\n      }\n      @keyframes aura-glow {\n        0%, 100% {\n          box-shadow: 0 0 20px rgba(219, 39, 119, 0.3), 0 0 40px rgba(139, 92, 246, 0.2);\n        }\n        50% {\n          box-shadow: 0 0 40px rgba(219, 39, 119, 0.5), 0 0 80px rgba(139, 92, 246, 0.4);\n        }\n      }\n      @keyframes aura-pulse {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.02); }\n      }\n      @keyframes rainbow-border {\n        0% { border-color: #ff0000; }\n        16% { border-color: #ff7f00; }\n        33% { border-color: #ffff00; }\n        50% { border-color: #00ff00; }\n        66% { border-color: #0000ff; }\n        83% { border-color: #8b00ff; }\n        100% { border-color: #ff0000; }\n      }\n      @keyframes sparkle {\n        0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n        50% { opacity: 1; transform: scale(1) rotate(180deg); }\n      }\n\n      /* Aura Classes */\n      .profile-card-aura-shimmer::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: -100%;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n        animation: shimmer 3s infinite;\n        pointer-events: none;\n      }\n\n      .profile-card-aura-glow {\n        animation: aura-glow 3s ease-in-out infinite;\n      }\n\n      .profile-card-aura-pulse {\n        animation: aura-pulse 2s ease-in-out infinite;\n      }\n\n      .profile-card-aura-rainbow {\n        border: 4px solid;\n        animation: rainbow-border 6s linear infinite;\n      }\n\n      .profile-card-aura-sparkle::after {\n        content: '\u2728';\n        position: absolute;\n        top: 10%;\n        right: 10%;\n        font-size: 2rem;\n        animation: sparkle 2s ease-in-out infinite;\n        pointer-events: none;\n      }\n    "}),I=()=>{const{currentUser:e,userData:t}=(0,n.As)(),a=(0,r.Zp)(),[d,m]=(0,s.useState)([]),[x,g]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),[y,w]=(0,s.useState)([]),[N,I]=(0,s.useState)(0),[z,M]=(0,s.useState)(!1),[U,D]=(0,s.useState)(0),[R,P]=(0,s.useState)(null),[L,_]=(0,s.useState)(0),[T,H]=(0,s.useState)(0),[E,q]=(0,s.useState)(0);(0,s.useEffect)(()=>{G()},[e]),(0,s.useEffect)(()=>{const e=Y().percentage;q(e)},[t,N,e]);const G=async()=>{if(e)try{const t=await(0,l.x7)((0,l.H9)(i.db,"badges",e.uid));if(t.exists()){const e=t.data().badges||[];m(e)}const a=await(0,l.x7)((0,l.H9)(i.db,"users",e.uid));if(a.exists()){const e=a.data();w(e.featuredBadges||[])}const s=(0,l.P)((0,l.rJ)(i.db,"besties"),(0,l._M)("requesterId","==",e.uid),(0,l._M)("status","==","accepted")),r=(0,l.P)((0,l.rJ)(i.db,"besties"),(0,l._M)("recipientId","==",e.uid),(0,l._M)("status","==","accepted")),[n,o]=await Promise.all([(0,l.GG)(s),(0,l.GG)(r)]);I(n.size+o.size);const d=(0,l.P)((0,l.rJ)(i.db,"checkins"),(0,l._M)("selectedBesties","array-contains",e.uid)),c=await(0,l.GG)(d);D(c.size);const x=(0,l.P)((0,l.rJ)(i.db,"checkins"),(0,l._M)("userId","==",e.uid)),h=await(0,l.GG)(x);if(!h.empty){let e=null,t=0,a=0;h.forEach(s=>{var r;const n=null===(r=s.data().createdAt)||void 0===r?void 0:r.toDate();if(n){(!e||n<e)&&(e=n);const s=n.getHours();(s>=21||s<6)&&t++;const r=n.getDay();0!==r&&6!==r||a++}}),P(e),_(t),H(a)}g(!1)}catch(t){console.error("Error loading data:",t),g(!1)}},Y=()=>{var a;const s=[];let r=0;null!==e&&void 0!==e&&e.email?(s.push({name:"Add email",completed:!0,path:null,section:null}),r++):s.push({name:"Add email",completed:!1,path:"/settings",section:"account"}),null!==t&&void 0!==t&&t.phoneNumber?(s.push({name:"Add phone number",completed:!0,path:null,section:null}),r++):s.push({name:"Add phone number",completed:!1,path:"/edit-profile",section:"phone"}),null!==t&&void 0!==t&&t.photoURL?(s.push({name:"Upload profile photo",completed:!0,path:null,section:null}),r++):s.push({name:"Upload profile photo",completed:!1,path:null,section:"photo",action:"scrollToPhoto"}),null!==t&&void 0!==t&&null!==(a=t.profile)&&void 0!==a&&a.bio?(s.push({name:"Write a bio",completed:!0,path:null,section:null}),r++):s.push({name:"Write a bio",completed:!1,path:"/edit-profile",section:"bio"}),N>=5?(s.push({name:"Add 5 besties",completed:!0,path:null,section:null}),r++):s.push({name:"Add 5 besties (".concat(N,"/5)"),completed:!1,path:null,section:null,action:"scrollToBestieCircle"});return{tasks:s,percentage:r/s.length*100,completed:r,total:s.length}},W=()=>{if(!R)return!1;const e=new Date;return e.setDate(e.getDate()-7),R<=e},V=Y(),Z=(()=>{var e,a;if(!W())return{status:"new",emoji:"\ud83c\udf31",message:"Building your safety journey",tip:"You'll get your weekly summary after you have one week of activity!"};const s=(null===t||void 0===t||null===(e=t.stats)||void 0===e?void 0:e.totalCheckIns)||0,r=(null===t||void 0===t||null===(a=t.stats)||void 0===a?void 0:a.totalBesties)||0;return s>=7&&r>=3?{status:"excellent",emoji:"\ud83c\udf1f",message:"You're absolutely crushing it this week!",tip:"Keep up the amazing safety habits!"}:s>=3||r>=3?{status:"good",emoji:"\ud83d\udcaa",message:"You're doing great! Keep it up!",tip:"Try to check in regularly and add more besties."}:{status:"needsWork",emoji:"\ud83d\udc9c",message:"Let's build your safety network!",tip:"Start by adding your closest friends as besties."}})(),J=(null===t||void 0===t?void 0:t.loginStreak)||0;return x?(0,c.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,c.jsx)(o.A,{}),(0,c.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,c.jsx)("div",{className:"spinner"})})]}):(0,c.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,c.jsx)(o.A,{}),(0,c.jsx)(b.A,{trigger:z,type:"badge"}),(0,c.jsx)(F,{}),(0,c.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,c.jsx)(v,{currentUser:e,userData:t}),(0,c.jsx)(j,{profileCompletion:V,animatedProgress:E,onTaskNavigation:e=>{if("scrollToPhoto"===e.action){const e=document.querySelector(".photo-menu-container");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}else if("scrollToBestieCircle"===e.action){const e=document.querySelector(".bestie-circle-section");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}else e.path&&(e.section?a("".concat(e.path,"#").concat(e.section)):a(e.path))}}),(0,c.jsx)(k,{weeklySummary:Z,hasWeekOfActivity:W(),userData:t,bestiesCount:N}),(0,c.jsx)(C,{loginStreak:J}),(0,c.jsx)(A,{currentUser:e,badges:d,featuredBadgeIds:y,setFeaturedBadgeIds:w,setConfettiTrigger:M}),(0,c.jsx)(S,{bestiesCount:N,emergencyContactCount:U,daysActive:(()=>{if(!R)return 0;const e=new Date,t=Math.abs(e-R);return Math.ceil(t/864e5)})(),userData:t,badges:d,loginStreak:J,nighttimeCheckIns:L,weekendCheckIns:T}),(0,c.jsxs)("div",{className:"mb-6 bestie-circle-section",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h2",{className:"text-2xl font-display text-gray-800 dark:text-gray-200",children:"Your Bestie Circle"}),(0,c.jsx)("button",{onClick:()=>a("/besties"),className:"text-primary font-semibold hover:underline",children:"Manage \u2192"})]}),(0,c.jsx)(h,{userId:null===e||void 0===e?void 0:e.uid,onAddClick:()=>a("/besties")})]}),(0,c.jsx)(B,{userData:t}),(0,c.jsx)("div",{className:"space-y-3",children:(0,c.jsx)("button",{onClick:()=>a("/settings"),className:"w-full btn btn-secondary",children:"\u2699\ufe0f Settings"})})]}),p&&(0,c.jsx)(u,{onClose:()=>f(!1)})]})}},3319:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(2555),r=a(5043),n=a(8838);const i=e=>{let{trigger:t=!1,type:a="default"}=e;return(0,r.useEffect)(()=>{if(!t)return;(()=>{if("badge"===a){const e=200,t={origin:{y:.7},shapes:["circle","square"],colors:["#FF69B4","#DDA0DD","#FFB6C1","#FFC0CB","#FF1493"]};function r(a,r){(0,n.A)((0,s.A)((0,s.A)((0,s.A)({},t),r),{},{particleCount:Math.floor(e*a)}))}r(.25,{spread:26,startVelocity:55}),r(.2,{spread:60}),r(.35,{spread:100,decay:.91,scalar:.8}),r(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),r(.1,{spread:120,startVelocity:45})}else"milestone"===a?((0,n.A)({particleCount:150,spread:70,origin:{y:.6},colors:["#FF69B4","#DDA0DD","#FFB6C1","#87CEEB","#98FB98"]}),setTimeout(()=>{(0,n.A)({particleCount:100,angle:60,spread:55,origin:{x:0},colors:["#FF69B4","#DDA0DD","#FFB6C1"]})},200),setTimeout(()=>{(0,n.A)({particleCount:100,angle:120,spread:55,origin:{x:1},colors:["#87CEEB","#98FB98","#FFB6C1"]})},400)):(0,n.A)({particleCount:100,spread:70,origin:{y:.6},colors:["#FF69B4","#DDA0DD","#FFB6C1","#FFC0CB","#FF1493"]})})()},[t,a]),null}},3845:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(579);const r=e=>{let{end:t,duration:a=1e3,suffix:r="",prefix:n="",className:i=""}=e;const l=parseInt(t)||0;return(0,s.jsxs)("span",{className:i,children:[n,l.toLocaleString(),r]})}}}]);
//# sourceMappingURL=45.487fc985.chunk.js.map