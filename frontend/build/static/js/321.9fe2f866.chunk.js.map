{"version":3,"file":"static/js/321.9fe2f866.chunk.js","mappings":"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","sources":["pages/ViewUserProfilePage.jsx","components/CountUp.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db } from '../services/firebase';\nimport { doc, getDoc, collection, query, where, getDocs, orderBy, limit } from 'firebase/firestore';\nimport Header from '../components/Header';\nimport CountUp from '../components/CountUp';\nimport toast from 'react-hot-toast';\n\nconst ViewUserProfilePage = () => {\n  const { userId } = useParams();\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [badges, setBadges] = useState([]);\n  const [recentCheckIns, setRecentCheckIns] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [, setIsBestie] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    loadUserProfile();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId, currentUser]);\n\n  const loadUserProfile = async () => {\n    if (!userId || !currentUser) return;\n\n    // Can't view your own profile this way, redirect to /profile\n    if (userId === currentUser.uid) {\n      navigate('/profile');\n      return;\n    }\n\n    try {\n      // Check if they're a bestie (bidirectional check)\n      // We check both directions because a bestie relationship in Firestore can be stored\n      // with either user as requester or recipient. A relationship exists if found in either direction.\n      const [requesterQuery, recipientQuery] = await Promise.all([\n        getDocs(\n          query(\n            collection(db, 'besties'),\n            where('requesterId', '==', currentUser.uid),\n            where('recipientId', '==', userId),\n            where('status', '==', 'accepted')\n          )\n        ),\n        getDocs(\n          query(\n            collection(db, 'besties'),\n            where('requesterId', '==', userId),\n            where('recipientId', '==', currentUser.uid),\n            where('status', '==', 'accepted')\n          )\n        ),\n      ]);\n\n      const isUserBestie = !requesterQuery.empty || !recipientQuery.empty;\n      setIsBestie(isUserBestie);\n\n      if (!isUserBestie) {\n        setError('Only besties can view profiles');\n        setLoading(false);\n        return;\n      }\n\n      // Load user data\n      const userDoc = await getDoc(doc(db, 'users', userId));\n      if (!userDoc.exists()) {\n        setError('User not found');\n        setLoading(false);\n        return;\n      }\n\n      const userData = { id: userDoc.id, ...userDoc.data() };\n      setUser(userData);\n\n      // Load badges (public)\n      const badgesDoc = await getDoc(doc(db, 'badges', userId));\n      if (badgesDoc.exists()) {\n        setBadges(badgesDoc.data().badges || []);\n      }\n\n      // Load recent check-ins if privacy allows (last 7 days)\n      const showCheckIns = userData?.privacySettings?.showCheckInsToBesties !== false; // default true\n      if (showCheckIns) {\n        const sevenDaysAgo = new Date();\n        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n\n        const checkInsQuery = query(\n          collection(db, 'checkins'),\n          where('userId', '==', userId),\n          where('createdAt', '>=', sevenDaysAgo),\n          orderBy('createdAt', 'desc'),\n          limit(20)\n        );\n\n        const checkInsSnapshot = await getDocs(checkInsQuery);\n        const checkInsData = checkInsSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setRecentCheckIns(checkInsData);\n      }\n\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading user profile:', error);\n      setError('Failed to load profile');\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n          <div className=\"card p-12 text-center\">\n            <div className=\"text-6xl mb-4\">üîí</div>\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">{error}</h2>\n            <p className=\"text-text-secondary mb-6\">\n              You can only view profiles of your accepted besties\n            </p>\n            <button onClick={() => navigate('/besties')} className=\"btn btn-primary\">\n              Manage Besties\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const featuredBadges = user?.featuredBadges\n    ? badges.filter(b => user.featuredBadges.includes(b.id)).slice(0, 3)\n    : badges.slice(0, 3);\n\n  const showStats = user?.privacySettings?.showStatsToBesties !== false; // default true\n  const showCheckIns = user?.privacySettings?.showCheckInsToBesties !== false; // default true\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-24 md:pb-6\">\n        {/* Profile Header - ENHANCED */}\n        <div\n          className={`card p-8 mb-6 text-center relative overflow-hidden shadow-2xl profile-card-aura-${user?.profile?.aura || 'none'}`}\n          style={{ background: user?.profile?.backgroundGradient || 'linear-gradient(135deg, #fce7f3 0%, #fbcfe8 50%, #ddd6fe 100%)' }}\n        >\n          {/* Floating decorative elements */}\n          <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n            <div className=\"absolute top-6 left-6 text-3xl animate-float opacity-40\">üíñ</div>\n            <div className=\"absolute top-10 right-8 text-2xl animate-float delay-1s opacity-40\">‚ú®</div>\n            <div className=\"absolute bottom-10 left-10 text-2xl animate-float delay-2s opacity-40\">üå∏</div>\n            <div className=\"absolute bottom-6 right-6 text-3xl animate-float delay-3s opacity-40\">üí´</div>\n          </div>\n\n          <div className=\"relative z-10\">\n            <div className=\"w-36 h-36 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-5xl font-display overflow-hidden border-4 border-white shadow-2xl ring-4 ring-purple-200\">\n              {user?.photoURL ? (\n                <img src={user.photoURL} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n              ) : (\n                user?.displayName?.[0] || 'U'\n              )}\n            </div>\n\n            <h1 className=\"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3\">\n              {user?.displayName || 'User'}\n            </h1>\n\n            <div className=\"flex items-center justify-center gap-2 mb-4 flex-wrap\">\n              <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-primary rounded-full text-sm font-semibold shadow-lg\">\n                <span>üíú</span>\n                <span>Your Bestie</span>\n              </div>\n              {user?.requestAttention?.active && (\n                <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-full text-sm font-semibold shadow-lg animate-pulse\">\n                  <span>üí¨</span>\n                  <span>{user.requestAttention.tag}</span>\n                </div>\n              )}\n            </div>\n\n            {user?.profile?.bio && (\n              <p className=\"text-gray-800 italic max-w-md mx-auto mt-4 text-lg\">\n                \"{user.profile.bio}\"\n              </p>\n            )}\n\n            {/* Quick Actions */}\n            <div className=\"flex items-center justify-center gap-3 mt-6 flex-wrap\">\n              <button\n                onClick={() => {\n                  const phone = user?.phoneNumber || user?.phone;\n                  if (phone) {\n                    window.location.href = `sms:${phone}`;\n                  } else {\n                    toast.error('No phone number available');\n                  }\n                }}\n                className=\"bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2\"\n              >\n                <span>üí¨</span>\n                <span>Send Message</span>\n              </button>\n              <button\n                onClick={() => {\n                  const phone = user?.phoneNumber || user?.phone;\n                  if (phone) {\n                    window.location.href = `tel:${phone}`;\n                  } else {\n                    toast.error('No phone number available');\n                  }\n                }}\n                className=\"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2\"\n              >\n                <span>üìû</span>\n                <span>Call</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Section - Visible to Besties */}\n        {showStats ? (\n          <div className=\"card p-6 mb-6\">\n            <h2 className=\"text-2xl font-display text-text-primary mb-4\">Stats</h2>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              {/* Completed Check-ins */}\n              <div className=\"text-center p-5 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl\">\n                <div className=\"text-4xl font-display text-pink-700 mb-1\">\n                  <CountUp end={user?.stats?.completedCheckIns || 0} duration={1500} />\n                </div>\n                <div className=\"text-sm text-gray-700 font-semibold\">Completed Check-ins</div>\n              </div>\n\n              {/* Total Check-ins */}\n              <div className=\"text-center p-5 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl\">\n                <div className=\"text-4xl font-display text-blue-700 mb-1\">\n                  <CountUp end={user?.stats?.totalCheckIns || 0} duration={1500} />\n                </div>\n                <div className=\"text-sm text-gray-700 font-semibold\">Total Check-ins</div>\n              </div>\n\n              {/* Total Besties */}\n              <div className=\"text-center p-5 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl\">\n                <div className=\"text-4xl font-display text-purple-700 mb-1\">\n                  <CountUp end={user?.stats?.totalBesties || 0} duration={1500} />\n                </div>\n                <div className=\"text-sm text-gray-700 font-semibold\">Total Besties</div>\n              </div>\n\n              {/* Badges Earned */}\n              <div className=\"text-center p-5 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl\">\n                <div className=\"text-4xl font-display text-yellow-700 mb-1\">\n                  <CountUp end={badges.length} duration={1500} />\n                </div>\n                <div className=\"text-sm text-gray-700 font-semibold\">Badges Earned</div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"card p-6 mb-6 bg-gray-50 text-center\">\n            <div className=\"text-4xl mb-2\">üîí</div>\n            <p className=\"text-text-secondary\">\n              Stats are private\n            </p>\n          </div>\n        )}\n\n        {/* Recent Check-Ins (Last 7 Days) */}\n        {showCheckIns ? (\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-display text-text-primary mb-4\">\n              Recent Check-ins (Last 7 Days)\n            </h2>\n\n            {recentCheckIns.length > 0 ? (\n              <div className=\"space-y-3\">\n                {recentCheckIns.map((checkIn) => (\n                  <div key={checkIn.id} className=\"card p-4\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"text-3xl\">{checkIn.activity?.emoji || 'üìç'}</div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-text-primary\">\n                          {checkIn.activity?.name || checkIn.activityName || 'Check-in'}\n                        </h3>\n                        <p className=\"text-sm text-text-secondary\">\n                          {checkIn.createdAt?.toDate().toLocaleDateString()} at{' '}\n                          {checkIn.createdAt?.toDate().toLocaleTimeString([], {\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          })}\n                        </p>\n                        {checkIn.location?.address && (\n                          <p className=\"text-sm text-text-secondary mt-1\">\n                            üìç {checkIn.location.address}\n                          </p>\n                        )}\n                        {checkIn.duration && (\n                          <p className=\"text-sm text-text-secondary\">\n                            ‚è±Ô∏è {checkIn.duration} minutes\n                          </p>\n                        )}\n                      </div>\n                      <div className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                        checkIn.status === 'completed'\n                          ? 'bg-green-100 text-green-700'\n                          : checkIn.status === 'alerted'\n                          ? 'bg-red-100 text-red-700'\n                          : 'bg-blue-100 text-blue-700'\n                      }`}>\n                        {checkIn.status === 'completed' && '‚úì Safe'}\n                        {checkIn.status === 'alerted' && '‚ö†Ô∏è Alert Sent'}\n                        {checkIn.status === 'active' && 'üîî Active'}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"card p-8 text-center\">\n                <div className=\"text-4xl mb-2\">üìÖ</div>\n                <p className=\"text-text-secondary\">No check-ins in the last 7 days</p>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"card p-6 mb-6 bg-gray-50 text-center\">\n            <div className=\"text-4xl mb-2\">üîí</div>\n            <p className=\"text-text-secondary\">\n              Check-in history is private\n            </p>\n          </div>\n        )}\n\n        {/* Featured Badges */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-display text-text-primary mb-4\">Featured Badges</h2>\n\n          {featuredBadges.length > 0 ? (\n            <div className=\"grid grid-cols-3 gap-4\">\n              {featuredBadges.map((badge, index) => (\n                <div key={index} className=\"card p-4 text-center bg-gradient-to-br from-yellow-50 to-orange-50\">\n                  <div className=\"text-4xl mb-2\">{badge.icon || 'üèÜ'}</div>\n                  <div className=\"font-semibold text-sm text-text-primary\">\n                    {badge.name || badge}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"card p-8 text-center\">\n              <div className=\"text-4xl mb-2\">üèÜ</div>\n              <p className=\"text-text-secondary\">No featured badges</p>\n            </div>\n          )}\n\n          {badges.length > 3 && (\n            <p className=\"text-center text-text-secondary text-sm mt-3\">\n              + {badges.length - 3} more badges\n            </p>\n          )}\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"space-y-3\">\n          <button\n            onClick={() => navigate('/besties')}\n            className=\"w-full btn btn-secondary\"\n          >\n            ‚Üê Back to Besties\n          </button>\n        </div>\n      </div>\n\n      {/* Aura Animations CSS */}\n      <style>{`\n        /* Aura Animations */\n        @keyframes aura-shimmer {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n        @keyframes aura-glow {\n          0%, 100% {\n            box-shadow: 0 0 20px rgba(219, 39, 119, 0.3), 0 0 40px rgba(139, 92, 246, 0.2);\n          }\n          50% {\n            box-shadow: 0 0 40px rgba(219, 39, 119, 0.5), 0 0 80px rgba(139, 92, 246, 0.4);\n          }\n        }\n        @keyframes aura-pulse {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.02); }\n        }\n        @keyframes rainbow-border {\n          0% { border-color: #ff0000; }\n          16% { border-color: #ff7f00; }\n          33% { border-color: #ffff00; }\n          50% { border-color: #00ff00; }\n          66% { border-color: #0000ff; }\n          83% { border-color: #8b00ff; }\n          100% { border-color: #ff0000; }\n        }\n        @keyframes sparkle {\n          0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n          50% { opacity: 1; transform: scale(1) rotate(180deg); }\n        }\n        @keyframes shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n\n        /* Aura Classes */\n        .profile-card-aura-shimmer::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n          animation: shimmer 3s infinite;\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .profile-card-aura-glow {\n          animation: aura-glow 3s ease-in-out infinite;\n        }\n\n        .profile-card-aura-pulse {\n          animation: aura-pulse 2s ease-in-out infinite;\n        }\n\n        .profile-card-aura-rainbow {\n          border: 4px solid;\n          animation: rainbow-border 6s linear infinite;\n        }\n\n        .profile-card-aura-sparkle::after {\n          content: '‚ú®';\n          position: absolute;\n          top: 10%;\n          right: 10%;\n          font-size: 2rem;\n          animation: sparkle 2s ease-in-out infinite;\n          pointer-events: none;\n          z-index: 1;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default ViewUserProfilePage;\n","const CountUp = ({ end, duration = 1000, suffix = '', prefix = '', className = '' }) => {\n  // Display value directly without animation\n  const value = parseInt(end) || 0;\n\n  return (\n    <span className={className}>\n      {prefix}{value.toLocaleString()}{suffix}\n    </span>\n  );\n};\n\nexport default CountUp;\n"],"names":["ViewUserProfilePage","_user$privacySettings","_user$privacySettings2","_user$profile","_user$profile2","_user$displayName","_user$requestAttentio","_user$profile3","_user$stats","_user$stats2","_user$stats3","userId","useParams","currentUser","useAuth","navigate","useNavigate","user","setUser","useState","badges","setBadges","recentCheckIns","setRecentCheckIns","loading","setLoading","setIsBestie","error","setError","useEffect","loadUserProfile","async","uid","_userData$privacySett","requesterQuery","recipientQuery","Promise","all","getDocs","query","collection","db","where","isUserBestie","empty","userDoc","getDoc","doc","exists","userData","_objectSpread","id","data","badgesDoc","privacySettings","showCheckInsToBesties","sevenDaysAgo","Date","setDate","getDate","checkInsQuery","orderBy","limit","checkInsData","docs","map","console","_jsxs","className","children","_jsx","Header","onClick","featuredBadges","filter","b","includes","slice","showStats","showStatsToBesties","showCheckIns","concat","profile","aura","style","background","backgroundGradient","photoURL","src","alt","displayName","requestAttention","active","tag","bio","phone","phoneNumber","window","location","href","toast","CountUp","end","stats","completedCheckIns","duration","totalCheckIns","totalBesties","length","checkIn","_checkIn$activity","_checkIn$activity2","_checkIn$createdAt","_checkIn$createdAt2","_checkIn$location","activity","emoji","name","activityName","createdAt","toDate","toLocaleDateString","toLocaleTimeString","hour","minute","address","status","badge","index","icon","_ref","suffix","prefix","value","parseInt","toLocaleString"],"sourceRoot":""}