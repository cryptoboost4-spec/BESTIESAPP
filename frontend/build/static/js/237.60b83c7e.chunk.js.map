{"version":3,"file":"static/js/237.60b83c7e.chunk.js","mappings":"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","sources":["pages/SocialFeedPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db } from '../services/firebase';\nimport { collection, query, where, orderBy, getDocs, limit, doc, getDoc } from 'firebase/firestore';\nimport { formatDistanceToNow } from 'date-fns';\nimport Header from '../components/Header';\nimport toast from 'react-hot-toast';\n\nconst SocialFeedPage = () => {\n  const { currentUser } = useAuth();\n  const [feed, setFeed] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all'); // all, active, completed\n\n  useEffect(() => {\n    loadFeed();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUser, filter]);\n\n  const loadFeed = async () => {\n    if (!currentUser) return;\n\n    setLoading(true);\n    try {\n      // Get user's besties\n      const bestiesQuery1 = query(\n        collection(db, 'besties'),\n        where('requesterId', '==', currentUser.uid),\n        where('status', '==', 'accepted')\n      );\n      const bestiesQuery2 = query(\n        collection(db, 'besties'),\n        where('recipientId', '==', currentUser.uid),\n        where('status', '==', 'accepted')\n      );\n\n      const [snap1, snap2] = await Promise.all([\n        getDocs(bestiesQuery1),\n        getDocs(bestiesQuery2)\n      ]);\n\n      const bestieIds = new Set([currentUser.uid]); // Include own check-ins\n      snap1.forEach(doc => {\n        const data = doc.data();\n        if (data.recipientId) bestieIds.add(data.recipientId);\n      });\n      snap2.forEach(doc => {\n        const data = doc.data();\n        if (data.requesterId) bestieIds.add(data.requesterId);\n      });\n\n      const bestieIdsArray = Array.from(bestieIds);\n\n      // Get check-ins from besties\n      const feedItems = [];\n      \n      for (const userId of bestieIdsArray) {\n        let checkInsQuery = query(\n          collection(db, 'checkins'),\n          where('userId', '==', userId),\n          orderBy('createdAt', 'desc'),\n          limit(10)\n        );\n\n        if (filter === 'active') {\n          checkInsQuery = query(\n            collection(db, 'checkins'),\n            where('userId', '==', userId),\n            where('status', '==', 'active'),\n            orderBy('createdAt', 'desc'),\n            limit(10)\n          );\n        } else if (filter === 'completed') {\n          checkInsQuery = query(\n            collection(db, 'checkins'),\n            where('userId', '==', userId),\n            where('status', '==', 'completed'),\n            orderBy('createdAt', 'desc'),\n            limit(10)\n          );\n        }\n\n        const checkInsSnap = await getDocs(checkInsQuery);\n        \n        for (const checkInDoc of checkInsSnap.docs) {\n          const checkInData = checkInDoc.data();\n          \n          // Get user data\n          const userDoc = await getDoc(doc(db, 'users', userId));\n          const userData = userDoc.exists() ? userDoc.data() : null;\n\n          feedItems.push({\n            id: checkInDoc.id,\n            ...checkInData,\n            userName: userData?.displayName || 'Unknown User',\n            userPhoto: userData?.photoURL || null,\n            isOwn: userId === currentUser.uid,\n          });\n        }\n      }\n\n      // Sort by creation time\n      feedItems.sort((a, b) => b.createdAt - a.createdAt);\n\n      setFeed(feedItems.slice(0, 50)); // Show top 50\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading feed:', error);\n      toast.error('Failed to load feed');\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'active':\n        return 'text-warning';\n      case 'completed':\n        return 'text-success';\n      case 'alerted':\n        return 'text-danger';\n      default:\n        return 'text-text-secondary';\n    }\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'active':\n        return '‚è∞';\n      case 'completed':\n        return '‚úÖ';\n      case 'alerted':\n        return 'üö®';\n      default:\n        return 'üìç';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">\n            Social Feed\n          </h1>\n          <p className=\"text-text-secondary\">\n            See what your besties are up to (privacy-safe)\n          </p>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex gap-2 mb-6\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`px-4 py-2 rounded-full font-semibold ${\n              filter === 'all' ? 'bg-primary text-white' : 'bg-white text-text-primary'\n            }`}\n          >\n            All\n          </button>\n          <button\n            onClick={() => setFilter('active')}\n            className={`px-4 py-2 rounded-full font-semibold ${\n              filter === 'active' ? 'bg-warning text-white' : 'bg-white text-text-primary'\n            }`}\n          >\n            Active Now\n          </button>\n          <button\n            onClick={() => setFilter('completed')}\n            className={`px-4 py-2 rounded-full font-semibold ${\n              filter === 'completed' ? 'bg-success text-white' : 'bg-white text-text-primary'\n            }`}\n          >\n            Safe & Sound\n          </button>\n        </div>\n\n        {/* Feed */}\n        {feed.length === 0 ? (\n          <div className=\"card p-12 text-center\">\n            <div className=\"text-6xl mb-4\">üë•</div>\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">\n              No activity yet\n            </h2>\n            <p className=\"text-text-secondary\">\n              {filter === 'active' \n                ? 'None of your besties are checked in right now'\n                : 'Add besties to see their check-ins here'}\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {feed.map((item) => (\n              <div key={item.id} className=\"card p-4\">\n                <div className=\"flex items-start gap-3\">\n                  {/* User Avatar */}\n                  <div className=\"flex-shrink-0\">\n                    {item.userPhoto ? (\n                      <img\n                        src={item.userPhoto}\n                        alt={item.userName}\n                        className=\"w-12 h-12 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-white font-semibold\">\n                        {item.userName.charAt(0).toUpperCase()}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"font-semibold text-text-primary\">\n                        {item.isOwn ? 'You' : item.userName}\n                      </span>\n                      <span className=\"text-text-secondary text-sm\">\n                        {item.createdAt && formatDistanceToNow(item.createdAt.toDate(), { addSuffix: true })}\n                      </span>\n                    </div>\n\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <span className={`text-lg ${getStatusColor(item.status)}`}>\n                        {getStatusIcon(item.status)}\n                      </span>\n                      <span className=\"text-text-primary\">\n                        {item.status === 'active' && 'is checked in at'}\n                        {item.status === 'completed' && 'safely returned from'}\n                        {item.status === 'alerted' && 'needs help at'}\n                      </span>\n                      <span className=\"font-semibold text-text-primary\">\n                        {item.location}\n                      </span>\n                    </div>\n\n                    <div className=\"flex flex-wrap gap-2 text-sm text-text-secondary\">\n                      <span>‚è±Ô∏è {item.duration} minutes</span>\n                      {item.status === 'active' && item.alertTime && (\n                        <span>\n                          ‚Ä¢ Alert in {Math.round((item.alertTime.toDate() - new Date()) / 60000)} min\n                        </span>\n                      )}\n                      {item.status === 'completed' && item.completedAt && (\n                        <span>\n                          ‚Ä¢ Completed {formatDistanceToNow(item.completedAt.toDate(), { addSuffix: true })}\n                        </span>\n                      )}\n                    </div>\n\n                    {item.notes && (\n                      <div className=\"mt-2 text-sm text-text-secondary italic\">\n                        \"{item.notes}\"\n                      </div>\n                    )}\n\n                    {/* Status Badge */}\n                    <div className=\"mt-3\">\n                      <span className={`inline-block px-3 py-1 rounded-full text-xs font-semibold ${\n                        item.status === 'active' ? 'bg-warning/10 text-warning' :\n                        item.status === 'completed' ? 'bg-success/10 text-success' :\n                        item.status === 'alerted' ? 'bg-danger/10 text-danger' :\n                        'bg-gray-100 text-text-secondary'\n                      }`}>\n                        {item.status === 'active' && 'üü° Active'}\n                        {item.status === 'completed' && 'üü¢ Safe'}\n                        {item.status === 'alerted' && 'üî¥ Alert'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Privacy Note */}\n        <div className=\"card p-4 mt-6 bg-primary/5 border border-primary/20\">\n          <div className=\"text-sm text-text-secondary\">\n            <strong className=\"text-text-primary\">üîí Privacy:</strong> Only your accepted besties can see your check-ins. \n            You can only see check-ins from people in your safety circle.\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SocialFeedPage;\n"],"names":["SocialFeedPage","currentUser","useAuth","feed","setFeed","useState","loading","setLoading","filter","setFilter","useEffect","loadFeed","async","bestiesQuery1","query","collection","db","where","uid","bestiesQuery2","snap1","snap2","Promise","all","getDocs","bestieIds","Set","forEach","doc","data","recipientId","add","requesterId","bestieIdsArray","Array","from","feedItems","userId","checkInsQuery","orderBy","limit","checkInsSnap","checkInDoc","docs","checkInData","userDoc","getDoc","userData","exists","push","_objectSpread","id","userName","displayName","userPhoto","photoURL","isOwn","sort","a","b","createdAt","slice","error","console","toast","getStatusColor","status","getStatusIcon","_jsxs","className","children","_jsx","Header","onClick","concat","length","map","item","src","alt","charAt","toUpperCase","formatDistanceToNow","toDate","addSuffix","location","duration","alertTime","Math","round","Date","completedAt","notes"],"sourceRoot":""}