{"version":3,"file":"static/js/43.c856ab90.chunk.js","mappings":"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","sources":["components/profile/themes/typography.js","components/ConfettiCelebration.jsx","components/CountUp.jsx","components/BestieCircleShareModal.jsx","components/LivingCircle.jsx","components/SocialShareCardsModal.jsx","components/profile/ProfileCard.jsx","components/profile/ProfileCompletion.jsx","components/profile/WeeklySummary.jsx","components/profile/LoginStreak.jsx","components/profile/BadgesSection.jsx","components/profile/StatsSection.jsx","components/profile/DonationStatus.jsx","components/profile/ProfileAuraStyles.jsx","pages/ProfilePage.jsx","services/connectionStrength.js","components/profile/themes/backgrounds.js","components/profile/layouts/ClassicLayout.jsx","components/profile/layouts/MagazineLayout.jsx","components/profile/layouts/PolaroidLayout.jsx","components/profile/layouts/SplitScreenLayout.jsx","components/profile/layouts/StoryLayout.jsx","components/profile/layouts/BentoLayout.jsx","components/profile/layouts/MinimalLayout.jsx","components/profile/layouts/ScrapbookLayout.jsx","components/profile/layouts/index.js"],"sourcesContent":["// Typography Pairings for Profile Cards\n// Each pairing includes name font and bio font\n\nexport const TYPOGRAPHY_STYLES = [\n  {\n    id: 'elegant',\n    name: 'Elegant',\n    emoji: '',\n    description: 'Sophisticated serif with clean sans',\n    nameFont: {\n      family: 'Playfair Display',\n      weight: '700',\n      style: 'normal',\n      googleFont: 'Playfair+Display:wght@700'\n    },\n    bioFont: {\n      family: 'Inter',\n      weight: '400',\n      style: 'italic',\n      googleFont: 'Inter:ital,wght@1,400'\n    },\n    nameSizeClass: 'text-4xl',\n    bioSizeClass: 'text-xl'\n  },\n  {\n    id: 'playful',\n    name: 'Playful',\n    emoji: '',\n    description: 'Rounded display with friendly body',\n    nameFont: {\n      family: 'Fredoka One',\n      weight: '400',\n      style: 'normal',\n      googleFont: 'Fredoka+One'\n    },\n    bioFont: {\n      family: 'Quicksand',\n      weight: '400',\n      style: 'normal',\n      googleFont: 'Quicksand:wght@400'\n    },\n    nameSizeClass: 'text-4xl',\n    bioSizeClass: 'text-xl'\n  },\n  {\n    id: 'editorial',\n    name: 'Editorial',\n    emoji: '',\n    description: 'Bold all caps with italic',\n    nameFont: {\n      family: 'Montserrat',\n      weight: '800',\n      style: 'normal',\n      transform: 'uppercase',\n      googleFont: 'Montserrat:wght@800'\n    },\n    bioFont: {\n      family: 'Lora',\n      weight: '400',\n      style: 'italic',\n      googleFont: 'Lora:ital,wght@1,400'\n    },\n    nameSizeClass: 'text-3xl tracking-wider',\n    bioSizeClass: 'text-lg'\n  },\n  {\n    id: 'minimal',\n    name: 'Minimal',\n    emoji: '',\n    description: 'Clean thin sans throughout',\n    nameFont: {\n      family: 'Poppins',\n      weight: '300',\n      style: 'normal',\n      googleFont: 'Poppins:wght@300'\n    },\n    bioFont: {\n      family: 'Poppins',\n      weight: '400',\n      style: 'normal',\n      googleFont: 'Poppins:wght@400'\n    },\n    nameSizeClass: 'text-4xl',\n    bioSizeClass: 'text-lg'\n  },\n  {\n    id: 'bold',\n    name: 'Bold',\n    emoji: '',\n    description: 'Extra thick name with standard body',\n    nameFont: {\n      family: 'Archivo Black',\n      weight: '400',\n      style: 'normal',\n      googleFont: 'Archivo+Black'\n    },\n    bioFont: {\n      family: 'Work Sans',\n      weight: '400',\n      style: 'normal',\n      googleFont: 'Work+Sans:wght@400'\n    },\n    nameSizeClass: 'text-4xl',\n    bioSizeClass: 'text-xl'\n  },\n  {\n    id: 'romantic',\n    name: 'Romantic',\n    emoji: '',\n    description: 'Delicate script with soft serif',\n    nameFont: {\n      family: 'Dancing Script',\n      weight: '700',\n      style: 'normal',\n      googleFont: 'Dancing+Script:wght@700'\n    },\n    bioFont: {\n      family: 'Crimson Text',\n      weight: '400',\n      style: 'normal',\n      googleFont: 'Crimson+Text:wght@400'\n    },\n    nameSizeClass: 'text-5xl',\n    bioSizeClass: 'text-xl'\n  }\n];\n\n// Helper to load Google Fonts dynamically\nexport const loadGoogleFonts = (typography) => {\n  const fonts = new Set();\n\n  if (typography?.nameFont?.googleFont) {\n    fonts.add(typography.nameFont.googleFont);\n  }\n  if (typography?.bioFont?.googleFont) {\n    fonts.add(typography.bioFont.googleFont);\n  }\n\n  if (fonts.size === 0) return;\n\n  const fontString = Array.from(fonts).join('&family=');\n  const linkId = 'profile-custom-fonts';\n\n  // Remove existing font link if present\n  const existingLink = document.getElementById(linkId);\n  if (existingLink) {\n    existingLink.remove();\n  }\n\n  // Add new font link\n  const link = document.createElement('link');\n  link.id = linkId;\n  link.rel = 'stylesheet';\n  link.href = `https://fonts.googleapis.com/css2?family=${fontString}&display=swap`;\n  document.head.appendChild(link);\n};\n\n// Get typography style by ID\nexport const getTypographyById = (id) => {\n  return TYPOGRAPHY_STYLES.find(style => style.id === id) || TYPOGRAPHY_STYLES[0];\n};\n\n// Generate CSS for name styling\nexport const getNameStyle = (typography) => {\n  if (!typography) return {};\n\n  return {\n    fontFamily: typography.nameFont.family,\n    fontWeight: typography.nameFont.weight,\n    fontStyle: typography.nameFont.style,\n    textTransform: typography.nameFont.transform || 'none'\n  };\n};\n\n// Generate CSS for bio styling\nexport const getBioStyle = (typography) => {\n  if (!typography) return {};\n\n  return {\n    fontFamily: typography.bioFont.family,\n    fontWeight: typography.bioFont.weight,\n    fontStyle: typography.bioFont.style\n  };\n};\n","import { useEffect } from 'react';\nimport confetti from 'canvas-confetti';\n\nconst ConfettiCelebration = ({ trigger = false, type = 'default' }) => {\n  useEffect(() => {\n    if (!trigger) return;\n\n    const fireConfetti = () => {\n      if (type === 'badge') {\n        // Badge celebration - stars and hearts\n        const count = 200;\n        const defaults = {\n          origin: { y: 0.7 },\n          shapes: ['circle', 'square'],\n          colors: ['#FF69B4', '#DDA0DD', '#FFB6C1', '#FFC0CB', '#FF1493']\n        };\n\n        function fire(particleRatio, opts) {\n          confetti({\n            ...defaults,\n            ...opts,\n            particleCount: Math.floor(count * particleRatio)\n          });\n        }\n\n        fire(0.25, {\n          spread: 26,\n          startVelocity: 55,\n        });\n\n        fire(0.2, {\n          spread: 60,\n        });\n\n        fire(0.35, {\n          spread: 100,\n          decay: 0.91,\n          scalar: 0.8\n        });\n\n        fire(0.1, {\n          spread: 120,\n          startVelocity: 25,\n          decay: 0.92,\n          scalar: 1.2\n        });\n\n        fire(0.1, {\n          spread: 120,\n          startVelocity: 45,\n        });\n      } else if (type === 'milestone') {\n        // Milestone - explosion from center\n        confetti({\n          particleCount: 150,\n          spread: 70,\n          origin: { y: 0.6 },\n          colors: ['#FF69B4', '#DDA0DD', '#FFB6C1', '#87CEEB', '#98FB98']\n        });\n\n        // Second burst\n        setTimeout(() => {\n          confetti({\n            particleCount: 100,\n            angle: 60,\n            spread: 55,\n            origin: { x: 0 },\n            colors: ['#FF69B4', '#DDA0DD', '#FFB6C1']\n          });\n        }, 200);\n\n        setTimeout(() => {\n          confetti({\n            particleCount: 100,\n            angle: 120,\n            spread: 55,\n            origin: { x: 1 },\n            colors: ['#87CEEB', '#98FB98', '#FFB6C1']\n          });\n        }, 400);\n      } else {\n        // Default celebration\n        confetti({\n          particleCount: 100,\n          spread: 70,\n          origin: { y: 0.6 },\n          colors: ['#FF69B4', '#DDA0DD', '#FFB6C1', '#FFC0CB', '#FF1493']\n        });\n      }\n    };\n\n    fireConfetti();\n  }, [trigger, type]);\n\n  return null; // This component doesn't render anything\n};\n\nexport default ConfettiCelebration;\n","const CountUp = ({ end, duration = 1000, suffix = '', prefix = '', className = '' }) => {\n  // Display value directly without animation\n  const value = parseInt(end) || 0;\n\n  return (\n    <span className={className}>\n      {prefix}{value.toLocaleString()}{suffix}\n    </span>\n  );\n};\n\nexport default CountUp;\n","import React from 'react';\nimport toast from 'react-hot-toast';\n\nconst BestieCircleShareModal = ({ onClose, circleCount }) => {\n  const handleShare = (platform) => {\n    const appUrl = window.location.origin;\n    const message = `Hey! I'm using Besties to stay safe when I go out. It's a safety app where your close friends can check in on you. Want to be part of my safety circle? \\n\\nJoin me on Besties: ${appUrl}`;\n    const encoded = encodeURIComponent(message);\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n    switch (platform) {\n      case 'whatsapp':\n        if (isMobile) {\n          window.location.href = `whatsapp://send?text=${encoded}`;\n        } else {\n          window.open(`https://wa.me/?text=${encoded}`, '_blank');\n        }\n        break;\n      case 'messenger':\n        if (isMobile) {\n          window.location.href = `fb-messenger://share?link=${encodeURIComponent(appUrl)}`;\n          setTimeout(() => {\n            window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(appUrl)}&app_id=&redirect_uri=${encodeURIComponent(appUrl)}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(appUrl)}&app_id=&redirect_uri=${encodeURIComponent(appUrl)}`, '_blank', 'width=600,height=400');\n        }\n        break;\n      case 'instagram':\n        navigator.clipboard.writeText(message).then(() => {\n          toast.success('Message copied! Opening Instagram DMs...');\n          if (isMobile) {\n            window.location.href = 'instagram://direct/inbox';\n            setTimeout(() => {\n              window.open('https://www.instagram.com/direct/inbox/', '_blank');\n            }, 1500);\n          } else {\n            window.open('https://www.instagram.com/direct/inbox/', '_blank');\n          }\n        }).catch(() => {\n          toast.error('Failed to copy message');\n        });\n        break;\n      case 'sms':\n        window.location.href = `sms:?body=${encoded}`;\n        break;\n      case 'facebook':\n        const textEncoded = encodeURIComponent('Join my safety circle on Besties! ');\n        const urlEncoded = encodeURIComponent(appUrl);\n        if (isMobile) {\n          window.location.href = `fb://profile`;\n          setTimeout(() => {\n            window.open(`https://www.facebook.com/sharer/sharer.php?u=${urlEncoded}&quote=${textEncoded}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://www.facebook.com/sharer/sharer.php?u=${urlEncoded}&quote=${textEncoded}`, '_blank', 'width=600,height=400');\n        }\n        break;\n      default:\n        break;\n    }\n\n    toast.success(`Opening ${platform}...`);\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/60 dark:bg-black/75 flex items-center justify-center z-50 p-4 backdrop-blur-sm\" onClick={onClose}>\n      <div className=\"card max-w-lg w-full p-0 animate-scale-up overflow-hidden relative bg-gradient-to-br from-pink-50 via-purple-50 to-pink-50 dark:from-pink-900/20 dark:via-purple-900/20 dark:to-pink-900/20 border-2 border-pink-200 dark:border-pink-600 shadow-2xl\" onClick={(e) => e.stopPropagation()}>\n\n        {/* Close button */}\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 z-10 w-8 h-8 rounded-full bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors shadow-md text-gray-700 dark:text-gray-300\"\n        >\n          \n        </button>\n\n        {/* Header with gradient background - mobile optimized */}\n        <div className=\"bg-gradient-to-r from-primary via-purple-500 to-pink-500 p-4 md:p-8 text-center relative overflow-hidden\">\n          {/* Decorative circles */}\n          <div className=\"absolute top-0 right-0 w-24 h-24 md:w-32 md:h-32 bg-white/10 rounded-full -mr-12 md:-mr-16 -mt-12 md:-mt-16\"></div>\n          <div className=\"absolute bottom-0 left-0 w-16 h-16 md:w-24 md:h-24 bg-white/10 rounded-full -ml-8 md:-ml-12 -mb-8 md:-mb-12\"></div>\n\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl md:text-6xl mb-2 md:mb-3 animate-bounce-slow\"></div>\n            <h3 className=\"text-xl md:text-3xl font-display text-white mb-2 drop-shadow-lg\">\n              Complete Your Circle!\n            </h3>\n            <div className=\"inline-block bg-white/20 backdrop-blur-sm px-3 md:px-4 py-1.5 md:py-2 rounded-full\">\n              <p className=\"text-white font-semibold text-sm md:text-base\">\n                <span className=\"text-xl md:text-2xl font-display\">{circleCount}</span>\n                <span className=\"text-white/80\"> / </span>\n                <span className=\"text-xl md:text-2xl font-display\">5</span>\n                <span className=\"text-xs md:text-sm ml-2\">besties</span>\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-4 md:p-6\">\n          {/* Info Box - more compact on mobile */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-5 mb-4 md:mb-6 shadow-lg border-2 border-pink-100 dark:border-pink-800\">\n            <div className=\"flex items-start gap-2 md:gap-3\">\n              <div className=\"text-2xl md:text-3xl flex-shrink-0\"></div>\n              <div>\n                <h4 className=\"font-display text-base md:text-lg text-primary dark:text-purple-400 mb-1 md:mb-2\">\n                  Why you need 5 besties\n                </h4>\n                <p className=\"text-xs md:text-sm text-gray-700 dark:text-gray-300 leading-relaxed\">\n                  A full circle means maximum protection! Your 5 trusted friends will get alerts when you check in and can help if something goes wrong. The more besties, the safer you are. \n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Social Sharing */}\n          <div className=\"mb-4 md:mb-6\">\n            <h4 className=\"text-base md:text-lg font-display text-center text-primary dark:text-purple-400 mb-3 md:mb-4\">\n               Invite Friends to Join You \n            </h4>\n            <div className=\"grid grid-cols-3 gap-2 md:gap-3\">\n              <button\n                onClick={() => handleShare('whatsapp')}\n                className=\"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-[#25D366] hover:bg-[#20BA5A] text-white transition-all hover:scale-105 shadow-md\"\n                title=\"Share on WhatsApp\"\n              >\n                <svg className=\"w-6 h-6 md:w-10 md:h-10\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\"/>\n                </svg>\n                <span className=\"text-[10px] md:text-sm font-semibold\">WhatsApp</span>\n              </button>\n\n              <button\n                onClick={() => handleShare('messenger')}\n                className=\"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-[#0084FF] hover:bg-[#0073E6] text-white transition-all hover:scale-105 shadow-md\"\n                title=\"Share on Messenger\"\n              >\n                <svg className=\"w-6 h-6 md:w-10 md:h-10\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z\"/>\n                </svg>\n                <span className=\"text-[10px] md:text-sm font-semibold\">Messenger</span>\n              </button>\n\n              <button\n                onClick={() => handleShare('instagram')}\n                className=\"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] hover:opacity-90 text-white transition-all hover:scale-105 shadow-md\"\n                title=\"Share on Instagram\"\n              >\n                <svg className=\"w-6 h-6 md:w-10 md:h-10\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n                </svg>\n                <span className=\"text-[10px] md:text-sm font-semibold\">Instagram</span>\n              </button>\n\n              <button\n                onClick={() => handleShare('sms')}\n                className=\"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-success hover:bg-green-600 text-white transition-all hover:scale-105 shadow-md\"\n                title=\"Share via SMS\"\n              >\n                <svg className=\"w-6 h-6 md:w-10 md:h-10\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n                </svg>\n                <span className=\"text-[10px] md:text-sm font-semibold\">SMS</span>\n              </button>\n\n              <button\n                onClick={() => handleShare('facebook')}\n                className=\"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-[#1877F2] hover:bg-[#166FE5] text-white transition-all hover:scale-105 shadow-md\"\n                title=\"Share on Facebook\"\n              >\n                <svg className=\"w-6 h-6 md:w-10 md:h-10\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n                </svg>\n                <span className=\"text-[10px] md:text-sm font-semibold\">Facebook</span>\n              </button>\n\n              <button\n                onClick={onClose}\n                className=\"flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-lg md:rounded-xl bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 transition-all hover:scale-105 shadow-md\"\n              >\n                <div className=\"w-6 h-6 md:w-10 md:h-10 flex items-center justify-center text-xl md:text-2xl\"></div>\n                <span className=\"text-[10px] md:text-sm font-semibold\">Maybe Later</span>\n              </button>\n            </div>\n          </div>\n\n          <p className=\"text-xs text-center text-gray-500 dark:text-gray-400 italic\">\n             Building your safety circle is one of the smartest things you can do\n          </p>\n        </div>\n\n        <style>{`\n          @keyframes bounce-slow {\n            0%, 100% { transform: translateY(0); }\n            50% { transform: translateY(-10px); }\n          }\n          .animate-bounce-slow {\n            animation: bounce-slow 2s ease-in-out infinite;\n          }\n        `}</style>\n      </div>\n    </div>\n  );\n};\n\nexport default BestieCircleShareModal;\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { db } from '../services/firebase';\nimport { collection, query, where, getDocs, doc, updateDoc, getDoc } from 'firebase/firestore';\nimport toast from 'react-hot-toast';\nimport BestieCircleShareModal from './BestieCircleShareModal';\nimport ProfileWithBubble from './ProfileWithBubble';\nimport {\n  calculateConnectionStrength,\n  getConnectionColor,\n  getConnectionEmoji,\n  formatTimeAgo,\n  getLastInteraction,\n} from '../services/connectionStrength';\n\nconst LivingCircle = ({ userId, onAddClick }) => {\n  const navigate = useNavigate();\n  const [allBesties, setAllBesties] = useState([]);\n  const [circleBesties, setCircleBesties] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedSlot, setSelectedSlot] = useState(null);\n  const [showReplaceModal, setShowReplaceModal] = useState(false);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [connectionStrengths, setConnectionStrengths] = useState({});\n  const [lastSeen, setLastSeen] = useState({});\n  const [loadingConnections, setLoadingConnections] = useState(true);\n  const [overallHealth, setOverallHealth] = useState(0);\n  const [showVibeTooltip, setShowVibeTooltip] = useState(false);\n\n  const loadBesties = async () => {\n    if (!userId) return;\n\n    try {\n      // Get all accepted besties\n      const [requesterQuery, recipientQuery] = await Promise.all([\n        getDocs(\n          query(\n            collection(db, 'besties'),\n            where('requesterId', '==', userId),\n            where('status', '==', 'accepted')\n          )\n        ),\n        getDocs(\n          query(\n            collection(db, 'besties'),\n            where('recipientId', '==', userId),\n            where('status', '==', 'accepted')\n          )\n        ),\n      ]);\n\n      const bestiesList = [];\n\n      for (const docSnap of requesterQuery.docs) {\n        const data = docSnap.data();\n        const userDoc = await getDoc(doc(db, 'users', data.recipientId));\n        const userData = userDoc.exists() ? userDoc.data() : {};\n\n        // Check for active check-ins\n        const checkInVisibility = userData.privacySettings?.checkInVisibility || 'all_besties';\n        let hasActiveCheckIn = false;\n\n        if (checkInVisibility === 'all_besties') {\n          const activeCheckInsQuery = query(\n            collection(db, 'checkins'),\n            where('userId', '==', data.recipientId),\n            where('status', 'in', ['active', 'alerted'])\n          );\n          const activeCheckIns = await getDocs(activeCheckInsQuery);\n          hasActiveCheckIn = !activeCheckIns.empty;\n        } else if (checkInVisibility === 'circle') {\n          const theirFeaturedCircle = userData.featuredCircle || [];\n          if (theirFeaturedCircle.includes(userId)) {\n            const activeCheckInsQuery = query(\n              collection(db, 'checkins'),\n              where('userId', '==', data.recipientId),\n              where('status', 'in', ['active', 'alerted'])\n            );\n            const activeCheckIns = await getDocs(activeCheckInsQuery);\n            hasActiveCheckIn = !activeCheckIns.empty;\n          }\n        }\n\n        // Check if current user is in their featured circle (mutual)\n        const theirFeaturedCircle = userData.featuredCircle || [];\n        const isMutual = theirFeaturedCircle.includes(userId);\n\n        bestiesList.push({\n          id: data.recipientId,\n          name: userData.displayName || 'Bestie',\n          photoURL: userData.photoURL || null,\n          requestAttention: userData.requestAttention || null,\n          hasActiveCheckIn: hasActiveCheckIn,\n          isMutual: isMutual,\n        });\n      }\n\n      for (const docSnap of recipientQuery.docs) {\n        const data = docSnap.data();\n        const userDoc = await getDoc(doc(db, 'users', data.requesterId));\n        const userData = userDoc.exists() ? userDoc.data() : {};\n\n        // Check for active check-ins\n        const checkInVisibility = userData.privacySettings?.checkInVisibility || 'all_besties';\n        let hasActiveCheckIn = false;\n\n        if (checkInVisibility === 'all_besties') {\n          const activeCheckInsQuery = query(\n            collection(db, 'checkins'),\n            where('userId', '==', data.requesterId),\n            where('status', 'in', ['active', 'alerted'])\n          );\n          const activeCheckIns = await getDocs(activeCheckInsQuery);\n          hasActiveCheckIn = !activeCheckIns.empty;\n        } else if (checkInVisibility === 'circle') {\n          const theirFeaturedCircle = userData.featuredCircle || [];\n          if (theirFeaturedCircle.includes(userId)) {\n            const activeCheckInsQuery = query(\n              collection(db, 'checkins'),\n              where('userId', '==', data.requesterId),\n              where('status', 'in', ['active', 'alerted'])\n            );\n            const activeCheckIns = await getDocs(activeCheckInsQuery);\n            hasActiveCheckIn = !activeCheckIns.empty;\n          }\n        }\n\n        // Check if current user is in their featured circle (mutual)\n        const theirFeaturedCircle = userData.featuredCircle || [];\n        const isMutual = theirFeaturedCircle.includes(userId);\n\n        bestiesList.push({\n          id: data.requesterId,\n          name: userData.displayName || 'Bestie',\n          photoURL: userData.photoURL || null,\n          requestAttention: userData.requestAttention || null,\n          hasActiveCheckIn: hasActiveCheckIn,\n          isMutual: isMutual,\n        });\n      }\n\n      setAllBesties(bestiesList);\n\n      // Get user's featured circle\n      const userDoc = await getDoc(doc(db, 'users', userId));\n      const featuredIds = userDoc.exists() ? (userDoc.data().featuredCircle || []) : [];\n\n      // Map featured IDs to bestie objects\n      const featured = featuredIds\n        .map(id => bestiesList.find(b => b.id === id))\n        .filter(Boolean);\n\n      // If less than what user has, auto-fill with first few besties\n      const needsAutoFill = featured.length < bestiesList.length && featured.length < 5;\n      if (needsAutoFill) {\n        const remaining = bestiesList.filter(b => !featuredIds.includes(b.id));\n        featured.push(...remaining.slice(0, 5 - featured.length));\n      }\n\n      const finalCircle = featured.slice(0, 5);\n      setCircleBesties(finalCircle);\n\n      // CRITICAL: Save auto-filled circle to Firestore\n      if (needsAutoFill && finalCircle.length > 0) {\n        await saveFeaturedCircle(finalCircle);\n      }\n\n      setLoading(false);\n\n      // Load connection strengths and last seen\n      loadConnectionData(finalCircle);\n    } catch (error) {\n      console.error('Error loading besties:', error);\n      setLoading(false);\n    }\n  };\n\n  const loadConnectionData = async (besties) => {\n    setLoadingConnections(true);\n    const strengths = {};\n    const lastSeenData = {};\n\n    for (const bestie of besties) {\n      try {\n        // Calculate connection strength\n        const strength = await calculateConnectionStrength(userId, bestie.id);\n        strengths[bestie.id] = strength;\n\n        // Get last interaction\n        const lastInteraction = await getLastInteraction(userId, bestie.id);\n        lastSeenData[bestie.id] = lastInteraction;\n      } catch (error) {\n        console.error(`Error loading connection data for ${bestie.id}:`, error);\n      }\n    }\n\n    setConnectionStrengths(strengths);\n    setLastSeen(lastSeenData);\n\n    // Calculate overall health\n    const scores = Object.values(strengths).map(s => s.total);\n    const avgScore = scores.length > 0 ? scores.reduce((a, b) => a + b, 0) / scores.length : 0;\n    const healthWithPenalty = besties.length < 5 ? avgScore * (besties.length / 5) : avgScore;\n    setOverallHealth(Math.round(healthWithPenalty));\n\n    setLoadingConnections(false);\n  };\n\n  useEffect(() => {\n    loadBesties();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  const saveFeaturedCircle = async (newCircle) => {\n    const featuredIds = newCircle.map(b => b.id);\n    await updateDoc(doc(db, 'users', userId), {\n      featuredCircle: featuredIds,\n    });\n  };\n\n  const handleRemoveFromCircle = async (index) => {\n    // Only allow removal if circle is full (5 members)\n    if (circleBesties.length < 5) {\n      toast.error('Circle must be full to remove members. Use Replace instead.');\n      setSelectedSlot(null);\n      return;\n    }\n\n    const newCircle = circleBesties.filter((_, i) => i !== index);\n    setCircleBesties(newCircle);\n    await saveFeaturedCircle(newCircle);\n    setSelectedSlot(null);\n    toast.success('Removed from circle');\n  };\n\n  const handleReplaceBestie = async (newBestie) => {\n    const newCircle = [...circleBesties];\n    newCircle[selectedSlot] = newBestie;\n    setCircleBesties(newCircle);\n    await saveFeaturedCircle(newCircle);\n    setShowReplaceModal(false);\n    setSelectedSlot(null);\n    toast.success('Bestie replaced');\n\n    // Reload connection data for new bestie\n    loadConnectionData(newCircle);\n  };\n\n  const handleViewProfile = (bestieId) => {\n    navigate(`/user/${bestieId}`);\n    setSelectedSlot(null);\n  };\n\n  const getStatusInfo = (bestie) => {\n    // Priority: Request Attention > Active Check-in > Safe\n    if (bestie.requestAttention?.active) {\n      return {\n        color: 'bg-purple-500',\n        ringColor: 'ring-purple-400',\n        glowColor: '#a855f7',\n        label: 'Needs support',\n        emoji: '',\n      };\n    } else if (bestie.hasActiveCheckIn) {\n      return {\n        color: 'bg-yellow-500',\n        ringColor: 'ring-yellow-400',\n        glowColor: '#f59e0b',\n        label: 'Active check-in',\n        emoji: '',\n      };\n    } else {\n      return {\n        color: 'bg-green-500',\n        ringColor: 'ring-green-400',\n        glowColor: '#10b981',\n        label: 'Safe',\n        emoji: '',\n      };\n    }\n  };\n\n  const slots = Array.from({ length: 5 }, (_, i) => circleBesties[i] || null);\n\n  // Different colors for each bestie slot\n  const slotColors = [\n    'bg-pink-500',      // Slot 0 - Pink\n    'bg-purple-500',    // Slot 1 - Purple\n    'bg-blue-500',      // Slot 2 - Blue\n    'bg-green-500',     // Slot 3 - Green\n    'bg-orange-500',    // Slot 4 - Orange\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"card p-8 flex items-center justify-center\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"card p-6 md:p-8 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 border-2 border-purple-100 relative overflow-hidden\"\n      onClick={() => {\n        if (showVibeTooltip) setShowVibeTooltip(false);\n      }}\n    >\n      {/* Animated background gradient */}\n      <div className=\"absolute inset-0 opacity-30 animate-gradient-shift pointer-events-none\"></div>\n\n      <div className=\"relative z-10\">\n        <div className=\"text-center mb-6\">\n          <h3 className=\"text-2xl md:text-3xl font-display text-gradient mb-1\">Your Inner Circle</h3>\n          <p className=\"text-sm text-gray-600\">The 5 who have your back, always</p>\n        </div>\n\n        {/* Circle Container - Responsive sizing */}\n        <div className=\"relative w-full max-w-md mx-auto aspect-square mb-6\">\n          <div className=\"absolute inset-0\">\n            {/* Connection Lines with Dynamic Strength */}\n            {slots.map((bestie, index) => {\n              if (!bestie) return null;\n              const angle = (index * 72 - 90) * (Math.PI / 180);\n              const radius = 45; // Percentage-based radius\n              const x = 50 + radius * Math.cos(angle);\n              const y = 50 + radius * Math.sin(angle);\n\n              const connectionStrength = connectionStrengths[bestie.id];\n              const strengthScore = connectionStrength?.total || 0;\n              const connectionColor = getConnectionColor(strengthScore);\n\n              // Line opacity and animation based on strength\n              const opacity = 0.2 + (strengthScore / 100) * 0.6;\n              const strokeWidth = 1 + (strengthScore / 100) * 2;\n\n              return (\n                <svg\n                  key={`line-${index}`}\n                  className=\"absolute inset-0 w-full h-full pointer-events-none\"\n                  style={{ zIndex: 0 }}\n                >\n                  <defs>\n                    <linearGradient id={`gradient-${index}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                      <stop offset=\"0%\" stopColor={connectionColor} stopOpacity={opacity} />\n                      <stop offset=\"50%\" stopColor={connectionColor} stopOpacity={opacity * 1.5} />\n                      <stop offset=\"100%\" stopColor={connectionColor} stopOpacity={opacity} />\n                    </linearGradient>\n                    <filter id={`glow-${index}`}>\n                      <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\"/>\n                      <feMerge>\n                        <feMergeNode in=\"coloredBlur\"/>\n                        <feMergeNode in=\"SourceGraphic\"/>\n                      </feMerge>\n                    </filter>\n                  </defs>\n                  <line\n                    x1=\"50%\"\n                    y1=\"50%\"\n                    x2={`${x}%`}\n                    y2={`${y}%`}\n                    stroke={`url(#gradient-${index})`}\n                    strokeWidth={strokeWidth}\n                    strokeDasharray=\"4 2\"\n                    filter={`url(#glow-${index})`}\n                    className=\"animate-pulse-connection\"\n                  />\n\n                  {/* Flowing particles - always visible, more for stronger connections */}\n                  {bestie && (\n                    <>\n                      {/* Primary particle - always flows */}\n                      <circle\n                        cx=\"50%\"\n                        cy=\"50%\"\n                        r={strengthScore >= 50 ? \"4\" : \"3\"}\n                        fill=\"#10b981\"\n                        opacity={0.4 + (strengthScore / 100) * 0.6}\n                        className=\"animate-particle\"\n                        style={{\n                          '--target-x': `${x}%`,\n                          '--target-y': `${y}%`,\n                          animationDelay: `${index * 0.5}s`,\n                          animationDuration: strengthScore >= 70 ? '2s' : '3s',\n                        }}\n                      />\n                      {/* Secondary particle for strong connections */}\n                      {strengthScore >= 50 && (\n                        <circle\n                          cx=\"50%\"\n                          cy=\"50%\"\n                          r=\"3\"\n                          fill=\"#34d399\"\n                          opacity={0.5}\n                          className=\"animate-particle\"\n                          style={{\n                            '--target-x': `${x}%`,\n                            '--target-y': `${y}%`,\n                            animationDelay: `${index * 0.5 + 1}s`,\n                            animationDuration: '2.5s',\n                          }}\n                        />\n                      )}\n                      {/* Third particle for unbreakable connections */}\n                      {strengthScore >= 90 && (\n                        <circle\n                          cx=\"50%\"\n                          cy=\"50%\"\n                          r=\"4\"\n                          fill=\"#10b981\"\n                          opacity={0.7}\n                          className=\"animate-particle\"\n                          style={{\n                            '--target-x': `${x}%`,\n                            '--target-y': `${y}%`,\n                            animationDelay: `${index * 0.5 + 0.5}s`,\n                            animationDuration: '1.8s',\n                          }}\n                        />\n                      )}\n                    </>\n                  )}\n                </svg>\n              );\n            })}\n\n            {/* Center Circle - Circle Health Score */}\n            <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10\">\n              <div className=\"w-20 h-20 md:w-24 md:h-24 bg-gradient-primary rounded-full flex flex-col items-center justify-center text-white shadow-2xl border-4 border-white ring-4 ring-purple-200 animate-breathe relative group\">\n                {loadingConnections ? (\n                  <div className=\"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                ) : circleBesties.length === 0 ? (\n                  <div className=\"text-center px-2\">\n                    <div className=\"text-2xl mb-0.5\"></div>\n                    <div className=\"text-[10px] font-semibold leading-tight\">Begin<br/>Here</div>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"text-2xl md:text-3xl font-bold leading-none\">{overallHealth}</div>\n                    <div className=\"text-xs font-semibold opacity-90\">Your Vibe</div>\n\n                    {/* Info Tooltip for Context - Mobile & Desktop Friendly */}\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setShowVibeTooltip(!showVibeTooltip);\n                      }}\n                      className=\"absolute -top-2 -right-2 w-6 h-6 md:w-5 md:h-5 bg-white rounded-full flex items-center justify-center shadow-md cursor-pointer hover:scale-110 transition-transform active:scale-95 z-40\"\n                    >\n                      <span className=\"text-sm md:text-xs\"></span>\n                    </button>\n                    {showVibeTooltip && (\n                      <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-4 z-50 animate-fade-in\">\n                        <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 rounded-xl text-xs font-semibold shadow-2xl max-w-xs\">\n                          <div className=\"font-bold mb-1\">Your Circle Strength</div>\n                          <div className=\"text-white/90 text-xs whitespace-normal w-48\">\n                            {overallHealth >= 90 && \" Unbreakable - You and your circle are inseparable!\"}\n                            {overallHealth >= 70 && overallHealth < 90 && \" Powerful - Strong bonds, keep nurturing them!\"}\n                            {overallHealth >= 50 && overallHealth < 70 && \" Strong - Solid friendships, growing stronger!\"}\n                            {overallHealth >= 30 && overallHealth < 50 && \" Growing - Building momentum together!\"}\n                            {overallHealth < 30 && \" Spark - Just getting started, lots of potential!\"}\n                          </div>\n                          <div className=\"absolute left-1/2 -translate-x-1/2 bottom-full w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-pink-600\"></div>\n                        </div>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Bestie Slots - all equidistant from center */}\n            {slots.map((bestie, index) => {\n              const angle = (index * 72 - 90) * (Math.PI / 180);\n              const radius = 45; // Percentage-based for better responsiveness\n              const x = 50 + radius * Math.cos(angle);\n              const y = 50 + radius * Math.sin(angle);\n\n              const status = bestie ? getStatusInfo(bestie) : null;\n              const connectionStrength = bestie ? connectionStrengths[bestie.id] : null;\n              const lastSeenTime = bestie ? lastSeen[bestie.id] : null;\n\n              return (\n                <div\n                  key={index}\n                  className=\"absolute\"\n                  style={{\n                    left: `${x}%`,\n                    top: `${y}%`,\n                    transform: 'translate(-50%, -50%)',\n                  }}\n                >\n                  {bestie ? (\n                    <div className=\"relative group\">\n                      {/* Bestie Circle - clickable with status ring */}\n                      <button\n                        onClick={() => setSelectedSlot(selectedSlot === index ? null : index)}\n                        className=\"relative hover:scale-110 transition-all duration-300\"\n                      >\n                        <div\n                          className={`w-14 h-14 md:w-16 md:h-16 rounded-full shadow-xl border-4 border-white hover:shadow-2xl ${\n                            connectionStrength?.total >= 90\n                              ? 'ring-6 ring-amber-400 shadow-[0_0_20px_rgba(251,191,36,0.6)]'\n                              : `${status.ringColor} ring-4`\n                          } hover:ring-6 overflow-hidden flex items-center justify-center relative ${\n                            connectionStrength?.total >= 90 ? 'animate-breathe-glow' : 'animate-breathe-subtle'\n                          }`}\n                          style={{ animationDelay: `${index * 0.3}s` }}\n                        >\n                          <ProfileWithBubble\n                            photoURL={bestie.photoURL}\n                            name={bestie.name || 'Bestie'}\n                            requestAttention={bestie.requestAttention}\n                            size=\"xl\"\n                            showBubble={true}\n                            className=\"w-full h-full\"\n                          />\n\n                          {/* Status Badge */}\n                          <div className={`absolute -bottom-1 -right-1 w-6 h-6 ${status.color} rounded-full border-2 border-white flex items-center justify-center text-xs shadow-lg animate-pulse-gentle`}>\n                            {status.emoji}\n                          </div>\n\n                          {/* Connection Strength Badge - Always Visible with Special Styling for Unbreakable */}\n                          {connectionStrength && !loadingConnections && (\n                            <div\n                              className={`absolute -top-1 -left-1 w-8 h-8 rounded-full border-2 flex items-center justify-center shadow-lg ${\n                                connectionStrength.total >= 90\n                                  ? 'bg-gradient-to-br from-amber-400 to-orange-500 border-amber-300 shadow-[0_0_12px_rgba(251,191,36,0.8)] animate-pulse-glow'\n                                  : 'bg-gradient-to-br from-white to-gray-100 border-purple-300'\n                              }`}\n                            >\n                              <span className=\"text-base\">{getConnectionEmoji(connectionStrength.total)}</span>\n                            </div>\n                          )}\n\n                          {/* Mutual Circle Badge - Top Right */}\n                          {bestie.isMutual && (\n                            <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full border-2 border-white flex items-center justify-center shadow-lg animate-pulse-gentle\">\n                              <span className=\"text-xs\"></span>\n                            </div>\n                          )}\n                        </div>\n                      </button>\n\n                      {/* Enhanced Tooltip with Connection Strength */}\n                      <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none z-20 transform group-hover:-translate-y-1\">\n                        <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 rounded-xl text-xs font-semibold shadow-2xl min-w-max\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <div className=\"font-bold text-sm\">{bestie.name || 'Unknown'}</div>\n                            {bestie.isMutual && (\n                              <span className=\"text-xs bg-white/20 px-2 py-0.5 rounded-full flex items-center gap-1\">\n                                 Mutual\n                              </span>\n                            )}\n                          </div>\n                          {connectionStrength && !loadingConnections && (\n                            <>\n                              <div className=\"flex items-center gap-2 text-white/90 mb-1\">\n                                <span className=\"text-lg\">{getConnectionEmoji(connectionStrength.total)}</span>\n                                <span>{connectionStrength.total}/100</span>\n                                <span className=\"capitalize px-2 py-0.5 bg-white/20 rounded-full text-xs\">\n                                  {connectionStrength.level}\n                                </span>\n                              </div>\n                            </>\n                          )}\n                          {lastSeenTime && (\n                            <div className=\"text-white/90 text-xs mt-2 flex items-center gap-1\">\n                              <span></span>\n                              <span>Last connected: {formatTimeAgo(lastSeenTime)}</span>\n                            </div>\n                          )}\n                          {bestie.isMutual && (\n                            <div className=\"text-white/80 text-xs mt-2 italic\">\n                              You're both in each other's top 5 \n                            </div>\n                          )}\n                          <div className=\"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-pink-600\"></div>\n                        </div>\n                      </div>\n\n                      {/* Action Menu */}\n                      {selectedSlot === index && (\n                        <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-[200] w-40\">\n                          <button\n                            onClick={() => handleViewProfile(bestie.id)}\n                            className=\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700\"\n                          >\n                             View Profile\n                          </button>\n                          <button\n                            onClick={() => setShowReplaceModal(true)}\n                            className=\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700\"\n                          >\n                             Replace\n                          </button>\n                          <button\n                            onClick={() => handleRemoveFromCircle(index)}\n                            className=\"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600\"\n                          >\n                             Remove\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <button\n                      onClick={() => setShowShareModal(true)}\n                      className={`w-14 h-14 md:w-16 md:h-16 border-4 border-dashed ${slotColors[index].replace('bg-', 'border-')} rounded-full flex flex-col items-center justify-center ${slotColors[index].replace('bg-', 'text-')} font-bold hover:scale-110 hover:bg-purple-50 transition-all shadow-lg hover:shadow-xl animate-pulse-slow relative group`}\n                      title=\"Add someone who has your back\"\n                    >\n                      <span className=\"text-2xl\">+</span>\n                      <span className=\"text-[8px] opacity-70 mt-0.5\">Add</span>\n                      {/* Tooltip */}\n                      <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none z-20\">\n                        <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-2 rounded-lg text-xs font-semibold whitespace-nowrap shadow-xl\">\n                          {circleBesties.length === 0 ? \"Your first bestie \" : \"Add another one \"}\n                          <div className=\"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-pink-600\"></div>\n                        </div>\n                      </div>\n                    </button>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Info - Enhanced with Progress */}\n        <div className=\"text-center mt-6 space-y-3\">\n          <div className=\"inline-flex items-center gap-2 bg-white px-4 py-3 rounded-full shadow-md border-2 border-purple-200\">\n            <span className=\"text-2xl\"></span>\n            <div className=\"text-left\">\n              <div className=\"font-display text-base md:text-lg text-gradient font-bold leading-tight\">\n                {circleBesties.length}/5 In Your Circle\n              </div>\n              {circleBesties.length > 0 && !loadingConnections && (\n                <div className=\"text-xs text-gray-600\">\n                  {overallHealth >= 90 && \"Unbreakable vibes \"}\n                  {overallHealth >= 70 && overallHealth < 90 && \"Super strong energy \"}\n                  {overallHealth >= 50 && overallHealth < 70 && \"Solid connections \"}\n                  {overallHealth >= 30 && overallHealth < 50 && \"Building momentum \"}\n                  {overallHealth < 30 && \"Just getting started \"}\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"text-xs md:text-sm text-gray-600\">\n            {circleBesties.length === 5\n              ? \"Your circle is complete! Keep nurturing these connections \"\n              : circleBesties.length === 0\n              ? \"Your 5 closest people - the ones you can call at 3am. Start building your circle \"\n              : circleBesties.length === 1\n              ? \"Amazing start! Add 4 more to complete your inner circle \"\n              : `${5 - circleBesties.length} more to go! You're building something special `}\n          </div>\n\n          {circleBesties.length > 0 && !loadingConnections && (\n            <button\n              onClick={() => navigate('/circle-health')}\n              className=\"mt-2 px-6 py-2 bg-gradient-primary text-white rounded-full font-semibold text-sm hover:shadow-lg hover:scale-105 transition-all flex items-center gap-2 mx-auto\"\n            >\n              <span>See Your Stats</span>\n              <span className=\"text-base\"></span>\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* CSS Animations */}\n      <style>{`\n        @keyframes fade-in {\n          from {\n            opacity: 0;\n            transform: translate(-50%, -10px);\n          }\n          to {\n            opacity: 1;\n            transform: translate(-50%, 0);\n          }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out forwards;\n        }\n        @keyframes breathe {\n          0%, 100% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.05);\n          }\n        }\n        .animate-breathe {\n          animation: breathe 4s ease-in-out infinite;\n        }\n        .animate-breathe-subtle {\n          animation: breathe 5s ease-in-out infinite;\n        }\n        @keyframes breathe-glow {\n          0%, 100% {\n            transform: scale(1);\n            box-shadow: 0 10px 40px rgba(251, 191, 36, 0.4), 0 0 20px rgba(251, 191, 36, 0.6);\n          }\n          50% {\n            transform: scale(1.05);\n            box-shadow: 0 15px 60px rgba(251, 191, 36, 0.6), 0 0 30px rgba(251, 191, 36, 0.8);\n          }\n        }\n        .animate-breathe-glow {\n          animation: breathe-glow 3s ease-in-out infinite;\n        }\n        @keyframes pulse-glow {\n          0%, 100% {\n            opacity: 1;\n            transform: scale(1);\n          }\n          50% {\n            opacity: 0.8;\n            transform: scale(1.05);\n          }\n        }\n        .animate-pulse-glow {\n          animation: pulse-glow 2s ease-in-out infinite;\n        }\n        @keyframes pulse-gentle {\n          0%, 100% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          50% {\n            transform: scale(1.1);\n            opacity: 0.9;\n          }\n        }\n        .animate-pulse-gentle {\n          animation: pulse-gentle 2s ease-in-out infinite;\n        }\n        @keyframes pulse-slow {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.6;\n          }\n        }\n        .animate-pulse-slow {\n          animation: pulse-slow 2s ease-in-out infinite;\n        }\n        @keyframes pulse-connection {\n          0%, 100% {\n            opacity: 0.8;\n          }\n          50% {\n            opacity: 1;\n          }\n        }\n        .animate-pulse-connection {\n          animation: pulse-connection 3s ease-in-out infinite;\n        }\n        @keyframes particle {\n          0% {\n            cx: 50%;\n            cy: 50%;\n            opacity: 1;\n          }\n          100% {\n            cx: var(--target-x);\n            cy: var(--target-y);\n            opacity: 0;\n          }\n        }\n        .animate-particle {\n          animation: particle 3s linear infinite;\n        }\n        @keyframes gradient-shift {\n          0%, 100% {\n            background-position: 0% 50%;\n          }\n          50% {\n            background-position: 100% 50%;\n          }\n        }\n        .animate-gradient-shift {\n          background: linear-gradient(120deg, #fdf2f8, #fce7f3, #fff7ed, #fef3c7);\n          background-size: 200% 200%;\n          animation: gradient-shift 8s ease infinite;\n        }\n      `}</style>\n\n      {/* Replace Modal */}\n      {showReplaceModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setShowReplaceModal(false)}>\n          <div className=\"bg-white rounded-xl p-6 max-w-sm w-full max-h-96 overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-xl font-display mb-4\">Replace with:</h3>\n            <div className=\"space-y-2\">\n              {allBesties\n                .filter(b => !circleBesties.find(cb => cb.id === b.id))\n                .map(bestie => (\n                  <button\n                    key={bestie.id}\n                    onClick={() => handleReplaceBestie(bestie)}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors\"\n                  >\n                    <ProfileWithBubble\n                      photoURL={bestie.photoURL}\n                      name={bestie.name || 'Unknown'}\n                      requestAttention={bestie.requestAttention}\n                      size=\"md\"\n                      showBubble={true}\n                    />\n                    <div className=\"text-left\">\n                      <div className=\"font-semibold\">{bestie.name || 'Unknown'}</div>\n                    </div>\n                  </button>\n                ))}\n              {allBesties.filter(b => !circleBesties.find(cb => cb.id === b.id)).length === 0 && (\n                <p className=\"text-center text-gray-500 py-4\">All besties are in your circle!</p>\n              )}\n            </div>\n            <button\n              onClick={() => setShowReplaceModal(false)}\n              className=\"mt-4 w-full btn btn-secondary\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Bestie Circle Share Modal */}\n      {showShareModal && (\n        <BestieCircleShareModal\n          onClose={() => setShowShareModal(false)}\n          circleCount={circleBesties.length}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default LivingCircle;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db } from '../services/firebase';\nimport { doc, getDoc } from 'firebase/firestore';\nimport toast from 'react-hot-toast';\nimport html2canvas from 'html2canvas';\n\nconst SocialShareCardsModal = ({ onClose }) => {\n  const { userData, currentUser } = useAuth();\n  const [badges, setBadges] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [generatingImage, setGeneratingImage] = useState(false);\n  const [generatedImageUrl, setGeneratedImageUrl] = useState(null);\n  const [showShareChoice, setShowShareChoice] = useState(false);\n  const [pendingPlatform, setPendingPlatform] = useState(null);\n  const cardRef = useRef(null);\n\n  useEffect(() => {\n    loadBadges();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUser]);\n\n  const loadBadges = async () => {\n    if (!currentUser) return;\n\n    try {\n      const badgesDoc = await getDoc(doc(db, 'badges', currentUser.uid));\n      if (badgesDoc.exists()) {\n        const allBadges = badgesDoc.data().badges || [];\n        // Get featured badges if set, otherwise first 3\n        const featuredIds = userData?.featuredBadges || [];\n        const featured = featuredIds\n          .map(id => allBadges.find(b => b.id === id))\n          .filter(Boolean)\n          .slice(0, 3);\n\n        if (featured.length < 3) {\n          const remaining = allBadges.filter(b => !featuredIds.includes(b.id));\n          featured.push(...remaining.slice(0, 3 - featured.length));\n        }\n\n        setBadges(featured);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading badges:', error);\n      setLoading(false);\n    }\n  };\n\n  const currentGradient = userData?.profile?.backgroundGradient || 'linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)';\n  const shareUrl = `${window.location.origin}/?invite=${currentUser?.uid}`;\n  const shareText = \"Come be my safety Bestie! \";\n\n  const generateShareImage = async () => {\n    if (!cardRef.current) return;\n\n    setGeneratingImage(true);\n    try {\n      // Wait a bit for fonts and images to load\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      const canvas = await html2canvas(cardRef.current, {\n        backgroundColor: null,\n        scale: 2,\n        logging: false,\n        useCORS: true,\n        allowTaint: true,\n      });\n\n      const imageUrl = canvas.toDataURL('image/png');\n      setGeneratedImageUrl(imageUrl);\n      return imageUrl;\n    } catch (error) {\n      console.error('Error generating image:', error);\n      toast.error('Failed to generate image');\n      return null;\n    } finally {\n      setGeneratingImage(false);\n    }\n  };\n\n  const downloadImage = async () => {\n    let imageUrl = generatedImageUrl;\n\n    if (!imageUrl) {\n      imageUrl = await generateShareImage();\n      if (!imageUrl) return;\n    }\n\n    const link = document.createElement('a');\n    link.download = 'besties-profile-share.png';\n    link.href = imageUrl;\n    link.click();\n    toast.success('Image downloaded! Share it anywhere ');\n  };\n\n  const handleCopyText = async () => {\n    const cardText = `${shareText}\\n\\n${shareUrl}`;\n    try {\n      await navigator.clipboard.writeText(cardText);\n      toast.success('Link copied to clipboard!');\n    } catch (error) {\n      toast.error('Failed to copy');\n    }\n  };\n\n  // Show share choice popup\n  const showShareChoicePopup = (platform) => {\n    setPendingPlatform(platform);\n    setShowShareChoice(true);\n  };\n\n  // Handle share with card\n  const handleShareWithCard = async () => {\n    setShowShareChoice(false);\n\n    // Generate image if not already generated\n    let imageUrl = generatedImageUrl;\n    if (!imageUrl) {\n      imageUrl = await generateShareImage();\n      if (!imageUrl) return;\n    }\n\n    toast.success('Card ready! Download and share it ');\n    downloadImage();\n\n    // Then proceed to share\n    setTimeout(() => {\n      executePlatformShare(pendingPlatform, true);\n    }, 1000);\n  };\n\n  // Handle share with link only\n  const handleShareWithLink = () => {\n    setShowShareChoice(false);\n    executePlatformShare(pendingPlatform, false);\n  };\n\n  // Execute the actual platform share\n  const executePlatformShare = (platform, withCard) => {\n    const message = `${shareText}\\n\\n${shareUrl}`;\n    const encoded = encodeURIComponent(message);\n    const urlEncoded = encodeURIComponent(shareUrl);\n    const textEncoded = encodeURIComponent(shareText);\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n    switch (platform) {\n      case 'whatsapp':\n        if (isMobile) {\n          window.location.href = `whatsapp://send?text=${encoded}`;\n        } else {\n          window.open(`https://wa.me/?text=${encoded}`, '_blank');\n        }\n        break;\n\n      case 'messenger':\n        if (isMobile) {\n          window.location.href = `fb-messenger://share?link=${urlEncoded}`;\n          setTimeout(() => {\n            window.open(`https://www.facebook.com/dialog/send?link=${urlEncoded}&app_id=&redirect_uri=${urlEncoded}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://www.facebook.com/dialog/send?link=${urlEncoded}&app_id=&redirect_uri=${urlEncoded}`, '_blank', 'width=600,height=400');\n        }\n        break;\n\n      case 'instagram':\n        navigator.clipboard.writeText(message).then(() => {\n          toast.success('Link copied! Opening Instagram DMs...');\n          if (isMobile) {\n            window.location.href = 'instagram://direct/inbox';\n            setTimeout(() => {\n              window.open('https://www.instagram.com/direct/inbox/', '_blank');\n            }, 1500);\n          } else {\n            window.open('https://www.instagram.com/direct/inbox/', '_blank');\n          }\n        }).catch(() => {\n          toast.error('Failed to copy link');\n        });\n        break;\n\n      case 'facebook':\n        if (isMobile) {\n          window.location.href = `fb://profile/${currentUser.uid}`;\n          setTimeout(() => {\n            window.open(`https://www.facebook.com/sharer/sharer.php?u=${urlEncoded}&quote=${textEncoded}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://www.facebook.com/sharer/sharer.php?u=${urlEncoded}&quote=${textEncoded}`, '_blank', 'width=600,height=400');\n        }\n        break;\n\n      case 'twitter':\n        if (isMobile) {\n          window.location.href = `twitter://post?message=${textEncoded} ${urlEncoded}`;\n          setTimeout(() => {\n            window.open(`https://twitter.com/intent/tweet?text=${textEncoded}&url=${urlEncoded}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://twitter.com/intent/tweet?text=${textEncoded}&url=${urlEncoded}`, '_blank', 'width=600,height=400');\n        }\n        break;\n\n      case 'sms':\n        window.location.href = `sms:?body=${encoded}`;\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\n        <div className=\"card p-8 bg-white dark:bg-gray-800\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n      <div className=\"card max-w-2xl w-full p-6 animate-scale-up max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-2xl font-display text-text-primary dark:text-white\">Share Your Profile</h2>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors text-gray-700 dark:text-gray-300\"\n          >\n            \n          </button>\n        </div>\n\n        <p className=\"text-text-secondary dark:text-gray-300 mb-6\">Choose how you'd like to share your Besties profile with friends!</p>\n\n        {/* Hidden Card for Image Generation */}\n        <div style={{ position: 'absolute', left: '-9999px', top: '-9999px' }}>\n          <div\n            ref={cardRef}\n            className=\"w-full rounded-2xl p-8 text-center shadow-xl relative overflow-hidden\"\n            style={{ background: currentGradient, width: '600px' }}\n          >\n            {/* Profile Photo */}\n            <div className=\"w-32 h-32 bg-gradient-primary rounded-full flex items-center justify-center text-white text-5xl font-display overflow-hidden mx-auto mb-4 border-4 border-white shadow-xl\">\n              {userData?.photoURL ? (\n                <img src={userData.photoURL} alt=\"Profile\" className=\"w-full h-full object-cover\" crossOrigin=\"anonymous\" />\n              ) : (\n                userData?.displayName?.[0] || currentUser?.email?.[0] || 'U'\n              )}\n            </div>\n\n            {/* Name */}\n            <h3 className=\"font-display text-4xl text-gray-800 mb-3\">\n              {userData?.displayName || 'User'}\n            </h3>\n\n            {/* Bio */}\n            {userData?.profile?.bio && (\n              <p className=\"text-gray-700 italic max-w-md mx-auto mb-4 text-base\">\n                \"{userData.profile.bio}\"\n              </p>\n            )}\n\n            {/* Main Message */}\n            <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl p-6 mb-4 shadow-2xl\">\n              <p className=\"text-2xl font-display text-primary mb-2\">\n                 Come be my safety Bestie!\n              </p>\n              <p className=\"text-sm text-gray-600\">\n                Join me on the Besties safety app\n              </p>\n            </div>\n\n            {/* Top 3 Badges */}\n            {badges.length > 0 && (\n              <div className=\"mb-4\">\n                <p className=\"text-sm font-semibold text-gray-700 mb-3\">Top Badges</p>\n                <div className=\"flex gap-4 justify-center\">\n                  {badges.map((badge) => (\n                    <div key={badge.id} className=\"flex flex-col items-center bg-white/90 backdrop-blur-sm rounded-xl p-3 shadow-md\">\n                      <div className=\"text-4xl mb-1\">{badge.icon}</div>\n                      <div className=\"text-xs font-semibold text-gray-700\">{badge.name}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* App branding */}\n            <div className=\"mt-6 pt-4 border-t-2 border-white/40\">\n              <div className=\"text-sm font-semibold text-gray-700\">Download</div>\n              <div className=\"font-display text-2xl text-gray-800\">Besties</div>\n              <div className=\"text-xs text-gray-600 mt-1\">Your Safety Network</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Share Buttons */}\n        <div className=\"grid grid-cols-2 gap-3 mb-4\">\n          <button\n            onClick={() => showShareChoicePopup('whatsapp')}\n            className=\"btn bg-[#25D366] text-white hover:bg-[#20BA5A] flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\"/>\n            </svg>\n            WhatsApp\n          </button>\n\n          <button\n            onClick={() => showShareChoicePopup('messenger')}\n            className=\"btn bg-[#0084FF] text-white hover:bg-[#0073E6] flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z\"/>\n            </svg>\n            Messenger\n          </button>\n\n          <button\n            onClick={() => showShareChoicePopup('instagram')}\n            className=\"btn bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] text-white hover:opacity-90 flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n            </svg>\n            Instagram DM\n          </button>\n\n          <button\n            onClick={() => showShareChoicePopup('facebook')}\n            className=\"btn bg-[#1877F2] text-white hover:bg-[#166FE5] flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n            </svg>\n            Facebook\n          </button>\n\n          <button\n            onClick={() => showShareChoicePopup('twitter')}\n            className=\"btn bg-black text-white hover:bg-gray-800 flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n            </svg>\n            X (Twitter)\n          </button>\n\n          <button\n            onClick={() => showShareChoicePopup('sms')}\n            className=\"btn bg-success text-white hover:bg-green-600 flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n            </svg>\n            SMS\n          </button>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"flex gap-3\">\n          <button\n            onClick={handleCopyText}\n            className=\"flex-1 btn btn-secondary\"\n          >\n             Copy Link\n          </button>\n          <button\n            onClick={downloadImage}\n            disabled={generatingImage}\n            className=\"flex-1 btn btn-primary\"\n          >\n            {generatingImage ? ' Generating...' : ' Download Card'}\n          </button>\n        </div>\n\n        <p className=\"text-xs text-gray-500 dark:text-gray-400 text-center mt-4\">\n          Share your profile with friends so they can join your safety network!\n        </p>\n      </div>\n\n      {/* Share Choice Popup */}\n      {showShareChoice && (\n        <div className=\"fixed inset-0 bg-black/70 dark:bg-black/80 flex items-center justify-center z-[60] p-4 animate-fade-in\">\n          <div className=\"card max-w-md w-full p-6 animate-scale-up bg-white dark:bg-gray-800\">\n            <div className=\"text-center mb-6\">\n              <div className=\"text-6xl mb-4 animate-bounce-slow\"></div>\n              <h3 className=\"text-2xl font-display text-text-primary dark:text-white mb-2\">\n                How do you want to share?\n              </h3>\n              <p className=\"text-sm text-text-secondary dark:text-gray-300\">\n                Choose between a beautiful card or a simple link\n              </p>\n            </div>\n\n            <div className=\"space-y-3 mb-4\">\n              {/* Share with Card */}\n              <button\n                onClick={handleShareWithCard}\n                className=\"w-full p-4 border-2 border-primary bg-purple-50 dark:bg-purple-900/30 rounded-xl hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-all group\"\n                disabled={generatingImage}\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-4xl\"></div>\n                  <div className=\"flex-1 text-left\">\n                    <div className=\"font-display text-lg text-primary dark:text-purple-400 mb-1\">\n                      Share Beautiful Card\n                    </div>\n                    <div className=\"text-xs text-text-secondary dark:text-gray-400\">\n                      Custom image with your profile & badges\n                    </div>\n                  </div>\n                  <div className=\"text-2xl opacity-0 group-hover:opacity-100 transition-opacity dark:text-white\">\n                    \n                  </div>\n                </div>\n              </button>\n\n              {/* Share with Link */}\n              <button\n                onClick={handleShareWithLink}\n                className=\"w-full p-4 border-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-600 transition-all group\"\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-4xl\"></div>\n                  <div className=\"flex-1 text-left\">\n                    <div className=\"font-display text-lg text-gray-800 dark:text-gray-200 mb-1\">\n                      Share Simple Link\n                    </div>\n                    <div className=\"text-xs text-text-secondary dark:text-gray-400\">\n                      Quick text message with link\n                    </div>\n                  </div>\n                  <div className=\"text-2xl opacity-0 group-hover:opacity-100 transition-opacity dark:text-white\">\n                    \n                  </div>\n                </div>\n              </button>\n            </div>\n\n            <button\n              onClick={() => setShowShareChoice(false)}\n              className=\"w-full btn btn-secondary\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* CSS for animations */}\n      <style>{`\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes bounce-slow {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out;\n        }\n        .animate-bounce-slow {\n          animation: bounce-slow 2s ease-in-out infinite;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default SocialShareCardsModal;\n","import React, { useState, useRef, lazy, Suspense } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { db, storage } from '../../services/firebase';\nimport toast from 'react-hot-toast';\nimport html2canvas from 'html2canvas';\nimport { getLayoutById } from './layouts';\nimport { getTypographyById, getNameStyle, getBioStyle } from './themes/typography';\nimport { BACKGROUNDS } from './themes/backgrounds';\nimport './themes/backgroundPatterns.css';\n\nconst ProfileCustomizer = lazy(() => import('./ProfileCustomizer'));\n\nconst GRADIENT_OPTIONS = [\n  { id: 'pink', name: 'Pink Dream', gradient: 'linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)' },\n  { id: 'purple', name: 'Purple Magic', gradient: 'linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)' },\n  { id: 'blue', name: 'Ocean Blue', gradient: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)' },\n  { id: 'green', name: 'Fresh Green', gradient: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' },\n  { id: 'sunset', name: 'Sunset Glow', gradient: 'linear-gradient(135deg, #fed7aa 0%, #fca5a5 100%)' },\n  { id: 'lavender', name: 'Lavender Fields', gradient: 'linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)' },\n  { id: 'peach', name: 'Peachy Keen', gradient: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)' },\n  { id: 'mint', name: 'Mint Fresh', gradient: 'linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%)' }\n];\n\nconst AURA_OPTIONS = [\n  { id: 'none', name: 'None', emoji: '', description: 'No animation' },\n  { id: 'shimmer', name: 'Shimmer', emoji: '', description: 'Subtle shimmering effect' },\n  { id: 'glow', name: 'Glow', emoji: '', description: 'Soft pulsing glow' },\n  { id: 'sparkle', name: 'Sparkle', emoji: '', description: 'Sparkling particles' },\n  { id: 'pulse', name: 'Pulse', emoji: '', description: 'Gentle pulsing' },\n  { id: 'rainbow', name: 'Rainbow', emoji: '', description: 'Rainbow border effect' }\n];\n\nconst ProfileCard = ({ currentUser, userData }) => {\n  const navigate = useNavigate();\n  const [showPhotoMenu, setShowPhotoMenu] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const [showAuraPicker, setShowAuraPicker] = useState(false);\n  const [showCustomizer, setShowCustomizer] = useState(false);\n  const fileInputRef = useRef(null);\n\n  const currentGradient = userData?.profile?.backgroundGradient || GRADIENT_OPTIONS[0].gradient;\n  const currentAura = userData?.profile?.aura || 'none';\n\n  // Get customization settings\n  const customization = userData?.profile?.customization || {};\n  const layoutId = customization.layout || 'classic';\n  const backgroundId = customization.background || null;\n  const typographyId = customization.typography || 'playful';\n\n  // Get the selected background or fall back to gradient\n  const getBackgroundById = (id) => {\n    const allBackgrounds = Object.values(BACKGROUNDS).flat();\n    return allBackgrounds.find(bg => bg.id === id);\n  };\n\n  const selectedBackground = backgroundId ? getBackgroundById(backgroundId) : null;\n  const backgroundStyle = selectedBackground ? selectedBackground.gradient : currentGradient;\n  const patternClass = selectedBackground ? `pattern-${selectedBackground.pattern}` : '';\n\n  // Get typography settings\n  const typography = getTypographyById(typographyId);\n  const nameStyle = typography ? getNameStyle(typography) : {};\n  const bioStyle = typography ? getBioStyle(typography) : {};\n  const nameSizeClass = typography?.nameSizeClass || 'text-4xl';\n  const bioSizeClass = typography?.bioSizeClass || 'text-lg';\n\n  // Get layout component\n  const LayoutComponent = getLayoutById(layoutId);\n\n  // Use customization photo settings or defaults\n  const photoShape = customization.photoShape || 'circle';\n  const photoBorder = customization.photoBorder || 'classic';\n\n  const handlePhotoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (file.size > 5 * 1024 * 1024) {\n      toast.error('Photo must be less than 5MB');\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const storageRef = ref(storage, `profile-pictures/${currentUser.uid}/${Date.now()}_${file.name}`);\n      await uploadBytes(storageRef, file);\n      const downloadURL = await getDownloadURL(storageRef);\n\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        photoURL: downloadURL,\n      });\n\n      toast.success('Profile picture updated!');\n      setShowPhotoMenu(false);\n    } catch (error) {\n      console.error('Error uploading photo:', error);\n      toast.error('Failed to upload photo');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleRemovePhoto = async () => {\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        photoURL: currentUser?.photoURL || null,\n      });\n\n      toast.success('Profile picture removed');\n      setShowPhotoMenu(false);\n    } catch (error) {\n      console.error('Error removing photo:', error);\n      toast.error('Failed to remove photo');\n    }\n  };\n\n  const handleColorChange = async (gradient) => {\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        'profile.backgroundGradient': gradient.gradient,\n      });\n      toast.success(`Background changed to ${gradient.name}!`);\n      setShowColorPicker(false);\n    } catch (error) {\n      console.error('Error updating background:', error);\n      toast.error('Failed to update background');\n    }\n  };\n\n  const handleAuraChange = async (aura) => {\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        'profile.aura': aura.id,\n      });\n      toast.success(`Aura changed to ${aura.name}! ${aura.emoji}`);\n      setShowAuraPicker(false);\n    } catch (error) {\n      console.error('Error updating aura:', error);\n      toast.error('Failed to update aura');\n    }\n  };\n\n  const handleShareProfileCard = async () => {\n    const profileCard = document.getElementById('profile-card-shareable');\n    if (!profileCard) {\n      toast.error('Could not capture profile card');\n      return;\n    }\n\n    try {\n      toast('Generating image...', { icon: '' });\n\n      const canvas = await html2canvas(profileCard, {\n        backgroundColor: null,\n        scale: 2,\n        logging: false,\n      });\n\n      canvas.toBlob((blob) => {\n        if (!blob) {\n          toast.error('Failed to generate image');\n          return;\n        }\n\n        if (navigator.share && navigator.canShare({ files: [new File([blob], 'profile.png', { type: 'image/png' })] })) {\n          const file = new File([blob], 'my-besties-profile.png', { type: 'image/png' });\n          navigator.share({\n            title: 'My Besties Profile',\n            text: 'Check out my Besties profile! ',\n            files: [file],\n          }).then(() => {\n            toast.success('Profile card shared! ');\n          }).catch((err) => {\n            if (err.name !== 'AbortError') {\n              downloadImage(blob);\n            }\n          });\n        } else {\n          downloadImage(blob);\n        }\n      }, 'image/png');\n    } catch (error) {\n      console.error('Error sharing profile card:', error);\n      toast.error('Failed to share profile card');\n    }\n  };\n\n  const downloadImage = (blob) => {\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = 'my-besties-profile.png';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n    toast.success('Profile card downloaded! ');\n  };\n\n  // Prepare data for layout component\n  const layoutProps = {\n    profilePhoto: userData?.photoURL,\n    displayName: userData?.displayName,\n    bio: userData?.profile?.bio,\n    badges: userData?.featuredBadges || [],\n    stats: {\n      besties: userData?.totalBesties || 0,\n      checkIns: userData?.checkInCount || 0\n    },\n    nameStyle,\n    bioStyle,\n    nameSizeClass,\n    bioSizeClass,\n    photoShape,\n    photoBorder,\n    decorativeElements: customization.decorativeElements || []\n  };\n\n  return (\n    <>\n      <div\n        id=\"profile-card-shareable\"\n        className={`card mb-6 relative overflow-hidden shadow-2xl profile-card-aura-${currentAura} profile-card-pattern ${patternClass}`}\n        style={{ background: backgroundStyle }}\n      >\n        {/* Action Buttons */}\n        <div className=\"absolute top-4 right-4 color-picker-container flex flex-col gap-2 z-20\">\n          {/* Customize Button */}\n          <button\n            onClick={() => setShowCustomizer(true)}\n            className=\"w-10 h-10 rounded-full bg-gradient-primary text-white backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all text-lg\"\n            title=\"Customize your vibe\"\n          >\n            \n          </button>\n        <button\n          onClick={() => navigate('/edit-profile')}\n          className=\"w-10 h-10 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all hover:bg-white dark:hover:bg-gray-800 text-xl\"\n          title=\"Edit profile\"\n        >\n          \n        </button>\n\n        {/* Color Picker Button */}\n        <button\n          onClick={() => setShowColorPicker(!showColorPicker)}\n          className=\"w-10 h-10 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all hover:bg-white dark:hover:bg-gray-800\"\n          title=\"Change background color\"\n        >\n          \n        </button>\n\n        {/* Aura Picker Button */}\n        <button\n          onClick={() => setShowAuraPicker(!showAuraPicker)}\n          className=\"w-10 h-10 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm shadow-xl flex items-center justify-center hover:scale-110 transition-all hover:bg-white dark:hover:bg-gray-800\"\n          title=\"Change profile aura\"\n        >\n          \n        </button>\n\n        {showColorPicker && (\n          <>\n            <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 z-40\" onClick={() => setShowColorPicker(false)} />\n            <div className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border-2 border-gray-200 dark:border-gray-600 p-4 z-50 w-80 max-h-[500px] overflow-y-auto\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-lg font-display text-gray-800 dark:text-gray-200\">Choose Background</h3>\n                <button\n                  onClick={() => setShowColorPicker(false)}\n                  className=\"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-400\"\n                >\n                  \n                </button>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                {GRADIENT_OPTIONS.map((option) => (\n                  <button\n                    key={option.id}\n                    onClick={() => handleColorChange(option)}\n                    className=\"h-16 rounded-lg shadow-md hover:scale-105 transition-transform border-2 border-transparent hover:border-primary\"\n                    style={{ background: option.gradient }}\n                    title={option.name}\n                  >\n                    <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300 drop-shadow-sm\">\n                      {option.name}\n                    </span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n\n        {showAuraPicker && (\n          <div className=\"aura-picker-container\">\n            <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 z-40\" onClick={() => setShowAuraPicker(false)} />\n            <div className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border-2 border-gray-200 dark:border-gray-600 p-4 z-50 w-80 max-h-[500px] overflow-y-auto\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-lg font-display text-gray-800 dark:text-gray-200\">Choose Profile Aura </h3>\n                <button\n                  onClick={() => setShowAuraPicker(false)}\n                  className=\"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-400\"\n                >\n                  \n                </button>\n              </div>\n              <div className=\"space-y-2\">\n                {AURA_OPTIONS.map((option) => (\n                  <button\n                    key={option.id}\n                    onClick={() => handleAuraChange(option)}\n                    className={`w-full p-3 rounded-lg shadow-md hover:scale-105 transition-transform border-2 text-left ${\n                      (userData?.profile?.aura || 'none') === option.id\n                        ? 'border-primary bg-purple-50 dark:bg-purple-900/30'\n                        : 'border-transparent hover:border-primary bg-gray-50 dark:bg-gray-700'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-2xl\">{option.emoji}</span>\n                      <div className=\"flex-1\">\n                        <div className=\"font-semibold text-gray-800 dark:text-gray-200\">{option.name}</div>\n                        <div className=\"text-xs text-gray-600 dark:text-gray-400\">{option.description}</div>\n                      </div>\n                      {(userData?.profile?.aura || 'none') === option.id && (\n                        <span className=\"text-primary\"></span>\n                      )}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n        {/* Photo Management Menu - Floating */}\n        {showPhotoMenu && (\n          <div className=\"fixed inset-0 bg-black/50 z-30\" onClick={() => setShowPhotoMenu(false)}>\n            <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border-2 border-gray-200 dark:border-gray-600 p-4 w-64\">\n              <div className=\"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3\">Manage Photo</div>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  fileInputRef.current?.click();\n                  setShowPhotoMenu(false);\n                }}\n                disabled={uploading}\n                className=\"w-full text-left px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\n              >\n                 Replace Photo\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleRemovePhoto();\n                }}\n                className=\"w-full text-left px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg text-sm font-semibold text-red-600 dark:text-red-400\"\n              >\n                 Remove Photo\n              </button>\n            </div>\n          </div>\n        )}\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handlePhotoUpload}\n          className=\"hidden\"\n        />\n\n        {/* Dynamic Layout Component */}\n        <LayoutComponent {...layoutProps} />\n\n      {/* Social Sharing Icons - Cute & Small */}\n      <div className=\"mt-6 relative z-10\">\n        <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-2 font-semibold\">Share your profile:</p>\n\n        {/* Download Card Button */}\n        <button\n          onClick={handleShareProfileCard}\n          className=\"mb-3 px-4 py-2 bg-gradient-primary text-white rounded-full text-sm font-bold shadow-lg hover:shadow-xl transition-all hover:scale-105\"\n        >\n           Download Profile Card\n        </button>\n\n        <div className=\"flex gap-2 justify-center flex-wrap\">\n          {/* Facebook */}\n          <button\n            onClick={() => {\n              const url = `${window.location.origin}/user/${currentUser.uid}`;\n              const text = `Come be my bestie on Besties! `;\n              const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n              if (isMobile) {\n                // Try to open Facebook app first\n                window.location.href = `fb://profile/${currentUser.uid}`;\n                // Fallback to web after a delay\n                setTimeout(() => {\n                  window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(text)}`, '_blank');\n                }, 1500);\n              } else {\n                window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(text)}`, '_blank');\n              }\n            }}\n            className=\"w-8 h-8 rounded-full bg-[#1877f2] hover:bg-[#1864d9] text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110\"\n            title=\"Share on Facebook\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n            </svg>\n          </button>\n\n          {/* Twitter/X */}\n          <button\n            onClick={() => {\n              const url = `${window.location.origin}/user/${currentUser.uid}`;\n              const text = `Come be my bestie on Besties! `;\n              const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n              if (isMobile) {\n                // Try to open Twitter app first\n                window.location.href = `twitter://post?message=${encodeURIComponent(text + ' ' + url)}`;\n                // Fallback to web after a delay\n                setTimeout(() => {\n                  window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`, '_blank');\n                }, 1500);\n              } else {\n                window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`, '_blank');\n              }\n            }}\n            className=\"w-8 h-8 rounded-full bg-black hover:bg-gray-800 text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110\"\n            title=\"Share on X (Twitter)\"\n          >\n            <svg className=\"w-3.5 h-3.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n            </svg>\n          </button>\n\n          {/* WhatsApp */}\n          <button\n            onClick={() => {\n              const url = `${window.location.origin}/user/${currentUser.uid}`;\n              const text = `Come be my bestie on Besties! `;\n              const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n              if (isMobile) {\n                // Try to open WhatsApp app first\n                window.location.href = `whatsapp://send?text=${encodeURIComponent(text + ' ' + url)}`;\n                // Fallback to web after a delay\n                setTimeout(() => {\n                  window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');\n                }, 1500);\n              } else {\n                window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');\n              }\n            }}\n            className=\"w-8 h-8 rounded-full bg-[#25d366] hover:bg-[#20bd5a] text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110\"\n            title=\"Share on WhatsApp\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\"/>\n            </svg>\n          </button>\n\n          {/* Instagram - Copy Link */}\n          <button\n            onClick={() => {\n              const url = `${window.location.origin}/user/${currentUser.uid}`;\n              navigator.clipboard.writeText(url);\n              toast.success('Profile link copied! Share it on Instagram ');\n            }}\n            className=\"w-8 h-8 rounded-full bg-gradient-to-tr from-[#f09433] via-[#e6683c] to-[#bc1888] hover:opacity-90 text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110\"\n            title=\"Copy link for Instagram\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n            </svg>\n          </button>\n\n          {/* Copy Link Button */}\n          <button\n            onClick={() => {\n              const url = `${window.location.origin}/user/${currentUser.uid}`;\n              navigator.clipboard.writeText(url);\n              toast.success('Profile link copied to clipboard!');\n            }}\n            className=\"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-700 text-white flex items-center justify-center transition-all shadow-md hover:shadow-lg hover:scale-110\"\n            title=\"Copy link\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n      </div>\n\n      {/* Profile Customizer Modal */}\n      {showCustomizer && (\n        <Suspense fallback={null}>\n          <ProfileCustomizer\n            currentUser={currentUser}\n            userData={userData}\n            onClose={() => setShowCustomizer(false)}\n          />\n        </Suspense>\n      )}\n    </>\n  );\n};\n\nexport default ProfileCard;\n","import React from 'react';\n\nconst ProfileCompletion = ({\n  profileCompletion,\n  animatedProgress,\n  onTaskNavigation\n}) => {\n  const getProgressColor = (percentage) => {\n    if (percentage === 100) return 'bg-green-500';\n    if (percentage >= 60) return 'bg-yellow-500';\n    return 'bg-red-500';\n  };\n\n  // Hide when 100% complete\n  if (profileCompletion.percentage >= 100) {\n    return null;\n  }\n\n  return (\n    <div className=\"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-2 border-purple-100 dark:border-gray-600\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-xl font-display text-gradient\">Profile Completion </h2>\n        <span className=\"text-2xl font-bold text-gradient\">\n          {profileCompletion.completed}/{profileCompletion.total}\n        </span>\n      </div>\n\n      {/* Animated Progress Bar with Shimmer Effect */}\n      <div className=\"w-full h-4 bg-white dark:bg-gray-700 rounded-full overflow-hidden mb-4 shadow-inner relative\">\n        <div\n          className={`h-full ${getProgressColor(profileCompletion.percentage)} transition-all duration-1000 ease-out relative overflow-hidden`}\n          style={{ width: `${animatedProgress}%` }}\n        >\n          {/* Shimmer effect */}\n          <div className=\"absolute inset-0 shimmer-effect\"></div>\n        </div>\n        {/* Progress percentage text */}\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <span className=\"text-xs font-bold text-gray-700 dark:text-gray-300 drop-shadow-sm\">\n            {Math.round(profileCompletion.percentage)}%\n          </span>\n        </div>\n      </div>\n\n      {/* Task List with Navigation */}\n      <div className=\"space-y-2\">\n        {profileCompletion.tasks.map((task, index) => (\n          <div key={index} className=\"flex items-center justify-between gap-2\">\n            <div className=\"flex items-center gap-2 flex-1\">\n              <span className=\"text-lg\">\n                {task.completed ? '' : ''}\n              </span>\n              <span className={`text-sm ${task.completed ? 'text-gray-500 dark:text-gray-400 line-through' : 'text-gray-700 dark:text-gray-300 font-semibold'}`}>\n                {task.name}\n              </span>\n            </div>\n            {!task.completed && (task.path || task.action) && (\n              <button\n                onClick={() => onTaskNavigation(task)}\n                className=\"btn btn-sm btn-primary text-xs px-3 py-1\"\n              >\n                Go \n              </button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      <style>{`\n        @keyframes shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n        .shimmer-effect {\n          background: linear-gradient(\n            90deg,\n            transparent,\n            rgba(255, 255, 255, 0.4),\n            transparent\n          );\n          animation: shimmer 2s infinite;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default ProfileCompletion;\n","import React from 'react';\n\nconst WeeklySummary = ({ weeklySummary, hasWeekOfActivity, userData, bestiesCount }) => {\n  return (\n    <div className=\"card p-6 mb-6\">\n      <h2 className=\"text-xl font-display text-gray-800 dark:text-gray-200 mb-4\">Weekly Summary</h2>\n\n      <div className=\"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/30 dark:to-purple-900/30 rounded-xl p-4\">\n        <div className=\"flex items-start gap-3\">\n          <span className=\"text-4xl\">{weeklySummary.emoji}</span>\n          <div className=\"flex-1\">\n            <h3 className=\"font-semibold text-lg text-gray-800 dark:text-gray-200 mb-1\">\n              {weeklySummary.message}\n            </h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n               {weeklySummary.tip}\n            </p>\n            {hasWeekOfActivity && (\n              <div className=\"flex gap-4 text-sm\">\n                <div>\n                  <span className=\"font-semibold text-primary\">{userData?.stats?.totalCheckIns || 0}</span>\n                  <span className=\"text-gray-600 dark:text-gray-400\"> check-ins</span>\n                </div>\n                <div>\n                  <span className=\"font-semibold text-secondary\">{bestiesCount}</span>\n                  <span className=\"text-gray-600 dark:text-gray-400\"> besties</span>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WeeklySummary;\n","import React from 'react';\nimport CountUp from '../CountUp';\n\nconst LoginStreak = ({ loginStreak }) => {\n  if (loginStreak <= 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"card p-6 mb-6 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/30 dark:to-red-900/30\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-display text-gray-800 dark:text-gray-200 mb-1\">Daily Login Streak</h2>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">Keep it going! </p>\n        </div>\n        <div className=\"text-center\">\n          <div className=\"text-5xl mb-1\"></div>\n          <div className=\"text-3xl font-display text-orange-600 dark:text-orange-400\">\n            <CountUp end={loginStreak} duration={1500} />\n          </div>\n          <div className=\"text-xs text-gray-600 dark:text-gray-400\">days</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginStreak;\n","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { db } from '../../services/firebase';\nimport toast from 'react-hot-toast';\n\nconst BadgesSection = ({\n  currentUser,\n  badges,\n  featuredBadgeIds,\n  setFeaturedBadgeIds,\n  setConfettiTrigger\n}) => {\n  const navigate = useNavigate();\n  const [showBadgeSelector, setShowBadgeSelector] = useState(false);\n\n  const featuredBadges = badges.filter(b => featuredBadgeIds.includes(b.id));\n  const otherBadges = badges.filter(b => !featuredBadgeIds.includes(b.id));\n  const allBadgesToShow = [...featuredBadges, ...otherBadges];\n\n  const handleToggleFeaturedBadge = async (badgeId) => {\n    let newFeaturedBadges = [...featuredBadgeIds];\n\n    if (newFeaturedBadges.includes(badgeId)) {\n      newFeaturedBadges = newFeaturedBadges.filter(id => id !== badgeId);\n    } else {\n      if (newFeaturedBadges.length >= 3) {\n        toast.error('You can only feature up to 3 badges');\n        return;\n      }\n      newFeaturedBadges.push(badgeId);\n      setConfettiTrigger(true);\n      setTimeout(() => setConfettiTrigger(false), 100);\n    }\n\n    try {\n      await updateDoc(doc(db, 'users', currentUser.uid), {\n        featuredBadges: newFeaturedBadges,\n      });\n      setFeaturedBadgeIds(newFeaturedBadges);\n      toast.success('Featured badges updated!');\n    } catch (error) {\n      console.error('Error updating featured badges:', error);\n      toast.error('Failed to update badges');\n    }\n  };\n\n  return (\n    <>\n      <div className=\"mb-6 relative\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h2 className=\"text-2xl font-display text-gray-800 dark:text-gray-200\">Your Badges</h2>\n          <button\n            onClick={() => navigate('/badges')}\n            className=\"text-primary font-semibold hover:underline text-sm\"\n          >\n            View All \n          </button>\n        </div>\n\n        <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-4\">\n          {featuredBadgeIds.length > 0\n            ? ` ${featuredBadgeIds.length} featured badge${featuredBadgeIds.length > 1 ? 's' : ''} shown first  `\n            : ''}\n          <button\n            onClick={() => setShowBadgeSelector(true)}\n            className=\"text-primary hover:underline\"\n          >\n            Choose your top 3 to feature\n          </button>\n        </p>\n\n        {allBadgesToShow.length > 0 ? (\n          <>\n            {/* Featured Badges - Show prominently */}\n            {featuredBadges.length > 0 && (\n              <div className=\"mb-4\">\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\">\n                  {featuredBadges.map((badge) => (\n                    <div\n                      key={badge.id}\n                      className=\"card p-4 text-center transition-all bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 border-2 border-yellow-400 dark:border-yellow-600 shadow-lg\"\n                    >\n                      <div className=\"text-4xl mb-2\">{badge.icon}</div>\n                      <div className=\"font-semibold text-sm text-gray-800 dark:text-gray-200\">{badge.name}</div>\n                      <div className=\"text-xs text-yellow-600 dark:text-yellow-400 mt-1\"> Featured</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Other Badges - Scrollable horizontal list if many */}\n            {otherBadges.length > 0 && (\n              <div>\n                {otherBadges.length > 6 ? (\n                  <>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">Scroll to see all badges </p>\n                    <div className=\"flex gap-3 overflow-x-auto pb-2 scrollbar-hide\">\n                      {otherBadges.map((badge) => (\n                        <div\n                          key={badge.id}\n                          className=\"card p-4 text-center transition-all bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-700 flex-shrink-0 w-32\"\n                        >\n                          <div className=\"text-4xl mb-2\">{badge.icon}</div>\n                          <div className=\"font-semibold text-sm text-gray-800 dark:text-gray-200\">{badge.name}</div>\n                        </div>\n                      ))}\n                    </div>\n                  </>\n                ) : (\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\">\n                    {otherBadges.map((badge) => (\n                      <div\n                        key={badge.id}\n                        className=\"card p-4 text-center transition-all bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-700\"\n                      >\n                        <div className=\"text-4xl mb-2\">{badge.icon}</div>\n                        <div className=\"font-semibold text-sm text-gray-800 dark:text-gray-200\">{badge.name}</div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </>\n        ) : (\n          <div className=\"card p-8 text-center\">\n            <div className=\"text-5xl mb-3\"></div>\n            <p className=\"text-gray-800 dark:text-gray-200 font-semibold mb-2\">\n              Start earning badges!\n            </p>\n            <p className=\"text-gray-600 dark:text-gray-400 text-sm mb-4\">\n              Complete check-ins, invite friends, and stay safe to unlock achievements\n            </p>\n            <button\n              onClick={() => navigate('/badges')}\n              className=\"btn btn-primary text-sm\"\n            >\n              See All Available Badges\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Badge Selector Modal */}\n      {showBadgeSelector && (\n        <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-2xl font-display text-gray-800 dark:text-gray-200\">Choose Featured Badges</h2>\n              <button\n                onClick={() => setShowBadgeSelector(false)}\n                className=\"w-8 h-8 rounded-full bg-red-500 text-white hover:bg-red-600 flex items-center justify-center text-xl font-bold transition-colors\"\n                title=\"Close\"\n              >\n                \n              </button>\n            </div>\n\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n              Select up to 3 badges to showcase on your profile ({featuredBadgeIds.length}/3 selected)\n            </p>\n\n            {badges.length > 0 ? (\n              <div className=\"grid grid-cols-3 sm:grid-cols-4 gap-4\">\n                {badges.map((badge) => {\n                  const isSelected = featuredBadgeIds.includes(badge.id);\n                  return (\n                    <button\n                      key={badge.id}\n                      onClick={() => handleToggleFeaturedBadge(badge.id)}\n                      className={`p-4 rounded-xl text-center transition-all ${\n                        isSelected\n                          ? 'bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 border-2 border-primary shadow-lg scale-105'\n                          : 'bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-2 border-transparent'\n                      }`}\n                    >\n                      <div className=\"text-4xl mb-2\">{badge.icon}</div>\n                      <div className=\"font-semibold text-xs text-gray-800 dark:text-gray-200\">{badge.name}</div>\n                      {isSelected && <div className=\"text-xs text-primary mt-1\"> Featured</div>}\n                    </button>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <div className=\"text-5xl mb-3\"></div>\n                <p className=\"text-gray-600 dark:text-gray-400 mb-4\">No badges yet! Complete tasks to earn them.</p>\n              </div>\n            )}\n\n            <div className=\"mt-6 flex justify-center\">\n              <button\n                onClick={() => navigate('/badges')}\n                className=\"btn btn-primary\"\n              >\n                See How to Earn Badges \n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <style>{`\n        /* Hide scrollbar for horizontal badge scroll */\n        .scrollbar-hide {\n          -ms-overflow-style: none;  /* IE and Edge */\n          scrollbar-width: none;  /* Firefox */\n        }\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;  /* Chrome, Safari, Opera */\n        }\n      `}</style>\n    </>\n  );\n};\n\nexport default BadgesSection;\n","import React from 'react';\nimport CountUp from '../CountUp';\n\nconst StatsSection = ({\n  bestiesCount,\n  emergencyContactCount,\n  daysActive,\n  userData,\n  badges,\n  loginStreak,\n  nighttimeCheckIns,\n  weekendCheckIns\n}) => {\n  return (\n    <div className=\"card p-8 mb-6 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 dark:from-purple-900/30 dark:via-pink-900/30 dark:to-orange-900/30\">\n      <h2 className=\"text-3xl font-display text-gradient mb-6 text-center\">Your Impact </h2>\n\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n        {/* Besties Count */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={bestiesCount} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Besties</div>\n          </div>\n        </div>\n\n        {/* Emergency Contact Count */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={emergencyContactCount} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Times Selected</div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400\">as Emergency Contact</div>\n          </div>\n        </div>\n\n        {/* Days Active */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={daysActive} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Days Active</div>\n          </div>\n        </div>\n\n        {/* Completed Check-ins */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={userData?.stats?.completedCheckIns || 0} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Safe Check-ins</div>\n          </div>\n        </div>\n\n        {/* Badges Earned */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={badges.length} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Badges Earned</div>\n          </div>\n        </div>\n\n        {/* Login Streak */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={loginStreak} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Day Streak</div>\n          </div>\n        </div>\n\n        {/* Nighttime Check-ins */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={nighttimeCheckIns} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Night Check-ins</div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400\">9 PM - 6 AM</div>\n          </div>\n        </div>\n\n        {/* Weekend Check-ins */}\n        <div className=\"relative overflow-hidden rounded-2xl p-6 bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow\">\n          <div className=\"absolute top-0 right-0 text-6xl opacity-10\"></div>\n          <div className=\"relative z-10\">\n            <div className=\"text-4xl font-display bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-2\">\n              <CountUp end={weekendCheckIns} duration={1500} />\n            </div>\n            <div className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Weekend Check-ins</div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400\">Sat & Sun</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StatsSection;\n","import React from 'react';\nimport CountUp from '../CountUp';\n\nconst DonationStatus = ({ userData }) => {\n  if (!userData?.donationStats?.isActive) {\n    return null;\n  }\n\n  return (\n    <div className=\"card p-6 mb-6 bg-gradient-primary text-white\">\n      <h3 className=\"font-display text-xl mb-2\"> Thank You!</h3>\n      <p className=\"mb-2\">\n        You're helping keep Besties free for everyone\n      </p>\n      <div className=\"text-2xl font-display\">\n        $<CountUp end={userData.donationStats.totalDonated} duration={2000} /> donated\n      </div>\n    </div>\n  );\n};\n\nexport default DonationStatus;\n","import React from 'react';\n\nconst ProfileAuraStyles = () => {\n  return (\n    <style>{`\n      /* Aura Animations */\n      @keyframes aura-shimmer {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.7; }\n      }\n      @keyframes aura-glow {\n        0%, 100% {\n          box-shadow: 0 0 20px rgba(219, 39, 119, 0.3), 0 0 40px rgba(139, 92, 246, 0.2);\n        }\n        50% {\n          box-shadow: 0 0 40px rgba(219, 39, 119, 0.5), 0 0 80px rgba(139, 92, 246, 0.4);\n        }\n      }\n      @keyframes aura-pulse {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.02); }\n      }\n      @keyframes rainbow-border {\n        0% { border-color: #ff0000; }\n        16% { border-color: #ff7f00; }\n        33% { border-color: #ffff00; }\n        50% { border-color: #00ff00; }\n        66% { border-color: #0000ff; }\n        83% { border-color: #8b00ff; }\n        100% { border-color: #ff0000; }\n      }\n      @keyframes sparkle {\n        0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n        50% { opacity: 1; transform: scale(1) rotate(180deg); }\n      }\n\n      /* Aura Classes */\n      .profile-card-aura-shimmer::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: -100%;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n        animation: shimmer 3s infinite;\n        pointer-events: none;\n      }\n\n      .profile-card-aura-glow {\n        animation: aura-glow 3s ease-in-out infinite;\n      }\n\n      .profile-card-aura-pulse {\n        animation: aura-pulse 2s ease-in-out infinite;\n      }\n\n      .profile-card-aura-rainbow {\n        border: 4px solid;\n        animation: rainbow-border 6s linear infinite;\n      }\n\n      .profile-card-aura-sparkle::after {\n        content: '';\n        position: absolute;\n        top: 10%;\n        right: 10%;\n        font-size: 2rem;\n        animation: sparkle 2s ease-in-out infinite;\n        pointer-events: none;\n      }\n    `}</style>\n  );\n};\n\nexport default ProfileAuraStyles;\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db } from '../services/firebase';\nimport { doc, getDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport Header from '../components/Header';\nimport LivingCircle from '../components/LivingCircle';\nimport SocialShareCardsModal from '../components/SocialShareCardsModal';\nimport ConfettiCelebration from '../components/ConfettiCelebration';\nimport ProfileCard from '../components/profile/ProfileCard';\nimport ProfileCompletion from '../components/profile/ProfileCompletion';\nimport WeeklySummary from '../components/profile/WeeklySummary';\nimport LoginStreak from '../components/profile/LoginStreak';\nimport BadgesSection from '../components/profile/BadgesSection';\nimport StatsSection from '../components/profile/StatsSection';\nimport DonationStatus from '../components/profile/DonationStatus';\nimport ProfileAuraStyles from '../components/profile/ProfileAuraStyles';\n\nconst ProfilePage = () => {\n  const { currentUser, userData } = useAuth();\n  const navigate = useNavigate();\n  const [badges, setBadges] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [featuredBadgeIds, setFeaturedBadgeIds] = useState([]);\n  const [bestiesCount, setBestiesCount] = useState(0);\n  const [confettiTrigger, setConfettiTrigger] = useState(false);\n  const [emergencyContactCount, setEmergencyContactCount] = useState(0);\n  const [firstCheckInDate, setFirstCheckInDate] = useState(null);\n  const [nighttimeCheckIns, setNighttimeCheckIns] = useState(0);\n  const [weekendCheckIns, setWeekendCheckIns] = useState(0);\n  const [animatedProgress, setAnimatedProgress] = useState(0);\n\n  useEffect(() => {\n    loadData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUser]);\n\n  // Animate progress bar when profile completion changes\n  useEffect(() => {\n    const profileCompletion = calculateProfileCompletion();\n    const targetProgress = profileCompletion.percentage;\n    setAnimatedProgress(targetProgress);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userData, bestiesCount, currentUser]);\n\n  const loadData = async () => {\n    if (!currentUser) return;\n\n    try {\n      // Load badges\n      const badgesDoc = await getDoc(doc(db, 'badges', currentUser.uid));\n      if (badgesDoc.exists()) {\n        const badgesData = badgesDoc.data().badges || [];\n        setBadges(badgesData);\n      }\n\n      // Load featured badge preferences\n      const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\n      if (userDoc.exists()) {\n        const data = userDoc.data();\n        setFeaturedBadgeIds(data.featuredBadges || []);\n      }\n\n      // Load besties count\n      const bestiesQuery = query(\n        collection(db, 'besties'),\n        where('requesterId', '==', currentUser.uid),\n        where('status', '==', 'accepted')\n      );\n      const bestiesQuery2 = query(\n        collection(db, 'besties'),\n        where('recipientId', '==', currentUser.uid),\n        where('status', '==', 'accepted')\n      );\n\n      const [snapshot1, snapshot2] = await Promise.all([\n        getDocs(bestiesQuery),\n        getDocs(bestiesQuery2)\n      ]);\n\n      setBestiesCount(snapshot1.size + snapshot2.size);\n\n      // Count how many times user is an emergency contact\n      const emergencyContactQuery = query(\n        collection(db, 'checkins'),\n        where('selectedBesties', 'array-contains', currentUser.uid)\n      );\n      const emergencySnapshot = await getDocs(emergencyContactQuery);\n      setEmergencyContactCount(emergencySnapshot.size);\n\n      // Get first check-in date\n      const checkInsQuery = query(\n        collection(db, 'checkins'),\n        where('userId', '==', currentUser.uid)\n      );\n      const checkInsSnapshot = await getDocs(checkInsQuery);\n      if (!checkInsSnapshot.empty) {\n        let earliestDate = null;\n        let nightCount = 0;\n        let weekendCount = 0;\n\n        checkInsSnapshot.forEach(docSnap => {\n          const data = docSnap.data();\n          const date = data.createdAt?.toDate();\n\n          if (date) {\n            if (!earliestDate || date < earliestDate) {\n              earliestDate = date;\n            }\n\n            const hour = date.getHours();\n            if (hour >= 21 || hour < 6) {\n              nightCount++;\n            }\n\n            const day = date.getDay();\n            if (day === 0 || day === 6) {\n              weekendCount++;\n            }\n          }\n        });\n\n        setFirstCheckInDate(earliestDate);\n        setNighttimeCheckIns(nightCount);\n        setWeekendCheckIns(weekendCount);\n      }\n\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading data:', error);\n      setLoading(false);\n    }\n  };\n\n  const calculateProfileCompletion = () => {\n    const tasks = [];\n    let completed = 0;\n\n    if (currentUser?.email) {\n      tasks.push({ name: 'Add email', completed: true, path: null, section: null });\n      completed++;\n    } else {\n      tasks.push({ name: 'Add email', completed: false, path: '/settings', section: 'account' });\n    }\n\n    if (userData?.phoneNumber) {\n      tasks.push({ name: 'Add phone number', completed: true, path: null, section: null });\n      completed++;\n    } else {\n      tasks.push({ name: 'Add phone number', completed: false, path: '/edit-profile', section: 'phone' });\n    }\n\n    if (userData?.photoURL) {\n      tasks.push({ name: 'Upload profile photo', completed: true, path: null, section: null });\n      completed++;\n    } else {\n      tasks.push({ name: 'Upload profile photo', completed: false, path: null, section: 'photo', action: 'scrollToPhoto' });\n    }\n\n    if (userData?.profile?.bio) {\n      tasks.push({ name: 'Write a bio', completed: true, path: null, section: null });\n      completed++;\n    } else {\n      tasks.push({ name: 'Write a bio', completed: false, path: '/edit-profile', section: 'bio' });\n    }\n\n    if (bestiesCount >= 5) {\n      tasks.push({ name: 'Add 5 besties', completed: true, path: null, section: null });\n      completed++;\n    } else {\n      tasks.push({ name: `Add 5 besties (${bestiesCount}/5)`, completed: false, path: null, section: null, action: 'scrollToBestieCircle' });\n    }\n\n    const percentage = (completed / tasks.length) * 100;\n    return { tasks, percentage, completed, total: tasks.length };\n  };\n\n  const hasWeekOfActivity = () => {\n    if (!firstCheckInDate) return false;\n    const weekAgo = new Date();\n    weekAgo.setDate(weekAgo.getDate() - 7);\n    return firstCheckInDate <= weekAgo;\n  };\n\n  const getWeeklySummary = () => {\n    if (!hasWeekOfActivity()) {\n      return {\n        status: 'new',\n        emoji: '',\n        message: 'Building your safety journey',\n        tip: 'You\\'ll get your weekly summary after you have one week of activity!'\n      };\n    }\n\n    const checkIns = userData?.stats?.totalCheckIns || 0;\n    const besties = userData?.stats?.totalBesties || 0;\n\n    if (checkIns >= 7 && besties >= 3) {\n      return {\n        status: 'excellent',\n        emoji: '',\n        message: 'You\\'re absolutely crushing it this week!',\n        tip: 'Keep up the amazing safety habits!'\n      };\n    } else if (checkIns >= 3 || besties >= 3) {\n      return {\n        status: 'good',\n        emoji: '',\n        message: 'You\\'re doing great! Keep it up!',\n        tip: 'Try to check in regularly and add more besties.'\n      };\n    } else {\n      return {\n        status: 'needsWork',\n        emoji: '',\n        message: 'Let\\'s build your safety network!',\n        tip: 'Start by adding your closest friends as besties.'\n      };\n    }\n  };\n\n  const handleTaskNavigation = (task) => {\n    if (task.action === 'scrollToPhoto') {\n      const photoElement = document.querySelector('.photo-menu-container');\n      if (photoElement) {\n        photoElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    } else if (task.action === 'scrollToBestieCircle') {\n      const bestieCircleElement = document.querySelector('.bestie-circle-section');\n      if (bestieCircleElement) {\n        bestieCircleElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    } else if (task.path) {\n      if (task.section) {\n        navigate(`${task.path}#${task.section}`);\n      } else {\n        navigate(task.path);\n      }\n    }\n  };\n\n  const getDaysActive = () => {\n    if (!firstCheckInDate) return 0;\n    const now = new Date();\n    const diffTime = Math.abs(now - firstCheckInDate);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n\n  const profileCompletion = calculateProfileCompletion();\n  const weeklySummary = getWeeklySummary();\n  const loginStreak = userData?.loginStreak || 0;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"spinner\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n      <ConfettiCelebration trigger={confettiTrigger} type=\"badge\" />\n      <ProfileAuraStyles />\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-24 md:pb-6\">\n        {/* Profile Card */}\n        <ProfileCard currentUser={currentUser} userData={userData} />\n\n        {/* Profile Completion */}\n        <ProfileCompletion\n          profileCompletion={profileCompletion}\n          animatedProgress={animatedProgress}\n          onTaskNavigation={handleTaskNavigation}\n        />\n\n        {/* Weekly Summary */}\n        <WeeklySummary\n          weeklySummary={weeklySummary}\n          hasWeekOfActivity={hasWeekOfActivity()}\n          userData={userData}\n          bestiesCount={bestiesCount}\n        />\n\n        {/* Login Streak */}\n        <LoginStreak loginStreak={loginStreak} />\n\n        {/* Badges Section */}\n        <BadgesSection\n          currentUser={currentUser}\n          badges={badges}\n          featuredBadgeIds={featuredBadgeIds}\n          setFeaturedBadgeIds={setFeaturedBadgeIds}\n          setConfettiTrigger={setConfettiTrigger}\n        />\n\n        {/* Stats Section */}\n        <StatsSection\n          bestiesCount={bestiesCount}\n          emergencyContactCount={emergencyContactCount}\n          daysActive={getDaysActive()}\n          userData={userData}\n          badges={badges}\n          loginStreak={loginStreak}\n          nighttimeCheckIns={nighttimeCheckIns}\n          weekendCheckIns={weekendCheckIns}\n        />\n\n        {/* Bestie Circle */}\n        <div className=\"mb-6 bestie-circle-section\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-display text-gray-800 dark:text-gray-200\">Your Bestie Circle</h2>\n            <button\n              onClick={() => navigate('/besties')}\n              className=\"text-primary font-semibold hover:underline\"\n            >\n              Manage \n            </button>\n          </div>\n          <LivingCircle userId={currentUser?.uid} onAddClick={() => navigate('/besties')} />\n        </div>\n\n        {/* Donation Status */}\n        <DonationStatus userData={userData} />\n\n        {/* Settings Button */}\n        <div className=\"space-y-3\">\n          <button\n            onClick={() => navigate('/settings')}\n            className=\"w-full btn btn-secondary\"\n          >\n             Settings\n          </button>\n        </div>\n      </div>\n\n      {/* Share Modal */}\n      {showShareModal && (\n        <SocialShareCardsModal onClose={() => setShowShareModal(false)} />\n      )}\n    </div>\n  );\n};\n\nexport default ProfilePage;\n","import { db } from './firebase';\nimport {\n  collection,\n  query,\n  where,\n  getDocs,\n  doc,\n  getDoc,\n  orderBy,\n  limit,\n  Timestamp\n} from 'firebase/firestore';\n\n/**\n * Connection Strength Service\n *\n * Calculates real connection strength between besties based on actual behavior:\n * - Alert response times\n * - Check-in selection frequency\n * - Featured circle inclusion\n * - Relationship duration\n * - Recent interaction recency\n *\n * Returns a score from 0-100 where:\n * - 90-100: Incredible connection (always there when needed)\n * - 70-89: Strong connection (consistently supportive)\n * - 50-69: Good connection (reliable but room for growth)\n * - 30-49: Developing connection (occasional interaction)\n * - 0-29: Weak connection (rarely interact)\n */\n\nconst ONE_DAY = 24 * 60 * 60 * 1000;\n// const ONE_WEEK = 7 * ONE_DAY;\n// const ONE_MONTH = 30 * ONE_DAY;\n\n/**\n * Calculate comprehensive connection strength between two users\n */\nexport const calculateConnectionStrength = async (userId, bestieId) => {\n  try {\n    const scores = {\n      alertResponse: 0,      // 35 points - most important\n      checkInFrequency: 0,   // 25 points\n      featuredCircle: 0,     // 20 points\n      recency: 0,            // 15 points\n      duration: 0,           // 5 points\n    };\n\n    // Run all calculations in parallel for speed\n    const [\n      alertResponseScore,\n      checkInFrequencyScore,\n      featuredCircleScore,\n      recencyScore,\n      durationScore,\n    ] = await Promise.all([\n      calculateAlertResponseScore(userId, bestieId),\n      calculateCheckInFrequencyScore(userId, bestieId),\n      calculateFeaturedCircleScore(userId, bestieId),\n      calculateRecencyScore(userId, bestieId),\n      calculateDurationScore(userId, bestieId),\n    ]);\n\n    scores.alertResponse = alertResponseScore;\n    scores.checkInFrequency = checkInFrequencyScore;\n    scores.featuredCircle = featuredCircleScore;\n    scores.recency = recencyScore;\n    scores.duration = durationScore;\n\n    const totalScore = Math.round(\n      scores.alertResponse +\n      scores.checkInFrequency +\n      scores.featuredCircle +\n      scores.recency +\n      scores.duration\n    );\n\n    return {\n      total: Math.min(100, totalScore),\n      breakdown: scores,\n      level: getConnectionLevel(totalScore),\n    };\n  } catch (error) {\n    console.error('Error calculating connection strength:', error);\n    return {\n      total: 0,\n      breakdown: {},\n      level: 'unknown',\n    };\n  }\n};\n\n/**\n * Alert Response Score (0-35 points)\n * The most important metric - do they show up when you need them?\n */\nconst calculateAlertResponseScore = async (userId, bestieId) => {\n  try {\n    // Get all alert responses where bestieId responded to userId's alerts\n    const responsesQuery = query(\n      collection(db, 'alert_responses'),\n      where('userId', '==', userId),\n      where('responderId', '==', bestieId)\n    );\n    const responsesSnap = await getDocs(responsesQuery);\n\n    if (responsesSnap.empty) {\n      // No alerts yet - check if they've been in check-ins together as a proxy\n      const interactionsQuery = query(\n        collection(db, 'interactions'),\n        where('userId', '==', userId),\n        where('bestieId', '==', bestieId),\n        where('type', '==', 'check_in_together')\n      );\n      const interactionsSnap = await getDocs(interactionsQuery);\n\n      // Give some credit for being selected as guardian\n      return Math.min(15, interactionsSnap.size * 3);\n    }\n\n    const responses = responsesSnap.docs.map(doc => doc.data());\n\n    // Calculate average response time (in minutes)\n    const avgResponseTime = responses.reduce((sum, r) => sum + r.responseTime, 0) / responses.length / 60;\n\n    // Score based on response time\n    let timeScore = 0;\n    if (avgResponseTime < 5) timeScore = 20;        // < 5 min: instant\n    else if (avgResponseTime < 15) timeScore = 17;  // < 15 min: very fast\n    else if (avgResponseTime < 30) timeScore = 14;  // < 30 min: fast\n    else if (avgResponseTime < 60) timeScore = 10;  // < 1 hour: decent\n    else if (avgResponseTime < 180) timeScore = 5;  // < 3 hours: slow\n    else timeScore = 2;                             // > 3 hours: very slow\n\n    // Bonus for response count (reliability)\n    const reliabilityScore = Math.min(15, responses.length * 2);\n\n    return timeScore + reliabilityScore;\n  } catch (error) {\n    console.error('Error calculating alert response score:', error);\n    return 0;\n  }\n};\n\n/**\n * Check-In Frequency Score (0-25 points)\n * How often do they include each other in check-ins?\n */\nconst calculateCheckInFrequencyScore = async (userId, bestieId) => {\n  try {\n    // Get check-ins where userId selected bestieId as guardian (last 90 days)\n    const threeMonthsAgo = Timestamp.fromDate(new Date(Date.now() - 90 * ONE_DAY));\n\n    const checkInsQuery = query(\n      collection(db, 'checkins'),\n      where('userId', '==', userId),\n      where('bestieIds', 'array-contains', bestieId),\n      where('createdAt', '>=', threeMonthsAgo)\n    );\n    const checkInsSnap = await getDocs(checkInsQuery);\n\n    // Get reverse direction (bestieId selecting userId)\n    const reverseCheckInsQuery = query(\n      collection(db, 'checkins'),\n      where('userId', '==', bestieId),\n      where('bestieIds', 'array-contains', userId),\n      where('createdAt', '>=', threeMonthsAgo)\n    );\n    const reverseCheckInsSnap = await getDocs(reverseCheckInsQuery);\n\n    const userSelections = checkInsSnap.size;\n    const bestieSelections = reverseCheckInsSnap.size;\n\n    // Bidirectional is better - give bonus for mutual selection\n    const totalSelections = userSelections + bestieSelections;\n    const mutualBonus = Math.min(userSelections, bestieSelections) > 0 ? 5 : 0;\n\n    // Score based on frequency\n    let frequencyScore = 0;\n    if (totalSelections >= 20) frequencyScore = 15;\n    else if (totalSelections >= 10) frequencyScore = 12;\n    else if (totalSelections >= 5) frequencyScore = 8;\n    else if (totalSelections >= 2) frequencyScore = 5;\n    else if (totalSelections >= 1) frequencyScore = 2;\n\n    return frequencyScore + mutualBonus + Math.min(5, totalSelections);\n  } catch (error) {\n    console.error('Error calculating check-in frequency score:', error);\n    return 0;\n  }\n};\n\n/**\n * Featured Circle Score (0-20 points)\n * Are they in each other's top 5?\n */\nconst calculateFeaturedCircleScore = async (userId, bestieId) => {\n  try {\n    const [userDoc, bestieDoc] = await Promise.all([\n      getDoc(doc(db, 'users', userId)),\n      getDoc(doc(db, 'users', bestieId))\n    ]);\n\n    const userCircle = userDoc.exists() ? (userDoc.data().featuredCircle || []) : [];\n    const bestieCircle = bestieDoc.exists() ? (bestieDoc.data().featuredCircle || []) : [];\n\n    const inUserCircle = userCircle.includes(bestieId);\n    const inBestieCircle = bestieCircle.includes(userId);\n\n    // Scoring\n    if (inUserCircle && inBestieCircle) return 20; // Mutual top 5\n    if (inUserCircle) return 12; // In your top 5\n    if (inBestieCircle) return 10; // You're in their top 5\n    return 0;\n  } catch (error) {\n    console.error('Error calculating featured circle score:', error);\n    return 0;\n  }\n};\n\n/**\n * Recency Score (0-15 points)\n * How recently have they interacted?\n */\nconst calculateRecencyScore = async (userId, bestieId) => {\n  try {\n    // Get most recent interaction of any type\n    const interactionsQuery = query(\n      collection(db, 'interactions'),\n      where('userId', '==', userId),\n      where('bestieId', '==', bestieId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const interactionsSnap = await getDocs(interactionsQuery);\n\n    // Also check reverse direction\n    const reverseQuery = query(\n      collection(db, 'interactions'),\n      where('userId', '==', bestieId),\n      where('bestieId', '==', userId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const reverseSnap = await getDocs(reverseQuery);\n\n    // Get most recent from either direction\n    let lastInteraction = null;\n\n    if (!interactionsSnap.empty) {\n      lastInteraction = interactionsSnap.docs[0].data().createdAt;\n    }\n\n    if (!reverseSnap.empty) {\n      const reverseDate = reverseSnap.docs[0].data().createdAt;\n      if (!lastInteraction || reverseDate.toMillis() > lastInteraction.toMillis()) {\n        lastInteraction = reverseDate;\n      }\n    }\n\n    // If no interactions tracked yet, check most recent check-in together\n    if (!lastInteraction) {\n      const checkInQuery = query(\n        collection(db, 'checkins'),\n        where('userId', '==', userId),\n        where('bestieIds', 'array-contains', bestieId),\n        orderBy('createdAt', 'desc'),\n        limit(1)\n      );\n      const checkInSnap = await getDocs(checkInQuery);\n\n      if (!checkInSnap.empty) {\n        lastInteraction = checkInSnap.docs[0].data().createdAt;\n      }\n    }\n\n    if (!lastInteraction) return 0;\n\n    const daysSince = (Date.now() - lastInteraction.toMillis()) / ONE_DAY;\n\n    // Score based on recency\n    if (daysSince < 1) return 15;      // Today\n    if (daysSince < 3) return 12;      // Last 3 days\n    if (daysSince < 7) return 9;       // This week\n    if (daysSince < 14) return 6;      // Last 2 weeks\n    if (daysSince < 30) return 3;      // This month\n    return 1;                           // Over a month\n  } catch (error) {\n    console.error('Error calculating recency score:', error);\n    return 0;\n  }\n};\n\n/**\n * Duration Score (0-5 points)\n * How long have they been besties?\n */\nconst calculateDurationScore = async (userId, bestieId) => {\n  try {\n    // Find the bestie relationship\n    const [requesterQuery, recipientQuery] = await Promise.all([\n      getDocs(\n        query(\n          collection(db, 'besties'),\n          where('requesterId', '==', userId),\n          where('recipientId', '==', bestieId),\n          where('status', '==', 'accepted')\n        )\n      ),\n      getDocs(\n        query(\n          collection(db, 'besties'),\n          where('requesterId', '==', bestieId),\n          where('recipientId', '==', userId),\n          where('status', '==', 'accepted')\n        )\n      ),\n    ]);\n\n    const bestieDoc = !requesterQuery.empty\n      ? requesterQuery.docs[0]\n      : !recipientQuery.empty\n      ? recipientQuery.docs[0]\n      : null;\n\n    if (!bestieDoc) return 0;\n\n    const acceptedAt = bestieDoc.data().acceptedAt;\n    if (!acceptedAt) return 0;\n\n    const daysTogether = (Date.now() - acceptedAt.toMillis()) / ONE_DAY;\n\n    // Score based on duration\n    if (daysTogether >= 365) return 5;  // 1+ year\n    if (daysTogether >= 180) return 4;  // 6+ months\n    if (daysTogether >= 90) return 3;   // 3+ months\n    if (daysTogether >= 30) return 2;   // 1+ month\n    if (daysTogether >= 7) return 1;    // 1+ week\n    return 0;\n  } catch (error) {\n    console.error('Error calculating duration score:', error);\n    return 0;\n  }\n};\n\n/**\n * Get connection level description\n */\nconst getConnectionLevel = (score) => {\n  if (score >= 90) return 'incredible';\n  if (score >= 70) return 'strong';\n  if (score >= 50) return 'good';\n  if (score >= 30) return 'developing';\n  return 'weak';\n};\n\n/**\n * Get connection level color for UI\n */\nexport const getConnectionColor = (score) => {\n  if (score >= 90) return '#10b981'; // green\n  if (score >= 70) return '#3b82f6'; // blue\n  if (score >= 50) return '#f59e0b'; // orange\n  if (score >= 30) return '#f97316'; // deep orange\n  return '#94a3b8'; // gray\n};\n\n/**\n * Get connection level emoji\n */\nexport const getConnectionEmoji = (score) => {\n  if (score >= 90) return '';\n  if (score >= 70) return '';\n  if (score >= 50) return '';\n  if (score >= 30) return '';\n  return '';\n};\n\n/**\n * Calculate Circle Health Score (0-100)\n * Overall health of the entire featured circle\n */\nexport const calculateCircleHealth = async (userId) => {\n  try {\n    // Get user's featured circle\n    const userDoc = await getDoc(doc(db, 'users', userId));\n    if (!userDoc.exists()) return { score: 0, insights: [] };\n\n    const featuredCircle = userDoc.data().featuredCircle || [];\n\n    if (featuredCircle.length === 0) {\n      return {\n        score: 0,\n        insights: ['Add besties to your circle to start building connections'],\n      };\n    }\n\n    // Calculate connection strength with each circle member\n    const connectionPromises = featuredCircle.map(bestieId =>\n      calculateConnectionStrength(userId, bestieId)\n    );\n    const connections = await Promise.all(connectionPromises);\n\n    // Average connection strength\n    const avgStrength = connections.reduce((sum, c) => sum + c.total, 0) / connections.length;\n\n    // Penalties and bonuses\n    let finalScore = avgStrength;\n\n    // Penalty for incomplete circle (not having 5 besties)\n    if (featuredCircle.length < 5) {\n      finalScore *= (featuredCircle.length / 5);\n    }\n\n    // Generate insights\n    const insights = generateCircleInsights(userId, connections, featuredCircle);\n\n    return {\n      score: Math.round(finalScore),\n      avgConnectionStrength: Math.round(avgStrength),\n      circleSize: featuredCircle.length,\n      connections,\n      insights,\n    };\n  } catch (error) {\n    console.error('Error calculating circle health:', error);\n    return { score: 0, insights: ['Error calculating circle health'] };\n  }\n};\n\n/**\n * Generate actionable insights about circle health\n */\nconst generateCircleInsights = (userId, connections, featuredCircle) => {\n  const insights = [];\n\n  // Check for weak connections\n  const weakConnections = connections.filter(c => c.total < 30);\n  if (weakConnections.length > 0) {\n    insights.push({\n      type: 'warning',\n      message: `${weakConnections.length} connection${weakConnections.length > 1 ? 's' : ''} need attention`,\n      action: 'reach_out',\n    });\n  }\n\n  // Check for incomplete circle\n  if (featuredCircle.length < 5) {\n    insights.push({\n      type: 'info',\n      message: `Add ${5 - featuredCircle.length} more ${featuredCircle.length === 4 ? 'bestie' : 'besties'} to complete your circle`,\n      action: 'add_besties',\n    });\n  }\n\n  // Check for lack of recent interactions\n  const staleConnections = connections.filter(c => c.breakdown.recency < 6);\n  if (staleConnections.length > 0) {\n    insights.push({\n      type: 'tip',\n      message: `${staleConnections.length} connection${staleConnections.length > 1 ? 's' : ''} haven't been active recently`,\n      action: 'circle_check',\n    });\n  }\n\n  // Celebrate strong circle\n  if (connections.every(c => c.total >= 70) && featuredCircle.length === 5) {\n    insights.push({\n      type: 'success',\n      message: 'Your circle is thriving! Keep up the great connections ',\n      action: null,\n    });\n  }\n\n  return insights;\n};\n\n/**\n * Get last interaction time with a bestie\n */\nexport const getLastInteraction = async (userId, bestieId) => {\n  try {\n    // Check interactions collection\n    const interactionsQuery = query(\n      collection(db, 'interactions'),\n      where('userId', '==', userId),\n      where('bestieId', '==', bestieId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const snap = await getDocs(interactionsQuery);\n\n    if (!snap.empty) {\n      return snap.docs[0].data().createdAt;\n    }\n\n    // Fallback: check check-ins\n    const checkInQuery = query(\n      collection(db, 'checkins'),\n      where('userId', '==', userId),\n      where('bestieIds', 'array-contains', bestieId),\n      orderBy('createdAt', 'desc'),\n      limit(1)\n    );\n    const checkInSnap = await getDocs(checkInQuery);\n\n    if (!checkInSnap.empty) {\n      return checkInSnap.docs[0].data().createdAt;\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Error getting last interaction:', error);\n    return null;\n  }\n};\n\n/**\n * Format time ago string\n */\nexport const formatTimeAgo = (timestamp) => {\n  if (!timestamp) return 'Never';\n\n  const ms = Date.now() - timestamp.toMillis();\n  const minutes = Math.floor(ms / (1000 * 60));\n  const hours = Math.floor(ms / (1000 * 60 * 60));\n  const days = Math.floor(ms / ONE_DAY);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m ago`;\n  if (hours < 24) return `${hours}h ago`;\n  if (days === 1) return 'Yesterday';\n  if (days < 7) return `${days}d ago`;\n  if (days < 30) return `${Math.floor(days / 7)}w ago`;\n  if (days < 365) return `${Math.floor(days / 30)}mo ago`;\n  return `${Math.floor(days / 365)}y ago`;\n};\n","// 60+ Beautiful Background Themes for Profile Cards\n// Organized by aesthetic categories for 18-30 year old women\n\nexport const BACKGROUND_CATEGORIES = [\n  'plantMom',\n  'beauty',\n  'equestrian',\n  'coffee',\n  'wellness',\n  'bookworm',\n  'travel',\n  'mystical',\n  'fashion',\n  'creative',\n  'beach',\n  'cottagecore',\n  'cityGirl',\n  'cozy',\n  'whimsical',\n  'luxe'\n];\n\nexport const BACKGROUNDS = {\n  //  PLANT MOM\n  plantMom: [\n    {\n      id: 'monstera-dream',\n      name: 'Monstera Dream',\n      category: 'plantMom',\n      gradient: 'linear-gradient(135deg, #8B9D83 0%, #F5F1E8 100%)',\n      pattern: 'monstera',\n      description: 'Sage green with tropical vibes'\n    },\n    {\n      id: 'terracotta-garden',\n      name: 'Terracotta Garden',\n      category: 'plantMom',\n      gradient: 'linear-gradient(135deg, #D4A574 0%, #E8C4B8 100%)',\n      pattern: 'pots',\n      description: 'Warm terracotta and dusty rose'\n    },\n    {\n      id: 'jungle-vibes',\n      name: 'Jungle Vibes',\n      category: 'plantMom',\n      gradient: 'linear-gradient(135deg, #2D5016 0%, #4A7C59 100%)',\n      pattern: 'tropical',\n      description: 'Deep emerald jungle aesthetic'\n    },\n    {\n      id: 'succulent-garden',\n      name: 'Succulent Garden',\n      category: 'plantMom',\n      gradient: 'linear-gradient(135deg, #9DC183 0%, #E8F5E9 100%)',\n      pattern: 'geometric',\n      description: 'Fresh green with geometric touches'\n    },\n    {\n      id: 'botanical-print',\n      name: ' Botanical Print',\n      category: 'plantMom',\n      gradient: 'linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 50%, #A5D6A7 100%)',\n      pattern: 'leaves',\n      description: 'Illustrated leafy pattern',\n      illustrated: true\n    }\n  ],\n\n  //  BEAUTY & GLAM\n  beauty: [\n    {\n      id: 'rose-gold-glow',\n      name: 'Rose Gold Glow',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #E8B298 0%, #F5E6D3 100%)',\n      pattern: 'shimmer',\n      description: 'Rose gold with shimmer effect'\n    },\n    {\n      id: 'velvet-vanity',\n      name: 'Velvet Vanity',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #8B2E5D 0%, #F4A6C8 100%)',\n      pattern: 'bokeh',\n      description: 'Rich burgundy and blush'\n    },\n    {\n      id: 'pearl-elegance',\n      name: 'Pearl Elegance',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #F8F3F0 0%, #E8C4D8 100%)',\n      pattern: 'pearl',\n      description: 'Iridescent white and soft pink'\n    },\n    {\n      id: 'makeup-palette',\n      name: 'Makeup Palette',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #D4A574 0%, #F0C4B8 50%, #E8A4A4 100%)',\n      pattern: 'none',\n      description: 'Warm neutrals and blush tones'\n    },\n    {\n      id: 'glossy-glam',\n      name: 'Glossy Glam',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 50%, #FFE4E1 100%)',\n      pattern: 'shine',\n      description: 'Glossy pink perfection'\n    },\n    {\n      id: 'lipstick-kisses',\n      name: ' Lipstick Kisses',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #FFC0CB 0%, #FFB6C1 50%, #FF69B4 100%)',\n      pattern: 'hearts',\n      description: 'Playful pink lip print vibes',\n      illustrated: true\n    },\n    {\n      id: 'makeup-brushes',\n      name: ' Glam Vanity',\n      category: 'beauty',\n      gradient: 'linear-gradient(135deg, #E8C4B8 0%, #D4A574 50%, #F5E6D3 100%)',\n      pattern: 'shimmer',\n      description: 'Chic makeup counter aesthetic',\n      illustrated: true\n    }\n  ],\n\n  //  EQUESTRIAN\n  equestrian: [\n    {\n      id: 'golden-hour-stable',\n      name: 'Golden Hour Stable',\n      category: 'equestrian',\n      gradient: 'linear-gradient(135deg, #D4A574 0%, #F5DEB3 100%)',\n      pattern: 'fence',\n      description: 'Warm wheat and honey tones'\n    },\n    {\n      id: 'english-countryside',\n      name: 'English Countryside',\n      category: 'equestrian',\n      gradient: 'linear-gradient(135deg, #8B9D83 0%, #F5F1E8 100%)',\n      pattern: 'horseshoe',\n      description: 'Sage and cream elegance'\n    },\n    {\n      id: 'western-sunset',\n      name: 'Western Sunset',\n      category: 'equestrian',\n      gradient: 'linear-gradient(135deg, #CC5500 0%, #9B7EBD 100%)',\n      pattern: 'landscape',\n      description: 'Burnt orange and dusty purple'\n    },\n    {\n      id: 'stable-chic',\n      name: 'Stable Chic',\n      category: 'equestrian',\n      gradient: 'linear-gradient(135deg, #8B7355 0%, #D2B48C 100%)',\n      pattern: 'wood',\n      description: 'Rich brown and tan'\n    },\n  ],\n\n  //  COFFEE CULTURE\n  coffee: [\n    {\n      id: 'latte-love',\n      name: 'Latte Love',\n      category: 'coffee',\n      gradient: 'linear-gradient(135deg, #F5F1E8 0%, #D4A574 100%)',\n      pattern: 'steam',\n      description: 'Cream and caramel swirls'\n    },\n    {\n      id: 'espresso-yourself',\n      name: 'Espresso Yourself',\n      category: 'coffee',\n      gradient: 'linear-gradient(135deg, #6F4E37 0%, #C4A484 100%)',\n      pattern: 'beans',\n      description: 'Rich coffee brown'\n    },\n    {\n      id: 'matcha-morning',\n      name: 'Matcha Morning',\n      category: 'coffee',\n      gradient: 'linear-gradient(135deg, #A8D5BA 0%, #F5F1E8 100%)',\n      pattern: 'zen',\n      description: 'Soft green zen vibes'\n    },\n    {\n      id: 'cappuccino-dream',\n      name: 'Cappuccino Dream',\n      category: 'coffee',\n      gradient: 'linear-gradient(135deg, #F0E6DC 0%, #C9A98D 100%)',\n      pattern: 'foam',\n      description: 'Foamy beige perfection'\n    },\n    {\n      id: 'coffee-cups',\n      name: ' Coffee Shop',\n      category: 'coffee',\n      gradient: 'linear-gradient(135deg, #FFF8E1 0%, #D7CCC8 50%, #8D6E63 100%)',\n      pattern: 'dots',\n      description: 'Cozy coffee cup pattern',\n      illustrated: true\n    },\n    {\n      id: 'latte-art',\n      name: ' Latte Art',\n      category: 'coffee',\n      gradient: 'linear-gradient(135deg, #EFEBE9 0%, #A1887F 50%, #6D4C41 100%)',\n      pattern: 'swirl',\n      description: 'Barista hearts and rosettas',\n      illustrated: true\n    }\n  ],\n\n  //  WELLNESS & FITNESS\n  wellness: [\n    {\n      id: 'pilates-princess',\n      name: 'Pilates Princess',\n      category: 'wellness',\n      gradient: 'linear-gradient(135deg, #E6D5F5 0%, #FFFFFF 100%)',\n      pattern: 'geometric',\n      description: 'Soft lilac and white'\n    },\n    {\n      id: 'hot-girl-walk',\n      name: 'Hot Girl Walk',\n      category: 'wellness',\n      gradient: 'linear-gradient(135deg, #FFB6A3 0%, #FF8B94 100%)',\n      pattern: 'mesh',\n      description: 'Peachy pink energy'\n    },\n    {\n      id: 'yoga-flow',\n      name: 'Yoga Flow',\n      category: 'wellness',\n      gradient: 'linear-gradient(135deg, #A8D5E2 0%, #D5B8F0 100%)',\n      pattern: 'waves',\n      description: 'Calming blue and lavender'\n    },\n    {\n      id: 'green-smoothie',\n      name: 'Green Smoothie',\n      category: 'wellness',\n      gradient: 'linear-gradient(135deg, #B8E6B8 0%, #E8F5E8 100%)',\n      pattern: 'organic',\n      description: 'Fresh green vitality'\n    },\n    {\n      id: 'fitness-vibes',\n      name: ' Fitness Vibes',\n      category: 'wellness',\n      gradient: 'linear-gradient(135deg, #FFCCBC 0%, #FF8A65 50%, #FF5722 100%)',\n      pattern: 'energy',\n      description: 'Energetic coral orange',\n      illustrated: true\n    }\n  ],\n\n  //  BOOKWORM\n  bookworm: [\n    {\n      id: 'golden-library',\n      name: 'Golden Library',\n      category: 'bookworm',\n      gradient: 'linear-gradient(135deg, #6B2C2C 0%, #D4AF37 100%)',\n      pattern: 'books',\n      description: 'Burgundy and gold'\n    },\n    {\n      id: 'paperback-dreams',\n      name: 'Paperback Dreams',\n      category: 'bookworm',\n      gradient: 'linear-gradient(135deg, #F5F1E8 0%, #C4A484 100%)',\n      pattern: 'pages',\n      description: 'Cream and coffee'\n    },\n    {\n      id: 'midnight-reader',\n      name: 'Midnight Reader',\n      category: 'bookworm',\n      gradient: 'linear-gradient(135deg, #1A2238 0%, #D4AF37 100%)',\n      pattern: 'stars',\n      description: 'Navy and gold constellation'\n    },\n    {\n      id: 'cozy-chapter',\n      name: 'Cozy Chapter',\n      category: 'bookworm',\n      gradient: 'linear-gradient(135deg, #8B7355 0%, #F5E6D3 100%)',\n      pattern: 'vintage',\n      description: 'Vintage book aesthetic'\n    },\n  ],\n\n  //  TRAVEL & ADVENTURE\n  travel: [\n    {\n      id: 'passport-ready',\n      name: 'Passport Ready',\n      category: 'travel',\n      gradient: 'linear-gradient(135deg, #87CEEB 0%, #FFB6A3 100%)',\n      pattern: 'map',\n      description: 'Sky blue and coral'\n    },\n    {\n      id: 'santorini-sunset',\n      name: 'Santorini Sunset',\n      category: 'travel',\n      gradient: 'linear-gradient(135deg, #FFFFFF 0%, #4A90E2 100%)',\n      pattern: 'mediterranean',\n      description: 'White and cobalt blue'\n    },\n    {\n      id: 'wanderlust',\n      name: 'Wanderlust',\n      category: 'travel',\n      gradient: 'linear-gradient(135deg, #FF6B6B 0%, #FFE66D 50%, #4ECDC4 100%)',\n      pattern: 'compass',\n      description: 'Sunset gradient'\n    },\n    {\n      id: 'mountain-peaks',\n      name: 'Mountain Peaks',\n      category: 'travel',\n      gradient: 'linear-gradient(135deg, #5D8AA8 0%, #F0F8FF 100%)',\n      pattern: 'mountains',\n      description: 'Blue mountain ranges'\n    },\n    {\n      id: 'tropical-escape',\n      name: 'Tropical Escape',\n      category: 'travel',\n      gradient: 'linear-gradient(135deg, #00CED1 0%, #FFD700 100%)',\n      pattern: 'palm',\n      description: 'Turquoise and gold'\n    },\n  ],\n\n  //  MYSTICAL & ASTROLOGY\n  mystical: [\n    {\n      id: 'cosmic-connection',\n      name: 'Cosmic Connection',\n      category: 'mystical',\n      gradient: 'linear-gradient(135deg, #4A148C 0%, #1A237E 100%)',\n      pattern: 'constellation',\n      description: 'Deep purple galaxy'\n    },\n    {\n      id: 'moon-child',\n      name: 'Moon Child',\n      category: 'mystical',\n      gradient: 'linear-gradient(135deg, #2C2C2C 0%, #C0C0C0 100%)',\n      pattern: 'moon',\n      description: 'Soft black and silver'\n    },\n    {\n      id: 'stargazer',\n      name: 'Stargazer',\n      category: 'mystical',\n      gradient: 'linear-gradient(135deg, #0F2027 0%, #203A43 50%, #2C5364 100%)',\n      pattern: 'stars',\n      description: 'Midnight blue with stars'\n    },\n    {\n      id: 'crystal-energy',\n      name: 'Crystal Energy',\n      category: 'mystical',\n      gradient: 'linear-gradient(135deg, #E6D5F5 0%, #B4A5D8 100%)',\n      pattern: 'crystals',\n      description: 'Amethyst and lavender'\n    },\n  ],\n\n  //  FASHION & STYLE\n  fashion: [\n    {\n      id: 'parisian-pink',\n      name: 'Parisian Pink',\n      category: 'fashion',\n      gradient: 'linear-gradient(135deg, #FFB6C1 0%, #F5F1E8 100%)',\n      pattern: 'eiffel',\n      description: 'Soft blush and cream'\n    },\n    {\n      id: 'runway-ready',\n      name: 'Runway Ready',\n      category: 'fashion',\n      gradient: 'linear-gradient(135deg, #000000 0%, #FFFFFF 50%, #FFB6C1 100%)',\n      pattern: 'geometric',\n      description: 'Black, white, and pink'\n    },\n    {\n      id: 'vintage-vogue',\n      name: 'Vintage Vogue',\n      category: 'fashion',\n      gradient: 'linear-gradient(135deg, #D4A574 0%, #F5E6D3 100%)',\n      pattern: 'retro',\n      description: 'Sepia vintage tones'\n    },\n    {\n      id: 'designer-dreams',\n      name: 'Designer Dreams',\n      category: 'fashion',\n      gradient: 'linear-gradient(135deg, #C9A98D 0%, #2C2C2C 100%)',\n      pattern: 'luxe',\n      description: 'Tan and black chic'\n    },\n    {\n      id: 'fashion-week',\n      name: ' Fashion Week',\n      category: 'fashion',\n      gradient: 'linear-gradient(135deg, #FFE4E1 0%, #FFB6C1 50%, #FF69B4 100%)',\n      pattern: 'stripes',\n      description: 'Runway stripes and pink',\n      illustrated: true\n    },\n    {\n      id: 'handbag-heaven',\n      name: ' Handbag Heaven',\n      category: 'fashion',\n      gradient: 'linear-gradient(135deg, #F5E6D3 0%, #D4A574 50%, #8B7355 100%)',\n      pattern: 'luxury',\n      description: 'Luxe leather tones',\n      illustrated: true\n    }\n  ],\n\n  //  CREATIVE & ARTSY\n  creative: [\n    {\n      id: 'paint-palette',\n      name: 'Paint Palette',\n      category: 'creative',\n      gradient: 'linear-gradient(135deg, #FFB6C1 0%, #FFE4B5 25%, #B0E57C 50%, #87CEEB 75%, #DDA0DD 100%)',\n      pattern: 'watercolor',\n      description: 'Rainbow pastel blend'\n    },\n    {\n      id: 'gallery-girl',\n      name: 'Gallery Girl',\n      category: 'creative',\n      gradient: 'linear-gradient(135deg, #FFFFFF 0%, #F5F5F5 100%)',\n      pattern: 'minimal',\n      description: 'Clean white gallery'\n    },\n    {\n      id: 'abstract-expression',\n      name: 'Abstract Expression',\n      category: 'creative',\n      gradient: 'linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 50%, #FFE66D 100%)',\n      pattern: 'abstract',\n      description: 'Bold color blocks'\n    },\n    {\n      id: 'sketch-book',\n      name: 'Sketch Book',\n      category: 'creative',\n      gradient: 'linear-gradient(135deg, #F5F1E8 0%, #E8E8E8 100%)',\n      pattern: 'doodles',\n      description: 'Paper texture with doodles'\n    },\n    {\n      id: 'paint-splatter',\n      name: ' Paint Splatter',\n      category: 'creative',\n      gradient: 'linear-gradient(135deg, #FFF9C4 0%, #FFB74D 35%, #E57373 65%, #9575CD 100%)',\n      pattern: 'splatter',\n      description: 'Colorful paint drops',\n      illustrated: true\n    },\n    {\n      id: 'music-notes',\n      name: ' Music Vibes',\n      category: 'creative',\n      gradient: 'linear-gradient(135deg, #E1BEE7 0%, #CE93D8 50%, #BA68C8 100%)',\n      pattern: 'notes',\n      description: 'Musical note pattern',\n      illustrated: true\n    }\n  ],\n\n  //  BEACH & OCEAN\n  beach: [\n    {\n      id: 'coastal-calm',\n      name: 'Coastal Calm',\n      category: 'beach',\n      gradient: 'linear-gradient(135deg, #A8D5E2 0%, #F5DEB3 100%)',\n      pattern: 'waves',\n      description: 'Seafoam and sand'\n    },\n    {\n      id: 'malibu-sunset',\n      name: 'Malibu Sunset',\n      category: 'beach',\n      gradient: 'linear-gradient(135deg, #FFB6A3 0%, #00CED1 50%, #FFD700 100%)',\n      pattern: 'sunset',\n      description: 'Coral, turquoise, gold'\n    },\n    {\n      id: 'seashell-collection',\n      name: 'Seashell Collection',\n      category: 'beach',\n      gradient: 'linear-gradient(135deg, #F5F1E8 0%, #B0E0E6 100%)',\n      pattern: 'shells',\n      description: 'Cream and soft blue'\n    },\n    {\n      id: 'tropical-waters',\n      name: 'Tropical Waters',\n      category: 'beach',\n      gradient: 'linear-gradient(135deg, #00CED1 0%, #20B2AA 100%)',\n      pattern: 'ripple',\n      description: 'Crystal clear turquoise'\n    },\n  ],\n\n  //  COTTAGECORE\n  cottagecore: [\n    {\n      id: 'wildflower-meadow',\n      name: 'Wildflower Meadow',\n      category: 'cottagecore',\n      gradient: 'linear-gradient(135deg, #FFFACD 0%, #E6D5F5 100%)',\n      pattern: 'flowers',\n      description: 'Soft yellow and lavender'\n    },\n    {\n      id: 'french-countryside',\n      name: 'French Countryside',\n      category: 'cottagecore',\n      gradient: 'linear-gradient(135deg, #8B9D83 0%, #F5F1E8 100%)',\n      pattern: 'gingham',\n      description: 'Olive and cream'\n    },\n    {\n      id: 'cottage-garden',\n      name: 'Cottage Garden',\n      category: 'cottagecore',\n      gradient: 'linear-gradient(135deg, #FFB6C1 0%, #E6D5F5 50%, #B0E57C 100%)',\n      pattern: 'florals',\n      description: 'Soft pastels with flowers'\n    },\n    {\n      id: 'strawberry-patch',\n      name: 'Strawberry Patch',\n      category: 'cottagecore',\n      gradient: 'linear-gradient(135deg, #FFE4E1 0%, #FF6B6B 100%)',\n      pattern: 'strawberry',\n      description: 'Pink and berry red'\n    },\n    {\n      id: 'butterfly-garden',\n      name: ' Butterfly Garden',\n      category: 'cottagecore',\n      gradient: 'linear-gradient(135deg, #FFF9C4 0%, #F48FB1 50%, #BA68C8 100%)',\n      pattern: 'butterflies',\n      description: 'Fluttering butterfly wings',\n      illustrated: true\n    },\n    {\n      id: 'flower-field',\n      name: ' Flower Field',\n      category: 'cottagecore',\n      gradient: 'linear-gradient(135deg, #FFEBEE 0%, #F8BBD0 35%, #CE93D8 65%, #90CAF9 100%)',\n      pattern: 'blooms',\n      description: 'Dreamy pastel blooms',\n      illustrated: true\n    }\n  ],\n\n  //  CITY GIRL\n  cityGirl: [\n    {\n      id: 'manhattan-nights',\n      name: 'Manhattan Nights',\n      category: 'cityGirl',\n      gradient: 'linear-gradient(135deg, #1A1A2E 0%, #D4AF37 100%)',\n      pattern: 'skyline',\n      description: 'Dark with gold accents'\n    },\n    {\n      id: 'rooftop-views',\n      name: 'Rooftop Views',\n      category: 'cityGirl',\n      gradient: 'linear-gradient(135deg, #FFB6A3 0%, #9B7EBD 100%)',\n      pattern: 'city',\n      description: 'Peachy pink and purple'\n    },\n    {\n      id: 'concrete-jungle',\n      name: 'Concrete Jungle',\n      category: 'cityGirl',\n      gradient: 'linear-gradient(135deg, #808080 0%, #FF1493 100%)',\n      pattern: 'urban',\n      description: 'Gray with neon accents'\n    },\n    {\n      id: 'penthouse-chic',\n      name: 'Penthouse Chic',\n      category: 'cityGirl',\n      gradient: 'linear-gradient(135deg, #2C2C2C 0%, #C9A98D 100%)',\n      pattern: 'luxe',\n      description: 'Black and tan sophistication'\n    },\n  ],\n\n  //  COZY & HYGGE\n  cozy: [\n    {\n      id: 'sunday-morning',\n      name: 'Sunday Morning',\n      category: 'cozy',\n      gradient: 'linear-gradient(135deg, #F5F1E8 0%, #D4A574 100%)',\n      pattern: 'fuzzy',\n      description: 'Warm cream and brown'\n    },\n    {\n      id: 'candle-glow',\n      name: 'Candle Glow',\n      category: 'cozy',\n      gradient: 'linear-gradient(135deg, #FFCC80 0%, #F5F1E8 100%)',\n      pattern: 'bokeh',\n      description: 'Amber and cream'\n    },\n    {\n      id: 'rainy-day',\n      name: 'Rainy Day',\n      category: 'cozy',\n      gradient: 'linear-gradient(135deg, #A8B8C8 0%, #B0E0E6 100%)',\n      pattern: 'rain',\n      description: 'Cool gray and soft blue'\n    },\n    {\n      id: 'fireplace-warmth',\n      name: 'Fireplace Warmth',\n      category: 'cozy',\n      gradient: 'linear-gradient(135deg, #8B4513 0%, #FFB347 100%)',\n      pattern: 'warm',\n      description: 'Deep brown and orange'\n    },\n    {\n      id: 'hot-cocoa',\n      name: ' Hot Cocoa',\n      category: 'cozy',\n      gradient: 'linear-gradient(135deg, #8D6E63 0%, #D7CCC8 50%, #FFCCBC 100%)',\n      pattern: 'steam',\n      description: 'Warm chocolate tones',\n      illustrated: true\n    }\n  ],\n\n  //  WHIMSICAL & DREAMY\n  whimsical: [\n    {\n      id: 'butterfly-garden',\n      name: 'Butterfly Garden',\n      category: 'whimsical',\n      gradient: 'linear-gradient(135deg, #FFB6C1 0%, #E6D5F5 100%)',\n      pattern: 'butterfly',\n      description: 'Soft pink and lilac'\n    },\n    {\n      id: 'cloud-nine',\n      name: 'Cloud Nine',\n      category: 'whimsical',\n      gradient: 'linear-gradient(135deg, #B0E0E6 0%, #FFFFFF 100%)',\n      pattern: 'clouds',\n      description: 'Soft blue and white'\n    },\n    {\n      id: 'fairy-lights',\n      name: 'Fairy Lights',\n      category: 'whimsical',\n      gradient: 'linear-gradient(135deg, #FFFACD 0%, #FFB6C1 100%)',\n      pattern: 'lights',\n      description: 'Warm with bokeh'\n    },\n    {\n      id: 'unicorn-dreams',\n      name: 'Unicorn Dreams',\n      category: 'whimsical',\n      gradient: 'linear-gradient(135deg, #FFB6C1 0%, #DDA0DD 33%, #87CEEB 66%, #FFE4E1 100%)',\n      pattern: 'magic',\n      description: 'Pastel rainbow'\n    },\n    {\n      id: 'star-gazing',\n      name: ' Star Gazing',\n      category: 'whimsical',\n      gradient: 'linear-gradient(135deg, #1A237E 0%, #3F51B5 50%, #B39DDB 100%)',\n      pattern: 'stars',\n      description: 'Night sky with twinkling stars',\n      illustrated: true\n    },\n    {\n      id: 'moon-phases',\n      name: ' Moon Phases',\n      category: 'whimsical',\n      gradient: 'linear-gradient(135deg, #424242 0%, #78909C 50%, #CFD8DC 100%)',\n      pattern: 'moons',\n      description: 'Celestial moon pattern',\n      illustrated: true\n    }\n  ],\n\n  //  LUXE & BOUGIE\n  luxe: [\n    {\n      id: 'champagne-dreams',\n      name: 'Champagne Dreams',\n      category: 'luxe',\n      gradient: 'linear-gradient(135deg, #D4AF37 0%, #F5F1E8 100%)',\n      pattern: 'bubbles',\n      description: 'Gold and cream'\n    },\n    {\n      id: 'diamond-dust',\n      name: 'Diamond Dust',\n      category: 'luxe',\n      gradient: 'linear-gradient(135deg, #C0C0C0 0%, #FFFFFF 100%)',\n      pattern: 'sparkle',\n      description: 'Silver with sparkle'\n    },\n    {\n      id: 'velvet-luxe',\n      name: 'Velvet Luxe',\n      category: 'luxe',\n      gradient: 'linear-gradient(135deg, #4A148C 0%, #D4AF37 100%)',\n      pattern: 'rich',\n      description: 'Deep purple and gold'\n    },\n    {\n      id: 'black-gold',\n      name: 'Black Gold',\n      category: 'luxe',\n      gradient: 'linear-gradient(135deg, #1A1A2E 0%, #D4AF37 100%)',\n      pattern: 'luxe',\n      description: 'Black and metallic gold'\n    },\n  ],\n};\n\n// Helper to get all backgrounds as flat array\nexport const getAllBackgrounds = () => {\n  return Object.values(BACKGROUNDS).flat();\n};\n\n// Helper to get backgrounds by category\nexport const getBackgroundsByCategory = (category) => {\n  return BACKGROUNDS[category] || [];\n};\n\n// Helper to get category display name\nexport const getCategoryName = (category) => {\n  const names = {\n    plantMom: ' Plant Mom',\n    beauty: ' Beauty & Glam',\n    equestrian: ' Equestrian',\n    coffee: ' Coffee Culture',\n    wellness: ' Wellness',\n    bookworm: ' Bookworm',\n    travel: ' Travel',\n    mystical: ' Mystical',\n    fashion: ' Fashion',\n    creative: ' Creative',\n    beach: ' Beach',\n    cottagecore: ' Cottagecore',\n    cityGirl: ' City Girl',\n    cozy: ' Cozy',\n    whimsical: ' Whimsical',\n    luxe: ' Luxe'\n  };\n  return names[category] || category;\n};\n","import React from 'react';\n\n// Classic Centered Layout - Traditional, easy to read\nconst ClassicLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  photoBorder,\n  decorativeElements\n}) => {\n  const getPhotoShapeClass = () => {\n    const shapes = {\n      circle: 'rounded-full',\n      square: 'rounded-none',\n      rounded: 'rounded-2xl',\n      heart: 'rounded-full' // Will add custom shape later\n    };\n    return shapes[photoShape] || 'rounded-full';\n  };\n\n  const getPhotoBorderClass = () => {\n    const borders = {\n      none: '',\n      classic: 'border-4 border-white shadow-2xl ring-4 ring-purple-200',\n      metallic: 'border-4 border-yellow-400 shadow-2xl ring-4 ring-yellow-300',\n      scalloped: 'border-4 border-white shadow-2xl',\n      dotted: 'border-4 border-dashed border-white shadow-xl'\n    };\n    return borders[photoBorder] || '';\n  };\n\n  return (\n    <div className=\"relative w-full p-8 text-center\">\n      {/* Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 1,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Profile Photo */}\n      <div className=\"relative inline-block z-10 mb-4\">\n        <div\n          className={`w-36 h-36 bg-gradient-primary flex items-center justify-center text-white text-5xl font-display overflow-hidden hover:scale-105 transition-all ${getPhotoShapeClass()} ${getPhotoBorderClass()}`}\n        >\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n      </div>\n\n      {/* Name */}\n      <h1\n        className={`${nameSizeClass || 'text-4xl'} font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3`}\n        style={nameStyle}\n      >\n        {displayName || 'User'}\n      </h1>\n\n      {/* Bio */}\n      {bio && (\n        <p\n          className={`${bioSizeClass || 'text-xl'} text-gray-800 dark:text-gray-200 max-w-md mx-auto mt-4`}\n          style={bioStyle}\n        >\n          \"{bio}\"\n        </p>\n      )}\n\n      {/* Badges */}\n      {badges && badges.length > 0 && (\n        <div className=\"flex gap-3 justify-center mt-6 flex-wrap\">\n          {badges.slice(0, 3).map((badge, index) => (\n            <div\n              key={index}\n              className=\"w-16 h-16 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-lg flex items-center justify-center text-3xl hover:scale-110 transition-transform\"\n              title={badge.name}\n            >\n              {badge.icon || badge.emoji}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Stats */}\n      {stats && (\n        <div className=\"mt-6 text-sm font-semibold text-gray-700 dark:text-gray-300 space-y-1\">\n          {stats.besties && <div> {stats.besties} Besties</div>}\n          {stats.checkIns && <div> {stats.checkIns} Check-ins</div>}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ClassicLayout;\n","import React from 'react';\n\n// Magazine Cover Layout - Editorial, sophisticated\nconst MagazineLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  photoBorder,\n  decorativeElements\n}) => {\n  const getPhotoShapeClass = () => {\n    const shapes = {\n      circle: 'rounded-full',\n      square: 'rounded-none',\n      rounded: 'rounded-2xl',\n      heart: 'rounded-full'\n    };\n    return shapes[photoShape] || 'rounded-2xl';\n  };\n\n  const getPhotoBorderClass = () => {\n    const borders = {\n      none: 'shadow-xl',\n      classic: 'border-4 border-white shadow-2xl',\n      metallic: 'border-4 border-yellow-400 shadow-2xl ring-4 ring-yellow-300',\n      scalloped: 'border-4 border-white shadow-2xl'\n    };\n    return borders[photoBorder] || 'shadow-xl';\n  };\n\n  return (\n    <div className=\"relative w-full p-6 text-left\">\n      {/* Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 1,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Photo and Name Section */}\n      <div className=\"relative flex items-start gap-4 mb-4 z-10\">\n        <div\n          className={`w-24 h-24 bg-gradient-primary flex items-center justify-center text-white text-3xl font-display overflow-hidden flex-shrink-0 ${getPhotoShapeClass()} ${getPhotoBorderClass()}`}\n        >\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n\n        <div className=\"flex-1 pt-2\">\n          <h1\n            className={`${nameSizeClass || 'text-3xl'} font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent leading-tight`}\n            style={nameStyle}\n          >\n            {displayName || 'User'}\n          </h1>\n        </div>\n      </div>\n\n      {/* Bio */}\n      {bio && (\n        <p\n          className={`${bioSizeClass || 'text-xl'} text-gray-800 dark:text-gray-200 mb-4 leading-relaxed`}\n          style={bioStyle}\n        >\n          \"{bio}\"\n        </p>\n      )}\n\n      {/* Badges - List Style */}\n      {badges && badges.length > 0 && (\n        <div className=\"space-y-2 mb-4\">\n          {badges.slice(0, 3).map((badge, index) => (\n            <div\n              key={index}\n              className=\"flex items-center gap-3 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-lg px-3 py-2 shadow-md\"\n            >\n              <span className=\"text-2xl\">{badge.icon || badge.emoji}</span>\n              <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">\n                {badge.name || 'Badge'}\n              </span>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Stats - Inline */}\n      {stats && (\n        <div className=\"flex gap-4 text-xs font-semibold text-gray-700 dark:text-gray-300\">\n          {stats.besties && <div> {stats.besties}</div>}\n          {stats.checkIns && <div> {stats.checkIns}</div>}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MagazineLayout;\n","import React from 'react';\n\n// Polaroid Stack Layout - Nostalgic, scrapbook vibes\nconst PolaroidLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  decorativeElements\n}) => {\n  return (\n    <div className=\"relative w-full p-6 text-center\">\n      {/* Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 1,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Main Polaroid */}\n      <div className=\"inline-block bg-white shadow-2xl p-3 pb-12 transform rotate-1 hover:rotate-0 transition-transform z-10 relative\">\n        <div className=\"w-56 h-56 bg-gradient-primary flex items-center justify-center text-white text-5xl font-display overflow-hidden\">\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n        <div className=\"mt-3 text-center\">\n          <h1\n            className={`${nameSizeClass || 'text-2xl'} font-display text-gray-800`}\n            style={{...nameStyle, background: 'none', WebkitTextFillColor: 'initial'}}\n          >\n            {displayName || 'User'}\n          </h1>\n        </div>\n      </div>\n\n      {/* Bio */}\n      {bio && (\n        <p\n          className={`${bioSizeClass || 'text-xl'} text-gray-800 dark:text-gray-200 mt-4 max-w-xs mx-auto`}\n          style={bioStyle}\n        >\n          \"{bio}\"\n        </p>\n      )}\n\n      {/* Badge Polaroids */}\n      {badges && badges.length > 0 && (\n        <div className=\"flex gap-3 justify-center mt-4 flex-wrap\">\n          {badges.slice(0, 3).map((badge, index) => (\n            <div\n              key={index}\n              className=\"inline-block bg-white shadow-lg p-2 pb-6 transform -rotate-2 hover:rotate-0 transition-transform\"\n            >\n              <div className=\"w-12 h-12 flex items-center justify-center text-2xl\">\n                {badge.icon || badge.emoji}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Stats */}\n      {stats && (\n        <div className=\"mt-4 text-xs font-semibold text-gray-700 dark:text-gray-300\">\n          {stats.besties && stats.checkIns && (\n            <span>{stats.besties} Besties  {stats.checkIns} Check-ins</span>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PolaroidLayout;\n","import React from 'react';\n\n// Split Screen Layout - Modern, balanced\nconst SplitScreenLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  photoBorder,\n  decorativeElements\n}) => {\n  const getPhotoShapeClass = () => {\n    const shapes = {\n      circle: 'rounded-full',\n      square: 'rounded-none',\n      rounded: 'rounded-2xl',\n      heart: 'rounded-full'\n    };\n    return shapes[photoShape] || 'rounded-2xl';\n  };\n\n  const getPhotoBorderClass = () => {\n    const borders = {\n      none: 'shadow-xl',\n      classic: 'border-4 border-white shadow-2xl',\n      metallic: 'border-4 border-yellow-400 shadow-2xl ring-4 ring-yellow-300',\n      scalloped: 'border-4 border-white shadow-2xl'\n    };\n    return borders[photoBorder] || 'shadow-xl';\n  };\n\n  return (\n    <div className=\"relative w-full p-6\">\n      {/* Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 1,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Main Content - Split Layout */}\n      <div className=\"flex items-center gap-4 mb-4 z-10 relative\">\n        {/* Left: Photo */}\n        <div\n          className={`w-28 h-28 bg-gradient-primary flex items-center justify-center text-white text-4xl font-display overflow-hidden flex-shrink-0 ${getPhotoShapeClass()} ${getPhotoBorderClass()}`}\n        >\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n\n        {/* Right: Info */}\n        <div className=\"flex-1\">\n          <h1\n            className={`${nameSizeClass || 'text-2xl'} font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent leading-tight mb-1`}\n            style={nameStyle}\n          >\n            {displayName || 'User'}\n          </h1>\n          {bio && (\n            <p\n              className={`${bioSizeClass || 'text-lg'} text-gray-800 dark:text-gray-200 line-clamp-2`}\n              style={bioStyle}\n            >\n              \"{bio}\"\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Bottom Section - Split */}\n      <div className=\"flex gap-4 items-center z-10 relative\">\n        {/* Left: Badges */}\n        {badges && badges.length > 0 && (\n          <div className=\"flex gap-2 flex-1\">\n            {badges.slice(0, 3).map((badge, index) => (\n              <div\n                key={index}\n                className=\"w-12 h-12 rounded-lg bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-md flex items-center justify-center text-2xl\"\n                title={badge.name}\n              >\n                {badge.icon || badge.emoji}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Right: Stats */}\n        {stats && (\n          <div className=\"text-xs font-semibold text-gray-700 dark:text-gray-300 text-right\">\n            {stats.besties && <div> {stats.besties}</div>}\n            {stats.checkIns && <div> {stats.checkIns}</div>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SplitScreenLayout;\n","import React from 'react';\n\n// Story/Full Bleed Layout - Instagram Story style, maximum impact\nconst StoryLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  decorativeElements\n}) => {\n  return (\n    <div className=\"relative w-full min-h-[400px] p-6 flex flex-col items-center justify-center text-center\">\n      {/* Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 1,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Large Photo */}\n      <div className=\"relative z-10 mb-6\">\n        <div className=\"w-40 h-40 bg-gradient-primary rounded-full flex items-center justify-center text-white text-6xl font-display overflow-hidden shadow-2xl ring-4 ring-white/50\">\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n      </div>\n\n      {/* Name - Overlaid */}\n      <h1\n        className={`${nameSizeClass || 'text-5xl'} font-display text-white drop-shadow-2xl mb-3 z-10 relative`}\n        style={{...nameStyle, textShadow: '0 2px 10px rgba(0,0,0,0.3)'}}\n      >\n        {displayName || 'User'}\n      </h1>\n\n      {/* Bio - Overlaid */}\n      {bio && (\n        <p\n          className={`${bioSizeClass || 'text-xl'} text-white drop-shadow-lg max-w-xs mx-auto mb-6 z-10 relative`}\n          style={{...bioStyle, textShadow: '0 1px 5px rgba(0,0,0,0.3)'}}\n        >\n          \"{bio}\"\n        </p>\n      )}\n\n      {/* Badges - Overlaid */}\n      {badges && badges.length > 0 && (\n        <div className=\"flex gap-3 justify-center mb-4 z-10 relative\">\n          {badges.slice(0, 3).map((badge, index) => (\n            <div\n              key={index}\n              className=\"w-14 h-14 rounded-full bg-white/90 backdrop-blur-sm shadow-xl flex items-center justify-center text-2xl\"\n              title={badge.name}\n            >\n              {badge.icon || badge.emoji}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Stats - Minimal */}\n      {stats && (\n        <div className=\"text-sm font-semibold text-white/90 drop-shadow-lg z-10 relative\">\n          {stats.besties && stats.checkIns && (\n            <span>{stats.besties}  {stats.checkIns}  </span>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default StoryLayout;\n","import React from 'react';\n\n// Bento Grid Layout - Widget-style, modern and organized\nconst BentoLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  decorativeElements\n}) => {\n  const getPhotoShapeClass = () => {\n    const shapes = {\n      circle: 'rounded-full',\n      square: 'rounded-xl',\n      rounded: 'rounded-2xl',\n      heart: 'rounded-full'\n    };\n    return shapes[photoShape] || 'rounded-2xl';\n  };\n\n  return (\n    <div className=\"relative w-full p-4\">\n      {/* Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 1,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Bento Grid */}\n      <div className=\"grid grid-cols-4 gap-3 z-10 relative\">\n        {/* Photo + Name (2x2) */}\n        <div className=\"col-span-2 row-span-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg flex flex-col items-center justify-center text-center\">\n          <div\n            className={`w-20 h-20 bg-gradient-primary flex items-center justify-center text-white text-3xl font-display overflow-hidden mb-2 shadow-md ${getPhotoShapeClass()}`}\n          >\n            {profilePhoto ? (\n              <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n            ) : (\n              <span>{displayName?.[0] || 'U'}</span>\n            )}\n          </div>\n          <h1\n            className={`text-lg font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent leading-tight`}\n            style={nameStyle}\n          >\n            {displayName || 'User'}\n          </h1>\n        </div>\n\n        {/* Bio (2x1) */}\n        {bio && (\n          <div className=\"col-span-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-3 shadow-lg flex items-center\">\n            <p\n              className={`${bioSizeClass || 'text-base'} text-gray-800 dark:text-gray-200 line-clamp-3`}\n              style={bioStyle}\n            >\n              \"{bio}\"\n            </p>\n          </div>\n        )}\n\n        {/* Badges (1x1 each) */}\n        {badges && badges.slice(0, 3).map((badge, index) => (\n          <div\n            key={index}\n            className=\"col-span-1 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-3 shadow-lg flex items-center justify-center text-2xl\"\n            title={badge.name}\n          >\n            {badge.icon || badge.emoji}\n          </div>\n        ))}\n\n        {/* Stats (2x1) */}\n        {stats && (\n          <div className=\"col-span-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-3 shadow-lg flex items-center justify-around text-xs font-semibold text-gray-700 dark:text-gray-300\">\n            {stats.besties && <div> {stats.besties}</div>}\n            {stats.checkIns && <div> {stats.checkIns}</div>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default BentoLayout;\n","import React from 'react';\n\n// Minimal Layout - Clean, zen, sophisticated\nconst MinimalLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  decorativeElements\n}) => {\n  return (\n    <div className=\"relative w-full p-12 text-center\">\n      {/* Decorative Elements (minimal, sparse) */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.slice(0, 2).map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 20,\n                height: element.size || 20,\n                color: element.color || 'currentColor',\n                opacity: (element.opacity || 1) * 0.3,\n                transform: 'translate(-50%, -50%)'\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Spacer */}\n      <div className=\"h-6\" />\n\n      {/* Small, elegant photo */}\n      <div className=\"relative inline-block z-10 mb-6\">\n        <div className=\"w-24 h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-3xl font-display overflow-hidden shadow-lg\">\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n      </div>\n\n      {/* Name - Elegant */}\n      <h1\n        className={`${nameSizeClass || 'text-3xl'} font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-4`}\n        style={nameStyle}\n      >\n        {displayName || 'User'}\n      </h1>\n\n      {/* Thin divider */}\n      <div className=\"w-12 h-px bg-gradient-to-r from-transparent via-gray-400 to-transparent mx-auto mb-4\" />\n\n      {/* Bio - Minimal */}\n      {bio && (\n        <p\n          className={`${bioSizeClass || 'text-lg'} text-gray-600 dark:text-gray-400 max-w-xs mx-auto mb-6 leading-relaxed`}\n          style={bioStyle}\n        >\n          {bio}\n        </p>\n      )}\n\n      {/* Badges - Minimal icons only */}\n      {badges && badges.length > 0 && (\n        <div className=\"flex gap-4 justify-center mb-6\">\n          {badges.slice(0, 3).map((badge, index) => (\n            <div\n              key={index}\n              className=\"text-2xl opacity-70 hover:opacity-100 transition-opacity\"\n              title={badge.name}\n            >\n              {badge.icon || badge.emoji}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Stats - Minimal */}\n      {stats && (\n        <div className=\"text-xs font-light text-gray-500 dark:text-gray-500 space-x-3\">\n          {stats.besties && <span>{stats.besties} besties</span>}\n          {stats.besties && stats.checkIns && <span></span>}\n          {stats.checkIns && <span>{stats.checkIns} check-ins</span>}\n        </div>\n      )}\n\n      {/* Spacer */}\n      <div className=\"h-6\" />\n    </div>\n  );\n};\n\nexport default MinimalLayout;\n","import React from 'react';\n\n// Scrapbook Layout - Playful, creative, journaling aesthetic\nconst ScrapbookLayout = ({\n  profilePhoto,\n  displayName,\n  bio,\n  badges,\n  stats,\n  nameStyle,\n  bioStyle,\n  nameSizeClass,\n  bioSizeClass,\n  photoShape,\n  decorativeElements\n}) => {\n  return (\n    <div className=\"relative w-full p-6 text-center\">\n      {/* Scattered Decorative Elements */}\n      {decorativeElements && decorativeElements.length > 0 && (\n        <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n          {decorativeElements.map((element, index) => (\n            <div\n              key={index}\n              className=\"absolute animate-pulse\"\n              style={{\n                left: `${element.x}%`,\n                top: `${element.y}%`,\n                width: element.size || 24,\n                height: element.size || 24,\n                color: element.color || 'currentColor',\n                opacity: element.opacity || 0.8,\n                transform: `translate(-50%, -50%) rotate(${index * 15}deg)`,\n                animationDuration: `${2 + index}s`,\n                animationDelay: `${index * 0.3}s`\n              }}\n              dangerouslySetInnerHTML={{ __html: element.svg }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Additional decorative doodles */}\n      <div className=\"absolute inset-0 pointer-events-none overflow-hidden opacity-20\">\n        {/* Wavy line doodle */}\n        <svg className=\"absolute top-[20%] left-[10%] w-16 h-8\" viewBox=\"0 0 100 50\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <path d=\"M0,25 Q25,10 50,25 T100,25\" />\n        </svg>\n        {/* Circle doodle */}\n        <svg className=\"absolute bottom-[25%] right-[15%] w-12 h-12\" viewBox=\"0 0 50 50\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <circle cx=\"25\" cy=\"25\" r=\"20\" />\n        </svg>\n        {/* Star doodle */}\n        <svg className=\"absolute top-[70%] left-[20%] w-10 h-10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n        </svg>\n      </div>\n\n      {/* Photo - Slightly rotated */}\n      <div className=\"relative inline-block z-10 mb-4 transform rotate-2\">\n        <div className=\"w-32 h-32 bg-gradient-primary rounded-2xl flex items-center justify-center text-white text-4xl font-display overflow-hidden shadow-xl border-4 border-white\">\n          {profilePhoto ? (\n            <img src={profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n          ) : (\n            <span>{displayName?.[0] || 'U'}</span>\n          )}\n        </div>\n        {/* Tape effect */}\n        <div className=\"absolute -top-2 left-1/2 transform -translate-x-1/2 w-16 h-6 bg-yellow-100 opacity-70 rounded-sm shadow-md\" style={{transform: 'translateX(-50%) rotate(-5deg)'}} />\n      </div>\n\n      {/* Name - Playful */}\n      <h1\n        className={`${nameSizeClass || 'text-3xl'} font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-2 relative z-10`}\n        style={nameStyle}\n      >\n        {displayName || 'User'}\n        <span className=\"absolute -right-4 -top-1 text-2xl\"></span>\n      </h1>\n\n      {/* Wavy underline */}\n      <svg className=\"w-32 h-2 mx-auto mb-3 relative z-10\" viewBox=\"0 0 100 10\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <path d=\"M0,5 Q25,0 50,5 T100,5\" />\n      </svg>\n\n      {/* Bio - Handwritten style */}\n      {bio && (\n        <p\n          className={`${bioSizeClass || 'text-xl'} text-gray-800 dark:text-gray-200 max-w-xs mx-auto mb-4 relative z-10`}\n          style={bioStyle}\n        >\n          \"{bio}\"\n        </p>\n      )}\n\n      {/* Badges - Sticker style */}\n      {badges && badges.length > 0 && (\n        <div className=\"flex gap-3 justify-center mb-4 z-10 relative flex-wrap\">\n          {badges.slice(0, 3).map((badge, index) => (\n            <div\n              key={index}\n              className=\"transform hover:scale-110 transition-transform\"\n              style={{rotate: `${(index - 1) * 5}deg`}}\n            >\n              <div className=\"bg-white dark:bg-gray-800 rounded-full w-16 h-16 flex flex-col items-center justify-center shadow-lg border-2 border-gray-200 dark:border-gray-600\">\n                <span className=\"text-2xl\">{badge.icon || badge.emoji}</span>\n                <span className=\"text-[8px] font-bold text-gray-600 dark:text-gray-400 mt-1\">\n                  {badge.name?.split(' ')[0] || ''}\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Stats - Casual */}\n      {stats && (\n        <div className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 z-10 relative\">\n          {stats.besties && <span>{stats.besties} </span>}\n          {stats.checkIns && <span>{stats.checkIns} </span>}\n          {stats.checkIns && <span>5</span>}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ScrapbookLayout;\n","// Export all layout components\nimport ClassicLayout from './ClassicLayout';\nimport MagazineLayout from './MagazineLayout';\nimport PolaroidLayout from './PolaroidLayout';\nimport SplitScreenLayout from './SplitScreenLayout';\nimport StoryLayout from './StoryLayout';\nimport BentoLayout from './BentoLayout';\nimport MinimalLayout from './MinimalLayout';\nimport ScrapbookLayout from './ScrapbookLayout';\n\nexport const LAYOUTS = {\n  classic: ClassicLayout,\n  magazine: MagazineLayout,\n  polaroid: PolaroidLayout,\n  split: SplitScreenLayout,\n  story: StoryLayout,\n  bento: BentoLayout,\n  minimal: MinimalLayout,\n  scrapbook: ScrapbookLayout\n};\n\nexport const LAYOUT_OPTIONS = [\n  {\n    id: 'classic',\n    name: 'Classic',\n    emoji: '',\n    description: 'Traditional, easy to read',\n    component: ClassicLayout,\n    preview: 'Center-aligned with prominent photo'\n  },\n  {\n    id: 'magazine',\n    name: 'Magazine',\n    emoji: '',\n    description: 'Editorial, sophisticated',\n    component: MagazineLayout,\n    preview: 'Magazine cover style layout'\n  },\n  {\n    id: 'polaroid',\n    name: 'Polaroid',\n    emoji: '',\n    description: 'Nostalgic, scrapbook vibes',\n    component: PolaroidLayout,\n    preview: 'Instant camera style cards'\n  },\n  {\n    id: 'split',\n    name: 'Split Screen',\n    emoji: '',\n    description: 'Modern, balanced',\n    component: SplitScreenLayout,\n    preview: 'Split layout with photo and info'\n  },\n  {\n    id: 'story',\n    name: 'Story',\n    emoji: '',\n    description: 'Instagram Story style',\n    component: StoryLayout,\n    preview: 'Full-bleed vertical format'\n  },\n  {\n    id: 'bento',\n    name: 'Bento Grid',\n    emoji: '',\n    description: 'Widget-style, organized',\n    component: BentoLayout,\n    preview: 'Modular grid system'\n  },\n  {\n    id: 'minimal',\n    name: 'Minimal',\n    emoji: '',\n    description: 'Clean, zen, sophisticated',\n    component: MinimalLayout,\n    preview: 'Maximum whitespace and elegance'\n  },\n  {\n    id: 'scrapbook',\n    name: 'Scrapbook',\n    emoji: '',\n    description: 'Playful, creative',\n    component: ScrapbookLayout,\n    preview: 'Journaling aesthetic with doodles'\n  }\n];\n\nexport const getLayoutById = (id) => {\n  return LAYOUTS[id] || LAYOUTS.classic;\n};\n\nexport const getLayoutOption = (id) => {\n  return LAYOUT_OPTIONS.find(option => option.id === id) || LAYOUT_OPTIONS[0];\n};\n\nexport {\n  ClassicLayout,\n  MagazineLayout,\n  PolaroidLayout,\n  SplitScreenLayout,\n  StoryLayout,\n  BentoLayout,\n  MinimalLayout,\n  ScrapbookLayout\n};\n"],"names":["TYPOGRAPHY_STYLES","id","name","emoji","description","nameFont","family","weight","style","googleFont","bioFont","nameSizeClass","bioSizeClass","transform","loadGoogleFonts","typography","_typography$nameFont","_typography$bioFont","fonts","Set","add","size","fontString","Array","from","join","linkId","existingLink","document","getElementById","remove","link","createElement","rel","href","concat","head","appendChild","getTypographyById","find","getNameStyle","fontFamily","fontWeight","fontStyle","textTransform","getBioStyle","_ref","trigger","type","useEffect","fireConfetti","count","defaults","origin","y","shapes","colors","fire","particleRatio","opts","confetti","_objectSpread","particleCount","Math","floor","spread","startVelocity","decay","scalar","setTimeout","angle","x","end","duration","suffix","prefix","className","value","parseInt","_jsxs","children","toLocaleString","onClose","circleCount","handleShare","platform","appUrl","window","location","message","encoded","encodeURIComponent","isMobile","test","navigator","userAgent","open","clipboard","writeText","then","toast","success","catch","error","textEncoded","urlEncoded","_jsx","onClick","e","stopPropagation","title","fill","viewBox","d","stroke","strokeLinecap","strokeLinejoin","strokeWidth","userId","onAddClick","navigate","useNavigate","allBesties","setAllBesties","useState","circleBesties","setCircleBesties","loading","setLoading","selectedSlot","setSelectedSlot","showReplaceModal","setShowReplaceModal","showShareModal","setShowShareModal","connectionStrengths","setConnectionStrengths","lastSeen","setLastSeen","loadingConnections","setLoadingConnections","overallHealth","setOverallHealth","showVibeTooltip","setShowVibeTooltip","loadConnectionData","async","strengths","lastSeenData","bestie","besties","strength","calculateConnectionStrength","lastInteraction","getLastInteraction","console","scores","Object","values","map","s","total","avgScore","length","reduce","a","b","healthWithPenalty","round","requesterQuery","recipientQuery","Promise","all","getDocs","query","collection","db","where","bestiesList","docSnap","docs","_userData$privacySett","data","userDoc","getDoc","doc","recipientId","userData","exists","checkInVisibility","privacySettings","hasActiveCheckIn","activeCheckInsQuery","empty","featuredCircle","includes","isMutual","push","displayName","photoURL","requestAttention","_userData$privacySett2","requesterId","featuredIds","featured","filter","Boolean","needsAutoFill","remaining","slice","finalCircle","saveFeaturedCircle","loadBesties","newCircle","updateDoc","slots","_","i","slotColors","index","PI","cos","sin","connectionStrength","strengthScore","connectionColor","getConnectionColor","opacity","zIndex","x1","y1","x2","y2","offset","stopColor","stopOpacity","stdDeviation","result","in","strokeDasharray","_Fragment","cx","cy","r","animationDelay","animationDuration","status","_bestie$requestAttent","active","color","ringColor","glowColor","label","getStatusInfo","lastSeenTime","left","top","ProfileWithBubble","showBubble","getConnectionEmoji","level","formatTimeAgo","handleViewProfile","bestieId","handleRemoveFromCircle","replace","cb","newBestie","handleReplaceBestie","BestieCircleShareModal","_userData$profile","_userData$displayName","_currentUser$email","_userData$profile2","currentUser","useAuth","badges","setBadges","generatingImage","setGeneratingImage","generatedImageUrl","setGeneratedImageUrl","showShareChoice","setShowShareChoice","pendingPlatform","setPendingPlatform","cardRef","useRef","loadBadges","badgesDoc","uid","allBadges","featuredBadges","currentGradient","profile","backgroundGradient","shareUrl","shareText","generateShareImage","current","resolve","imageUrl","html2canvas","backgroundColor","scale","logging","useCORS","allowTaint","toDataURL","downloadImage","download","click","showShareChoicePopup","executePlatformShare","withCard","position","ref","background","width","src","alt","crossOrigin","email","bio","badge","icon","cardText","disabled","handleShareWithLink","ProfileCustomizer","lazy","GRADIENT_OPTIONS","gradient","AURA_OPTIONS","_userData$profile3","_userData$profile4","showPhotoMenu","setShowPhotoMenu","uploading","setUploading","showColorPicker","setShowColorPicker","showAuraPicker","setShowAuraPicker","showCustomizer","setShowCustomizer","fileInputRef","currentAura","aura","customization","layoutId","layout","backgroundId","typographyId","selectedBackground","BACKGROUNDS","flat","bg","backgroundStyle","patternClass","pattern","nameStyle","bioStyle","LayoutComponent","getLayoutById","photoShape","photoBorder","blob","url","URL","createObjectURL","body","removeChild","revokeObjectURL","layoutProps","profilePhoto","stats","totalBesties","checkIns","checkInCount","decorativeElements","option","handleColorChange","_userData$profile5","_userData$profile6","handleAuraChange","_fileInputRef$current","handleRemovePhoto","accept","onChange","file","target","files","storageRef","storage","Date","now","uploadBytes","downloadURL","getDownloadURL","profileCard","toBlob","share","canShare","File","text","err","Suspense","fallback","profileCompletion","animatedProgress","onTaskNavigation","percentage","completed","tasks","task","path","action","_userData$stats","weeklySummary","hasWeekOfActivity","bestiesCount","tip","totalCheckIns","loginStreak","CountUp","featuredBadgeIds","setFeaturedBadgeIds","setConfettiTrigger","showBadgeSelector","setShowBadgeSelector","otherBadges","allBadgesToShow","isSelected","newFeaturedBadges","badgeId","handleToggleFeaturedBadge","emergencyContactCount","daysActive","nighttimeCheckIns","weekendCheckIns","completedCheckIns","_userData$donationSta","donationStats","isActive","totalDonated","ProfileAuraStyles","ProfilePage","setBestiesCount","confettiTrigger","setEmergencyContactCount","firstCheckInDate","setFirstCheckInDate","setNighttimeCheckIns","setWeekendCheckIns","setAnimatedProgress","loadData","targetProgress","calculateProfileCompletion","badgesData","bestiesQuery","bestiesQuery2","snapshot1","snapshot2","emergencyContactQuery","emergencySnapshot","checkInsQuery","checkInsSnapshot","earliestDate","nightCount","weekendCount","forEach","_data$createdAt","date","createdAt","toDate","hour","getHours","day","getDay","section","phoneNumber","weekAgo","setDate","getDate","getWeeklySummary","_userData$stats2","Header","ConfettiCelebration","ProfileCard","ProfileCompletion","photoElement","querySelector","scrollIntoView","behavior","block","bestieCircleElement","WeeklySummary","LoginStreak","BadgesSection","StatsSection","getDaysActive","diffTime","abs","ceil","LivingCircle","DonationStatus","SocialShareCardsModal","ONE_DAY","alertResponse","checkInFrequency","recency","alertResponseScore","checkInFrequencyScore","featuredCircleScore","recencyScore","durationScore","calculateAlertResponseScore","calculateCheckInFrequencyScore","calculateFeaturedCircleScore","calculateRecencyScore","calculateDurationScore","totalScore","min","breakdown","getConnectionLevel","responsesQuery","responsesSnap","interactionsQuery","interactionsSnap","responses","avgResponseTime","sum","responseTime","timeScore","threeMonthsAgo","Timestamp","fromDate","checkInsSnap","reverseCheckInsQuery","reverseCheckInsSnap","userSelections","bestieSelections","totalSelections","mutualBonus","frequencyScore","bestieDoc","userCircle","bestieCircle","inUserCircle","inBestieCircle","orderBy","limit","reverseQuery","reverseSnap","reverseDate","toMillis","checkInQuery","checkInSnap","daysSince","acceptedAt","daysTogether","score","calculateCircleHealth","insights","connectionPromises","connections","avgStrength","c","finalScore","generateCircleInsights","avgConnectionStrength","circleSize","weakConnections","staleConnections","every","snap","timestamp","ms","minutes","hours","days","BACKGROUND_CATEGORIES","plantMom","category","illustrated","beauty","equestrian","coffee","wellness","bookworm","travel","mystical","fashion","creative","beach","cottagecore","cityGirl","cozy","whimsical","luxe","getCategoryName","element","height","dangerouslySetInnerHTML","__html","svg","circle","square","rounded","heart","none","classic","metallic","scalloped","dotted","WebkitTextFillColor","textShadow","_badge$name","rotate","split","LAYOUTS","ClassicLayout","magazine","MagazineLayout","polaroid","PolaroidLayout","SplitScreenLayout","story","StoryLayout","bento","BentoLayout","minimal","MinimalLayout","scrapbook","ScrapbookLayout","LAYOUT_OPTIONS","component","preview"],"sourceRoot":""}