"use strict";(self.webpackChunkbesties_frontend=self.webpackChunkbesties_frontend||[]).push([[69],{7069:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(2555),i=t(5043),l=t(3216),n=t(7400),r=t(5472),c=t(559),d=t(579);const x=()=>{var e,s;const{alertId:t}=(0,l.g)(),x=(0,l.Zp)(),[m,o]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[j,v]=(0,i.useState)(!0);(0,i.useEffect)(()=>{y()},[t]);const y=async()=>{try{let e=await(0,r.x7)((0,r.H9)(n.db,"checkins",t)),s="checkin";if(e.exists()||(e=await(0,r.x7)((0,r.H9)(n.db,"emergency_sos",t)),s="sos"),!e.exists())return void v(!1);const i=(0,a.A)((0,a.A)({id:e.id},e.data()),{},{type:s});o(i);const l=await(0,r.x7)((0,r.H9)(n.db,"users",i.userId));l.exists()&&p(l.data())}catch(e){console.error("Error loading alert:",e)}finally{v(!1)}};if(j)return(0,d.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,d.jsx)("div",{className:"spinner"})});if(!m)return(0,d.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,d.jsx)(c.A,{}),(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-4 text-center mt-20",children:[(0,d.jsx)("div",{className:"text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,d.jsx)("h1",{className:"text-2xl font-display text-text-primary mb-2",children:"Alert Not Found"}),(0,d.jsx)("p",{className:"text-text-secondary mb-6",children:"This alert may have been resolved or removed."}),(0,d.jsx)("button",{onClick:()=>x("/"),className:"btn btn-primary",children:"Go Home"})]})]});const b="checkin"===m.type,N="sos"===m.type;return(0,d.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,d.jsx)(c.A,{}),(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,d.jsx)("div",{className:"card p-6 mb-6 ".concat(N?"bg-red-50 border-2 border-red-500":"bg-yellow-50 border-2 border-yellow-500"),children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-6xl mb-4",children:N?"\ud83c\udd98":"\ud83d\udea8"}),(0,d.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:N?"EMERGENCY ALERT":"SAFETY ALERT"}),(0,d.jsxs)("p",{className:"text-lg text-text-secondary",children:[(null===h||void 0===h?void 0:h.displayName)||"A friend"," ",N?"triggered an emergency SOS":"hasn't checked in"]})]})}),(0,d.jsxs)("div",{className:"card p-6 mb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Details"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Person"}),(0,d.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white",children:(null===h||void 0===h||null===(e=h.displayName)||void 0===e?void 0:e[0])||"?"}),(null===h||void 0===h?void 0:h.displayName)||"Unknown"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Location"}),(0,d.jsx)("div",{className:"font-semibold text-text-primary",children:m.location||"Unknown"})]}),b&&m.meetingWith&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Meeting With"}),(0,d.jsx)("div",{className:"font-semibold text-text-primary",children:m.meetingWith})]}),b&&m.notes&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Notes"}),(0,d.jsx)("div",{className:"font-semibold text-text-primary",children:m.notes})]}),m.photoURL&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Photo"}),(0,d.jsx)("img",{src:m.photoURL,alt:"Check-in",className:"w-full rounded-xl max-h-64 object-cover"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Time"}),(0,d.jsx)("div",{className:"font-semibold text-text-primary",children:null===(s=m.createdAt)||void 0===s?void 0:s.toDate().toLocaleString()})]}),b&&m.alertTime&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Expected Check-In By"}),(0,d.jsx)("div",{className:"font-semibold text-text-primary",children:m.alertTime.toDate().toLocaleTimeString()})]})]})]}),(0,d.jsxs)("div",{className:"card p-6 bg-primary/10",children:[(0,d.jsx)("h3",{className:"font-display text-lg text-text-primary mb-3",children:"What to do:"}),(0,d.jsxs)("ul",{className:"space-y-2 text-text-secondary",children:[(0,d.jsxs)("li",{className:"flex gap-2",children:[(0,d.jsx)("span",{children:"1."}),(0,d.jsxs)("span",{children:["Try calling or messaging ",null===h||void 0===h?void 0:h.displayName]})]}),(0,d.jsxs)("li",{className:"flex gap-2",children:[(0,d.jsx)("span",{children:"2."}),(0,d.jsx)("span",{children:"Check if they're at the location listed above"})]}),(0,d.jsxs)("li",{className:"flex gap-2",children:[(0,d.jsx)("span",{children:"3."}),(0,d.jsx)("span",{children:"If you can't reach them, consider contacting local authorities"})]}),N&&(0,d.jsxs)("li",{className:"flex gap-2 font-semibold text-red-600",children:[(0,d.jsx)("span",{children:"\u26a0\ufe0f"}),(0,d.jsx)("span",{children:"This is an EMERGENCY - act immediately!"})]})]})]}),(null===h||void 0===h?void 0:h.phoneNumber)&&(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)("a",{href:"tel:".concat(h.phoneNumber),className:"w-full btn btn-primary text-lg py-4 block text-center",children:["\ud83d\udcde Call ",h.displayName]})})]})]})}}}]);
//# sourceMappingURL=69.cd62ac57.chunk.js.map