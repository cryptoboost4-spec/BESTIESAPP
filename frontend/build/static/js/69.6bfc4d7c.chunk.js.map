{"version":3,"file":"static/js/69.6bfc4d7c.chunk.js","mappings":"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","sources":["pages/AlertViewPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { db, auth } from '../services/firebase';\nimport { doc, getDoc, addDoc, collection, query, where, getDocs, Timestamp } from 'firebase/firestore';\nimport toast from 'react-hot-toast';\nimport Header from '../components/Header';\n\nconst AlertViewPage = () => {\n  const { alertId } = useParams();\n  const navigate = useNavigate();\n  const [alert, setAlert] = useState(null);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [myResponse, setMyResponse] = useState(null);\n  const [responding, setResponding] = useState(false);\n  const [showNoteModal, setShowNoteModal] = useState(false);\n  const [responseNote, setResponseNote] = useState('');\n  const [pendingResponseType, setPendingResponseType] = useState(null);\n\n  useEffect(() => {\n    loadAlert();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertId]);\n\n  const loadAlert = async () => {\n    try {\n      const currentUser = auth.currentUser;\n      if (!currentUser) {\n        navigate('/login');\n        return;\n      }\n\n      // Try to load as check-in first\n      let alertDoc = await getDoc(doc(db, 'checkins', alertId));\n      let alertType = 'checkin';\n\n      // If not found, try emergency SOS\n      if (!alertDoc.exists()) {\n        alertDoc = await getDoc(doc(db, 'emergency_sos', alertId));\n        alertType = 'sos';\n      }\n\n      if (!alertDoc.exists()) {\n        setLoading(false);\n        return;\n      }\n\n      const alertData = { id: alertDoc.id, ...alertDoc.data(), type: alertType };\n      setAlert(alertData);\n\n      // Load user data\n      const userDoc = await getDoc(doc(db, 'users', alertData.userId));\n      if (userDoc.exists()) {\n        setUser(userDoc.data());\n      }\n\n      // Check if current user has already responded\n      const responsesQuery = query(\n        collection(db, 'alert_responses'),\n        where('alertId', '==', alertId),\n        where('responderId', '==', currentUser.uid)\n      );\n      const responsesSnap = await getDocs(responsesQuery);\n\n      if (!responsesSnap.empty) {\n        setMyResponse(responsesSnap.docs[0].data());\n      }\n    } catch (error) {\n      console.error('Error loading alert:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleResponse = async (responseType, withNote = false) => {\n    if (withNote) {\n      setPendingResponseType(responseType);\n      setShowNoteModal(true);\n      return;\n    }\n\n    await recordResponse(responseType, '');\n  };\n\n  const recordResponse = async (responseType, note) => {\n    const currentUser = auth.currentUser;\n    if (!currentUser || !alert) return;\n\n    setResponding(true);\n    try {\n      const now = Timestamp.now();\n      const alertCreatedAt = alert.createdAt || alert.alertedAt || now;\n      const responseTime = Math.floor((now.toMillis() - alertCreatedAt.toMillis()) / 1000);\n\n      // Create alert response\n      await addDoc(collection(db, 'alert_responses'), {\n        alertId: alertId,\n        alertType: alert.type,\n        userId: alert.userId,\n        responderId: currentUser.uid,\n        responseType: responseType,\n        responseTime: responseTime,\n        note: note || null,\n        createdAt: now,\n      });\n\n      // Create interaction record\n      await addDoc(collection(db, 'interactions'), {\n        userId: alert.userId,\n        bestieId: currentUser.uid,\n        type: 'alert_response',\n        checkInId: alert.type === 'checkin' ? alertId : null,\n        alertId: alertId,\n        metadata: {\n          responseTime: responseTime,\n          action: responseType,\n        },\n        createdAt: now,\n      });\n\n      setMyResponse({ responseType, note, createdAt: now });\n      setShowNoteModal(false);\n      setResponseNote('');\n      setPendingResponseType(null);\n\n      const messages = {\n        acknowledged: 'Response recorded - they\\'ll know you saw this',\n        called: 'Great! Hope they\\'re okay',\n        on_my_way: 'Stay safe! They\\'ll be glad you\\'re coming',\n        contacted_them: 'Thanks for reaching out to them',\n      };\n\n      toast.success(messages[responseType] || 'Response recorded');\n    } catch (error) {\n      console.error('Error recording response:', error);\n      toast.error('Failed to record response');\n    } finally {\n      setResponding(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pattern flex items-center justify-center\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n\n  if (!alert) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"max-w-2xl mx-auto p-4 text-center mt-20\">\n          <div className=\"text-6xl mb-4\">‚ö†Ô∏è</div>\n          <h1 className=\"text-2xl font-display text-text-primary mb-2\">Alert Not Found</h1>\n          <p className=\"text-text-secondary mb-6\">This alert may have been resolved or removed.</p>\n          <button onClick={() => navigate('/')} className=\"btn btn-primary\">\n            Go Home\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const isCheckIn = alert.type === 'checkin';\n  const isSOS = alert.type === 'sos';\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n\n      <div className=\"max-w-2xl mx-auto p-4 pb-20\">\n        {/* Alert Header */}\n        <div className={`card p-6 mb-6 ${isSOS ? 'bg-red-50 border-2 border-red-500' : 'bg-yellow-50 border-2 border-yellow-500'}`}>\n          <div className=\"text-center\">\n            <div className=\"text-6xl mb-4\">{isSOS ? 'üÜò' : 'üö®'}</div>\n            <h1 className=\"text-3xl font-display text-text-primary mb-2\">\n              {isSOS ? 'EMERGENCY ALERT' : 'SAFETY ALERT'}\n            </h1>\n            <p className=\"text-lg text-text-secondary\">\n              {user?.displayName || 'A friend'} {isSOS ? 'triggered an emergency SOS' : \"hasn't checked in\"}\n            </p>\n          </div>\n        </div>\n\n        {/* Alert Details */}\n        <div className=\"card p-6 mb-6\">\n          <h2 className=\"text-xl font-display text-text-primary mb-4\">Details</h2>\n\n          <div className=\"space-y-4\">\n            <div>\n              <div className=\"text-sm text-text-secondary mb-1\">Person</div>\n              <div className=\"font-semibold text-text-primary flex items-center gap-3\">\n                <div className=\"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white\">\n                  {user?.displayName?.[0] || '?'}\n                </div>\n                {user?.displayName || 'Unknown'}\n              </div>\n            </div>\n\n            <div>\n              <div className=\"text-sm text-text-secondary mb-1\">Location</div>\n              <div className=\"font-semibold text-text-primary\">\n                {alert.location || 'Unknown'}\n              </div>\n            </div>\n\n            {isCheckIn && alert.meetingWith && (\n              <div>\n                <div className=\"text-sm text-text-secondary mb-1\">Meeting With</div>\n                <div className=\"font-semibold text-text-primary\">{alert.meetingWith}</div>\n              </div>\n            )}\n\n            {isCheckIn && alert.notes && (\n              <div>\n                <div className=\"text-sm text-text-secondary mb-1\">Notes</div>\n                <div className=\"font-semibold text-text-primary\">{alert.notes}</div>\n              </div>\n            )}\n\n            {alert.photoURL && (\n              <div>\n                <div className=\"text-sm text-text-secondary mb-1\">Photo</div>\n                <img\n                  src={alert.photoURL}\n                  alt=\"Check-in\"\n                  className=\"w-full rounded-xl max-h-64 object-cover\"\n                />\n              </div>\n            )}\n\n            <div>\n              <div className=\"text-sm text-text-secondary mb-1\">Time</div>\n              <div className=\"font-semibold text-text-primary\">\n                {alert.createdAt?.toDate().toLocaleString()}\n              </div>\n            </div>\n\n            {isCheckIn && alert.alertTime && (\n              <div>\n                <div className=\"text-sm text-text-secondary mb-1\">Expected Check-In By</div>\n                <div className=\"font-semibold text-text-primary\">\n                  {alert.alertTime.toDate().toLocaleTimeString()}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Action Instructions */}\n        <div className=\"card p-6 bg-primary/10\">\n          <h3 className=\"font-display text-lg text-text-primary mb-3\">\n            What to do:\n          </h3>\n          <ul className=\"space-y-2 text-text-secondary\">\n            <li className=\"flex gap-2\">\n              <span>1.</span>\n              <span>Try calling or messaging {user?.displayName}</span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>2.</span>\n              <span>Check if they're at the location listed above</span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>3.</span>\n              <span>If you can't reach them, consider contacting local authorities</span>\n            </li>\n            {isSOS && (\n              <li className=\"flex gap-2 font-semibold text-red-600\">\n                <span>‚ö†Ô∏è</span>\n                <span>This is an EMERGENCY - act immediately!</span>\n              </li>\n            )}\n          </ul>\n        </div>\n\n        {/* Response Tracking */}\n        {myResponse ? (\n          <div className=\"card p-6 mt-6 bg-green-50 border-2 border-green-500\">\n            <h3 className=\"font-display text-lg text-text-primary mb-2 flex items-center gap-2\">\n              <span className=\"text-2xl\">‚úÖ</span>\n              You responded to this alert\n            </h3>\n            <div className=\"text-sm text-text-secondary space-y-1\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Action:</span>\n                <span className=\"capitalize\">{myResponse.responseType.replace(/_/g, ' ')}</span>\n              </div>\n              {myResponse.note && (\n                <div className=\"flex items-start gap-2 mt-2\">\n                  <span className=\"font-semibold\">Note:</span>\n                  <span className=\"flex-1\">{myResponse.note}</span>\n                </div>\n              )}\n              <div className=\"text-xs text-gray-500 mt-2\">\n                Responded {myResponse.createdAt?.toDate().toLocaleString()}\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"card p-6 mt-6 bg-gradient-to-br from-purple-50 to-pink-50\">\n            <h3 className=\"font-display text-lg text-text-primary mb-4 text-center\">\n              Let them know you're here to help\n            </h3>\n            <div className=\"grid grid-cols-2 gap-3 mb-4\">\n              <button\n                onClick={() => handleResponse('acknowledged')}\n                disabled={responding}\n                className=\"btn btn-secondary py-3 flex flex-col items-center gap-1\"\n              >\n                <span className=\"text-2xl\">üëÄ</span>\n                <span className=\"text-sm font-semibold\">I saw this</span>\n              </button>\n              <button\n                onClick={() => handleResponse('called')}\n                disabled={responding}\n                className=\"btn bg-blue-500 hover:bg-blue-600 text-white py-3 flex flex-col items-center gap-1\"\n              >\n                <span className=\"text-2xl\">üìû</span>\n                <span className=\"text-sm font-semibold\">I called them</span>\n              </button>\n              <button\n                onClick={() => handleResponse('on_my_way')}\n                disabled={responding}\n                className=\"btn bg-orange-500 hover:bg-orange-600 text-white py-3 flex flex-col items-center gap-1\"\n              >\n                <span className=\"text-2xl\">üöó</span>\n                <span className=\"text-sm font-semibold\">On my way</span>\n              </button>\n              <button\n                onClick={() => handleResponse('contacted_them')}\n                disabled={responding}\n                className=\"btn bg-green-500 hover:bg-green-600 text-white py-3 flex flex-col items-center gap-1\"\n              >\n                <span className=\"text-2xl\">‚úÖ</span>\n                <span className=\"text-sm font-semibold\">Contacted</span>\n              </button>\n            </div>\n            <button\n              onClick={() => setShowNoteModal(true)}\n              disabled={responding}\n              className=\"w-full btn btn-outline text-sm py-2\"\n            >\n              üìù Add a note about what you did\n            </button>\n          </div>\n        )}\n\n        {/* Contact Info */}\n        {user?.phoneNumber && (\n          <div className=\"mt-4\">\n            <a\n              href={`tel:${user.phoneNumber}`}\n              className=\"w-full btn btn-primary text-lg py-4 block text-center\"\n            >\n              üìû Call {user.displayName}\n            </a>\n          </div>\n        )}\n\n        {/* Note Modal */}\n        {showNoteModal && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setShowNoteModal(false)}>\n            <div className=\"bg-white rounded-xl p-6 max-w-md w-full\" onClick={(e) => e.stopPropagation()}>\n              <h3 className=\"text-xl font-display mb-4\">Add a note</h3>\n              <textarea\n                value={responseNote}\n                onChange={(e) => setResponseNote(e.target.value)}\n                placeholder=\"What did you do to help? (optional)\"\n                className=\"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none min-h-32 resize-none\"\n              />\n              <div className=\"flex gap-3 mt-4\">\n                <button\n                  onClick={() => {\n                    setShowNoteModal(false);\n                    setResponseNote('');\n                    setPendingResponseType(null);\n                  }}\n                  className=\"flex-1 btn btn-secondary\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => recordResponse(pendingResponseType || 'acknowledged', responseNote)}\n                  disabled={responding}\n                  className=\"flex-1 btn btn-primary\"\n                >\n                  {responding ? 'Saving...' : 'Save Response'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AlertViewPage;\n"],"names":["AlertViewPage","_user$displayName","_alert$createdAt","_myResponse$createdAt","alertId","useParams","navigate","useNavigate","alert","setAlert","useState","user","setUser","loading","setLoading","myResponse","setMyResponse","responding","setResponding","showNoteModal","setShowNoteModal","responseNote","setResponseNote","pendingResponseType","setPendingResponseType","useEffect","loadAlert","async","currentUser","auth","alertDoc","getDoc","doc","db","alertType","exists","alertData","_objectSpread","id","data","type","userDoc","userId","responsesQuery","query","collection","where","uid","responsesSnap","getDocs","empty","docs","error","console","handleResponse","responseType","arguments","length","undefined","recordResponse","note","now","Timestamp","alertCreatedAt","createdAt","alertedAt","responseTime","Math","floor","toMillis","addDoc","responderId","bestieId","checkInId","metadata","action","messages","acknowledged","called","on_my_way","contacted_them","toast","success","_jsx","className","children","_jsxs","Header","onClick","isCheckIn","isSOS","concat","displayName","location","meetingWith","notes","photoURL","src","alt","toDate","toLocaleString","alertTime","toLocaleTimeString","replace","disabled","phoneNumber","href","e","stopPropagation","value","onChange","target","placeholder"],"sourceRoot":""}