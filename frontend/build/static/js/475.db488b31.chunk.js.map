{"version":3,"file":"static/js/475.db488b31.chunk.js","mappings":"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","sources":["pages/AdminBackfillPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { functions } from '../services/firebase';\nimport { httpsCallable } from 'firebase/functions';\nimport Header from '../components/Header';\nimport toast from 'react-hot-toast';\n\nconst AdminBackfillPage = () => {\n  const { userData } = useAuth();\n  const [running, setRunning] = useState(false);\n  const [result, setResult] = useState(null);\n\n  const runBackfill = async () => {\n    if (!window.confirm('Are you sure you want to run the bestieUserIds backfill? This will update all existing bestie relationships.')) {\n      return;\n    }\n\n    setRunning(true);\n    setResult(null);\n\n    try {\n      console.log('üöÄ Calling backfill function...');\n      const backfillFunc = httpsCallable(functions, 'backfillBestieUserIds');\n      const response = await backfillFunc();\n\n      console.log('‚úÖ Backfill completed:', response.data);\n      setResult(response.data);\n      toast.success('Backfill completed successfully!');\n    } catch (error) {\n      console.error('‚ùå Backfill failed:', error);\n      toast.error(`Backfill failed: ${error.message}`);\n      setResult({\n        success: false,\n        error: error.message\n      });\n    } finally {\n      setRunning(false);\n    }\n  };\n\n  // Check if user is admin\n  if (!userData?.isAdmin) {\n    return (\n      <div className=\"min-h-screen bg-pattern\">\n        <Header />\n        <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n          <div className=\"card p-12 text-center\">\n            <div className=\"text-6xl mb-4\">üîí</div>\n            <h2 className=\"text-2xl font-display text-text-primary mb-2\">Admin Only</h2>\n            <p className=\"text-text-secondary\">\n              You must be an admin to access this page\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n\n      <div className=\"max-w-4xl mx-auto p-4 pb-20\">\n        <div className=\"card p-8\">\n          <h1 className=\"text-3xl font-display text-gradient mb-6\">\n            üîß Admin Backfill Tools\n          </h1>\n\n          <div className=\"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 mb-6\">\n            <h2 className=\"text-xl font-display text-yellow-900 mb-3\">\n              ‚ö†Ô∏è Backfill bestieUserIds\n            </h2>\n            <p className=\"text-gray-700 mb-4\">\n              This will populate the <code className=\"bg-yellow-100 px-2 py-1 rounded\">bestieUserIds</code> array\n              for all existing accepted bestie relationships.\n            </p>\n            <div className=\"bg-white rounded-lg p-4 mb-4\">\n              <h3 className=\"font-semibold mb-2\">What this does:</h3>\n              <ul className=\"list-disc list-inside space-y-1 text-sm text-gray-700\">\n                <li>Queries all accepted besties in the database</li>\n                <li>For each bestie pair, adds both users to each other's bestieUserIds array</li>\n                <li>Enables besties to view each other's profiles (required by Firebase rules)</li>\n                <li>Safe to run multiple times (won't create duplicates)</li>\n              </ul>\n            </div>\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n              <h3 className=\"font-semibold text-blue-900 mb-2\">üí° When to use this:</h3>\n              <p className=\"text-sm text-blue-800\">\n                Run this if besties can't view each other's profiles or see bestie data.\n                This typically happens if the onCreate Cloud Function wasn't deployed when\n                bestie relationships were created.\n              </p>\n            </div>\n          </div>\n\n          <button\n            onClick={runBackfill}\n            disabled={running}\n            className={`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all ${\n              running\n                ? 'bg-gray-400 cursor-not-allowed'\n                : 'bg-gradient-primary hover:scale-105 shadow-lg'\n            } text-white`}\n          >\n            {running ? (\n              <span className=\"flex items-center justify-center gap-3\">\n                <div className=\"spinner\"></div>\n                Running backfill...\n              </span>\n            ) : (\n              '‚ñ∂Ô∏è Run Backfill Now'\n            )}\n          </button>\n\n          {result && (\n            <div className={`mt-6 p-6 rounded-xl ${\n              result.success ? 'bg-green-50 border-2 border-green-200' : 'bg-red-50 border-2 border-red-200'\n            }`}>\n              <h3 className={`text-xl font-display mb-4 ${\n                result.success ? 'text-green-900' : 'text-red-900'\n              }`}>\n                {result.success ? '‚úÖ Success!' : '‚ùå Failed'}\n              </h3>\n\n              {result.success && (\n                <div className=\"space-y-3\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-green-700\">{result.processed || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Besties Processed</div>\n                    </div>\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-blue-700\">{result.updated || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Successfully Updated</div>\n                    </div>\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-yellow-700\">{result.skipped || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Skipped</div>\n                    </div>\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <div className=\"text-3xl font-bold text-red-700\">{result.errors?.length || 0}</div>\n                      <div className=\"text-sm text-gray-600\">Errors</div>\n                    </div>\n                  </div>\n\n                  {result.errors && result.errors.length > 0 && (\n                    <div className=\"bg-white rounded-lg p-4\">\n                      <h4 className=\"font-semibold text-red-900 mb-2\">Errors:</h4>\n                      <ul className=\"text-sm text-gray-700 space-y-1\">\n                        {result.errors.map((err, idx) => (\n                          <li key={idx}>\n                            Bestie {err.bestieId}: {err.error}\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n\n                  <p className=\"text-green-800 font-semibold mt-4\">\n                    üéâ All besties should now be able to view each other's profiles!\n                  </p>\n                </div>\n              )}\n\n              {!result.success && (\n                <div className=\"text-red-800\">\n                  <p className=\"font-semibold mb-2\">Error:</p>\n                  <pre className=\"bg-white p-4 rounded overflow-auto text-sm\">\n                    {result.error || JSON.stringify(result, null, 2)}\n                  </pre>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminBackfillPage;\n"],"names":["AdminBackfillPage","_result$errors","userData","useAuth","running","setRunning","useState","result","setResult","isAdmin","_jsxs","className","children","_jsx","Header","onClick","async","window","confirm","console","log","backfillFunc","httpsCallable","functions","response","data","toast","success","error","concat","message","disabled","processed","updated","skipped","errors","length","map","err","idx","bestieId","JSON","stringify"],"sourceRoot":""}