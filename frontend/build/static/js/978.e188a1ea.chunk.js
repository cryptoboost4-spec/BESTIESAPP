"use strict";(self.webpackChunkbesties_frontend=self.webpackChunkbesties_frontend||[]).push([[978],{6978:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var r=s(2555),a=s(5043),i=s(3216),n=s(4528),l=s(7400),o=s(5472),d=s(559),c=s(2339),m=s(7766),x=s(3889),p=s(579);const u=e=>{let{bestie:t,onRemove:s}=e;const{isDark:r}=(0,x.D)(),n=(0,i.Zp)(),[d,u]=(0,a.useState)(null),[h,b]=(0,a.useState)(null),[g,y]=(0,a.useState)(!0),[v,f]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[k,w]=(0,a.useState)(""),A=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async()=>{if(null!==t&&void 0!==t&&t.userId)try{const e=await(0,o.x7)((0,o.H9)(l.db,"users",t.userId));if(e.exists()){const t=e.data();u(t.photoURL),b(t.requestAttention)}}catch(e){console.error("Error fetching user data:",e)}finally{y(!1)}else y(!1)})()},[null===t||void 0===t?void 0:t.userId]),(0,a.useEffect)(()=>{const e=e=>{A.current&&!A.current.contains(e.target)&&f(!1)};if(v)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[v]);return t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-300 via-purple-300 to-pink-300 rounded-2xl blur opacity-20 group-hover:opacity-40 transition-opacity"}),(0,p.jsxs)("div",{className:"relative card p-5 bg-gradient-to-br from-pink-50/50 via-purple-50/50 to-pink-50/50 dark:from-pink-900/10 dark:via-purple-900/10 dark:to-pink-900/10 border-2 border-pink-200 dark:border-pink-600 hover:shadow-xl transition-all hover:transform hover:-translate-y-1 min-h-[280px] flex flex-col",children:[t.isFavorite&&(0,p.jsx)("div",{className:"absolute top-3 right-3",children:(0,p.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-lg flex items-center gap-1",children:"\u2b50 Circle"})}),(0,p.jsxs)("div",{className:"text-center mb-4 flex-1 flex flex-col justify-center",children:[g?(0,p.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-200 to-purple-200 animate-pulse rounded-full mx-auto mb-3"}):(0,p.jsxs)("div",{className:"relative inline-block",ref:A,children:[(0,p.jsx)("div",{onClick:e=>{e.stopPropagation(),f(!v)},className:"cursor-pointer",children:(0,p.jsx)(m.A,{photoURL:d,name:t.name||t.phone||"Unknown",requestAttention:h,size:"xl",showBubble:!0})}),v&&(0,p.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 ".concat(r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-xl shadow-2xl border-2 z-50 min-w-[180px]"),children:[(0,p.jsx)("button",{onClick:e=>{e.stopPropagation(),f(!1),n("/user/".concat(t.userId))},className:"w-full text-left px-4 py-2.5 ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-100 text-gray-700"," text-sm font-semibold first:rounded-t-xl"),children:"\ud83d\udc64 View Profile"}),(0,p.jsx)("button",{onClick:async e=>{e.stopPropagation(),f(!1);try{await(0,o.mZ)((0,o.H9)(l.db,"besties",t.id),{isFavorite:!t.isFavorite}),c.Ay.success(t.isFavorite?"Removed from circle":"Added to circle!")}catch(s){console.error("Error toggling circle:",s),c.Ay.error("Failed to update circle")}},className:"w-full text-left px-4 py-2.5 ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-100 text-gray-700"," text-sm font-semibold"),children:t.isFavorite?"\ud83d\udc94 Remove from Circle":"\ud83d\udc9c Add to Circle"}),(0,p.jsx)("button",{onClick:e=>{e.stopPropagation();const s=t.phone;s?window.location.href="sms:".concat(s):c.Ay.error("No phone number available"),f(!1)},className:"w-full text-left px-4 py-2.5 ".concat(r?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-100 text-gray-700"," text-sm font-semibold"),children:"\ud83d\udcac Send Message"}),(0,p.jsx)("button",{onClick:e=>{e.stopPropagation(),f(!1),N(!0)},className:"w-full text-left px-4 py-2.5 ".concat(r?"hover:bg-red-900/30":"hover:bg-red-50"," text-sm font-semibold text-red-600 last:rounded-b-xl"),children:"\ud83d\uddd1\ufe0f Delete Bestie"})]})]}),(0,p.jsxs)("div",{className:"cursor-pointer mt-3",onClick:()=>t.userId&&n("/user/".concat(t.userId)),children:[(0,p.jsx)("h3",{className:"font-display text-lg font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent truncate",children:t.name||"Unknown"}),t.phone&&(0,p.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5",children:t.phone})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[(0,p.jsx)("div",{className:"badge bg-gradient-to-r from-pink-100 to-purple-100 dark:from-pink-900/40 dark:to-purple-900/40 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-600 text-xs font-semibold",children:"\ud83d\udc9c Bestie"}),"guardian"===t.role&&(0,p.jsx)("div",{className:"badge bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-900/40 dark:to-cyan-900/40 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-600 text-xs font-semibold",children:"\ud83d\udee1\ufe0f Guardian"})]}),(0,p.jsx)("div",{className:"mt-4 pt-3 border-t border-pink-200 dark:border-pink-700",children:(0,p.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center font-medium",children:"\ud83d\udca1 Tap profile for options"})})]})]}),j&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,p.jsxs)("div",{className:"".concat(r?"bg-gray-800":"bg-white"," rounded-2xl max-w-md w-full p-6"),children:[(0,p.jsx)("h2",{className:"text-2xl font-display ".concat(r?"text-gray-100":"text-text-primary"," mb-2"),children:"Remove Bestie?"}),(0,p.jsxs)("p",{className:"text-text-secondary mb-4",children:["Are you sure you want to remove ",(0,p.jsx)("strong",{children:t.name||t.phone})," from your besties?"]}),(0,p.jsxs)("div",{className:"".concat(r?"bg-yellow-900/30 border-yellow-700":"bg-yellow-50 border-yellow-200"," border rounded-lg p-3 mb-4"),children:[(0,p.jsxs)("p",{className:"text-sm ".concat(r?"text-yellow-300":"text-yellow-800"," mb-2"),children:["\u26a0\ufe0f Type ",(0,p.jsx)("strong",{children:'"see ya"'})," or ",(0,p.jsx)("strong",{children:'"bye bye"'})," to confirm"]}),(0,p.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border-2 ".concat(r?"border-yellow-600 bg-gray-700 text-gray-100 focus:border-yellow-500":"border-yellow-300 bg-white text-gray-900 focus:border-yellow-500"," rounded-lg focus:outline-none"),placeholder:"Type here...",autoFocus:!0})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)("button",{onClick:()=>{N(!1),w("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,p.jsx)("button",{onClick:async()=>{const e=["see ya","bye bye"],r=k.toLowerCase().trim();if(e.includes(r))try{await(0,o.kd)((0,o.H9)(l.db,"besties",t.id)),c.Ay.success("Bestie removed"),N(!1),s&&s(t.id)}catch(a){console.error("Error removing bestie:",a),c.Ay.error("Failed to remove bestie")}else c.Ay.error('Please type "'.concat(e[0],'" or "').concat(e[1],'" to confirm'))},className:"flex-1 btn bg-red-500 text-white hover:bg-red-600",children:"Remove"})]})]})})]}):null},h=e=>{let{onClose:t,onSuccess:s}=e;const{currentUser:r,userData:i}=(0,n.As)(),[l,o]=(0,a.useState)(!1),d="https://bestiesapp.web.app/?invite=".concat(null===r||void 0===r?void 0:r.uid),m="Hey! ".concat((null===i||void 0===i?void 0:i.displayName)||"Your friend"," wants you to be their safety bestie on Besties! \ud83d\udc9c Join them and help keep each other safe: ").concat(d),x=()=>{navigator.clipboard.writeText(m),c.Ay.success("Link copied! Now paste it to your bestie! \ud83d\udc95"),o(!0),setTimeout(()=>{null===s||void 0===s||s(),t()},2e3)};return l?(0,p.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,p.jsx)("div",{className:"modal-content celebration-modal",onClick:e=>e.stopPropagation(),children:(0,p.jsxs)("div",{className:"celebration-content",children:[(0,p.jsx)("div",{className:"celebration-emoji",children:"\ud83c\udf89"}),(0,p.jsx)("h2",{className:"celebration-title",children:"Amazing!"}),(0,p.jsx)("p",{className:"celebration-text",children:"You're building your safety network! Every bestie you add makes both of you safer. \ud83d\udc9c"}),(0,p.jsxs)("div",{className:"celebration-encouragement",children:[(0,p.jsx)("p",{className:"font-semibold text-primary dark:text-purple-400",children:"Keep going! Invite more besties:"}),(0,p.jsx)("p",{className:"text-sm text-text-secondary dark:text-gray-300 mt-2",children:"The more people in your circle, the safer everyone is. Your besties will thank you! \u2728"})]})]})})}):(0,p.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,p.jsxs)("div",{className:"modal-content invite-modal",onClick:e=>e.stopPropagation(),children:[(0,p.jsxs)("div",{className:"invite-header",children:[(0,p.jsx)("div",{className:"invite-icon",children:"\ud83d\udc6f\u200d\u2640\ufe0f"}),(0,p.jsx)("h2",{className:"invite-title",children:"Invite Your Bestie"}),(0,p.jsx)("p",{className:"invite-subtitle",children:"You're making such a smart choice! Adding besties means you'll both be safer when you're out. \ud83d\udc95"})]}),(0,p.jsxs)("div",{className:"invite-encouragement-box",children:[(0,p.jsx)("p",{className:"text-sm font-semibold text-primary dark:text-purple-400 mb-2",children:"\ud83d\udc9c Complete Your Bestie Circle"}),(0,p.jsx)("p",{className:"text-sm text-text-secondary dark:text-gray-300",children:"Your safety network gets stronger with every bestie you add. Having 3-5 trusted friends means:"}),(0,p.jsxs)("ul",{className:"invite-benefits",children:[(0,p.jsx)("li",{children:"\u2713 Someone's always available when you need help"}),(0,p.jsx)("li",{children:"\u2713 Faster response times in emergencies"}),(0,p.jsx)("li",{children:"\u2713 You all watch out for each other - true sisterhood! \ud83d\udc95"})]})]}),(0,p.jsxs)("button",{onClick:async()=>{if(navigator.share)try{await navigator.share({title:"Join me on Besties!",text:m,url:d}),o(!0),c.Ay.success("Thanks for inviting your bestie! \ud83d\udc9c"),setTimeout(()=>{null===s||void 0===s||s(),t()},2e3)}catch(e){"AbortError"!==e.name&&(console.error("Share failed:",e),c.Ay.error("Sharing failed. Try copy link instead!"))}else x()},className:"share-button primary-share",children:[(0,p.jsx)("span",{className:"share-icon",children:"\ud83c\udf89"}),(0,p.jsxs)("div",{className:"share-button-content",children:[(0,p.jsx)("div",{className:"share-button-title",children:"Share Invite"}),(0,p.jsx)("div",{className:"share-button-subtitle",children:"Choose any app to send"})]})]}),(0,p.jsx)("div",{className:"share-divider",children:(0,p.jsx)("span",{children:"OR SHARE VIA"})}),(0,p.jsxs)("div",{className:"share-options-grid",children:[(0,p.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(m);window.location.href="whatsapp://send?text=".concat(e),setTimeout(()=>{window.open("https://wa.me/?text=".concat(e),"_blank")},1e3),o(!0),setTimeout(()=>{null===s||void 0===s||s(),t()},1500)},className:"share-option whatsapp",children:[(0,p.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcac"}),(0,p.jsx)("span",{children:"WhatsApp"})]}),(0,p.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(d);window.location.href="fb-messenger://share?link=".concat(e),setTimeout(()=>{window.open("https://www.facebook.com/dialog/send?link=".concat(e,"&app_id=YOUR_APP_ID&redirect_uri=").concat(window.location.origin),"_blank")},1e3),o(!0),setTimeout(()=>{null===s||void 0===s||s(),t()},1500)},className:"share-option messenger",children:[(0,p.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcac"}),(0,p.jsx)("span",{children:"Messenger"})]}),(0,p.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(m);window.location.href="sms:?body=".concat(e),o(!0),setTimeout(()=>{null===s||void 0===s||s(),t()},1500)},className:"share-option sms",children:[(0,p.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcf1"}),(0,p.jsx)("span",{children:"Text"})]}),(0,p.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(d),r="fb://facewebmodal/f?href=".concat(e);window.location.href=r,setTimeout(()=>{window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(e),"_blank")},1e3),o(!0),setTimeout(()=>{null===s||void 0===s||s(),t()},1500)},className:"share-option facebook",children:[(0,p.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcd8"}),(0,p.jsx)("span",{children:"Facebook"})]}),(0,p.jsxs)("button",{onClick:x,className:"share-option copy",children:[(0,p.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udccb"}),(0,p.jsx)("span",{children:"Copy Link"})]})]}),(0,p.jsx)("div",{className:"invite-footer",children:(0,p.jsx)("p",{className:"text-xs text-text-secondary dark:text-gray-400",children:"\ud83d\udc9c Your besties will appreciate you looking out for them!"})}),(0,p.jsx)("button",{onClick:t,className:"modal-close-button",children:"\u2715"})]})})};var b=s(4505),g=s(7688);const y=e=>{let{request:t,onRequestHandled:s}=e;const[r,i]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),{executeOptimistic:o}=(0,g.Ay)(),d=(null===t||void 0===t?void 0:t.requesterPhotoURL)||null;return n?null:(0,p.jsxs)("div",{className:"card p-4 border-2 border-primary/20 animate-fade-in",children:[(0,p.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,p.jsx)("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-lg overflow-hidden",children:d?(0,p.jsx)("img",{src:d,alt:t.requesterName||"Bestie",className:"w-full h-full object-cover"}):null!==t&&void 0!==t&&t.requesterName&&"string"===typeof t.requesterName&&t.requesterName.length>0?t.requesterName[0].toUpperCase():"?"}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("div",{className:"font-semibold text-text-primary",children:t.requesterName}),(0,p.jsx)("div",{className:"text-sm text-text-secondary",children:t.requesterPhone})]})]}),t.personalMessage&&(0,p.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 text-sm text-text-secondary italic",children:['"',t.personalMessage,'"']}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)("button",{onClick:async()=>{await o({optimisticUpdate:()=>{l(!0),s&&s(t.id)},serverUpdate:async()=>{i(!0);try{const e=await b.Ay.declineBestieRequest(t.id);if(!e.success)throw new Error("Failed to decline request");return e}finally{i(!1)}},rollback:()=>{l(!1)},successMessage:"Request declined",errorMessage:"Failed to decline request"})},disabled:r,className:"flex-1 btn btn-secondary text-sm",children:"Decline"}),(0,p.jsx)("button",{onClick:async()=>{await o({optimisticUpdate:()=>{l(!0),s&&s(t.id)},serverUpdate:async()=>{i(!0);try{const e=await b.Ay.acceptBestieRequest(t.id);if(!e.success)throw new Error("Failed to accept request");return e}finally{i(!1)}},rollback:()=>{l(!1)},successMessage:"You're now besties with ".concat(t.requesterName,"! \ud83d\udc9c"),errorMessage:"Failed to accept request"})},disabled:r,className:"flex-1 btn btn-primary text-sm",children:r?"Accepting...":"Accept"})]})]})},v=e=>{let{pendingRequests:t}=e;return 0===t.length?null:(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsxs)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3",children:["\ud83d\udd14 Pending Requests (",t.length,")"]}),(0,p.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,p.jsx)(y,{request:e},e.id))})]})};var f=s(3197);const j=e=>{let{activeFilter:t,setActiveFilter:s}=e;return(0,p.jsx)("div",{className:"card p-3 md:p-4",children:(0,p.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-3 px-3 md:mx-0 md:px-0",children:[{id:"all",label:"All Besties"},{id:"circle",label:"\ud83d\udc9c Circle"},{id:"active",label:"\ud83d\udd14 Active"}].map(e=>(0,p.jsx)("button",{onClick:()=>s(e.id),className:"px-3 md:px-4 py-2 rounded-full whitespace-nowrap font-semibold text-xs md:text-sm flex-shrink-0 ".concat(t===e.id?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.label},e.id))})})},N=e=>{let{activityFeed:t,reactions:s,addReaction:r,setSelectedCheckIn:a,setShowComments:i,getTimeAgo:n}=e;return 0===t.length?(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3",children:"\ud83d\udcf0 Activity Feed"}),(0,p.jsxs)("div",{className:"card p-6 md:p-8 text-center",children:[(0,p.jsx)("div",{className:"text-3xl md:text-4xl mb-2",children:"\ud83c\udf1f"}),(0,p.jsx)("p",{className:"text-sm md:text-base text-text-secondary",children:"No recent activity"}),(0,p.jsx)("p",{className:"text-xs md:text-sm text-text-secondary mt-1",children:"Check-ins from your besties will appear here"})]})]}):(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3",children:"\ud83d\udcf0 Activity Feed"}),(0,p.jsx)("div",{className:"space-y-3",children:t.slice(0,15).map(e=>{var t,l,o;return(0,p.jsxs)("div",{className:"card p-3 md:p-4",children:["checkin"===e.type&&(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"flex items-start gap-2 md:gap-3",children:[(0,p.jsx)("div",{className:"text-2xl md:text-3xl flex-shrink-0",children:(null===(t=e.checkInData.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsxs)("h3",{className:"font-semibold text-text-primary text-sm md:text-base break-words",children:[(0,p.jsx)("span",{className:"text-primary",children:e.userName}),"completed"===e.status&&" completed check-in safely \u2705","active"===e.status&&" is currently checked in \ud83d\udd14","alerted"===e.status&&" MISSED check-in \ud83d\udea8"]}),(0,p.jsxs)("p",{className:"text-xs md:text-sm text-text-secondary",children:[(null===(l=e.checkInData.activity)||void 0===l?void 0:l.name)||"Check-in"," \u2022 ",n(e.timestamp)]}),(null===(o=e.checkInData.location)||void 0===o?void 0:o.address)&&(0,p.jsxs)("p",{className:"text-xs md:text-sm text-text-secondary mt-1 break-words",children:["\ud83d\udccd ",e.checkInData.location.address]})]}),(0,p.jsxs)("div",{className:"px-2 md:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap flex-shrink-0 ".concat("completed"===e.status?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"alerted"===e.status?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"),children:["completed"===e.status&&"\u2713","alerted"===e.status&&"\u26a0\ufe0f","active"===e.status&&"\ud83d\udd14"]})]}),"alerted"!==e.status&&(0,p.jsxs)("div",{className:"mt-3",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,p.jsx)("button",{onClick:()=>r(e.id,"\ud83d\udc9c"),className:"text-xl md:text-2xl hover:scale-110 transition-transform",title:"Proud",children:"\ud83d\udc9c"}),(0,p.jsx)("button",{onClick:()=>r(e.id,"\ud83d\ude2e\u200d\ud83d\udca8"),className:"text-xl md:text-2xl hover:scale-110 transition-transform",title:"Relieved",children:"\ud83d\ude2e\u200d\ud83d\udca8"}),(0,p.jsx)("button",{onClick:()=>r(e.id,"\ud83c\udf89"),className:"text-xl md:text-2xl hover:scale-110 transition-transform",title:"Celebrate",children:"\ud83c\udf89"}),(0,p.jsx)("button",{onClick:()=>{a(e),i(!0)},className:"ml-auto text-xs md:text-sm text-primary hover:underline font-semibold",children:"\ud83d\udcac Comment"})]}),s[e.id]&&s[e.id].length>0&&(0,p.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:Object.entries(s[e.id].reduce((e,t)=>(e[t.emoji]=(e[t.emoji]||0)+1,e),{})).map(e=>{let[t,s]=e;return(0,p.jsxs)("span",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:[t," ",s]},t)})})]})]}),"badge"===e.type&&(0,p.jsxs)("div",{className:"flex items-start gap-2 md:gap-3",children:[(0,p.jsx)("div",{className:"text-2xl md:text-3xl flex-shrink-0",children:e.badge.icon||"\ud83c\udfc6"}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsxs)("h3",{className:"font-semibold text-text-primary text-sm md:text-base break-words",children:[(0,p.jsx)("span",{className:"text-primary",children:e.userName})," earned the ",(0,p.jsx)("span",{className:"text-yellow-600",children:e.badge.name})," badge! \ud83c\udf89"]}),(0,p.jsx)("p",{className:"text-xs md:text-sm text-text-secondary",children:n(e.timestamp)}),e.badge.description&&(0,p.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.badge.description})]}),(0,p.jsx)("div",{className:"text-3xl flex-shrink-0 animate-bounce-gentle",children:"\ud83c\udf89"})]})]},e.id)})})]})},k=e=>{let{besties:t,pendingRequests:s,onAddBestie:r}=e;return t&&t.length>0||s&&s.length>0?null:(0,p.jsxs)("div",{className:"card p-8 md:p-12 text-center",children:[(0,p.jsx)("div",{className:"text-5xl md:text-6xl mb-4",children:"\ud83d\udc9c"}),(0,p.jsx)("h2",{className:"text-xl md:text-2xl font-display text-text-primary mb-2",children:"No besties yet!"}),(0,p.jsx)("p",{className:"text-sm md:text-base text-text-secondary mb-6",children:"Add friends who'll have your back when you need them"}),(0,p.jsx)("button",{onClick:r,className:"btn btn-primary",children:"Add Your First Bestie"})]})},w=e=>{const t=new Date-e,s=Math.floor(t/6e4),r=Math.floor(t/36e5),a=Math.floor(t/864e5);return s<1?"Just now":s<60?"".concat(s," min ago"):r<24?"".concat(r," hour").concat(r>1?"s":""," ago"):"".concat(a," day").concat(a>1?"s":""," ago")},A=()=>{const{currentUser:e,userData:t}=(0,n.As)(),s=(0,i.Zp)(),[m,x]=(0,a.useState)([]),[b,g]=(0,a.useState)([]),[y,A]=(0,a.useState)(!1),[C,I]=(0,a.useState)(!0),[F,S]=(0,a.useState)([]),[q,R]=(0,a.useState)([]),[D,E]=(0,a.useState)([]),[M,P]=(0,a.useState)("all"),[B,T]=(0,a.useState)("weekly"),[U,Y]=(0,a.useState)(null),[_,J]=(0,a.useState)(!1),[G,H]=(0,a.useState)([]),[L,z]=(0,a.useState)(""),[Q,O]=(0,a.useState)({});(0,a.useEffect)(()=>{if(!e)return;const t=(0,o.P)((0,o.rJ)(l.db,"besties"),(0,o._M)("requesterId","==",e.uid),(0,o._M)("status","==","accepted")),s=(0,o.P)((0,o.rJ)(l.db,"besties"),(0,o._M)("recipientId","==",e.uid),(0,o._M)("status","==","accepted")),a=(0,o.aQ)(t,e=>{const t=[];e.forEach(e=>{const s=e.data();t.push({id:e.id,userId:s.recipientId,name:s.recipientName||"Unknown",phone:s.recipientPhone,role:"added",isFavorite:s.isFavorite||!1})}),(0,o.GG)(s).then(e=>{e.forEach(e=>{const s=e.data();t.push({id:e.id,userId:s.requesterId,name:s.requesterName||"Unknown",phone:s.requesterPhone,role:"guardian",isFavorite:s.isFavorite||!1})}),x(t),I(!1)}).catch(e=>{console.error("Error loading recipient besties:",e),x(t),I(!1)})}),i=(0,o.P)((0,o.rJ)(l.db,"besties"),(0,o._M)("recipientId","==",e.uid),(0,o._M)("status","==","pending")),n=(0,o.aQ)(i,e=>{const t=[];e.forEach(e=>{t.push((0,r.A)({id:e.id},e.data()))}),g(t)});return()=>{a(),n()}},[e]),(0,a.useEffect)(()=>{if(!e||0===m.length)return;const s=async()=>{if(document.hidden)return;const e=[],s=[],r=[],a=[...new Set(m.map(e=>e.userId))],i=new Date;i.setHours(i.getHours()-48);for(const t of a)try{const a=(0,o.P)((0,o.rJ)(l.db,"checkins"),(0,o._M)("userId","==",t),(0,o._M)("createdAt",">=",i),(0,o.My)("createdAt","desc"),(0,o.AB)(10));(await(0,o.GG)(a)).forEach(r=>{var a;const i=r.data(),n=m.find(e=>e.userId===t);var l;(e.push({id:r.id,type:"checkin",checkInData:i,userName:(null===n||void 0===n?void 0:n.name)||"Bestie",userId:t,timestamp:(null===(a=i.createdAt)||void 0===a?void 0:a.toDate())||new Date,status:i.status}),"alerted"===i.status)&&s.push({id:r.id,userName:(null===n||void 0===n?void 0:n.name)||"Bestie",userId:t,checkInData:i,timestamp:(null===(l=i.createdAt)||void 0===l?void 0:l.toDate())||new Date})});const c=await(0,o.x7)((0,o.H9)(l.db,"users",t));if(c.exists()){const e=c.data();if(e.requestAttention&&e.requestAttention.active){var n;const s=m.find(e=>e.userId===t);r.push({userId:t,userName:(null===s||void 0===s?void 0:s.name)||"Bestie",tag:e.requestAttention.tag,note:e.requestAttention.note,timestamp:(null===(n=e.requestAttention.timestamp)||void 0===n?void 0:n.toDate())||new Date})}}const x=await(0,o.x7)((0,o.H9)(l.db,"badges",t));if(x.exists()){var d;const s=x.data();((null===(d=s.badges)||void 0===d?void 0:d.filter(e=>{var t;const s=null===(t=e.earnedAt)||void 0===t?void 0:t.toDate();return s&&s>i}))||[]).forEach(s=>{var r;const a=m.find(e=>e.userId===t);e.push({id:"badge-".concat(t,"-").concat(s.id),type:"badge",userName:(null===a||void 0===a?void 0:a.name)||"Bestie",userId:t,badge:s,timestamp:(null===(r=s.earnedAt)||void 0===r?void 0:r.toDate())||new Date})})}}catch(u){console.error("Error loading activity for bestie:",u)}e.sort((e,t)=>t.timestamp-e.timestamp);const c=(null===t||void 0===t?void 0:t.featuredCircle)||[],x=c.length>0?s.filter(e=>c.includes(e.userId)):s,p=c.length>0?r.filter(e=>c.includes(e.userId)):r;S(e),R(x),E(p)};s();const r=()=>{document.hidden||s()};return document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)}},[e,m,t]);(0,a.useEffect)(()=>{if(0===F.length)return;(async()=>{const e={};for(const s of F)if("checkin"===s.type)try{const t=await(0,o.GG)((0,o.rJ)(l.db,"checkins",s.id,"reactions"));e[s.id]=t.docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(t){console.error("Error loading reactions:",t),e[s.id]=[]}O(e)})()},[F]),(0,a.useEffect)(()=>{if(!U||!_)return;(async()=>{try{const e=(0,o.P)((0,o.rJ)(l.db,"checkins",U.id,"comments"),(0,o.My)("timestamp","asc")),t=(await(0,o.GG)(e)).docs.map(e=>(0,r.A)({id:e.id},e.data()));H(t)}catch(e){console.error("Error loading comments:",e),H([])}})()},[U,_]);const K=async()=>{if(L.trim()&&U)try{await(0,o.gS)((0,o.rJ)(l.db,"checkins",U.id,"comments"),{userId:e.uid,userName:(null===t||void 0===t?void 0:t.displayName)||"Anonymous",userPhoto:(null===t||void 0===t?void 0:t.photoURL)||null,text:L.trim(),timestamp:o.Dc.now()});const s=(0,o.P)((0,o.rJ)(l.db,"checkins",U.id,"comments"),(0,o.My)("timestamp","asc")),a=await(0,o.GG)(s);H(a.docs.map(e=>(0,r.A)({id:e.id},e.data()))),z(""),c.Ay.success("Comment added!")}catch(s){console.error("Error adding comment:",s),c.Ay.error("Failed to add comment")}},V=(()=>{let e=[...m];switch(M){case"circle":e=e.filter(e=>e.isFavorite);break;case"active":const t=new Date(Date.now()-36e5);e=e.filter(e=>F.some(s=>s.userId===e.userId&&s.timestamp>t&&"active"===s.status));break;default:e.sort((e,t)=>{const s=F.find(t=>t.userId===e.userId),r=F.find(e=>e.userId===t.userId);return s&&r?r.timestamp-s.timestamp:s&&!r?-1:!s&&r?1:e.isFavorite&&!t.isFavorite?-1:!e.isFavorite&&t.isFavorite?1:(e.name||"").localeCompare(t.name||"")})}return e})();return C?(0,p.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,p.jsx)(d.A,{}),(0,p.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,p.jsx)("div",{className:"spinner"})})]}):(0,p.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,p.jsx)(d.A,{}),(0,p.jsxs)("div",{className:"max-w-6xl mx-auto p-4 pb-32 md:pb-6",children:[(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("h1",{className:"text-2xl md:text-3xl font-display text-gradient mb-2",children:"\ud83d\udc9c Your Besties"}),(0,p.jsx)("p",{className:"text-sm md:text-base text-text-secondary",children:"Your safety squad activity hub"})]}),(0,p.jsx)(v,{pendingRequests:b}),(0,p.jsx)(f.A,{missedCheckIns:q,requestsForAttention:D,besties:m}),(0,p.jsxs)("div",{className:"space-y-6 lg:grid lg:grid-cols-3 lg:gap-6 lg:space-y-0",children:[(0,p.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,p.jsx)(j,{activeFilter:M,setActiveFilter:P}),(0,p.jsx)(N,{activityFeed:F,reactions:Q,addReaction:async(s,a)=>{try{var i;if(null===(i=Q[s])||void 0===i?void 0:i.find(t=>t.userId===e.uid&&t.emoji===a))return void(0,c.Ay)("You already reacted with this!",{icon:a});await(0,o.gS)((0,o.rJ)(l.db,"checkins",s,"reactions"),{userId:e.uid,userName:(null===t||void 0===t?void 0:t.displayName)||"Anonymous",emoji:a,timestamp:o.Dc.now()});const n=await(0,o.GG)((0,o.rJ)(l.db,"checkins",s,"reactions"));O(e=>(0,r.A)((0,r.A)({},e),{},{[s]:n.docs.map(e=>(0,r.A)({id:e.id},e.data()))})),c.Ay.success("Reaction added!")}catch(n){console.error("Error adding reaction:",n),c.Ay.error("Failed to add reaction")}},setSelectedCheckIn:Y,setShowComments:J,getTimeAgo:w})]}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"relative overflow-hidden",children:[(0,p.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-40",children:[(0,p.jsx)("div",{className:"absolute top-2 left-2 text-pink-200 text-sm",children:"\u2728"}),(0,p.jsx)("div",{className:"absolute top-3 right-3 text-purple-200 text-sm",children:"\ud83d\udcab"}),(0,p.jsx)("div",{className:"absolute bottom-2 left-3 text-pink-200 text-sm",children:"\u2b50"})]}),(0,p.jsxs)("div",{className:"card p-4 bg-gradient-to-br from-pink-50 via-purple-50 to-pink-50 dark:from-pink-900/20 dark:via-purple-900/20 dark:to-pink-900/20 border-2 border-pink-200 dark:border-pink-600 shadow-lg relative",children:[(0,p.jsxs)("div",{className:"text-center mb-3",children:[(0,p.jsx)("div",{className:"text-3xl mb-1",children:"\ud83d\udc51"}),(0,p.jsxs)("h2",{className:"text-lg font-display bg-gradient-to-r from-pink-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["weekly"===B&&"This Week's Queens","monthly"===B&&"This Month's Queens","yearly"===B&&"This Year's Queens"]}),(0,p.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Your amazing squad! \ud83d\udc95"})]}),(0,p.jsxs)("div",{className:"flex gap-1.5 justify-center mb-3",children:[(0,p.jsx)("button",{onClick:()=>T("weekly"),className:"px-3 py-1.5 rounded-full font-semibold text-xs transition-all ".concat("weekly"===B?"bg-gradient-to-r from-pink-400 to-purple-400 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-pink-50 dark:hover:bg-gray-600"),children:"\ud83d\udcc5 Week"}),(0,p.jsx)("button",{onClick:()=>T("monthly"),className:"px-3 py-1.5 rounded-full font-semibold text-xs transition-all ".concat("monthly"===B?"bg-gradient-to-r from-pink-400 to-purple-400 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-pink-50 dark:hover:bg-gray-600"),children:"\ud83d\uddd3\ufe0f Month"}),(0,p.jsx)("button",{onClick:()=>T("yearly"),className:"px-3 py-1.5 rounded-full font-semibold text-xs transition-all ".concat("yearly"===B?"bg-gradient-to-r from-pink-400 to-purple-400 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-pink-50 dark:hover:bg-gray-600"),children:"\ud83c\udfaf Year"})]}),(0,p.jsxs)("div",{className:"space-y-2",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-300 to-rose-300 rounded-xl blur opacity-20 group-hover:opacity-30 transition-opacity"}),(0,p.jsx)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl p-2.5 shadow-md border border-pink-200 dark:border-pink-600 hover:scale-[1.02] transition-transform",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,p.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-300 to-rose-400 rounded-full flex items-center justify-center text-lg shadow-sm",children:"\ud83d\udc96"}),(0,p.jsx)("div",{className:"absolute -top-0.5 -right-0.5 bg-yellow-300 rounded-full w-4 h-4 flex items-center justify-center text-[10px]",children:"\ud83c\udfc6"})]}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"font-display text-sm font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent",children:"Most Reliable"}),(0,p.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:"Always there for you \ud83d\udc95"})]})]})})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-300 to-fuchsia-300 rounded-xl blur opacity-20 group-hover:opacity-30 transition-opacity"}),(0,p.jsx)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl p-2.5 shadow-md border border-purple-200 dark:border-purple-600 hover:scale-[1.02] transition-transform",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,p.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-300 to-fuchsia-400 rounded-full flex items-center justify-center text-lg shadow-sm",children:"\u26a1"}),(0,p.jsx)("div",{className:"absolute -top-0.5 -right-0.5 bg-yellow-300 rounded-full w-4 h-4 flex items-center justify-center text-[10px]",children:"\ud83c\udfc6"})]}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"font-display text-sm font-bold bg-gradient-to-r from-purple-500 to-fuchsia-500 bg-clip-text text-transparent",children:"Super Speedy"}),(0,p.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:"Quick to the rescue \ud83d\udc9c"})]})]})})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-rose-300 to-pink-300 rounded-xl blur opacity-20 group-hover:opacity-30 transition-opacity"}),(0,p.jsx)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl p-2.5 shadow-md border border-rose-200 dark:border-rose-600 hover:scale-[1.02] transition-transform",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,p.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-rose-300 to-pink-400 rounded-full flex items-center justify-center text-lg shadow-sm",children:"\ud83d\udee1\ufe0f"}),(0,p.jsx)("div",{className:"absolute -top-0.5 -right-0.5 bg-yellow-300 rounded-full w-4 h-4 flex items-center justify-center text-[10px]",children:"\ud83c\udfc6"})]}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"font-display text-sm font-bold bg-gradient-to-r from-rose-500 to-pink-500 bg-clip-text text-transparent",children:"Guardian Angel"}),(0,p.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:"Keeping you safe \ud83c\udf38"})]})]})})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-300 to-amber-300 rounded-xl blur opacity-20 group-hover:opacity-30 transition-opacity"}),(0,p.jsx)("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl p-2.5 shadow-md border border-yellow-200 dark:border-yellow-600 hover:scale-[1.02] transition-transform",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,p.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-300 to-amber-400 rounded-full flex items-center justify-center text-lg shadow-sm",children:"\ud83d\udd25"}),(0,p.jsx)("div",{className:"absolute -top-0.5 -right-0.5 bg-yellow-300 rounded-full w-4 h-4 flex items-center justify-center text-[10px]",children:"\ud83c\udfc6"})]}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"font-display text-sm font-bold bg-gradient-to-r from-yellow-500 to-amber-500 bg-clip-text text-transparent",children:"Streak Queen"}),(0,p.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:"On fire lately! \u2728"})]})]})})]})]}),(0,p.jsx)("div",{className:"mt-3 pt-2 border-t border-pink-200 dark:border-pink-600 text-center",children:(0,p.jsxs)("p",{className:"text-xs font-semibold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:["weekly"===B&&"\ud83d\udcab Resets Monday","monthly"===B&&"\ud83d\udcab Resets on 1st","yearly"===B&&"\ud83d\udcab Resets Jan 1st"]})})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3 md:mb-4",children:["circle"===M&&"\ud83d\udc9c Bestie Circle","all"===M&&"All Besties","active"===M&&"\ud83d\udd14 Active Now"]}),0===V.length?(0,p.jsxs)("div",{className:"card p-6 md:p-8 text-center bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30",children:[(0,p.jsx)("div",{className:"text-5xl md:text-6xl mb-3",children:"\ud83d\udc9c"}),(0,p.jsx)("p",{className:"text-base md:text-lg font-semibold text-text-primary mb-2",children:"No besties in this filter"}),(0,p.jsxs)("p",{className:"text-sm md:text-base text-text-secondary",children:["circle"===M&&"Add besties to your circle by tapping their profile picture","all"===M&&"Start adding besties to see them here","active"===M&&"No one is currently checked in"]})]}):(0,p.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-5",children:V.map(e=>{const t=(e=>{const t=[],s=F.filter(t=>t.userId===e.userId),r=new Date(Date.now()-3e5);return s.some(e=>e.timestamp>r)&&t.push({icon:"\u26a1",tooltip:"Fast responder"}),s.filter(e=>"completed"===e.status).length>5&&t.push({icon:"\ud83d\udee1\ufe0f",tooltip:"Very reliable"}),t.push({icon:"\ud83d\udd25",tooltip:"7-day streak"}),s.filter(e=>{const t=e.timestamp.getHours();return t>=21||t<=6}).length>2&&t.push({icon:"\ud83c\udf19",tooltip:"Night owl"}),t.slice(0,3)})(e);return(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("div",{className:"h-full transform transition-all duration-300 hover:scale-[1.02]",children:(0,p.jsx)(u,{bestie:e})}),t.length>0&&(0,p.jsx)("div",{className:"absolute top-3 left-3 flex gap-1 z-10",children:t.map((e,t)=>(0,p.jsx)("span",{className:"text-base bg-white dark:bg-gray-800 rounded-full p-1.5 shadow-md border border-purple-200 dark:border-purple-600",title:e.tooltip,children:e.icon},t))}),(0,p.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-900/95 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-end p-4 pointer-events-none group-hover:pointer-events-auto",children:(0,p.jsxs)("div",{className:"w-full space-y-2",children:[(0,p.jsxs)("button",{onClick:()=>s("/user/".concat(e.userId)),className:"w-full bg-white dark:bg-gray-800 hover:bg-purple-50 dark:hover:bg-purple-900 text-purple-900 dark:text-purple-200 font-semibold py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg",children:[(0,p.jsx)("span",{children:"\ud83d\udc64"}),(0,p.jsx)("span",{children:"View Profile"})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)("button",{onClick:async()=>{try{const t=await(0,o.x7)((0,o.H9)(l.db,"besties",e.id));t.exists()&&(await(0,o.mZ)((0,o.H9)(l.db,"besties",e.id),{isFavorite:!t.data().isFavorite}),c.Ay.success(t.data().isFavorite?"Removed from circle":"Added to circle! \ud83d\udc9c"))}catch(t){console.error("Error toggling circle:",t),c.Ay.error("Failed to update")}},className:"flex-1 ".concat(e.isFavorite?"bg-pink-500 hover:bg-pink-600":"bg-purple-500 hover:bg-purple-600"," text-white font-semibold py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg"),children:[(0,p.jsx)("span",{children:e.isFavorite?"\ud83d\udc94":"\ud83d\udc9c"}),(0,p.jsx)("span",{className:"text-sm",children:e.isFavorite?"Remove":"Add to Circle"})]}),(0,p.jsxs)("button",{onClick:()=>{e.phone?window.location.href="sms:".concat(e.phone):c.Ay.error("No phone number available")},className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg",children:[(0,p.jsx)("span",{children:"\ud83d\udcac"}),(0,p.jsx)("span",{className:"text-sm",children:"Message"})]})]})]})})]},e.id)})})]})]})]}),(0,p.jsx)(k,{besties:m,pendingRequests:b,onAddBestie:()=>A(!0)})]}),_&&U&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[200] flex items-end md:items-center justify-center",children:(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl max-w-md w-full max-h-[80vh] md:max-h-[600px] flex flex-col",children:[(0,p.jsxs)("div",{className:"p-4 md:p-6 border-b border-gray-200 dark:border-gray-600 flex-shrink-0 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/30 dark:to-purple-900/30",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("h2",{className:"text-xl md:text-2xl font-display text-transparent bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text",children:"\ud83d\udcac Comments"}),(0,p.jsx)("button",{onClick:()=>{J(!1),Y(null),H([]),z("")},className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 text-2xl transition-colors",children:"\xd7"})]}),(0,p.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[U.userName,"'s check-in"]})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4 overscroll-contain",children:0===G.length?(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)("div",{className:"text-5xl mb-3",children:"\ud83d\udcac"}),(0,p.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-semibold",children:"No comments yet"}),(0,p.jsx)("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-1",children:"Be the first to comment!"})]}):G.map(e=>{var t,s;return(0,p.jsxs)("div",{className:"flex gap-3 animate-fade-in",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,p.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-9 h-9 rounded-full object-cover ring-2 ring-purple-100 dark:ring-purple-600"}):(0,p.jsx)("div",{className:"w-9 h-9 bg-gradient-primary rounded-full flex items-center justify-center text-white text-sm font-display ring-2 ring-purple-100 dark:ring-purple-600",children:(null===(t=e.userName)||void 0===t?void 0:t[0])||"?"})}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-2xl px-4 py-2 shadow-sm",children:[(0,p.jsx)("p",{className:"font-bold text-sm text-gray-900 dark:text-gray-200",children:e.userName}),(0,p.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 break-words leading-relaxed",children:e.text})]}),(0,p.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 px-3",children:null!==(s=e.timestamp)&&void 0!==s&&s.toDate?w(e.timestamp.toDate()):"Just now"})]})]},e.id)})}),(0,p.jsx)("div",{className:"p-4 md:p-6 border-t-2 border-purple-100 dark:border-purple-600 flex-shrink-0 bg-white dark:bg-gray-800",children:(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)("input",{type:"text",value:L,onChange:e=>z(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),K())},placeholder:"Add a comment...",className:"flex-1 px-4 py-3 rounded-full border-2 border-purple-200 dark:border-purple-600 focus:border-purple-400 dark:focus:border-purple-400 focus:outline-none text-sm shadow-sm transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200"}),(0,p.jsx)("button",{onClick:K,disabled:!L.trim(),className:"btn btn-primary px-6 py-3 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-shadow",children:"Send"})]})})]})}),y&&(0,p.jsx)(h,{onClose:()=>A(!1)}),(0,p.jsx)("style",{children:"\n        @keyframes pulse-slow {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.7;\n          }\n        }\n        .animate-pulse-slow {\n          animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n        }\n      "})]})}}}]);
//# sourceMappingURL=978.e188a1ea.chunk.js.map