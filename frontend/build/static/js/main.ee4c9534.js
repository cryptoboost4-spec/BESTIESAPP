/*! For license information please see main.ee4c9534.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),A=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)A.call(t,r)&&!o.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:l,ref:c,props:i,_owner:a.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,p={};function g(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||f}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=g.prototype;var w=y.prototype=new x;w.constructor=y,m(w,g.prototype),w.isPureReactComponent=!0;var v=Array.isArray,b=Object.prototype.hasOwnProperty,B={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var s,i={},A=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(A=""+t.key),t)b.call(t,s)&&!C.hasOwnProperty(s)&&(i[s]=t[s]);var o=arguments.length-2;if(1===o)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===i[s]&&(i[s]=o[s]);return{$$typeof:n,type:e,key:A,ref:a,props:i,_owner:B.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var U=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(e,t,s,i,A){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case n:case r:o=!0}}if(o)return A=A(o=e),e=""===i?"."+j(o,0):i,v(A)?(s="",null!=e&&(s=e.replace(U,"$&/")+"/"),F(A,t,s,"",function(e){return e})):null!=A&&(E(A)&&(A=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(A,s+(!A.key||o&&o.key===A.key?"":(""+A.key).replace(U,"$&/")+"/")+e)),t.push(A)),1;if(o=0,i=""===i?".":i+":",v(e))for(var l=0;l<e.length;l++){var c=i+j(a=e[l],l);o+=F(a,t,s,c,A)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)o+=F(a=a.value,t,s,c=i+j(a,l++),A);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Q(e,t,n){if(null==e)return e;var r=[],s=0;return F(e,r,"","",function(e){return t.call(n,e,s++)}),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},S={transition:null},T={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:S,ReactCurrentOwner:B};function _(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:Q,forEach:function(e,t,n){Q(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Q(e,function(){t++}),t},toArray:function(e){return Q(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=A,t.PureComponent=y,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=_,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,A=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(A=t.ref,a=B.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)b.call(t,l)&&!C.hasOwnProperty(l)&&(s[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];s.children=o}return{$$typeof:n,type:e.type,key:i,ref:A,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.transition;S.transition={};try{e()}finally{S.transition=t}},t.unstable_act=_,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,A=s>>>1;r<A;){var a=2*(r+1)-1,o=e[a],l=a+1,c=e[l];if(0>i(o,n))l<s&&0>i(c,o)?(e[r]=c,e[l]=n,r=l):(e[r]=o,e[a]=n,r=a);else{if(!(l<s&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var A=performance;t.unstable_now=function(){return A.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,p=!1,g="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function v(e){if(p=!1,w(e),!m)if(null!==r(l))m=!0,S(b);else{var t=r(c);null!==t&&T(v,t.startTime-e)}}function b(e,n){m=!1,p&&(p=!1,x(E),E=-1),f=!0;var i=h;try{for(w(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!F());){var A=d.callback;if("function"===typeof A){d.callback=null,h=d.priorityLevel;var a=A(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&s(l),w(n)}else s(l);d=r(l)}if(null!==d)var o=!0;else{var u=r(c);null!==u&&T(v,u.startTime-n),o=!1}return o}finally{d=null,h=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,C=!1,N=null,E=-1,U=5,j=-1;function F(){return!(t.unstable_now()-j<U)}function Q(){if(null!==N){var e=t.unstable_now();j=e;var n=!0;try{n=N(!0,e)}finally{n?B():(C=!1,N=null)}}else C=!1}if("function"===typeof y)B=function(){y(Q)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,I=k.port2;k.port1.onmessage=Q,B=function(){I.postMessage(null)}}else B=function(){g(Q,0)};function S(e){N=e,C||(C=!0,B())}function T(e,n){E=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,S(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,s,i){var A=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?A+i:A:i=A,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>A?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(p?(x(E),E=-1):p=!0,T(v,i-A))):(e.sortIndex=a,n(l,e),m||f||(m=!0,S(b))),e},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},239:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function r(e,t,n,r){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function A(e){try{o(r.next(e))}catch(Lt){i(Lt)}}function a(e){try{o(r.throw(e))}catch(Lt){i(Lt)}}function o(e){e.done?n(e.value):s(e.value).then(A,a)}o((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,s,i,A={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return A.label++,{value:i[1],done:!1};case 5:A.label++,r=i[1],i=[0];continue;case 7:i=A.ops.pop(),A.trys.pop();continue;default:if(!(s=(s=A.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){A=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){A.label=i[1];break}if(6===i[0]&&A.label<s[1]){A.label=s[1],s=i;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(i);break}s[2]&&A.ops.pop(),A.trys.pop();continue}i=t.call(e,A)}catch(Lt){i=[6,Lt],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function i(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||t)}for(var A=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),a=function(e,t){return A.fromClientRect(e,t.getBoundingClientRect())},o=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new A(0,0,r,s)},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);56320===(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),n--)}else t.push(s)}return t},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var A=e[s];A<=65535?r.push(A):(A-=65536,r.push(55296+(A>>10),A%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"===typeof Uint8Array?[]:new Uint8Array(256),h=0;h<u.length;h++)d[u.charCodeAt(h)]=h;for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m="undefined"===typeof Uint8Array?[]:new Uint8Array(256),p=0;p<f.length;p++)m[f.charCodeAt(p)]=p;for(var g=function(e){var t,n,r,s,i,A=.75*e.length,a=e.length,o=0;"="===e[e.length-1]&&(A--,"="===e[e.length-2]&&A--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(A):new Array(A),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<a;t+=4)n=m[e.charCodeAt(t)],r=m[e.charCodeAt(t+1)],s=m[e.charCodeAt(t+2)],i=m[e.charCodeAt(t+3)],c[o++]=n<<2|r>>4,c[o++]=(15&r)<<4|s>>2,c[o++]=(3&s)<<6|63&i;return l},x=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},y=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},w=5,v=11,b=2,B=65536>>w,C=(1<<w)-1,N=B+(1024>>w)+32,E=65536>>v,U=(1<<v-w)-1,j=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},F=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Q=function(e,t){var n=g(e),r=Array.isArray(n)?y(n):new Uint32Array(n),s=Array.isArray(n)?x(n):new Uint16Array(n),i=24,A=j(s,i/2,r[4]/2),a=2===r[5]?j(s,(i+r[4])/2):F(r,Math.ceil((i+r[4])/4));return new k(r[0],r[1],r[2],r[3],A,a)},k=function(){function e(e,t,n,r,s,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>w])<<b)+(e&C),this.data[t];if(e<=65535)return t=((t=this.index[B+(e-55296>>w)])<<b)+(e&C),this.data[t];if(e<this.highStart)return t=N-E+(e>>v),t=this.index[t],t+=e>>w&U,t=((t=this.index[t])<<b)+(e&C),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S="undefined"===typeof Uint8Array?[]:new Uint8Array(256),T=0;T<I.length;T++)S[I.charCodeAt(T)]=T;var _=50,D=1,L=2,H=3,R=4,P=5,M=7,O=8,K=9,V=10,G=11,W=12,z=13,q=14,Y=15,X=16,J=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,se=24,ie=25,Ae=26,ae=27,oe=28,le=29,ce=30,ue=31,de=32,he=33,fe=34,me=35,pe=36,ge=37,xe=38,ye=39,we=40,ve=41,be=42,Be=43,Ce=[9001,65288],Ne="!",Ee="\xd7",Ue="\xf7",je=Q("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Fe=[ce,pe],Qe=[D,L,H,P],ke=[V,O],Ie=[ae,Ae],Se=Qe.concat(ke),Te=[xe,ye,we,fe,me],_e=[Y,z],De=function(e,t){void 0===t&&(t="strict");var n=[],r=[],s=[];return e.forEach(function(e,i){var A=je.get(e);if(A>_?(s.push(!0),A-=_):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(i),n.push(X);if(A===R||A===G){if(0===i)return r.push(i),n.push(ce);var a=n[i-1];return-1===Se.indexOf(a)?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(ce))}return r.push(i),A===ue?n.push("strict"===t?te:ge):A===be||A===le?n.push(ce):A===Be?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(ce):void n.push(A)}),[r,n,s]},Le=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var i=n;i<=r.length;){if((o=r[++i])===t)return!0;if(o!==V)break}if(s===V)for(i=n;i>0;){var A=r[--i];if(Array.isArray(e)?-1!==e.indexOf(A):e===A)for(var a=n;a<=r.length;){var o;if((o=r[++a])===t)return!0;if(o!==V)break}if(A!==V)break}return!1},He=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==V)return r;n--}return 0},Re=function(e,t,n,r,s){if(0===n[r])return Ee;var i=r-1;if(Array.isArray(s)&&!0===s[i])return Ee;var A=i-1,a=i+1,o=t[i],l=A>=0?t[A]:0,c=t[a];if(o===L&&c===H)return Ee;if(-1!==Qe.indexOf(o))return Ne;if(-1!==Qe.indexOf(c))return Ee;if(-1!==ke.indexOf(c))return Ee;if(He(i,t)===O)return Ue;if(je.get(e[i])===G)return Ee;if((o===de||o===he)&&je.get(e[a])===G)return Ee;if(o===M||c===M)return Ee;if(o===K)return Ee;if(-1===[V,z,Y].indexOf(o)&&c===K)return Ee;if(-1!==[J,Z,$,se,oe].indexOf(c))return Ee;if(He(i,t)===ne)return Ee;if(Le(re,ne,i,t))return Ee;if(Le([J,Z],te,i,t))return Ee;if(Le(W,W,i,t))return Ee;if(o===V)return Ue;if(o===re||c===re)return Ee;if(c===X||o===X)return Ue;if(-1!==[z,Y,te].indexOf(c)||o===q)return Ee;if(l===pe&&-1!==_e.indexOf(o))return Ee;if(o===oe&&c===pe)return Ee;if(c===ee)return Ee;if(-1!==Fe.indexOf(c)&&o===ie||-1!==Fe.indexOf(o)&&c===ie)return Ee;if(o===ae&&-1!==[ge,de,he].indexOf(c)||-1!==[ge,de,he].indexOf(o)&&c===Ae)return Ee;if(-1!==Fe.indexOf(o)&&-1!==Ie.indexOf(c)||-1!==Ie.indexOf(o)&&-1!==Fe.indexOf(c))return Ee;if(-1!==[ae,Ae].indexOf(o)&&(c===ie||-1!==[ne,Y].indexOf(c)&&t[a+1]===ie)||-1!==[ne,Y].indexOf(o)&&c===ie||o===ie&&-1!==[ie,oe,se].indexOf(c))return Ee;if(-1!==[ie,oe,se,J,Z].indexOf(c))for(var u=i;u>=0;){if((d=t[u])===ie)return Ee;if(-1===[oe,se].indexOf(d))break;u--}if(-1!==[ae,Ae].indexOf(c))for(u=-1!==[J,Z].indexOf(o)?A:i;u>=0;){var d;if((d=t[u])===ie)return Ee;if(-1===[oe,se].indexOf(d))break;u--}if(xe===o&&-1!==[xe,ye,fe,me].indexOf(c)||-1!==[ye,fe].indexOf(o)&&-1!==[ye,we].indexOf(c)||-1!==[we,me].indexOf(o)&&c===we)return Ee;if(-1!==Te.indexOf(o)&&-1!==[ee,Ae].indexOf(c)||-1!==Te.indexOf(c)&&o===ae)return Ee;if(-1!==Fe.indexOf(o)&&-1!==Fe.indexOf(c))return Ee;if(o===se&&-1!==Fe.indexOf(c))return Ee;if(-1!==Fe.concat(ie).indexOf(o)&&c===ne&&-1===Ce.indexOf(e[a])||-1!==Fe.concat(ie).indexOf(c)&&o===Z)return Ee;if(o===ve&&c===ve){for(var h=n[i],f=1;h>0&&t[--h]===ve;)f++;if(f%2!==0)return Ee}return o===de&&c===he?Ee:Ue},Pe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=De(e,t.lineBreak),r=n[0],s=n[1],i=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map(function(e){return-1!==[ie,ce,be].indexOf(e)?ge:e}));var A="keep-all"===t.wordBreak?i.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,s,A]},Me=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ne,this.start=n,this.end=r}return e.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Oe=function(e,t){var n=l(e),r=Pe(n,t),s=r[0],i=r[1],A=r[2],a=n.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var e=Ee;c<a&&(e=Re(n,i,s,++c,A))===Ee;);if(e!==Ee||c===a){var t=new Me(n,e,o,c);return o=c,{value:t,done:!1}}return{done:!0,value:null}}}},Ke=1,Ve=2,Ge=4,We=8,ze=10,qe=47,Ye=92,Xe=9,Je=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,st=40,it=41,At=95,at=45,ot=33,lt=60,ct=62,ut=64,dt=91,ht=93,ft=61,mt=123,pt=63,gt=125,xt=124,yt=126,wt=128,vt=65533,bt=42,Bt=43,Ct=44,Nt=58,Et=59,Ut=46,jt=0,Ft=8,Qt=11,kt=14,It=31,St=127,Tt=-1,_t=48,Dt=97,Lt=101,Ht=102,Rt=117,Pt=122,Mt=65,Ot=69,Kt=70,Vt=85,Gt=90,Wt=function(e){return e>=_t&&e<=57},zt=function(e){return e>=55296&&e<=57343},qt=function(e){return Wt(e)||e>=Mt&&e<=Kt||e>=Dt&&e<=Ht},Yt=function(e){return e>=Dt&&e<=Pt},Xt=function(e){return e>=Mt&&e<=Gt},Jt=function(e){return Yt(e)||Xt(e)},Zt=function(e){return e>=wt},$t=function(e){return e===ze||e===Xe||e===Je},en=function(e){return Jt(e)||Zt(e)||e===At},tn=function(e){return en(e)||Wt(e)||e===at},nn=function(e){return e>=jt&&e<=Ft||e===Qt||e>=kt&&e<=It||e===St},rn=function(e,t){return e===Ye&&t!==ze},sn=function(e,t,n){return e===at?en(t)||rn(t,n):!!en(e)||!(e!==Ye||!rn(e,t))},An=function(e,t,n){return e===Bt||e===at?!!Wt(t)||t===Ut&&Wt(n):Wt(e===Ut?t:e)},an=function(e){var t=0,n=1;e[t]!==Bt&&e[t]!==at||(e[t]===at&&(n=-1),t++);for(var r=[];Wt(e[t]);)r.push(e[t++]);var s=r.length?parseInt(c.apply(void 0,r),10):0;e[t]===Ut&&t++;for(var i=[];Wt(e[t]);)i.push(e[t++]);var A=i.length,a=A?parseInt(c.apply(void 0,i),10):0;e[t]!==Ot&&e[t]!==Lt||t++;var o=1;e[t]!==Bt&&e[t]!==at||(e[t]===at&&(o=-1),t++);for(var l=[];Wt(e[t]);)l.push(e[t++]);var u=l.length?parseInt(c.apply(void 0,l),10):0;return n*(s+a*Math.pow(10,-A))*Math.pow(10,o*u)},on={type:2},ln={type:3},cn={type:4},un={type:13},dn={type:8},hn={type:21},fn={type:9},mn={type:10},pn={type:11},gn={type:12},xn={type:14},yn={type:23},wn={type:1},vn={type:25},bn={type:24},Bn={type:26},Cn={type:27},Nn={type:28},En={type:29},Un={type:31},jn={type:32},Fn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==jn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var s=sn(t,n,r)?Ve:Ke;return{type:5,value:this.consumeName(),flags:s}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),un;break;case rt:return this.consumeStringToken(rt);case st:return on;case it:return ln;case bt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),xn;break;case Bt:if(An(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Ct:return cn;case at:var i=e,A=this.peekCodePoint(0),a=this.peekCodePoint(1);if(An(i,A,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sn(i,A,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===at&&a===ct)return this.consumeCodePoint(),this.consumeCodePoint(),bn;break;case Ut:if(An(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===bt)for(this.consumeCodePoint();;){var o=this.consumeCodePoint();if(o===bt&&(o=this.consumeCodePoint())===qe)return this.consumeToken();if(o===Tt)return this.consumeToken()}break;case Nt:return Bn;case Et:return Cn;case lt:if(this.peekCodePoint(0)===ot&&this.peekCodePoint(1)===at&&this.peekCodePoint(2)===at)return this.consumeCodePoint(),this.consumeCodePoint(),vn;break;case ut:var l=this.peekCodePoint(0),u=this.peekCodePoint(1),d=this.peekCodePoint(2);if(sn(l,u,d))return{type:7,value:this.consumeName()};break;case dt:return Nn;case Ye:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return En;case ft:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),dn;break;case mt:return pn;case gt:return gn;case Rt:case Vt:var h=this.peekCodePoint(0),f=this.peekCodePoint(1);return h!==Bt||!qt(f)&&f!==pt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;if(this.peekCodePoint(0)===xt)return this.consumeCodePoint(),hn;break;case yt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),mn;break;case Tt:return jn}return $t(e)?(this.consumeWhiteSpace(),Un):Wt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:c(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===pt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(c.apply(void 0,e.map(function(e){return e===pt?_t:e})),16),end:parseInt(c.apply(void 0,e.map(function(e){return e===pt?Kt:e})),16)};var r=parseInt(c.apply(void 0,e),16);if(this.peekCodePoint(0)===at&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];qt(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(c.apply(void 0,s),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===st?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===st?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tt||this.peekCodePoint(0)===it)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yn)}for(;;){var r=this.consumeCodePoint();if(r===Tt||r===it)return{type:22,value:c.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Tt||this.peekCodePoint(0)===it?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,e)}):(this.consumeBadUrlRemnants(),yn);if(r===Ze||r===rt||r===st||nn(r))return this.consumeBadUrlRemnants(),yn;if(r===Ye){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),yn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===it||e===Tt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=c.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Tt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===ze)return this._value.splice(0,n),wn;if(r===Ye){var s=this._value[n+1];s!==Tt&&void 0!==s&&(s===ze?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,s)&&(t+=this.consumeStringSlice(n),t+=c(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ge,n=this.peekCodePoint(0);for(n!==Bt&&n!==at||e.push(this.consumeCodePoint());Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===Ut&&Wt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Ot||n===Lt)&&((r===Bt||r===at)&&Wt(s)||Wt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=We;Wt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[an(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);return sn(r,s,i)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=c(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=c(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||zt(n)||n>1114111?vt:n}return e===Tt?vt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=c(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=c(this.consumeEscapedCodePoint())}}},e}(),Qn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Fn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Rn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?jn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),kn=function(e){return 15===e.type},In=function(e){return 17===e.type},Sn=function(e){return 20===e.type},Tn=function(e){return 0===e.type},_n=function(e,t){return Sn(e)&&e.value===t},Dn=function(e){return 31!==e.type},Ln=function(e){return 31!==e.type&&4!==e.type},Hn=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},Rn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Pn=function(e){return 17===e.type||15===e.type},Mn=function(e){return 16===e.type||Pn(e)},On=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Kn={type:17,number:0,flags:Ge},Vn={type:16,number:50,flags:Ge},Gn={type:16,number:100,flags:Ge},Wn=function(e,t,n){var r=e[0],s=e[1];return[zn(r,t),zn("undefined"!==typeof s?s:r,n)]},zn=function(e,t){if(16===e.type)return e.number/100*t;if(kn(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Yn="grad",Xn="rad",Jn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Yn:return Math.PI/200*t.number;case Xn:return t.number;case Jn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Yn||e.unit===Xn||e.unit===Jn)},er=function(e){switch(e.filter(Sn).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Kn,Kn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Kn,Gn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Gn,Gn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Gn,Kn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=cr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),s=t.value.substring(1,2),i=t.value.substring(2,3);return ir(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(4===t.value.length){r=t.value.substring(0,1),s=t.value.substring(1,2),i=t.value.substring(2,3);var A=t.value.substring(3,4);return ir(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(A+A,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),i=t.value.substring(4,6),ir(parseInt(r,16),parseInt(s,16),parseInt(i,16),1);if(8===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),i=t.value.substring(4,6),A=t.value.substring(6,8),ir(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(A,16)/255)}if(20===t.type){var a=dr[t.value.toUpperCase()];if("undefined"!==typeof a)return a}return dr.TRANSPARENT}},rr=function(e){return 0===(255&e)},sr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},ir=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},Ar=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},ar=function(e,t){var n=t.filter(Ln);if(3===n.length){var r=n.map(Ar),s=r[0],i=r[1],A=r[2];return ir(s,i,A,1)}if(4===n.length){var a=n.map(Ar),o=(s=a[0],i=a[1],A=a[2],a[3]);return ir(s,i,A,o)}return 0};function or(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var lr=function(e,t){var n=t.filter(Ln),r=n[0],s=n[1],i=n[2],A=n[3],a=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),o=Mn(s)?s.number/100:0,l=Mn(i)?i.number/100:0,c="undefined"!==typeof A&&Mn(A)?zn(A,1):1;if(0===o)return ir(255*l,255*l,255*l,1);var u=l<=.5?l*(o+1):l+o-l*o,d=2*l-u,h=or(d,u,a+1/3),f=or(d,u,a),m=or(d,u,a-1/3);return ir(255*h,255*f,255*m,c)},cr={hsl:lr,hsla:lr,rgb:ar,rgba:ar},ur=function(e,t){return nr.parse(e,Qn.create(t).parseComponentValue())},dr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Sn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Mn(r)?{color:n,stop:r}:{color:n,stop:null}},pr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Kn),null===r.stop&&(r.stop=Gn);for(var s=[],i=0,A=0;A<e.length;A++){var a=e[A].stop;if(null!==a){var o=zn(a,t);o>i?s.push(o):s.push(i),i=o}else s.push(null)}var l=null;for(A=0;A<s.length;A++){var c=s[A];if(null===c)null===l&&(l=A);else if(null!==l){for(var u=A-l,d=(c-s[l-1])/(u+1),h=1;h<=u;h++)s[l+h-1]=d*h;l=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,s[n]/t),0)}})},gr=function(e,t,n){var r=t/2,s=n/2,i=zn(e[0],t)-r,A=s-zn(e[1],n);return(Math.atan2(A,i)+2*Math.PI)%(2*Math.PI)},xr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),i=t/2,A=n/2,a=s/2,o=Math.sin(r-Math.PI/2)*a,l=Math.cos(r-Math.PI/2)*a;return[s,i-l,i+l,A-o,A+o]},yr=function(e,t){return Math.sqrt(e*e+t*t)},wr=function(e,t,n,r,s){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var i=t[0],A=t[1],a=yr(n-i,r-A);return(s?a<e.optimumDistance:a>e.optimumDistance)?{optimumCorner:t,optimumDistance:a}:e},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},vr=function(e,t,n,r,s){var i=0,A=0;switch(e.size){case 0:0===e.shape?i=A=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(i=Math.min(Math.abs(t),Math.abs(t-r)),A=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===e.shape)i=A=Math.min(yr(t,n),yr(t,n-s),yr(t-r,n),yr(t-r,n-s));else if(1===e.shape){var a=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),o=wr(r,s,t,n,!0),l=o[0],c=o[1];A=a*(i=yr(l-t,(c-n)/a))}break;case 1:0===e.shape?i=A=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(i=Math.max(Math.abs(t),Math.abs(t-r)),A=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===e.shape)i=A=Math.max(yr(t,n),yr(t,n-s),yr(t-r,n),yr(t-r,n-s));else if(1===e.shape){a=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r));var u=wr(r,s,t,n,!1);l=u[0],c=u[1],A=a*(i=yr(l-t,(c-n)/a))}}return Array.isArray(e.size)&&(i=zn(e.size[0],r),A=2===e.size.length?zn(e.size[1],s):i),[i,A]},br=function(e,t){var n=tr(180),r=[];return Hn(t).forEach(function(t,s){if(0===s){var i=t[0];if(20===i.type&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(n=er(t));if($n(i))return void(n=(Zn.parse(e,i)+tr(270))%tr(360))}var A=mr(e,t);r.push(A)}),{angle:n,stops:r,type:1}},Br="closest-side",Cr="farthest-side",Nr="closest-corner",Er="farthest-corner",Ur="circle",jr="ellipse",Fr="cover",Qr="contain",kr=function(e,t){var n=0,r=3,s=[],i=[];return Hn(t).forEach(function(t,A){var a=!0;if(0===A?a=t.reduce(function(e,t){if(Sn(t))switch(t.value){case"center":return i.push(Vn),!1;case"top":case"left":return i.push(Kn),!1;case"right":case"bottom":return i.push(Gn),!1}else if(Mn(t)||Pn(t))return i.push(t),!1;return e},a):1===A&&(a=t.reduce(function(e,t){if(Sn(t))switch(t.value){case Ur:return n=0,!1;case jr:return n=1,!1;case Qr:case Br:return r=0,!1;case Cr:return r=1,!1;case Nr:return r=2,!1;case Fr:case Er:return r=3,!1}else if(Pn(t)||Mn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},a)),a){var o=mr(e,t);s.push(o)}}),{size:r,shape:n,stops:s,position:i,type:2}},Ir=function(e){return 1===e.type},Sr=function(e){return 2===e.type},Tr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Lr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function _r(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Lr[e.name])}var Dr,Lr={"linear-gradient":function(e,t){var n=tr(180),r=[];return Hn(t).forEach(function(t,s){if(0===s){var i=t[0];if(20===i.type&&"to"===i.value)return void(n=er(t));if($n(i))return void(n=Zn.parse(e,i))}var A=mr(e,t);r.push(A)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":br,"-ms-linear-gradient":br,"-o-linear-gradient":br,"-webkit-linear-gradient":br,"radial-gradient":function(e,t){var n=0,r=3,s=[],i=[];return Hn(t).forEach(function(t,A){var a=!0;if(0===A){var o=!1;a=t.reduce(function(e,t){if(o)if(Sn(t))switch(t.value){case"center":return i.push(Vn),e;case"top":case"left":return i.push(Kn),e;case"right":case"bottom":return i.push(Gn),e}else(Mn(t)||Pn(t))&&i.push(t);else if(Sn(t))switch(t.value){case Ur:return n=0,!1;case jr:return n=1,!1;case"at":return o=!0,!1;case Br:return r=0,!1;case Fr:case Cr:return r=1,!1;case Qr:case Nr:return r=2,!1;case Er:return r=3,!1}else if(Pn(t)||Mn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},a)}if(a){var l=mr(e,t);s.push(l)}}),{size:r,shape:n,stops:s,position:i,type:2}},"-moz-radial-gradient":kr,"-ms-radial-gradient":kr,"-o-radial-gradient":kr,"-webkit-radial-gradient":kr,"-webkit-gradient":function(e,t){var n=tr(180),r=[],s=1,i=0,A=3,a=[];return Hn(t).forEach(function(t,n){var i=t[0];if(0===n){if(Sn(i)&&"linear"===i.value)return void(s=1);if(Sn(i)&&"radial"===i.value)return void(s=2)}if(18===i.type)if("from"===i.name){var A=nr.parse(e,i.values[0]);r.push({stop:Kn,color:A})}else if("to"===i.name)A=nr.parse(e,i.values[0]),r.push({stop:Gn,color:A});else if("color-stop"===i.name){var a=i.values.filter(Ln);if(2===a.length){A=nr.parse(e,a[1]);var o=a[0];In(o)&&r.push({stop:{type:16,number:100*o.number,flags:o.flags},color:A})}}}),1===s?{angle:(n+tr(180))%tr(360),stops:r,type:s}:{size:A,shape:i,stops:r,position:a,type:s}}},Hr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return Ln(e)&&_r(e)}).map(function(t){return Tr.parse(e,t)})}},Rr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Sn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Hn(t).map(function(e){return e.filter(Mn)}).map(On)}},Mr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Hn(t).map(function(e){return e.filter(Sn).map(function(e){return e.value}).join(" ")}).map(Or)}},Or=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Dr||(Dr={}));var Kr,Vr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Hn(t).map(function(e){return e.filter(Gr)})}},Gr=function(e){return Sn(e)||Mn(e)},Wr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zr=Wr("top"),qr=Wr("right"),Yr=Wr("bottom"),Xr=Wr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return On(t.filter(Mn))}}},Zr=Jr("top-left"),$r=Jr("top-right"),es=Jr("bottom-right"),ts=Jr("bottom-left"),ns=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rs=ns("top"),ss=ns("right"),is=ns("bottom"),As=ns("left"),as=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:0}}},os=as("top"),ls=as("right"),cs=as("bottom"),us=as("left"),ds={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hs={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fs={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Sn).reduce(function(e,t){return e|ms(t.value)},0)}},ms=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ps={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gs={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Kr||(Kr={}));var xs,ys={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Kr.STRICT:Kr.NORMAL}},ws={name:"line-height",initialValue:"normal",prefix:!1,type:4},vs=function(e,t){return Sn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Mn(e)?zn(e,t):t},bs={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Tr.parse(e,t)}},Bs={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Cs={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ns=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Es=Ns("top"),Us=Ns("right"),js=Ns("bottom"),Fs=Ns("left"),Qs={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Sn).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},ks={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Is=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ss=Is("top"),Ts=Is("right"),_s=Is("bottom"),Ds=Is("left"),Ls={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Hs={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Rs={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&_n(t[0],"none")?[]:Hn(t).map(function(t){for(var n={color:dr.TRANSPARENT,offsetX:Kn,offsetY:Kn,blur:Kn},r=0,s=0;s<t.length;s++){var i=t[s];Pn(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:n.blur=i,r++):n.color=nr.parse(e,i)}return n})}},Ps={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ms={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Os[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Os={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var s=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var A=t[12],a=t[13];return t[14],t[15],16===t.length?[n,r,s,i,A,a]:null}},Ks={type:16,number:50,flags:Ge},Vs=[Ks,Ks],Gs={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Mn);return 2!==n.length?Vs:[n[0],n[1]]}},Ws={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(xs||(xs={}));for(var zs={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return xs.BREAK_ALL;case"keep-all":return xs.KEEP_ALL;default:return xs.NORMAL}}},qs={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(In(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Ys={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Xs={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:1}},Js={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zs={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Sn).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$s={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},ei={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ti={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:Sn(t)&&"bold"===t.value?700:400}},ni={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Sn).map(function(e){return e.value})}},ri={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},si=function(e,t){return 0!==(e&t)},ii={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},Ai={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],s=t.filter(Dn),i=0;i<s.length;i++){var A=s[i],a=s[i+1];if(20===A.type){var o=a&&In(a)?a.number:1;r.push({counter:A.value,increment:o})}}return r}},ai={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Dn),s=0;s<r.length;s++){var i=r[s],A=r[s+1];if(Sn(i)&&"none"!==i.value){var a=A&&In(A)?A.number:0;n.push({counter:i.value,reset:a})}}return n}},oi={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).map(function(t){return Ys.parse(e,t)})}},li={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],s=t.filter(Tn);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var A=s[i].value,a=s[i+1].value;r.push({open:A,close:a})}return r}},ci=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},ui={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&_n(t[0],"none")?[]:Hn(t).map(function(t){for(var n={color:255,offsetX:Kn,offsetY:Kn,blur:Kn,spread:Kn,inset:!1},r=0,s=0;s<t.length;s++){var i=t[s];_n(i,"inset")?n.inset=!0:Pn(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:2===r?n.blur=i:n.spread=i,r++):n.color=nr.parse(e,i)}return n})}},di={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Sn).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),n.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},hi={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fi={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:0}},mi=function(){function e(e,t){var n,r;this.animationDuration=xi(e,oi,t.animationDuration),this.backgroundClip=xi(e,hr,t.backgroundClip),this.backgroundColor=xi(e,fr,t.backgroundColor),this.backgroundImage=xi(e,Hr,t.backgroundImage),this.backgroundOrigin=xi(e,Rr,t.backgroundOrigin),this.backgroundPosition=xi(e,Pr,t.backgroundPosition),this.backgroundRepeat=xi(e,Mr,t.backgroundRepeat),this.backgroundSize=xi(e,Vr,t.backgroundSize),this.borderTopColor=xi(e,zr,t.borderTopColor),this.borderRightColor=xi(e,qr,t.borderRightColor),this.borderBottomColor=xi(e,Yr,t.borderBottomColor),this.borderLeftColor=xi(e,Xr,t.borderLeftColor),this.borderTopLeftRadius=xi(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=xi(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=xi(e,es,t.borderBottomRightRadius),this.borderBottomLeftRadius=xi(e,ts,t.borderBottomLeftRadius),this.borderTopStyle=xi(e,rs,t.borderTopStyle),this.borderRightStyle=xi(e,ss,t.borderRightStyle),this.borderBottomStyle=xi(e,is,t.borderBottomStyle),this.borderLeftStyle=xi(e,As,t.borderLeftStyle),this.borderTopWidth=xi(e,os,t.borderTopWidth),this.borderRightWidth=xi(e,ls,t.borderRightWidth),this.borderBottomWidth=xi(e,cs,t.borderBottomWidth),this.borderLeftWidth=xi(e,us,t.borderLeftWidth),this.boxShadow=xi(e,ui,t.boxShadow),this.color=xi(e,ds,t.color),this.direction=xi(e,hs,t.direction),this.display=xi(e,fs,t.display),this.float=xi(e,ps,t.cssFloat),this.fontFamily=xi(e,$s,t.fontFamily),this.fontSize=xi(e,ei,t.fontSize),this.fontStyle=xi(e,ri,t.fontStyle),this.fontVariant=xi(e,ni,t.fontVariant),this.fontWeight=xi(e,ti,t.fontWeight),this.letterSpacing=xi(e,gs,t.letterSpacing),this.lineBreak=xi(e,ys,t.lineBreak),this.lineHeight=xi(e,ws,t.lineHeight),this.listStyleImage=xi(e,bs,t.listStyleImage),this.listStylePosition=xi(e,Bs,t.listStylePosition),this.listStyleType=xi(e,Cs,t.listStyleType),this.marginTop=xi(e,Es,t.marginTop),this.marginRight=xi(e,Us,t.marginRight),this.marginBottom=xi(e,js,t.marginBottom),this.marginLeft=xi(e,Fs,t.marginLeft),this.opacity=xi(e,Xs,t.opacity);var s=xi(e,Qs,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=xi(e,ks,t.overflowWrap),this.paddingTop=xi(e,Ss,t.paddingTop),this.paddingRight=xi(e,Ts,t.paddingRight),this.paddingBottom=xi(e,_s,t.paddingBottom),this.paddingLeft=xi(e,Ds,t.paddingLeft),this.paintOrder=xi(e,di,t.paintOrder),this.position=xi(e,Hs,t.position),this.textAlign=xi(e,Ls,t.textAlign),this.textDecorationColor=xi(e,Js,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=xi(e,Zs,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=xi(e,Rs,t.textShadow),this.textTransform=xi(e,Ps,t.textTransform),this.transform=xi(e,Ms,t.transform),this.transformOrigin=xi(e,Gs,t.transformOrigin),this.visibility=xi(e,Ws,t.visibility),this.webkitTextStrokeColor=xi(e,hi,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=xi(e,fi,t.webkitTextStrokeWidth),this.wordBreak=xi(e,zs,t.wordBreak),this.zIndex=xi(e,qs,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return si(this.display,4)||si(this.display,33554432)||si(this.display,268435456)||si(this.display,536870912)||si(this.display,67108864)||si(this.display,134217728)},e}(),pi=function(){function e(e,t){this.content=xi(e,ii,t.content),this.quotes=xi(e,li,t.quotes)}return e}(),gi=function(){function e(e,t){this.counterIncrement=xi(e,Ai,t.counterIncrement),this.counterReset=xi(e,ai,t.counterReset)}return e}(),xi=function(e,t,n){var r=new Fn,s=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(s);var i=new Qn(r.read());switch(t.type){case 2:var A=i.parseComponentValue();return t.parse(e,Sn(A)?A.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,i.parseComponentValue());case"color":return nr.parse(e,i.parseComponentValue());case"image":return Tr.parse(e,i.parseComponentValue());case"length":var a=i.parseComponentValue();return Pn(a)?a:Kn;case"length-percentage":var o=i.parseComponentValue();return Mn(o)?o:Kn;case"time":return Ys.parse(e,i.parseComponentValue())}}},yi="data-html2canvas-debug",wi=function(e){switch(e.getAttribute(yi)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},vi=function(e,t){var n=wi(e);return 1===n||t===n},bi=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,vi(t,3),this.styles=new mi(e,window.getComputedStyle(t,null)),la(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=a(this.context,t),vi(t,4)&&(this.flags|=16)}return e}(),Bi="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ni="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ei=0;Ei<Ci.length;Ei++)Ni[Ci.charCodeAt(Ei)]=Ei;for(var Ui=function(e){var t,n,r,s,i,A=.75*e.length,a=e.length,o=0;"="===e[e.length-1]&&(A--,"="===e[e.length-2]&&A--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(A):new Array(A),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<a;t+=4)n=Ni[e.charCodeAt(t)],r=Ni[e.charCodeAt(t+1)],s=Ni[e.charCodeAt(t+2)],i=Ni[e.charCodeAt(t+3)],c[o++]=n<<2|r>>4,c[o++]=(15&r)<<4|s>>2,c[o++]=(3&s)<<6|63&i;return l},ji=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Fi=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Qi=5,ki=11,Ii=2,Si=65536>>Qi,Ti=(1<<Qi)-1,_i=Si+(1024>>Qi)+32,Di=65536>>ki,Li=(1<<ki-Qi)-1,Hi=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Ri=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Pi=function(e,t){var n=Ui(e),r=Array.isArray(n)?Fi(n):new Uint32Array(n),s=Array.isArray(n)?ji(n):new Uint16Array(n),i=24,A=Hi(s,i/2,r[4]/2),a=2===r[5]?Hi(s,(i+r[4])/2):Ri(r,Math.ceil((i+r[4])/4));return new Mi(r[0],r[1],r[2],r[3],A,a)},Mi=function(){function e(e,t,n,r,s,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Qi])<<Ii)+(e&Ti),this.data[t];if(e<=65535)return t=((t=this.index[Si+(e-55296>>Qi)])<<Ii)+(e&Ti),this.data[t];if(e<this.highStart)return t=_i-Di+(e>>ki),t=this.index[t],t+=e>>Qi&Li,t=((t=this.index[t])<<Ii)+(e&Ti),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ki="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Vi=0;Vi<Oi.length;Vi++)Ki[Oi.charCodeAt(Vi)]=Vi;var Gi,Wi=1,zi=2,qi=3,Yi=4,Xi=5,Ji=7,Zi=8,$i=9,eA=10,tA=11,nA=12,rA=13,sA=14,iA=15,AA=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);56320===(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),n--)}else t.push(s)}return t},aA=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var A=e[s];A<=65535?r.push(A):(A-=65536,r.push(55296+(A>>10),A%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},oA=Pi(Bi),lA="\xd7",cA="\xf7",uA=function(e){return oA.get(e)},dA=function(e,t,n){var r=n-2,s=t[r],i=t[n-1],A=t[n];if(i===zi&&A===qi)return lA;if(i===zi||i===qi||i===Yi)return cA;if(A===zi||A===qi||A===Yi)return cA;if(i===Zi&&-1!==[Zi,$i,tA,nA].indexOf(A))return lA;if((i===tA||i===$i)&&(A===$i||A===eA))return lA;if((i===nA||i===eA)&&A===eA)return lA;if(A===rA||A===Xi)return lA;if(A===Ji)return lA;if(i===Wi)return lA;if(i===rA&&A===sA){for(;s===Xi;)s=t[--r];if(s===sA)return lA}if(i===iA&&A===iA){for(var a=0;s===iA;)a++,s=t[--r];if(a%2===0)return lA}return cA},hA=function(e){var t=AA(e),n=t.length,r=0,s=0,i=t.map(uA);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=lA;r<n&&(e=dA(t,i,++r))===lA;);if(e!==lA||r===n){var A=aA.apply(null,t.slice(s,r));return s=r,{value:A,done:!1}}return{done:!0,value:null}}}},fA=function(e){for(var t,n=hA(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},mA=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(e.body.removeChild(r),i===t)return!0}}return!1},pA=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,s=l(r.data).map(function(e){return c(e)}),i=0,A={},a=s.every(function(e,t){n.setStart(r,i),n.setEnd(r,i+e.length);var s=n.getBoundingClientRect();i+=e.length;var a=s.x>A.x||s.y>A.y;return A=s,0===t||a});return e.body.removeChild(t),a},gA=function(){return"undefined"!==typeof(new Image).crossOrigin},xA=function(){return"string"===typeof(new XMLHttpRequest).responseType},yA=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Lt){return!1}return!0},wA=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},vA=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=t.toDataURL();s.src=i;var A=bA(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),BA(A).then(function(t){r.drawImage(t,0,0);var s=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var A=e.createElement("div");return A.style.backgroundImage="url("+i+")",A.style.height=n+"px",wA(s)?BA(bA(n,n,0,0,A)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),wA(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},bA=function(e,t,n,r,s){var i="http://www.w3.org/2000/svg",A=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return A.setAttributeNS(null,"width",e.toString()),A.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(a),a.appendChild(s),A},BA=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},CA={get SUPPORT_RANGE_BOUNDS(){var e=mA(document);return Object.defineProperty(CA,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=CA.SUPPORT_RANGE_BOUNDS&&pA(document);return Object.defineProperty(CA,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=yA(document);return Object.defineProperty(CA,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?vA(document):Promise.resolve(!1);return Object.defineProperty(CA,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=gA();return Object.defineProperty(CA,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=xA();return Object.defineProperty(CA,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(CA,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(CA,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},NA=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),EA=function(e,t,n,r){var s=kA(t,n),i=[],a=0;return s.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(CA.SUPPORT_RANGE_BOUNDS){var s=jA(r,a,t.length).getClientRects();if(s.length>1){var o=FA(t),l=0;o.forEach(function(t){i.push(new NA(t,A.fromDOMRectList(e,jA(r,l+a,t.length).getClientRects()))),l+=t.length})}else i.push(new NA(t,A.fromDOMRectList(e,s)))}else{var c=r.splitText(t.length);i.push(new NA(t,UA(e,r))),r=c}else CA.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));a+=t.length}),i},UA=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var i=a(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return A.EMPTY},jA=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},FA=function(e){if(CA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return fA(e)},QA=function(e,t){if(CA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return SA(e,t)},kA=function(e,t){return 0!==t.letterSpacing?FA(e):QA(e,t)},IA=[32,160,4961,65792,65793,4153,4241],SA=function(e,t){for(var n,r=Oe(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],i=function(){if(n.value){var e=n.value.slice(),t=l(e),r="";t.forEach(function(e){-1===IA.indexOf(e)?r+=c(e):(r.length&&s.push(r),s.push(c(e)),r="")}),r.length&&s.push(r)}};!(n=r.next()).done;)i();return s},TA=function(){function e(e,t,n){this.text=_A(t.data,n.textTransform),this.textBounds=EA(e,this.text,n,t)}return e}(),_A=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(DA,LA);case 2:return e.toUpperCase();default:return e}},DA=/(^|\s|:|-|\(|\))([a-z])/g,LA=function(e,t,n){return e.length>0?t+n.toUpperCase():e},HA=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(bi),RA=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(bi),PA=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=new XMLSerializer,i=a(t,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(bi),MA=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(bi),OA=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(bi),KA=[{type:15,flags:0,unit:"px",number:3}],VA=[{type:16,flags:0,number:50}],GA=function(e){return e.width>e.height?new A(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new A(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},WA=function(e){var t=e.type===YA?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},zA="checkbox",qA="radio",YA="password",XA=707406591,JA=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=WA(n),r.type!==zA&&r.type!==qA||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=GA(r.bounds)),r.type){case zA:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=KA;break;case qA:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=VA}return r}return t(n,e),n}(bi),ZA=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return t(n,e),n}(bi),$A=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(bi),ea=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=sa(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?ur(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dr.TRANSPARENT,i=n.contentWindow.document.body?ur(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):dr.TRANSPARENT;r.backgroundColor=rr(s)?rr(i)?r.styles.backgroundColor:i:s}}catch(Lt){}return r}return t(n,e),n}(bi),ta=["OL","UL","MENU"],na=function(e,t,n,r){for(var s=t.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,aa(s)&&s.data.trim().length>0)n.textNodes.push(new TA(e,s,n.styles));else if(oa(s))if(Na(s)&&s.assignedNodes)s.assignedNodes().forEach(function(t){return na(e,t,n,r)});else{var A=ra(e,s);A.styles.isVisible()&&(ia(s,A,r)?A.flags|=4:Aa(A.styles)&&(A.flags|=2),-1!==ta.indexOf(s.tagName)&&(A.flags|=8),n.elements.push(A),s.slot,s.shadowRoot?na(e,s.shadowRoot,A,r):Ba(s)||ma(s)||Ca(s)||na(e,s,A,r))}},ra=function(e,t){return ya(t)?new HA(e,t):ga(t)?new RA(e,t):ma(t)?new PA(e,t):ua(t)?new MA(e,t):da(t)?new OA(e,t):ha(t)?new JA(e,t):Ca(t)?new ZA(e,t):Ba(t)?new $A(e,t):wa(t)?new ea(e,t):new bi(e,t)},sa=function(e,t){var n=ra(e,t);return n.flags|=4,na(e,t,n,n),n},ia=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||pa(e)&&n.styles.isTransparent()},Aa=function(e){return e.isPositioned()||e.isFloating()},aa=function(e){return e.nodeType===Node.TEXT_NODE},oa=function(e){return e.nodeType===Node.ELEMENT_NODE},la=function(e){return oa(e)&&"undefined"!==typeof e.style&&!ca(e)},ca=function(e){return"object"===typeof e.className},ua=function(e){return"LI"===e.tagName},da=function(e){return"OL"===e.tagName},ha=function(e){return"INPUT"===e.tagName},fa=function(e){return"HTML"===e.tagName},ma=function(e){return"svg"===e.tagName},pa=function(e){return"BODY"===e.tagName},ga=function(e){return"CANVAS"===e.tagName},xa=function(e){return"VIDEO"===e.tagName},ya=function(e){return"IMG"===e.tagName},wa=function(e){return"IFRAME"===e.tagName},va=function(e){return"STYLE"===e.tagName},ba=function(e){return"SCRIPT"===e.tagName},Ba=function(e){return"TEXTAREA"===e.tagName},Ca=function(e){return"SELECT"===e.tagName},Na=function(e){return"SLOT"===e.tagName},Ea=function(e){return e.tagName.indexOf("-")>0},Ua=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,s=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var i=[];return s&&r.forEach(function(e){var n=t.counters[e.counter];i.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),i},e}(),ja={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Fa={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Qa={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},ka={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Ia=function(e,t,n,r,s,i){return e<t||e>n?Ga(e,s,i.length>0):r.integers.reduce(function(t,n,s){for(;e>=n;)e-=n,t+=r.values[s];return t},"")+i},Sa=function(e,t,n,r){var s="";do{n||e--,s=r(e)+s,e/=t}while(e*t>=t);return s},Ta=function(e,t,n,r,s){var i=n-t+1;return(e<0?"-":"")+(Sa(Math.abs(e),i,r,function(e){return c(Math.floor(e%i)+t)})+s)},_a=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Sa(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},Da=1,La=2,Ha=4,Ra=8,Pa=function(e,t,n,r,s,i){if(e<-9999||e>9999)return Ga(e,4,s.length>0);var A=Math.abs(e),a=s;if(0===A)return t[0]+a;for(var o=0;A>0&&o<=4;o++){var l=A%10;0===l&&si(i,Da)&&""!==a?a=t[l]+a:l>1||1===l&&0===o||1===l&&1===o&&si(i,La)||1===l&&1===o&&si(i,Ha)&&e>100||1===l&&o>1&&si(i,Ra)?a=t[l]+(o>0?n[o-1]:"")+a:1===l&&o>0&&(a=n[o-1]+a),A=Math.floor(A/10)}return(e<0?r:"")+a},Ma="\u5341\u767e\u5343\u842c",Oa="\u62fe\u4f70\u4edf\u842c",Ka="\u30de\u30a4\u30ca\u30b9",Va="\ub9c8\uc774\ub108\uc2a4",Ga=function(e,t,n){var r=n?". ":"",s=n?"\u3001":"",i=n?", ":"",A=n?" ":"";switch(t){case 0:return"\u2022"+A;case 1:return"\u25e6"+A;case 2:return"\u25fe"+A;case 5:var a=Ta(e,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return _a(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",s);case 6:return Ia(e,1,3999,ja,3,r).toLowerCase();case 7:return Ia(e,1,3999,ja,3,r);case 8:return Ta(e,945,969,!1,r);case 9:return Ta(e,97,122,!1,r);case 10:return Ta(e,65,90,!1,r);case 11:return Ta(e,1632,1641,!0,r);case 12:case 49:return Ia(e,1,9999,Fa,3,r);case 35:return Ia(e,1,9999,Fa,3,r).toLowerCase();case 13:return Ta(e,2534,2543,!0,r);case 14:case 30:return Ta(e,6112,6121,!0,r);case 15:return _a(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",s);case 16:return _a(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",s);case 17:case 48:return Pa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ma,"\u8ca0",s,La|Ha|Ra);case 47:return Pa(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Oa,"\u8ca0",s,Da|La|Ha|Ra);case 42:return Pa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ma,"\u8d1f",s,La|Ha|Ra);case 41:return Pa(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Oa,"\u8d1f",s,Da|La|Ha|Ra);case 26:return Pa(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Ka,s,0);case 25:return Pa(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Ka,s,Da|La|Ha);case 31:return Pa(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Va,i,Da|La|Ha);case 33:return Pa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Va,i,0);case 32:return Pa(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Va,i,Da|La|Ha);case 18:return Ta(e,2406,2415,!0,r);case 20:return Ia(e,1,19999,ka,3,r);case 21:return Ta(e,2790,2799,!0,r);case 22:return Ta(e,2662,2671,!0,r);case 22:return Ia(e,1,10999,Qa,3,r);case 23:return _a(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return _a(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Ta(e,3302,3311,!0,r);case 28:return _a(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",s);case 29:return _a(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",s);case 34:return Ta(e,3792,3801,!0,r);case 37:return Ta(e,6160,6169,!0,r);case 38:return Ta(e,4160,4169,!0,r);case 39:return Ta(e,2918,2927,!0,r);case 40:return Ta(e,1776,1785,!0,r);case 43:return Ta(e,3046,3055,!0,r);case 44:return Ta(e,3174,3183,!0,r);case 45:return Ta(e,3664,3673,!0,r);case 46:return Ta(e,3872,3881,!0,r);default:return Ta(e,48,57,!0,r)}},Wa="data-html2canvas-ignore",za=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ua,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,i=Ya(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=i.contentWindow,l=o.document,c=Za(i).then(function(){return r(n,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(ro),o&&(o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ja(l)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(l,n)}).then(function(){return i})]:[2,i]}})})});return l.open(),l.write(to(document.doctype)+"<html></html>"),no(this.referenceElement.ownerDocument,A,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},e.prototype.createElementClone=function(e){if(vi(e,2),ga(e))return this.createCanvasClone(e);if(xa(e))return this.createVideoClone(e);if(va(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return ya(t)&&(ya(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Ea(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return eo(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Lt){if(this.context.logger.error("Unable to access cssRules property",Lt),"SecurityError"!==Lt.name)throw Lt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Lt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var A=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(A){var a=A.getContextAttributes();!1===(null===a||void 0===a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch(Lt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Lt){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){oa(t)&&(ba(t)||t.hasAttribute(Wa)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&oa(t)&&va(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(oa(s)&&Na(s)&&"function"===typeof s.assignedNodes){var i=s.assignedNodes();i.length&&i.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,s,n)},e.prototype.cloneNode=function(e,t){if(aa(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&oa(e)&&(la(e)||ca(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),A=n.getComputedStyle(e,":after");this.referenceElement===e&&la(r)&&(this.clonedReferenceElement=r),pa(r)&&lo(r);var a=this.counters.parse(new gi(this.context,s)),o=this.resolvePseudoContent(e,r,i,Gi.BEFORE);Ea(e)&&(t=!0),xa(e)||this.cloneChildNodes(e,r,t),o&&r.insertBefore(o,r.firstChild);var l=this.resolvePseudoContent(e,r,A,Gi.AFTER);return l&&r.appendChild(l),this.counters.pop(a),(s&&(this.options.copyStyles||ca(e))&&!wa(e)||t)&&eo(s,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Ba(e)||Ca(e))&&(Ba(r)||Ca(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var s=this;if(n){var i=n.content,A=t.ownerDocument;if(A&&i&&"none"!==i&&"-moz-alt-content"!==i&&"none"!==n.display){this.counters.parse(new gi(this.context,n));var a=new pi(this.context,n),o=A.createElement("html2canvaspseudoelement");eo(n,o),a.content.forEach(function(t){if(0===t.type)o.appendChild(A.createTextNode(t.value));else if(22===t.type){var n=A.createElement("img");n.src=t.value,n.style.opacity="1",o.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Sn);r.length&&o.appendChild(A.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var i=t.values.filter(Ln),l=i[0],c=i[1];if(l&&Sn(l)){var u=s.counters.getCounterValue(l.value),d=c&&Sn(c)?Cs.parse(s.context,c.value):3;o.appendChild(A.createTextNode(Ga(u,d,!1)))}}else if("counters"===t.name){var h=t.values.filter(Ln),f=(l=h[0],h[1]);if(c=h[2],l&&Sn(l)){var m=s.counters.getCounterValues(l.value),p=c&&Sn(c)?Cs.parse(s.context,c.value):3,g=f&&0===f.type?f.value:"",x=m.map(function(e){return Ga(e,p,!1)}).join(g);o.appendChild(A.createTextNode(x))}}}else if(20===t.type)switch(t.value){case"open-quote":o.appendChild(A.createTextNode(ci(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":o.appendChild(A.createTextNode(ci(a.quotes,--s.quoteDepth,!1)));break;default:o.appendChild(A.createTextNode(t.value))}}),o.className=Ao+" "+ao;var l=r===Gi.BEFORE?" "+Ao:" "+ao;return ca(t)?t.className.baseValue+=l:t.className+=l,o}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Gi||(Gi={}));var qa,Ya=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Wa,"true"),e.body.appendChild(n),n},Xa=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Ja=function(e){return Promise.all([].slice.call(e.images,0).map(Xa))},Za=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),t(e))},50)}})},$a=["all","d","content"],eo=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===$a.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},to=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},no=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},ro=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},so=":before",io=":after",Ao="___html2canvas___pseudoelement_before",ao="___html2canvas___pseudoelement_after",oo='{\n    content: "" !important;\n    display: none !important;\n}',lo=function(e){co(e,"."+Ao+so+oo+"\n         ."+ao+io+oo)},co=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},uo=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),ho=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:wo(e)||go(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,A=this;return s(this,function(s){switch(s.label){case 0:return t=uo.isSameOrigin(e),n=!xo(e)&&!0===this._options.useCORS&&CA.SUPPORT_CORS_IMAGES&&!t,r=!xo(e)&&!t&&!wo(e)&&"string"===typeof this._options.proxy&&CA.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||xo(e)||wo(e)||r||n?(i=e,r?[4,this.proxy(i)]:[3,2]):[2];case 1:i=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(yo(i)||n)&&(r.crossOrigin="anonymous"),r.src=i,!0===r.complete&&setTimeout(function(){return e(r)},500),A._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+A._options.imageTimeout+"ms) loading image")},A._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(s,i){var A=CA.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===A)s(a.response);else{var e=new FileReader;e.addEventListener("load",function(){return s(e.result)},!1),e.addEventListener("error",function(e){return i(e)},!1),e.readAsDataURL(a.response)}else i("Failed to proxy resource "+r+" with status code "+a.status)},a.onerror=i;var o=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+o+"url="+encodeURIComponent(e)+"&responseType="+A),"text"!==A&&a instanceof XMLHttpRequest&&(a.responseType=A),t._options.imageTimeout){var l=t._options.imageTimeout;a.timeout=l,a.ontimeout=function(){return i("Timed out ("+l+"ms) proxying "+r)}}a.send()})},e}(),fo=/^data:image\/svg\+xml/i,mo=/^data:image\/.*;base64,/i,po=/^data:image\/.*/i,go=function(e){return CA.SUPPORT_SVG_DRAWING||!vo(e)},xo=function(e){return po.test(e)},yo=function(e){return mo.test(e)},wo=function(e){return"blob"===e.substr(0,4)},vo=function(e){return"svg"===e.substr(-3).toLowerCase()||fo.test(e)},bo=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Bo=function(e,t,n){return new bo(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Co=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Bo(this.start,this.startControl,t),s=Bo(this.startControl,this.endControl,t),i=Bo(this.endControl,this.end,t),A=Bo(r,s,t),a=Bo(s,i,t),o=Bo(A,a,t);return n?new e(this.start,r,A,o):new e(o,a,i,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),No=function(e){return 1===e.type},Eo=function(){function e(e){var t=e.styles,n=e.bounds,r=Wn(t.borderTopLeftRadius,n.width,n.height),s=r[0],i=r[1],A=Wn(t.borderTopRightRadius,n.width,n.height),a=A[0],o=A[1],l=Wn(t.borderBottomRightRadius,n.width,n.height),c=l[0],u=l[1],d=Wn(t.borderBottomLeftRadius,n.width,n.height),h=d[0],f=d[1],m=[];m.push((s+a)/n.width),m.push((h+c)/n.width),m.push((i+f)/n.height),m.push((o+u)/n.height);var p=Math.max.apply(Math,m);p>1&&(s/=p,i/=p,a/=p,o/=p,c/=p,u/=p,h/=p,f/=p);var g=n.width-a,x=n.height-u,y=n.width-c,w=n.height-f,v=t.borderTopWidth,b=t.borderRightWidth,B=t.borderBottomWidth,C=t.borderLeftWidth,N=zn(t.paddingTop,e.bounds.width),E=zn(t.paddingRight,e.bounds.width),U=zn(t.paddingBottom,e.bounds.width),j=zn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Uo(n.left+C/3,n.top+v/3,s-C/3,i-v/3,qa.TOP_LEFT):new bo(n.left+C/3,n.top+v/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Uo(n.left+g,n.top+v/3,a-b/3,o-v/3,qa.TOP_RIGHT):new bo(n.left+n.width-b/3,n.top+v/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?Uo(n.left+y,n.top+x,c-b/3,u-B/3,qa.BOTTOM_RIGHT):new bo(n.left+n.width-b/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=h>0||f>0?Uo(n.left+C/3,n.top+w,h-C/3,f-B/3,qa.BOTTOM_LEFT):new bo(n.left+C/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Uo(n.left+2*C/3,n.top+2*v/3,s-2*C/3,i-2*v/3,qa.TOP_LEFT):new bo(n.left+2*C/3,n.top+2*v/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Uo(n.left+g,n.top+2*v/3,a-2*b/3,o-2*v/3,qa.TOP_RIGHT):new bo(n.left+n.width-2*b/3,n.top+2*v/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?Uo(n.left+y,n.top+x,c-2*b/3,u-2*B/3,qa.BOTTOM_RIGHT):new bo(n.left+n.width-2*b/3,n.top+n.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=h>0||f>0?Uo(n.left+2*C/3,n.top+w,h-2*C/3,f-2*B/3,qa.BOTTOM_LEFT):new bo(n.left+2*C/3,n.top+n.height-2*B/3),this.topLeftBorderStroke=s>0||i>0?Uo(n.left+C/2,n.top+v/2,s-C/2,i-v/2,qa.TOP_LEFT):new bo(n.left+C/2,n.top+v/2),this.topRightBorderStroke=s>0||i>0?Uo(n.left+g,n.top+v/2,a-b/2,o-v/2,qa.TOP_RIGHT):new bo(n.left+n.width-b/2,n.top+v/2),this.bottomRightBorderStroke=c>0||u>0?Uo(n.left+y,n.top+x,c-b/2,u-B/2,qa.BOTTOM_RIGHT):new bo(n.left+n.width-b/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=h>0||f>0?Uo(n.left+C/2,n.top+w,h-C/2,f-B/2,qa.BOTTOM_LEFT):new bo(n.left+C/2,n.top+n.height-B/2),this.topLeftBorderBox=s>0||i>0?Uo(n.left,n.top,s,i,qa.TOP_LEFT):new bo(n.left,n.top),this.topRightBorderBox=a>0||o>0?Uo(n.left+g,n.top,a,o,qa.TOP_RIGHT):new bo(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||u>0?Uo(n.left+y,n.top+x,c,u,qa.BOTTOM_RIGHT):new bo(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||f>0?Uo(n.left,n.top+w,h,f,qa.BOTTOM_LEFT):new bo(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Uo(n.left+C,n.top+v,Math.max(0,s-C),Math.max(0,i-v),qa.TOP_LEFT):new bo(n.left+C,n.top+v),this.topRightPaddingBox=a>0||o>0?Uo(n.left+Math.min(g,n.width-b),n.top+v,g>n.width+b?0:Math.max(0,a-b),Math.max(0,o-v),qa.TOP_RIGHT):new bo(n.left+n.width-b,n.top+v),this.bottomRightPaddingBox=c>0||u>0?Uo(n.left+Math.min(y,n.width-C),n.top+Math.min(x,n.height-B),Math.max(0,c-b),Math.max(0,u-B),qa.BOTTOM_RIGHT):new bo(n.left+n.width-b,n.top+n.height-B),this.bottomLeftPaddingBox=h>0||f>0?Uo(n.left+C,n.top+Math.min(w,n.height-B),Math.max(0,h-C),Math.max(0,f-B),qa.BOTTOM_LEFT):new bo(n.left+C,n.top+n.height-B),this.topLeftContentBox=s>0||i>0?Uo(n.left+C+j,n.top+v+N,Math.max(0,s-(C+j)),Math.max(0,i-(v+N)),qa.TOP_LEFT):new bo(n.left+C+j,n.top+v+N),this.topRightContentBox=a>0||o>0?Uo(n.left+Math.min(g,n.width+C+j),n.top+v+N,g>n.width+C+j?0:a-C+j,o-(v+N),qa.TOP_RIGHT):new bo(n.left+n.width-(b+E),n.top+v+N),this.bottomRightContentBox=c>0||u>0?Uo(n.left+Math.min(y,n.width-(C+j)),n.top+Math.min(x,n.height+v+N),Math.max(0,c-(b+E)),u-(B+U),qa.BOTTOM_RIGHT):new bo(n.left+n.width-(b+E),n.top+n.height-(B+U)),this.bottomLeftContentBox=h>0||f>0?Uo(n.left+C+j,n.top+w,Math.max(0,h-(C+j)),f-(B+U),qa.BOTTOM_LEFT):new bo(n.left+C+j,n.top+n.height-(B+U))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(qa||(qa={}));var Uo=function(e,t,n,r,s){var i=(Math.sqrt(2)-1)/3*4,A=n*i,a=r*i,o=e+n,l=t+r;switch(s){case qa.TOP_LEFT:return new Co(new bo(e,l),new bo(e,l-a),new bo(o-A,t),new bo(o,t));case qa.TOP_RIGHT:return new Co(new bo(e,t),new bo(e+A,t),new bo(o,l-a),new bo(o,l));case qa.BOTTOM_RIGHT:return new Co(new bo(o,t),new bo(o,t+a),new bo(e+A,l),new bo(e,l));case qa.BOTTOM_LEFT:default:return new Co(new bo(o,l),new bo(o-A,l),new bo(e,t+a),new bo(e,t))}},jo=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Fo=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Qo=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},ko=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Io=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),So=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),To=function(e){return 0===e.type},_o=function(e){return 1===e.type},Do=function(e){return 2===e.type},Lo=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Ho=function(e,t,n,r,s){return e.map(function(e,i){switch(i){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+s);case 3:return e.add(t,n+s)}return e})},Ro=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Po=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Eo(this.container),this.container.styles.opacity<1&&this.effects.push(new So(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new ko(n,r,s))}if(0!==this.container.styles.overflowX){var i=jo(this.curves),A=Qo(this.curves);Lo(i,A)?this.effects.push(new Io(i,6)):(this.effects.push(new Io(i,2)),this.effects.push(new Io(A,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(e){return!_o(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,s),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var i=jo(n.curves),A=Qo(n.curves);Lo(i,A)||r.unshift(new Io(A,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(t){return si(t.target,e)})},e}(),Mo=function(e,t,n,r){e.container.elements.forEach(function(s){var i=si(s.flags,4),A=si(s.flags,2),a=new Po(s,e);si(s.styles.display,2048)&&r.push(a);var o=si(s.flags,8)?[]:r;if(i||A){var l=i||s.styles.isPositioned()?n:t,c=new Ro(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var u=s.styles.zIndex.order;if(u<0){var d=0;l.negativeZIndex.some(function(e,t){return u>e.element.container.styles.zIndex.order?(d=t,!1):d>0}),l.negativeZIndex.splice(d,0,c)}else if(u>0){var h=0;l.positiveZIndex.some(function(e,t){return u>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0}),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else s.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);Mo(a,c,i?c:n,o)}else s.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),Mo(a,t,n,o);si(s.flags,8)&&Oo(s,o)})},Oo=function(e,t){for(var n=e instanceof OA?e.start:1,r=e instanceof OA&&e.reversed,s=0;s<t.length;s++){var i=t[s];i.container instanceof MA&&"number"===typeof i.container.value&&0!==i.container.value&&(n=i.container.value),i.listValue=Ga(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},Ko=function(e){var t=new Po(e,null),n=new Ro(t),r=[];return Mo(t,n,n,r),Oo(t.container,r),n},Vo=function(e,t){switch(t){case 0:return Yo(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Yo(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Yo(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Yo(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Go=function(e,t){switch(t){case 0:return Yo(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Yo(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Yo(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Yo(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Wo=function(e,t){switch(t){case 0:return Yo(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Yo(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Yo(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Yo(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},zo=function(e,t){switch(t){case 0:return qo(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return qo(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return qo(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return qo(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},qo=function(e,t){var n=[];return No(e)?n.push(e.subdivide(.5,!1)):n.push(e),No(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Yo=function(e,t,n,r){var s=[];return No(e)?s.push(e.subdivide(.5,!1)):s.push(e),No(n)?s.push(n.subdivide(.5,!0)):s.push(n),No(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),No(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},Xo=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Jo=function(e){var t=e.styles,n=e.bounds,r=zn(t.paddingLeft,n.width),s=zn(t.paddingRight,n.width),i=zn(t.paddingTop,n.width),A=zn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+i+A))},Zo=function(e,t){return 0===e?t.bounds:2===e?Jo(t):Xo(t)},$o=function(e,t){return 0===e?t.bounds:2===e?Jo(t):Xo(t)},el=function(e,t,n){var r=Zo(sl(e.styles.backgroundOrigin,t),e),s=$o(sl(e.styles.backgroundClip,t),e),i=rl(sl(e.styles.backgroundSize,t),n,r),A=i[0],a=i[1],o=Wn(sl(e.styles.backgroundPosition,t),r.width-A,r.height-a);return[il(sl(e.styles.backgroundRepeat,t),o,i,r,s),Math.round(r.left+o[0]),Math.round(r.top+o[1]),A,a]},tl=function(e){return Sn(e)&&e.value===Dr.AUTO},nl=function(e){return"number"===typeof e},rl=function(e,t,n){var r=t[0],s=t[1],i=t[2],A=e[0],a=e[1];if(!A)return[0,0];if(Mn(A)&&a&&Mn(a))return[zn(A,n.width),zn(a,n.height)];var o=nl(i);if(Sn(A)&&(A.value===Dr.CONTAIN||A.value===Dr.COVER))return nl(i)?n.width/n.height<i!==(A.value===Dr.COVER)?[n.width,n.width/i]:[n.height*i,n.height]:[n.width,n.height];var l=nl(r),c=nl(s),u=l||c;if(tl(A)&&(!a||tl(a)))return l&&c?[r,s]:o||u?u&&o?[l?r:s*i,c?s:r/i]:[l?r:n.width,c?s:n.height]:[n.width,n.height];if(o){var d=0,h=0;return Mn(A)?d=zn(A,n.width):Mn(a)&&(h=zn(a,n.height)),tl(A)?d=h*i:a&&!tl(a)||(h=d/i),[d,h]}var f=null,m=null;if(Mn(A)?f=zn(A,n.width):a&&Mn(a)&&(m=zn(a,n.height)),null===f||a&&!tl(a)||(m=l&&c?f/r*s:n.height),null!==m&&tl(A)&&(f=l&&c?m/s*r:n.width),null!==f&&null!==m)return[f,m];throw new Error("Unable to calculate background-size for element")},sl=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},il=function(e,t,n,r,s){var i=t[0],A=t[1],a=n[0],o=n[1];switch(e){case 2:return[new bo(Math.round(r.left),Math.round(r.top+A)),new bo(Math.round(r.left+r.width),Math.round(r.top+A)),new bo(Math.round(r.left+r.width),Math.round(o+r.top+A)),new bo(Math.round(r.left),Math.round(o+r.top+A))];case 3:return[new bo(Math.round(r.left+i),Math.round(r.top)),new bo(Math.round(r.left+i+a),Math.round(r.top)),new bo(Math.round(r.left+i+a),Math.round(r.height+r.top)),new bo(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new bo(Math.round(r.left+i),Math.round(r.top+A)),new bo(Math.round(r.left+i+a),Math.round(r.top+A)),new bo(Math.round(r.left+i+a),Math.round(r.top+A+o)),new bo(Math.round(r.left+i),Math.round(r.top+A+o))];default:return[new bo(Math.round(s.left),Math.round(s.top)),new bo(Math.round(s.left+s.width),Math.round(s.top)),new bo(Math.round(s.left+s.width),Math.round(s.height+s.top)),new bo(Math.round(s.left),Math.round(s.height+s.top))]}},Al="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",al="Hidden Text",ol=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),r.src=Al,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(al)),n.appendChild(s),n.appendChild(r);var A=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(al)),n.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:A,middle:a}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),ll=function(){function e(e,t){this.context=e,this.options=t}return e}(),cl=1e4,ul=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new ol(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Do(e)&&(this.ctx.globalAlpha=e.opacity),To(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),_o(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return si(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):FA(e.text).reduce(function(t,s){return r.ctx.fillText(s,t,e.bounds.top+n),t+r.ctx.measureText(s).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=pl(e.fontFamily).join(", "),r=kn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,i,A,a,o,l,c,u=this;return s(this,function(s){return n=this.createFontStyle(t),r=n[0],i=n[1],A=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,A),o=a.baseline,l=a.middle,c=t.paintOrder,e.textBounds.forEach(function(e){c.forEach(function(n){switch(n){case 0:u.ctx.fillStyle=sr(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,o);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){u.ctx.shadowColor=sr(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,o)}),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=sr(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+o),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=sr(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+o)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Jo(e),s=Qo(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,i,a,o,l,c,u,d,h,f,m,p,g,x,y,w,v;return s(this,function(s){switch(s.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,i=t.styles,a=0,o=t.textNodes,s.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,i)]):[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:if(!(t instanceof HA))return[3,8];s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,8];case 7:return s.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof RA&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof PA))return[3,12];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,12];case 11:return s.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof ea&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:c=s.sent(),t.width&&t.height&&this.ctx.drawImage(c,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),s.label=14;case 14:if(t instanceof JA&&(u=Math.min(t.bounds.width,t.bounds.height),t.type===zA?t.checked&&(this.ctx.save(),this.path([new bo(t.bounds.left+.39363*u,t.bounds.top+.79*u),new bo(t.bounds.left+.16*u,t.bounds.top+.5549*u),new bo(t.bounds.left+.27347*u,t.bounds.top+.44071*u),new bo(t.bounds.left+.39694*u,t.bounds.top+.5649*u),new bo(t.bounds.left+.72983*u,t.bounds.top+.23*u),new bo(t.bounds.left+.84*u,t.bounds.top+.34085*u),new bo(t.bounds.left+.39363*u,t.bounds.top+.79*u)]),this.ctx.fillStyle=sr(XA),this.ctx.fill(),this.ctx.restore()):t.type===qA&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+u/2,t.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=sr(XA),this.ctx.fill(),this.ctx.restore())),dl(t)&&t.value.length){switch(d=this.createFontStyle(i),w=d[0],h=d[1],f=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=sr(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fl(t.styles.textAlign),v=Jo(t),m=0,t.styles.textAlign){case 1:m+=v.width/2;break;case 2:m+=v.width}p=v.add(m,0,0,-v.height/2+1),this.ctx.save(),this.path([new bo(v.left,v.top),new bo(v.left+v.width,v.top),new bo(v.left+v.width,v.top+v.height),new bo(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new NA(t.value,p),i.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!si(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];x=void 0,y=g.url,s.label=15;case 15:return s.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return x=s.sent(),this.ctx.drawImage(x,t.bounds.left-(x.width+10),t.bounds.top),[3,18];case 17:return s.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(w=this.createFontStyle(i)[0],this.ctx.font=w,this.ctx.fillStyle=sr(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new A(t.bounds.left,t.bounds.top+zn(t.styles.paddingTop,t.bounds.width),t.bounds.width,vs(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new NA(e.listValue,v),i.letterSpacing,vs(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),s.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,A,a,o,l,c,u,d,h,f,m,p;return s(this,function(s){switch(s.label){case 0:return si(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:s.sent(),t=0,n=e.negativeZIndex,s.label=2;case 2:return t<n.length?(p=n[t],[4,this.renderStack(p)]):[3,5];case 3:s.sent(),s.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:s.sent(),r=0,i=e.nonInlineLevel,s.label=7;case 7:return r<i.length?(p=i[r],[4,this.renderNode(p)]):[3,10];case 8:s.sent(),s.label=9;case 9:return r++,[3,7];case 10:A=0,a=e.nonPositionedFloats,s.label=11;case 11:return A<a.length?(p=a[A],[4,this.renderStack(p)]):[3,14];case 12:s.sent(),s.label=13;case 13:return A++,[3,11];case 14:o=0,l=e.nonPositionedInlineLevel,s.label=15;case 15:return o<l.length?(p=l[o],[4,this.renderStack(p)]):[3,18];case 16:s.sent(),s.label=17;case 17:return o++,[3,15];case 18:c=0,u=e.inlineLevel,s.label=19;case 19:return c<u.length?(p=u[c],[4,this.renderNode(p)]):[3,22];case 20:s.sent(),s.label=21;case 21:return c++,[3,19];case 22:d=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,s.label=23;case 23:return d<h.length?(p=h[d],[4,this.renderStack(p)]):[3,26];case 24:s.sent(),s.label=25;case 25:return d++,[3,23];case 26:f=0,m=e.positiveZIndex,s.label=27;case 27:return f<m.length?(p=m[f],[4,this.renderStack(p)]):[3,30];case 28:s.sent(),s.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=No(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),No(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var s=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,n),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),s},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,A,a;return s(this,function(o){switch(o.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var i,A,a,o,l,c,u,d,h,f,m,p,g,x,y,w,v,b,B,C,N,E,U,j,F,Q,k,I,S,T,_;return s(this,function(s){switch(s.label){case 0:if(0!==n.type)return[3,5];i=void 0,A=n.url,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.context.cache.match(A)];case 2:return i=s.sent(),[3,4];case 3:return s.sent(),r.context.logger.error("Error loading background-image "+A),[3,4];case 4:return i&&(a=el(e,t,[i.width,i.height,i.width/i.height]),w=a[0],E=a[1],U=a[2],B=a[3],C=a[4],x=r.ctx.createPattern(r.resizeImage(i,B,C),"repeat"),r.renderRepeat(w,x,E,U)),[3,6];case 5:Ir(n)?(o=el(e,t,[null,null,null]),w=o[0],E=o[1],U=o[2],B=o[3],C=o[4],l=xr(n.angle,B,C),c=l[0],u=l[1],d=l[2],h=l[3],f=l[4],(m=document.createElement("canvas")).width=B,m.height=C,p=m.getContext("2d"),g=p.createLinearGradient(u,h,d,f),pr(n.stops,c).forEach(function(e){return g.addColorStop(e.stop,sr(e.color))}),p.fillStyle=g,p.fillRect(0,0,B,C),B>0&&C>0&&(x=r.ctx.createPattern(m,"repeat"),r.renderRepeat(w,x,E,U))):Sr(n)&&(y=el(e,t,[null,null,null]),w=y[0],v=y[1],b=y[2],B=y[3],C=y[4],N=0===n.position.length?[Vn]:n.position,E=zn(N[0],B),U=zn(N[N.length-1],C),j=vr(n,E,U,B,C),F=j[0],Q=j[1],F>0&&Q>0&&(k=r.ctx.createRadialGradient(v+E,b+U,0,v+E,b+U,F),pr(n.stops,2*F).forEach(function(e){return k.addColorStop(e.stop,sr(e.color))}),r.path(w),r.ctx.fillStyle=k,F!==Q?(I=e.bounds.left+.5*e.bounds.width,S=e.bounds.top+.5*e.bounds.height,_=1/(T=Q/F),r.ctx.save(),r.ctx.translate(I,S),r.ctx.transform(1,0,0,T,0,0),r.ctx.translate(-I,-S),r.ctx.fillRect(v,_*(b-S)+S,B,C*_),r.ctx.restore()):r.ctx.fill())),s.label=6;case 6:return t--,[2]}})},r=this,i=0,A=e.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return i<A.length?(a=A[i],[5,n(a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){return this.path(Vo(n,t)),this.ctx.fillStyle=sr(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,i){return r(this,void 0,void 0,function(){var r,A;return s(this,function(s){switch(s.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,i)]:[3,2];case 1:return s.sent(),[2];case 2:return r=Go(i,n),this.path(r),this.ctx.fillStyle=sr(e),this.ctx.fill(),A=Wo(i,n),this.path(A),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,A,a,o,l,c=this;return s(this,function(s){switch(s.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],i=hl(sl(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=sr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:s.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){c.ctx.save();var n=jo(e.curves),r=t.inset?0:cl,s=Ho(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(c.path(n),c.ctx.clip(),c.mask(s)):(c.mask(n),c.ctx.clip(),c.path(s)),c.ctx.shadowOffsetX=t.offsetX.number+r,c.ctx.shadowOffsetY=t.offsetY.number,c.ctx.shadowColor=sr(t.color),c.ctx.shadowBlur=t.blur.number,c.ctx.fillStyle=t.inset?sr(t.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),s.label=2;case 2:A=0,a=0,o=r,s.label=3;case 3:return a<o.length?0!==(l=o[a]).style&&!rr(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,A,e.curves,2)]:[3,11]:[3,13];case 4:return s.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,A,e.curves,3)];case 6:return s.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,A,e.curves)];case 8:return s.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,A,e.curves)];case 10:s.sent(),s.label=11;case 11:A++,s.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,i,A){return r(this,void 0,void 0,function(){var r,a,o,l,c,u,d,h,f,m,p,g,x,y,w,v;return s(this,function(s){return this.ctx.save(),r=zo(i,n),a=Vo(i,n),2===A&&(this.path(a),this.ctx.clip()),No(a[0])?(o=a[0].start.x,l=a[0].start.y):(o=a[0].x,l=a[0].y),No(a[1])?(c=a[1].end.x,u=a[1].end.y):(c=a[1].x,u=a[1].y),d=0===n||2===n?Math.abs(o-c):Math.abs(l-u),this.ctx.beginPath(),3===A?this.formatPath(r):this.formatPath(a.slice(0,2)),h=t<3?3*t:2*t,f=t<3?2*t:t,3===A&&(h=t,f=t),m=!0,d<=2*h?m=!1:d<=2*h+f?(h*=p=d/(2*h+f),f*=p):(g=Math.floor((d+f)/(h+f)),x=(d-g*h)/(g-1),f=(y=(d-(g+1)*h)/g)<=0||Math.abs(f-x)<Math.abs(f-y)?x:y),m&&(3===A?this.ctx.setLineDash([0,h+f]):this.ctx.setLineDash([h,f])),3===A?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=sr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===A&&(No(a[0])&&(w=a[3],v=a[0],this.ctx.beginPath(),this.formatPath([new bo(w.end.x,w.end.y),new bo(v.start.x,v.start.y)]),this.ctx.stroke()),No(a[1])&&(w=a[1],v=a[2],this.ctx.beginPath(),this.formatPath([new bo(w.end.x,w.end.y),new bo(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Ko(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(ll),dl=function(e){return e instanceof $A||e instanceof ZA||e instanceof JA&&e.type!==qA&&e.type!==zA},hl=function(e,t){switch(e){case 0:return jo(t);case 2:return Fo(t);default:return Qo(t)}},fl=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},ml=["-apple-system","system-ui"],pl=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===ml.indexOf(e)}):e},gl=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t=bA(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,xl(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(ll),xl=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},yl=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,i([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),wl=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new yl({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new ho(this,t)}return e.instanceCount=1,e}(),vl=function(e,t){return void 0===t&&(t={}),bl(e,t)};"undefined"!==typeof window&&uo.setContext(window);var bl=function(e,t){return r(void 0,void 0,void 0,function(){var r,i,l,c,u,d,h,f,m,p,g,x,y,w,v,b,B,C,N,E,U,j,F,Q,k,I,S,T,_,D,L,H,R,P,M,O,K,V;return s(this,function(s){switch(s.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=r.defaultView))throw new Error("Document is not attached to a Window");return l={allowTaint:null!==(j=t.allowTaint)&&void 0!==j&&j,imageTimeout:null!==(F=t.imageTimeout)&&void 0!==F?F:15e3,proxy:t.proxy,useCORS:null!==(Q=t.useCORS)&&void 0!==Q&&Q},c=n({logging:null===(k=t.logging)||void 0===k||k,cache:t.cache},l),u={windowWidth:null!==(I=t.windowWidth)&&void 0!==I?I:i.innerWidth,windowHeight:null!==(S=t.windowHeight)&&void 0!==S?S:i.innerHeight,scrollX:null!==(T=t.scrollX)&&void 0!==T?T:i.pageXOffset,scrollY:null!==(_=t.scrollY)&&void 0!==_?_:i.pageYOffset},d=new A(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),h=new wl(c,d),f=null!==(D=t.foreignObjectRendering)&&void 0!==D&&D,m={allowTaint:null!==(L=t.allowTaint)&&void 0!==L&&L,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},h.logger.debug("Starting document clone with size "+d.width+"x"+d.height+" scrolled to "+-d.left+","+-d.top),p=new za(h,e,m),(g=p.clonedReferenceElement)?[4,p.toIFrame(r,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=s.sent(),y=pa(g)||fa(g)?o(g.ownerDocument):a(h,g),w=y.width,v=y.height,b=y.left,B=y.top,C=Bl(h,g,t.backgroundColor),N={canvas:t.canvas,backgroundColor:C,scale:null!==(R=null!==(H=t.scale)&&void 0!==H?H:i.devicePixelRatio)&&void 0!==R?R:1,x:(null!==(P=t.x)&&void 0!==P?P:0)+b,y:(null!==(M=t.y)&&void 0!==M?M:0)+B,width:null!==(O=t.width)&&void 0!==O?O:Math.ceil(w),height:null!==(K=t.height)&&void 0!==K?K:Math.ceil(v)},f?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gl(h,N).render(g)]):[3,3];case 2:return E=s.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+b+","+B+" with size "+w+"x"+v+" using computed rendering"),h.logger.debug("Starting DOM parsing"),U=sa(h,g),C===U.styles.backgroundColor&&(U.styles.backgroundColor=dr.TRANSPARENT),h.logger.debug("Starting renderer for element at "+N.x+","+N.y+" with size "+N.width+"x"+N.height),[4,new ul(h,N).render(U)];case 4:E=s.sent(),s.label=5;case 5:return(null===(V=t.removeContainer)||void 0===V||V)&&(za.destroy(x)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,E]}})})},Bl=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?ur(e,getComputedStyle(r.documentElement).backgroundColor):dr.TRANSPARENT,i=r.body?ur(e,getComputedStyle(r.body).backgroundColor):dr.TRANSPARENT,A="string"===typeof n?ur(e,n):null===n?dr.TRANSPARENT:4294967295;return t===r.documentElement?rr(s)?rr(i)?A:i:s:A};return vl}()},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A=new Set,a={};function o(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)A.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,r,s,i,A){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=A}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){p[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];p[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){p[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){p[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){p[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){p[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){p[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){p[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){p[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,r){var s=p.hasOwnProperty(t)?p[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(f,e)||!u.call(h,e)&&(d.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,x);p[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,x);p[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,x);p[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){p[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),p.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){p[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),b=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),U=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var S=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var D,L=Object.assign;function H(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var R=!1;function P(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var s=l.stack.split("\n"),i=r.stack.split("\n"),A=s.length-1,a=i.length-1;1<=A&&0<=a&&s[A]!==i[a];)a--;for(;1<=A&&0<=a;A--,a--)if(s[A]!==i[a]){if(1!==A||1!==a)do{if(A--,0>--a||s[A]!==i[a]){var o="\n"+s[A].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=A&&0<=a);break}}}finally{R=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function M(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=P(e.type,!1);case 11:return e=P(e.type.render,!1);case 1:return e=P(e.type,!0);default:return""}}function O(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case b:return"Portal";case N:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case Q:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case U:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,ue=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Be=null,Ce=null;function Ne(e){if(e=ys(e)){if("function"!==typeof be)throw Error(i(280));var t=e.stateNode;t&&(t=vs(t),be(e.stateNode,e.type,t))}}function Ee(e){Be?Ce?Ce.push(e):Ce=[e]:Be=e}function Ue(){if(Be){var e=Be,t=Ce;if(Ce=Be=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function je(e,t){return e(t)}function Fe(){}var Qe=!1;function ke(e,t,n){if(Qe)return e(t,n);Qe=!0;try{return je(e,t,n)}finally{Qe=!1,(null!==Be||null!==Ce)&&(Fe(),Ue())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=vs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Se=!1;if(c)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Se=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(ce){Se=!1}function _e(e,t,n,r,s,i,A,a,o){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Le=null,He=!1,Re=null,Pe={onError:function(e){De=!0,Le=e}};function Me(e,t,n,r,s,i,A,a,o){De=!1,Le=null,_e.apply(Pe,arguments)}function Oe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Oe(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Oe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var A=s.alternate;if(null===A){if(null!==(r=s.return)){n=r;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===n)return Ve(s),e;if(A===r)return Ve(s),t;A=A.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=A;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=A;break}if(o===r){a=!0,r=s,n=A;break}o=o.sibling}if(!a){for(o=A.child;o;){if(o===n){a=!0,n=A,r=s;break}if(o===r){a=!0,r=A,n=s;break}o=o.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var ze=s.unstable_scheduleCallback,qe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var At=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ot|0)|0},at=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,A=268435455&n;if(0!==A){var a=A&~s;0!==a?r=ut(a):0!==(i&=A)&&(r=ut(i))}else 0!==(A=n&~s)?r=ut(A):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-At(t)),r|=e[n],t&=~s;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-At(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-At(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var yt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,bt,Bt,Ct,Nt,Et=!1,Ut=[],jt=null,Ft=null,Qt=null,kt=new Map,It=new Map,St=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(e,t){switch(e){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=xs(e.target);if(null!==t){var n=Oe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ke(n)))return e.blockedOn=t,void Nt(e.priority,function(){Bt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ht(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ys(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Rt(e,t,n){Ht(e)&&n.delete(t)}function Pt(){Et=!1,null!==jt&&Ht(jt)&&(jt=null),null!==Ft&&Ht(Ft)&&(Ft=null),null!==Qt&&Ht(Qt)&&(Qt=null),kt.forEach(Rt),It.forEach(Rt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Pt)))}function Ot(e){function t(t){return Mt(t,e)}if(0<Ut.length){Mt(Ut[0],e);for(var n=1;n<Ut.length;n++){var r=Ut[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&Mt(jt,e),null!==Ft&&Mt(Ft,e),null!==Qt&&Mt(Qt,e),kt.forEach(t),It.forEach(t),n=0;n<St.length;n++)(r=St[n]).blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&null===(n=St[0]).blockedOn;)Lt(n),null===n.blockedOn&&St.shift()}var Kt=w.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var s=yt,i=Kt.transition;Kt.transition=null;try{yt=1,zt(e,t,n,r)}finally{yt=s,Kt.transition=i}}function Wt(e,t,n,r){var s=yt,i=Kt.transition;Kt.transition=null;try{yt=4,zt(e,t,n,r)}finally{yt=s,Kt.transition=i}}function zt(e,t,n,r){if(Vt){var s=Yt(e,t,n,r);if(null===s)Vr(e,t,r,qt,n),_t(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return jt=Dt(jt,e,t,n,r,s),!0;case"dragenter":return Ft=Dt(Ft,e,t,n,r,s),!0;case"mouseover":return Qt=Dt(Qt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return kt.set(i,Dt(kt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,It.set(i,Dt(It.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(_t(e,r),4&t&&-1<Tt.indexOf(e)){for(;null!==s;){var i=ys(s);if(null!==i&&vt(i),null===(i=Yt(e,t,n,r))&&Vr(e,t,r,qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var qt=null;function Yt(e,t,n,r){if(qt=null,null!==(e=xs(e=ve(r))))if(null===(t=Oe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var A=r-e;for(t=1;t<=A&&n[r-t]===s[i-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var A in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(A)&&(t=e[A],this[A]=t?t(s):s[A]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var An,an,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(ln),un=L({},ln,{view:0,detail:0}),dn=sn(un),hn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(An=e.screenX-on.screenX,an=e.screenY-on.screenY):an=An=0,on=e),An)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(hn),mn=sn(L({},hn,{dataTransfer:0})),pn=sn(L({},un,{relatedTarget:0})),gn=sn(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(xn),wn=sn(L({},ln,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Bn[e])&&!!t[e]}function Nn(){return Cn}var En=L({},un,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Un=sn(En),jn=sn(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fn=sn(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Qn=sn(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=sn(kn),Sn=[9,13,27,32],Tn=c&&"CompositionEvent"in window,_n=null;c&&"documentMode"in document&&(_n=document.documentMode);var Dn=c&&"TextEvent"in window&&!_n,Ln=c&&(!Tn||_n&&8<_n&&11>=_n),Hn=String.fromCharCode(32),Rn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,zn=null;function qn(e){Hr(e,0)}function Yn(e){if(z(ws(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Zn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),zn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(zn)){var t=[];Gn(t,zn,e,ve(e)),ke(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),zn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(zn)}function ir(e,t){if("click"===e)return Yn(t)}function Ar(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=cr(n,i);var A=cr(n,r);s&&A&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==A.node||e.focusOffset!==A.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(A.node,A.offset)):(t.setEnd(A.node,A.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,pr=null,gr=null,xr=null,yr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==pr||pr!==q(r)||("selectionStart"in(r=pr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&or(xr,r)||(xr=r,0<(r=Wr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Br={},Cr={};function Nr(e){if(Br[e])return Br[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Br[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=Nr("animationend"),Ur=Nr("animationiteration"),jr=Nr("animationstart"),Fr=Nr("transitionend"),Qr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Qr.set(e,t),o(t,[e])}for(var Sr=0;Sr<kr.length;Sr++){var Tr=kr[Sr];Ir(Tr.toLowerCase(),"on"+(Tr[0].toUpperCase()+Tr.slice(1)))}Ir(Er,"onAnimationEnd"),Ir(Ur,"onAnimationIteration"),Ir(jr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Fr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,A,a,o,l){if(Me.apply(this,arguments),De){if(!De)throw Error(i(198));var c=Le;De=!1,Le=null,He||(He=!0,Re=c)}}(r,t,void 0,e),e.currentTarget=null}function Hr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var A=r.length-1;0<=A;A--){var a=r[A],o=a.instance,l=a.currentTarget;if(a=a.listener,o!==i&&s.isPropagationStopped())break e;Lr(s,a,l),i=o}else for(A=0;A<r.length;A++){if(o=(a=r[A]).instance,l=a.currentTarget,a=a.listener,o!==i&&s.isPropagationStopped())break e;Lr(s,a,l),i=o}}}if(He)throw e=Re,He=!1,Re=null,e}function Rr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(Kr(t,e,2,!1),n.add(r))}function Pr(e,t,n){var r=0;t&&(r|=4),Kr(n,e,r,t)}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){if(!e[Mr]){e[Mr]=!0,A.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Pr(t,!1,e),Pr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Mr]||(t[Mr]=!0,Pr("selectionchange",!1,t))}}function Kr(e,t,n,r){switch(Xt(t)){case 1:var s=Gt;break;case 4:s=Wt;break;default:s=zt}n=s.bind(null,t,n,e),s=void 0,!Se||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var A=r.tag;if(3===A||4===A){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===A)for(A=r.return;null!==A;){var o=A.tag;if((3===o||4===o)&&((o=A.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;A=A.return}for(;null!==a;){if(null===(A=xs(a)))return;if(5===(o=A.tag)||6===o){r=i=A;continue e}a=a.parentNode}}r=r.return}ke(function(){var r=i,s=ve(n),A=[];e:{var a=Qr.get(e);if(void 0!==a){var o=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":o=Un;break;case"focusin":l="focus",o=pn;break;case"focusout":l="blur",o=pn;break;case"beforeblur":case"afterblur":o=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Fn;break;case Er:case Ur:case jr:o=gn;break;case Fr:o=Qn;break;case"scroll":o=dn;break;case"wheel":o=In;break;case"copy":case"cut":case"paste":o=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=jn}var c=0!==(4&t),u=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=Ie(f,d))&&c.push(Gr(f,m,h)))),u)break;f=f.return}0<c.length&&(a=new o(a,l,null,n,s),A.push({event:a,listeners:c}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!xs(l)&&!l[fs])&&(o||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,o?(o=r,null!==(l=(l=n.relatedTarget||n.toElement)?xs(l):null)&&(l!==(u=Oe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(o=null,l=r),o!==l)){if(c=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=jn,m="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==o?a:ws(o),h=null==l?a:ws(l),(a=new c(m,f+"leave",o,n,s)).target=u,a.relatedTarget=h,m=null,xs(s)===r&&((c=new c(d,f+"enter",l,n,s)).target=h,c.relatedTarget=u,m=c),u=m,o&&l)e:{for(d=l,f=0,h=c=o;h;h=zr(h))f++;for(h=0,m=d;m;m=zr(m))h++;for(;0<f-h;)c=zr(c),f--;for(;0<h-f;)d=zr(d),h--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=zr(c),d=zr(d)}c=null}else c=null;null!==o&&qr(A,a,o,c,!1),null!==l&&null!==u&&qr(A,u,l,c,!0)}if("select"===(o=(a=r?ws(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===o&&"file"===a.type)var p=Xn;else if(Vn(a))if(Jn)p=Ar;else{p=sr;var g=rr}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(p=ir);switch(p&&(p=p(e,r))?Gn(A,p,n,s):(g&&g(e,a,r),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&ee(a,"number",a.value)),g=r?ws(r):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(pr=g,gr=r,xr=null);break;case"focusout":xr=gr=pr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,wr(A,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(A,n,s)}var x;if(Tn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else On?Pn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(On||"onCompositionStart"!==y?"onCompositionEnd"===y&&On&&(x=en()):(Zt="value"in(Jt=s)?Jt.value:Jt.textContent,On=!0)),0<(g=Wr(r,y)).length&&(y=new wn(y,e,null,n,s),A.push({event:y,listeners:g}),x?y.data=x:null!==(x=Mn(n))&&(y.data=x))),(x=Dn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Rn=!0,Hn);case"textInput":return(e=t.data)===Hn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Tn&&Pn(e,t)?(e=en(),$t=Zt=Jt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),A.push({event:s,listeners:r}),s.data=x))}Hr(A,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ie(e,n))&&r.unshift(Gr(e,i,s)),null!=(i=Ie(e,t))&&r.push(Gr(e,i,s))),e=e.return}return r}function zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,s){for(var i=t._reactName,A=[];null!==n&&n!==r;){var a=n,o=a.alternate,l=a.stateNode;if(null!==o&&o===r)break;5===a.tag&&null!==l&&(a=l,s?null!=(o=Ie(n,i))&&A.unshift(Gr(n,o,a)):s||null!=(o=Ie(n,i))&&A.push(Gr(n,o,a))),n=n.return}0!==A.length&&e.push({event:t,listeners:A})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function $r(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,As="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout(function(){throw e})}function os(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Ot(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Ot(t)}function ls(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),ds="__reactFiber$"+us,hs="__reactProps$"+us,fs="__reactContainer$"+us,ms="__reactEvents$"+us,ps="__reactListeners$"+us,gs="__reactHandles$"+us;function xs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cs(e);null!==e;){if(n=e[ds])return n;e=cs(e)}return t}n=(e=n).parentNode}return null}function ys(e){return!(e=e[ds]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function vs(e){return e[hs]||null}var bs=[],Bs=-1;function Cs(e){return{current:e}}function Ns(e){0>Bs||(e.current=bs[Bs],bs[Bs]=null,Bs--)}function Es(e,t){Bs++,bs[Bs]=e.current,e.current=t}var Us={},js=Cs(Us),Fs=Cs(!1),Qs=Us;function ks(e,t){var n=e.type.contextTypes;if(!n)return Us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Is(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ss(){Ns(Fs),Ns(js)}function Ts(e,t,n){if(js.current!==Us)throw Error(i(168));Es(js,t),Es(Fs,n)}function _s(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,K(e)||"Unknown",s));return L({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,Qs=js.current,Es(js,e),Es(Fs,Fs.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=_s(e,t,Qs),r.__reactInternalMemoizedMergedChildContext=e,Ns(Fs),Ns(js),Es(js,e)):Ns(Fs),Es(Fs,n)}var Hs=null,Rs=!1,Ps=!1;function Ms(e){null===Hs?Hs=[e]:Hs.push(e)}function Os(){if(!Ps&&null!==Hs){Ps=!0;var e=0,t=yt;try{var n=Hs;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Hs=null,Rs=!1}catch(s){throw null!==Hs&&(Hs=Hs.slice(e+1)),ze($e,Os),s}finally{yt=t,Ps=!1}}return null}var Ks=[],Vs=0,Gs=null,Ws=0,zs=[],qs=0,Ys=null,Xs=1,Js="";function Zs(e,t){Ks[Vs++]=Ws,Ks[Vs++]=Gs,Gs=e,Ws=t}function $s(e,t,n){zs[qs++]=Xs,zs[qs++]=Js,zs[qs++]=Ys,Ys=e;var r=Xs;e=Js;var s=32-At(r)-1;r&=~(1<<s),n+=1;var i=32-At(t)+s;if(30<i){var A=s-s%5;i=(r&(1<<A)-1).toString(32),r>>=A,s-=A,Xs=1<<32-At(t)+s|n<<s|r,Js=i+e}else Xs=1<<i|n<<s|r,Js=e}function ei(e){null!==e.return&&(Zs(e,1),$s(e,1,0))}function ti(e){for(;e===Gs;)Gs=Ks[--Vs],Ks[Vs]=null,Ws=Ks[--Vs],Ks[Vs]=null;for(;e===Ys;)Ys=zs[--qs],zs[qs]=null,Js=zs[--qs],zs[qs]=null,Xs=zs[--qs],zs[qs]=null}var ni=null,ri=null,si=!1,ii=null;function Ai(e,t){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ls(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function oi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(si){var t=ri;if(t){var n=t;if(!ai(e,t)){if(oi(e))throw Error(i(418));t=ls(n.nextSibling);var r=ni;t&&ai(e,t)?Ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(oi(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!si)return ci(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(oi(e))throw di(),Error(i(418));for(;t;)Ai(e,t),t=ls(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ls(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ls(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=ls(e.nextSibling)}function hi(){ri=ni=null,si=!1}function fi(e){null===ii?ii=[e]:ii.push(e)}var mi=w.ReactCurrentBatchConfig;function pi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,A=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===A?t.ref:(t=function(e){var t=s.refs;null===e?delete t[A]:t[A]=e},t._stringRef=A,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function gi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Sl(e,t)).index=0,e.sibling=null,e}function A(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Ll(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===B?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===I&&xi(i)===t.type)?((r=s(t,n.props)).ref=pi(e,t,n),r.return=e,r):((r=Tl(n.type,n.key,n.props,null,e.mode,r)).ref=pi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hl(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=_l(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=Tl(t.type,t.key,t.props,null,e.mode,n)).ref=pi(e,null,t),n.return=e,n;case b:return(t=Hl(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||_(t))return(t=_l(t,e.mode,n,null)).return=e,t;gi(e,t)}return null}function h(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:o(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===s?l(e,t,n,r):null;case b:return n.key===s?c(e,t,n,r):null;case I:return h(e,t,(s=n._init)(n._payload),r)}if(te(n)||_(n))return null!==s?null:u(e,t,n,r,null);gi(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return o(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case v:return l(t,e=e.get(null===r.key?n:r.key)||null,r,s);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case I:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||_(r))return u(t,e=e.get(n)||null,r,s,null);gi(t,r)}return null}function m(s,i,a,o){for(var l=null,c=null,u=i,m=i=0,p=null;null!==u&&m<a.length;m++){u.index>m?(p=u,u=null):p=u.sibling;var g=h(s,u,a[m],o);if(null===g){null===u&&(u=p);break}e&&u&&null===g.alternate&&t(s,u),i=A(g,i,m),null===c?l=g:c.sibling=g,c=g,u=p}if(m===a.length)return n(s,u),si&&Zs(s,m),l;if(null===u){for(;m<a.length;m++)null!==(u=d(s,a[m],o))&&(i=A(u,i,m),null===c?l=u:c.sibling=u,c=u);return si&&Zs(s,m),l}for(u=r(s,u);m<a.length;m++)null!==(p=f(u,s,m,a[m],o))&&(e&&null!==p.alternate&&u.delete(null===p.key?m:p.key),i=A(p,i,m),null===c?l=p:c.sibling=p,c=p);return e&&u.forEach(function(e){return t(s,e)}),si&&Zs(s,m),l}function p(s,a,o,l){var c=_(o);if("function"!==typeof c)throw Error(i(150));if(null==(o=c.call(o)))throw Error(i(151));for(var u=c=null,m=a,p=a=0,g=null,x=o.next();null!==m&&!x.done;p++,x=o.next()){m.index>p?(g=m,m=null):g=m.sibling;var y=h(s,m,x.value,l);if(null===y){null===m&&(m=g);break}e&&m&&null===y.alternate&&t(s,m),a=A(y,a,p),null===u?c=y:u.sibling=y,u=y,m=g}if(x.done)return n(s,m),si&&Zs(s,p),c;if(null===m){for(;!x.done;p++,x=o.next())null!==(x=d(s,x.value,l))&&(a=A(x,a,p),null===u?c=x:u.sibling=x,u=x);return si&&Zs(s,p),c}for(m=r(s,m);!x.done;p++,x=o.next())null!==(x=f(m,s,p,x.value,l))&&(e&&null!==x.alternate&&m.delete(null===x.key?p:x.key),a=A(x,a,p),null===u?c=x:u.sibling=x,u=x);return e&&m.forEach(function(e){return t(s,e)}),si&&Zs(s,p),c}return function e(r,i,A,o){if("object"===typeof A&&null!==A&&A.type===B&&null===A.key&&(A=A.props.children),"object"===typeof A&&null!==A){switch(A.$$typeof){case v:e:{for(var l=A.key,c=i;null!==c;){if(c.key===l){if((l=A.type)===B){if(7===c.tag){n(r,c.sibling),(i=s(c,A.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===I&&xi(l)===c.type){n(r,c.sibling),(i=s(c,A.props)).ref=pi(r,c,A),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}A.type===B?((i=_l(A.props.children,r.mode,o,A.key)).return=r,r=i):((o=Tl(A.type,A.key,A.props,null,r.mode,o)).ref=pi(r,i,A),o.return=r,r=o)}return a(r);case b:e:{for(c=A.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===A.containerInfo&&i.stateNode.implementation===A.implementation){n(r,i.sibling),(i=s(i,A.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Hl(A,r.mode,o)).return=r,r=i}return a(r);case I:return e(r,i,(c=A._init)(A._payload),o)}if(te(A))return m(r,i,A,o);if(_(A))return p(r,i,A,o);gi(r,A)}return"string"===typeof A&&""!==A||"number"===typeof A?(A=""+A,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,A)).return=r,r=i):(n(r,i),(i=Ll(A,r.mode,o)).return=r,r=i),a(r)):n(r,i)}}var wi=yi(!0),vi=yi(!1),bi=Cs(null),Bi=null,Ci=null,Ni=null;function Ei(){Ni=Ci=Bi=null}function Ui(e){var t=bi.current;Ns(bi),e._currentValue=t}function ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t){Bi=e,Ni=Ci=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Qi(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===Ci){if(null===Bi)throw Error(i(308));Ci=e,Bi.dependencies={lanes:0,firstContext:e}}else Ci=Ci.next=e;return t}var ki=null;function Ii(e){null===ki?ki=[e]:ki.push(e)}function Si(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ii(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ti(e,r)}function Ti(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _i=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jo)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ti(e,n)}return null===(s=r.interleaved)?(t.next=t,Ii(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ti(e,n)}function Pi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Mi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var A={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=A:i=i.next=A,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Oi(e,t,n,r){var s=e.updateQueue;_i=!1;var i=s.firstBaseUpdate,A=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var o=a,l=o.next;o.next=null,null===A?i=l:A.next=l,A=o;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==A&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=o))}if(null!==i){var u=s.baseState;for(A=0,c=l=o=null,a=i;;){var d=a.lane,h=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(h,u,d);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(h,u,d):f)||void 0===d)break e;u=L({},u,d);break e;case 2:_i=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=h,o=u):c=c.next=h,A|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===c&&(o=u),s.baseState=o,s.firstBaseUpdate=l,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{A|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Do|=A,e.lanes=A,e.memoizedState=u}}function Ki(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Vi={},Gi=Cs(Vi),Wi=Cs(Vi),zi=Cs(Vi);function qi(e){if(e===Vi)throw Error(i(174));return e}function Yi(e,t){switch(Es(zi,t),Es(Wi,e),Es(Gi,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ns(Gi),Es(Gi,t)}function Xi(){Ns(Gi),Ns(Wi),Ns(zi)}function Ji(e){qi(zi.current);var t=qi(Gi.current),n=oe(t,e.type);t!==n&&(Es(Wi,e),Es(Gi,n))}function Zi(e){Wi.current===e&&(Ns(Gi),Ns(Wi))}var $i=Cs(0);function eA(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tA=[];function nA(){for(var e=0;e<tA.length;e++)tA[e]._workInProgressVersionPrimary=null;tA.length=0}var rA=w.ReactCurrentDispatcher,sA=w.ReactCurrentBatchConfig,iA=0,AA=null,aA=null,oA=null,lA=!1,cA=!1,uA=0,dA=0;function hA(){throw Error(i(321))}function fA(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mA(e,t,n,r,s,A){if(iA=A,AA=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rA.current=null===e||null===e.memoizedState?ZA:$A,e=n(r,s),cA){A=0;do{if(cA=!1,uA=0,25<=A)throw Error(i(301));A+=1,oA=aA=null,t.updateQueue=null,rA.current=ea,e=n(r,s)}while(cA)}if(rA.current=JA,t=null!==aA&&null!==aA.next,iA=0,oA=aA=AA=null,lA=!1,t)throw Error(i(300));return e}function pA(){var e=0!==uA;return uA=0,e}function gA(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oA?AA.memoizedState=oA=e:oA=oA.next=e,oA}function xA(){if(null===aA){var e=AA.alternate;e=null!==e?e.memoizedState:null}else e=aA.next;var t=null===oA?AA.memoizedState:oA.next;if(null!==t)oA=t,aA=e;else{if(null===e)throw Error(i(310));e={memoizedState:(aA=e).memoizedState,baseState:aA.baseState,baseQueue:aA.baseQueue,queue:aA.queue,next:null},null===oA?AA.memoizedState=oA=e:oA=oA.next=e}return oA}function yA(e,t){return"function"===typeof t?t(e):t}function wA(e){var t=xA(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=aA,s=r.baseQueue,A=n.pending;if(null!==A){if(null!==s){var a=s.next;s.next=A.next,A.next=a}r.baseQueue=s=A,n.pending=null}if(null!==s){A=s.next,r=r.baseState;var o=a=null,l=null,c=A;do{var u=c.lane;if((iA&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,AA.lanes|=u,Do|=u}c=c.next}while(null!==c&&c!==A);null===l?a=r:l.next=o,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{A=s.lane,AA.lanes|=A,Do|=A,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vA(e){var t=xA(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,A=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{A=e(A,a.action),a=a.next}while(a!==s);ar(A,t.memoizedState)||(xa=!0),t.memoizedState=A,null===t.baseQueue&&(t.baseState=A),n.lastRenderedState=A}return[A,r]}function bA(){}function BA(e,t){var n=AA,r=xA(),s=t(),A=!ar(r.memoizedState,s);if(A&&(r.memoizedState=s,xa=!0),r=r.queue,_A(EA.bind(null,n,r,e),[e]),r.getSnapshot!==t||A||null!==oA&&1&oA.memoizedState.tag){if(n.flags|=2048,QA(9,NA.bind(null,n,r,s,t),void 0,null),null===Fo)throw Error(i(349));0!==(30&iA)||CA(n,t,s)}return s}function CA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=AA.updateQueue)?(t={lastEffect:null,stores:null},AA.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function NA(e,t,n,r){t.value=n,t.getSnapshot=r,UA(t)&&jA(e)}function EA(e,t,n){return n(function(){UA(t)&&jA(e)})}function UA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function jA(e){var t=Ti(e,1);null!==t&&nl(t,e,1,-1)}function FA(e){var t=gA();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yA,lastRenderedState:e},t.queue=e,e=e.dispatch=zA.bind(null,AA,e),[t.memoizedState,e]}function QA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=AA.updateQueue)?(t={lastEffect:null,stores:null},AA.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function kA(){return xA().memoizedState}function IA(e,t,n,r){var s=gA();AA.flags|=e,s.memoizedState=QA(1|t,n,void 0,void 0===r?null:r)}function SA(e,t,n,r){var s=xA();r=void 0===r?null:r;var i=void 0;if(null!==aA){var A=aA.memoizedState;if(i=A.destroy,null!==r&&fA(r,A.deps))return void(s.memoizedState=QA(t,n,i,r))}AA.flags|=e,s.memoizedState=QA(1|t,n,i,r)}function TA(e,t){return IA(8390656,8,e,t)}function _A(e,t){return SA(2048,8,e,t)}function DA(e,t){return SA(4,2,e,t)}function LA(e,t){return SA(4,4,e,t)}function HA(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function RA(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,SA(4,4,HA.bind(null,t,e),n)}function PA(){}function MA(e,t){var n=xA();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fA(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function OA(e,t){var n=xA();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fA(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function KA(e,t,n){return 0===(21&iA)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),AA.lanes|=n,Do|=n,e.baseState=!0),t)}function VA(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=sA.transition;sA.transition={};try{e(!1),t()}finally{yt=n,sA.transition=r}}function GA(){return xA().memoizedState}function WA(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qA(e))YA(t,n);else if(null!==(n=Si(e,t,n,r))){nl(n,e,r,el()),XA(n,t,r)}}function zA(e,t,n){var r=tl(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qA(e))YA(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var A=t.lastRenderedState,a=i(A,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,A)){var o=t.interleaved;return null===o?(s.next=s,Ii(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch(l){}null!==(n=Si(e,t,s,r))&&(nl(n,e,r,s=el()),XA(n,t,r))}}function qA(e){var t=e.alternate;return e===AA||null!==t&&t===AA}function YA(e,t){cA=lA=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function XA(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var JA={readContext:Qi,useCallback:hA,useContext:hA,useEffect:hA,useImperativeHandle:hA,useInsertionEffect:hA,useLayoutEffect:hA,useMemo:hA,useReducer:hA,useRef:hA,useState:hA,useDebugValue:hA,useDeferredValue:hA,useTransition:hA,useMutableSource:hA,useSyncExternalStore:hA,useId:hA,unstable_isNewReconciler:!1},ZA={readContext:Qi,useCallback:function(e,t){return gA().memoizedState=[e,void 0===t?null:t],e},useContext:Qi,useEffect:TA,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,IA(4194308,4,HA.bind(null,t,e),n)},useLayoutEffect:function(e,t){return IA(4194308,4,e,t)},useInsertionEffect:function(e,t){return IA(4,2,e,t)},useMemo:function(e,t){var n=gA();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gA();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WA.bind(null,AA,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gA().memoizedState=e},useState:FA,useDebugValue:PA,useDeferredValue:function(e){return gA().memoizedState=e},useTransition:function(){var e=FA(!1),t=e[0];return e=VA.bind(null,e[1]),gA().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=AA,s=gA();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Fo)throw Error(i(349));0!==(30&iA)||CA(r,t,n)}s.memoizedState=n;var A={value:n,getSnapshot:t};return s.queue=A,TA(EA.bind(null,r,A,e),[e]),r.flags|=2048,QA(9,NA.bind(null,r,A,n,t),void 0,null),n},useId:function(){var e=gA(),t=Fo.identifierPrefix;if(si){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-At(Xs)-1)).toString(32)+n),0<(n=uA++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=dA++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$A={readContext:Qi,useCallback:MA,useContext:Qi,useEffect:_A,useImperativeHandle:RA,useInsertionEffect:DA,useLayoutEffect:LA,useMemo:OA,useReducer:wA,useRef:kA,useState:function(){return wA(yA)},useDebugValue:PA,useDeferredValue:function(e){return KA(xA(),aA.memoizedState,e)},useTransition:function(){return[wA(yA)[0],xA().memoizedState]},useMutableSource:bA,useSyncExternalStore:BA,useId:GA,unstable_isNewReconciler:!1},ea={readContext:Qi,useCallback:MA,useContext:Qi,useEffect:_A,useImperativeHandle:RA,useInsertionEffect:DA,useLayoutEffect:LA,useMemo:OA,useReducer:vA,useRef:kA,useState:function(){return vA(yA)},useDebugValue:PA,useDeferredValue:function(e){var t=xA();return null===aA?t.memoizedState=e:KA(t,aA.memoizedState,e)},useTransition:function(){return[vA(yA)[0],xA().memoizedState]},useMutableSource:bA,useSyncExternalStore:BA,useId:GA,unstable_isNewReconciler:!1};function ta(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function na(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&Oe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),s=tl(e),i=Hi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,s))&&(nl(t,e,s,r),Pi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),s=tl(e),i=Hi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,s))&&(nl(t,e,s,r),Pi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),s=Hi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ri(e,s,r))&&(nl(t,e,r,n),Pi(t,e,r))}};function sa(e,t,n,r,s,i,A){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,A):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(s,i))}function ia(e,t,n){var r=!1,s=Us,i=t.contextType;return"object"===typeof i&&null!==i?i=Qi(i):(s=Is(t)?Qs:js.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ks(e,s):Us),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function aa(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Qi(i):(i=Is(t)?Qs:js.current,s.context=ks(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(na(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ra.enqueueReplaceState(s,s.state,null),Oi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function oa(e,t){try{var n="",r=t;do{n+=M(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function la(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ca(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ua="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=Hi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vo||(Vo=!0,Go=r),ca(0,t)},n}function ha(e,t,n){(n=Hi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ca(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ca(0,t),"function"!==typeof r&&(null===Wo?Wo=new Set([this]):Wo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ua;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Nl.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function pa(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Hi(-1,1)).tag=2,Ri(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var ga=w.ReactCurrentOwner,xa=!1;function ya(e,t,n,r){t.child=null===e?vi(t,null,n,r):wi(t,e.child,n,r)}function wa(e,t,n,r,s){n=n.render;var i=t.ref;return Fi(t,s),r=mA(e,t,n,r,i,s),n=pA(),null===e||xa?(si&&n&&ei(t),t.flags|=1,ya(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ka(e,t,s))}function va(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Il(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tl(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ba(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var A=i.memoizedProps;if((n=null!==(n=n.compare)?n:or)(A,r)&&e.ref===t.ref)return Ka(e,t,s)}return t.flags|=1,(e=Sl(i,r)).ref=t.ref,e.return=t,t.child=e}function ba(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(or(i,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ka(e,t,s);0!==(131072&e.flags)&&(xa=!0)}}return Na(e,t,n,r,s)}function Ba(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(So,Io),Io|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(So,Io),Io|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Es(So,Io),Io|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Es(So,Io),Io|=r;return ya(e,t,s,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,s){var i=Is(n)?Qs:js.current;return i=ks(t,i),Fi(t,s),n=mA(e,t,n,r,i,s),r=pA(),null===e||xa?(si&&r&&ei(t),t.flags|=1,ya(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ka(e,t,s))}function Ea(e,t,n,r,s){if(Is(n)){var i=!0;Ds(t)}else i=!1;if(Fi(t,s),null===t.stateNode)Oa(e,t),ia(t,n,r),aa(t,n,r,s),r=!0;else if(null===e){var A=t.stateNode,a=t.memoizedProps;A.props=a;var o=A.context,l=n.contextType;"object"===typeof l&&null!==l?l=Qi(l):l=ks(t,l=Is(n)?Qs:js.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof A.getSnapshotBeforeUpdate;u||"function"!==typeof A.UNSAFE_componentWillReceiveProps&&"function"!==typeof A.componentWillReceiveProps||(a!==r||o!==l)&&Aa(t,A,r,l),_i=!1;var d=t.memoizedState;A.state=d,Oi(t,r,A,s),o=t.memoizedState,a!==r||d!==o||Fs.current||_i?("function"===typeof c&&(na(t,n,c,r),o=t.memoizedState),(a=_i||sa(t,n,a,r,d,o,l))?(u||"function"!==typeof A.UNSAFE_componentWillMount&&"function"!==typeof A.componentWillMount||("function"===typeof A.componentWillMount&&A.componentWillMount(),"function"===typeof A.UNSAFE_componentWillMount&&A.UNSAFE_componentWillMount()),"function"===typeof A.componentDidMount&&(t.flags|=4194308)):("function"===typeof A.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),A.props=r,A.state=o,A.context=l,r=a):("function"===typeof A.componentDidMount&&(t.flags|=4194308),r=!1)}else{A=t.stateNode,Li(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:ta(t.type,a),A.props=l,u=t.pendingProps,d=A.context,"object"===typeof(o=n.contextType)&&null!==o?o=Qi(o):o=ks(t,o=Is(n)?Qs:js.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof A.getSnapshotBeforeUpdate)||"function"!==typeof A.UNSAFE_componentWillReceiveProps&&"function"!==typeof A.componentWillReceiveProps||(a!==u||d!==o)&&Aa(t,A,r,o),_i=!1,d=t.memoizedState,A.state=d,Oi(t,r,A,s);var f=t.memoizedState;a!==u||d!==f||Fs.current||_i?("function"===typeof h&&(na(t,n,h,r),f=t.memoizedState),(l=_i||sa(t,n,l,r,d,f,o)||!1)?(c||"function"!==typeof A.UNSAFE_componentWillUpdate&&"function"!==typeof A.componentWillUpdate||("function"===typeof A.componentWillUpdate&&A.componentWillUpdate(r,f,o),"function"===typeof A.UNSAFE_componentWillUpdate&&A.UNSAFE_componentWillUpdate(r,f,o)),"function"===typeof A.componentDidUpdate&&(t.flags|=4),"function"===typeof A.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof A.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof A.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),A.props=r,A.state=f,A.context=o,r=l):("function"!==typeof A.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof A.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ua(e,t,n,r,i,s)}function Ua(e,t,n,r,s,i){Ca(e,t);var A=0!==(128&t.flags);if(!r&&!A)return s&&Ls(t,n,!1),Ka(e,t,i);r=t.stateNode,ga.current=t;var a=A&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&A?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,a,i)):ya(e,t,a,i),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function ja(e){var t=e.stateNode;t.pendingContext?Ts(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ts(0,t.context,!1),Yi(e,t.containerInfo)}function Fa(e,t,n,r,s){return hi(),fi(s),t.flags|=256,ya(e,t,n,r),t.child}var Qa,ka,Ia,Sa,Ta={dehydrated:null,treeContext:null,retryLane:0};function _a(e){return{baseLanes:e,cachePool:null,transitions:null}}function Da(e,t,n){var r,s=t.pendingProps,A=$i.current,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&A)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(A|=1),Es($i,1&A),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Dl(o,s,0,null),e=_l(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=_a(n),t.memoizedState=Ta,e):La(t,o));if(null!==(A=e.memoizedState)&&null!==(r=A.dehydrated))return function(e,t,n,r,s,A,a){if(n)return 256&t.flags?(t.flags&=-257,Ha(e,t,a,r=la(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(A=r.fallback,s=t.mode,r=Dl({mode:"visible",children:r.children},s,0,null),(A=_l(A,s,a,null)).flags|=2,r.return=t,A.return=t,r.sibling=A,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,a),t.child.memoizedState=_a(a),t.memoizedState=Ta,A);if(0===(1&t.mode))return Ha(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var o=r.dgst;return r=o,Ha(e,t,a,r=la(A=Error(i(419)),r,void 0))}if(o=0!==(a&e.childLanes),xa||o){if(null!==(r=Fo)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==A.retryLane&&(A.retryLane=s,Ti(e,s),nl(r,e,s,-1))}return ml(),Ha(e,t,a,r=la(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ul.bind(null,e),s._reactRetry=t,null):(e=A.treeContext,ri=ls(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(zs[qs++]=Xs,zs[qs++]=Js,zs[qs++]=Ys,Xs=e.id,Js=e.overflow,Ys=t),t=La(t,r.children),t.flags|=4096,t)}(e,t,o,s,r,A,n);if(a){a=s.fallback,o=t.mode,r=(A=e.child).sibling;var l={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==A?((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null):(s=Sl(A,l)).subtreeFlags=14680064&A.subtreeFlags,null!==r?a=Sl(r,a):(a=_l(a,o,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=null===(o=e.child.memoizedState)?_a(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Ta,s}return e=(a=e.child).sibling,s=Sl(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function La(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ha(e,t,n,r){return null!==r&&fi(r),wi(t,e.child,null,n),(e=La(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ra(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ji(e.return,t,n)}function Pa(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ma(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ya(e,t,r.children,n),0!==(2&(r=$i.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ra(e,n,t);else if(19===e.tag)Ra(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Es($i,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===eA(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Pa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eA(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Pa(t,!0,n,null,i);break;case"together":Pa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Do|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Sl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Va(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Is(t.type)&&Ss(),Ga(t),null;case 3:return r=t.stateNode,Xi(),Ns(Fs),Ns(js),nA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(Al(ii),ii=null))),ka(e,t),Ga(t),null;case 5:Zi(t);var s=qi(zi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ia(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ga(t),null}if(e=qi(Gi.current),ui(t)){r=t.stateNode,n=t.type;var A=t.memoizedProps;switch(r[ds]=t,r[hs]=A,e=0!==(1&t.mode),n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(s=0;s<_r.length;s++)Rr(_r[s],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":X(r,A),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!A.multiple},Rr("invalid",r);break;case"textarea":se(r,A),Rr("invalid",r)}for(var o in xe(n,A),s=null,A)if(A.hasOwnProperty(o)){var l=A[o];"children"===o?"string"===typeof l?r.textContent!==l&&(!0!==A.suppressHydrationWarning&&Zr(r.textContent,l,e),s=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==A.suppressHydrationWarning&&Zr(r.textContent,l,e),s=["children",""+l]):a.hasOwnProperty(o)&&null!=l&&"onScroll"===o&&Rr("scroll",r)}switch(n){case"input":W(r),$(r,A,!0);break;case"textarea":W(r),Ae(r);break;case"select":case"option":break;default:"function"===typeof A.onClick&&(r.onclick=$r)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ds]=t,e[hs]=r,Qa(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),s=r;break;case"iframe":case"object":case"embed":Rr("load",e),s=r;break;case"video":case"audio":for(s=0;s<_r.length;s++)Rr(_r[s],e);s=r;break;case"source":Rr("error",e),s=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),s=r;break;case"details":Rr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),Rr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=L({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Rr("invalid",e)}for(A in xe(n,s),l=s)if(l.hasOwnProperty(A)){var c=l[A];"style"===A?pe(e,c):"dangerouslySetInnerHTML"===A?null!=(c=c?c.__html:void 0)&&ue(e,c):"children"===A?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==A&&"suppressHydrationWarning"!==A&&"autoFocus"!==A&&(a.hasOwnProperty(A)?null!=c&&"onScroll"===A&&Rr("scroll",e):null!=c&&y(e,A,c,o))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),Ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(A=r.value)?ne(e,!!r.multiple,A,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Sa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=qi(zi.current),qi(Gi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(A=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}A&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ns($i),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),hi(),t.flags|=98560,A=!1;else if(A=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!A)throw Error(i(318));if(!(A=null!==(A=t.memoizedState)?A.dehydrated:null))throw Error(i(317));A[ds]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),A=!1}else null!==ii&&(Al(ii),ii=null),A=!0;if(!A)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$i.current)?0===To&&(To=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Xi(),ka(e,t),null===e&&Or(t.stateNode.containerInfo),Ga(t),null;case 10:return Ui(t.type._context),Ga(t),null;case 19:if(Ns($i),null===(A=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(o=A.rendering))if(r)Va(A,!1);else{if(0!==To||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=eA(e))){for(t.flags|=128,Va(A,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(A=n).flags&=14680066,null===(o=A.alternate)?(A.childLanes=0,A.lanes=e,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=o.childLanes,A.lanes=o.lanes,A.child=o.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=o.memoizedProps,A.memoizedState=o.memoizedState,A.updateQueue=o.updateQueue,A.type=o.type,e=o.dependencies,A.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es($i,1&$i.current|2),t.child}e=e.sibling}null!==A.tail&&Je()>Oo&&(t.flags|=128,r=!0,Va(A,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eA(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Va(A,!0),null===A.tail&&"hidden"===A.tailMode&&!o.alternate&&!si)return Ga(t),null}else 2*Je()-A.renderingStartTime>Oo&&1073741824!==n&&(t.flags|=128,r=!0,Va(A,!1),t.lanes=4194304);A.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=A.last)?n.sibling=o:t.child=o,A.last=o)}return null!==A.tail?(t=A.tail,A.rendering=t,A.tail=t.sibling,A.renderingStartTime=Je(),t.sibling=null,n=$i.current,Es($i,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return ul(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Io)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function za(e,t){switch(ti(t),t.tag){case 1:return Is(t.type)&&Ss(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),Ns(Fs),Ns(js),nA(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Ns($i),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ns($i),null;case 4:return Xi(),null;case 10:return Ui(t.type._context),null;case 22:case 23:return ul(),null;default:return null}}Qa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ka=function(){},Ia=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qi(Gi.current);var i,A=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),A=[];break;case"select":s=L({},s,{value:void 0}),r=L({},r,{value:void 0}),A=[];break;case"textarea":s=re(e,s),r=re(e,r),A=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in xe(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(i in o)!o.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&o[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(A||(A=[]),A.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(A=A||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(A=A||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Rr("scroll",e),A||o===l||(A=[])):(A=A||[]).push(c,l))}n&&(A=A||[]).push("style",n);var c=A;(t.updateQueue=c)&&(t.flags|=4)}},Sa=function(e,t,n,r){n!==r&&(t.flags|=4)};var qa=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cl(e,t,r)}else n.current=null}function $a(e,t,n){try{n()}catch(r){Cl(e,t,r)}}var eo=!1;function to(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&$a(t,n,i)}s=s.next}while(s!==r)}}function no(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ro(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function so(e){var t=e.alternate;null!==t&&(e.alternate=null,so(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[hs],delete t[ms],delete t[ps],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function io(e){return 5===e.tag||3===e.tag||4===e.tag}function Ao(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||io(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ao(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ao(e,t,n),e=e.sibling;null!==e;)ao(e,t,n),e=e.sibling}function oo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(oo(e,t,n),e=e.sibling;null!==e;)oo(e,t,n),e=e.sibling}var lo=null,co=!1;function uo(e,t,n){for(n=n.child;null!==n;)ho(e,t,n),n=n.sibling}function ho(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=lo,s=co;lo=null,uo(e,t,n),co=s,null!==(lo=r)&&(co?(e=lo,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lo.removeChild(n.stateNode));break;case 18:null!==lo&&(co?(e=lo,n=n.stateNode,8===e.nodeType?os(e.parentNode,n):1===e.nodeType&&os(e,n),Ot(e)):os(lo,n.stateNode));break;case 4:r=lo,s=co,lo=n.stateNode.containerInfo,co=!0,uo(e,t,n),lo=r,co=s;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,A=i.destroy;i=i.tag,void 0!==A&&(0!==(2&i)||0!==(4&i))&&$a(n,t,A),s=s.next}while(s!==r)}uo(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cl(n,t,a)}uo(e,t,n);break;case 21:uo(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,uo(e,t,n),Ya=r):uo(e,t,n);break;default:uo(e,t,n)}}function fo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var r=jl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function mo(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var A=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:lo=o.stateNode,co=!1;break e;case 3:case 4:lo=o.stateNode.containerInfo,co=!0;break e}o=o.return}if(null===lo)throw Error(i(160));ho(A,a,s),lo=null,co=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(c){Cl(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)po(t,e),t=t.sibling}function po(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mo(t,e),go(e),4&r){try{to(3,e,e.return),no(3,e)}catch(p){Cl(e,e.return,p)}try{to(5,e,e.return)}catch(p){Cl(e,e.return,p)}}break;case 1:mo(t,e),go(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(mo(t,e),go(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(p){Cl(e,e.return,p)}}if(4&r&&null!=(s=e.stateNode)){var A=e.memoizedProps,a=null!==n?n.memoizedProps:A,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===A.type&&null!=A.name&&J(s,A),ye(o,a);var c=ye(o,A);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?pe(s,d):"dangerouslySetInnerHTML"===u?ue(s,d):"children"===u?de(s,d):y(s,u,d,c)}switch(o){case"input":Z(s,A);break;case"textarea":ie(s,A);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var f=A.value;null!=f?ne(s,!!A.multiple,f,!1):h!==!!A.multiple&&(null!=A.defaultValue?ne(s,!!A.multiple,A.defaultValue,!0):ne(s,!!A.multiple,A.multiple?[]:"",!1))}s[hs]=A}catch(p){Cl(e,e.return,p)}}break;case 6:if(mo(t,e),go(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,A=e.memoizedProps;try{s.nodeValue=A}catch(p){Cl(e,e.return,p)}}break;case 3:if(mo(t,e),go(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ot(t.containerInfo)}catch(p){Cl(e,e.return,p)}break;case 4:default:mo(t,e),go(e);break;case 13:mo(t,e),go(e),8192&(s=e.child).flags&&(A=null!==s.memoizedState,s.stateNode.isHidden=A,!A||null!==s.alternate&&null!==s.alternate.memoizedState||(Mo=Je())),4&r&&fo(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||u,mo(t,e),Ya=c):mo(t,e),go(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Ja=e,u=e.child;null!==u;){for(d=Ja=u;null!==Ja;){switch(f=(h=Ja).child,h.tag){case 0:case 11:case 14:case 15:to(4,h,h.return);break;case 1:Za(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){Cl(r,n,p)}}break;case 5:Za(h,h.return);break;case 22:if(null!==h.memoizedState){vo(d);continue}}null!==f?(f.return=h,Ja=f):vo(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{s=d.stateNode,c?"function"===typeof(A=s.style).setProperty?A.setProperty("display","none","important"):A.display="none":(o=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,o.style.display=me("display",a))}catch(p){Cl(e,e.return,p)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){Cl(e,e.return,p)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mo(t,e),go(e),4&r&&fo(e);case 21:}}function go(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(io(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),oo(e,Ao(e),s);break;case 3:case 4:var A=r.stateNode.containerInfo;ao(e,Ao(e),A);break;default:throw Error(i(161))}}catch(a){Cl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xo(e,t,n){Ja=e,yo(e,t,n)}function yo(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var s=Ja,i=s.child;if(22===s.tag&&r){var A=null!==s.memoizedState||qa;if(!A){var a=s.alternate,o=null!==a&&null!==a.memoizedState||Ya;a=qa;var l=Ya;if(qa=A,(Ya=o)&&!l)for(Ja=s;null!==Ja;)o=(A=Ja).child,22===A.tag&&null!==A.memoizedState?bo(s):null!==o?(o.return=A,Ja=o):bo(s);for(;null!==i;)Ja=i,yo(i,t,n),i=i.sibling;Ja=s,qa=a,Ya=l}wo(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Ja=i):wo(e)}}function wo(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||no(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ta(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var A=t.updateQueue;null!==A&&Ki(t,A,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ki(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ot(d)}}}break;default:throw Error(i(163))}Ya||512&t.flags&&ro(t)}catch(h){Cl(t,t.return,h)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function vo(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function bo(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{no(4,t)}catch(o){Cl(t,n,o)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(o){Cl(t,s,o)}}var i=t.return;try{ro(t)}catch(o){Cl(t,i,o)}break;case 5:var A=t.return;try{ro(t)}catch(o){Cl(t,A,o)}}}catch(o){Cl(t,t.return,o)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Bo,Co=Math.ceil,No=w.ReactCurrentDispatcher,Eo=w.ReactCurrentOwner,Uo=w.ReactCurrentBatchConfig,jo=0,Fo=null,Qo=null,ko=0,Io=0,So=Cs(0),To=0,_o=null,Do=0,Lo=0,Ho=0,Ro=null,Po=null,Mo=0,Oo=1/0,Ko=null,Vo=!1,Go=null,Wo=null,zo=!1,qo=null,Yo=0,Xo=0,Jo=null,Zo=-1,$o=0;function el(){return 0!==(6&jo)?Je():-1!==Zo?Zo:Zo=Je()}function tl(e){return 0===(1&e.mode)?1:0!==(2&jo)&&0!==ko?ko&-ko:null!==mi.transition?(0===$o&&($o=mt()),$o):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nl(e,t,n,r){if(50<Xo)throw Xo=0,Jo=null,Error(i(185));gt(e,n,r),0!==(2&jo)&&e===Fo||(e===Fo&&(0===(2&jo)&&(Lo|=n),4===To&&al(e,ko)),rl(e,r),1===n&&0===jo&&0===(1&t.mode)&&(Oo=Je()+500,Rs&&Os()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var A=31-At(i),a=1<<A,o=s[A];-1===o?0!==(a&n)&&0===(a&r)||(s[A]=ht(a,t)):o<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=dt(e,e===Fo?ko:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Rs=!0,Ms(e)}(ol.bind(null,e)):Ms(ol.bind(null,e)),As(function(){0===(6&jo)&&Os()}),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Fl(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zo=-1,$o=0,0!==(6&jo))throw Error(i(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=dt(e,e===Fo?ko:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=pl(e,r);else{t=r;var s=jo;jo|=2;var A=fl();for(Fo===e&&ko===t||(Ko=null,Oo=Je()+500,dl(e,t));;)try{xl();break}catch(o){hl(e,o)}Ei(),No.current=A,jo=s,null!==Qo?t=0:(Fo=null,ko=0,t=To)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=il(e,s))),1===t)throw n=_o,dl(e,0),al(e,r),rl(e,Je()),n;if(6===t)al(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=pl(e,r))&&(0!==(A=ft(e))&&(r=A,t=il(e,A))),1===t))throw n=_o,dl(e,0),al(e,r),rl(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:vl(e,Po,Ko);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=Mo+500-Je())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(vl.bind(null,e,Po,Ko),t);break}vl(e,Po,Ko);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-At(r);A=1<<a,(a=t[a])>s&&(s=a),r&=~A}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Co(r/1960))-r)){e.timeoutHandle=rs(vl.bind(null,e,Po,Ko),r);break}vl(e,Po,Ko);break;default:throw Error(i(329))}}}return rl(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function il(e,t){var n=Ro;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=pl(e,t))&&(t=Po,Po=n,null!==t&&Al(t)),e}function Al(e){null===Po?Po=e:Po.push.apply(Po,e)}function al(e,t){for(t&=~Ho,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-At(t),r=1<<n;e[n]=-1,t&=~r}}function ol(e){if(0!==(6&jo))throw Error(i(327));bl();var t=dt(e,0);if(0===(1&t))return rl(e,Je()),null;var n=pl(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=_o,dl(e,0),al(e,t),rl(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vl(e,Po,Ko),rl(e,Je()),null}function ll(e,t){var n=jo;jo|=1;try{return e(t)}finally{0===(jo=n)&&(Oo=Je()+500,Rs&&Os())}}function cl(e){null!==qo&&0===qo.tag&&0===(6&jo)&&bl();var t=jo;jo|=1;var n=Uo.transition,r=yt;try{if(Uo.transition=null,yt=1,e)return e()}finally{yt=r,Uo.transition=n,0===(6&(jo=t))&&Os()}}function ul(){Io=So.current,Ns(So)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Qo)for(n=Qo.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ss();break;case 3:Xi(),Ns(Fs),Ns(js),nA();break;case 5:Zi(r);break;case 4:Xi();break;case 13:case 19:Ns($i);break;case 10:Ui(r.type._context);break;case 22:case 23:ul()}n=n.return}if(Fo=e,Qo=e=Sl(e.current,null),ko=Io=t,To=0,_o=null,Ho=Lo=Do=0,Po=Ro=null,null!==ki){for(t=0;t<ki.length;t++)if(null!==(r=(n=ki[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var A=i.next;i.next=s,r.next=A}n.pending=r}ki=null}return e}function hl(e,t){for(;;){var n=Qo;try{if(Ei(),rA.current=JA,lA){for(var r=AA.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}lA=!1}if(iA=0,oA=aA=AA=null,cA=!1,uA=0,Eo.current=null,null===n||null===n.return){To=1,_o=t,Qo=null;break}e:{var A=e,a=n.return,o=n,l=t;if(t=ko,o.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,u=o,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ma(a);if(null!==f){f.flags&=-257,pa(f,a,o,0,t),1&f.mode&&fa(A,c,t),l=c;var m=(t=f).updateQueue;if(null===m){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}if(0===(1&t)){fa(A,c,t),ml();break e}l=Error(i(426))}else if(si&&1&o.mode){var g=ma(a);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),pa(g,a,o,0,t),fi(oa(l,o));break e}}A=l=oa(l,o),4!==To&&(To=2),null===Ro?Ro=[A]:Ro.push(A),A=a;do{switch(A.tag){case 3:A.flags|=65536,t&=-t,A.lanes|=t,Mi(A,da(0,l,t));break e;case 1:o=l;var x=A.type,y=A.stateNode;if(0===(128&A.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Wo||!Wo.has(y)))){A.flags|=65536,t&=-t,A.lanes|=t,Mi(A,ha(A,o,t));break e}}A=A.return}while(null!==A)}wl(n)}catch(w){t=w,Qo===n&&null!==n&&(Qo=n=n.return);continue}break}}function fl(){var e=No.current;return No.current=JA,null===e?JA:e}function ml(){0!==To&&3!==To&&2!==To||(To=4),null===Fo||0===(268435455&Do)&&0===(268435455&Lo)||al(Fo,ko)}function pl(e,t){var n=jo;jo|=2;var r=fl();for(Fo===e&&ko===t||(Ko=null,dl(e,t));;)try{gl();break}catch(s){hl(e,s)}if(Ei(),jo=n,No.current=r,null!==Qo)throw Error(i(261));return Fo=null,ko=0,To}function gl(){for(;null!==Qo;)yl(Qo)}function xl(){for(;null!==Qo&&!Ye();)yl(Qo)}function yl(e){var t=Bo(e.alternate,e,Io);e.memoizedProps=e.pendingProps,null===t?wl(e):Qo=t,Eo.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Io)))return void(Qo=n)}else{if(null!==(n=za(n,t)))return n.flags&=32767,void(Qo=n);if(null===e)return To=6,void(Qo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Qo=t);Qo=t=e}while(null!==t);0===To&&(To=5)}function vl(e,t,n){var r=yt,s=Uo.transition;try{Uo.transition=null,yt=1,function(e,t,n,r){do{bl()}while(null!==qo);if(0!==(6&jo))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var A=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-At(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,A),e===Fo&&(Qo=Fo=null,ko=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||zo||(zo=!0,Fl(tt,function(){return bl(),null})),A=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||A){A=Uo.transition,Uo.transition=null;var a=yt;yt=1;var o=jo;jo|=4,Eo.current=null,function(e,t){if(es=Vt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,A=r.focusNode;r=r.focusOffset;try{n.nodeType,A.nodeType}catch(v){n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(o=a+s),d!==A||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===s&&(o=a),h===A&&++u===r&&(l=a),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Vt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var p=m.memoizedProps,g=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:ta(t.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(v){Cl(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=eo,eo=!1}(e,n),po(n,e),fr(ts),Vt=!!es,ts=es=null,e.current=n,xo(n,e,s),Xe(),jo=o,yt=a,Uo.transition=A}else e.current=n;if(zo&&(zo=!1,qo=e,Yo=s),A=e.pendingLanes,0===A&&(Wo=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vo)throw Vo=!1,e=Go,Go=null,e;0!==(1&Yo)&&0!==e.tag&&bl(),A=e.pendingLanes,0!==(1&A)?e===Jo?Xo++:(Xo=0,Jo=e):Xo=0,Os()}(e,t,n,r)}finally{Uo.transition=s,yt=r}return null}function bl(){if(null!==qo){var e=wt(Yo),t=Uo.transition,n=yt;try{if(Uo.transition=null,yt=16>e?16:e,null===qo)var r=!1;else{if(e=qo,qo=null,Yo=0,0!==(6&jo))throw Error(i(331));var s=jo;for(jo|=4,Ja=e.current;null!==Ja;){var A=Ja,a=A.child;if(0!==(16&Ja.flags)){var o=A.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Ja=c;null!==Ja;){var u=Ja;switch(u.tag){case 0:case 11:case 15:to(8,u,A)}var d=u.child;if(null!==d)d.return=u,Ja=d;else for(;null!==Ja;){var h=(u=Ja).sibling,f=u.return;if(so(u),u===c){Ja=null;break}if(null!==h){h.return=f,Ja=h;break}Ja=f}}}var m=A.alternate;if(null!==m){var p=m.child;if(null!==p){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(null!==p)}}Ja=A}}if(0!==(2064&A.subtreeFlags)&&null!==a)a.return=A,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(A=Ja).flags))switch(A.tag){case 0:case 11:case 15:to(9,A,A.return)}var x=A.sibling;if(null!==x){x.return=A.return,Ja=x;break e}Ja=A.return}}var y=e.current;for(Ja=y;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=y;null!==Ja;){if(0!==(2048&(o=Ja).flags))try{switch(o.tag){case 0:case 11:case 15:no(9,o)}}catch(b){Cl(o,o.return,b)}if(o===a){Ja=null;break e}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break e}Ja=o.return}}if(jo=s,Os(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(b){}r=!0}return r}finally{yt=n,Uo.transition=t}}return!1}function Bl(e,t,n){e=Ri(e,t=da(0,t=oa(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function Cl(e,t,n){if(3===e.tag)Bl(e,e,n);else for(;null!==t;){if(3===t.tag){Bl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wo||!Wo.has(r))){t=Ri(t,e=ha(t,e=oa(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Nl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Fo===e&&(ko&n)===n&&(4===To||3===To&&(130023424&ko)===ko&&500>Je()-Mo?dl(e,0):Ho|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ti(e,t))&&(gt(e,t,n),rl(e,n))}function Ul(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function jl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),El(e,n)}function Fl(e,t){return ze(e,t)}function Ql(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(e,t,n,r){return new Ql(e,t,n,r)}function Il(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sl(e,t){var n=e.alternate;return null===n?((n=kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tl(e,t,n,r,s,A){var a=2;if(r=e,"function"===typeof e)Il(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case B:return _l(n.children,s,A,t);case C:a=8,s|=8;break;case N:return(e=kl(12,n,t,2|s)).elementType=N,e.lanes=A,e;case F:return(e=kl(13,n,t,s)).elementType=F,e.lanes=A,e;case Q:return(e=kl(19,n,t,s)).elementType=Q,e.lanes=A,e;case S:return Dl(n,s,A,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case U:a=9;break e;case j:a=11;break e;case k:a=14;break e;case I:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=kl(a,n,t,s)).elementType=e,t.type=r,t.lanes=A,t}function _l(e,t,n,r){return(e=kl(7,e,r,t)).lanes=n,e}function Dl(e,t,n,r){return(e=kl(22,e,r,t)).elementType=S,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return(e=kl(6,e,null,t)).lanes=n,e}function Hl(e,t,n){return(t=kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rl(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pl(e,t,n,r,s,i,A,a,o){return e=new Rl(e,t,n,a,o),1===t?(t=1,!0===i&&(t|=8)):t=0,i=kl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Ml(e){if(!e)return Us;e:{if(Oe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Is(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Is(n))return _s(e,n,t)}return t}function Ol(e,t,n,r,s,i,A,a,o){return(e=Pl(n,r,!0,e,0,i,0,a,o)).context=Ml(null),n=e.current,(i=Hi(r=el(),s=tl(n))).callback=void 0!==t&&null!==t?t:null,Ri(n,i,s),e.current.lanes=s,gt(e,s,r),rl(e,r),e}function Kl(e,t,n,r){var s=t.current,i=el(),A=tl(s);return n=Ml(n),null===t.context?t.context=n:t.pendingContext=n,(t=Hi(i,A)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ri(s,t,A))&&(nl(e,s,A,i),Pi(e,s,A)),A}function Vl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Bo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fs.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:ja(t),hi();break;case 5:Ji(t);break;case 1:Is(t.type)&&Ds(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Es(bi,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Es($i,1&$i.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Da(e,t,n):(Es($i,1&$i.current),null!==(e=Ka(e,t,n))?e.sibling:null);Es($i,1&$i.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ma(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es($i,$i.current),r)break;return null;case 22:case 23:return t.lanes=0,Ba(e,t,n)}return Ka(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,si&&0!==(1048576&t.flags)&&$s(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oa(e,t),e=t.pendingProps;var s=ks(t,js.current);Fi(t,n),s=mA(null,t,r,e,s,n);var A=pA();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Is(r)?(A=!0,Ds(t)):A=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Di(t),s.updater=ra,t.stateNode=s,s._reactInternals=t,aa(t,r,e,n),t=Ua(null,t,r,!0,A,n)):(t.tag=0,si&&A&&ei(t),ya(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oa(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Il(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===j)return 11;if(e===k)return 14}return 2}(r),e=ta(r,e),s){case 0:t=Na(null,t,r,e,n);break e;case 1:t=Ea(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=va(null,t,r,ta(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Na(e,t,r,s=t.elementType===r?s:ta(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ea(e,t,r,s=t.elementType===r?s:ta(r,s),n);case 3:e:{if(ja(t),null===e)throw Error(i(387));r=t.pendingProps,s=(A=t.memoizedState).element,Li(e,t),Oi(t,r,null,n);var a=t.memoizedState;if(r=a.element,A.isDehydrated){if(A={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=A,t.memoizedState=A,256&t.flags){t=Fa(e,t,r,n,s=oa(Error(i(423)),t));break e}if(r!==s){t=Fa(e,t,r,n,s=oa(Error(i(424)),t));break e}for(ri=ls(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=vi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===s){t=Ka(e,t,n);break e}ya(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&li(t),r=t.type,s=t.pendingProps,A=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==A&&ns(r,A)&&(t.flags|=32),Ca(e,t),ya(e,t,a,n),t.child;case 6:return null===e&&li(t),null;case 13:return Da(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):ya(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wa(e,t,r,s=t.elementType===r?s:ta(r,s),n);case 7:return ya(e,t,t.pendingProps,n),t.child;case 8:case 12:return ya(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,A=t.memoizedProps,a=s.value,Es(bi,r._currentValue),r._currentValue=a,null!==A)if(ar(A.value,a)){if(A.children===s.children&&!Fs.current){t=Ka(e,t,n);break e}}else for(null!==(A=t.child)&&(A.return=t);null!==A;){var o=A.dependencies;if(null!==o){a=A.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===A.tag){(l=Hi(-1,n&-n)).tag=2;var c=A.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}A.lanes|=n,null!==(l=A.alternate)&&(l.lanes|=n),ji(A.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===A.tag)a=A.type===t.type?null:A.child;else if(18===A.tag){if(null===(a=A.return))throw Error(i(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),ji(a,n,t),a=A.sibling}else a=A.child;if(null!==a)a.return=A;else for(a=A;null!==a;){if(a===t){a=null;break}if(null!==(A=a.sibling)){A.return=a.return,a=A;break}a=a.return}A=a}ya(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Fi(t,n),r=r(s=Qi(s)),t.flags|=1,ya(e,t,r,n),t.child;case 14:return s=ta(r=t.type,t.pendingProps),va(e,t,r,s=ta(r.type,s),n);case 15:return ba(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ta(r,s),Oa(e,t),t.tag=1,Is(r)?(e=!0,Ds(t)):e=!1,Fi(t,n),ia(t,r,s),aa(t,r,s,n),Ua(null,t,r,!0,e,n);case 19:return Ma(e,t,n);case 22:return Ba(e,t,n)}throw Error(i(156,t.tag))};var zl="function"===typeof reportError?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function $l(e,t,n,r,s){var i=n._reactRootContainer;if(i){var A=i;if("function"===typeof s){var a=s;s=function(){var e=Vl(A);a.call(e)}}Kl(t,A,e,s)}else A=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Vl(A);i.call(e)}}var A=Ol(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=A,e[fs]=A.current,Or(8===e.nodeType?e.parentNode:e),cl(),A}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=Vl(o);a.call(e)}}var o=Pl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=o,e[fs]=o.current,Or(8===e.nodeType?e.parentNode:e),cl(function(){Kl(t,o,n,r)}),o}(n,t,e,s,r);return Vl(A)}Yl.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Kl(e,t,null,null)},Yl.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl(function(){Kl(null,e,null,null)}),t[fs]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<St.length&&0!==t&&t<St[n].priority;n++);St.splice(n,0,e),0===n&&Lt(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),rl(t,Je()),0===(6&jo)&&(Oo=Je()+500,Os()))}break;case 13:cl(function(){var t=Ti(e,1);if(null!==t){var n=el();nl(t,e,1,n)}}),Wl(e,1)}},bt=function(e){if(13===e.tag){var t=Ti(e,134217728);if(null!==t)nl(t,e,134217728,el());Wl(e,134217728)}},Bt=function(e){if(13===e.tag){var t=tl(e),n=Ti(e,t);if(null!==n)nl(n,e,t,el());Wl(e,t)}},Ct=function(){return yt},Nt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},be=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vs(r);if(!s)throw Error(i(90));z(r),Z(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=ll,Fe=cl;var ec={usingClientEntryPoint:!1,Events:[ys,ws,vs,Ee,Ue,ll]},tc={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{st=rc.inject(nc),it=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(i(299));var n=!1,r="",s=zl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Pl(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Or(8===e.nodeType?e.parentNode:e),new ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(i(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,A="",a=zl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(A=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Ol(t,null,e,1,null!=n?n:null,s,0,A,a),e[fs]=t.current,Or(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(i(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(i(40));return!!e._reactRootContainer&&(cl(function(){$l(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $l(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var A={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>A[e]=()=>r[e]);return A.default=()=>r,n.d(i,A),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),s=n(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const A="popstate";function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function o(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Pe){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function h(t,n,r,s){void 0===s&&(s={});let{window:o=document.defaultView,v5Compat:d=!1}=s,h=o.history,f=e.Pop,m=null,p=g();function g(){return(h.state||{idx:null}).idx}function x(){f=e.Pop;let t=g(),n=null==t?null:t-p;p=t,m&&m({action:f,location:w.location,delta:n})}function y(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,h.replaceState(i({},h.state,{idx:p}),""));let w={get action(){return f},get location(){return t(o,h)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(A,x),m=e,()=>{o.removeEventListener(A,x),m=null}},createHref:e=>n(o,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let s=c(w.location,t,n);r&&r(s,t),p=g()+1;let i=l(s,p),A=w.createHref(s);try{h.pushState(i,"",A)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;o.location.assign(A)}d&&m&&m({action:f,location:w.location,delta:1})},replace:function(t,n){f=e.Replace;let s=c(w.location,t,n);r&&r(s,t),p=g();let i=l(s,p),A=w.createHref(s);h.replaceState(i,"",A),d&&m&&m({action:f,location:w.location,delta:0})},go:e=>h.go(e)};return w}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),p(e,t,n,!1)}function p(e,t,n,r){let s=Q(("string"===typeof t?d(t):t).pathname||"/",n);if(null==s)return null;let i=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let A=null;for(let a=0;null==A&&a<i.length;++a){let e=F(s);A=U(i[a],e,r)}return A}function g(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let A={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};A.relativePath.startsWith("/")&&(a(A.relativePath.startsWith(r),'Absolute route path "'+A.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),A.relativePath=A.relativePath.slice(r.length));let o=H([r,A.relativePath]),l=n.concat(A);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),g(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:E(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))s(e,t,r);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let A=x(r.join("/")),a=[];return a.push(...A.map(e=>""===e?i:[i,e].join("/"))),s&&a.push(...A),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,w=3,v=2,b=1,B=10,C=-2,N=e=>"*"===e;function E(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=C),t&&(r+=v),n.filter(e=>!N(e)).reduce((e,t)=>e+(y.test(t)?w:""===t?b:B),r)}function U(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",A=[];for(let a=0;a<r.length;++a){let e=r[a],o=a===r.length-1,l="/"===i?t:t.slice(i.length)||"/",c=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l),u=e.route;if(!c&&o&&n&&!r[r.length-1].route.index&&(c=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!c)return null;Object.assign(s,c.params),A.push({params:s,pathname:H([i,c.pathname]),pathnameBase:R(H([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=H([i,c.pathnameBase]))}return A}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);o("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],A=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";A=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const o=a[n];return e[r]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:A,pattern:e}}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return o(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const k=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function I(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:i=""}="string"===typeof e?d(e):e;if(r)if(A=r,k.test(A))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),o(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?S(r.substring(1),"/"):S(r,t)}else n=t;var A;return{pathname:n,search:P(s),hash:M(i)}}function S(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function T(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function _(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=_(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=d(e):(s=i({},e),a(!s.pathname||!s.pathname.includes("?"),T("?","pathname","search",s)),a(!s.pathname||!s.pathname.includes("#"),T("#","pathname","hash",s)),a(!s.search||!s.search.includes("#"),T("#","search","hash",s)));let A,o=""===e||""===s.pathname,l=o?"/":s.pathname;if(null==l)A=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}A=e>=0?t[e]:"/"}let c=I(s,A),u=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}const H=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),P=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function O(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],V=(new Set(K),["get",...K]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const W=t.createContext(null);const z=t.createContext(null);const q=t.createContext(null);const Y=t.createContext(null);const X=t.createContext({outlet:null,matches:[],isDataRoute:!1});const J=t.createContext(null);function Z(){return null!=t.useContext(Y)}function $(){return Z()||a(!1),t.useContext(Y).location}function ee(e){t.useContext(q).static||t.useLayoutEffect(e)}function te(){let{isDataRoute:e}=t.useContext(X);return e?function(){let{router:e}=de(ce.UseNavigateStable),n=fe(ue.UseNavigateStable),r=t.useRef(!1);return ee(()=>{r.current=!0}),t.useCallback(function(t,s){void 0===s&&(s={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,G({fromRouteId:n},s)))},[e,n])}():function(){Z()||a(!1);let e=t.useContext(W),{basename:n,future:r,navigator:s}=t.useContext(q),{matches:i}=t.useContext(X),{pathname:A}=$(),o=JSON.stringify(D(i,r.v7_relativeSplatPath)),l=t.useRef(!1);return ee(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void s.go(t);let i=L(t,JSON.parse(o),A,"path"===r.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:H([n,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)},[n,s,o,A,e])}()}function ne(){let{matches:e}=t.useContext(X),n=e[e.length-1];return n?n.params:{}}function re(e,n){let{relative:r}=void 0===n?{}:n,{future:s}=t.useContext(q),{matches:i}=t.useContext(X),{pathname:A}=$(),a=JSON.stringify(D(i,s.v7_relativeSplatPath));return t.useMemo(()=>L(e,JSON.parse(a),A,"path"===r),[e,a,A,r])}function se(n,r,s,i){Z()||a(!1);let{navigator:A}=t.useContext(q),{matches:o}=t.useContext(X),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=$();if(r){var p;let e="string"===typeof r?d(r):r;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||a(!1),h=e}else h=f;let g=h.pathname||"/",x=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=m(n,{pathname:x});let w=le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:H([u,A.encodeLocation?A.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:H([u,A.encodeLocation?A.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,i);return r&&w?t.createElement(Y.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},w):w}function ie(){let e=function(){var e;let n=t.useContext(J),r=he(ue.UseRouteError),s=fe(ue.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[s]}(),n=O(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,null)}const Ae=t.createElement(ie,null);class ae extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(X.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:n,match:r,children:s}=e,i=t.useContext(W);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(X.Provider,{value:n},s)}function le(e,n,r,s){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var A;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(A=s)&&A.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||a(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,s,i)=>{let A,a=!1,d=null,h=null;var f;r&&(A=l&&s.route.id?l[s.route.id]:void 0,d=s.route.errorElement||Ae,c&&(u<0&&0===i?(f="route-fallback",!1||me[f]||(me[f]=!0),a=!0,h=null):u===i&&(a=!0,h=s.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,i+1)),p=()=>{let n;return n=A?d:a?h:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(oe,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?t.createElement(ae,{location:r.location,revalidation:r.revalidation,component:d,error:A,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let n=t.useContext(W);return n||a(!1),n}function he(e){let n=t.useContext(z);return n||a(!1),n}function fe(e){let n=function(){let e=t.useContext(X);return e||a(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||a(!1),r.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){let{to:n,replace:r,state:s,relative:i}=e;Z()||a(!1);let{future:A,static:o}=t.useContext(q),{matches:l}=t.useContext(X),{pathname:c}=$(),u=te(),d=L(n,D(l,A.v7_relativeSplatPath),c,"path"===i),h=JSON.stringify(d);return t.useEffect(()=>u(JSON.parse(h),{replace:r,state:s,relative:i}),[u,h,i,r,s]),null}function xe(e){a(!1)}function ye(n){let{basename:r="/",children:s=null,location:i,navigationType:A=e.Pop,navigator:o,static:l=!1,future:c}=n;Z()&&a(!1);let u=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:u,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof i&&(i=d(i));let{pathname:f="/",search:m="",hash:p="",state:g=null,key:x="default"}=i,y=t.useMemo(()=>{let e=Q(f,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:g,key:x},navigationType:A}},[u,f,m,p,g,x,A]);return null==y?null:t.createElement(q.Provider,{value:h},t.createElement(Y.Provider,{children:s,value:y}))}function we(e){let{children:t,location:n}=e;return se(ve(t),n)}new Promise(()=>{});t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let i=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,i));e.type!==xe&&a(!1),e.props.index&&e.props.children&&a(!1);let A={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(A.children=ve(e.props.children,i)),r.push(A)}),r}var be=n(950),Be=n.t(be,2);function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Pe){}new Map;const Ue=r.startTransition;Be.flushSync,r.useId;function je(e){let{basename:n,children:r,future:s,window:i}=e,A=t.useRef();var a;null==A.current&&(A.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),h(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return c("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,a)));let o=A.current,[l,d]=t.useState({action:o.action,location:o.location}),{v7_startTransition:f}=s||{},m=t.useCallback(e=>{f&&Ue?Ue(()=>d(e)):d(e)},[d,f]);return t.useLayoutEffect(()=>o.listen(m),[o,m]),t.useEffect(()=>pe(s),[s]),t.createElement(ye,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Fe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Qe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=t.forwardRef(function(e,n){let r,{onClick:s,relative:i,reloadDocument:A,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=Ne(e,Ee),{basename:p}=t.useContext(q),g=!1;if("string"===typeof d&&Qe.test(d)&&(r=d,Fe))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=Q(t.pathname,p);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:g=!0}catch(Pe){}let x=function(e,n){let{relative:r}=void 0===n?{}:n;Z()||a(!1);let{basename:s,navigator:i}=t.useContext(q),{hash:A,pathname:o,search:l}=re(e,{relative:r}),c=o;return"/"!==s&&(c="/"===o?s:H([s,o])),i.createHref({pathname:c,search:l,hash:A})}(d,{relative:i}),y=function(e,n){let{target:r,replace:s,state:i,preventScrollReset:A,relative:a,viewTransition:o}=void 0===n?{}:n,l=te(),c=$(),d=re(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==s?s:u(c)===u(d);l(e,{replace:n,state:i,preventScrollReset:A,relative:a,viewTransition:o})}},[c,l,d,s,i,r,e,A,a,o])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:f});return t.createElement("a",Ce({},m,{href:r||x,onClick:g||A?s:function(e){s&&s(e),e.defaultPrevented||y(e)},ref:n,target:c}))});var Ie,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));function Te(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function De(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_e(t)?t:t+""}function Le(e,t,n){return(t=De(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach(function(t){Le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Pe={data:""},Me=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Pe},Oe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ke=/\/\*[^]*?\*\/|  +/g,Ve=/\n+/g,Ge=(e,t)=>{let n="",r="",s="";for(let i in e){let A=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+A+";":r+="f"==i[1]?Ge(A,i):i+"{"+Ge(A,"k"==i[1]?"":t)+"}":"object"==typeof A?r+=Ge(A,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=A&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ge.p?Ge.p(i,A):i+":"+A+";")}return n+(t&&s?t+"{"+s+"}":s)+r},We={},ze=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+ze(e[n]);return t}return e},qe=(e,t,n,r,s)=>{let i=ze(e),A=We[i]||(We[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!We[A]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=Oe.exec(e.replace(Ke,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Ve," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Ve," ").trim();return r[0]})(e);We[A]=Ge(s?{["@keyframes "+A]:t}:t,n?"":"."+A)}let a=n&&We.g?We.g:null;return n&&(We.g=We[A]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(We[A],t,r,a),A};function Ye(e){let t=this||{},n=e.call?e(t.p):e;return qe(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":Ge(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Me(t.target),t.g,t.o,t.k)}Ye.bind({g:1});let Xe,Je,Ze,$e=Ye.bind({k:1});function et(e,t){let n=this||{};return function(){let r=arguments;function s(i,A){let a=Object.assign({},i),o=a.className||s.className;n.p=Object.assign({theme:Je&&Je()},a),n.o=/ *go\d+/.test(o),a.className=Ye.apply(n,r)+(o?" "+o:""),t&&(a.ref=A);let l=e;return e[0]&&(l=a.as||e,delete a.as),Ze&&l[0]&&Ze(a),Xe(l,a)}return t?t(s):s}}var tt,nt,rt,st,it,At,at,ot,lt,ct,ut,dt,ht,ft,mt,pt,gt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,xt=(()=>{let e=0;return()=>(++e).toString()})(),yt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),wt="default",vt=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return Re(Re({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return Re(Re({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Re(Re({},e),t.toast):e)});case 2:let{toast:r}=t;return vt(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return Re(Re({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?Re(Re({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Re(Re({},e),{},{toasts:[]}):Re(Re({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Re(Re({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return Re(Re({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Re(Re({},e),{},{pauseDuration:e.pauseDuration+i}))})}},bt=[],Bt={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Ct={},Nt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;Ct[t]=vt(Ct[t]||Bt,e),bt.forEach(e=>{let[n,r]=e;n===t&&r(Ct[t])})},Et=e=>Object.keys(Ct).forEach(t=>Nt(e,t)),Ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return t=>{Nt(t,e)}},jt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ft=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return Re(Re({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||xt()})}(t,e,n);return Ut(r.toasterId||(e=>Object.keys(Ct).find(t=>Ct[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},Qt=(e,t)=>Ft("blank")(e,t);Qt.error=Ft("error"),Qt.success=Ft("success"),Qt.loading=Ft("loading"),Qt.custom=Ft("custom"),Qt.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Ut(t)(n):Et(n)},Qt.dismissAll=e=>Qt.dismiss(void 0,e),Qt.remove=(e,t)=>{let n={type:4,toastId:e};t?Ut(t)(n):Et(n)},Qt.removeAll=e=>Qt.remove(void 0,e),Qt.promise=(e,t,n)=>{let r=Qt.loading(t.loading,Re(Re({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?gt(t.success,e):void 0;return s?Qt.success(s,Re(Re({id:r},n),null==n?void 0:n.success)):Qt.dismiss(r),e}).catch(e=>{let s=t.error?gt(t.error,e):void 0;s?Qt.error(s,Re(Re({id:r},n),null==n?void 0:n.error)):Qt.dismiss(r)}),e};var kt=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt,[r,s]=(0,t.useState)(Ct[n]||Bt),i=(0,t.useRef)(Ct[n]);(0,t.useEffect)(()=>(i.current!==Ct[n]&&s(Ct[n]),bt.push([n,s]),()=>{let e=bt.findIndex(e=>{let[t]=e;return t===n});e>-1&&bt.splice(e,1)}),[n]);let A=r.toasts.map(t=>{var n,r,s;return Re(Re(Re(Re({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||jt[t.type],style:Re(Re(Re({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return Re(Re({},r),{},{toasts:A})}(e,n),i=(0,t.useRef)(new Map).current,A=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),a({type:4,toastId:e})},t);i.set(e,n)},[]);(0,t.useEffect)(()=>{if(s)return;let e=Date.now(),t=r.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>Qt.dismiss(t.id,n),r);t.visible&&Qt.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[r,s,n]);let a=(0,t.useCallback)(Ut(n),[n]),o=(0,t.useCallback)(()=>{a({type:5,time:Date.now()})},[a]),l=(0,t.useCallback)((e,t)=>{a({type:1,toast:{id:e,height:t}})},[a]),c=(0,t.useCallback)(()=>{s&&a({type:6,time:Date.now()})},[s,a]),u=(0,t.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:i}=t||{},A=r.filter(t=>(t.position||i)===(e.position||i)&&t.height),a=A.findIndex(t=>t.id===e.id),o=A.filter((e,t)=>t<a&&e.visible).length;return A.filter(e=>e.visible).slice(...n?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return(0,t.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)A(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[r,A]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:u}}},It=$e(tt||(tt=Te(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),St=$e(nt||(nt=Te(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Tt=$e(rt||(rt=Te(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),_t=et("div")(st||(st=Te(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",It,St,e=>e.secondary||"#fff",Tt),Dt=$e(it||(it=Te(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Lt=et("div")(At||(At=Te(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Dt),Ht=$e(at||(at=Te(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Rt=$e(ot||(ot=Te(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Pt=et("div")(lt||(lt=Te(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Ht,Rt,e=>e.secondary||"#fff"),Mt=et("div")(ct||(ct=Te(["\n  position: absolute;\n"]))),Ot=et("div")(ut||(ut=Te(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Kt=$e(dt||(dt=Te(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Vt=et("div")(ht||(ht=Te(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Kt),Gt=e=>{let{toast:n}=e,{icon:r,type:s,iconTheme:i}=n;return void 0!==r?"string"==typeof r?t.createElement(Vt,null,r):r:"blank"===s?null:t.createElement(Ot,null,t.createElement(Lt,Re({},i)),"loading"!==s&&t.createElement(Mt,null,"error"===s?t.createElement(_t,Re({},i)):t.createElement(Pt,Re({},i))))},Wt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),zt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),qt=et("div")(ft||(ft=Te(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Yt=et("div")(mt||(mt=Te(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Xt=t.memo(e=>{let{toast:n,position:r,style:s,children:i}=e,A=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=yt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Wt(n),zt(n)];return{animation:t?"".concat($e(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat($e(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||r||"top-center",n.visible):{opacity:0},a=t.createElement(Gt,{toast:n}),o=t.createElement(Yt,Re({},n.ariaProps),gt(n.message,n));return t.createElement(qt,{className:n.className,style:Re(Re(Re({},A),s),n.style)},"function"==typeof i?i({icon:a,message:o}):t.createElement(t.Fragment,null,a,o))});!function(e,t,n,r){Ge.p=t,Xe=e,Je=n,Ze=r}(t.createElement);var Jt=e=>{let{id:n,className:r,style:s,onHeightUpdate:i,children:A}=e,a=t.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;i(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return t.createElement("div",{ref:a,className:r,style:s},A)},Zt=Ye(pt||(pt=Te(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),$t=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:s,gutter:i,children:A,toasterId:a,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=kt(s,a);return t.createElement("div",{"data-rht-toaster":a||"",style:Re({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(e=>{let s=e.position||r,a=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Re(Re({left:0,right:0,display:"flex",position:"absolute",transition:yt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(s,u.calculateOffset(e,{reverseOrder:n,gutter:i,defaultPosition:r}));return t.createElement(Jt,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Zt:"",style:a},"custom"===e.type?gt(e.message,e):A?A(e):t.createElement(Xt,{toast:e,position:s}))}))},en=Qt;const tn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},nn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,A=i?e[s+1]:0,a=s+2<e.length,o=a?e[s+2]:0,l=t>>2,c=(3&t)<<4|A>>4;let u=(15&A)<<2|o>>6,d=63&o;a||(d=64,i||(u=64)),r.push(n[l],n[c],n[u],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],A=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&A)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const A=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==A||null==a)throw new rn;const o=t<<2|i>>4;if(r.push(o),64!==A){const e=i<<4&240|A>>2;if(r.push(e),64!==a){const e=A<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sn=function(e){return function(e){const t=tn(e);return nn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},An=function(e){try{return nn.decodeString(e,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};const an=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,on=()=>{try{return an()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Pe){return}const t=e&&An(e[1]);return t&&JSON.parse(t)})()}catch(Pe){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Pe))}},ln=e=>{var t,n;return null===(n=null===(t=on())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},cn=e=>{const t=ln(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},un=()=>{var e;return null===(e=on())||void 0===e?void 0:e.config},dn=e=>{var t;return null===(t=on())||void 0===t?void 0:t["_".concat(e)]};class hn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function fn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sn(JSON.stringify({alg:"none",type:"JWT"})),sn(JSON.stringify(i)),""].join(".")}function mn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function pn(){return!function(){var e;const t=null===(e=on())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Pe){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gn(){try{return"object"===typeof indexedDB}catch(Pe){return!1}}function xn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class yn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(vn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new yn(n,i,t)}}const vn=/\{\$([^}]+)}/g;function bn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Bn(n)&&Bn(i)){if(!bn(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bn(e){return null!==e&&"object"===typeof e}function Cn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function En(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Un{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=jn),void 0===r.error&&(r.error=jn),void 0===r.complete&&(r.complete=jn);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Pe){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Pe){"undefined"!==typeof console&&console.error&&console.error(Pe)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}function Fn(e){return e&&e._delegate?e._delegate:e}class Qn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const kn="[DEFAULT]";class In{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Pe){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Pe){if(r)return null;throw Pe}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:kn})}catch(Pe){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Pe){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===kn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;return this.component?this.component.multipleInstances?e:kn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Sn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new In(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Tn=[];var _n;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_n||(_n={}));const Dn={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},Ln=_n.INFO,Hn={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},Rn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Hn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),A=2;A<s;A++)i[A-2]=arguments[A];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Pn{constructor(e){this.name=e,this._logLevel=Ln,this._logHandler=Rn,this._userLogHandler=null,Tn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...t),this._logHandler(this,_n.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...t),this._logHandler(this,_n.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.INFO,...t),this._logHandler(this,_n.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.WARN,...t),this._logHandler(this,_n.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...t),this._logHandler(this,_n.ERROR,...t)}}let Mn,On;const Kn=new WeakMap,Vn=new WeakMap,Gn=new WeakMap,Wn=new WeakMap,zn=new WeakMap;let qn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Yn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(On||(On=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zn(this),n),Jn(Kn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jn(e.apply(Zn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Zn(this),t,...r);return Gn.set(i,t.sort?t.sort():[t]),Jn(i)}}function Xn(e){return"function"===typeof e?Yn(e):(e instanceof IDBTransaction&&function(e){if(Vn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Vn.set(e,t)}(e),t=e,(Mn||(Mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,qn):e);var t}function Jn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Jn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Kn.set(t,e)}).catch(()=>{}),zn.set(t,e),t}(e);if(Wn.has(e))return Wn.get(e);const t=Xn(e);return t!==e&&(Wn.set(e,t),zn.set(t,e)),t}const Zn=e=>zn.get(e);function $n(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const A=indexedDB.open(e,t),a=Jn(A);return r&&A.addEventListener("upgradeneeded",e=>{r(Jn(A.result),e.oldVersion,e.newVersion,Jn(A.transaction),e)}),n&&A.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function er(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),Jn(n).then(()=>{})}const tr=["get","getKey","getAll","getAllKeys","count"],nr=["put","add","delete","clear"],rr=new Map;function sr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rr.get(t))return rr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=nr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!tr.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var A=arguments.length,a=new Array(A>1?A-1:0),o=1;o<A;o++)a[o-1]=arguments[o];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return rr.set(t,i),i}qn=(e=>Re(Re({},e),{},{get:(t,n,r)=>sr(t,n)||e.get(t,n,r),has:(t,n)=>!!sr(t,n)||e.has(t,n)}))(qn);class ir{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ar="@firebase/app",ar="0.10.13",or=new Pn("@firebase/app"),lr="@firebase/app-compat",cr="@firebase/analytics-compat",ur="@firebase/analytics",dr="@firebase/app-check-compat",hr="@firebase/app-check",fr="@firebase/auth",mr="@firebase/auth-compat",pr="@firebase/database",gr="@firebase/data-connect",xr="@firebase/database-compat",yr="@firebase/functions",wr="@firebase/functions-compat",vr="@firebase/installations",br="@firebase/installations-compat",Br="@firebase/messaging",Cr="@firebase/messaging-compat",Nr="@firebase/performance",Er="@firebase/performance-compat",Ur="@firebase/remote-config",jr="@firebase/remote-config-compat",Fr="@firebase/storage",Qr="@firebase/storage-compat",kr="@firebase/firestore",Ir="@firebase/vertexai-preview",Sr="@firebase/firestore-compat",Tr="firebase",_r="[DEFAULT]",Dr={[Ar]:"fire-core",[lr]:"fire-core-compat",[ur]:"fire-analytics",[cr]:"fire-analytics-compat",[hr]:"fire-app-check",[dr]:"fire-app-check-compat",[fr]:"fire-auth",[mr]:"fire-auth-compat",[pr]:"fire-rtdb",[gr]:"fire-data-connect",[xr]:"fire-rtdb-compat",[yr]:"fire-fn",[wr]:"fire-fn-compat",[vr]:"fire-iid",[br]:"fire-iid-compat",[Br]:"fire-fcm",[Cr]:"fire-fcm-compat",[Nr]:"fire-perf",[Er]:"fire-perf-compat",[Ur]:"fire-rc",[jr]:"fire-rc-compat",[Fr]:"fire-gcs",[Qr]:"fire-gcs-compat",[kr]:"fire-fst",[Sr]:"fire-fst-compat",[Ir]:"fire-vertex","fire-js":"fire-js",[Tr]:"fire-js-all"},Lr=new Map,Hr=new Map,Rr=new Map;function Pr(e,t){try{e.container.addComponent(t)}catch(Pe){or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Pe)}}function Mr(e){const t=e.name;if(Rr.has(t))return or.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rr.set(t,e);for(const n of Lr.values())Pr(n,e);for(const n of Hr.values())Pr(n,e);return!0}function Or(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kr(e){return void 0!==e.settings}const Vr=new wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Gr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}const Wr="10.14.1";function zr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:_r,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(n||(n=un()),!n)throw Vr.create("no-options");const i=Lr.get(s);if(i){if(bn(n,i.options)&&bn(r,i.config))return i;throw Vr.create("duplicate-app",{appName:s})}const A=new Sn(s);for(const o of Rr.values())A.addComponent(o);const a=new Gr(n,r,A);return Lr.set(s,a),a}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r;const t=Lr.get(e);if(!t&&e===_r&&un())return zr();if(!t)throw Vr.create("no-app",{appName:e});return t}function Yr(e,t,n){var r;let s=null!==(r=Dr[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),A=t.match(/\s|\//);if(i||A){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&A&&e.push("and"),A&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void or.warn(e.join(" "))}Mr(new Qn("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Xr="firebase-heartbeat-store";let Jr=null;function Zr(){return Jr||(Jr=$n("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xr)}catch(Pe){console.warn(Pe)}}}).catch(e=>{throw Vr.create("idb-open",{originalErrorMessage:e.message})})),Jr}async function $r(e,t){try{const n=(await Zr()).transaction(Xr,"readwrite"),r=n.objectStore(Xr);await r.put(t,es(e)),await n.done}catch(Pe){if(Pe instanceof yn)or.warn(Pe.message);else{const t=Vr.create("idb-set",{originalErrorMessage:null===Pe||void 0===Pe?void 0:Pe.message});or.warn(t.message)}}}function es(e){return"".concat(e.name,"!").concat(e.options.appId)}class ts{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rs(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ns();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Pe){or.warn(Pe)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ns(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ss(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ss(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=sn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Pe){return or.warn(Pe),""}}}function ns(){return(new Date).toISOString().substring(0,10)}class rs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!gn()&&xn().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Zr()).transaction(Xr),n=await t.objectStore(Xr).get(es(e));return await t.done,n}catch(Pe){if(Pe instanceof yn)or.warn(Pe.message);else{const t=Vr.create("idb-get",{originalErrorMessage:null===Pe||void 0===Pe?void 0:Pe.message});or.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ss(e){return sn(JSON.stringify({version:2,heartbeats:e})).length}var is;is="",Mr(new Qn("platform-logger",e=>new ir(e),"PRIVATE")),Mr(new Qn("heartbeat",e=>new ts(e),"PRIVATE")),Yr(Ar,ar,is),Yr(Ar,ar,"esm2017"),Yr("fire-js","");Yr("firebase","10.14.1","app");function As(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function as(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const os=as,ls=new wn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cs=new Pn("@firebase/auth");function us(e){if(cs.logLevel<=_n.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cs.error("Auth (".concat(Wr,"): ").concat(e),...n)}}function ds(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gs(e,...n)}function hs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gs(e,...n)}function fs(e,t,n){const r=Object.assign(Object.assign({},os()),{[t]:n});return new wn("auth","Firebase",r).create(t,{appName:e.name})}function ms(e){return fs(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ps(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ds(e,"argument-error"),fs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function gs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ls.create(e,...n)}function xs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw gs(t,...r)}}function ys(e){const t="INTERNAL ASSERTION FAILED: "+e;throw us(t),new Error(t)}function ws(e,t){e||ys(t)}function vs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bs(){return"http:"===Bs()||"https:"===Bs()}function Bs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Cs(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(bs()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ns{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Cs()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Es(e,t){ws(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Us{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const js={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fs=new Ns(3e4,6e4);function Qs(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ks(e,t,n,r){return Is(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const A=Cn(Object.assign({key:e.config.apiKey},i)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const o=Object.assign({method:t,headers:a},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(o.referrerPolicy="no-referrer"),Us.fetch()(Ts(e,e.config.apiHost,n,A),o)})}async function Is(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},js),t);try{const t=new Ds(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ls(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,A]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ls(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Ls(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Ls(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw fs(e,a,A);ds(e,a)}}catch(Pe){if(Pe instanceof yn)throw Pe;ds(e,"network-request-failed",{message:String(Pe)})}}async function Ss(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await ks(e,t,n,r,s);return"mfaPendingCredential"in i&&ds(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Ts(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Es(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function _s(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ds{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(hs(this.auth,"network-request-failed")),Fs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ls(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hs(e,t,r);return s.customData._tokenResponse=n,s}function Hs(e){return void 0!==e&&void 0!==e.getResponse}function Rs(e){return void 0!==e&&void 0!==e.enterprise}class Ps{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _s(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ms(e,t){return ks(e,"GET","/v2/recaptchaConfig",Qs(e,t))}async function Os(e,t){return ks(e,"POST","/v1/accounts:lookup",t)}function Ks(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Pe){}}function Vs(e){return 1e3*Number(e)}function Gs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return us("JWT malformed, contained fewer than 3 sections"),null;try{const e=An(n);return e?JSON.parse(e):(us("Failed to decode base64 JWT payload"),null)}catch(Pe){return us("Caught error parsing JWT payload as JSON",null===Pe||void 0===Pe?void 0:Pe.toString()),null}}function Ws(e){const t=Gs(e);return xs(t,"internal-error"),xs("undefined"!==typeof t.exp,"internal-error"),xs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function zs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Pe){throw Pe instanceof yn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Pe)&&e.auth.currentUser===e&&await e.auth.signOut(),Pe}}class qs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Pe){return void((null===Pe||void 0===Pe?void 0:Pe.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ys{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ks(this.lastLoginAt),this.creationTime=Ks(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await zs(e,Os(n,{idToken:r}));xs(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const A=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Js(i.providerUserInfo):[],a=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,A),o=e.isAnonymous,l=!(e.email&&i.passwordHash)&&!(null===a||void 0===a?void 0:a.length),c=!!o&&l,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ys(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(e,u)}function Js(e){return e.map(e=>{var{providerId:t}=e,n=As(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xs(e.idToken,"internal-error"),xs("undefined"!==typeof e.idToken,"internal-error"),xs("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ws(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xs(0!==e.length,"internal-error");const t=Ws(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(xs(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Is(e,{},async()=>{const n=Cn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Ts(e,r,"/v1/token","key=".concat(s)),A=await e._getAdditionalHeaders();return A["Content-Type"]="application/x-www-form-urlencoded",Us.fetch()(i,{method:"POST",headers:A,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Zs;return n&&(xs("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(xs("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(xs("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return ys("not implemented")}}function $s(e,t){xs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ei{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=As(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ys(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zs(this,this.stsTokenManager.getToken(this.auth,e));return xs(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Fn(e),r=await n.getIdToken(t),s=Gs(r);xs(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,A=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ks(Vs(s.auth_time)),issuedAtTime:Ks(Vs(s.iat)),expirationTime:Ks(Vs(s.exp)),signInProvider:A||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Fn(e);await Xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(xs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await zs(this,async function(e,t){return ks(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,A,a,o,l;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,h=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(A=t.tenantId)&&void 0!==A?A:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,p=null!==(o=t.createdAt)&&void 0!==o?o:void 0,g=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:x,emailVerified:y,isAnonymous:w,providerData:v,stsTokenManager:b}=t;xs(x&&b,e,"internal-error");const B=Zs.fromJSON(this.name,b);xs("string"===typeof x,e,"internal-error"),$s(c,e.name),$s(u,e.name),xs("boolean"===typeof y,e,"internal-error"),xs("boolean"===typeof w,e,"internal-error"),$s(d,e.name),$s(h,e.name),$s(f,e.name),$s(m,e.name),$s(p,e.name),$s(g,e.name);const C=new ei({uid:x,auth:e,email:u,emailVerified:y,displayName:c,isAnonymous:w,photoURL:h,phoneNumber:d,tenantId:f,stsTokenManager:B,createdAt:p,lastLoginAt:g});return v&&Array.isArray(v)&&(C.providerData=v.map(e=>Object.assign({},e))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zs;r.updateFromServerResponse(t);const s=new ei({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];xs(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Js(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),A=new Zs;A.updateFromIdToken(n);const a=new ei({uid:r.localId,auth:e,stsTokenManager:A,isAnonymous:i}),o={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ys(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(a,o),a}}const ti=new Map;function ni(e){ws(e instanceof Function,"Expected a class definition");let t=ti.get(e);return t?(ws(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ti.set(e,t),t)}class ri{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ri.type="NONE";const si=ri;function ii(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ai{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=ii(this.userKey,r.apiKey,s),this.fullPersistenceKey=ii("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ai(ni(si),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ni(si);const i=ii(n,e.config.apiKey,e.name);let A=null;for(const l of t)try{const t=await l._get(i);if(t){const n=ei._fromJSON(e,t);l!==s&&(A=n),s=l;break}}catch(o){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],A&&await s._set(i,A.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(o){}})),new Ai(s,e,n)):new Ai(s,e,n)}}function ai(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hi(t))return"Blackberry";if(fi(t))return"Webos";if(li(t))return"Safari";if((t.includes("chrome/")||ci(t))&&!t.includes("edge/"))return"Chrome";if(di(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/firefox\//i.test(e)}function li(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/crios\//i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/iemobile/i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/android/i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/blackberry/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/webos/i.test(e)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pi(){return function(){const e=mn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();return mi(e)||di(e)||fi(e)||hi(e)||/windows phone/i.test(e)||ui(e)}function xi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ai(mn());break;case"Worker":t="".concat(ai(mn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wr,"/").concat(r)}class yi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Pe){r(Pe)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Pe){t.reverse();for(const n of t)try{n()}catch(Et){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Pe||void 0===Pe?void 0:Pe.message})}}}class wi{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,A;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(i=a.containsNumericCharacter)||void 0===i||i),a.isValid&&(a.isValid=null===(A=a.containsNonAlphanumericCharacter)||void 0===A||A),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class vi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bi(this),this.idTokenSubscription=new Bi(this),this.beforeStateQueue=new yi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ls,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ni(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ai.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Pe){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Os(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Kr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,A=await this.tryRedirectSignIn(e);n&&n!==i||!(null===A||void 0===A?void 0:A.user)||(r=A.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Pe){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Pe))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xs(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Pe){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xs(e)}catch(Pe){if((null===Pe||void 0===Pe?void 0:Pe.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(ms(this));const t=e?Fn(e):null;return t&&xs(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&xs(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ks(e,"GET","/v2/passwordPolicy",Qs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ks(e,"POST","/v2/accounts:revokeToken",Qs(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ni(e)||this._popupRedirectResolver;xs(t,this,"argument-error"),this.redirectPersistenceManager=await Ai.create(this,[ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const A=this._isInitialized?Promise.resolve():this._initializationPromise;if(xs(A,this,"internal-error"),A.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xs(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(cs.logLevel<=_n.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cs.warn("Auth (".concat(Wr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function bi(e){return Fn(e)}class Bi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Un(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return xs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ci={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ni(e){return Ci.loadJS(e)}function Ei(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ui{constructor(e){this.type="recaptcha-enterprise",this.auth=bi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Rs(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ms(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ps(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Rs(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ci.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Ni(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ji(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Ui(e);let i;try{i=await s.verify(n)}catch(a){i=await s.verify(n,!0)}const A=Object.assign({},t);return r?Object.assign(A,{captchaResp:i}):Object.assign(A,{captchaResponse:i}),Object.assign(A,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(A,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),A}async function Fi(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ji(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await ji(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Qi(e,t,n){const r=bi(e);xs(r._canInitEmulator,r,"emulator-config-failed"),xs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=ki(t),{host:A,port:a}=function(e){const t=ki(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ii(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ii(t)}}}(t),o=null===a?"":":".concat(a);r.config.emulator={url:"".concat(i,"//").concat(A).concat(o,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:A,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ki(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ii(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Si{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,t){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}async function Ti(e,t){return ks(e,"POST","/v1/accounts:signUp",t)}async function _i(e,t){return Ss(e,"POST","/v1/accounts:signInWithPassword",Qs(e,t))}class Di extends Si{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Di(e,t,"password")}static _fromEmailAndCode(e,t){return new Di(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Fi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",_i);case"emailLink":return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithEmailLink",Qs(e,t))}(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Fi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ti);case"emailLink":return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithEmailLink",Qs(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Li(e,t){return Ss(e,"POST","/v1/accounts:signInWithIdp",Qs(e,t))}class Hi extends Si{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ds("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=As(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Hi(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Li(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Li(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Li(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cn(t)}return e}}const Ri={USER_NOT_FOUND:"user-not-found"};class Pi extends Si{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Pi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Pi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithPhoneNumber",Qs(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ss(e,"POST","/v1/accounts:signInWithPhoneNumber",Qs(e,t));if(n.temporaryProof)throw Ls(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ss(e,"POST","/v1/accounts:signInWithPhoneNumber",Qs(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ri)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Pi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Mi{constructor(e){var t,n,r,s,i,A;const a=Nn(En(e)),o=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);xs(o&&l&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=a.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(A=a.tenantId)&&void 0!==A?A:null}static parseLink(e){const t=function(e){const t=Nn(En(e)).link,n=t?Nn(En(t)).deep_link_id:null,r=Nn(En(e)).deep_link_id;return(r?Nn(En(r)).link:null)||r||n||t||e}(e);try{return new Mi(t)}catch(n){return null}}}class Oi{constructor(){this.providerId=Oi.PROVIDER_ID}static credential(e,t){return Di._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Mi.parseLink(t);return xs(n,"argument-error"),Di._fromEmailAndCode(e,n.code,n.tenantId)}}Oi.PROVIDER_ID="password",Oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vi extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gi extends Vi{constructor(){super("facebook.com")}static credential(e){return Hi._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gi.credential(t.oauthAccessToken)}catch(n){return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gi.PROVIDER_ID="facebook.com";class Wi extends Vi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hi._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Wi.credential(n,r)}catch(s){return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com",Wi.PROVIDER_ID="google.com";class zi extends Vi{constructor(){super("github.com")}static credential(e){return Hi._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zi.credential(t.oauthAccessToken)}catch(n){return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com",zi.PROVIDER_ID="github.com";class qi extends Vi{constructor(){super("twitter.com")}static credential(e,t){return Hi._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return qi.credential(n,r)}catch(s){return null}}}async function Yi(e,t){return Ss(e,"POST","/v1/accounts:signUp",Qs(e,t))}qi.TWITTER_SIGN_IN_METHOD="twitter.com",qi.PROVIDER_ID="twitter.com";class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ei._fromIdTokenResponse(e,n,r),i=Ji(n);return new Xi({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ji(n);return new Xi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ji(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Zi extends yn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Zi.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Zi(e,t,n,r)}}function $i(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Zi._fromErrorAndOperation(e,n,t,r);throw n})}async function eA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await zs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xi._forOperation(e,"link",r)}async function tA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Kr(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const i=await zs(e,$i(r,s,t,e),n);xs(i.idToken,r,"internal-error");const A=Gs(i.idToken);xs(A,r,"internal-error");const{sub:a}=A;return xs(e.uid===a,r,"user-mismatch"),Xi._forOperation(e,s,i)}catch(Pe){throw(null===Pe||void 0===Pe?void 0:Pe.code)==="auth/".concat("user-not-found")&&ds(r,"user-mismatch"),Pe}}async function nA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Kr(e.app))return Promise.reject(ms(e));const r="signIn",s=await $i(e,r,t),i=await Xi._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function rA(e,t){return nA(bi(e),t)}async function sA(e){const t=bi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function iA(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=Fn(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},A=await zs(s,async function(e,t){return ks(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=A.displayName||null,s.photoURL=A.photoUrl||null;const a=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(A)}new WeakMap;const AA="__sak";class aA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(AA,"1"),this.storage.removeItem(AA),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class oA extends aA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);pi()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oA.type="LOCAL";const lA=oA;class cA extends aA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cA.type="SESSION";const uA=cA;class dA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new dA(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const A=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(A);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function hA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}dA.receivers=[];class fA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((A,a)=>{const o=hA("",20);r.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===o)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),A(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:o,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function mA(){return window}function pA(){return"undefined"!==typeof mA().WorkerGlobalScope&&"function"===typeof mA().importScripts}const gA="firebaseLocalStorageDb",xA="firebaseLocalStorage",yA="fbase_key";class wA{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vA(e,t){return e.transaction([xA],t?"readwrite":"readonly").objectStore(xA)}function bA(){const e=indexedDB.open(gA,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(xA,{keyPath:yA})}catch(Pe){n(Pe)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(xA)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(gA);return new wA(e).toPromise()}(),t(await bA()))})})}async function BA(e,t,n){const r=vA(e,!0).put({[yA]:t,value:n});return new wA(r).toPromise()}function CA(e,t){const n=vA(e,!0).delete(t);return new wA(n).toPromise()}class NA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await bA()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Pe){if(t++>3)throw Pe;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dA._getInstance(pA()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new fA(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bA();return await BA(e,AA,"1"),await CA(e,AA),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>BA(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=vA(e,!1).get(t),r=await new wA(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=vA(e,!1).getAll();return new wA(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}NA.type="LOCAL";const EA=NA;const UA=1e12;class jA{constructor(e){this.auth=e,this.counter=UA,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new FA(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||UA;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||UA;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||UA;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class FA{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;xs(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(Pe){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(Pe){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const QA=Ei("rcb"),kA=new Ns(3e4,6e4);class IA{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=mA().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return xs(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Hs(mA().grecaptcha)?Promise.resolve(mA().grecaptcha):new Promise((n,r)=>{const s=mA().setTimeout(()=>{r(hs(e,"network-request-failed"))},kA.get());mA()[QA]=()=>{mA().clearTimeout(s),delete mA()[QA];const i=mA().grecaptcha;if(!i||!Hs(i))return void r(hs(e,"internal-error"));const A=i.render;i.render=(e,t)=>{const n=A(e,t);return this.counter++,n},this.hostLanguage=t,n(i)};Ni("".concat(Ci.recaptchaV2Script,"?").concat(Cn({onload:QA,render:"explicit",hl:t}))).catch(()=>{clearTimeout(s),r(hs(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=mA().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class SA{async load(e){return new jA(e)}clearedOneInstance(){}}const TA="recaptcha",_A={theme:"light",type:"image"};class DA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},_A);this.parameters=n,this.type=TA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bi(e),this.isInvisible="invisible"===this.parameters.size,xs("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;xs(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new SA:new IA,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(Pe){return Promise.reject(Pe)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){xs(!this.parameters.sitekey,this.auth,"argument-error"),xs(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xs("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=mA()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){xs(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){xs(bs()&&!pA(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ks(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);xs(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return xs(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class LA{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Pi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function HA(e,t,n){var r;const s=await n.verify();try{let i;if(xs("string"===typeof s,e,"argument-error"),xs(n.type===TA,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){xs("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ks(e,"POST","/v2/accounts/mfaEnrollment:start",Qs(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{xs("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;xs(n,e,"missing-multi-factor-info");const A=await function(e,t){return ks(e,"POST","/v2/accounts/mfaSignIn:start",Qs(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return A.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ks(e,"POST","/v1/accounts:sendVerificationCode",Qs(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class RA{constructor(e){this.providerId=RA.PROVIDER_ID,this.auth=bi(e)}verifyPhoneNumber(e,t){return HA(this.auth,e,Fn(t))}static credential(e,t){return Pi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return RA.credentialFromTaggedObject(t)}static credentialFromError(e){return RA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Pi._fromTokenResponse(n,r):null}}function PA(e,t){return t?ni(t):(xs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}RA.PROVIDER_ID="phone",RA.PHONE_SIGN_IN_METHOD="phone";class MA extends Si{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Li(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OA(e){return nA(e.auth,new MA(e),e.bypassAuthState)}function KA(e){const{auth:t,user:n}=e;return xs(n,t,"internal-error"),tA(n,new MA(e),e.bypassAuthState)}async function VA(e){const{auth:t,user:n}=e;return xs(n,t,"internal-error"),eA(n,new MA(e),e.bypassAuthState)}class GA{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Pe){this.reject(Pe)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:A}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(A)(a))}catch(Pe){this.reject(Pe)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OA;case"linkViaPopup":case"linkViaRedirect":return VA;case"reauthViaPopup":case"reauthViaRedirect":return KA;default:ds(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const WA=new Ns(2e3,1e4);class zA extends GA{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,zA.currentPopupAction&&zA.currentPopupAction.cancel(),zA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xs(e,this.auth,"internal-error"),e}async onExecution(){ws(1===this.filter.length,"Popup operations only handle one event");const e=hA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(hs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(hs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zA.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hs(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,WA.get())};e()}}zA.currentPopupAction=null;const qA=new Map;class YA extends GA{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qA.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ZA(t),r=JA(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Pe){e=()=>Promise.reject(Pe)}qA.set(this.auth._key(),e)}return this.bypassAuthState||qA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function XA(e,t){qA.set(e._key(),t)}function JA(e){return ni(e._redirectPersistence)}function ZA(e){return ii("pendingRedirect",e.config.apiKey,e.name)}async function $A(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Kr(e.app))return Promise.reject(ms(e));const r=bi(e),s=PA(r,t),i=new YA(r,s,n),A=await i.execute();return A&&!n&&(delete A.user._redirectEventId,await r._persistUserIfCurrent(A.user),await r._setRedirectUser(null,t)),A}class ea{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return na(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!na(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(hs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ta(e))}saveEventToCache(e){this.cachedEventUids.add(ta(e)),this.lastProcessedEventTime=Date.now()}}function ta(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function na(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sa=/^https?/;async function ia(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ks(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Aa(r))return}catch(n){}ds(e,"unauthorized-domain")}function Aa(e){const t=vs(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!sa.test(n))return!1;if(ra.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const aa=new Ns(3e4,6e4);function oa(){const e=mA().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function la(e){return new Promise((t,n)=>{var r,s,i;function A(){oa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oa(),n(hs(e,"network-request-failed"))},timeout:aa.get()})}if(null===(s=null===(r=mA().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=mA().gapi)||void 0===i?void 0:i.load)){const t=Ei("iframefcb");return mA()[t]=()=>{gapi.load?A():n(hs(e,"network-request-failed"))},Ni("".concat(Ci.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}A()}}).catch(e=>{throw ca=null,e})}let ca=null;const ua=new Ns(5e3,15e3),da={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ha=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fa(e){const t=e.config;xs(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Es(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Wr},s=ha.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Cn(r).slice(1))}async function ma(e){const t=await function(e){return ca=ca||la(e),ca}(e),n=mA().gapi;return xs(n,e,"internal-error"),t.open({where:document.body,url:fa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:da,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=hs(e,"network-request-failed"),i=mA().setTimeout(()=>{r(s)},ua.get());function A(){mA().clearTimeout(i),n(t)}t.ping(A).then(A,()=>{r(s)})}))}const pa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ga{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Pe){}}}function xa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),A=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const o=Object.assign(Object.assign({},pa),{width:r.toString(),height:s.toString(),top:i,left:A}),l=mn().toLowerCase();n&&(a=ci(l)?"_blank":n),oi(l)&&(t=t||"http://localhost",o.scrollbars="yes");const c=Object.entries(o).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return mi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ga(null);const u=window.open(t||"",a,c);xs(u,e,"popup-blocked");try{u.focus()}catch(Pe){}return new ga(u)}const ya="__/auth/handler",wa="emulator/auth/handler",va=encodeURIComponent("fac");async function ba(e,t,n,r,s,i){xs(e.config.authDomain,e,"auth-domain-config-required"),xs(e.config.apiKey,e,"invalid-api-key");const A={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wr,eventId:s};if(t instanceof Ki){t.setDefaultLanguage(e.languageCode),A.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(A.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))A[e]=t}if(t instanceof Vi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(A.scopes=e.join(","))}e.tenantId&&(A.tid=e.tenantId);const a=A;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const o=await e._getAppCheckToken(),l=o?"#".concat(va,"=").concat(encodeURIComponent(o)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ya);return Es(t,wa)}(e),"?").concat(Cn(a).slice(1)).concat(l)}const Ba="webStorageSupport";const Ca=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uA,this._completeRedirectFn=$A,this._overrideRedirectResult=XA}async _openPopup(e,t,n,r){var s;ws(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return xa(e,await ba(e,t,n,vs(),r),hA())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mA().location.href=e}(await ba(e,t,n,vs(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ws(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ma(e),n=new ea(e);return t.register("authEvent",t=>{xs(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ba,{type:Ba},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ba];void 0!==s&&t(!!s),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ia(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gi()||li()||mi()}};var Na="@firebase/auth",Ea="1.7.9";class Ua{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ja=dn("authIdTokenMaxAge")||300;let Fa=null;var Qa;!function(e){Ci=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=hs("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Qa="Browser",Mr(new Qn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:A,authDomain:a}=r.options;xs(A&&!A.includes(":"),"invalid-api-key",{appName:r.name});const o={apiKey:A,authDomain:a,clientPlatform:Qa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xi(Qa)},l=new vi(r,s,i,o);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ni);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Mr(new Qn("auth-internal",e=>(e=>new Ua(e))(bi(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(Na,Ea,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Qa)),Yr(Na,Ea,"esm2017");var ka,Ia,Sa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ta={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],A=t+(i^n&(s^i))+r[0]+3614090360&4294967295;A=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(A<<7&4294967295|A>>>25))+((A=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|A>>>20))+((A=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|A>>>15))+((A=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|A>>>10))+((A=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|A>>>25))+((A=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|A>>>20))+((A=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|A>>>15))+((A=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|A>>>10))+((A=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|A>>>25))+((A=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|A>>>20))+((A=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|A>>>15))+((A=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|A>>>10))+((A=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|A>>>25))+((A=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|A>>>20))+((A=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|A>>>15))+((A=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|A>>>10))+((A=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|A>>>27))+((A=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|A>>>23))+((A=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|A>>>18))+((A=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|A>>>12))+((A=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|A>>>27))+((A=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|A>>>23))+((A=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|A>>>18))+((A=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|A>>>12))+((A=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|A>>>27))+((A=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|A>>>23))+((A=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|A>>>18))+((A=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|A>>>12))+((A=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|A>>>27))+((A=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|A>>>23))+((A=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|A>>>18))+((A=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|A>>>12))+((A=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|A>>>28))+((A=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|A>>>21))+((A=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|A>>>16))+((A=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|A>>>9))+((A=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|A>>>28))+((A=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|A>>>21))+((A=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|A>>>16))+((A=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|A>>>9))+((A=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|A>>>28))+((A=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|A>>>21))+((A=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|A>>>16))+((A=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|A>>>9))+((A=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|A>>>28))+((A=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|A>>>21))+((A=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|A>>>16))+((A=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|A>>>9))+((A=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|A>>>26))+((A=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|A>>>22))+((A=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|A>>>17))+((A=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|A>>>11))+((A=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|A>>>26))+((A=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|A>>>22))+((A=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|A>>>17))+((A=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|A>>>11))+((A=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|A>>>26))+((A=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|A>>>22))+((A=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|A>>>17))+((A=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|A>>>11))+((i=(t=n+((A=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|A>>>26))+((A=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|A>>>22))^((s=i+((A=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|A>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(A<<21&4294967295|A>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,A=0;A<t;){if(0==i)for(;A<=r;)n(this,e,A),A+=this.blockSize;if("string"===typeof e){for(;A<t;)if(s[i++]=e.charCodeAt(A++),i==this.blockSize){n(this,s),i=0;break}}else for(;A<t;)if(s[i++]=e[A++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function A(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(A(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var a=i(0),o=i(1),l=i(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(o)}function h(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function p(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(a,a);if(u(e))return t=p(d(e),t),new m(d(t.g),d(t.h));if(u(t))return t=p(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=o,r=t;0>=r.l(e);)n=g(n),r=g(r);var s=x(n,1),i=x(r,1);for(r=x(r,2),n=x(n,2);!c(r);){var l=i.add(r);0>=l.l(e)&&(s=s.add(n),i=l),r=x(r,1),n=x(n,1)}return t=h(e,s.j(t)),new m(s,t)}for(s=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(i=A(n)).j(t);u(l)||0<l.l(e);)l=(i=A(n-=r)).j(t);c(i)&&(i=o),s=s.add(i),e=h(e,l)}return new m(s,e)}function g(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],A=0;A<s;A++)i[A]=0<t?e.i(A+n)>>>t|e.i(A+n+1)<<32-t:e.i(A+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=A(Math.pow(e,6)),n=this,r="";;){var s=p(n,t).g,i=((0<(n=h(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=h(this,e))?-1:c(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var A=s+(65535&this.i(i))+(65535&e.i(i)),a=(A>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=a>>>16,A&=65535,a&=65535,n[i]=a<<16|A}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return A(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var o=this.i(s)>>>16,h=65535&this.i(s),m=e.i(i)>>>16,p=65535&e.i(i);n[2*s+2*i]+=h*p,f(n,2*s+2*i),n[2*s+2*i+1]+=o*p,f(n,2*s+2*i+1),n[2*s+2*i+1]+=h*m,f(n,2*s+2*i+1),n[2*s+2*i+2]+=o*m,f(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return p(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ia=Ta.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=A,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=A(Math.pow(n,8)),s=a,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+o),n);8>o?(o=A(Math.pow(n,o)),s=s.j(o).add(A(l))):s=(s=s.j(r)).add(A(l))}return s},ka=Ta.Integer=r}).apply("undefined"!==typeof Sa?Sa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var _a,Da,La,Ha,Ra,Pa,Ma,Oa,Ka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Va={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ka&&Ka];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var A=e[i];if(!(A in s))break e;s=s[A]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function A(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function o(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function h(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function p(e){return p[" "](e),e}p[" "]=function(){};var g=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function x(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function y(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function b(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function B(e){s.setTimeout(()=>{throw e},0)}function C(){var e=F;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let U,j=!1,F=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Q=()=>{const e=s.Promise.resolve(void 0);U=()=>{e.then(k)}};var k=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(We){B(We)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}j=!1};function I(){this.s=this.s,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(We){}return e}();function _(e,t){if(S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(g){e:{try{p(t.nodeName);var s=!0;break e}catch(Je){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_.aa.h.call(this)}}u(_,S);var D={2:"touch",3:"pen",4:"mouse"};_.prototype.h=function(){_.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),H=0;function R(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++H,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function M(e){this.src=e,this.g={},this.h=0}function O(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function K(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}M.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var A=K(e,t,r,s);return-1<A?(t=e[A],n||(t.fa=!1)):((t=new R(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),G={};function W(e,t,n,r,s){if(r&&r.once)return q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.K(t,n,A(r)?!!r.capture:!!r,s):z(e,t,n,!1,r,s)}function z(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=A(s)?!!s.capture:!!s,o=$(e);if(o||(e[V]=o=new M(e)),(n=o.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)T||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)q(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.L(t,n,A(r)?!!r.capture:!!r,s):z(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=A(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=K(i=e.g[t],n,r,s))&&(P(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=K(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])O(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(O(n,e),0==n.h&&(n.src=null,t[V]=null)):P(e)}}}function J(e){return e in G?G[e]:G[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new _(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function $(e){return(e=e[V])instanceof M?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){I.call(this),this.i=new M(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var s=t;v(t=new S(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var A=t.g=n[i];s=se(A,r,!0,t)&&s}if(s=se(A=t.g=e,r,!0,t)&&s,s=se(A,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(A=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var A=t[i];if(A&&!A.da&&A.capture==n){var a=A.listener,o=A.ha||A.src;A.fa&&O(e.i,A),s=!1!==a.call(o,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,Ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,I),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)P(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){I.call(this),this.h=e,this.g={}}u(oe,I);var le=[];function ce(e){x(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),ce(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=s.JSON.stringify,de=s.JSON.parse,he=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function pe(){}fe.prototype.h=null;var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xe(){S.call(this,"d")}function ye(){S.call(this,"c")}u(xe,S),u(ye,S);var we={},ve=null;function be(){return ve=ve||new ne}function Be(e){S.call(this,we.La,e)}function Ce(e){const t=be();re(t,new Be(t))}function Ne(e,t){S.call(this,we.STAT_EVENT,e),this.stat=t}function Ee(e){const t=be();re(t,new Ne(t,e))}function Ue(e,t){S.call(this,we.Ma,e),this.size=t}function je(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Fe(){this.g=!0}function Qe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var A=1;A<s.length;A++)s[A]=""}}}return ue(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",u(Be,S),we.STAT_EVENT="statevent",u(Ne,S),we.Ma="timingevent",u(Ue,S),Fe.prototype.xa=function(){this.g=!1},Fe.prototype.info=function(){};var ke,Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Te(){}function _e(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(Te,fe),Te.prototype.g=function(){return new XMLHttpRequest},Te.prototype.i=function(){return{}},ke=new Te;var Le={},He={};function Re(e,t,n){e.L=1,e.v=xt(ht(t)),e.m=n,e.P=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),ze(e),e.A=ht(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=yn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(le[0]=s.toString()),s=le);for(var i=0;i<s.length;i++){var A=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!A)break;t.g[A.key]=A}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var A="",a=i.split("&"),o=0;o<a.length;o++){var l=a[o].split("=");if(1<l.length){var c=l[0];l=l[1];var u=c.split("_");A=2<=u.length&&"type"==u[1]?A+(c+"=")+l+"&":A+(c+"=redacted&")}}else A=null;else A=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+A})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ge(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?He:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?He:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=je(l(e.ba,e),t)}function Ye(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ze(e){0==e.j.G||e.J||fn(e.j,e)}function $e(e){Ye(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function tt(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||At(n.h,e)))if(!e.K&&At(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Oe){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),nn(n)}cn(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=je(l(n.Za,n),6e3));if(1>=it(n.h)&&n.ca){try{n.ca()}catch(Oe){}n.ca=void 0}}else pn(n,11)}else if((e.K||n.g==e)&&hn(n),!f(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=l[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const c=l[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(at(i,i.h),i.h=null))}if(r.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var A=e;if((r=n).qa=xn(r,r.J?r.ia:null,r.W),A.K){ot(r.h,A);var a=A,o=r.L;o&&(a.I=o),a.B&&(Ye(a),ze(a)),r.g=A}else ln(r);0<n.i.length&&sn(n)}else"stop"!=l[0]&&"close"!=l[0]||pn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(n,7):tn(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Ce()}catch(Oe){}}_e.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Jt(e)?t.j():this.Y(e)},_e.prototype.Y=function(e){try{if(e==this.g)e:{const d=Jt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Zt(this.g)))){this.J||4!=d||7==t||Ce(),Ye(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Zt(this.g);e="";var i=r.length,A=4==Jt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){$e(this),Ze(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(A&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,A){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+A})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(o)){var c=o;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ee(12),$e(this),Ze(this);break e}Qe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tt(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ge(this,a),e==He){4==d&&(this.s=4,Ee(14),n=!1),Qe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ee(15),Qe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Qe(this.i,this.l,e,null),tt(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),un(u),u.M=!0,Ee(11))}}else Qe(this.i,this.l,a,"[Invalid Chunked Response]"),$e(this),Ze(this)}else Qe(this.i,this.l,a,null),tt(this,a);4==d&&$e(this),this.o&&!this.J&&(4==d?fn(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=Jt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=b(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),$e(this),Ze(this)}}}catch(et){}},_e.prototype.cancel=function(){this.J=!0,$e(this)},_e.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ce(),Ee(17)),$e(this),this.s=2,Ze(this)):qe(this,this.S-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function st(e){return!!e.h||!!e.g&&e.g.size>=e.j}function it(e){return e.h?1:e.g?e.g.size:0}function At(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,A=0;A<s;A++)t.call(void 0,r[A],n&&n[A],e)}rt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,mt(this,e.s),this.l=e.l;var t=e.i,n=new Ut;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pt(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,ft(this,t[1]||"",!0),this.o=yt(t[2]||""),this.g=yt(t[3]||"",!0),mt(this,t[4]),this.l=yt(t[5]||"",!0),pt(this,t[6]||"",!0),this.m=yt(t[7]||"")):(this.h=!1,this.i=new Ut(null,this.h))}function ht(e){return new dt(e)}function ft(e,t,n){e.j=n?yt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function pt(e,t,n){t instanceof Ut?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ft(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=wt(t,Nt)),e.i=new Ut(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function xt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(wt(t,bt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(wt(t,bt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wt(n,"/"==n.charAt(0)?Ct:Bt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",wt(n,Et)),e.join("")};var bt=/[#\/\?@]/g,Bt=/[#\?:]/g,Ct=/[#\?]/g,Nt=/[#\?@]/g,Et=/#/g;function Ut(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ft(e,t){jt(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qt(e,t){return jt(e),t=It(e,t),e.g.has(t)}function kt(e,t,n){Ft(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Je){}}function Tt(){this.g=new he}function _t(e,t,n){const r=n||"";try{ct(e,function(e,n){let s=e;A(e)&&(s=ue(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Pe){throw t.push(r+"type="+encodeURIComponent("_badmap")),Pe}}function Dt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Lt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ht(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return x(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function Kt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ut.prototype).add=function(e,t){jt(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){jt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){jt(this);let t=[];if("string"===typeof e)Qt(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return jt(this),this.i=null,Qt(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),A=this.V(r);for(r=0;r<A.length;r++){var s=i;""!==A[r]&&(s+="="+encodeURIComponent(String(A[r]))),e.push(s)}}return this.i=e.join("&")},u(Dt,fe),Dt.prototype.g=function(){return new Lt(this.l,this.j)},Dt.prototype.i=function(e){return function(){return e}}({}),u(Lt,ne),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ht(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Pt(this),3==this.readyState&&Ht(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Kt,ne);var Vt=/^https?$/i,Gt=["POST","PUT"];function Wt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Yt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Jt(e)||2!=e.Z()))if(e.u&&4==Jt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Jt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var A=String(e.D).match(ut)[1]||null;!A&&s.self&&s.self.location&&(A=s.self.location.protocol.slice(0,-1)),i=!Vt.test(A?A.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Jt(e)?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{Yt(e)}}}function Yt(e,t){if(e.g){Xt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Pe){}}}function Xt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Jt(e){return e.g?e.g.readyState:0}function Zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function en(e){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$t("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$t("baseRetryDelayMs",5e3,e),this.cb=$t("retryDelaySeedMs",1e4,e),this.Wa=$t("forwardChannelMaxRetries",2,e),this.wa=$t("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new rt(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tn(e){if(rn(e),3==e.G){var t=e.U++,n=ht(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new _e(e,e.j,t)).L=2,t.v=xt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(Xe){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=yn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}gn(e)}function nn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function rn(e){nn(e),e.u&&(s.clearTimeout(e.u),e.u=null),hn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function sn(e){if(!st(e.h)&&!e.s){e.s=!0;var t=e.Ga;U||Q(),j||(U(),j=!0),F.add(t,e),e.B=0}}function An(e,t){var n;n=t?t.l:e.U++;const r=ht(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),an(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new _e(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=on(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),Re(n,r,t)}function an(e,t){e.H&&x(e.H,function(e,n){gt(t,n,e)}),e.l&&ct({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let A=0;A<n;A++){let n=s[A].g;const a=s[A].map;if(n-=t,0>n)t=Math.max(0,s[A].g-100),i=!1;else try{_t(a,e,"req"+n+"_")}catch(et){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function ln(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;U||Q(),j||(U(),j=!0),F.add(t,e),e.v=0}}function cn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=je(l(e.Fa,e),mn(e,e.v)),e.v++,!0)}function un(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function dn(e){e.g=new _e(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),an(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(ht(t)),n.m=null,n.P=!0,Me(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!At(e.h,t))return;n=t.D,ot(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=be(),new Ue(r,n)),sn(e)}else ln(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(it(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=je(l(e.Ga,e,t),mn(e,e.B)),e.B++,!0))}(e,t)||2==r&&cn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function mn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),xt(r),t?function(e,t){const n=new Fe;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Fe;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),gn(e),rn(e)}function gn(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(h(e.ka,t),h(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function xn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var A=new dt(null);r&&ft(A,r),t&&(A.g=t),i&&mt(A,i),n&&(A.l=n),r=A}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),an(e,r),r}function yn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Dt({eb:n})):new Kt(e.pa)).Ha(e.J),t}function wn(){}function vn(){}function bn(e,t){ne.call(this),this.g=new en(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nn(this)}function Bn(e){xe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){ye.call(this),this.status=1}function Nn(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?me(this.o):me(ke),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Je){return void Wt(this,Je)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Gt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,A]of n)this.g.setRequestHeader(s,A);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Je){Wt(this,Je)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Yt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch(Ke){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ke){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=en.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=xn(this,null,this.W),sn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new _e(this,this.j,e);let i=this.o;if(this.S&&(i?(i=y(i),v(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,s,t),gt(n=ht(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),an(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Mt(i)))+"&"+t:this.m&&Ot(n,this.m,i)),at(this.h,s),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),s.T=!0,Re(s,n,null)):Re(s,n,t),this.G=2}}else 3==this.G&&(e?An(this,e):0==this.i.length||st(this.h)||An(this))},e.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=je(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),nn(this),dn(this))},e.Za=function(){null!=this.C&&(this.C=null,nn(this),cn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},vn.prototype.g=function(e,t){return new bn(e,t)},u(bn,ne),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){tn(this.g)},bn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.G&&sn(t)},bn.prototype.N=function(){this.g.l=null,delete this.j,tn(this.g),delete this.g,bn.aa.N.call(this)},u(Bn,xe),u(Cn,ye),u(Nn,wn),Nn.prototype.ua=function(){re(this.g,"a")},Nn.prototype.ta=function(e){re(this.g,new Bn(e))},Nn.prototype.sa=function(e){re(this.g,new Cn)},Nn.prototype.ra=function(){re(this.g,"b")},vn.prototype.createWebChannel=vn.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,Oa=Va.createWebChannelTransport=function(){return new vn},Ma=Va.getStatEventTarget=function(){return be()},Pa=Va.Event=we,Ra=Va.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Ha=Va.ErrorCode=Ie,Se.COMPLETE="complete",La=Va.EventType=Se,pe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Da=Va.WebChannel=pe,Va.FetchXmlHttpFactory=Dt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,_a=Va.XhrIo=Kt}).apply("undefined"!==typeof Ka?Ka:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ga="@firebase/firestore";class Wa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wa.UNAUTHENTICATED=new Wa(null),Wa.GOOGLE_CREDENTIALS=new Wa("google-credentials-uid"),Wa.FIRST_PARTY=new Wa("first-party-uid"),Wa.MOCK_USER=new Wa("mock-user");let za="10.14.0";const qa=new Pn("@firebase/firestore");function Ya(){return qa.logLevel}function Xa(e){if(qa.logLevel<=_n.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map($a);qa.debug("Firestore (".concat(za,"): ").concat(e),...s)}}function Ja(e){if(qa.logLevel<=_n.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map($a);qa.error("Firestore (".concat(za,"): ").concat(e),...s)}}function Za(e){if(qa.logLevel<=_n.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map($a);qa.warn("Firestore (".concat(za,"): ").concat(e),...s)}}function $a(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Me){return e}}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(za,") INTERNAL ASSERTION FAILED: ")+e;throw Ja(t),new Error(t)}function to(e,t){e||eo()}function no(e,t){return e}const ro={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class so extends yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class io{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ao{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ao{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wa.UNAUTHENTICATED))}shutdown(){}}class oo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lo{constructor(e){this.t=e,this.currentUser=Wa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){to(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new io;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new io,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},A=e=>{Xa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>A(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?A(e):(Xa("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new io)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Xa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(to("string"==typeof t.accessToken),new Ao(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return to(null===e||"string"==typeof e),new Wa(e)}}class co{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Wa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new co(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Wa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ho{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){to(void 0===this.o);const n=e=>{null!=e.error&&Xa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Xa("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Xa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Xa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(to("string"==typeof e.token),this.R=e.token,new ho(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class po{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=mo(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function go(e,t){return e<t?-1:e>t?1:0}function xo(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class yo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new so(ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new so(ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new so(ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new so(ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yo.fromMillis(Date.now())}static fromDate(e){return yo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?go(this.nanoseconds,e.nanoseconds):go(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wo(e)}static min(){return new wo(new yo(0,0))}static max(){return new wo(new yo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class vo{constructor(e,t,n){void 0===t?t=0:t>e.length&&eo(),void 0===n?n=e.length-t:n>e.length-t&&eo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===vo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vo?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bo extends vo{construct(e,t,n){return new bo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new so(ro.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new bo(e)}static emptyPath(){return new bo([])}}const Bo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Co extends vo{construct(e,t,n){return new Co(e,t,n)}static isValidIdentifier(e){return Bo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Co.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Co(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new so(ro.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new so(ro.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new so(ro.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new so(ro.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Co(t)}static emptyPath(){return new Co([])}}class No{constructor(e){this.path=e}static fromPath(e){return new No(bo.fromString(e))}static fromName(e){return new No(bo.fromString(e).popFirst(5))}static empty(){return new No(bo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new No(new bo(e.slice()))}}class Eo{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Eo.UNKNOWN_ID=-1;function Uo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=wo.fromTimestamp(1e9===r?new yo(n+1,0):new yo(n,r));return new Fo(s,No.empty(),t)}function jo(e){return new Fo(e.readTime,e.key,-1)}class Fo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Fo(wo.min(),No.empty(),-1)}static max(){return new Fo(wo.max(),No.empty(),-1)}}function Qo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=No.comparator(e.documentKey,t.documentKey),0!==n?n:go(e.largestBatchId,t.largestBatchId))}const ko="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Io{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function So(e){if(e.code!==ro.FAILED_PRECONDITION||e.message!==ko)throw e;Xa("LocalStore","Unexpectedly lost primary lease")}class To{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&eo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new To((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof To?t:To.resolve(t)}catch(e){return To.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):To.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):To.reject(t)}static resolve(e){return new To((t,n)=>{t(e)})}static reject(e){return new To((t,n)=>{n(e)})}static waitFor(e){return new To((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=To.resolve(!1);for(const n of e)t=t.next(e=>e?To.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new To((n,r)=>{const s=e.length,i=new Array(s);let A=0;for(let a=0;a<s;a++){const o=a;t(e[o]).next(e=>{i[o]=e,++A,A===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new To((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function _o(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Do(e){return"IndexedDbTransactionError"===e.name}class Lo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ho(e){return null==e}function Ro(e){return 0===e&&1/e==-1/0}function Po(e){return"number"==typeof e&&Number.isInteger(e)&&!Ro(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Lo.oe=-1;const Mo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ko=Oo,Vo=[...Ko,"indexConfiguration","indexState","indexEntries"];function Go(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class qo{constructor(e,t){this.comparator=e,this.root=t||Xo.EMPTY}insert(e,t){return new qo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new qo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yo(this.root,e,this.comparator,!0)}}class Yo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xo{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Xo.RED,this.left=null!=r?r:Xo.EMPTY,this.right=null!=s?s:Xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Xo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw eo();if(this.right.isRed())throw eo();const e=this.left.check();if(e!==this.right.check())throw eo();return e+(this.isRed()?0:1)}}Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw eo()}get value(){throw eo()}get color(){throw eo()}get left(){throw eo()}get right(){throw eo()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Xo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jo{constructor(e){this.comparator=e,this.data=new qo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zo(this.data.getIterator())}getIteratorFrom(e){return new Zo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Jo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jo(this.comparator);return t.data=e,t}}class Zo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $o{constructor(e){this.fields=e,e.sort(Co.comparator)}static empty(){return new $o([])}unionWith(e){let t=new Jo(Co.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $o(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class el extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new el("Invalid base64 string: "+e):e}}(e);return new tl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new tl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return go(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tl.EMPTY_BYTE_STRING=new tl("");const nl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rl(e){if(to(!!e),"string"==typeof e){let t=0;const n=nl.exec(e);if(to(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sl(e.seconds),nanos:sl(e.nanos)}}function sl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function il(e){return"string"==typeof e?tl.fromBase64String(e):tl.fromUint8Array(e)}function Al(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function al(e){const t=e.mapValue.fields.__previous_value__;return Al(t)?al(t):t}function ol(e){const t=rl(e.mapValue.fields.__local_write_time__.timestampValue);return new yo(t.seconds,t.nanos)}class ll{constructor(e,t,n,r,s,i,A,a,o){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=A,this.longPollingOptions=a,this.useFetchStreams=o}}class cl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}const ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function dl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Al(e)?4:jl(e)?9007199254740991:El(e)?10:11:eo()}function hl(e,t){if(e===t)return!0;const n=dl(e);if(n!==dl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ol(e).isEqual(ol(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=rl(e.timestampValue),r=rl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return il(e.bytesValue).isEqual(il(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sl(e.geoPointValue.latitude)===sl(t.geoPointValue.latitude)&&sl(e.geoPointValue.longitude)===sl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sl(e.integerValue)===sl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=sl(e.doubleValue),r=sl(t.doubleValue);return n===r?Ro(n)===Ro(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xo(e.arrayValue.values||[],t.arrayValue.values||[],hl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Go(n)!==Go(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!hl(n[s],r[s])))return!1;return!0}(e,t);default:return eo()}}function fl(e,t){return void 0!==(e.values||[]).find(e=>hl(e,t))}function ml(e,t){if(e===t)return 0;const n=dl(e),r=dl(t);if(n!==r)return go(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return go(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=sl(e.integerValue||e.doubleValue),r=sl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return pl(e.timestampValue,t.timestampValue);case 4:return pl(ol(e),ol(t));case 5:return go(e.stringValue,t.stringValue);case 6:return function(e,t){const n=il(e),r=il(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=go(n[s],r[s]);if(0!==e)return e}return go(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=go(sl(e.latitude),sl(t.latitude));return 0!==n?n:go(sl(e.longitude),sl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return gl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const A=e.fields||{},a=t.fields||{},o=null===(n=A.value)||void 0===n?void 0:n.arrayValue,l=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=go((null===(s=null==o?void 0:o.values)||void 0===s?void 0:s.length)||0,(null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0);return 0!==c?c:gl(o,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ul.mapValue&&t===ul.mapValue)return 0;if(e===ul.mapValue)return 1;if(t===ul.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let A=0;A<r.length&&A<i.length;++A){const e=go(r[A],i[A]);if(0!==e)return e;const t=ml(n[r[A]],s[i[A]]);if(0!==t)return t}return go(r.length,i.length)}(e.mapValue,t.mapValue);default:throw eo()}}function pl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return go(e,t);const n=rl(e),r=rl(t),s=go(n.seconds,r.seconds);return 0!==s?s:go(n.nanos,r.nanos)}function gl(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ml(n[s],r[s]);if(e)return e}return go(n.length,r.length)}function xl(e){return yl(e)}function yl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=rl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return il(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return No.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=yl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(yl(e.fields[s]));return n+"}"}(e.mapValue):eo()}function wl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vl(e){return!!e&&"integerValue"in e}function bl(e){return!!e&&"arrayValue"in e}function Bl(e){return!!e&&"nullValue"in e}function Cl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nl(e){return!!e&&"mapValue"in e}function El(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ul(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Wo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ul(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ul(e.arrayValue.values[n]);return t}return Object.assign({},e)}function jl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Fl{constructor(e){this.value=e}static empty(){return new Fl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Nl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(t)}setAll(e){let t=Co.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Ul(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Nl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Nl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Wo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Fl(Ul(this.value))}}function Ql(e){const t=[];return Wo(e.fields,(e,n)=>{const r=new Co([e]);if(Nl(n)){const e=Ql(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new $o(t)}class kl{constructor(e,t,n,r,s,i,A){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=A}static newInvalidDocument(e){return new kl(e,0,wo.min(),wo.min(),wo.min(),Fl.empty(),0)}static newFoundDocument(e,t,n,r){return new kl(e,1,t,wo.min(),n,r,0)}static newNoDocument(e,t){return new kl(e,2,t,wo.min(),wo.min(),Fl.empty(),0)}static newUnknownDocument(e,t){return new kl(e,3,t,wo.min(),wo.min(),Fl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Il{constructor(e,t){this.position=e,this.inclusive=t}}function Sl(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],A=e.position[s];if(r=i.field.isKeyField()?No.comparator(No.fromName(A.referenceValue),n.key):ml(A,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Tl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hl(e.position[n],t.position[n]))return!1;return!0}class _l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Dl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ll{}class Hl extends Ll{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Wl(e,t,n):"array-contains"===t?new Xl(e,n):"in"===t?new Jl(e,n):"not-in"===t?new Zl(e,n):"array-contains-any"===t?new $l(e,n):new Hl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new zl(e,n):new ql(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ml(t,this.value)):null!==t&&dl(this.value)===dl(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return eo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rl extends Ll{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Rl(e,t)}matches(e){return Pl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Pl(e){return"and"===e.op}function Ml(e){return Ol(e)&&Pl(e)}function Ol(e){for(const t of e.filters)if(t instanceof Rl)return!1;return!0}function Kl(e){if(e instanceof Hl)return e.field.canonicalString()+e.op.toString()+xl(e.value);if(Ml(e))return e.filters.map(e=>Kl(e)).join(",");{const t=e.filters.map(e=>Kl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Vl(e,t){return e instanceof Hl?function(e,t){return t instanceof Hl&&e.op===t.op&&e.field.isEqual(t.field)&&hl(e.value,t.value)}(e,t):e instanceof Rl?function(e,t){return t instanceof Rl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Vl(n,t.filters[r]),!0)}(e,t):void eo()}function Gl(e){return e instanceof Hl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xl(e.value))}(e):e instanceof Rl?function(e){return e.op.toString()+" {"+e.getFilters().map(Gl).join(" ,")+"}"}(e):"Filter"}class Wl extends Hl{constructor(e,t,n){super(e,t,n),this.key=No.fromName(n.referenceValue)}matches(e){const t=No.comparator(e.key,this.key);return this.matchesComparison(t)}}class zl extends Hl{constructor(e,t){super(e,"in",t),this.keys=Yl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ql extends Hl{constructor(e,t){super(e,"not-in",t),this.keys=Yl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>No.fromName(e.referenceValue))}class Xl extends Hl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bl(t)&&fl(t.arrayValue,this.value)}}class Jl extends Hl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fl(this.value.arrayValue,t)}}class Zl extends Hl{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fl(this.value.arrayValue,t)}}class $l extends Hl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>fl(this.value.arrayValue,e))}}class ec{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=A,this.ue=null}}function tc(e){return new ec(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function nc(e){const t=no(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Kl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ho(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>xl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>xl(e)).join(",")),t.ue=e}return t.ue}function rc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Dl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tl(e.startAt,t.startAt)&&Tl(e.endAt,t.endAt)}function sc(e){return No.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ic{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=A,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ac(e,t,n,r,s,i,A,a){return new ic(e,t,n,r,s,i,A,a)}function ac(e){return new ic(e)}function oc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lc(e){return null!==e.collectionGroup}function cc(e){const t=no(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Jo(Co.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new _l(r,n))}),e.has(Co.keyField().canonicalString())||t.ce.push(new _l(Co.keyField(),n))}return t.ce}function uc(e){const t=no(e);return t.le||(t.le=dc(t,cc(e))),t.le}function dc(e,t){if("F"===e.limitType)return tc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new _l(e.field,t)});const n=e.endAt?new Il(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Il(e.startAt.position,e.startAt.inclusive):null;return tc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function hc(e,t){const n=e.filters.concat([t]);return new ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fc(e,t,n){return new ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mc(e,t){return rc(uc(e),uc(t))&&e.limitType===t.limitType}function pc(e){return"".concat(nc(uc(e)),"|lt:").concat(e.limitType)}function gc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Gl(e)).join(", "),"]")),Ho(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>xl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>xl(e)).join(",")),"Target(".concat(t,")")}(uc(e)),"; limitType=").concat(e.limitType,")")}function xc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):No.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of cc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Sl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Sl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cc(e),t))}(e,t)}function yc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wc(e){return(t,n)=>{let r=!1;for(const s of cc(e)){const e=vc(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function vc(e,t,n){const r=e.field.isKeyField()?No.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ml(r,s):eo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return eo()}}class bc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return zo(this.inner)}size(){return this.innerSize}}const Bc=new qo(No.comparator);function Cc(){return Bc}const Nc=new qo(No.comparator);function Ec(){let e=Nc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Uc(e){let t=Nc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function jc(){return Qc()}function Fc(){return Qc()}function Qc(){return new bc(e=>e.toString(),(e,t)=>e.isEqual(t))}const kc=new qo(No.comparator),Ic=new Jo(No.comparator);function Sc(){let e=Ic;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Tc=new Jo(go);function _c(){return Tc}function Dc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ro(t)?"-0":t}}function Lc(e){return{integerValue:""+e}}function Hc(e,t){return Po(t)?Lc(t):Dc(e,t)}class Rc{constructor(){this._=void 0}}function Pc(e,t,n){return e instanceof Kc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Al(t)&&(t=al(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Vc?Gc(e,t):e instanceof Wc?zc(e,t):function(e,t){const n=Oc(e,t),r=Yc(n)+Yc(e.Pe);return vl(n)&&vl(e.Pe)?Lc(r):Dc(e.serializer,r)}(e,t)}function Mc(e,t,n){return e instanceof Vc?Gc(e,t):e instanceof Wc?zc(e,t):n}function Oc(e,t){return e instanceof qc?function(e){return vl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Kc extends Rc{}class Vc extends Rc{constructor(e){super(),this.elements=e}}function Gc(e,t){const n=Xc(t);for(const r of e.elements)n.some(e=>hl(e,r))||n.push(r);return{arrayValue:{values:n}}}class Wc extends Rc{constructor(e){super(),this.elements=e}}function zc(e,t){let n=Xc(t);for(const r of e.elements)n=n.filter(e=>!hl(e,r));return{arrayValue:{values:n}}}class qc extends Rc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Yc(e){return sl(e.integerValue||e.doubleValue)}function Xc(e){return bl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Jc{constructor(e,t){this.field=e,this.transform=t}}class Zc{constructor(e,t){this.version=e,this.transformResults=t}}class $c{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $c}static exists(e){return new $c(void 0,e)}static updateTime(e){return new $c(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class tu{}function nu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new du(e.key,$c.none()):new au(e.key,e.data,$c.none());{const n=e.data,r=Fl.empty();let s=new Jo(Co.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ou(e.key,r,new $o(s.toArray()),$c.none())}}function ru(e,t,n){e instanceof au?function(e,t,n){const r=e.value.clone(),s=cu(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ou?function(e,t,n){if(!eu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cu(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(lu(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function su(e,t,n,r){return e instanceof au?function(e,t,n,r){if(!eu(e.precondition,t))return n;const s=e.value.clone(),i=uu(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ou?function(e,t,n,r){if(!eu(e.precondition,t))return n;const s=uu(e.fieldTransforms,r,t),i=t.data;return i.setAll(lu(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return eu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function iu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Oc(r.transform,e||null);null!=s&&(null===n&&(n=Fl.empty()),n.set(r.field,s))}return n||null}function Au(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xo(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Vc&&t instanceof Vc||e instanceof Wc&&t instanceof Wc?xo(e.elements,t.elements,hl):e instanceof qc&&t instanceof qc?hl(e.Pe,t.Pe):e instanceof Kc&&t instanceof Kc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class au extends tu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ou extends tu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lu(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function cu(e,t,n){const r=new Map;to(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],A=i.transform,a=t.data.field(i.field);r.set(i.field,Mc(A,a,n[s]))}return r}function uu(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Pc(e,i,t))}return r}class du extends tu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hu extends tu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ru(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=su(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=su(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Fc();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let A=this.applyToLocalView(i,s.mutatedFields);A=t.has(r.key)?null:A;const a=nu(i,A);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(wo.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Sc())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,(e,t)=>Au(e,t))&&xo(this.baseMutations,e.baseMutations,(e,t)=>Au(e,t))}}class mu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){to(e.mutations.length===n.length);let r=kc;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new mu(e,t,n,r)}}class pu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class gu{constructor(e,t){this.count=e,this.unchangedNames=t}}var xu,yu;function wu(e){switch(e){default:return eo();case ro.CANCELLED:case ro.UNKNOWN:case ro.DEADLINE_EXCEEDED:case ro.RESOURCE_EXHAUSTED:case ro.INTERNAL:case ro.UNAVAILABLE:case ro.UNAUTHENTICATED:return!1;case ro.INVALID_ARGUMENT:case ro.NOT_FOUND:case ro.ALREADY_EXISTS:case ro.PERMISSION_DENIED:case ro.FAILED_PRECONDITION:case ro.ABORTED:case ro.OUT_OF_RANGE:case ro.UNIMPLEMENTED:case ro.DATA_LOSS:return!0}}function vu(e){if(void 0===e)return Ja("GRPC error has no .code"),ro.UNKNOWN;switch(e){case xu.OK:return ro.OK;case xu.CANCELLED:return ro.CANCELLED;case xu.UNKNOWN:return ro.UNKNOWN;case xu.DEADLINE_EXCEEDED:return ro.DEADLINE_EXCEEDED;case xu.RESOURCE_EXHAUSTED:return ro.RESOURCE_EXHAUSTED;case xu.INTERNAL:return ro.INTERNAL;case xu.UNAVAILABLE:return ro.UNAVAILABLE;case xu.UNAUTHENTICATED:return ro.UNAUTHENTICATED;case xu.INVALID_ARGUMENT:return ro.INVALID_ARGUMENT;case xu.NOT_FOUND:return ro.NOT_FOUND;case xu.ALREADY_EXISTS:return ro.ALREADY_EXISTS;case xu.PERMISSION_DENIED:return ro.PERMISSION_DENIED;case xu.FAILED_PRECONDITION:return ro.FAILED_PRECONDITION;case xu.ABORTED:return ro.ABORTED;case xu.OUT_OF_RANGE:return ro.OUT_OF_RANGE;case xu.UNIMPLEMENTED:return ro.UNIMPLEMENTED;case xu.DATA_LOSS:return ro.DATA_LOSS;default:return eo()}}(yu=xu||(xu={}))[yu.OK=0]="OK",yu[yu.CANCELLED=1]="CANCELLED",yu[yu.UNKNOWN=2]="UNKNOWN",yu[yu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yu[yu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yu[yu.NOT_FOUND=5]="NOT_FOUND",yu[yu.ALREADY_EXISTS=6]="ALREADY_EXISTS",yu[yu.PERMISSION_DENIED=7]="PERMISSION_DENIED",yu[yu.UNAUTHENTICATED=16]="UNAUTHENTICATED",yu[yu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yu[yu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yu[yu.ABORTED=10]="ABORTED",yu[yu.OUT_OF_RANGE=11]="OUT_OF_RANGE",yu[yu.UNIMPLEMENTED=12]="UNIMPLEMENTED",yu[yu.INTERNAL=13]="INTERNAL",yu[yu.UNAVAILABLE=14]="UNAVAILABLE",yu[yu.DATA_LOSS=15]="DATA_LOSS";let bu=null;function Bu(){return new TextEncoder}const Cu=new ka([4294967295,4294967295],0);function Nu(e){const t=Bu().encode(e),n=new Ia;return n.update(t),new Uint8Array(n.digest())}function Eu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new ka([n,r],0),new ka([s,i],0)]}class Uu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ju("Invalid padding: ".concat(t));if(n<0)throw new ju("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ju("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ju("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=ka.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ka.fromNumber(n)));return 1===r.compare(Cu)&&(r=new ka([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Nu(e),[n,r]=Eu(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Uu(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=Nu(e),[n,r]=Eu(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fu(wo.min(),r,new qo(go),Cc(),Sc())}}class Qu{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Qu(n,t,Sc(),Sc(),Sc())}}class ku{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Iu{constructor(e,t){this.targetId=e,this.me=t}}class Su{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Tu{constructor(){this.fe=0,this.ge=Lu(),this.pe=tl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Sc(),t=Sc(),n=Sc();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:eo()}}),new Qu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Lu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,to(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _u{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cc(),this.qe=Du(),this.Qe=new qo(go)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:eo()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(sc(s))if(0===n){const e=new No(s.path);this.Ue(t,e,kl.newNoDocument(e,wo.min()))}else to(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==bu||bu.et(function(e,t,n,r,s){var i,A,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null==d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(a=null===(A=null==d?void 0:d.bits)||void 0===A?void 0:A.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(c=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,A;try{i=il(n).toUint8Array()}catch(e){if(e instanceof el)return Za("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{A=new Uu(i,r,s)}catch(e){return Za(e instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===A.Ie?null:A}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&sc(s.target)){const t=new No(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,kl.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Sc();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Fu(e,t,this.Qe,this.ke,n);return this.ke=Cc(),this.qe=Du(),this.Qe=new qo(go),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Tu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Jo(go),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Xa("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Du(){return new qo(No.comparator)}function Lu(){return new qo(No.comparator)}const Hu={asc:"ASCENDING",desc:"DESCENDING"},Ru={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pu={and:"AND",or:"OR"};class Mu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ou(e,t){return e.useProto3Json||Ho(t)?t:{value:t}}function Ku(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gu(e,t){return Ku(e,t.toTimestamp())}function Wu(e){return to(!!e),wo.fromTimestamp(function(e){const t=rl(e);return new yo(t.seconds,t.nanos)}(e))}function zu(e,t){return qu(e,t).canonicalString()}function qu(e,t){const n=function(e){return new bo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Yu(e){const t=bo.fromString(e);return to(md(t)),t}function Xu(e,t){return zu(e.databaseId,t.path)}function Ju(e,t){const n=Yu(t);if(n.get(1)!==e.databaseId.projectId)throw new so(ro.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new so(ro.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new No(td(n))}function Zu(e,t){return zu(e.databaseId,t)}function $u(e){const t=Yu(e);return 4===t.length?bo.emptyPath():td(t)}function ed(e){return new bo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function td(e){return to(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nd(e,t,n){return{name:Xu(e,t),fields:n.value.mapValue.fields}}function rd(e,t){let n;if(t instanceof au)n={update:nd(e,t.key,t.value)};else if(t instanceof du)n={delete:Xu(e,t.key)};else if(t instanceof ou)n={update:nd(e,t.key,t.data),updateMask:fd(t.fieldMask)};else{if(!(t instanceof hu))return eo();n={verify:Xu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Kc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw eo()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Gu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:eo()}(e,t.precondition)),n}function sd(e,t){return{documents:[Zu(e,t.path)]}}function id(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zu(e,s);const i=function(e){if(0!==e.length)return hd(Rl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const A=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ud(e.field),direction:od(e.dir)}}(e))}(t.orderBy);A&&(n.structuredQuery.orderBy=A);const a=Ou(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Ad(e){let t=$u(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){to(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=ad(e);return t instanceof Rl&&Ml(t)?t.getFilters():[t]}(n.where));let A=[];n.orderBy&&(A=function(e){return e.map(e=>function(e){return new _l(dd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ho(t)?null:t}(n.limit));let o=null;n.startAt&&(o=function(e){const t=!!e.before,n=e.values||[];return new Il(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Il(n,t)}(n.endAt)),Ac(t,s,A,i,a,"F",o,l)}function ad(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dd(e.unaryFilter.field);return Hl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dd(e.unaryFilter.field);return Hl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dd(e.unaryFilter.field);return Hl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dd(e.unaryFilter.field);return Hl.create(s,"!=",{nullValue:"NULL_VALUE"});default:return eo()}}(e):void 0!==e.fieldFilter?function(e){return Hl.create(dd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return eo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Rl.create(e.compositeFilter.filters.map(e=>ad(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return eo()}}(e.compositeFilter.op))}(e):eo()}function od(e){return Hu[e]}function ld(e){return Ru[e]}function cd(e){return Pu[e]}function ud(e){return{fieldPath:e.canonicalString()}}function dd(e){return Co.fromServerFormat(e.fieldPath)}function hd(e){return e instanceof Hl?function(e){if("=="===e.op){if(Cl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NAN"}};if(Bl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NOT_NAN"}};if(Bl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ud(e.field),op:ld(e.op),value:e.value}}}(e):e instanceof Rl?function(e){const t=e.getFilters().map(e=>hd(e));return 1===t.length?t[0]:{compositeFilter:{op:cd(e.op),filters:t}}}(e):eo()}function fd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function md(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class pd{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wo.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wo.min(),A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:tl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=A,this.expectedCount=a}withSequenceNumber(e){return new pd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gd{constructor(e){this.ct=e}}function xd(e){const t=Ad({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fc(t,t.limit,"L"):t}class yd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(sl(e.integerValue));else if("doubleValue"in e){const n=sl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ro(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=rl(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(il(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?jl(e)?this.dt(t,Number.MAX_SAFE_INTEGER):El(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):eo()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",A=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(sl(A)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),No.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}yd.vt=new yd;class wd{constructor(){this.un=new vd}addToCollectionParentIndex(e,t){return this.un.add(t),To.resolve()}getCollectionParents(e,t){return To.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return To.resolve()}deleteFieldIndex(e,t){return To.resolve()}deleteAllFieldIndexes(e){return To.resolve()}createTargetIndexes(e,t){return To.resolve()}getDocumentsMatchingTarget(e,t){return To.resolve(null)}getIndexType(e,t){return To.resolve(0)}getFieldIndexes(e,t){return To.resolve([])}getNextCollectionGroupToUpdate(e){return To.resolve(null)}getMinOffset(e,t){return To.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return To.resolve(Fo.min())}updateCollectionGroup(e,t,n){return To.resolve()}updateIndexEntries(e,t){return To.resolve()}}class vd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jo(bo.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Jo(bo.comparator)).toArray()}}new Uint8Array(0);class bd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new bd(e,bd.DEFAULT_COLLECTION_PERCENTILE,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}bd.DEFAULT_COLLECTION_PERCENTILE=10,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bd.DEFAULT=new bd(41943040,bd.DEFAULT_COLLECTION_PERCENTILE,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bd.DISABLED=new bd(-1,0,0);class Bd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bd(0)}static kn(){return new Bd(-1)}}class Cd{constructor(){this.changes=new bc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?To.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ed{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&su(n.mutation,e,$o.empty(),yo.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Sc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sc();const r=jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ec();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=jc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Sc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Cc();const i=Qc(),A=Qc();return t.forEach((e,t)=>{const A=n.get(t.key);r.has(t.key)&&(void 0===A||A.mutation instanceof ou)?s=s.insert(t.key,t):void 0!==A?(i.set(t.key,A.mutation.getFieldMask()),su(A.mutation,t,A.mutation.getFieldMask(),yo.now())):i.set(t.key,$o.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return A.set(e,new Nd(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),A))}recalculateAndSaveOverlays(e,t){const n=Qc();let r=new qo((e,t)=>e-t),s=Sc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let A=n.get(e)||$o.empty();A=s.applyToLocalView(i,A),n.set(e,A);const a=(r.get(s.batchId)||Sc()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],A=r.getReverseIterator();for(;A.hasNext();){const r=A.getNext(),a=r.key,o=r.value,l=Fc();o.forEach(e=>{if(!s.has(e)){const r=nu(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,l))}return To.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return No.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):To.resolve(jc());let A=-1,a=s;return i.next(t=>To.forEach(t,(t,n)=>(A<n.largestBatchId&&(A=n.largestBatchId),s.get(t)?To.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,Sc())).next(e=>({batchId:A,changes:Uc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new No(t)).next(e=>{let t=Ec();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Ec();return this.indexManager.getCollectionParents(e,s).next(A=>To.forEach(A,A=>{const a=function(e,t){return new ic(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,A.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,kl.newInvalidDocument(r)))});let n=Ec();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&su(i.mutation,r,$o.empty(),yo.now()),xc(t,r)&&(n=n.insert(e,r))}),n})}}class Ud{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return To.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Wu(e.createTime)}}(t)),To.resolve()}getNamedQuery(e,t){return To.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:xd(e.bundledQuery),readTime:Wu(e.readTime)}}(t)),To.resolve()}}class jd{constructor(){this.overlays=new qo(No.comparator),this.Ir=new Map}getOverlay(e,t){return To.resolve(this.overlays.get(t))}getOverlays(e,t){const n=jc();return To.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),To.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),To.resolve()}getOverlaysForCollection(e,t,n){const r=jc(),s=t.length+1,i=new No(t.child("")),A=this.overlays.getIteratorFrom(i);for(;A.hasNext();){const e=A.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return To.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new qo((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=jc(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const A=jc(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>A.set(e,t)),!(A.size()>=r)););return To.resolve(A)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new pu(t,n));let s=this.Ir.get(t);void 0===s&&(s=Sc(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Fd{constructor(){this.sessionToken=tl.EMPTY_BYTE_STRING}getSessionToken(e){return To.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,To.resolve()}}class Qd{constructor(){this.Tr=new Jo(kd.Er),this.dr=new Jo(kd.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new kd(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new kd(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new No(new bo([])),n=new kd(t,e),r=new kd(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new No(new bo([])),n=new kd(t,e),r=new kd(t,e+1);let s=Sc();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new kd(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kd{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return No.comparator(e.key,t.key)||go(e.wr,t.wr)}static Ar(e,t){return go(e.wr,t.wr)||No.comparator(e.key,t.key)}}class Id{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Jo(kd.Er)}checkEmpty(e){return To.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new fu(s,t,n,r);this.mutationQueue.push(i);for(const A of r)this.br=this.br.add(new kd(A.key,s)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return To.resolve(i)}lookupMutationBatch(e,t){return To.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return To.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return To.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return To.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kd(t,0),r=new kd(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),To.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jo(go);return t.forEach(e=>{const t=new kd(e,0),r=new kd(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),To.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;No.isDocumentKey(s)||(s=s.child(""));const i=new kd(new No(s),0);let A=new Jo(go);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(A=A.add(e.wr)),!0)},i),To.resolve(this.Cr(A))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){to(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return To.forEach(t.mutations,r=>{const s=new kd(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new kd(t,0),r=this.br.firstAfterOrEqual(n);return To.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,To.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sd{constructor(e){this.Mr=e,this.docs=new qo(No.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return To.resolve(n?n.document.mutableCopy():kl.newInvalidDocument(t))}getEntries(e,t){let n=Cc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():kl.newInvalidDocument(e))}),To.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Cc();const i=t.path,A=new No(i.child("")),a=this.docs.getIteratorFrom(A);for(;a.hasNext();){const{key:e,value:{document:A}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Qo(jo(A),n)<=0||(r.has(A.key)||xc(t,A))&&(s=s.insert(A.key,A.mutableCopy()))}return To.resolve(s)}getAllFromCollectionGroup(e,t,n,r){eo()}Or(e,t){return To.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Td(this)}getSize(e){return To.resolve(this.size)}}class Td extends Cd{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),To.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class _d{constructor(e){this.persistence=e,this.Nr=new bc(e=>nc(e),rc),this.lastRemoteSnapshotVersion=wo.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qd,this.targetCount=0,this.kr=Bd.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),To.resolve()}getLastRemoteSnapshotVersion(e){return To.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return To.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),To.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),To.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Bd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,To.resolve()}updateTargetData(e,t){return this.Kn(t),To.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,To.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,A)=>{A.sequenceNumber<=t&&null===n.get(A.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,A.targetId)),r++)}),To.waitFor(s).next(()=>r)}getTargetCount(e){return To.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return To.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),To.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),To.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),To.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return To.resolve(n)}containsKey(e,t){return To.resolve(this.Br.containsKey(t))}}class Dd{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Lo(0),this.Kr=!1,this.Kr=!0,this.$r=new Fd,this.referenceDelegate=e(this),this.Ur=new _d(this),this.indexManager=new wd,this.remoteDocumentCache=function(e){return new Sd(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new gd(t),this.Gr=new Ud(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Id(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Xa("MemoryPersistence","Starting transaction:",e);const r=new Ld(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return To.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Ld extends Io{constructor(e){super(),this.currentSequenceNumber=e}}class Hd{constructor(e){this.persistence=e,this.Jr=new Qd,this.Yr=null}static Zr(e){return new Hd(e)}get Xr(){if(this.Yr)return this.Yr;throw eo()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),To.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),To.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),To.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return To.forEach(this.Xr,n=>{const r=No.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,wo.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return To.or([()=>To.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Rd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Sc(),r=Sc();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Rd(e,t.fromCache,n,r)}}class Pd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Md{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=pn()?8:_o(mn())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Pd;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Ya()<=_n.DEBUG&&Xa("QueryEngine","SDK will not create cache indexes for query:",gc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),To.resolve()):(Ya()<=_n.DEBUG&&Xa("QueryEngine","Query:",gc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Ya()<=_n.DEBUG&&Xa("QueryEngine","The SDK decides to create cache indexes for query:",gc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,uc(t))):To.resolve())}Yi(e,t){if(oc(t))return To.resolve(null);let n=uc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=fc(t,null,"F"),n=uc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Sc(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,fc(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return oc(t)||r.isEqual(wo.min())?To.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?To.resolve(null):(Ya()<=_n.DEBUG&&Xa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gc(t)),this.rs(e,i,t,Uo(r,-1)).next(e=>e))})}ts(e,t){let n=new Jo(wc(e));return t.forEach((t,r)=>{xc(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Ya()<=_n.DEBUG&&Xa("QueryEngine","Using full collection scan to execute query:",gc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Fo.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Od{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new qo(go),this._s=new bc(e=>nc(e),rc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ed(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Kd(e,t,n,r){return new Od(e,t,n,r)}async function Vd(e,t){const n=no(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let A=Sc();for(const e of r){s.push(e.batchId);for(const t of e.mutations)A=A.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)A=A.add(t.key)}return n.localDocuments.getDocuments(e,A).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Gd(e){const t=no(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Wd(e,t,n){let r=Sc(),s=Sc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Cc();return n.forEach((n,i)=>{const A=e.get(n);i.isFoundDocument()!==A.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(wo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!A.isValidDocument()||i.version.compareTo(A.version)>0||0===i.version.compareTo(A.version)&&A.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Xa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",A.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function zd(e,t){const n=no(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function qd(e,t){const n=no(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,To.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new pd(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Yd(e,t,n){const r=no(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Do(e))throw e;Xa("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function Xd(e,t,n){const r=no(e);let s=wo.min(),i=Sc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=no(e),s=r._s.get(n);return void 0!==s?To.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,uc(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:wo.min(),n?i:Sc())).next(e=>(Jd(r,yc(t),e),{documents:e,Ts:i})))}function Jd(e,t,n){let r=e.us.get(t)||wo.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Zd{constructor(){this.activeTargetIds=_c()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $d{constructor(){this.so=new Zd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eh{_o(e){}shutdown(){}}class th{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nh=null;function rh(){return null===nh?nh=268435456+Math.round(2147483648*Math.random()):nh++,"0x"+nh.toString(16)}const sh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ih{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ah="WebChannelConnection";class ah extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=rh(),A=this.xo(e,t.toUriEncodedString());Xa("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),A,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,s),this.No(e,A,a,n).then(t=>(Xa("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Za("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",A,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+za,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=sh[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=rh();return new Promise((i,A)=>{const a=new _a;a.setWithCredentials(!0),a.listenOnce(La.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ha.NO_ERROR:const t=a.getResponseJson();Xa(Ah,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Ha.TIMEOUT:Xa(Ah,"RPC '".concat(e,"' ").concat(s," timed out")),A(new so(ro.DEADLINE_EXCEEDED,"Request time out"));break;case Ha.HTTP_ERROR:const n=a.getStatus();if(Xa(Ah,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ro).indexOf(t)>=0?t:ro.UNKNOWN}(t.status);A(new so(e,t.message))}else A(new so(ro.UNKNOWN,"Server responded with status "+a.getStatus()))}else A(new so(ro.UNAVAILABLE,"Connection failed."));break;default:eo()}}finally{Xa(Ah,"RPC '".concat(e,"' ").concat(s," completed."))}});const o=JSON.stringify(r);Xa(Ah,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",o,n,15)})}Bo(e,t,n){const r=rh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Oa(),A=Ma(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;void 0!==o&&(a.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");Xa(Ah,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const c=i.createWebChannel(l,a);let u=!1,d=!1;const h=new ih({Io:t=>{d?Xa(Ah,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(Xa(Ah,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),u=!0),Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},To:()=>c.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(c,Da.EventType.OPEN,()=>{d||(Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.yo())}),f(c,Da.EventType.CLOSE,()=>{d||(d=!0,Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.So())}),f(c,Da.EventType.ERROR,t=>{d||(d=!0,Za(Ah,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.So(new so(ro.UNAVAILABLE,"The operation could not be completed")))}),f(c,Da.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];to(!!s);const i=s,A=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(A){Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," received error:"),A);const t=A.status;let n=function(e){const t=xu[e];if(void 0!==t)return vu(t)}(t),s=A.message;void 0===n&&(n=ro.INTERNAL,s="Unknown error status: "+t+" with message "+A.message),d=!0,h.So(new so(n,s)),c.close()}else Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," received:"),s),h.bo(s)}}),f(A,Pa.STAT_EVENT,t=>{t.stat===Ra.PROXY?Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ra.NOPROXY&&Xa(Ah,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{h.wo()},0),h}}function oh(){return"undefined"!=typeof document?document:null}function lh(e){return new Mu(e,!0)}class ch{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Xa("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class uh{constructor(e,t,n,r,s,i,A,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=A,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ch(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ro.RESOURCE_EXHAUSTED?(Ja(t.toString()),Ja("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ro.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new so(ro.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Xa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Xa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dh extends uh{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:eo()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(to(void 0===t||"string"==typeof t),tl.fromBase64String(t||"")):(to(void 0===t||t instanceof Buffer||t instanceof Uint8Array),tl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),A=t.targetChange.cause,a=A&&function(e){const t=void 0===e.code?ro.UNKNOWN:vu(e.code);return new so(t,e.message||"")}(A);n=new Su(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ju(e,r.document.name),i=Wu(r.document.updateTime),A=r.document.createTime?Wu(r.document.createTime):wo.min(),a=new Fl({mapValue:{fields:r.document.fields}}),o=kl.newFoundDocument(s,i,A,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new ku(l,c,o.key,o)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ju(e,r.document),i=r.readTime?Wu(r.readTime):wo.min(),A=kl.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ku([],a,A.key,A)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ju(e,r.document),i=r.removedTargetIds||[];n=new ku([],i,s,null)}else{if(!("filter"in t))return eo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new gu(r,s),A=e.targetId;n=new Iu(A,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return wo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?wo.min():t.readTime?Wu(t.readTime):wo.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ed(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=sc(r)?{documents:sd(e,r)}:{query:id(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Vu(e,t.resumeToken);const r=Ou(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(wo.min())>0){n.readTime=Ku(e,t.snapshotVersion.toTimestamp());const r=Ou(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return eo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ed(this.serializer),t.removeTarget=e,this.a_(t)}}class hh extends uh{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return to(!!e.streamToken),this.lastStreamToken=e.streamToken,to(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){to(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(to(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Wu(e.updateTime):Wu(t);return n.isEqual(wo.min())&&(n=Wu(t)),new Zc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Wu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ed(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>rd(this.serializer,e))};this.a_(t)}}class fh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new so(ro.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,A]=s;return this.connection.Mo(e,qu(t,n),r,i,A)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ro.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new so(ro.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[A,a]=i;return this.connection.Lo(e,qu(t,n),r,A,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ro.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new so(ro.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Ja(t),this.D_=!1):Xa("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ph{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Nh(this)&&(Xa("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=no(e);t.L_.add(4),await xh(t),t.q_.set("Unknown"),t.L_.delete(4),await gh(t)}(this))})}),this.q_=new mh(n,r)}}async function gh(e){if(Nh(e))for(const t of e.B_)await t(!0)}async function xh(e){for(const t of e.B_)await t(!1)}function yh(e,t){const n=no(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Ch(n)?Bh(n):Vh(n).r_()&&vh(n,t))}function wh(e,t){const n=no(e),r=Vh(n);n.N_.delete(t),r.r_()&&bh(n,t),0===n.N_.size&&(r.r_()?r.o_():Nh(n)&&n.q_.set("Unknown"))}function vh(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Vh(e).A_(t)}function bh(e,t){e.Q_.xe(t),Vh(e).R_(t)}function Bh(e){e.Q_=new _u({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Vh(e).start(),e.q_.v_()}function Ch(e){return Nh(e)&&!Vh(e).n_()&&e.N_.size>0}function Nh(e){return 0===no(e).L_.size}function Eh(e){e.Q_=void 0}async function Uh(e){e.q_.set("Online")}async function jh(e){e.N_.forEach((t,n)=>{vh(e,t)})}async function Fh(e,t){Eh(e),Ch(e)?(e.q_.M_(t),Bh(e)):e.q_.set("Unknown")}async function Qh(e,t,n){if(e.q_.set("Online"),t instanceof Su&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Xa("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await kh(e,n)}else if(t instanceof ku?e.Q_.Ke(t):t instanceof Iu?e.Q_.He(t):e.Q_.We(t),!n.isEqual(wo.min()))try{const t=await Gd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(tl.EMPTY_BYTE_STRING,r.snapshotVersion)),bh(e,t);const s=new pd(r.target,t,n,r.sequenceNumber);vh(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Xa("RemoteStore","Failed to raise snapshot:",t),await kh(e,t)}}async function kh(e,t,n){if(!Do(t))throw t;e.L_.add(1),await xh(e),e.q_.set("Offline"),n||(n=()=>Gd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Xa("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await gh(e)})}function Ih(e,t){return t().catch(n=>kh(e,n,t))}async function Sh(e){const t=no(e),n=Gh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Th(t);)try{const e=await zd(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,_h(t,e)}catch(e){await kh(t,e)}Dh(t)&&Lh(t)}function Th(e){return Nh(e)&&e.O_.length<10}function _h(e,t){e.O_.push(t);const n=Gh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Dh(e){return Nh(e)&&!Gh(e).n_()&&e.O_.length>0}function Lh(e){Gh(e).start()}async function Hh(e){Gh(e).p_()}async function Rh(e){const t=Gh(e);for(const n of e.O_)t.m_(n.mutations)}async function Ph(e,t,n){const r=e.O_.shift(),s=mu.from(r,t,n);await Ih(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Sh(e)}async function Mh(e,t){t&&Gh(e).V_&&await async function(e,t){if(function(e){return wu(e)&&e!==ro.ABORTED}(t.code)){const n=e.O_.shift();Gh(e).s_(),await Ih(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Sh(e)}}(e,t),Dh(e)&&Lh(e)}async function Oh(e,t){const n=no(e);n.asyncQueue.verifyOperationInProgress(),Xa("RemoteStore","RemoteStore received new credentials");const r=Nh(n);n.L_.add(3),await xh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await gh(n)}async function Kh(e,t){const n=no(e);t?(n.L_.delete(2),await gh(n)):t||(n.L_.add(2),await xh(n),n.q_.set("Unknown"))}function Vh(e){return e.K_||(e.K_=function(e,t,n){const r=no(e);return r.w_(),new dh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Uh.bind(null,e),Ro:jh.bind(null,e),mo:Fh.bind(null,e),d_:Qh.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Ch(e)?Bh(e):e.q_.set("Unknown")):(await e.K_.stop(),Eh(e))})),e.K_}function Gh(e){return e.U_||(e.U_=function(e,t,n){const r=no(e);return r.w_(),new hh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hh.bind(null,e),mo:Mh.bind(null,e),f_:Rh.bind(null,e),g_:Ph.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Sh(e)):(await e.U_.stop(),e.O_.length>0&&(Xa("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Wh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,A=new Wh(e,t,i,r,s);return A.start(n),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new so(ro.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zh(e,t){if(Ja("AsyncQueue","".concat(t,": ").concat(e)),Do(e))return new so(ro.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||No.comparator(t.key,n.key):(e,t)=>No.comparator(e.key,t.key),this.keyedMap=Ec(),this.sortedSet=new qo(this.comparator)}static emptySet(e){return new qh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yh{constructor(){this.W_=new qo(No.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):eo():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Xh{constructor(e,t,n,r,s,i,A,a,o){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=A,this.excludesMetadataChanges=a,this.hasCachedResults=o}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Xh(e,t,qh.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Jh{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Zh{constructor(){this.queries=$h(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=no(e),r=n.queries;n.queries=$h(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new so(ro.ABORTED,"Firestore shutting down"))}}function $h(){return new bc(e=>pc(e),mc)}async function ef(e,t){const n=no(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new Jh,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=zh(e,"Initialization of query '".concat(gc(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&sf(n)}async function tf(e,t){const n=no(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nf(e,t){const n=no(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&sf(n)}function rf(e,t,n){const r=no(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function sf(e){e.Y_.forEach(e=>{e.next()})}var Af,af;(af=Af||(Af={})).ea="default",af.Cache="cache";class of{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Xh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Xh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Af.Cache}}class lf{constructor(e){this.key=e}}class cf{constructor(e){this.key=e}}class uf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Sc(),this.mutatedKeys=Sc(),this.Aa=wc(e),this.Ra=new qh(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Yh,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,A=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,o="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),c=xc(this.query,t)?t:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let h=!1;l&&c?l.data.isEqual(c.data)?u!==d&&(n.track({type:3,doc:c}),h=!0):this.ga(l,c)||(n.track({type:2,doc:c}),h=!0,(a&&this.Aa(c,a)>0||o&&this.Aa(c,o)<0)&&(A=!0)):!l&&c?(n.track({type:0,doc:c}),h=!0):l&&!c&&(n.track({type:1,doc:l}),h=!0,(a||o)&&(A=!0)),h&&(c?(i=i.add(c),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:A,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return eo()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const A=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,o=a!==this.Ea;return this.Ea=a,0!==i.length||o?{snapshot:new Xh(this.query,e.Ra,s,i,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:A}:{wa:A}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Sc(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new cf(e))}),this.da.forEach(n=>{e.has(n)||t.push(new lf(n))}),t}ba(e){this.Ta=e.Ts,this.da=Sc();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Xh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class df{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hf{constructor(e){this.key=e,this.va=!1}}class ff{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new bc(e=>pc(e),mc),this.Ma=new Map,this.xa=new Set,this.Oa=new qo(No.comparator),this.Na=new Map,this.La=new Qd,this.Ba={},this.ka=new Map,this.qa=Bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function mf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Df(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gf(r,t,n,!0),s}async function pf(e,t){const n=Df(e);await gf(n,t,!0,!1)}async function gf(e,t,n,r){const s=await qd(e.localStore,uc(t)),i=s.targetId,A=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await xf(e,t,i,"current"===A,s.resumeToken)),e.isPrimaryClient&&n&&yh(e.remoteStore,s),a}async function xf(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Xd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),A=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,A);return Qf(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const i=await Xd(e.localStore,t,!0),A=new uf(t,i.Ts),a=A.ma(i.documents),o=Qu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=A.applyChanges(a,e.isPrimaryClient,o);Qf(e,n,l.wa);const c=new df(t,n,A);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),l.snapshot}async function yf(e,t,n){const r=no(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!mc(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wh(r.remoteStore,s.targetId),jf(r,s.targetId)}).catch(So)):(jf(r,s.targetId),await Yd(r.localStore,s.targetId,!0))}async function wf(e,t){const n=no(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wh(n.remoteStore,r.targetId))}async function vf(e,t){const n=no(e);try{const e=await function(e,t){const n=no(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const A=[];t.targetChanges.forEach((i,a)=>{const o=s.get(a);if(!o)return;A.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,a)));let l=o.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(tl.EMPTY_BYTE_STRING,wo.min()).withLastLimboFreeSnapshotVersion(wo.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(o,l,i)&&A.push(n.Ur.updateTargetData(e,l))});let a=Cc(),o=Sc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&A.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),A.push(Wd(e,i,t.documentUpdates).next(e=>{a=e.Ps,o=e.Is})),!r.isEqual(wo.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));A.push(t)}return To.waitFor(A).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,o)).next(()=>a)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(to(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?to(r.va):e.removedDocuments.size>0&&(to(r.va),r.va=!1))}),await Sf(n,e,t)}catch(e){await So(e)}}function bf(e,t,n){const r=no(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=no(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&sf(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Bf(e,t,n){const r=no(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new qo(No.comparator);e=e.insert(i,kl.newNoDocument(i,wo.min()));const n=Sc().add(i),s=new Fu(wo.min(),new Map,new qo(go),e,n);await vf(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),If(r)}else await Yd(r.localStore,t,!1).then(()=>jf(r,t,n)).catch(So)}async function Cf(e,t){const n=no(e),r=t.batch.batchId;try{const e=await function(e,t){const n=no(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let A=To.resolve();return i.forEach(e=>{A=A.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);to(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),A.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Sc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Uf(n,r,null),Ef(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sf(n,e)}catch(e){await So(e)}}async function Nf(e,t,n){const r=no(e);try{const e=await function(e,t){const n=no(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(to(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Uf(r,t,n),Ef(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Sf(r,e)}catch(n){await So(n)}}function Ef(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Uf(e,t,n){const r=no(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function jf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Ff(e,t)})}function Ff(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(wh(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),If(e))}function Qf(e,t,n){for(const r of n)r instanceof lf?(e.La.addReference(r.key,t),kf(e,r)):r instanceof cf?(Xa("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Ff(e,r.key)):eo()}function kf(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Xa("SyncEngine","New document in limbo: "+n),e.xa.add(r),If(e))}function If(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new No(bo.fromString(t)),r=e.qa.next();e.Na.set(r,new hf(n)),e.Oa=e.Oa.insert(n,r),yh(e.remoteStore,new pd(uc(ac(n.path)),r,"TargetPurposeLimboResolution",Lo.oe))}}async function Sf(e,t,n){const r=no(e),s=[],i=[],A=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{A.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Rd.Wi(a.targetId,e);i.push(t)}}))}),await Promise.all(A),r.Ca.d_(s),await async function(e,t){const n=no(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>To.forEach(t,t=>To.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>To.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Do(e))throw e;Xa("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function Tf(e,t){const n=no(e);if(!n.currentUser.isEqual(t)){Xa("SyncEngine","User change. New user:",t.toKey());const e=await Vd(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new so(ro.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Sf(n,e.hs)}}function _f(e,t){const n=no(e),r=n.Na.get(t);if(r&&r.va)return Sc().add(r.key);{let e=Sc();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Df(e){const t=no(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_f.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bf.bind(null,t),t.Ca.d_=nf.bind(null,t.eventManager),t.Ca.$a=rf.bind(null,t.eventManager),t}function Lf(e){const t=no(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nf.bind(null,t),t}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Kd(this.persistence,new Md,e.initialUser,this.serializer)}Ga(e){return new Dd(Hd.Zr,this.serializer)}Wa(e){return new $d}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class Rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>bf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tf.bind(null,this.syncEngine),await Kh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zh}createDatastore(e){const t=lh(e.databaseInfo.databaseId),n=function(e){return new ah(e)}(e.databaseInfo);return function(e,t,n,r){return new fh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new ph(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>bf(this.syncEngine,e,0),th.D()?new th:new eh)}createSyncEngine(e,t){return function(e,t,n,r,s,i,A){const a=new ff(e,t,n,r,s,i);return A&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=no(e);Xa("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await xh(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Rf.provider={build:()=>new Rf};class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ja("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Mf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Wa.UNAUTHENTICATED,this.clientId=po.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Xa("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Xa("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Me){const n=zh(Me,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Of(e,t){e.asyncQueue.verifyOperationInProgress(),Xa("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Vd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Kf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Vf(e);Xa("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Oh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Oh(t.remoteStore,n)),e._onlineComponents=t}async function Vf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Xa("FirestoreClient","Using user provided OfflineComponentProvider");try{await Of(e,e._uninitializedComponentsProvider._offline)}catch(Me){const n=Me;if(!function(e){return"FirebaseError"===e.name?e.code===ro.FAILED_PRECONDITION||e.code===ro.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Za("Error using user provided cache. Falling back to memory cache: "+n),await Of(e,new Hf)}}else Xa("FirestoreClient","Using default OfflineComponentProvider"),await Of(e,new Hf);return e._offlineComponents}async function Gf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Xa("FirestoreClient","Using user provided OnlineComponentProvider"),await Kf(e,e._uninitializedComponentsProvider._online)):(Xa("FirestoreClient","Using default OnlineComponentProvider"),await Kf(e,new Rf))),e._onlineComponents}function Wf(e){return Gf(e).then(e=>e.syncEngine)}async function zf(e){const t=await Gf(e),n=t.eventManager;return n.onListen=mf.bind(null,t.syncEngine),n.onUnlisten=yf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wf.bind(null,t.syncEngine),n}function qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new io;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Pf({next:a=>{i.Za(),t.enqueueAndForget(()=>tf(e,A));const o=a.docs.has(n);!o&&a.fromCache?s.reject(new so(ro.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&a.fromCache&&r&&"server"===r.source?s.reject(new so(ro.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),A=new of(ac(n.path),i,{includeMetadataChanges:!0,_a:!0});return ef(e,A)}(await zf(e),e.asyncQueue,t,n,r)),r.promise}function Yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new io;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Pf({next:n=>{i.Za(),t.enqueueAndForget(()=>tf(e,A)),n.fromCache&&"server"===r.source?s.reject(new so(ro.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),A=new of(n,i,{includeMetadataChanges:!0,_a:!0});return ef(e,A)}(await zf(e),e.asyncQueue,t,n,r)),r.promise}function Xf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jf=new Map;function Zf(e,t,n){if(!n)throw new so(ro.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function $f(e){if(!No.isDocumentKey(e))throw new so(ro.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function em(e){if(No.isDocumentKey(e))throw new so(ro.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":eo()}function nm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new so(ro.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tm(e);throw new so(ro.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function rm(e,t){if(t<=0)throw new so(ro.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class sm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new so(ro.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new so(ro.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new so(ro.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new so(ro.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new so(ro.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new so(ro.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new so(ro.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new so(ro.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ao;switch(e.type){case"firstParty":return new uo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new so(ro.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jf.get(e);t&&(Xa("ComponentProvider","Removing Datastore"),Jf.delete(e),t.terminate())}(this),Promise.resolve()}}class Am{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Am(this.firestore,e,this._query)}}class am{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new om(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new am(this.firestore,e,this._key)}}class om extends Am{constructor(e,t,n){super(e,t,ac(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new am(this.firestore,null,new No(e))}withConverter(e){return new om(this.firestore,e,this._path)}}function lm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Fn(e),Zf("collection","path",t),e instanceof im){const n=bo.fromString(t,...r);return em(n),new om(e,null,n)}{if(!(e instanceof am||e instanceof om))throw new so(ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bo.fromString(t,...r));return em(n),new om(e.firestore,null,n)}}function cm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Fn(e),1===arguments.length&&(t=po.newId()),Zf("doc","path",t),e instanceof im){const n=bo.fromString(t,...r);return $f(n),new am(e,null,new No(n))}{if(!(e instanceof am||e instanceof om))throw new so(ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bo.fromString(t,...r));return $f(n),new am(e.firestore,e instanceof om?e.converter:null,new No(n))}}class um{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ch(this,"async_queue_retry"),this.Vu=()=>{const e=oh();e&&Xa("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=oh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=oh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new io;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Pe){if(!Do(Pe))throw Pe;Xa("AsyncQueue","Operation failed with retryable error: "+Pe)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ja("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Wh.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&eo()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function dm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hm extends im{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new um,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new um(e),this._firestoreClient=void 0,await e}}}function fm(e){if(e._terminated)throw new so(ro.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mm(e),e._firestoreClient}function mm(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new ll(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Mf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class pm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pm(tl.fromBase64String(e))}catch(e){throw new so(ro.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new pm(tl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new so(ro.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Co(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xm{constructor(e){this._methodName=e}}class ym{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new so(ro.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new so(ro.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return go(this._lat,e._lat)||go(this._long,e._long)}}class wm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const vm=/^__.*__$/;class bm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}class Bm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw eo()}}class Nm{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Nm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Km(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Cm(this.Cu)&&vm.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Em{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||lh(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Nm({Cu:e,methodName:t,qu:n,path:Co.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(e){const t=e._freezeSettings(),n=lh(e._databaseId);return new Em(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jm(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const A=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);Rm("Data must be an object, but it was:",A,r);const a=Lm(r,A);let o,l;if(i.merge)o=new $o(A.fieldMask),l=A.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Pm(t,r,n);if(!A.contains(s))throw new so(ro.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Vm(e,s)||e.push(s)}o=new $o(e),l=A.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,l=A.fieldTransforms;return new bm(new Fl(a),o,l)}class Fm extends xm{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fm}}function Qm(e,t,n){return new Nm({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class km extends xm{_toFieldTransform(e){return new Jc(e.path,new Kc)}isEqual(e){return e instanceof km}}class Im extends xm{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Qm(this,e,!0),n=this.Ku.map(e=>Dm(e,t)),r=new Vc(n);return new Jc(e.path,r)}isEqual(e){return e instanceof Im&&bn(this.Ku,e.Ku)}}function Sm(e,t,n,r){const s=e.Qu(1,t,n);Rm("Data must be an object, but it was:",s,r);const i=[],A=Fl.empty();Wo(r,(e,r)=>{const a=Om(t,e,n);r=Fn(r);const o=s.Nu(a);if(r instanceof Fm)i.push(a);else{const e=Dm(r,o);null!=e&&(i.push(a),A.set(a,e))}});const a=new $o(i);return new Bm(A,a,s.fieldTransforms)}function Tm(e,t,n,r,s,i){const A=e.Qu(1,t,n),a=[Pm(t,r,n)],o=[s];if(i.length%2!=0)throw new so(ro.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<i.length;d+=2)a.push(Pm(t,i[d])),o.push(i[d+1]);const l=[],c=Fl.empty();for(let d=a.length-1;d>=0;--d)if(!Vm(l,a[d])){const e=a[d];let t=o[d];t=Fn(t);const n=A.Nu(e);if(t instanceof Fm)l.push(e);else{const r=Dm(t,n);null!=r&&(l.push(e),c.set(e,r))}}const u=new $o(l);return new Bm(c,u,A.fieldTransforms)}function _m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dm(n,e.Qu(r?4:3,t))}function Dm(e,t){if(Hm(e=Fn(e)))return Rm("Unsupported field value:",t,e),Lm(e,t);if(e instanceof xm)return function(e,t){if(!Cm(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Dm(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Fn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yo.fromDate(e);return{timestampValue:Ku(t.serializer,n)}}if(e instanceof yo){const n=new yo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ku(t.serializer,n)}}if(e instanceof ym)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pm)return{bytesValue:Vu(t.serializer,e._byteString)};if(e instanceof am){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:zu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wm)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Dc(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(tm(e)))}(e,t)}function Lm(e,t){const n={};return zo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wo(e,(e,r)=>{const s=Dm(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Hm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yo||e instanceof ym||e instanceof pm||e instanceof am||e instanceof xm||e instanceof wm)}function Rm(e,t,n){if(!Hm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=tm(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Pm(e,t,n){if((t=Fn(t))instanceof gm)return t._internalPath;if("string"==typeof t)return Om(e,t);throw Km("Field path arguments must be of type string or ",e,!1,void 0,n)}const Mm=new RegExp("[~\\*/\\[\\]]");function Om(e,t,n){if(t.search(Mm)>=0)throw Km("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new gm(...t.split("."))._internalPath}catch(r){throw Km("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Km(e,t,n,r,s){const i=r&&!r.isEmpty(),A=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(i||A)&&(o+=" (found",i&&(o+=" in field ".concat(r)),A&&(o+=" in document ".concat(s)),o+=")"),new so(ro.INVALID_ARGUMENT,a+e+o)}function Vm(e,t){return e.some(e=>e.isEqual(t))}class Gm{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new am(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Wm extends Gm{data(){return super.data()}}function zm(e,t){return"string"==typeof t?Om(e,t):t instanceof gm?t._internalPath:t._delegate._internalPath}function qm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new so(ro.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ym{}class Xm extends Ym{}function Jm(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Ym&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof ep).length,n=e.filter(e=>e instanceof Zm).length;if(t>1||t>0&&n>0)throw new so(ro.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const A of n)e=A._apply(e);return e}class Zm extends Xm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Zm(e,t,n)}_apply(e){const t=this._parse(e);return lp(e._query,t),new Am(e.firestore,e.converter,hc(e._query,t))}_parse(e){const t=Um(e.firestore),n=function(e,t,n,r,s,i,A){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new so(ro.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){op(A,i);const t=[];for(const n of A)t.push(ap(r,e,n));a={arrayValue:{values:t}}}else a=ap(r,e,A)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||op(A,i),a=_m(n,t,A,"in"===i||"not-in"===i);return Hl.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function $m(e,t,n){const r=t,s=zm("where",e);return Zm._create(s,r,n)}class ep extends Ym{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ep(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Rl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)lp(n,s),n=hc(n,s)}(e._query,t),new Am(e.firestore,e.converter,hc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tp extends Xm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new so(ro.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new so(ro.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(t,n)}(e._query,this._field,this._direction);return new Am(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ic(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function np(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=zm("orderBy",e);return tp._create(n,t)}class rp extends Xm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new rp(e,t,n)}_apply(e){return new Am(e.firestore,e.converter,fc(e._query,this._limit,this._limitType))}}function sp(e){return rm("limit",e),rp._create("limit",e,"F")}class ip extends Xm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ip(e,t,n)}_apply(e){const t=Ap(e,this.type,this._docOrFields,this._inclusive);return new Am(e.firestore,e.converter,function(e,t){return new ic(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Ap(e,t,n,r){if(n[0]=Fn(n[0]),n[0]instanceof Gm)return function(e,t,n,r,s){if(!r)throw new so(ro.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const A of cc(e))if(A.field.isKeyField())i.push(wl(t,r.key));else{const e=r.data.field(A.field);if(Al(e))throw new so(ro.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=A.field.canonicalString();throw new so(ro.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new Il(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=Um(e.firestore);return function(e,t,n,r,s,i){const A=e.explicitOrderBy;if(s.length>A.length)throw new so(ro.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let o=0;o<s.length;o++){const i=s[o];if(A[o].field.isKeyField()){if("string"!=typeof i)throw new so(ro.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!lc(e)&&-1!==i.indexOf("/"))throw new so(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(bo.fromString(i));if(!No.isDocumentKey(n))throw new so(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new No(n);a.push(wl(t,s))}else{const e=_m(n,r,i);a.push(e)}}return new Il(a,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function ap(e,t,n){if("string"==typeof(n=Fn(n))){if(""===n)throw new so(ro.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lc(t)&&-1!==n.indexOf("/"))throw new so(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(bo.fromString(n));if(!No.isDocumentKey(r))throw new so(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wl(e,new No(r))}if(n instanceof am)return wl(e,n._key);throw new so(ro.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tm(n),"."))}function op(e,t){if(!Array.isArray(e)||0===e.length)throw new so(ro.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function lp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new so(ro.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new so(ro.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class cp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(il(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw eo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Wo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>sl(e.doubleValue));return new wm(s)}convertGeoPoint(e){return new ym(sl(e.latitude),sl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=al(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=rl(e);return new yo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=bo.fromString(e);to(md(n));const r=new cl(n.get(1),n.get(3)),s=new No(n.popFirst(5));return r.isEqual(t)||Ja("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function up(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hp extends Gm{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new fp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(zm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class fp extends hp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class mp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new fp(this._firestore,this._userDataWriter,n.key,n,new dp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new so(ro.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new fp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new fp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:pp(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return eo()}}function gp(e){e=nm(e,am);const t=nm(e.firestore,hm);return qf(fm(t),e._key).then(n=>Ep(t,e,n))}class xp extends cp{constructor(e){super(),this.firestore=e}convertBytes(e){return new pm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new am(this.firestore,null,t)}}function yp(e){e=nm(e,Am);const t=nm(e.firestore,hm),n=fm(t),r=new xp(t);return qm(e._query),Yf(n,e._query).then(n=>new mp(t,r,e,n))}function wp(e,t,n){e=nm(e,am);const r=nm(e.firestore,hm),s=up(e.converter,t,n);return Np(r,[jm(Um(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,$c.none())])}function vp(e,t,n){e=nm(e,am);const r=nm(e.firestore,hm),s=Um(r);let i;for(var A=arguments.length,a=new Array(A>3?A-3:0),o=3;o<A;o++)a[o-3]=arguments[o];return i="string"==typeof(t=Fn(t))||t instanceof gm?Tm(s,"updateDoc",e._key,t,n,a):Sm(s,"updateDoc",e._key,t),Np(r,[i.toMutation(e._key,$c.exists(!0))])}function bp(e){return Np(nm(e.firestore,hm),[new du(e._key,$c.none())])}function Bp(e,t){const n=nm(e.firestore,hm),r=cm(e),s=up(e.converter,t);return Np(n,[jm(Um(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,$c.exists(!1))]).then(()=>r)}function Cp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,A;e=Fn(e);let a={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||dm(n[o])||(a=n[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(dm(n[o])){const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[o+2]=null===(A=e.complete)||void 0===A?void 0:A.bind(e)}let c,u,d;if(e instanceof am)u=nm(e.firestore,hm),d=ac(e._key.path),c={next:t=>{n[o]&&n[o](Ep(u,e,t))},error:n[o+1],complete:n[o+2]};else{const t=nm(e,Am);u=nm(t.firestore,hm),d=t._query;const r=new xp(u);c={next:e=>{n[o]&&n[o](new mp(u,r,t,e))},error:n[o+1],complete:n[o+2]},qm(e._query)}return function(e,t,n,r){const s=new Pf(r),i=new of(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>ef(await zf(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>tf(await zf(e),i))}}(fm(u),d,l,c)}function Np(e,t){return function(e,t){const n=new io;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Lf(e);try{const e=await function(e,t){const n=no(e),r=yo.now(),s=t.reduce((e,t)=>e.add(t.key),Sc());let i,A;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Cc(),o=Sc();return n.cs.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(o=o.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const A=[];for(const e of t){const t=iu(e,i.get(e.key).overlayedDocument);null!=t&&A.push(new ou(e.key,t,Ql(t.value.mapValue),$c.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,A,t)}).next(t=>{A=t;const r=t.applyToLocalDocumentSet(i,o);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:A.batchId,changes:Uc(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new qo(go)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Sf(r,e.changes),await Sh(r.remoteStore)}catch(e){const t=zh(e,"Failed to persist write");n.reject(t)}}(await Wf(e),t,n)),n.promise}(fm(e),t)}function Ep(e,t,n){const r=n.docs.get(t._key),s=new xp(e);return new hp(e,s,t._key,r,new dp(n.hasPendingWrites,n.fromCache),t.converter)}function Up(){return new km("serverTimestamp")}function jp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Im("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){za=e}(Wr),Mr(new Qn("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),A=new hm(new lo(e.getProvider("auth-internal")),new fo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new so(ro.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),A._setSettings(s),A},"PUBLIC").setMultipleInstances(!0)),Yr(Ga,"4.7.3",e),Yr(Ga,"4.7.3","esm2017")}();const Fp="firebasestorage.googleapis.com",Qp="storageBucket";class kp extends yn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Tp(e),"Firebase Storage: ".concat(t," (").concat(Tp(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Ip,Sp;function Tp(e){return"storage/"+e}function _p(){return new kp(Ip.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Dp(){return new kp(Ip.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lp(){return new kp(Ip.CANCELED,"User canceled the upload/download.")}function Hp(){return new kp(Ip.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rp(e){return new kp(Ip.INVALID_ARGUMENT,e)}function Pp(){return new kp(Ip.APP_DELETED,"The Firebase app was deleted.")}function Mp(e,t){return new kp(Ip.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Op(e){throw new kp(Ip.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ip||(Ip={}));class Kp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Kp.makeFromUrl(e,t)}catch(Pe){return new Kp(e,"")}if(""===n.path)return n;throw r=e,new kp(Ip.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const A=t.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(A,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===Fp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let o=0;o<a.length;o++){const t=a[o],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Kp(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new kp(Ip.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Vp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Gp(e){return"string"===typeof e||e instanceof String}function Wp(e){return zp()&&e instanceof Blob}function zp(){return"undefined"!==typeof Blob}function qp(e,t,n,r){if(r<t)throw Rp("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Rp("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Yp(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Xp(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Jp(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Sp||(Sp={}));class Zp{constructor(e,t,n,r,s,i,A,a,o,l,c){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=A,this.errorCallback_=a,this.timeout_=o,this.progressCallback_=l,this.connectionFactory_=c,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new $p(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Sp.NO_ERROR,s=n.getStatus();if(!t||Jp(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Sp.ABORT;return void e(!1,new $p(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new $p(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Pe){r(Pe)}else if(null!==s){const e=_p();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Pp():Lp())}else{r(Dp())}};this.canceled_?t(0,new $p(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,A=!1,a=0;function o(){return 2===a}let l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function u(t){s=setTimeout(()=>{s=null,e(h,o())},t)}function d(){i&&clearTimeout(i)}function h(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void c.call(null,e,...n);if(o()||A)return d(),void c.call(null,e,...n);let i;r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),u(i)}let f=!1;function m(e){f||(f=!0,d(),l||(null!==s?(e||(a=2),clearTimeout(s),u(0)):e||(a=1)))}return u(0),i=setTimeout(()=>{A=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $p{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function eg(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function tg(){const e=eg();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(zp())return new Blob(n);throw new kp(Ip.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ng(e){if("undefined"===typeof atob)throw t="base-64",new kp(Ip.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const rg="raw",sg="base64",ig="base64url",Ag="data_url";class ag{constructor(e,t){this.data=e,this.contentType=t||null}}function og(e,t){switch(e){case rg:return new ag(lg(t));case sg:case ig:return new ag(cg(e,t));case Ag:return new ag(function(e){const t=new ug(e);return t.base64?cg(sg,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Pe){throw Mp(Ag,"Malformed data URL.")}return lg(t)}(t.rest)}(t),new ug(t).contentType)}throw _p()}function lg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function cg(e,t){switch(e){case sg:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Mp(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case ig:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Mp(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ng(t)}catch(Pe){if(Pe.message.includes("polyfill"))throw Pe;throw Mp(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class ug{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mp(Ag,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class dg{constructor(e,t){let n=0,r="";Wp(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Wp(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new dg(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new dg(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(zp()){const e=t.map(e=>e instanceof dg?e.data_:e);return new dg(tg.apply(null,e))}{const e=t.map(e=>Gp(e)?og(rg,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new dg(r,!0)}}uploadData(){return this.data_}}function hg(e){let t;try{t=JSON.parse(e)}catch(Pe){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function fg(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function mg(e,t){return t}class pg{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||mg}}let gg=null;function xg(){if(gg)return gg;const e=[];e.push(new pg("bucket")),e.push(new pg("generation")),e.push(new pg("metageneration")),e.push(new pg("name","fullPath",!0));const t=new pg("name");t.xform=function(e,t){return function(e){return!Gp(e)||e.length<2?e:fg(e)}(t)},e.push(t);const n=new pg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new pg("timeCreated")),e.push(new pg("updated")),e.push(new pg("md5Hash",null,!0)),e.push(new pg("cacheControl",null,!0)),e.push(new pg("contentDisposition",null,!0)),e.push(new pg("contentEncoding",null,!0)),e.push(new pg("contentLanguage",null,!0)),e.push(new pg("contentType",null,!0)),e.push(new pg("metadata","customMetadata",!0)),gg=e,gg}function yg(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Kp(n,r);return t._makeStorageReference(s)}})}(r,e),r}function wg(e,t,n){const r=hg(t);if(null===r)return null;return yg(e,r,n)}function vg(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class bg{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bg(e){if(!e)throw _p()}function Cg(e,t){return function(n,r){const s=wg(e,r,t);return Bg(null!==s),s}}function Ng(e,t){return function(n,r){const s=wg(e,r,t);return Bg(null!==s),function(e,t,n,r){const s=hg(t);if(null===s)return null;if(!Gp(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const A=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return Yp("/b/"+A(s)+"/o/"+A(i),n,r)+Xp({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function Eg(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new kp(Ip.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new kp(Ip.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new kp(Ip.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new kp(Ip.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Ug(e){const t=Eg(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new kp(Ip.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function jg(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Fg(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),A={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();A["Content-Type"]="multipart/related; boundary="+a;const o=jg(t,r,s),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vg(o,n)+"\r\n--"+a+"\r\nContent-Type: "+o.contentType+"\r\n\r\n",c="\r\n--"+a+"--",u=dg.getBlob(l,r,c);if(null===u)throw Hp();const d={name:o.fullPath},h=Yp(i,e.host,e._protocol),f=e.maxUploadRetryTime,m=new bg(h,"POST",Cg(e,n),f);return m.urlParams=d,m.headers=A,m.body=u.uploadData(),m.errorHandler=Eg(t),m}class Qg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw Op("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Op("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Op("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Pe){return-1}}getResponse(){if(!this.sent_)throw Op("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Op("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class kg extends Qg{initXhr(){this.xhr_.responseType="text"}}function Ig(){return new kg}class Sg{constructor(e,t){this._service=e,this._location=t instanceof Kp?t:Kp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sg(e,t)}get root(){const e=new Kp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fg(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Kp(this._location.bucket,e);return new Sg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new kp(Ip.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Tg(e,t,n){e._throwIfRoot("uploadBytes");const r=Fg(e.storage,e._location,xg(),new dg(t,!0),n);return e.storage.makeRequestWithTokens(r,Ig).then(t=>({metadata:t,ref:e}))}function _g(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Yp(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new bg(r,"GET",Ng(e,n),s);return i.errorHandler=Ug(t),i}(e.storage,e._location,xg());return e.storage.makeRequestWithTokens(t,Ig).then(e=>{if(null===e)throw new kp(Ip.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Dg(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Kp(e._location.bucket,n);return new Sg(e.storage,r)}function Lg(e,t){if(e instanceof Pg){const n=e;if(null==n._bucket)throw new kp(Ip.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qp+"' property when initializing the app?");const r=new Sg(n,n._bucket);return null!=t?Lg(r,t):r}return void 0!==t?Dg(e,t):e}function Hg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Pg)return new Sg(e,t);throw Rp("To use ref(service, url), the first argument must be a Storage instance.")}return Lg(e,t)}function Rg(e,t){const n=null===t||void 0===t?void 0:t[Qp];return null==n?null:Kp.makeFromBucketSpec(n,e)}class Pg{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Fp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Kp.makeFromBucketSpec(r,this._host):Rg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Kp.makeFromBucketSpec(this._url,e):this._bucket=Rg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sg(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Vp(Pp());{const i=function(e,t,n,r,s,i){let A=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Xp(e.urlParams),o=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new Zp(o,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,A)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Mg="@firebase/storage",Og="0.13.2",Kg="storage";function Vg(e,t,n){return Tg(e=Fn(e),t,n)}function Gg(e){return _g(e=Fn(e))}function Wg(e,t){return Hg(e=Fn(e),t)}function zg(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Pg(r,s,i,n,Wr)}Mr(new Qn(Kg,zg,"PUBLIC").setMultipleInstances(!0)),Yr(Mg,Og,""),Yr(Mg,Og,"esm2017");function qg(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function Yg(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>Yg(e));if("function"===typeof e||"object"===typeof e)return qg(e,e=>Yg(e));throw new Error("Data cannot be encoded in JSON: "+e)}function Xg(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>Xg(e)):"function"===typeof e||"object"===typeof e?qg(e,e=>Xg(e)):e}const Jg="functions",Zg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $g extends yn{constructor(e,t,n){super("".concat(Jg,"/").concat(e),t||""),this.details=n}}class ex{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(Pe){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(Pe){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const tx="us-central1";class nx{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tx,i=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new ex(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=tx}catch(Pe){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function rx(e,t,n){return r=>function(e,t,n,r){const s=e._url(t);return ix(e,s,n,r)}(e,t,r,n||{})}async function sx(e,t,n,r){let s;n["Content-Type"]="application/json";try{s=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(Pe){return{status:0,json:null}}let i=null;try{i=await s.json()}catch(Pe){}return{status:s.status,json:i}}async function ix(e,t,n,r){const s={data:n=Yg(n)},i={},A=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);A.authToken&&(i.Authorization="Bearer "+A.authToken),A.messagingToken&&(i["Firebase-Instance-ID-Token"]=A.messagingToken),null!==A.appCheckToken&&(i["X-Firebase-AppCheck"]=A.appCheckToken);const a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new $g("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),o=await Promise.race([sx(t,s,i,e.fetchImpl),a.promise,e.cancelAllRequests]);if(a.cancel(),!o)throw new $g("cancelled","Firebase Functions instance was deleted.");const l=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),s=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!Zg[t])return new $g("internal","internal");r=Zg[t],s=t}const i=e.message;"string"===typeof i&&(s=i),n=e.details,void 0!==n&&(n=Xg(n))}}catch(Pe){}return"ok"===r?null:new $g(r,s,n)}(o.status,o.json);if(l)throw l;if(!o.json)throw new $g("internal","Response is not valid JSON object.");let c=o.json.data;if("undefined"===typeof c&&(c=o.json.result),"undefined"===typeof c)throw new $g("internal","Response is missing data field.");return{data:Xg(c)}}const Ax="@firebase/functions",ax="0.11.8";function ox(e,t,n){return rx(Fn(e),t,n)}!function(e,t){Mr(new Qn(Jg,(t,n)=>{let{instanceIdentifier:r}=n;const s=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),A=t.getProvider("messaging-internal"),a=t.getProvider("app-check-internal");return new nx(s,i,A,a,r,e)},"PUBLIC").setMultipleInstances(!0)),Yr(Ax,ax,t),Yr(Ax,ax,"esm2017")}(fetch.bind(self));const lx="@firebase/installations",cx="0.6.9",ux=1e4,dx="w:".concat(cx),hx="FIS_v2",fx=36e5,mx=new wn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function px(e){return e instanceof yn&&e.code.includes("request-failed")}function gx(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function xx(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function yx(e,t){const n=(await t.json()).error;return mx.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function wx(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vx(e,t){let{refreshToken:n}=t;const r=wx(e);return r.append("Authorization",function(e){return"".concat(hx," ").concat(e)}(n)),r}async function bx(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Bx(e){return new Promise(t=>{setTimeout(t,e)})}const Cx=/^[cdef][\w-]{21}$/;function Nx(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Cx.test(t)?t:""}catch(e){return""}}function Ex(e){return"".concat(e.appName,"!").concat(e.appId)}const Ux=new Map;function jx(e,t){const n=Ex(e);Fx(n,t),function(e,t){const n=kx();n&&n.postMessage({key:e,fid:t});Ix()}(n,t)}function Fx(e,t){const n=Ux.get(e);if(n)for(const r of n)r(t)}let Qx=null;function kx(){return!Qx&&"BroadcastChannel"in self&&(Qx=new BroadcastChannel("[Firebase] FID Change"),Qx.onmessage=e=>{Fx(e.data.key,e.data.fid)}),Qx}function Ix(){0===Ux.size&&Qx&&(Qx.close(),Qx=null)}const Sx="firebase-installations-store";let Tx=null;function _x(){return Tx||(Tx=$n("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Sx)}})),Tx}async function Dx(e,t){const n=Ex(e),r=(await _x()).transaction(Sx,"readwrite"),s=r.objectStore(Sx),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||jx(e,t.fid),t}async function Lx(e){const t=Ex(e),n=(await _x()).transaction(Sx,"readwrite");await n.objectStore(Sx).delete(t),await n.done}async function Hx(e,t){const n=Ex(e),r=(await _x()).transaction(Sx,"readwrite"),s=r.objectStore(Sx),i=await s.get(n),A=t(i);return void 0===A?await s.delete(n):await s.put(A,n),await r.done,!A||i&&i.fid===A.fid||jx(e,A.fid),A}async function Rx(e){let t;const n=await Hx(e.appConfig,n=>{const r=function(e){const t=e||{fid:Nx(),registrationStatus:0};return Ox(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(mx.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=gx(n),A=wx(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&A.append("x-firebase-client",e)}const o={fid:s,authVersion:hx,appId:n.appId,sdkVersion:dx},l={method:"POST",headers:A,body:JSON.stringify(o)},c=await bx(()=>fetch(i,l));if(c.ok){const e=await c.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:xx(e.authToken)}}throw await yx("Create Installation",c)}(e,t);return Dx(e.appConfig,n)}catch(Pe){throw px(Pe)&&409===Pe.customData.serverCode?await Lx(e.appConfig):await Dx(e.appConfig,{fid:t.fid,registrationStatus:0}),Pe}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Px(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Px(e){let t=await Mx(e.appConfig);for(;1===t.registrationStatus;)await Bx(100),t=await Mx(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Rx(e);return n||t}return t}function Mx(e){return Hx(e,e=>{if(!e)throw mx.create("installation-not-found");return Ox(e)})}function Ox(e){return 1===(t=e).registrationStatus&&t.registrationTime+ux<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Kx(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(gx(e),"/").concat(n,"/authTokens:generate")}(n,t),i=vx(n,t),A=r.getImmediate({optional:!0});if(A){const e=await A.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={installation:{sdkVersion:dx,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await bx(()=>fetch(s,o));if(l.ok){return xx(await l.json())}throw await yx("Generate Auth Token",l)}async function Vx(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Hx(e.appConfig,r=>{if(!Wx(r))throw mx.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+fx}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Gx(e.appConfig);for(;1===n.authToken.requestStatus;)await Bx(100),n=await Gx(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Vx(e,t):r}(e,n),r;{if(!navigator.onLine)throw mx.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Kx(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Dx(e.appConfig,r),n}catch(Pe){if(!px(Pe)||401!==Pe.customData.serverCode&&404!==Pe.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Dx(e.appConfig,n)}else await Lx(e.appConfig);throw Pe}}(e,n),n}});return t?await t:r.authToken}function Gx(e){return Hx(e,e=>{if(!Wx(e))throw mx.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ux<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Wx(e){return void 0!==e&&2===e.registrationStatus}async function zx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Rx(e);t&&await t}(n);return(await Vx(n,t)).token}function qx(e){return mx.create("missing-app-config-values",{valueName:e})}const Yx="installations",Xx=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw qx("App Configuration");if(!e.name)throw qx("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw qx(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Or(t,"heartbeat"),_delete:()=>Promise.resolve()}},Jx=e=>{const t=Or(e.getProvider("app").getImmediate(),Yx).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Rx(t);return r?r.catch(console.error):Vx(t).catch(console.error),n.fid}(t),getToken:e=>zx(t,e)}};Mr(new Qn(Yx,Xx,"PUBLIC")),Mr(new Qn("installations-internal",Jx,"PRIVATE")),Yr(lx,cx),Yr(lx,cx,"esm2017");const Zx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$x="google.c.a.c_id";var ey,ty;function ny(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ry(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(ey||(ey={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ty||(ty={}));const sy="fcm_token_details_db",iy="fcm_token_object_Store";const Ay="firebase-messaging-store";let ay=null;function oy(){return ay||(ay=$n("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ay)}})),ay}async function ly(e){const t=uy(e),n=await oy(),r=await n.transaction(Ay).objectStore(Ay).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes(sy))return null}let t=null;return(await $n(sy,5,{upgrade:async(n,r,s,i)=>{var A;if(r<2)return;if(!n.objectStoreNames.contains(iy))return;const a=i.objectStore(iy),o=await a.index("fcmSenderId").get(e);if(await a.clear(),o)if(2===r){const e=o;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(A=e.createTime)&&void 0!==A?A:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:ny(e.vapidKey)}}}else if(3===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ny(e.auth),p256dh:ny(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ny(e.vapidKey)}}}else if(4===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ny(e.auth),p256dh:ny(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ny(e.vapidKey)}}}}})).close(),await er(sy),await er("fcm_vapid_details_db"),await er("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await cy(e,t),t}}async function cy(e,t){const n=uy(e),r=(await oy()).transaction(Ay,"readwrite");return await r.objectStore(Ay).put(t,n),await r.done,t}function uy(e){let{appConfig:t}=e;return t.appId}const dy=new wn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function hy(e,t){const n={method:"DELETE",headers:await my(e)};try{const r=await fetch("".concat(fy(e.appConfig),"/").concat(t),n),s=await r.json();if(s.error){const e=s.error.message;throw dy.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw dy.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function fy(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function my(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function py(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:s}=e;const i={web:{endpoint:r,auth:n,p256dh:t}};return s!==Zx&&(i.web.applicationPubKey=s),i}async function gy(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ry(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ny(t.getKey("auth")),p256dh:ny(t.getKey("p256dh"))},r=await ly(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,s=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&s&&i}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await my(e),r=py(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch("".concat(fy(e.appConfig),"/").concat(t.token),s);i=await n.json()}catch(A){throw dy.create("token-update-failed",{errorInfo:null===A||void 0===A?void 0:A.toString()})}if(i.error){const e=i.error.message;throw dy.create("token-update-failed",{errorInfo:e})}if(!i.token)throw dy.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await cy(e.firebaseDependencies,r),n}catch(Pe){throw Pe}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await hy(e.firebaseDependencies,r.token)}catch(Pe){console.warn(Pe)}return xy(e.firebaseDependencies,n)}return xy(e.firebaseDependencies,n)}async function xy(e,t){const n=await async function(e,t){const n=await my(e),r=py(t),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const t=await fetch(fy(e.appConfig),s);i=await t.json()}catch(A){throw dy.create("token-subscribe-failed",{errorInfo:null===A||void 0===A?void 0:A.toString()})}if(i.error){const e=i.error.message;throw dy.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw dy.create("token-subscribe-no-token");return i.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await cy(e,r),r.token}function yy(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const s=t.notification.image;s&&(e.notification.image=s);const i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,s,i,A;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const a=null!==(s=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==s?s:null===(i=t.notification)||void 0===i?void 0:i.click_action;a&&(e.fcmOptions.link=a);const o=null===(A=t.fcmOptions)||void 0===A?void 0:A.analytics_label;o&&(e.fcmOptions.analyticsLabel=o)}(t,e),t}function wy(e){return dy.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vy{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw wy("App Configuration Object");if(!e.name)throw wy("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw wy(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function by(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(Pe){throw dy.create("failed-service-worker-registration",{browserErrorMessage:null===Pe||void 0===Pe?void 0:Pe.message})}}async function By(e,t){if(!navigator)throw dy.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw dy.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Zx)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await by(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw dy.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),gy(e)}async function Cy(e,t,n){const r=function(e){switch(e){case ty.NOTIFICATION_CLICKED:return"notification_open";case ty.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[$x],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function Ny(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===ty.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(yy(n)):e.onMessageHandler.next(yy(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&$x in e})(r)&&"1"===r["google.c.a.e"]&&await Cy(e,n.messageType,r)}const Ey="@firebase/messaging",Uy="0.12.12",jy=e=>{const t=new vy(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>Ny(t,e)),t},Fy=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>By(t,e)}};async function Qy(){try{await xn()}catch(Pe){return!1}return"undefined"!==typeof window&&gn()&&!("undefined"===typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function ky(e,t){return function(e,t){if(!navigator)throw dy.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=Fn(e),t)}Mr(new Qn("messaging",jy,"PUBLIC")),Mr(new Qn("messaging-internal",Fy,"PRIVATE")),Yr(Ey,Uy),Yr(Ey,Uy,"esm2017");const Iy=zr({apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID}),Sy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr();const t=Or(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Or(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(bn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ds(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ca,persistence:[EA,lA,uA]}),r=dn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ja)return;const r=null===t||void 0===t?void 0:t.token;Fa!==r&&(Fa=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Fn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Fn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=ln("auth");return i&&Qi(n,"http://".concat(i)),n}(Iy),Ty=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Or("object"==typeof e?e:qr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=cn("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=nm(e,im))._getSettings(),A="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==A&&Za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:A,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Wa.MOCK_USER;else{t=fn(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new so(ro.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Wa(i)}e._authCredentials=new oo(new Ao(t,n))}}(r,...e)}return r}(Iy),_y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr(),t=arguments.length>1?arguments[1]:void 0;e=Fn(e);const n=Or(e,Kg).getImmediate({identifier:t}),r=cn("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:fn(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Iy),Dy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tx;const n=Or(Fn(e),Jg).getImmediate({identifier:t}),r=cn("functions");return r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(Fn(e),t,n)}(n,...r),n}(Iy),Ly=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr();return Qy().then(e=>{if(!e)throw dy.create("unsupported-browser")},e=>{throw dy.create("indexed-db-unsupported")}),Or(Fn(e),"messaging").getImmediate()}(Iy),Hy=new Wi,Ry=e=>{switch(e.code){case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/user-not-found":return"No account found with this email.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/invalid-email":return"Invalid email address.";case"auth/user-disabled":return"This account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-closed-by-user":return"Sign-in popup was closed.";case"auth/cancelled-popup-request":return"Sign-in was cancelled.";case"auth/invalid-credential":return"Invalid credentials. Please check your email and password.";default:return e.message.replace("Firebase: ","").replace(/\(auth\/[\w-]+\)\.?/,"").trim()}},Py=async()=>{try{const e=await async function(e,t,n){if(Kr(e.app))return Promise.reject(hs(e,"operation-not-supported-in-this-environment"));const r=bi(e);ps(e,t,Ki);const s=PA(r,n);return new zA(r,"signInViaPopup",t,s).executeNotNull()}(Sy,Hy);return{success:!0,user:e.user}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:Ry(e)}}},My=async(e,t)=>{try{const n=await function(e,t,n){return Kr(e.app)?Promise.reject(ms(e)):rA(Fn(e),Oi.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&sA(e),t})}(Sy,e,t);return{success:!0,user:n.user}}catch(n){return console.error("Email sign in error:",n),{success:!1,error:Ry(n)}}},Oy=async(e,t,n)=>{try{const r=await async function(e,t,n){if(Kr(e.app))return Promise.reject(ms(e));const r=bi(e),s=Fi(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yi),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&sA(e),t}),A=await Xi._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(A.user),A}(Sy,e,t);return await iA(r.user,{displayName:n||"New User"}),{success:!0,user:r.user}}catch(r){return console.error("Email sign up error:",r),{success:!1,error:Ry(r)}}},Ky=e=>{try{return window.recaptchaVerifier||(window.recaptchaVerifier=new DA(Sy,e,{size:"invisible",callback:()=>{}})),{success:!0,verifier:window.recaptchaVerifier}}catch(t){return console.error("reCAPTCHA setup error:",t),{success:!1,error:t.message}}},Vy=async(e,t)=>{try{const n=await async function(e,t,n){if(Kr(e.app))return Promise.reject(ms(e));const r=bi(e),s=await HA(r,t,Fn(n));return new LA(s,e=>rA(r,e))}(Sy,e,t);return{success:!0,confirmationResult:n}}catch(n){return console.error("Phone verification error:",n),window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null),{success:!1,error:n.message}}},Gy=async(e,t)=>{try{return{success:!0,user:(await e.confirm(t)).user}}catch(n){return console.error("Code verification error:",n),{success:!1,error:n.message}}},Wy=async()=>{try{return await function(e){return Fn(e).signOut()}(Sy),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e.message}}};const zy=new class{constructor(){this.sessionId=this.generateSessionId(),this.userId=null,this.userAgent=navigator.userAgent,this.startTime=Date.now(),this.errors=[],this.performance=[],this.setupErrorHandlers()}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}setUser(e){this.userId=e}setupErrorHandlers(){window.addEventListener("error",e=>{var t;this.logError({type:"uncaught_error",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(t=e.error)||void 0===t?void 0:t.stack})}),window.addEventListener("unhandledrejection",e=>{var t,n;this.logError({type:"unhandled_promise",message:(null===(t=e.reason)||void 0===t?void 0:t.message)||String(e.reason),stack:null===(n=e.reason)||void 0===n?void 0:n.stack})}),this.trackPerformance()}logError(e){const t=Re(Re({},e),{},{stack:e.stack||null,sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href,userAgent:this.userAgent});this.errors.push(t),this.sendToFirestore("errors",t),console.error("Error tracked:",t)}logCustomError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logError({type:"custom_error",message:e,details:t,stack:(new Error).stack})}trackPerformance(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&this.logPerformance({type:"page_load",metrics:{dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,dom:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,load:e.loadEventEnd-e.loadEventStart,total:e.loadEventEnd-e.fetchStart}})},0)});const e=new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>1e3&&this.logPerformance({type:"slow_resource",name:t.name,duration:t.duration,size:t.transferSize})});e.observe({entryTypes:["resource","measure"]})}logPerformance(e){const t=Re(Re({},e),{},{sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href});this.performance.push(t),this.sendToFirestore("performance",t)}trackAction(e){const t={action:e,details:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href};this.sendToFirestore("user_actions",t)}trackPageView(e){this.trackAction("page_view",{page:e})}trackFunnelStep(e,t){const n={funnel:e,step:t,metadata:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},sessionId:this.sessionId,userId:this.userId,timestamp:Date.now(),url:window.location.href};this.sendToFirestore("funnel_events",n)}async sendToFirestore(e,t){try{await Bp(lm(Ty,e),Re(Re({},t),{},{createdAt:yo.now()}))}catch(n){console.error("Failed to send to Firestore:",n),this.storeLocally(e,t)}}storeLocally(e,t){try{const n="besties_".concat(e),r=JSON.parse(localStorage.getItem(n)||"[]");r.push(t),r.length>100&&r.shift(),localStorage.setItem(n,JSON.stringify(r))}catch(n){console.error("Failed to store locally:",n)}}getSessionSummary(){return{sessionId:this.sessionId,userId:this.userId,duration:Date.now()-this.startTime,errors:this.errors.length,url:window.location.href,userAgent:this.userAgent}}},qy=zy;var Yy=n(579);const Xy=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[i,A]=(0,t.useState)(""),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)("+61"),[h,f]=(0,t.useState)(""),[m,p]=(0,t.useState)(""),[g,x]=(0,t.useState)(null),[y,w]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[B,C]=(0,t.useState)(""),N=te();(0,t.useEffect)(()=>{qy.trackFunnelStep("signup","view_login_page")},[]),(0,t.useEffect)(()=>{if(y&&!v){setTimeout(async()=>{try{C("Setting up verification...");Ky("recaptcha-container").success?(b(!0),C("")):(C(""),en.error("Verification setup failed. Please refresh the page."))}catch(e){C(""),console.error("reCAPTCHA setup error:",e)}},100)}},[y,v]);const E=async()=>{c(!0),C("Opening Google sign-in..."),qy.trackFunnelStep("signup","click_google_signin");try{const e=await Py();c(!1),C(""),e.success?(qy.trackFunnelStep("signup","complete_google_signin"),en.success("Welcome to Besties!"),N("/")):(qy.logCustomError("Google sign-in failed",{error:e.error}),en.error(e.error||"Sign in failed"))}catch(e){c(!1),C(""),en.error("Sign in failed. Please try again.")}};return(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"w-full max-w-md",children:[(0,Yy.jsxs)("div",{className:"text-center mb-8 animate-fade-in",children:[(0,Yy.jsx)("h1",{className:"font-display text-6xl text-gradient mb-2",children:"Besties"}),(0,Yy.jsx)("p",{className:"text-xl text-text-secondary font-semibold",children:"Your besties have your back \ud83d\udc9c"})]}),(0,Yy.jsxs)("div",{className:"card p-8 animate-slide-up",children:[B&&(0,Yy.jsx)("div",{className:"mb-4 p-3 bg-gray-100 rounded-lg text-center",children:(0,Yy.jsxs)("p",{className:"text-sm font-semibold text-primary flex items-center justify-center gap-2",children:[(0,Yy.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),B]})}),(0,Yy.jsxs)("button",{onClick:E,disabled:l,className:"w-full btn btn-primary mb-3",children:[(0,Yy.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,Yy.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Yy.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Yy.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Yy.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Yy.jsxs)("button",{onClick:()=>w(!y),className:"w-full btn btn-secondary mb-3",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Continue with Phone"]}),y&&(0,Yy.jsx)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:g?(0,Yy.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),C("Verifying code..."),qy.trackFunnelStep("signup","click_phone_verify_code");try{const e=await Gy(g,m);c(!1),C(""),e.success?(qy.trackFunnelStep("signup","complete_phone_signin"),en.success("Welcome to Besties!"),N("/")):(qy.logCustomError("Phone code verification failed",{error:e.error}),en.error(e.error||"Invalid code"))}catch(t){c(!1),C(""),en.error("Verification failed. Please try again.")}},className:"space-y-3",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Verification Code"}),(0,Yy.jsx)("input",{type:"text",inputMode:"numeric",value:m,onChange:e=>p(e.target.value),className:"input",placeholder:"123456",required:!0,maxLength:6,autoComplete:"one-time-code"}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:"Enter the 6-digit code sent to your phone"})]}),(0,Yy.jsx)("button",{type:"submit",disabled:l,className:"w-full btn btn-primary",children:l?"Verifying...":"Verify Code"}),(0,Yy.jsx)("button",{type:"button",onClick:()=>{x(null),p("")},className:"w-full btn btn-secondary",children:"Back"})]}):(0,Yy.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v){c(!0),C("Sending verification code..."),qy.trackFunnelStep("signup","click_phone_send_code");try{const e=h.startsWith("+")?h:"".concat(u).concat(h.replace(/\s/g,"")),t=Ky("recaptcha-container");if(!t.success)return en.error("Verification not ready. Please try again."),c(!1),void C("");const n=await Vy(e,t.verifier);c(!1),C(""),n.success?(x(n.confirmationResult),en.success("Verification code sent!"),qy.trackFunnelStep("signup","phone_code_sent")):(qy.logCustomError("Phone verification failed",{error:n.error}),en.error(n.error||"Failed to send code"))}catch(t){c(!1),C(""),qy.logCustomError("Phone send code error",{error:t.message}),en.error("Failed to send code. Please try again.")}}else en.error("Please wait for verification to be ready...")},className:"space-y-3",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Phone Number"}),(0,Yy.jsxs)("div",{className:"flex gap-2",children:[(0,Yy.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"input w-20",children:[(0,Yy.jsx)("option",{value:"+1",children:"+1"}),(0,Yy.jsx)("option",{value:"+44",children:"+44"}),(0,Yy.jsx)("option",{value:"+61",children:"+61"}),(0,Yy.jsx)("option",{value:"+91",children:"+91"})]}),(0,Yy.jsx)("input",{type:"tel",value:h,onChange:e=>{const t=e.target.value.replace(/\s/g,"");let n=t;"+61"===u&&t.length>3?(n=t.slice(0,3),t.length>3&&(n+=" "+t.slice(3,6)),t.length>6&&(n+=" "+t.slice(6,9))):"+1"===u&&t.length>3?(n=t.slice(0,3),t.length>3&&(n+=" "+t.slice(3,6)),t.length>6&&(n+=" "+t.slice(6,10))):"+44"===u&&t.length>4?(n=t.slice(0,4),t.length>4&&(n+=" "+t.slice(4,10))):"+91"===u&&t.length>5&&(n=t.slice(0,5),t.length>5&&(n+=" "+t.slice(5,10))),f(n)},className:"input flex-1",placeholder:"+61"===u?"435 853 854":"412345678",required:!0})]}),(0,Yy.jsxs)("p",{className:"text-xs text-text-secondary mt-1",children:["Example: ",u," ","+61"===u?"435 853 854":"+1"===u?"555 123 4567":"412345678"]})]}),!v&&(0,Yy.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-text-secondary",children:[(0,Yy.jsx)("div",{className:"w-3 h-3 border-2 border-primary border-t-transparent rounded-full animate-spin"}),(0,Yy.jsx)("span",{children:"Preparing verification..."})]}),v&&(0,Yy.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-success",children:[(0,Yy.jsx)("span",{children:"\u2705"}),(0,Yy.jsx)("span",{children:"Ready to send code!"})]}),(0,Yy.jsxs)("button",{type:"submit",disabled:l||!v,className:"w-full btn btn-primary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[l&&(0,Yy.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),l?"Sending Code...":"Send Verification Code"]}),(0,Yy.jsx)("div",{id:"recaptcha-container"})]})}),(0,Yy.jsxs)("button",{onClick:E,disabled:!0,className:"w-full btn bg-[#1877F2] text-white hover:bg-[#166FE5] mb-6 opacity-50 cursor-not-allowed",title:"Facebook login coming soon",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook (Coming Soon)"]}),(0,Yy.jsxs)("div",{className:"relative mb-6",children:[(0,Yy.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Yy.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Yy.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Yy.jsx)("span",{className:"px-2 bg-white text-text-secondary",children:"Or"})})]}),(0,Yy.jsxs)("form",{onSubmit:async t=>{let n;t.preventDefault(),c(!0),qy.trackFunnelStep("signup",a?"click_email_signup":"click_email_signin"),n=a?await Oy(e,r,i):await My(e,r),c(!1),n.success?(qy.trackFunnelStep("signup",a?"complete_email_signup":"complete_email_signin"),en.success(a?"Account created!":"Welcome back!"),N("/")):(qy.logCustomError("Email auth failed",{error:n.error,isSignUp:a}),en.error(n.error||"Authentication failed"))},className:"space-y-4",children:[a&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Display Name"}),(0,Yy.jsx)("input",{type:"text",value:i,onChange:e=>A(e.target.value),className:"input",placeholder:"Your name",required:!0})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Email"}),(0,Yy.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),className:"input",placeholder:"you@example.com",required:!0})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Password"}),(0,Yy.jsx)("input",{type:"password",value:r,onChange:e=>s(e.target.value),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,minLength:6})]}),(0,Yy.jsx)("button",{type:"submit",disabled:l,className:"w-full btn btn-secondary",children:l?"Please wait...":a?"Sign Up":"Sign In"})]}),(0,Yy.jsx)("div",{className:"mt-6 text-center",children:(0,Yy.jsx)("button",{onClick:()=>o(!a),className:"text-primary font-semibold hover:underline",children:a?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]}),(0,Yy.jsx)("div",{className:"text-center mt-6 text-sm text-text-secondary",children:(0,Yy.jsx)("p",{children:"By continuing, you agree to our Terms of Service"})})]})})};const Jy=new class{async createNotification(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{await Bp(lm(Ty,"notifications"),Re({userId:e,type:t,title:n,message:r,read:!1,createdAt:Up()},s))}catch(i){throw console.error("Error creating notification:",i),i}}async notifyBestieRequest(e,t){return this.createNotification(e,"bestie_request","New Bestie Request","".concat(t," wants to be your bestie!"),{requesterName:t})}async notifyCheckInAlert(e,t,n){return this.createNotification(e,"check_in_alert","Check-in Alert","".concat(t," hasn't checked in yet. They might need help."),{bestieName:t,checkInId:n})}async notifyMissedCheckIn(e,t){return this.createNotification(e,"missed_check_in","Missed Check-in","You missed your check-in. Your besties were notified.",{checkInId:t})}async notifyRequestAttention(e,t,n){return this.createNotification(e,"request_attention","Someone Needs You","".concat(t," is requesting your attention"),{bestieName:t,bestieId:n})}async notifyBadgeEarned(e,t,n){return this.createNotification(e,"badge_earned","New Badge Unlocked!",'You earned the "'.concat(t,'" badge! ').concat(n),{badgeName:t,badgeDescription:n})}async notifySystem(e,t,n){return this.createNotification(e,"system",t,n)}async notifyWelcome(e,t){return this.createNotification(e,"system","Welcome to Besties, ".concat(t,"!"),"Start by adding your first bestie and creating a check-in. We've got your back!")}async notifyBestieAccepted(e,t){return this.createNotification(e,"bestie_request","Bestie Request Accepted!","".concat(t," accepted your bestie request. Stay safe together!"),{bestieName:t})}async notifyCheckInComplete(e,t){return this.createNotification(e,"check_in_alert","Check-in Complete",'Great job! You completed "'.concat(t,'" safely.'),{checkInName:t})}},Zy=(0,t.createContext)(),$y=()=>{const e=(0,t.useContext)(Zy);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},ew=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(null),[i,A]=(0,t.useState)(null),[a,o]=(0,t.useState)(!0),l=(0,t.useRef)(null);return(0,t.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("invite");if(e){console.log("\ud83d\udcbe Saving invite code to localStorage:",e),localStorage.setItem("pending_invite",e);(async()=>{try{const t=cm(Ty,"users",e),n=await gp(t);if(n.exists()){const t=n.data();localStorage.setItem("inviter_info",JSON.stringify({uid:e,displayName:t.displayName,photoURL:t.photoURL})),console.log("\u2705 Inviter info saved:",t.displayName)}}catch(t){console.error("Failed to fetch inviter info:",t)}})();const t=window.location.pathname;window.history.replaceState({},"",t)}},[]),(0,t.useEffect)(()=>{const e=Sy.onAuthStateChanged(async e=>{if(console.group("\ud83d\udd10 Auth State Changed"),console.log("User:",e),console.log("User UID:",null===e||void 0===e?void 0:e.uid),console.groupEnd(),s(e),e){qy.setUser(e.uid);const n=cm(Ty,"users",e.uid);console.log("\ud83d\udcc4 Fetching user document at path:","users/".concat(e.uid));const r=await gp(n);console.log("\ud83d\udcc4 User document exists:",r.exists());const s=!r.exists();if(s){await wp(n,{displayName:e.displayName||"New User",email:e.email,phoneNumber:e.phoneNumber||null,photoURL:e.photoURL||null,stats:{joinedAt:yo.now(),totalCheckIns:0,completedCheckIns:0,alertedCheckIns:0,totalBesties:0},notificationPreferences:{whatsapp:!1,email:!0},notificationsEnabled:!1,smsSubscription:{active:!1},lastActive:yo.now(),onboardingCompleted:!1});try{await Jy.notifyWelcome(e.uid,e.displayName||"New User")}catch(t){console.error("Failed to send welcome notification:",t)}}else{const e={lastActive:yo.now()};void 0===r.data().onboardingCompleted&&(e.onboardingCompleted=!0),r.data().notifications&&!r.data().notificationPreferences&&(e.notificationPreferences=r.data().notifications),void 0===r.data().notificationsEnabled&&(e.notificationsEnabled=!!r.data().fcmToken),await vp(n,e)}const i=localStorage.getItem("pending_invite");if(i&&(await(async(e,n)=>{if(e&&n&&n!==e.uid)try{const s=cm(Ty,"users",n),i=await gp(s);if(!i.exists())return console.log("Invalid invite - user does not exist"),localStorage.removeItem("pending_invite"),void localStorage.removeItem("inviter_info");const A=i.data(),a=cm(Ty,"users",e.uid),o=await gp(a),l=o.exists()?o.data():{};localStorage.setItem("inviter_info",JSON.stringify({uid:n,displayName:A.displayName,photoURL:A.photoURL}));const c=[Jm(lm(Ty,"besties"),$m("requesterId","==",n),$m("recipientId","==",e.uid)),Jm(lm(Ty,"besties"),$m("requesterId","==",e.uid),$m("recipientId","==",n)),Jm(lm(Ty,"besties"),$m("requesterId","==",n),$m("recipientPhone","==",e.phoneNumber||e.email))];let u=!1;for(let r of c){const s=await yp(r);if(!s.empty){const r=s.docs[0];await vp(cm(Ty,"besties",r.id),{status:"accepted",acceptedAt:yo.now(),recipientId:e.uid,recipientName:l.displayName||e.displayName||"Unknown",recipientPhone:e.phoneNumber||e.email,requesterName:A.displayName||"Unknown",requesterPhone:A.phoneNumber||A.email}),u=!0;try{await Jy.notifyBestieAccepted(n,l.displayName||e.displayName||"Someone")}catch(t){console.error("Failed to send bestie notification:",t)}break}}if(!u){await Bp(lm(Ty,"besties"),{requesterId:n,recipientId:e.uid,status:"accepted",acceptedAt:yo.now(),createdAt:yo.now(),requesterName:A.displayName||"Unknown",requesterPhone:A.phoneNumber||A.email,recipientName:l.displayName||e.displayName||"Unknown",recipientPhone:e.phoneNumber||e.email});try{await Jy.createNotification(n,"bestie_request","New Bestie!","".concat(l.displayName||e.displayName||"Someone"," added you as a bestie!"),{bestieName:l.displayName||e.displayName||"Someone",bestieId:e.uid})}catch(t){console.error("Failed to send bestie notification:",t)}}try{await Bp(lm(Ty,"bestie_celebrations"),{userId:e.uid,bestieId:n,bestieName:A.displayName||"Unknown",bestiePhotoURL:A.photoURL||null,seen:!1,createdAt:yo.now()}),await Bp(lm(Ty,"bestie_celebrations"),{userId:n,bestieId:e.uid,bestieName:l.displayName||e.displayName||"Unknown",bestiePhotoURL:l.photoURL||e.photoURL||null,seen:!1,createdAt:yo.now()}),console.log("\u2705 Celebration documents created for both users")}catch(r){console.error("Failed to create celebration documents:",r)}localStorage.removeItem("pending_invite"),console.log("Invite processed successfully for:",A.displayName)}catch(r){console.error("Auto-add bestie failed:",r)}})(e,i),!s)){const e=localStorage.getItem("inviter_info");if(e){try{const{displayName:t}=JSON.parse(e);en.success("You're now besties with ".concat(t,"! \ud83d\udc9c"),{duration:5e3})}catch(Pe){console.error("Failed to parse inviter info:",Pe)}localStorage.removeItem("inviter_info")}}l.current&&l.current(),console.log("\ud83d\udce1 AuthContext: Setting up Firestore listener for user:",e.uid),l.current=Cp(n,t=>{if(console.group("\ud83d\udce1 Firestore Listener Callback"),console.log("Document exists:",t.exists()),t.exists()){const e=Re({id:t.id},t.data());console.log("User data loaded:",e),console.log("isAdmin field:",e.isAdmin),A(e)}else console.error("\u274c User document does not exist at path:","users/".concat(e.uid));console.groupEnd(),o(!1)},e=>{console.error("\u274c Firestore listener error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),o(!1)})}else l.current&&(l.current(),l.current=null),qy.setUser(null),A(null),o(!1)});return()=>{e(),l.current&&l.current()}},[]),(0,Yy.jsx)(Zy.Provider,{value:{currentUser:r,userData:i,loading:a},children:n})},tw=()=>{const{currentUser:e,userData:n}=$y(),r=te(),[s,i]=(0,t.useState)("welcome"),[A,a]=(0,t.useState)(0),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[p,g]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=localStorage.getItem("inviter_info");if(e)try{g(JSON.parse(e))}catch(Pe){console.error("Failed to parse inviter info:",Pe)}},[]),(0,t.useEffect)(()=>{null!==n&&void 0!==n&&n.displayName&&!o?l(n.displayName):null!==e&&void 0!==e&&e.displayName&&!o&&l(e.displayName)},[n,e,o]);const x=[{emoji:"\ud83d\udc4b",title:"Welcome to Besties!",description:"Your personal safety check-in app that keeps your loved ones informed."},{emoji:"\u23f0",title:"How It Works",description:"Create a check-in with a time limit. If you don't mark yourself safe before time runs out, your besties get alerted."},{emoji:"\ud83d\udc9c",title:"Your Safety Network",description:"Add up to 5 besties to your circle. They'll be notified if you miss a check-in, so they can make sure you're okay."},{emoji:"\ud83d\udcf1",title:"Stay Connected",description:"Your besties get SMS alerts when you miss a check-in. They can also see your location and notes from your last check-in."},{emoji:"\u2728",title:"Let's Get Started!",description:"We'll help you set up your profile and add your first bestie. Then you'll be ready to create your first check-in!"}],y=x[A];(0,t.useEffect)(()=>{"bestie-circle"===s&&e&&w()},[s,e]);const w=async()=>{m(!0);try{const[t,n]=await Promise.all([yp(Jm(lm(Ty,"besties"),$m("requesterId","==",e.uid),$m("status","==","accepted"))),yp(Jm(lm(Ty,"besties"),$m("recipientId","==",e.uid),$m("status","==","accepted")))]);h(!t.empty||!n.empty)}catch(t){console.error("Error checking besties:",t)}finally{m(!1)}},v=async()=>{if(o.trim())try{await vp(cm(Ty,"users",e.uid),{displayName:o.trim()}),i("photo")}catch(t){console.error("Error updating name:",t),en.error("Failed to update name")}else en.error("Please enter a name")},b=async t=>{const n=t.target.files[0];if(!n)return;if(n.size>5242880)return void en.error("Photo must be less than 5MB");u(!0);const r=en.loading("Uploading photo...");try{const t=Wg(_y,"profile-pictures/".concat(e.uid,"/").concat(Date.now(),"_").concat(n.name));await Vg(t,n);const s=await Gg(t);await vp(cm(Ty,"users",e.uid),{photoURL:s}),en.success("Photo uploaded!",{id:r}),i(p?"invite-welcome":"bestie-circle")}catch(s){console.error("Error uploading photo:",s),en.error("Failed to upload photo",{id:r})}finally{u(!1)}},B=()=>{i(p?"invite-welcome":"bestie-circle")},C=async()=>{try{await vp(cm(Ty,"users",e.uid),{onboardingCompleted:!0}),r(d?"/create":"/profile")}catch(t){console.error("Error completing onboarding:",t),en.error("Failed to complete onboarding")}};return"welcome"===s?(0,Yy.jsx)("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Yy.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83d\udc9c"}),(0,Yy.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Welcome to Besties!"}),(0,Yy.jsx)("p",{className:"text-xl text-white/90 mb-8",children:"Your personal safety network in your pocket"}),(0,Yy.jsx)("button",{onClick:()=>i("slides"),className:"btn bg-white text-primary hover:bg-white/90 text-lg px-8 py-4",children:"Get Started \u2192"})]})}):"slides"===s?(0,Yy.jsx)("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Yy.jsx)("div",{className:"text-7xl mb-6",children:y.emoji}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-4",children:y.title}),(0,Yy.jsx)("p",{className:"text-lg text-text-secondary mb-8",children:y.description}),(0,Yy.jsx)("div",{className:"flex justify-center gap-2 mb-8",children:x.map((e,t)=>(0,Yy.jsx)("div",{className:"w-2 h-2 rounded-full transition-all ".concat(t===A?"bg-primary w-6":"bg-gray-300")},t))}),(0,Yy.jsx)("div",{className:"flex gap-3",children:A<x.length-1?(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("button",{onClick:()=>i("name"),className:"flex-1 btn btn-secondary",children:"Skip"}),(0,Yy.jsx)("button",{onClick:()=>a(A+1),className:"flex-1 btn btn-primary",children:"Next \u2192"})]}):(0,Yy.jsx)("button",{onClick:()=>i("name"),className:"w-full btn btn-primary text-lg py-4",children:"Let's check your details! \u2192"})})]})}):"name"===s?(0,Yy.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-md w-full",children:[(0,Yy.jsxs)("div",{className:"text-center mb-8",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc64"}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Is this name correct?"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"This is how your besties will see you"})]}),(0,Yy.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full p-4 border-2 border-gray-300 rounded-xl focus:border-primary focus:outline-none text-lg mb-6",placeholder:"Your name"}),(0,Yy.jsx)("button",{onClick:v,className:"w-full btn btn-primary text-lg py-4",children:"Looks Good! \u2713"})]})}):"photo"===s?(0,Yy.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-md w-full",children:[(0,Yy.jsxs)("div",{className:"text-center mb-8",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf7"}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Add a Profile Picture?"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Help your besties recognize you (optional)"})]}),(null===n||void 0===n?void 0:n.photoURL)&&(0,Yy.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Yy.jsx)("img",{src:n.photoURL,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-primary"})}),(0,Yy.jsxs)("label",{className:"block w-full mb-4",children:[(0,Yy.jsx)("div",{className:"btn btn-primary text-lg py-4 text-center cursor-pointer",children:c?"Uploading...":"\ud83d\udce4 Upload Photo"}),(0,Yy.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:c})]}),(0,Yy.jsx)("button",{onClick:B,className:"w-full btn btn-secondary text-lg py-4",disabled:c,children:"Skip for Now \u2192"})]})}):"invite-welcome"===s&&p?(0,Yy.jsx)("div",{className:"min-h-screen bg-gradient-secondary flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,Yy.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83d\udc9c"}),p.photoURL?(0,Yy.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Yy.jsx)("img",{src:p.photoURL,alt:p.displayName,className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl"})}):(0,Yy.jsx)("div",{className:"mb-6 flex justify-center",children:(0,Yy.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-primary flex items-center justify-center text-white text-5xl font-display border-4 border-white shadow-xl",children:(null===(N=p.displayName)||void 0===N?void 0:N[0])||"?"})}),(0,Yy.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Welcome to Besties!"}),(0,Yy.jsxs)("p",{className:"text-2xl text-white/90 mb-2",children:["You accepted ",(0,Yy.jsxs)("span",{className:"font-bold",children:[p.displayName,"'s"]})," request"]}),(0,Yy.jsx)("p",{className:"text-xl text-white/90 mb-8",children:"You are now besties! \ud83c\udf89"}),(0,Yy.jsx)("button",{onClick:()=>{localStorage.removeItem("inviter_info"),g(null),i("bestie-circle")},className:"btn bg-white text-primary hover:bg-white/90 text-lg px-8 py-4",children:"Continue \u2192"})]})}):"bestie-circle"===s?f?(0,Yy.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,Yy.jsx)("div",{className:"spinner"})}):(0,Yy.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4 overflow-y-auto",children:(0,Yy.jsxs)("div",{className:"max-w-2xl w-full py-8",children:[(0,Yy.jsxs)("div",{className:"text-center mb-8",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\u2b50"}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-2",children:"Your Bestie Circle"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"These are the 5 besties who get notified if you miss a check-in."}),!d&&(0,Yy.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:(0,Yy.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"\u26a0\ufe0f You need at least one bestie to create a check-in"})}),d&&(0,Yy.jsx)("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:(0,Yy.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"\u2705 Great! You already have a bestie in your circle"})})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg mb-4 text-center",children:"How It Works:"}),(0,Yy.jsxs)("ul",{className:"space-y-3 text-sm text-text-secondary",children:[(0,Yy.jsxs)("li",{className:"flex gap-3",children:[(0,Yy.jsx)("span",{className:"text-2xl",children:"1\ufe0f\u20e3"}),(0,Yy.jsx)("span",{children:"Choose up to 5 besties for your safety circle"})]}),(0,Yy.jsxs)("li",{className:"flex gap-3",children:[(0,Yy.jsx)("span",{className:"text-2xl",children:"2\ufe0f\u20e3"}),(0,Yy.jsx)("span",{children:"They'll get SMS alerts if you miss a check-in"})]}),(0,Yy.jsxs)("li",{className:"flex gap-3",children:[(0,Yy.jsx)("span",{className:"text-2xl",children:"3\ufe0f\u20e3"}),(0,Yy.jsx)("span",{children:"You can change who's in your circle anytime"})]})]})]}),d?(0,Yy.jsx)("button",{onClick:C,className:"w-full btn btn-primary text-lg py-4",children:"Start Creating Check-Ins! \u2192"}):(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("button",{onClick:C,className:"w-full btn btn-primary text-lg py-4 mb-3",children:"\u2795 Add Your First Bestie"}),(0,Yy.jsx)("p",{className:"text-xs text-center text-text-secondary",children:"You'll be taken to your profile. Click on a + button in your bestie circle to continue"})]})]})}):null;var N},nw=(0,t.createContext)(),rw=()=>{const e=(0,t.useContext)(nw);if(!e)throw new Error("useDarkMode must be used within DarkModeProvider");return e},sw=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(()=>{const e=localStorage.getItem("darkMode");return!!e&&JSON.parse(e)});(0,t.useEffect)(()=>{localStorage.setItem("darkMode",JSON.stringify(r)),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);return(0,Yy.jsx)(nw.Provider,{value:{isDark:r,toggle:()=>s(!r)},children:n})},iw=()=>{const e=te(),{currentUser:n}=$y(),[r,s]=(0,t.useState)(!1),[i,A]=(0,t.useState)([]),[a,o]=(0,t.useState)(0),l=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&s(!1)};if(r)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]),(0,t.useEffect)(()=>{if(null===n||void 0===n||!n.uid)return;const e=Cp(Jm(lm(Ty,"notifications"),$m("userId","==",n.uid),np("createdAt","desc")),e=>{const t=e.docs.map(e=>Re({id:e.id},e.data()));A(t),o(t.filter(e=>!e.read).length)});return()=>e()},[null===n||void 0===n?void 0:n.uid]);const c=async e=>{try{await vp(cm(Ty,"notifications",e),{read:!0})}catch(t){console.error("Error marking notification as read:",t)}},u=e=>{switch(e){case"bestie_request":return"\ud83d\udc9c";case"check_in_alert":return"\u23f0";case"missed_check_in":return"\u26a0\ufe0f";case"request_attention":return"\ud83d\udc4b";case"badge_earned":return"\ud83c\udfc6";case"system":return"\ud83d\udce2";default:return"\ud83d\udd14"}},d=e=>{if(!e)return"";const t=e.toDate?e.toDate():new Date(e),n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):s<24?"".concat(s,"h ago"):i<7?"".concat(i,"d ago"):t.toLocaleDateString()};return(0,Yy.jsxs)("div",{className:"relative",ref:l,children:[(0,Yy.jsxs)("button",{onClick:()=>s(!r),className:"relative p-2 hover:bg-gray-100 rounded-full transition-colors",children:[(0,Yy.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[(0,Yy.jsx)("defs",{children:(0,Yy.jsxs)("linearGradient",{id:"bellGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,Yy.jsx)("stop",{offset:"0%",stopColor:"#ec4899"}),(0,Yy.jsx)("stop",{offset:"50%",stopColor:"#a855f7"}),(0,Yy.jsx)("stop",{offset:"100%",stopColor:"#d946ef"})]})}),(0,Yy.jsx)("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9",fill:"none",stroke:"url(#bellGradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),a>0&&(0,Yy.jsx)("div",{className:"absolute -top-1 -right-1 bg-gradient-to-br from-rose-500 to-pink-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse shadow-lg",children:a>9?"9+":a})]}),r&&(0,Yy.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-xl shadow-2xl border-2 border-gray-200 z-50 max-h-96 overflow-hidden flex flex-col",children:[(0,Yy.jsx)("div",{className:"p-4 border-b-2 border-gray-100 bg-gradient-to-r from-pink-50 to-purple-50",children:(0,Yy.jsxs)("h3",{className:"font-display text-lg text-text-primary flex items-center justify-between",children:[(0,Yy.jsx)("span",{children:"Notifications"}),a>0&&(0,Yy.jsxs)("span",{className:"text-xs bg-primary text-white px-2 py-1 rounded-full",children:[a," new"]})]})}),(0,Yy.jsx)("div",{className:"overflow-y-auto flex-1",children:0===i.length?(0,Yy.jsxs)("div",{className:"p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd14"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm",children:"No notifications yet"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-xs mt-1",children:"We'll notify you about check-ins, bestie requests, and more"})]}):(0,Yy.jsx)("div",{className:"divide-y divide-gray-100",children:i.map(t=>(0,Yy.jsx)("button",{onClick:()=>(t=>{switch(t.read||c(t.id),t.type){case"bestie_request":case"missed_check_in":case"request_attention":e("/besties");break;case"check_in_alert":e("/history");break;case"badge_earned":e("/profile")}s(!1)})(t),className:"w-full p-4 text-left hover:bg-gradient-to-r hover:from-pink-50 hover:to-purple-50 transition-colors ".concat(t.read?"":"bg-purple-50/30"),children:(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0 text-2xl",children:u(t.type)}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsx)("p",{className:"text-sm ".concat(t.read?"text-gray-700":"font-semibold text-gray-900"),children:t.title}),(0,Yy.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:t.message}),(0,Yy.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:d(t.createdAt)})]}),!t.read&&(0,Yy.jsx)("div",{className:"flex-shrink-0",children:(0,Yy.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full"})})]})},t.id))})}),a>0&&(0,Yy.jsx)("div",{className:"p-3 border-t-2 border-gray-100 bg-gray-50",children:(0,Yy.jsx)("button",{onClick:async()=>{const e=i.filter(e=>!e.read);for(const t of e)await c(t.id)},className:"w-full text-center text-sm font-semibold text-primary hover:text-primary-dark transition-colors",children:"Mark all as read"})})]})]})},Aw=e=>{var t;let{photoURL:n,name:r,requestAttention:s,size:i="md",className:A="",showBubble:a=!0}=e;const o={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"},l={sm:"text-xs px-2 py-1",md:"text-xs px-2 py-1",lg:"text-sm px-3 py-1",xl:"text-sm px-3 py-2"},c=o[i]||o.md,u=l[i]||l.md,d=a&&(null===s||void 0===s?void 0:s.active)&&(null===s||void 0===s?void 0:s.tag);return(0,Yy.jsxs)("div",{className:"relative inline-block ".concat(A),children:[n?(0,Yy.jsx)("img",{src:n,alt:r,className:"".concat(c," rounded-full object-cover ring-2 ring-white shadow-md"),onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,Yy.jsx)("div",{className:"".concat(c," bg-gradient-primary rounded-full flex items-center justify-center text-white font-display ring-2 ring-white shadow-md"),style:{display:n?"none":"flex"},children:(null===r||void 0===r||null===(t=r[0])||void 0===t?void 0:t.toUpperCase())||"?"}),d&&(0,Yy.jsxs)("div",{className:"absolute -top-2 -right-2 z-10 animate-bounce-slow",children:[(0,Yy.jsxs)("div",{className:"bg-purple-500 text-white rounded-full ".concat(u," font-semibold whitespace-nowrap shadow-lg relative"),children:[s.tag,(0,Yy.jsx)("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-4 border-t-purple-500"})]}),(0,Yy.jsx)("div",{className:"absolute inset-0 rounded-full bg-purple-300 animate-ping opacity-75"})]})]})},aw=()=>{const{userData:e}=$y(),{isDark:n,toggle:r}=rw(),s=$(),i=te(),[A,a]=(0,t.useState)(!1),o=(0,t.useRef)(null),l=e=>s.pathname===e;(0,t.useEffect)(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&a(!1)};if(A)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[A]);return(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("header",{className:"".concat(n?"bg-gray-900":"bg-white"," shadow-sm sticky top-0 z-40 transition-colors"),children:(0,Yy.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,Yy.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Yy.jsx)(ke,{to:"/",className:"flex items-center gap-2",children:(0,Yy.jsx)("span",{className:"font-display text-2xl text-gradient",children:"Besties"})}),(0,Yy.jsxs)("nav",{className:"hidden md:flex items-center gap-6",children:[(0,Yy.jsx)(ke,{to:"/",className:"font-semibold transition-colors ".concat(l("/")?"text-primary":n?"text-gray-300 hover:text-primary":"text-text-secondary hover:text-primary"),children:"Home"}),(0,Yy.jsx)(ke,{to:"/besties",className:"font-semibold transition-colors ".concat(l("/besties")?"text-primary":n?"text-gray-300 hover:text-primary":"text-text-secondary hover:text-primary"),children:"Besties"}),(0,Yy.jsx)(ke,{to:"/profile",className:"font-semibold transition-colors ".concat(l("/profile")?"text-primary":n?"text-gray-300 hover:text-primary":"text-text-secondary hover:text-primary"),children:"Profile"})]}),(0,Yy.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Yy.jsx)(iw,{}),(0,Yy.jsxs)("div",{className:"relative",ref:o,children:[(0,Yy.jsx)("button",{onClick:()=>a(!A),className:"hover:opacity-90 transition-opacity",children:(0,Yy.jsx)(Aw,{photoURL:null===e||void 0===e?void 0:e.photoURL,name:(null===e||void 0===e?void 0:e.displayName)||"User",requestAttention:null===e||void 0===e?void 0:e.requestAttention,size:"md",showBubble:!0})}),A&&(0,Yy.jsxs)("div",{className:"absolute right-0 mt-2 w-48 ".concat(n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg shadow-lg border overflow-hidden animate-scale-up transition-colors"),children:[(0,Yy.jsxs)("div",{className:"px-4 py-3 ".concat(n?"border-gray-700":"border-gray-200"," border-b"),children:[(0,Yy.jsx)("div",{className:"font-semibold ".concat(n?"text-gray-100":"text-text-primary"," truncate"),children:(null===e||void 0===e?void 0:e.displayName)||"User"}),(0,Yy.jsx)("div",{className:"text-xs ".concat(n?"text-gray-400":"text-text-secondary"," truncate"),children:null===e||void 0===e?void 0:e.email})]}),(0,Yy.jsxs)("button",{onClick:()=>{a(!1),i("/profile")},className:"w-full px-4 py-2 text-left ".concat(n?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]}),(0,Yy.jsxs)("button",{onClick:()=>{a(!1),i("/settings")},className:"w-full px-4 py-2 text-left ".concat(n?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Yy.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,Yy.jsxs)("button",{onClick:()=>{a(!1),i("/history")},className:"w-full px-4 py-2 text-left ".concat(n?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),(0,Yy.jsxs)("button",{onClick:()=>{a(!1),i("/about")},className:"w-full px-4 py-2 text-left ".concat(n?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center gap-2"),children:[(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"About Besties"]}),(0,Yy.jsx)("div",{className:"".concat(n?"border-gray-700":"border-gray-200"," border-t"),children:(0,Yy.jsxs)("button",{onClick:()=>{r(),en.success("".concat(n?"Light":"Dark"," mode enabled"))},className:"w-full px-4 py-2 text-left ".concat(n?"hover:bg-gray-700 text-gray-100":"hover:bg-gray-50 text-text-primary"," transition-colors flex items-center justify-between"),children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[n?(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),(0,Yy.jsx)("span",{children:n?"Light Mode":"Dark Mode"})]}),(0,Yy.jsx)("span",{className:"text-xs ".concat(n?"text-gray-400":"text-text-secondary"),children:n?"\u2600\ufe0f":"\ud83c\udf19"})]})}),(0,Yy.jsx)("div",{className:"".concat(n?"border-gray-700":"border-gray-200"," border-t"),children:(0,Yy.jsxs)("button",{onClick:async()=>{(await Wy()).success?(en.success("Signed out successfully"),i("/login")):en.error("Sign out failed")},className:"w-full px-4 py-2 text-left ".concat(n?"hover:bg-red-900/30":"hover:bg-red-50"," transition-colors flex items-center gap-2 text-red-600"),children:[(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})]})]})})}),(0,Yy.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 ".concat(n?"bg-gray-900 border-gray-700":"bg-white border-gray-200"," border-t shadow-lg z-[100] transition-colors"),children:(0,Yy.jsxs)("div",{className:"flex items-center justify-around py-3 safe-area-inset-bottom",children:[(0,Yy.jsxs)(ke,{to:"/",className:"flex flex-col items-center gap-1 transition-colors ".concat(l("/")?"text-primary":n?"text-gray-300":"text-text-secondary"),children:[(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,Yy.jsx)("span",{className:"text-xs font-semibold",children:"Home"})]}),(0,Yy.jsxs)(ke,{to:"/besties",className:"flex flex-col items-center gap-1 transition-colors ".concat(l("/besties")?"text-primary":n?"text-gray-300":"text-text-secondary"),children:[(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,Yy.jsx)("span",{className:"text-xs font-semibold",children:"Besties"})]}),(0,Yy.jsxs)(ke,{to:"/profile",className:"flex flex-col items-center gap-1 transition-colors ".concat(l("/profile")?"text-primary":n?"text-gray-300":"text-text-secondary"),children:[(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,Yy.jsx)("span",{className:"text-xs font-semibold",children:"Profile"})]})]})})]})};function ow(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function lw(e){return ow(e,Date.now())}function cw(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function uw(e,t){const n=cw(e),r=cw(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}Math.pow(10,8);const dw=43200;function hw(e,t){const n=cw(e),r=cw(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function fw(e){const t=cw(e);return t.setHours(23,59,59,999),t}function mw(e){const t=cw(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function pw(e){const t=cw(e);return+fw(t)===+mw(t)}function gw(e,t){const n=cw(e),r=cw(t),s=uw(n,r),i=Math.abs(hw(n,r));let A;if(i<1)A=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let t=uw(n,r)===-s;pw(cw(e))&&1===i&&1===uw(e,r)&&(t=!1),A=s*(i-Number(t))}return 0===A?0:A}function xw(e,t){return+cw(e)-+cw(t)}function yw(e,t,n){const r=xw(e,t)/1e3;return(s=null===n||void 0===n?void 0:n.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(r);var s}const ww={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function vw(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const bw={date:vw({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:vw({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:vw({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Bw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Cw(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Nw(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const A=i[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,e=>e.test(A)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,e=>e.test(A));let l;l=e.valueCallback?e.valueCallback(o):o,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(A.length)}}}var Ew;const Uw={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=ww[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:bw,formatRelative:(e,t,n,r)=>Bw[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Cw({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Cw({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cw({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Cw({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Cw({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Ew={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Ew.matchPattern);if(!n)return null;const r=n[0],s=e.match(Ew.parsePattern);if(!s)return null;let i=Ew.valueCallback?Ew.valueCallback(s[0]):s[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:Nw({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Nw({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nw({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Nw({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Nw({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let jw={};function Fw(){return jw}function Qw(e){const t=cw(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function kw(e,t,n){var r,s;const i=Fw(),A=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:i.locale)&&void 0!==r?r:Uw,a=uw(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:null===n||void 0===n?void 0:n.addSuffix,comparison:a});let l,c;a>0?(l=cw(t),c=cw(e)):(l=cw(e),c=cw(t));const u=yw(c,l),d=(Qw(c)-Qw(l))/1e3,h=Math.round((u-d)/60);let f;if(h<2)return null!==n&&void 0!==n&&n.includeSeconds?u<5?A.formatDistance("lessThanXSeconds",5,o):u<10?A.formatDistance("lessThanXSeconds",10,o):u<20?A.formatDistance("lessThanXSeconds",20,o):u<40?A.formatDistance("halfAMinute",0,o):u<60?A.formatDistance("lessThanXMinutes",1,o):A.formatDistance("xMinutes",1,o):0===h?A.formatDistance("lessThanXMinutes",1,o):A.formatDistance("xMinutes",h,o);if(h<45)return A.formatDistance("xMinutes",h,o);if(h<90)return A.formatDistance("aboutXHours",1,o);if(h<1440){const e=Math.round(h/60);return A.formatDistance("aboutXHours",e,o)}if(h<2520)return A.formatDistance("xDays",1,o);if(h<dw){const e=Math.round(h/1440);return A.formatDistance("xDays",e,o)}if(h<86400)return f=Math.round(h/dw),A.formatDistance("aboutXMonths",f,o);if(f=gw(c,l),f<12){const e=Math.round(h/dw);return A.formatDistance("xMonths",e,o)}{const e=f%12,t=Math.trunc(f/12);return e<3?A.formatDistance("aboutXYears",t,o):e<9?A.formatDistance("overXYears",t,o):A.formatDistance("almostXYears",t+1,o)}}function Iw(e,t){return kw(e,lw(e),t)}const Sw={extendCheckIn:ox(Dy,"extendCheckIn"),completeCheckIn:ox(Dy,"completeCheckIn"),sendBestieInvite:ox(Dy,"sendBestieInvite"),acceptBestieRequest:ox(Dy,"acceptBestieRequest"),declineBestieRequest:ox(Dy,"declineBestieRequest"),triggerEmergencySOS:ox(Dy,"triggerEmergencySOS"),createCheckoutSession:ox(Dy,"createCheckoutSession"),createPortalSession:ox(Dy,"createPortalSession"),sendTestAlert:ox(Dy,"sendTestAlert"),migratePhoneNumbers:ox(Dy,"migratePhoneNumbers")},Tw=()=>{const[e,n]=(0,t.useState)(!1),r=(0,t.useRef)(null),s=(0,t.useCallback)(async t=>{let{optimisticUpdate:s,serverUpdate:i,onSuccess:A,onError:a,rollback:o,successMessage:l,errorMessage:c="Something went wrong. Please try again.",showLoadingToast:u=!1,loadingMessage:d="Processing...",skipSuccessToast:h=!1}=t;if(e)return console.warn("Request already in progress"),{success:!1,error:"Request in progress"};n(!0);let f=null;r.current=new AbortController;try{s&&s(),u&&(f=en.loading(d));const e=await i();return A&&A(e),l&&!h?f?en.success(l,{id:f}):en.success(l):f&&en.dismiss(f),n(!1),{success:!0,data:e}}catch(m){console.error("Optimistic update failed:",m),o&&o(),a&&a(m);const e=m.message||c;return f?en.error(e,{id:f}):en.error(e),n(!1),{success:!1,error:e}}},[e]),i=(0,t.useCallback)(()=>{r.current&&r.current.abort(),n(!1)},[]);return{executeOptimistic:s,isProcessing:e,cancel:i}},_w=()=>{const e=te(),n=["We're so glad you're safe! \ud83d\udc96","Your besties will be so relieved! \u2728","Taking care of yourself like a queen! \ud83c\udf38","You're amazing, bestie! \ud83d\udc95","See you next time, stay safe! \ud83e\udd8b"],[r]=(0,t.useState)(()=>n[Math.floor(Math.random()*n.length)]);return(0,t.useEffect)(()=>{const t=setTimeout(()=>{e("/")},2e3);return()=>clearTimeout(t)},[e]),(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,Yy.jsxs)("div",{className:"relative mb-8",children:[(0,Yy.jsx)("div",{className:"text-8xl animate-bounce",children:"\ud83d\udc9a"}),(0,Yy.jsx)("div",{className:"absolute top-0 left-1/4 text-4xl animate-float opacity-70",children:"\u2728"}),(0,Yy.jsx)("div",{className:"absolute top-0 right-1/4 text-4xl animate-float delay-1s opacity-70",children:"\ud83d\udc95"})]}),(0,Yy.jsx)("h2",{className:"font-display text-3xl text-gradient mb-4",children:"You're Safe!"}),(0,Yy.jsx)("p",{className:"text-xl text-text-secondary font-semibold mb-8 animate-fade-in",children:r}),(0,Yy.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-success rounded-full mb-6 animate-scale-up",children:(0,Yy.jsx)("span",{className:"text-4xl text-white",children:"\u2713"})}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Until next time, bestie! \ud83d\udc9c"})]})})},Dw=e=>{var n;let{checkIn:r}=e;const{userData:s}=$y(),i=te(),[A,a]=(0,t.useState)(0),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[p,g]=(0,t.useState)(r.notes||""),[x,y]=(0,t.useState)(r.photoURLs||r.photoURL?[r.photoURL]:[]),[w,v]=(0,t.useState)(!1),[b,B]=(0,t.useState)(null),{executeOptimistic:C}=Tw(),[N,E]=(0,t.useState)(!1),[U,j]=(0,t.useState)("");(0,t.useEffect)(()=>{const e=()=>{const e=(b||r.alertTime.toDate())-new Date;a(Math.max(0,e))};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[r.alertTime,b]);const F=async()=>{var e;null!==s&&void 0!==s&&null!==(e=s.security)&&void 0!==e&&e.safetyPasscode?E(!0):await k()},Q=async()=>{var e,t;const n=null===s||void 0===s||null===(e=s.security)||void 0===e?void 0:e.safetyPasscode,r=null===s||void 0===s||null===(t=s.security)||void 0===t?void 0:t.duressCode;if(U){if(r&&U===r)return E(!1),j(""),void await I();if(U===n)return E(!1),j(""),void await k();en.error("Incorrect passcode"),j("")}else en.error("Please enter your passcode")},k=async()=>{u(!0);try{var e;l(!0);const n=await Sw.completeCheckIn({checkInId:r.id});var t;if(null===(e=n.data)||void 0===e||!e.success)throw new Error((null===(t=n.error)||void 0===t?void 0:t.message)||"Failed to complete check-in");const s=cm(Ty,"checkins",r.id),A=await gp(s);if(!A.exists()||"completed"!==A.data().status)throw new Error("Check-in status verification failed");setTimeout(()=>{i("/"),en.success("You're safe! Welcome home \ud83d\udc9c",{duration:4e3,icon:"\u2705"})},2e3)}catch(n){console.error("Error completing check-in:",n),u(!1),en.error("Failed to complete check-in. Please try again.")}finally{l(!1)}},I=async()=>{u(!0);try{await Sw.completeCheckIn({checkInId:r.id});const e={userId:r.userId,checkInId:r.id,type:"duress_code_used",message:"\ud83d\udea8 DURESS CODE USED - ".concat((null===s||void 0===s?void 0:s.displayName)||"User"," may be in danger!"),location:r.location,timestamp:yo.now(),priority:"critical"};await Bp(lm(Ty,"alerts"),e),setTimeout(()=>{i("/"),en.success("You're safe! Welcome home \ud83d\udc9c",{duration:4e3,icon:"\u2705"})},2e3)}catch(e){console.error("Error handling duress code:",e),setTimeout(()=>{i("/"),en.success("You're safe! Welcome home \ud83d\udc9c",{duration:4e3,icon:"\u2705"})},2e3)}},S=async e=>{const t=b||r.alertTime.toDate(),n=new Date(t.getTime()+60*e*1e3);B(n),h(e),en.success("Extended by ".concat(e," minutes!"),{duration:2e3});try{var s;const t=await Sw.extendCheckIn({checkInId:r.id,additionalMinutes:e});var i;if(null===(s=t.data)||void 0===s||!s.success)throw new Error((null===(i=t.error)||void 0===i?void 0:i.message)||"Failed to extend check-in");{const e=cm(Ty,"checkins",r.id),t=await gp(e);if(!t.exists())throw new Error("Unable to verify extension");B(t.data().alertTime.toDate())}}catch(A){console.error("Error extending check-in:",A),B(null),"unavailable"===A.code?en.error("Cannot reach server. Extension cancelled.",{duration:4e3}):en.error(A.message||"Failed to extend check-in. Extension cancelled.",{duration:4e3})}finally{h(null)}},T="alerted"===r.status;return c?(0,Yy.jsx)(_w,{}):(0,Yy.jsxs)("div",{className:"card p-6 ".concat(T?"border-2 border-danger":""),children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Yy.jsx)("span",{className:"text-base font-semibold text-text-secondary",children:"Time remaining:"}),(0,Yy.jsx)("span",{className:"font-display text-3xl ".concat(0===A?"text-danger":"text-primary"),children:0===A?"EXPIRED":(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),r=Math.floor(t%3600/60),s=t%60;return n>0?"".concat(n,"h ").concat(r,"m ").concat(s,"s"):"".concat(r,"m ").concat(s,"s")})(A)})]}),(0,Yy.jsx)("div",{className:"progress-bar h-3",children:(0,Yy.jsx)("div",{className:"progress-fill",style:{width:"".concat((()=>{const e=60*r.duration*1e3,t=e-A;return Math.min(100,Math.max(0,t/e*100))})(),"%")}})}),!T&&(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[(0,Yy.jsx)("button",{onClick:()=>S(15),disabled:null!==d,className:"btn btn-secondary text-sm py-2 active:scale-95",children:"+15m"}),(0,Yy.jsx)("button",{onClick:()=>S(30),disabled:null!==d,className:"btn btn-secondary text-sm py-2 active:scale-95",children:"+30m"}),(0,Yy.jsx)("button",{onClick:()=>S(60),disabled:null!==d,className:"btn btn-secondary text-sm py-2 active:scale-95",children:"+1h"})]})]}),!T&&(0,Yy.jsx)("button",{onClick:F,disabled:o,className:"w-full btn btn-success text-lg mb-6",children:"\u2705 I'm Safe!"}),T&&(0,Yy.jsxs)("div",{className:"bg-danger/10 border border-danger rounded-xl p-4 text-center mb-6",children:[(0,Yy.jsx)("p",{className:"font-semibold text-danger mb-2",children:"\ud83d\udea8 Your besties have been alerted!"}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mb-4",children:"They know you haven't checked in"}),(0,Yy.jsx)("button",{onClick:F,disabled:o,className:"btn btn-success w-full",children:"\u2705 I'm Safe! (False Alarm)"})]}),(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Yy.jsx)("div",{className:"flex-1",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary",children:r.location}),T&&(0,Yy.jsx)("span",{className:"badge badge-warning text-xs",children:"ALERTED"})]})})}),(x.length>0||!T)&&(0,Yy.jsxs)("div",{className:"mb-4",children:[(0,Yy.jsxs)("div",{className:"text-sm font-semibold text-text-secondary mb-2",children:["Photos (",x.length,"/5)"]}),x.length>0&&(0,Yy.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3",children:x.map((e,t)=>(0,Yy.jsxs)("div",{className:"relative aspect-square",children:[(0,Yy.jsx)("img",{src:e,alt:"Check-in ".concat(t+1),className:"w-full h-full object-cover rounded-xl"}),!T&&(0,Yy.jsx)("button",{onClick:()=>(async e=>{const t=[...x],n=x.filter((t,n)=>n!==e);await C({optimisticUpdate:()=>{y(n)},serverUpdate:async()=>{await vp(cm(Ty,"checkins",r.id),{photoURLs:n})},rollback:()=>{y(t)},successMessage:"Photo removed",errorMessage:"Failed to remove photo"})})(t),className:"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-full text-sm font-bold hover:bg-red-600 flex items-center justify-center",children:"\u2715"})]},t))}),!T&&x.length<5&&(0,Yy.jsxs)("label",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-all",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcf7"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:w?"Uploading...":x.length>0?"Add More Photos":"Add Photos"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Click to upload (up to 5, max 5MB each)"}),(0,Yy.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=Array.from(e.target.files);if(0===t.length)return;if(x.length+t.length>5)return void en.error("You can only have up to 5 photos per check-in");for(const r of t)if(r.size>5242880)return void en.error("".concat(r.name," is too large. Photos must be less than 5MB"));v(!0);const n=t.map(e=>URL.createObjectURL(e)),s=[...x];await C({optimisticUpdate:()=>{y([...x,...n])},serverUpdate:async()=>{try{const e=[];for(let n=0;n<t.length;n++){const s=t[n],i=Wg(_y,"checkin-photos/".concat(r.userId,"/").concat(Date.now(),"_").concat(n,"_").concat(s.name));await Vg(i,s);const A=await Gg(i);e.push(A)}const i=[...s,...e];return await vp(cm(Ty,"checkins",r.id),{photoURLs:i}),y(i),n.forEach(e=>URL.revokeObjectURL(e)),i}finally{v(!1)}},rollback:()=>{y(s),n.forEach(e=>URL.revokeObjectURL(e)),v(!1)},successMessage:"".concat(t.length," photo").concat(t.length>1?"s":""," uploaded!"),errorMessage:"Failed to upload photos"})},className:"hidden",disabled:w})]})]}),(0,Yy.jsx)("div",{className:"mb-4",children:f?(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-xl focus:border-primary focus:outline-none resize-none",rows:"3",placeholder:"Add notes about your check-in..."}),(0,Yy.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Yy.jsx)("button",{onClick:async()=>{const e=r.notes||"";await C({optimisticUpdate:()=>{m(!1)},serverUpdate:async()=>{await vp(cm(Ty,"checkins",r.id),{notes:p})},rollback:()=>{g(e),m(!0)},successMessage:"Notes updated!",errorMessage:"Failed to save notes"})},className:"btn btn-primary text-sm flex-1",children:"\ud83d\udcbe Save Notes"}),(0,Yy.jsx)("button",{onClick:()=>{m(!1),g(r.notes||"")},className:"btn btn-secondary text-sm flex-1",children:"Cancel"})]})]}):(0,Yy.jsx)("div",{children:p?(0,Yy.jsxs)("div",{className:"bg-gray-50 p-3 rounded-xl",children:[(0,Yy.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,Yy.jsx)("div",{className:"text-xs font-semibold text-gray-500",children:"NOTES:"}),!T&&(0,Yy.jsx)("button",{onClick:()=>m(!0),className:"text-xs text-primary font-semibold hover:underline",children:"Edit"})]}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary",children:p})]}):!T&&(0,Yy.jsx)("button",{onClick:()=>m(!0),className:"w-full border-2 border-dashed border-gray-300 rounded-xl p-3 text-sm font-semibold text-gray-600 hover:border-primary hover:bg-primary/5 transition-all",children:"\ud83d\udcdd Add Notes"})})}),(0,Yy.jsx)("div",{className:"mb-4",children:(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary mb-2",children:["Watching over you: ",(null===(n=r.bestieIds)||void 0===n?void 0:n.length)||0," besties"]})}),(0,Yy.jsxs)("div",{className:"mt-4 text-xs text-text-secondary text-center",children:["Started ",Iw(r.createdAt.toDate(),{addSuffix:!0})]}),N&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"\ud83d\udd12 Enter Passcode"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Enter your safety passcode to mark yourself safe"}),(0,Yy.jsx)("div",{className:"mb-6",children:(0,Yy.jsx)("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",value:U,onChange:e=>j(e.target.value.replace(/\D/g,"")),onKeyPress:e=>{"Enter"===e.key&&Q()},className:"w-full px-3 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:outline-none text-center text-3xl tracking-widest",placeholder:"\u2022\u2022\u2022\u2022",maxLength:6,autoFocus:!0})}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>{E(!1),j("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Yy.jsx)("button",{onClick:Q,disabled:!U,className:"flex-1 btn btn-success",children:"Confirm"})]}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary text-center mt-4",children:"Forgot your passcode? Update it in Settings"})]})})]})},Lw=e=>{let{onQuickCheckIn:t}=e;return(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Quick Check-In"}),(0,Yy.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{emoji:"\u2615",label:"Coffee Date",minutes:30,color:"from-amber-400 to-orange-500"},{emoji:"\ud83c\udf7d\ufe0f",label:"Dinner",minutes:60,color:"from-rose-400 to-pink-500"},{emoji:"\ud83c\udfac",label:"Movie",minutes:120,color:"from-purple-400 to-indigo-500"},{emoji:"\ud83c\udf7b",label:"Drinks",minutes:90,color:"from-blue-400 to-cyan-500"}].map(e=>(0,Yy.jsxs)("button",{onClick:()=>t(e.minutes),className:"card p-6 hover:shadow-card-hover transition-all hover:scale-105 active:scale-95 bg-gradient-to-br ".concat(e.color," text-white"),children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:e.emoji}),(0,Yy.jsx)("div",{className:"font-display text-lg mb-1",children:e.label}),(0,Yy.jsxs)("div",{className:"text-sm opacity-90",children:[e.minutes," minutes"]})]},e.label))})]})},Hw=()=>{const[e,n]=(0,t.useState)(!1),r=te(),s=async e=>{n(!0);try{const t=await Sw.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:en.error("Failed to start donation")}catch(t){console.error("Donation error:",t),en.error("Failed to start donation")}finally{n(!1)}};return(0,Yy.jsxs)("div",{className:"card p-6 bg-gradient-to-br from-primary/5 to-secondary/5 border-2 border-primary/20",children:[(0,Yy.jsxs)("div",{className:"text-center mb-4",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc9c"}),(0,Yy.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Keep Besties Free"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm",children:"Our goal is to keep it free for everyone, but we rely on donations to make it happen"})]}),(0,Yy.jsxs)("div",{className:"space-y-3",children:[(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>s(1),disabled:e,className:"btn btn-secondary text-sm",children:"$1/mo"}),(0,Yy.jsx)("button",{onClick:()=>s(5),disabled:e,className:"btn btn-primary text-sm",children:"$5/mo"}),(0,Yy.jsx)("button",{onClick:()=>s(10),disabled:e,className:"btn btn-secondary text-sm",children:"$10/mo"})]}),(0,Yy.jsx)("button",{onClick:()=>r("/about"),className:"w-full text-primary hover:text-primary-dark font-semibold text-sm underline transition-colors",children:"Learn more about Besties \u2192"}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary text-center",children:"Every donation helps keep Besties free \ud83d\udc9c"})]})]})},Rw=e=>{let{templates:t=[],onSelect:n}=e;return 0===t.length?null:(0,Yy.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(e=>(0,Yy.jsxs)("button",{onClick:()=>n(e),className:"card p-4 text-left hover:shadow-card-hover transition-all hover:scale-105 active:scale-95",children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.name}),(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary mb-2",children:["\ud83d\udccd ",e.location]}),(0,Yy.jsxs)("div",{className:"text-xs text-primary font-semibold",children:["\u23f0 ",e.duration," min"]})]},e.id))})},Pw=()=>{const{currentUser:e,userData:n}=$y(),[r,s]=(0,t.useState)(!1),[i,A]=(0,t.useState)(null),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(0),u=(0,t.useRef)(null),d=(0,t.useRef)(null),h=(0,t.useRef)(null),{executeOptimistic:f}=Tw();(0,t.useEffect)(()=>{if(!a)return;const e=e=>(e.preventDefault(),e.returnValue="Emergency alert is active! Hold the cancel button for 10 seconds to dismiss.",e.returnValue);return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[a]);const m=()=>{u.current&&(clearInterval(u.current),u.current=null),s(!1),A(null),en("SOS cancelled")},p=async()=>{await f({optimisticUpdate:()=>{s(!1),o(!0)},serverUpdate:async()=>{let t="Location unavailable";if(navigator.geolocation)try{const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:3e3})});t="GPS: ".concat(e.coords.latitude.toFixed(4),", ").concat(e.coords.longitude.toFixed(4))}catch(r){console.error("Location error:",r)}return await Bp(lm(Ty,"emergency_sos"),{userId:e.uid,userName:(null===n||void 0===n?void 0:n.displayName)||"User",location:t,timestamp:yo.now(),status:"active",type:"sos",message:"\ud83d\udea8 EMERGENCY - User needs immediate help!"})},rollback:()=>{o(!1),s(!1)},successMessage:"\ud83d\udea8 Emergency alert sent to all besties!",errorMessage:"Failed to send emergency alert. Please try again.",skipSuccessToast:!1})},g=()=>{h.current=Date.now(),c(0),d.current=setInterval(()=>{const e=Date.now()-h.current,t=Math.min(e/1e4*100,100);c(t),t>=100&&y()},50)},x=()=>{d.current&&(clearInterval(d.current),d.current=null),c(0),en.error("Hold button for 10 seconds to cancel alert")},y=()=>{d.current&&(clearInterval(d.current),d.current=null),o(!1),c(0),en.success("Emergency alert cancelled")};return a?(0,Yy.jsx)("div",{className:"fixed inset-0 bg-orange-500/95 z-[9999] flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"text-center max-w-md",children:[(0,Yy.jsx)("div",{className:"text-8xl mb-6 animate-pulse",children:"\ud83d\udea8"}),(0,Yy.jsx)("h2",{className:"text-4xl font-display text-white mb-4",children:"EMERGENCY ALERT SENT"}),(0,Yy.jsx)("p",{className:"text-xl text-white mb-8",children:"Your besties have been notified!"}),(0,Yy.jsxs)("div",{className:"relative",children:[(0,Yy.jsxs)("button",{onMouseDown:g,onMouseUp:x,onMouseLeave:x,onTouchStart:g,onTouchEnd:x,className:"btn bg-white text-orange-600 text-xl px-12 py-6 font-bold relative overflow-hidden",children:[(0,Yy.jsx)("div",{className:"absolute inset-0 bg-green-500/30 transition-all",style:{width:"".concat(l,"%")}}),(0,Yy.jsx)("span",{className:"relative z-10",children:0===l?"HOLD TO CANCEL":"".concat(Math.ceil((100-l)/10),"s")})]}),(0,Yy.jsx)("p",{className:"text-sm text-white mt-4",children:"Hold for 10 seconds to cancel the emergency alert"})]})]})}):r?(0,Yy.jsx)("div",{className:"fixed inset-0 bg-danger/95 z-50 flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-9xl font-display text-white mb-8 animate-pulse",children:i}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-white mb-4",children:"EMERGENCY SOS"}),(0,Yy.jsx)("p",{className:"text-xl text-white mb-8",children:"Sending alert to all besties..."}),(0,Yy.jsx)("button",{onClick:m,className:"btn bg-white text-danger text-xl px-12 py-4",children:"CANCEL"})]})}):(0,Yy.jsxs)("button",{onClick:()=>{A(5),s(!0),u.current=setInterval(()=>{A(e=>e<=1?(clearInterval(u.current),u.current=null,p(),null):e-1)},1e3)},className:"fixed bottom-24 right-6 w-20 h-20 bg-danger text-white rounded-full shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 flex flex-col items-center justify-center transition-all duration-200 z-40 animate-pulse",title:"Emergency SOS - Hold for 5 seconds",children:[(0,Yy.jsx)("span",{className:"text-3xl",children:"\ud83c\udd98"}),(0,Yy.jsx)("span",{className:"text-xs font-bold",children:"SOS"})]})};var Mw=n(239),Ow=n.n(Mw);const Kw=()=>{var e;const{currentUser:n,userData:r}=$y(),[s,i]=(0,t.useState)([]),[A,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),d=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(!c)return;(()=>{const e=["#9333ea","#ec4899","#8b5cf6","#d946ef","#a855f7"],t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="10000",document.body.appendChild(t);for(let r=0;r<100;r++){const n=document.createElement("div");n.style.position="absolute",n.style.width="10px",n.style.height="10px",n.style.backgroundColor=e[Math.floor(Math.random()*e.length)],n.style.left=100*Math.random()+"%",n.style.top="-10px",n.style.opacity=Math.random(),n.style.transform="rotate(".concat(360*Math.random(),"deg)");const r=3*Math.random()+2,s=.5*Math.random();n.style.animation="fall ".concat(r,"s linear ").concat(s,"s forwards"),t.appendChild(n)}const n=document.createElement("style");n.innerHTML="\n        @keyframes fall {\n          to {\n            transform: translateY(100vh) rotate(720deg);\n            opacity: 0;\n          }\n        }\n      ",document.head.appendChild(n),setTimeout(()=>{t.remove(),n.remove()},5e3)})()},[c]),(0,t.useEffect)(()=>{if(!n||null===r||void 0===r||!r.onboardingCompleted)return;(async()=>{try{const e=Jm(lm(Ty,"bestie_celebrations"),$m("userId","==",n.uid),$m("seen","==",!1)),t=await yp(e);if(!t.empty){const e=t.docs.map(e=>Re({id:e.id},e.data()));i(e),a(e[0]),l(e[0].id),u(!0),console.log("\ud83c\udf89 Found ".concat(e.length," celebration(s) to show"))}}catch(e){console.error("Error checking for celebrations:",e)}})()},[n,r]);const h=async e=>{try{const t=d.current;if(!t)return;const n=(await Ow()(t,{backgroundColor:null,scale:2})).toDataURL("image/png"),r="".concat(A.bestieName," and I are now besties on Besties App! \ud83d\udc9c"),s="https://bestiesapp.web.app";switch(e){case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r),"&url=").concat(encodeURIComponent(s)),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(s),"&quote=").concat(encodeURIComponent(r)),"_blank");break;case"download":const e=document.createElement("a");e.download="besties-celebration.png",e.href=n,e.click()}}catch(t){console.error("Error sharing:",t)}};return c&&A?(0,Yy.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center z-[9999] p-4",children:(0,Yy.jsxs)("div",{className:"max-w-md w-full",children:[(0,Yy.jsx)("div",{ref:d,className:"bg-gradient-to-br from-purple-500 to-pink-500 p-4 sm:p-6 md:p-8 rounded-3xl",children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-5xl sm:text-6xl md:text-8xl mb-4 sm:mb-6 animate-bounce",children:"\ud83c\udf89"}),(0,Yy.jsxs)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-display text-white mb-3 sm:mb-4 px-2",children:["You and ",A.bestieName||"your friend"," are besties!"]}),(0,Yy.jsx)("p",{className:"text-base sm:text-lg md:text-xl text-white/90 mb-2 px-2",children:"You can now add each other as emergency contacts"}),(0,Yy.jsxs)("div",{className:"flex justify-center items-center gap-3 sm:gap-4 my-6 sm:my-8",children:[(0,Yy.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-white rounded-full flex items-center justify-center shadow-xl overflow-hidden flex-shrink-0",children:A.bestiePhotoURL?(0,Yy.jsx)("img",{src:A.bestiePhotoURL,alt:A.bestieName,className:"w-full h-full object-cover"}):(0,Yy.jsx)("div",{className:"text-2xl sm:text-3xl text-purple-600",children:(null===(e=A.bestieName)||void 0===e?void 0:e[0])||"?"})}),(0,Yy.jsx)("div",{className:"text-3xl sm:text-4xl animate-pulse flex-shrink-0",children:"\ud83d\udc9c"}),(0,Yy.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-white rounded-full flex items-center justify-center shadow-xl overflow-hidden flex-shrink-0",children:null!==r&&void 0!==r&&r.photoURL?(0,Yy.jsx)("img",{src:r.photoURL,alt:"You",className:"w-full h-full object-cover"}):(0,Yy.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:"YOU"})})]}),(0,Yy.jsxs)("p",{className:"text-sm sm:text-base text-white/80 mb-4 sm:mb-6 px-2",children:[A.bestieName," will be notified if you don't check in on time"]})]})}),s.length>1&&(0,Yy.jsx)("div",{className:"text-center mt-4",children:(0,Yy.jsxs)("p",{className:"text-white text-sm",children:[s.length-1," more celebration",s.length>2?"s":""," remaining"]})}),(0,Yy.jsxs)("div",{className:"mt-4 sm:mt-6 flex justify-center gap-3 sm:gap-4",children:[(0,Yy.jsx)("button",{onClick:()=>h("twitter"),className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 sm:p-3 transition-all",title:"Share on Twitter",children:(0,Yy.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),(0,Yy.jsx)("button",{onClick:()=>h("facebook"),className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 sm:p-3 transition-all",title:"Share on Facebook",children:(0,Yy.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"})})}),(0,Yy.jsx)("button",{onClick:()=>h("download"),className:"bg-white/20 hover:bg-white/30 text-white rounded-full p-2 sm:p-3 transition-all",title:"Download image",children:(0,Yy.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),(0,Yy.jsx)("div",{className:"flex justify-center mt-4 sm:mt-6",children:(0,Yy.jsx)("button",{onClick:async()=>{if(o)try{await vp(cm(Ty,"bestie_celebrations",o),{seen:!0}),console.log("\u2705 Celebration marked as seen")}catch(t){console.error("Error marking celebration as seen:",t)}const e=s.slice(1);e.length>0?(i(e),a(e[0]),l(e[0].id),console.log("\ud83d\udccb Showing next celebration (".concat(e.length," remaining)"))):(u(!1),a(null),l(null))},className:"btn bg-white text-purple-600 hover:bg-white/90 text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 font-bold",children:"Continue \u2192"})})]})}):null},Vw=["Stay safe out there, queen! \ud83d\udc51","Your besties have your back! \ud83d\udc9c","Looking out for you, babe! \u2728","Let's keep you safe, hun! \ud83d\udee1\ufe0f","Ready to slay safely? \ud83d\udc85","Your safety squad is here! \ud83c\udf1f","Go live your life, we got you! \ud83d\udc95","Be bold, be safe, be you! \u26a1","Adventure awaits safely! \ud83c\udf38","Your crew is watching out! \ud83d\udc6f\u200d\u2640\ufe0f","Stay fierce, stay safe! \ud83d\udd25","We're here if you need us! \ud83e\udd17","Go make memories safely! \ud83d\udcf8","Your safety, your way! \ud83d\udc96","Protected and empowered! \u2b50","Living your best life safely! \ud83e\udd8b","Your peace of mind matters! \ud83c\udf3a","Safe vibes only! \u270c\ufe0f","Let's keep you covered, sis! \ud83d\udcaa","Confidence + Safety = You! \ud83d\udc8e"],Gw=()=>{var e,n,r,s;const{currentUser:i,userData:A,loading:a}=$y(),o=te(),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(!0),[m,p]=(0,t.useState)(!1),[g,x]=(0,t.useState)(""),y=(0,t.useMemo)(()=>Vw[Math.floor(Math.random()*Vw.length)],[]);(0,t.useEffect)(()=>{a||A&&!1===A.onboardingCompleted&&o("/onboarding")},[A,a,o]),(0,t.useEffect)(()=>{if(a)return;localStorage.getItem("pending_invite")&&!i&&(console.log("\ud83d\udce8 Pending invite detected, redirecting to login..."),o("/login"))},[i,a,o]),(0,t.useEffect)(()=>{if(!i)return;const e=Cp(Jm(lm(Ty,"checkins"),$m("userId","==",i.uid),$m("status","in",["active","alerted"])),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),c(t),f(!1)},e=>{console.error("Error loading check-ins:",e),c([]),f(!1)}),t=Cp(Jm(lm(Ty,"templates"),$m("userId","==",i.uid)),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),d(t)},e=>{console.error("Error loading templates:",e),d([])});return()=>{e(),t()}},[i]);return h?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6 animate-fade-in",children:[(0,Yy.jsxs)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:["Hey ",(null===A||void 0===A?void 0:A.displayName)||"there","! \ud83d\udc4b"]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:l.length>0?"You have ".concat(l.length," active check-in").concat(l.length>1?"s":""):y})]}),0===l.length&&(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)(Lw,{onQuickCheckIn:e=>{o("/create",{state:{quickMinutes:e}})}}),(0,Yy.jsx)("button",{onClick:()=>o("/create"),className:"w-full btn btn-primary text-lg py-4 mb-4",children:"\u2728 Create Custom Check-In"}),null!==A&&void 0!==A&&null!==(e=A.requestAttention)&&void 0!==e&&e.active?(0,Yy.jsx)("div",{className:"card p-4 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Yy.jsx)("div",{className:"text-3xl",children:"\ud83d\udc9c"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-purple-900 mb-2",children:"You're requesting attention"}),(0,Yy.jsx)("div",{className:"inline-block px-3 py-1 bg-purple-200 text-purple-900 rounded-full text-sm font-semibold mb-2",children:A.requestAttention.tag}),(0,Yy.jsx)("p",{className:"text-sm text-purple-700 mt-2",children:"Your besties can see this on your profile \ud83d\udc9c"})]}),(0,Yy.jsx)("button",{onClick:async()=>{try{await vp(cm(Ty,"users",i.uid),{"requestAttention.active":!1}),en.success("Request removed")}catch(e){console.error("Error canceling request:",e),en.error("Failed to cancel request")}},className:"text-purple-700 hover:text-purple-900 font-semibold text-sm",children:"Remove"})]})}):(0,Yy.jsxs)("div",{className:"card p-4 mb-6 bg-gradient-to-br from-blue-50 to-purple-50 border border-purple-100",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-gray-800 mb-3",children:"Need Support?"}),(0,Yy.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Let your besties know you could use some attention. They'll see a badge on your profile everywhere in the app."}),(0,Yy.jsxs)("div",{className:"bg-white rounded-xl p-4 mb-4 border-2 border-purple-200",children:[(0,Yy.jsx)("p",{className:"text-xs font-semibold text-purple-700 mb-3",children:"Example messages:"}),(0,Yy.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,Yy.jsx)(Aw,{photoURL:null===A||void 0===A?void 0:A.photoURL,name:(null===A||void 0===A?void 0:A.displayName)||(null===i||void 0===i?void 0:i.email)||"You",requestAttention:{active:!0,tag:"\ud83d\udcac Needs to vent"},size:"lg",showBubble:!0}),(0,Yy.jsx)(Aw,{photoURL:null===A||void 0===A?void 0:A.photoURL,name:(null===A||void 0===A?void 0:A.displayName)||(null===i||void 0===i?void 0:i.email)||"You",requestAttention:{active:!0,tag:"\ud83e\udec2 Need a shoulder"},size:"lg",showBubble:!0}),(0,Yy.jsx)(Aw,{photoURL:null===A||void 0===A?void 0:A.photoURL,name:(null===A||void 0===A?void 0:A.displayName)||(null===i||void 0===i?void 0:i.email)||"You",requestAttention:{active:!0,tag:"\ud83d\udc9c Could use support"},size:"lg",showBubble:!0})]})]}),(0,Yy.jsx)("button",{onClick:()=>p(!0),className:"btn btn-primary w-full",children:"\ud83d\udc9c Request Attention"})]})]}),l.length>0&&(0,Yy.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"Active Check-Ins"}),l.map(e=>(0,Yy.jsx)(Dw,{checkIn:e},e.id))]}),u.length>0&&0===l.length&&(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Your Templates"}),(0,Yy.jsx)(Rw,{templates:u,onSelect:e=>{o("/create",{state:{template:e}})}})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary",children:"Your Safety Stats"}),(0,Yy.jsx)("button",{onClick:()=>o("/history"),className:"text-primary font-semibold hover:underline text-sm",children:"View History \u2192"})]}),(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-primary",children:(null===A||void 0===A||null===(n=A.stats)||void 0===n?void 0:n.completedCheckIns)||0}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Safe Check-ins"})]}),(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:(null===A||void 0===A||null===(r=A.stats)||void 0===r?void 0:r.totalBesties)||0}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Besties"})]}),(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-accent",children:l.length}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Now"})]})]})]}),(0,Yy.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-100",children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udc9c"}),(0,Yy.jsx)("h3",{className:"font-display text-2xl text-gradient mb-3",children:"You're Part of Something Special"}),(0,Yy.jsx)("p",{className:"text-text-secondary leading-relaxed mb-4",children:"Hey bestie! We just wanted to say\u2014you being here means everything. Every check-in you create, every friend you add, every safe moment you share... you're part of a community that's got each other's backs. We're building this together, and we couldn't do it without amazing people like you. You're not just using an app\u2014you're one of the besties. \ud83d\udc95"}),(0,Yy.jsx)("p",{className:"text-sm text-primary font-semibold",children:"Keep slaying safely, queen! \ud83d\udc51\u2728"})]})}),!(null!==A&&void 0!==A&&null!==(s=A.donationStats)&&void 0!==s&&s.isActive)&&(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsxs)("div",{className:"text-center mb-4",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-gradient mb-2",children:"Want to help us out? \ud83d\udc9c"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm",children:"Here are all the ways you can support Besties and keep safety accessible for everyone"})]}),(0,Yy.jsx)(Hw,{}),(0,Yy.jsxs)("div",{className:"flex items-center gap-4 my-6",children:[(0,Yy.jsx)("div",{className:"flex-1 h-px bg-gray-300"}),(0,Yy.jsx)("span",{className:"text-text-secondary font-semibold",children:"OR"}),(0,Yy.jsx)("div",{className:"flex-1 h-px bg-gray-300"})]}),(0,Yy.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-100",children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udc6f\u200d\u2640\ufe0f"}),(0,Yy.jsx)("h3",{className:"font-display text-2xl text-gradient mb-3",children:"Grow the Squad!"}),(0,Yy.jsx)("p",{className:"text-text-secondary leading-relaxed mb-4",children:"Love Besties? Invite your friends! The more people who join, the stronger our safety network becomes. Plus, it helps us keep the app free for everyone. Share the love! \ud83d\udc96"}),(0,Yy.jsx)("button",{onClick:()=>o("/besties"),className:"btn btn-secondary w-full text-lg py-3",children:"\ud83c\udf89 Invite Friends"}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary mt-3",children:"Every new friend makes Besties better for everyone!"})]})})]})]}),(0,Yy.jsx)(Pw,{}),(0,Yy.jsx)(Kw,{}),m&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc9c Request Attention"}),(0,Yy.jsx)("p",{className:"text-base text-text-secondary mb-6",children:"Let your besties know you could use some support. This is a non-urgent request - they'll see a badge on your profile throughout the app."}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"How can your besties help?"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Yy.jsxs)("button",{onClick:()=>x("Needs to vent \ud83d\udcac"),className:"p-3 rounded-xl border-2 text-left ".concat("Needs to vent \ud83d\udcac"===g?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Yy.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udcac"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold",children:"Needs to vent"})]}),(0,Yy.jsxs)("button",{onClick:()=>x("Needs a shoulder \ud83e\udec2"),className:"p-3 rounded-xl border-2 text-left ".concat("Needs a shoulder \ud83e\udec2"===g?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Yy.jsx)("div",{className:"text-2xl mb-1",children:"\ud83e\udec2"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold",children:"Needs a shoulder"})]}),(0,Yy.jsxs)("button",{onClick:()=>x("Could use support \ud83d\udc9c"),className:"p-3 rounded-xl border-2 text-left ".concat("Could use support \ud83d\udc9c"===g?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Yy.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udc9c"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold",children:"Could use support"})]}),(0,Yy.jsxs)("button",{onClick:()=>x("Having a rough day \ud83d\ude14"),className:"p-3 rounded-xl border-2 text-left ".concat("Having a rough day \ud83d\ude14"===g?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Yy.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\ude14"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold",children:"Rough day"})]}),(0,Yy.jsxs)("button",{onClick:()=>x("Let's do something \ud83c\udf89"),className:"p-3 rounded-xl border-2 text-left ".concat("Let's do something \ud83c\udf89"===g?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Yy.jsx)("div",{className:"text-2xl mb-1",children:"\ud83c\udf89"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold",children:"Let's hang out"})]}),(0,Yy.jsxs)("button",{onClick:()=>x("Want to chat \ud83d\udcf1"),className:"p-3 rounded-xl border-2 text-left ".concat("Want to chat \ud83d\udcf1"===g?"border-primary bg-purple-50":"border-gray-200 hover:border-primary"),children:[(0,Yy.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udcf1"}),(0,Yy.jsx)("div",{className:"text-sm font-semibold",children:"Want to chat"})]})]})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>{p(!1),x("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Yy.jsx)("button",{onClick:async()=>{if(g)try{await vp(cm(Ty,"users",i.uid),{requestAttention:{active:!0,tag:g,timestamp:yo.now()}});try{const e=Jm(lm(Ty,"besties"),$m("status","==","accepted")),t=await yp(e),n=[];t.forEach(e=>{const t=e.data();t.requesterId===i.uid?n.push({id:t.recipientId}):t.recipientId===i.uid&&n.push({id:t.requesterId})});for(const r of n)await Jy.notifyRequestAttention(r.id,(null===A||void 0===A?void 0:A.displayName)||"A bestie",i.uid)}catch(e){console.error("Error sending notifications:",e)}en.success("Your besties will see your request \ud83d\udc9c"),p(!1),x("")}catch(t){console.error("Error requesting attention:",t),en.error("Failed to send request")}else en.error("Please select an option")},className:"flex-1 btn btn-primary",children:"Send Request"})]})]})})]})},Ww={core:!0,auth:!0,checkIns:!0,besties:!0,templates:!0,quickButtons:!0,celebrationMessages:!0,gpsLocation:!0,manualLocation:!0,extendButtons:!0,bestieCircle:!0,badges:!0,shareableCards:!0,mediaUpload:!0,photoCapture:!0,donations:!0,smsSubscription:!0,emergency:!1,reversePin:!1,liveTracking:!1,videoRecording:!1,facebookLogin:!1,phoneAuth:!1},zw=e=>!0===Ww[e],qw=()=>{const e=["Setting up your safety net... \ud83d\udc96","Notifying your besties... \u2728","Your safety is our priority! \ud83d\udee1\ufe0f","Almost there, bestie! \ud83d\udc95","Getting everything ready... \ud83c\udf38"],[n]=(0,t.useState)(()=>e[Math.floor(Math.random()*e.length)]);return(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,Yy.jsx)("div",{className:"text-8xl mb-6 animate-pulse",children:"\ud83d\udc96"}),(0,Yy.jsx)("h2",{className:"font-display text-3xl text-gradient mb-4",children:"Creating your check-in!"}),(0,Yy.jsx)("p",{className:"text-xl text-text-secondary font-semibold mb-8 animate-fade-in",children:n}),(0,Yy.jsx)("div",{className:"flex justify-center gap-2 mb-8",children:[0,1,2].map(e=>(0,Yy.jsx)("div",{className:"w-4 h-4 bg-gradient-primary rounded-full animate-bounce",style:{animationDelay:"".concat(.15*e,"s")}},e))}),(0,Yy.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,Yy.jsx)("div",{className:"h-full bg-gradient-primary animate-pulse"})})]})})},Yw=()=>{const{currentUser:e,userData:n,loading:r}=$y(),s=te(),i=$(),[A,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(30),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(""),[f,m]=(0,t.useState)(""),[p,g]=(0,t.useState)([]),[x,y]=(0,t.useState)([]),[w,v]=(0,t.useState)([]),[b,B]=(0,t.useState)(!1),[C,N]=(0,t.useState)(!1),[E,U]=(0,t.useState)(!1),{executeOptimistic:j}=Tw(),[F,Q]=(0,t.useState)(null),[k,I]=(0,t.useState)(!1),S={lat:37.7749,lng:-122.4194},T=(0,t.useRef)(null),_=(0,t.useRef)(null),D=(0,t.useRef)(null),L=(0,t.useRef)(null),H=(0,t.useRef)(null);(0,t.useEffect)(()=>{r||n&&!1===n.onboardingCompleted&&s("/onboarding")},[n,r,s]),(0,t.useEffect)(()=>{var e,t;if(qy.trackFunnelStep("checkin","view_create_page"),null!==(e=i.state)&&void 0!==e&&e.quickMinutes&&(qy.trackFunnelStep("checkin","use_quick_button",{minutes:i.state.quickMinutes}),l(i.state.quickMinutes)),null!==(t=i.state)&&void 0!==t&&t.template){qy.trackFunnelStep("checkin","use_template");const e=i.state.template;a(e.location||""),l(e.duration||30),u(e.bestieIds||[]),h(e.notes||"")}},[i.state]),(0,t.useEffect)(()=>{if(!e||r)return;console.group("\ud83d\udd0d Setting up Bestie Circle Listener");const t=Cp(cm(Ty,"users",e.uid),async t=>{try{var n;if(!t.exists())return console.error("\u274c User document does not exist"),console.groupEnd(),void v([]);const r=t.data().featuredCircle||[];if(console.log("\ud83d\udd04 Real-time update - featuredCircle:",r),console.log("featuredCircle length:",r.length),0===r.length)return console.warn("\u26a0\ufe0f featuredCircle is empty - no besties to load"),void v([]);console.log("\ud83d\udce1 Querying besties collection...");const[s,A]=await Promise.all([yp(Jm(lm(Ty,"besties"),$m("requesterId","==",e.uid),$m("status","==","accepted"))),yp(Jm(lm(Ty,"besties"),$m("recipientId","==",e.uid),$m("status","==","accepted")))]);console.log("Requester query results:",s.size),console.log("Recipient query results:",A.size);const a=[];s.forEach(e=>{const t=e.data();a.push({id:t.recipientId,name:t.recipientName||"Bestie",phone:t.recipientPhone,email:t.recipientEmail})}),A.forEach(e=>{const t=e.data();a.push({id:t.requesterId,name:t.requesterName||"Bestie",phone:t.requesterPhone,email:t.requesterEmail})}),console.log("All besties found:",a),console.log("Filtering for featuredCircle IDs:",r);const o=a.filter(e=>{const t=r.includes(e.id);return console.log("Bestie ".concat(e.name," (").concat(e.id,"): ").concat(t?"IN":"NOT IN"," circle")),t});console.log("\u2705 Circle besties after filtering:",o);const l=await Promise.all(o.map(async e=>{try{const t=await gp(cm(Ty,"users",e.id));if(t.exists()){const n=t.data();return Re(Re({},e),{},{name:n.displayName||e.name||e.email||"Bestie",photoURL:n.photoURL||null,email:n.email||e.email,phone:n.phoneNumber||e.phone,requestAttention:n.requestAttention||null})}return e}catch(t){return console.error("Error fetching user data for ".concat(e.id,":"),t),e}}));if(v(l),(null===(n=i.state)||void 0===n||!n.template)&&l.length>0){const e=l.filter(e=>e.phone);u(e.map(e=>e.id));const t=l.filter(e=>!e.phone);t.length>0&&(console.warn("\u26a0\ufe0f Some circle besties missing phone numbers:",t),en("Some besties need to add their phone number before they can be alerted",{icon:"\u2139\ufe0f",duration:4e3}))}}catch(r){console.error("Error loading besties:",r),en.error("Failed to load besties")}},e=>{console.error("Error in featuredCircle listener:",e),en.error("Failed to load besties")});return console.groupEnd(),()=>{console.log("\ud83d\udd0c Cleaning up featuredCircle listener"),t()}},[e,r]),(0,t.useEffect)(()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY;if(!e)return console.warn("Google Maps API key not configured"),void en.error("Address autocomplete is not available. Please type your location manually.",{duration:5e3,id:"maps-api-missing"});const t=()=>!!(window.google&&window.google.maps&&window.google.maps.places)&&(U(!0),!0);if(t())return;if(document.querySelector('script[src*="maps.googleapis.com"]')){const e=setInterval(()=>{t()&&clearInterval(e)},100);return()=>clearInterval(e)}const n=document.createElement("script");return n.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places&callback=initMap"),n.async=!0,n.defer=!0,window.initMap=()=>{U(!0),delete window.initMap},n.onerror=()=>{console.error("Failed to load Google Maps API"),en.error("Failed to load address autocomplete",{duration:2e3})},document.head.appendChild(n),()=>{window.initMap&&delete window.initMap}},[]),(0,t.useEffect)(()=>{if(E&&L.current&&!k)try{H.current=new window.google.maps.Map(L.current,{center:S,zoom:12,disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,draggable:!0,gestureHandling:"greedy"}),H.current.addListener("dragend",()=>{const e=H.current.getCenter(),t={lat:e.lat(),lng:e.lng()};Q(t);(new window.google.maps.Geocoder).geocode({location:t},(e,t)=>{"OK"===t&&e[0]&&a(e[0].formatted_address)})}),I(!0)}catch(e){console.error("Error initializing map:",e)}},[E,k]),(0,t.useEffect)(()=>{if(E&&T.current){try{_.current=new window.google.maps.places.Autocomplete(T.current,{types:["establishment","geocode"],fields:["formatted_address","name","geometry"]}),_.current.addListener("place_changed",()=>{const e=_.current.getPlace();if(e.formatted_address){const t=e.name&&e.name!==e.formatted_address?"".concat(e.name,", ").concat(e.formatted_address):e.formatted_address;if(a(t),e.geometry&&e.geometry.location&&H.current){const t=e.geometry.location,n={lat:t.lat(),lng:t.lng()};H.current.setCenter(n),H.current.setZoom(15),Q(n)}}})}catch(e){console.error("Error initializing autocomplete:",e)}return()=>{_.current&&window.google.maps.event.clearInstanceListeners(_.current)}}},[E]),(0,t.useEffect)(()=>{if(F&&H.current)try{H.current.setCenter(F),H.current.setZoom(16)}catch(e){console.error("Error updating map with GPS:",e)}},[F]);return C?(0,Yy.jsx)(qw,{}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Create Check-In"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:(()=>{const e=["Let's make sure you're safe out there, babe! \ud83d\udc95","Your safety is everything to us! Let's set this up together \ud83e\udd17","We've got your back, bestie! Let's get you protected \u2728","Setting up your safety net - because you matter so much! \ud83d\udc9c","Let's make sure you can have fun worry-free, love! \ud83c\udf1f","Your besties are here to watch over you! Let's do this \ud83d\udcaa","Keep yourself safe while living your best life! \ud83e\udd8b","We're all about keeping our girl protected! Let's go \ud83d\udc9d"];return e[(new Date).getHours()%e.length]})()})]}),(0,Yy.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),0===c.length)return qy.trackFunnelStep("checkin","error_no_besties"),void en.error("Please select at least one bestie from your circle to notify",{duration:4e3});const r=c.filter(e=>{const t=w.find(t=>t.id===e);return!(null!==t&&void 0!==t&&t.phone)}).map(e=>{const t=w.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.name)||"Unknown"});if(!(r.length>0))return A.trim()?void(o<15||o>180?en.error("Duration must be between 15 and 180 minutes"):(qy.trackFunnelStep("checkin","submit_checkin",{besties:c.length,duration:o,hasNotes:!!d}),N(!0),await j({optimisticUpdate:()=>{},serverUpdate:async()=>{B(!0);try{var t;const r=new Date,i=new Date(r.getTime()+60*o*1e3),a=[];if(p.length>0)for(let t=0;t<p.length;t++){const n=p[t],r=Wg(_y,"checkin-photos/".concat(e.uid,"/").concat(Date.now(),"_").concat(t,"_").concat(n.name));await Vg(r,n);const s=await Gg(r);a.push(s)}const l=(null===n||void 0===n||null===(t=n.privacySettings)||void 0===t?void 0:t.checkInVisibility)||"all_besties",u=(null===n||void 0===n?void 0:n.featuredCircle)||[],h={userId:e.uid,location:A,duration:o,alertTime:yo.fromDate(i),bestieIds:c,notes:d||null,meetingWith:f||null,photoURLs:a,status:"active",privacyLevel:l,circleSnapshot:u,createdAt:yo.now(),lastUpdate:yo.now()},m=await Bp(lm(Ty,"checkins"),h),g=await gp(cm(Ty,"checkins",m.id));if(!g.exists())throw new Error("Check-in was not saved properly. Please try again.");const x=g.data();if(x.userId!==e.uid||"active"!==x.status)throw new Error("Check-in data verification failed. Please try again.");if(!x.bestieIds||x.bestieIds.length!==c.length)throw new Error("Bestie list was not saved correctly. Please try again.");if(!c.every(e=>x.bestieIds.includes(e)))throw new Error("Bestie list verification failed. Please try again.");return qy.trackFunnelStep("checkin","complete_checkin"),setTimeout(()=>{s("/")},1e3),m}finally{B(!1)}},rollback:()=>{N(!1)},onError:e=>{console.error("Error creating check-in:",e),qy.logCustomError("Failed to create check-in",{error:e.message}),N(!1)},successMessage:"Check-in created! Stay safe! \ud83d\udc9c",errorMessage:"Failed to create check-in. Please try creating it again.",showLoadingToast:!1,loadingMessage:"Creating your check-in..."}))):(qy.trackFunnelStep("checkin","error_no_location"),void en.error("Please enter a location"));en.error("These besties need to add their phone number: ".concat(r.join(", ")),{duration:6e3})},className:"space-y-6",children:[(0,Yy.jsxs)("div",{className:"card p-0 overflow-hidden",children:[(0,Yy.jsx)("label",{className:"block text-lg font-display text-text-primary p-6 pb-3",children:"Where are you going? \ud83d\udccd"}),(0,Yy.jsxs)("div",{className:"relative",children:[(0,Yy.jsx)("div",{ref:L,className:"w-full h-80",style:{minHeight:"320px"}}),(0,Yy.jsx)("div",{className:"absolute top-3 left-3 right-3 z-10",children:(0,Yy.jsx)("input",{ref:T,type:"text",value:A,onChange:e=>a(e.target.value),className:"input w-full shadow-lg",placeholder:"Search for a place...",required:!0,autoComplete:"off"})}),(0,Yy.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-full z-10 pointer-events-none",children:(0,Yy.jsx)("svg",{className:"w-12 h-12 text-primary drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})}),zw("gpsLocation")&&(0,Yy.jsx)("button",{type:"button",onClick:()=>{zw("gpsLocation")?navigator.geolocation?(B(!0),en.loading("Getting your location...",{id:"gps-loading"}),navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,n=e.coords.longitude,r={lat:t,lng:n};(new window.google.maps.Geocoder).geocode({location:r},(e,s)=>{en.dismiss("gps-loading"),B(!1),"OK"===s&&e[0]?(a(e[0].formatted_address),en.success("Location captured!",{duration:2e3})):(a("GPS: ".concat(t.toFixed(4),", ").concat(n.toFixed(4))),en.success("Location captured (coordinates only)",{duration:2e3})),Q(r)})},e=>{en.dismiss("gps-loading"),B(!1),console.error("Geolocation error:",e),1===e.code?en.error("Location permission denied. Please enable location access in your browser settings.",{duration:6e3}):2===e.code?en.error("Location unavailable. Make sure location services are enabled on your device.",{duration:5e3}):3===e.code?en.error("Location request timed out. Please try again or search for your location.",{duration:5e3}):en.error("Could not get location. Please search manually.",{duration:4e3})},{timeout:3e4,enableHighAccuracy:!0,maximumAge:0})):en.error("Geolocation not supported by your browser. Please search for your location manually."):en.error("GPS location is not enabled")},className:"absolute right-3 top-20 bg-white hover:bg-gray-50 text-gray-700 p-3 rounded-lg shadow-lg border border-gray-300 transition-all z-10",disabled:b,title:"Use my current location",children:b?(0,Yy.jsx)("div",{className:"w-5 h-5 spinner-small"}):(0,Yy.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Yy.jsx)("circle",{cx:"12",cy:"12",r:"3",strokeWidth:2}),(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v4m0 12v4M2 12h4m12 0h4"})]})})]}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary p-3 px-6",children:"Drag the map to adjust pin location, search for a place, or click the crosshair to use GPS"})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Who are you meeting? \ud83d\udc65 (Optional)"}),(0,Yy.jsx)("input",{type:"text",value:f,onChange:e=>m(e.target.value),className:"input",placeholder:"e.g., Alex, Sarah, John..."})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"How long? \u23f0"}),(0,Yy.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[15,30,60,120].map(e=>(0,Yy.jsx)("button",{type:"button",onClick:()=>l(e),className:"py-3 rounded-xl font-semibold transition-all ".concat(o===e?"bg-gradient-primary text-white shadow-lg":"bg-gray-100 text-text-primary hover:bg-gray-200"),children:e<60?"".concat(e,"m"):"".concat(e/60,"h")},e))}),(0,Yy.jsx)("input",{type:"range",min:"15",max:"180",step:"15",value:o,onChange:e=>l(parseInt(e.target.value)),className:"w-full"}),(0,Yy.jsxs)("div",{className:"text-center mt-3",children:[(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:[o," minutes"]}),(0,Yy.jsxs)("div",{className:"text-sm font-semibold text-primary mt-1",children:["Alert at: ",new Date(Date.now()+60*o*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Who should we alert? \ud83d\udc9c (1-5)"}),0===w.length?(0,Yy.jsxs)("div",{className:"text-center py-8 bg-orange-50 border-2 border-orange-200 rounded-xl",children:[(0,Yy.jsx)("p",{className:"font-semibold text-text-primary mb-2",children:"\u26a0\ufe0f No besties in your circle"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm mb-4",children:"Add besties to your bestie circle on the home page to create check-ins"}),(0,Yy.jsx)("button",{type:"button",onClick:()=>s("/"),className:"btn btn-primary",children:"Go to Home Page"})]}):(0,Yy.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,Yy.jsx)("button",{type:"button",onClick:()=>(e=>{if(c.includes(e))u(c.filter(t=>t!==e));else{if(c.length>=5)return void en.error("Maximum 5 besties per check-in");u([...c,e])}})(e.id),disabled:!e.phone,className:"w-full p-4 rounded-xl border-2 transition-all text-left ".concat(e.phone?c.includes(e.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300":"border-orange-300 bg-orange-50 opacity-60 cursor-not-allowed"),children:(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Yy.jsx)(Aw,{photoURL:e.photoURL,name:e.name||e.email||"Unknown",requestAttention:e.requestAttention,size:"md",showBubble:!0}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:e.name||e.email||"Unknown"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:e.phone?e.email||e.phone:"\u26a0\ufe0f No phone number - ask them to add one"})]})]}),c.includes(e.id)&&(0,Yy.jsx)("div",{className:"text-primary text-xl",children:"\u2713"})]})},e.id))}),(0,Yy.jsxs)("div",{className:"mt-3 text-sm text-text-secondary",children:["Selected: ",c.length,"/5"]})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("label",{className:"block text-lg font-display text-text-primary mb-3",children:"Notes (Optional) \ud83d\udcdd"}),(0,Yy.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"input min-h-[100px] resize-none",placeholder:"Any additional info for your besties..."})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsxs)("label",{className:"block text-lg font-display text-text-primary mb-3",children:["Add Photos (Optional) \ud83d\udcf8 (",p.length,"/5)"]}),x.length>0&&(0,Yy.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3",children:x.map((e,t)=>(0,Yy.jsxs)("div",{className:"relative aspect-square",children:[(0,Yy.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full rounded-xl object-cover"}),(0,Yy.jsx)("button",{type:"button",onClick:()=>(e=>{g(p.filter((t,n)=>n!==e)),y(x.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-full text-sm font-bold hover:bg-red-600 flex items-center justify-center",children:"\u2715"})]},t))}),p.length<5&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("input",{ref:D,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);if(0===t.length)return;if(p.length+t.length>5)return void en.error("You can only upload up to 5 photos per check-in");for(const r of t){if(r.size>5242880)return void en.error("".concat(r.name," is too large. Photos must be less than 5MB"));if(!r.type.startsWith("image/"))return void en.error("".concat(r.name," is not an image file"))}g([...p,...t]);const n=t.map(e=>URL.createObjectURL(e));y([...x,...n]),D.current&&(D.current.value="")},className:"hidden",id:"photo-input"}),(0,Yy.jsxs)("label",{htmlFor:"photo-input",className:"block w-full p-8 border-2 border-dashed border-gray-300 rounded-xl text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcf7"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Click to add photos (up to 5, max 5MB each)"})]})]})]}),(0,Yy.jsx)("button",{type:"submit",disabled:b||0===c.length,className:"w-full btn btn-primary text-lg py-4",children:b?"Creating...":"\ud83d\udee1\ufe0f Start Check-In"})]})]})]})},Xw=[{id:"safety-squad",name:"Safety Squad",emoji:"\ud83d\udee1\ufe0f",defaultMessage:"Join my safety squad! Be my Bestie and help me stay safe \ud83d\udc9c",bgGradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"bestie-circle",name:"Bestie Circle",emoji:"\ud83d\udc9c",defaultMessage:"Hey! Want to be part of my Bestie circle? Let's look out for each other! \ud83e\udd17",bgGradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{id:"emergency-contact",name:"Emergency Contact",emoji:"\u26a1",defaultMessage:"I trust you! Will you be my emergency contact on Besties? \ud83d\udcab",bgGradient:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{id:"stay-safe",name:"Stay Safe Together",emoji:"\ud83c\udf1f",defaultMessage:"Let's keep each other safe! Join me on the Besties app \ud83e\udef6",bgGradient:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},{id:"safety-net",name:"Safety Net",emoji:"\ud83e\udd8b",defaultMessage:"Be part of my safety net! I'd love to have you as my Bestie \ud83d\udc95",bgGradient:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"},{id:"guardian-angel",name:"Guardian Angel",emoji:"\ud83d\udc7c",defaultMessage:"Will you be my guardian angel? Join my Besties safety network! \u2728",bgGradient:"linear-gradient(135deg, #30cfd0 0%, #330867 100%)"}],Jw=e=>{var n,r;let{onClose:s}=e;const{userData:i,currentUser:A}=$y(),[a,o]=(0,t.useState)(Xw[0]),[l,c]=(0,t.useState)(Xw[0].defaultMessage),[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),[m,p]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),y=(0,t.useRef)(null),w="".concat(window.location.origin,"/?invite=").concat(null===A||void 0===A?void 0:A.uid),v=async()=>{if(y.current){d(!0);try{await new Promise(e=>setTimeout(e,500));const e=(await Ow()(y.current,{backgroundColor:null,scale:2,logging:!1,useCORS:!0,allowTaint:!0})).toDataURL("image/png");return f(e),e}catch(e){return console.error("Error generating image:",e),en.error("Failed to generate card"),null}finally{d(!1)}}},b=async()=>{let e=h;if(!e&&(e=await v(),!e))return;const t=document.createElement("a");t.download="besties-request-".concat(a.id,".png"),t.href=e,t.click(),en.success("Card downloaded! Share it with your friend \ud83d\udc9c")},B=e=>{x(e),p(!0)},C=(e,t)=>{const n="".concat(l,"\n\n").concat(w),r=encodeURIComponent(n),s=encodeURIComponent(w),i=encodeURIComponent(l),a=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);switch(e){case"whatsapp":a?window.location.href="whatsapp://send?text=".concat(r):window.open("https://wa.me/?text=".concat(r),"_blank");break;case"messenger":a?(window.location.href="fb-messenger://share?link=".concat(s),setTimeout(()=>{window.open("https://www.facebook.com/dialog/send?link=".concat(s,"&app_id=&redirect_uri=").concat(s),"_blank")},1500)):window.open("https://www.facebook.com/dialog/send?link=".concat(s,"&app_id=&redirect_uri=").concat(s),"_blank","width=600,height=400");break;case"instagram":navigator.clipboard.writeText(n).then(()=>{en.success("Link copied! Opening Instagram DMs..."),a?(window.location.href="instagram://direct/inbox",setTimeout(()=>{window.open("https://www.instagram.com/direct/inbox/","_blank")},1500)):window.open("https://www.instagram.com/direct/inbox/","_blank")}).catch(()=>{en.error("Failed to copy link")});break;case"facebook":a?(window.location.href="fb://profile/".concat(A.uid),setTimeout(()=>{window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(s,"&quote=").concat(i),"_blank")},1500)):window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(s,"&quote=").concat(i),"_blank","width=600,height=400");break;case"twitter":a?(window.location.href="twitter://post?message=".concat(i," ").concat(s),setTimeout(()=>{window.open("https://twitter.com/intent/tweet?text=".concat(i,"&url=").concat(s),"_blank")},1500)):window.open("https://twitter.com/intent/tweet?text=".concat(i,"&url=").concat(s),"_blank","width=600,height=400");break;case"sms":window.location.href="sms:?body=".concat(r)}};return(0,Yy.jsxs)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:[(0,Yy.jsxs)("div",{className:"card max-w-2xl w-full p-6 animate-scale-up max-h-[90vh] overflow-y-auto",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Invite a Bestie"}),(0,Yy.jsx)("button",{onClick:s,className:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:"\u2715"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"Choose a card template, customize your message, and share it with a friend!"}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary mb-3",children:"Choose a Card"}),(0,Yy.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Xw.map(e=>(0,Yy.jsxs)("button",{onClick:()=>(e=>{o(e),c(e.defaultMessage),f(null)})(e),className:"p-4 rounded-xl text-center transition-all ".concat(a.id===e.id?"border-2 border-primary shadow-lg scale-105":"border-2 border-transparent hover:border-gray-300 hover:shadow-md"),style:{background:e.bgGradient},children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:e.emoji}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-white drop-shadow-md",children:e.name})]},e.id))})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary mb-3",children:"Customize Your Message"}),(0,Yy.jsx)("textarea",{value:l,onChange:e=>{c(e.target.value),f(null)},className:"input min-h-[100px] resize-none w-full",placeholder:"Edit your message...",maxLength:200}),(0,Yy.jsxs)("div",{className:"text-xs text-text-secondary mt-1 text-right",children:[l.length,"/200 characters"]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary mb-3",children:"Preview"}),(0,Yy.jsxs)("div",{ref:y,className:"w-full rounded-2xl p-8 text-center shadow-xl relative overflow-hidden",style:{background:a.bgGradient},children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:a.emoji}),(0,Yy.jsx)("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center text-4xl font-display overflow-hidden mx-auto mb-4 border-4 border-white shadow-xl",children:null!==i&&void 0!==i&&i.photoURL?(0,Yy.jsx)("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover",crossOrigin:"anonymous"}):(0,Yy.jsx)("span",{className:"bg-gradient-primary text-white w-full h-full flex items-center justify-center",children:(null===i||void 0===i||null===(n=i.displayName)||void 0===n?void 0:n[0])||(null===A||void 0===A||null===(r=A.email)||void 0===r?void 0:r[0])||"U"})}),(0,Yy.jsx)("h3",{className:"font-display text-3xl text-white drop-shadow-lg mb-4",children:(null===i||void 0===i?void 0:i.displayName)||"User"}),(0,Yy.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 mb-4 shadow-2xl",children:(0,Yy.jsx)("p",{className:"text-lg text-gray-800 font-medium",children:l})}),(0,Yy.jsxs)("div",{className:"mt-6 pt-4 border-t-2 border-white/40",children:[(0,Yy.jsx)("div",{className:"text-sm font-semibold text-white drop-shadow",children:"Download the"}),(0,Yy.jsx)("div",{className:"font-display text-2xl text-white drop-shadow-lg",children:"Besties App"}),(0,Yy.jsx)("div",{className:"text-xs text-white/90 mt-1",children:"Your Safety Network"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-4",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary mb-3",children:"Share With Friends"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Yy.jsxs)("button",{onClick:()=>B("whatsapp"),className:"btn bg-[#25D366] text-white hover:bg-[#20BA5A] flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"WhatsApp"]}),(0,Yy.jsxs)("button",{onClick:()=>B("messenger"),className:"btn bg-[#0084FF] text-white hover:bg-[#0073E6] flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z"})}),"Messenger"]}),(0,Yy.jsxs)("button",{onClick:()=>B("instagram"),className:"btn bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] text-white hover:opacity-90 flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"Instagram DM"]}),(0,Yy.jsxs)("button",{onClick:()=>B("facebook"),className:"btn bg-[#1877F2] text-white hover:bg-[#166FE5] flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,Yy.jsxs)("button",{onClick:()=>B("twitter"),className:"btn bg-black text-white hover:bg-gray-800 flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X (Twitter)"]}),(0,Yy.jsxs)("button",{onClick:()=>B("sms"),className:"btn bg-success text-white hover:bg-green-600 flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"SMS"]})]})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:async()=>{const e="".concat(l,"\n\n").concat(w);try{await navigator.clipboard.writeText(e),en.success("Message copied to clipboard!")}catch(t){en.error("Failed to copy")}},className:"flex-1 btn btn-secondary",children:"\ud83d\udccb Copy Message"}),(0,Yy.jsx)("button",{onClick:b,disabled:u,className:"flex-1 btn btn-primary",children:u?"\u23f3 Generating...":"\ud83d\udce5 Download Card"})]}),(0,Yy.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Invite your friends to join your safety network!"})]}),m&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4 animate-fade-in",children:(0,Yy.jsxs)("div",{className:"card max-w-md w-full p-6 animate-scale-up",children:[(0,Yy.jsxs)("div",{className:"text-center mb-6",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4 animate-bounce-slow",children:"\ud83c\udfa8"}),(0,Yy.jsx)("h3",{className:"text-2xl font-display text-text-primary mb-2",children:"How do you want to share?"}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary",children:"Choose between a beautiful card or a simple link"})]}),(0,Yy.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,Yy.jsx)("button",{onClick:async()=>{p(!1);let e=h;(e||(e=await v(),e))&&(en.success("Card ready! Download and share it \ud83d\udc9c"),b(),setTimeout(()=>{C(g,!0)},1e3))},className:"w-full p-4 border-2 border-primary bg-purple-50 rounded-xl hover:bg-purple-100 transition-all group",disabled:u,children:(0,Yy.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Yy.jsx)("div",{className:"text-4xl",children:"\ud83d\uddbc\ufe0f"}),(0,Yy.jsxs)("div",{className:"flex-1 text-left",children:[(0,Yy.jsx)("div",{className:"font-display text-lg text-primary mb-1",children:"Share Beautiful Card"}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary",children:"Custom image with your message"})]}),(0,Yy.jsx)("div",{className:"text-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2192"})]})}),(0,Yy.jsx)("button",{onClick:()=>{p(!1),C(g,!1)},className:"w-full p-4 border-2 border-gray-300 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all group",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Yy.jsx)("div",{className:"text-4xl",children:"\ud83d\udd17"}),(0,Yy.jsxs)("div",{className:"flex-1 text-left",children:[(0,Yy.jsx)("div",{className:"font-display text-lg text-gray-800 mb-1",children:"Share Simple Link"}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary",children:"Quick text message with link"})]}),(0,Yy.jsx)("div",{className:"text-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2192"})]})})]}),(0,Yy.jsx)("button",{onClick:()=>p(!1),className:"w-full btn btn-secondary",children:"Cancel"})]})}),(0,Yy.jsx)("style",{children:"\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes bounce-slow {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out;\n        }\n        .animate-bounce-slow {\n          animation: bounce-slow 2s ease-in-out infinite;\n        }\n      "})]})},Zw=e=>{let{userId:n,onAddClick:r}=e;const s=te(),[i,A]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(n)try{const[e,t]=await Promise.all([yp(Jm(lm(Ty,"besties"),$m("requesterId","==",n),$m("status","==","accepted"))),yp(Jm(lm(Ty,"besties"),$m("recipientId","==",n),$m("status","==","accepted")))]),r=[];for(const n of e.docs){const e=n.data(),t=await gp(cm(Ty,"users",e.recipientId)),s=t.exists()?t.data():{};r.push({id:e.recipientId,name:s.displayName||"Bestie",photoURL:s.photoURL||null,requestAttention:s.requestAttention||null})}for(const n of t.docs){const e=n.data(),t=await gp(cm(Ty,"users",e.requesterId)),s=t.exists()?t.data():{};r.push({id:e.requesterId,name:s.displayName||"Bestie",photoURL:s.photoURL||null,requestAttention:s.requestAttention||null})}A(r);const s=await gp(cm(Ty,"users",n)),i=s.exists()&&s.data().featuredCircle||[],a=i.map(e=>r.find(t=>t.id===e)).filter(Boolean),l=a.length<r.length&&a.length<5;if(l){const e=r.filter(e=>!i.includes(e.id));a.push(...e.slice(0,5-a.length))}const u=a.slice(0,5);o(u),l&&u.length>0&&await g(u),c(!1)}catch(e){console.error("Error loading besties:",e),c(!1)}})()},[n]);const g=async e=>{const t=e.map(e=>e.id);await vp(cm(Ty,"users",n),{featuredCircle:t})},x=Array.from({length:5},(e,t)=>a[t]||null),y=["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500"];return l?(0,Yy.jsx)("div",{className:"card p-8 flex items-center justify-center",children:(0,Yy.jsx)("div",{className:"spinner"})}):(0,Yy.jsxs)("div",{className:"card p-8 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 border-2 border-purple-100",children:[(0,Yy.jsx)("h3",{className:"text-center text-2xl font-display text-gradient mb-6",children:"Your Safety Circle \u2b50"}),(0,Yy.jsx)("div",{className:"relative w-full max-w-sm mx-auto aspect-square",children:(0,Yy.jsxs)("div",{className:"absolute inset-0",children:[x.map((e,t)=>{if(!e)return null;const n=(72*t-90)*(Math.PI/180),r=50+45*Math.cos(n),s=50+45*Math.sin(n);return(0,Yy.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:0},children:[(0,Yy.jsx)("line",{x1:"50%",y1:"50%",x2:"".concat(r,"%"),y2:"".concat(s,"%"),stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:"4 2",opacity:"0.3"}),(0,Yy.jsx)("defs",{children:(0,Yy.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,Yy.jsx)("stop",{offset:"0%",stopColor:"#a855f7"}),(0,Yy.jsx)("stop",{offset:"100%",stopColor:"#ec4899"})]})})]},"line-".concat(t))}),(0,Yy.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:(0,Yy.jsx)("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-base md:text-lg font-display shadow-2xl border-4 border-white ring-4 ring-purple-200 animate-pulse-gentle",children:"YOU"})}),x.map((e,t)=>{const n=(72*t-90)*(Math.PI/180),r=50+45*Math.cos(n),i=50+45*Math.sin(n);return(0,Yy.jsx)("div",{className:"absolute",style:{left:"".concat(r,"%"),top:"".concat(i,"%"),transform:"translate(-50%, -50%)"},children:e?(0,Yy.jsxs)("div",{className:"relative group",children:[(0,Yy.jsxs)("button",{onClick:()=>d(u===t?null:t),className:"relative hover:scale-110 transition-all duration-300",children:[(0,Yy.jsx)("div",{className:"w-16 h-16 md:w-20 md:h-20 ".concat(y[t]," rounded-full shadow-xl border-4 border-white hover:shadow-2xl ring-2 ring-purple-200 hover:ring-4 hover:ring-purple-300 overflow-hidden flex items-center justify-center"),children:(0,Yy.jsx)(Aw,{photoURL:e.photoURL,name:e.name||"Bestie",requestAttention:e.requestAttention,size:"xl",showBubble:!0,className:"w-full h-full"})}),(0,Yy.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity rounded-full pointer-events-none"})]}),(0,Yy.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none z-20 transform group-hover:-translate-y-1",children:(0,Yy.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap shadow-lg",children:[e.name||"Unknown",(0,Yy.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-pink-600"})]})}),u===t&&(0,Yy.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-[200] w-36",children:[(0,Yy.jsx)("button",{onClick:()=>{return t=e.id,s("/user/".concat(t)),void d(null);var t},className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udc64 View Profile"}),(0,Yy.jsx)("button",{onClick:()=>f(!0),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udd04 Replace"}),(0,Yy.jsx)("button",{onClick:()=>(async e=>{if(a.length<5)return en.error("Circle must be full to remove members. Use Replace instead."),void d(null);const t=a.filter((t,n)=>n!==e);o(t),await g(t),d(null),en.success("Removed from circle")})(t),className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600",children:"\u274c Remove"})]})]}):(0,Yy.jsx)("button",{onClick:()=>p(!0),className:"w-16 h-16 md:w-20 md:h-20 border-4 border-dashed ".concat(y[t].replace("bg-","border-")," rounded-full flex items-center justify-center ").concat(y[t].replace("bg-","text-")," text-3xl md:text-4xl font-bold hover:scale-110 hover:bg-purple-100 transition-all shadow-lg hover:shadow-xl animate-pulse-slow"),title:"Invite a bestie to your circle",children:"+"})},t)})]})}),(0,Yy.jsxs)("div",{className:"text-center mt-8",children:[(0,Yy.jsxs)("div",{className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md border-2 border-purple-200 mb-2",children:[(0,Yy.jsx)("span",{className:"text-2xl",children:"\u2b50"}),(0,Yy.jsxs)("span",{className:"font-display text-lg text-gradient font-bold",children:[a.length,"/5 Circle Members"]})]}),(0,Yy.jsx)("div",{className:"text-sm text-gray-600 mt-2",children:5===a.length?"Your circle is complete! \ud83c\udf89":0===a.length?"Start building your safety network":"Add ".concat(5-a.length," more to complete your circle")})]}),(0,Yy.jsx)("style",{children:"\n        @keyframes pulse-gentle {\n          0%, 100% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.03);\n          }\n        }\n        .animate-pulse-gentle {\n          animation: pulse-gentle 3s ease-in-out infinite;\n        }\n        @keyframes pulse-slow {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.6;\n          }\n        }\n        .animate-pulse-slow {\n          animation: pulse-slow 2s ease-in-out infinite;\n        }\n      "}),h&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>f(!1),children:(0,Yy.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full max-h-96 overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Yy.jsx)("h3",{className:"text-xl font-display mb-4",children:"Replace with:"}),(0,Yy.jsxs)("div",{className:"space-y-2",children:[i.filter(e=>!a.find(t=>t.id===e.id)).map(e=>(0,Yy.jsxs)("button",{onClick:()=>(async e=>{const t=[...a];t[u]=e,o(t),await g(t),f(!1),d(null),en.success("Bestie replaced")})(e),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,Yy.jsx)(Aw,{photoURL:e.photoURL,name:e.name||"Unknown",requestAttention:e.requestAttention,size:"md",showBubble:!0}),(0,Yy.jsx)("div",{className:"text-left",children:(0,Yy.jsx)("div",{className:"font-semibold",children:e.name||"Unknown"})})]},e.id)),0===i.filter(e=>!a.find(t=>t.id===e.id)).length&&(0,Yy.jsx)("p",{className:"text-center text-gray-500 py-4",children:"All besties are in your circle!"})]}),(0,Yy.jsx)("button",{onClick:()=>f(!1),className:"mt-4 w-full btn btn-secondary",children:"Cancel"})]})}),m&&(0,Yy.jsx)(Jw,{onClose:()=>p(!1)})]})},$w=e=>{var n,r,s,i;let{onClose:A}=e;const{userData:a,currentUser:o}=$y(),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!0),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[g,x]=(0,t.useState)(!1),[y,w]=(0,t.useState)(null),v=(0,t.useRef)(null);(0,t.useEffect)(()=>{b()},[o]);const b=async()=>{if(o)try{const e=await gp(cm(Ty,"badges",o.uid));if(e.exists()){const t=e.data().badges||[],n=(null===a||void 0===a?void 0:a.featuredBadges)||[],r=n.map(e=>t.find(t=>t.id===e)).filter(Boolean).slice(0,3);if(r.length<3){const e=t.filter(e=>!n.includes(e.id));r.push(...e.slice(0,3-r.length))}c(r)}d(!1)}catch(e){console.error("Error loading badges:",e),d(!1)}},B=(null===a||void 0===a||null===(n=a.profile)||void 0===n?void 0:n.backgroundGradient)||"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)",C="".concat(window.location.origin,"/?invite=").concat(null===o||void 0===o?void 0:o.uid),N="Come be my safety Bestie! \ud83d\udc9c",E=async()=>{if(v.current){f(!0);try{await new Promise(e=>setTimeout(e,500));const e=(await Ow()(v.current,{backgroundColor:null,scale:2,logging:!1,useCORS:!0,allowTaint:!0})).toDataURL("image/png");return p(e),e}catch(e){return console.error("Error generating image:",e),en.error("Failed to generate image"),null}finally{f(!1)}}},U=async()=>{let e=m;if(!e&&(e=await E(),!e))return;const t=document.createElement("a");t.download="besties-profile-share.png",t.href=e,t.click(),en.success("Image downloaded! Share it anywhere \ud83d\udc9c")},j=e=>{w(e),x(!0)},F=(e,t)=>{const n="".concat(N,"\n\n").concat(C),r=encodeURIComponent(n),s=encodeURIComponent(C),i=encodeURIComponent(N),A=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);switch(e){case"whatsapp":A?window.location.href="whatsapp://send?text=".concat(r):window.open("https://wa.me/?text=".concat(r),"_blank");break;case"messenger":A?(window.location.href="fb-messenger://share?link=".concat(s),setTimeout(()=>{window.open("https://www.facebook.com/dialog/send?link=".concat(s,"&app_id=&redirect_uri=").concat(s),"_blank")},1500)):window.open("https://www.facebook.com/dialog/send?link=".concat(s,"&app_id=&redirect_uri=").concat(s),"_blank","width=600,height=400");break;case"instagram":navigator.clipboard.writeText(n).then(()=>{en.success("Link copied! Opening Instagram DMs..."),A?(window.location.href="instagram://direct/inbox",setTimeout(()=>{window.open("https://www.instagram.com/direct/inbox/","_blank")},1500)):window.open("https://www.instagram.com/direct/inbox/","_blank")}).catch(()=>{en.error("Failed to copy link")});break;case"facebook":A?(window.location.href="fb://profile/".concat(o.uid),setTimeout(()=>{window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(s,"&quote=").concat(i),"_blank")},1500)):window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(s,"&quote=").concat(i),"_blank","width=600,height=400");break;case"twitter":A?(window.location.href="twitter://post?message=".concat(i," ").concat(s),setTimeout(()=>{window.open("https://twitter.com/intent/tweet?text=".concat(i,"&url=").concat(s),"_blank")},1500)):window.open("https://twitter.com/intent/tweet?text=".concat(i,"&url=").concat(s),"_blank","width=600,height=400");break;case"sms":window.location.href="sms:?body=".concat(r)}};return u?(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsx)("div",{className:"card p-8",children:(0,Yy.jsx)("div",{className:"spinner"})})}):(0,Yy.jsxs)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:[(0,Yy.jsxs)("div",{className:"card max-w-2xl w-full p-6 animate-scale-up max-h-[90vh] overflow-y-auto",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Share Your Profile"}),(0,Yy.jsx)("button",{onClick:A,className:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:"\u2715"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"Choose how you'd like to share your Besties profile with friends!"}),(0,Yy.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:(0,Yy.jsxs)("div",{ref:v,className:"w-full rounded-2xl p-8 text-center shadow-xl relative overflow-hidden",style:{background:B,width:"600px"},children:[(0,Yy.jsx)("div",{className:"w-32 h-32 bg-gradient-primary rounded-full flex items-center justify-center text-white text-5xl font-display overflow-hidden mx-auto mb-4 border-4 border-white shadow-xl",children:null!==a&&void 0!==a&&a.photoURL?(0,Yy.jsx)("img",{src:a.photoURL,alt:"Profile",className:"w-full h-full object-cover",crossOrigin:"anonymous"}):(null===a||void 0===a||null===(r=a.displayName)||void 0===r?void 0:r[0])||(null===o||void 0===o||null===(s=o.email)||void 0===s?void 0:s[0])||"U"}),(0,Yy.jsx)("h3",{className:"font-display text-4xl text-gray-800 mb-3",children:(null===a||void 0===a?void 0:a.displayName)||"User"}),(null===a||void 0===a||null===(i=a.profile)||void 0===i?void 0:i.bio)&&(0,Yy.jsxs)("p",{className:"text-gray-700 italic max-w-md mx-auto mb-4 text-base",children:['"',a.profile.bio,'"']}),(0,Yy.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 mb-4 shadow-2xl",children:[(0,Yy.jsx)("p",{className:"text-2xl font-display text-primary mb-2",children:"\ud83d\udc9c Come be my safety Bestie!"}),(0,Yy.jsx)("p",{className:"text-sm text-gray-600",children:"Join me on the Besties safety app"})]}),l.length>0&&(0,Yy.jsxs)("div",{className:"mb-4",children:[(0,Yy.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Top Badges"}),(0,Yy.jsx)("div",{className:"flex gap-4 justify-center",children:l.map(e=>(0,Yy.jsxs)("div",{className:"flex flex-col items-center bg-white/90 backdrop-blur-sm rounded-xl p-3 shadow-md",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-1",children:e.icon}),(0,Yy.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:e.name})]},e.id))})]}),(0,Yy.jsxs)("div",{className:"mt-6 pt-4 border-t-2 border-white/40",children:[(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"Download"}),(0,Yy.jsx)("div",{className:"font-display text-2xl text-gray-800",children:"Besties"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Your Safety Network"})]})]})}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Yy.jsxs)("button",{onClick:()=>j("whatsapp"),className:"btn bg-[#25D366] text-white hover:bg-[#20BA5A] flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"WhatsApp"]}),(0,Yy.jsxs)("button",{onClick:()=>j("messenger"),className:"btn bg-[#0084FF] text-white hover:bg-[#0073E6] flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z"})}),"Messenger"]}),(0,Yy.jsxs)("button",{onClick:()=>j("instagram"),className:"btn bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] text-white hover:opacity-90 flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"Instagram DM"]}),(0,Yy.jsxs)("button",{onClick:()=>j("facebook"),className:"btn bg-[#1877F2] text-white hover:bg-[#166FE5] flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,Yy.jsxs)("button",{onClick:()=>j("twitter"),className:"btn bg-black text-white hover:bg-gray-800 flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X (Twitter)"]}),(0,Yy.jsxs)("button",{onClick:()=>j("sms"),className:"btn bg-success text-white hover:bg-green-600 flex items-center justify-center gap-2",children:[(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"SMS"]})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:async()=>{const e="".concat(N,"\n\n").concat(C);try{await navigator.clipboard.writeText(e),en.success("Link copied to clipboard!")}catch(t){en.error("Failed to copy")}},className:"flex-1 btn btn-secondary",children:"\ud83d\udccb Copy Link"}),(0,Yy.jsx)("button",{onClick:U,disabled:h,className:"flex-1 btn btn-primary",children:h?"\u23f3 Generating...":"\ud83d\udce5 Download Card"})]}),(0,Yy.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Share your profile with friends so they can join your safety network!"})]}),g&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4 animate-fade-in",children:(0,Yy.jsxs)("div",{className:"card max-w-md w-full p-6 animate-scale-up",children:[(0,Yy.jsxs)("div",{className:"text-center mb-6",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4 animate-bounce-slow",children:"\ud83c\udfa8"}),(0,Yy.jsx)("h3",{className:"text-2xl font-display text-text-primary mb-2",children:"How do you want to share?"}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary",children:"Choose between a beautiful card or a simple link"})]}),(0,Yy.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,Yy.jsx)("button",{onClick:async()=>{x(!1);let e=m;(e||(e=await E(),e))&&(en.success("Card ready! Download and share it \ud83d\udc9c"),U(),setTimeout(()=>{F(y,!0)},1e3))},className:"w-full p-4 border-2 border-primary bg-purple-50 rounded-xl hover:bg-purple-100 transition-all group",disabled:h,children:(0,Yy.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Yy.jsx)("div",{className:"text-4xl",children:"\ud83d\uddbc\ufe0f"}),(0,Yy.jsxs)("div",{className:"flex-1 text-left",children:[(0,Yy.jsx)("div",{className:"font-display text-lg text-primary mb-1",children:"Share Beautiful Card"}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary",children:"Custom image with your profile & badges"})]}),(0,Yy.jsx)("div",{className:"text-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2192"})]})}),(0,Yy.jsx)("button",{onClick:()=>{x(!1),F(y,!1)},className:"w-full p-4 border-2 border-gray-300 bg-gray-50 rounded-xl hover:bg-gray-100 transition-all group",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Yy.jsx)("div",{className:"text-4xl",children:"\ud83d\udd17"}),(0,Yy.jsxs)("div",{className:"flex-1 text-left",children:[(0,Yy.jsx)("div",{className:"font-display text-lg text-gray-800 mb-1",children:"Share Simple Link"}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary",children:"Quick text message with link"})]}),(0,Yy.jsx)("div",{className:"text-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2192"})]})})]}),(0,Yy.jsx)("button",{onClick:()=>x(!1),className:"w-full btn btn-secondary",children:"Cancel"})]})}),(0,Yy.jsx)("style",{children:"\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes bounce-slow {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out;\n        }\n        .animate-bounce-slow {\n          animation: bounce-slow 2s ease-in-out infinite;\n        }\n      "})]})},ev=e=>{let{end:t,duration:n=1e3,suffix:r="",prefix:s="",className:i=""}=e;const A=parseInt(t)||0;return(0,Yy.jsxs)("span",{className:i,children:[s,A.toLocaleString(),r]})};var tv={};!function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),A="function"===typeof Path2D&&"function"===typeof DOMMatrix;function a(){}function o(e){var r=n.exports.Promise,s=void 0!==r?r:t.Promise;return"function"===typeof s?new s(e):(e(a,a),null)}var l,c=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),t.set(n,r),r},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var r=e.transferToImageBitmap();n.createPattern(r,"no-repeat")}catch(Pe){return!1}return!0}(),new Map),u=function(){var e,t,n=Math.floor(1e3/60),r={},s=0;return"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?(e=function(e){var t=Math.random();return r[t]=requestAnimationFrame(function i(A){s===A||s+n-1<A?(s=A,delete r[t],e()):r[t]=requestAnimationFrame(i)}),t},t=function(e){r[e]&&cancelAnimationFrame(r[e])}):(e=function(e){return setTimeout(e,n)},t=function(e){return clearTimeout(e)}),{frame:e,cancel:t}}(),d=function(){var t,n,s={};return function(){if(t)return t;if(!r&&i){var A=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([A])))}catch(Pe){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",Pe),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(r,i,A){if(n)return t(r,null),n;var a=Math.random().toString(36).slice(2);return n=o(function(i){function o(t){t.data.callback===a&&(delete s[a],e.removeEventListener("message",o),n=null,c.clear(),A(),i())}e.addEventListener("message",o),t(r,a),s[a]=o.bind(null,{data:{callback:a}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),s)s[t](),delete s[t]}}(t)}return t}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function f(e,t,n){return function(e,t){return t?t(e):e}(e&&(null!==(r=e[t])&&void 0!==r)?e[t]:h[t],n);var r}function m(e){return e<0?0:Math.floor(e)}function p(e,t){return Math.floor(Math.random()*(t-e))+e}function g(e){return parseInt(e,16)}function x(e){return e.map(y)}function y(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:g(t.substring(0,2)),g:g(t.substring(2,4)),b:g(t.substring(4,6))}}function w(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function v(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function b(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function B(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,s=t.y+t.random*t.tiltSin,i=t.wobbleX+t.random*t.tiltCos,a=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),A&&"path"===t.shape.type&&"string"===typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,r,s,i,A){var a=new Path2D(e),o=new Path2D;o.addPath(a,new DOMMatrix(t));var l=new Path2D;return l.addPath(o,new DOMMatrix([Math.cos(A)*s,Math.sin(A)*s,-Math.sin(A)*i,Math.cos(A)*i,n,r])),l}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(i-r),.1*Math.abs(a-s),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var o=Math.PI/10*t.wobble,l=.1*Math.abs(i-r),u=.1*Math.abs(a-s),d=t.shape.bitmap.width*t.scalar,h=t.shape.bitmap.height*t.scalar,f=new DOMMatrix([Math.cos(o)*l,Math.sin(o)*l,-Math.sin(o)*u,Math.cos(o)*u,t.x,t.y]);f.multiplySelf(new DOMMatrix(t.shape.matrix));var m=e.createPattern(c.transform(t.shape.bitmap),"no-repeat");m.setTransform(f),e.globalAlpha=1-n,e.fillStyle=m,e.fillRect(t.x-d/2,t.y-h/2,d,h),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(i-r)*t.ovalScalar,Math.abs(a-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,s,i,A,a,o){e.save(),e.translate(t,n),e.rotate(i),e.scale(r,s),e.arc(0,0,1,A,a,o),e.restore()}(e,t.x,t.y,Math.abs(i-r)*t.ovalScalar,Math.abs(a-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var p=Math.PI/2*3,g=4*t.scalar,x=8*t.scalar,y=t.x,w=t.y,v=5,b=Math.PI/v;v--;)y=t.x+Math.cos(p)*x,w=t.y+Math.sin(p)*x,e.lineTo(y,w),p+=b,y=t.x+Math.cos(p)*g,w=t.y+Math.sin(p)*g,e.lineTo(y,w),p+=b;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(s)),e.lineTo(Math.floor(i),Math.floor(a)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function C(e,n){var A,a=!e,l=!!f(n||{},"resize"),h=!1,g=f(n,"disableForReducedMotion",Boolean),y=i&&!!f(n||{},"useWorker")?d():null,C=a?w:v,N=!(!e||!y)&&!!e.__confetti_initialized,E="function"===typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function U(t,n,i){for(var a=f(t,"particleCount",m),l=f(t,"angle",Number),d=f(t,"spread",Number),h=f(t,"startVelocity",Number),g=f(t,"decay",Number),y=f(t,"gravity",Number),w=f(t,"drift",Number),v=f(t,"colors",x),N=f(t,"ticks",Number),E=f(t,"shapes"),U=f(t,"scalar"),j=!!f(t,"flat"),F=function(e){var t=f(e,"origin",Object);return t.x=f(t,"x",Number),t.y=f(t,"y",Number),t}(t),Q=a,k=[],I=e.width*F.x,S=e.height*F.y;Q--;)k.push(b({x:I,y:S,angle:l,spread:d,startVelocity:h,color:v[Q%v.length],shape:E[p(0,E.length)],ticks:N,decay:g,gravity:y,drift:w,scalar:U,flat:j}));return A?A.addFettis(k):(A=function(e,t,n,i,A){var a,l,d=t.slice(),h=e.getContext("2d"),f=o(function(t){function o(){a=l=null,h.clearRect(0,0,i.width,i.height),c.clear(),A(),t()}a=u.frame(function t(){!r||i.width===s.width&&i.height===s.height||(i.width=e.width=s.width,i.height=e.height=s.height),i.width||i.height||(n(e),i.width=e.width,i.height=e.height),h.clearRect(0,0,i.width,i.height),(d=d.filter(function(e){return B(h,e)})).length?a=u.frame(t):o()}),l=o});return{addFettis:function(e){return d=d.concat(e),f},canvas:e,promise:f,reset:function(){a&&u.cancel(a),l&&l()}}}(e,k,C,n,i),A.promise)}function j(n){var r=g||f(n,"disableForReducedMotion",Boolean),s=f(n,"zIndex",Number);if(r&&E)return o(function(e){e()});a&&A?e=A.canvas:a&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(s),document.body.appendChild(e)),l&&!N&&C(e);var i={width:e.width,height:e.height};function c(){if(y){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};return C(t),void y.postMessage({resize:{width:t.width,height:t.height}})}i.width=i.height=null}function u(){A=null,l&&(h=!1,t.removeEventListener("resize",c)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,N=!1)}return y&&!N&&y.init(e),N=!0,y&&(e.__confetti_initialized=!0),l&&!h&&(h=!0,t.addEventListener("resize",c,!1)),y?y.fire(n,i,u):U(n,i,u)}return j.reset=function(){y&&y.reset(),A&&A.reset()},j}function N(){return l||(l=C(null,{useWorker:!0,resize:!0})),l}n.exports=function(){return N().apply(this,arguments)},n.exports.reset=function(){N().reset()},n.exports.create=C,n.exports.shapeFromPath=function(e){if(!A)throw new Error("path confetti are not supported in this browser");var t,n;"string"===typeof e?t=e:(t=e.path,n=e.matrix);var r=new Path2D(t),s=document.createElement("canvas").getContext("2d");if(!n){for(var i,a,o=1e3,l=o,c=o,u=0,d=0,h=0;h<o;h+=2)for(var f=0;f<o;f+=2)s.isPointInPath(r,h,f,"nonzero")&&(l=Math.min(l,h),c=Math.min(c,f),u=Math.max(u,h),d=Math.max(d,f));i=u-l,a=d-c;var m=Math.min(10/i,10/a);n=[m,0,0,m,-Math.round(i/2+l)*m,-Math.round(a/2+c)*m]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,r="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"===typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,s="fontFamily"in e?e.fontFamily:s,r="color"in e?e.color:r);var i=10*n,A=i+"px "+s,a=new OffscreenCanvas(i,i),o=a.getContext("2d");o.font=A;var l=o.measureText(t),c=Math.ceil(l.actualBoundingBoxRight+l.actualBoundingBoxLeft),u=Math.ceil(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent),d=l.actualBoundingBoxLeft+2,h=l.actualBoundingBoxAscent+2;c+=4,u+=4,(o=(a=new OffscreenCanvas(c,u)).getContext("2d")).font=A,o.fillStyle=r,o.fillText(t,d,h);var f=1/n;return{type:"bitmap",bitmap:a.transferToImageBitmap(),matrix:[f,0,0,f,-c*f/2,-u*f/2]}}}(function(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:this||{}}(),tv,!1);const nv=tv.exports;tv.exports.create;const rv=e=>{let{trigger:n=!1,type:r="default"}=e;return(0,t.useEffect)(()=>{if(!n)return;(()=>{if("badge"===r){const e=200,t={origin:{y:.7},shapes:["circle","square"],colors:["#FF69B4","#DDA0DD","#FFB6C1","#FFC0CB","#FF1493"]};function n(n,r){nv(Re(Re(Re({},t),r),{},{particleCount:Math.floor(e*n)}))}n(.25,{spread:26,startVelocity:55}),n(.2,{spread:60}),n(.35,{spread:100,decay:.91,scalar:.8}),n(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),n(.1,{spread:120,startVelocity:45})}else"milestone"===r?(nv({particleCount:150,spread:70,origin:{y:.6},colors:["#FF69B4","#DDA0DD","#FFB6C1","#87CEEB","#98FB98"]}),setTimeout(()=>{nv({particleCount:100,angle:60,spread:55,origin:{x:0},colors:["#FF69B4","#DDA0DD","#FFB6C1"]})},200),setTimeout(()=>{nv({particleCount:100,angle:120,spread:55,origin:{x:1},colors:["#87CEEB","#98FB98","#FFB6C1"]})},400)):nv({particleCount:100,spread:70,origin:{y:.6},colors:["#FF69B4","#DDA0DD","#FFB6C1","#FFC0CB","#FF1493"]})})()},[n,r]),null},sv=[{id:"pink",name:"Pink Dream",gradient:"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)"},{id:"purple",name:"Purple Magic",gradient:"linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)"},{id:"blue",name:"Ocean Blue",gradient:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)"},{id:"green",name:"Fresh Green",gradient:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)"},{id:"sunset",name:"Sunset Glow",gradient:"linear-gradient(135deg, #fed7aa 0%, #fca5a5 100%)"},{id:"lavender",name:"Lavender Fields",gradient:"linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)"},{id:"peach",name:"Peachy Keen",gradient:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)"},{id:"mint",name:"Mint Fresh",gradient:"linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%)"}],iv=()=>{var e,n,r,s,i,A,a;const{currentUser:o,userData:l}=$y(),c=te(),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(!0),[m,p]=(0,t.useState)(!1),[g,x]=(0,t.useState)(!1),[y,w]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[B,C]=(0,t.useState)(!1),[N,E]=(0,t.useState)([]),[U,j]=(0,t.useState)(0),[F,Q]=(0,t.useState)(!1),[k,I]=(0,t.useState)(0),[S,T]=(0,t.useState)(null),[_,D]=(0,t.useState)(0),[L,H]=(0,t.useState)(0),[R,P]=(0,t.useState)(0),M=(0,t.useRef)(null);(0,t.useEffect)(()=>{O()},[o]),(0,t.useEffect)(()=>{const e=e=>{g&&!e.target.closest(".photo-menu-container")&&x(!1),v&&!e.target.closest(".color-picker-container")&&b(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[g,v]),(0,t.useEffect)(()=>{const e=K().percentage;P(e)},[l,U,o]);const O=async()=>{if(o)try{const e=await gp(cm(Ty,"badges",o.uid));if(e.exists()){const t=e.data().badges||[];d(t)}const t=await gp(cm(Ty,"users",o.uid));if(t.exists()){const e=t.data();E(e.featuredBadges||[])}const n=Jm(lm(Ty,"besties"),$m("requesterId","==",o.uid),$m("status","==","accepted")),r=Jm(lm(Ty,"besties"),$m("recipientId","==",o.uid),$m("status","==","accepted")),[s,i]=await Promise.all([yp(n),yp(r)]);j(s.size+i.size);const A=Jm(lm(Ty,"checkins"),$m("selectedBesties","array-contains",o.uid)),a=await yp(A);I(a.size);const l=Jm(lm(Ty,"checkins"),$m("userId","==",o.uid)),c=await yp(l);if(!c.empty){let e=null,t=0,n=0;c.forEach(r=>{var s;const i=null===(s=r.data().createdAt)||void 0===s?void 0:s.toDate();if(i){(!e||i<e)&&(e=i);const r=i.getHours();(r>=21||r<6)&&t++;const s=i.getDay();0!==s&&6!==s||n++}}),T(e),D(t),H(n)}f(!1)}catch(e){console.error("Error loading data:",e),f(!1)}},K=()=>{var e;const t=[];let n=0;null!==o&&void 0!==o&&o.email?(t.push({name:"Add email",completed:!0,path:null,section:null}),n++):t.push({name:"Add email",completed:!1,path:"/settings",section:"account"}),null!==l&&void 0!==l&&l.phoneNumber?(t.push({name:"Add phone number",completed:!0,path:null,section:null}),n++):t.push({name:"Add phone number",completed:!1,path:"/settings",section:"phone"}),null!==l&&void 0!==l&&l.photoURL?(t.push({name:"Upload profile photo",completed:!0,path:null,section:null}),n++):t.push({name:"Upload profile photo",completed:!1,path:null,section:"photo",action:"scrollToPhoto"}),null!==l&&void 0!==l&&null!==(e=l.profile)&&void 0!==e&&e.bio?(t.push({name:"Write a bio",completed:!0,path:null,section:null}),n++):t.push({name:"Write a bio",completed:!1,path:"/edit-profile",section:"bio"}),U>=5?(t.push({name:"Add 5 besties",completed:!0,path:null,section:null}),n++):t.push({name:"Add 5 besties (".concat(U,"/5)"),completed:!1,path:null,section:null,action:"scrollToBestieCircle"});return{tasks:t,percentage:n/t.length*100,completed:n,total:t.length}},V=()=>{if(!S)return!1;const e=new Date;return e.setDate(e.getDate()-7),S<=e},G=K(),W=(()=>{var e,t;if(!V())return{status:"new",emoji:"\ud83c\udf31",message:"Building your safety journey",tip:"You'll get your weekly summary after you have one week of activity!"};const n=(null===l||void 0===l||null===(e=l.stats)||void 0===e?void 0:e.totalCheckIns)||0,r=(null===l||void 0===l||null===(t=l.stats)||void 0===t?void 0:t.totalBesties)||0;return n>=7&&r>=3?{status:"excellent",emoji:"\ud83c\udf1f",message:"You're absolutely crushing it this week!",tip:"Keep up the amazing safety habits!"}:n>=3||r>=3?{status:"good",emoji:"\ud83d\udcaa",message:"You're doing great! Keep it up!",tip:"Try to check in regularly and add more besties."}:{status:"needsWork",emoji:"\ud83d\udc9c",message:"Let's build your safety network!",tip:"Start by adding your closest friends as besties."}})(),z=(null===l||void 0===l||null===(e=l.profile)||void 0===e?void 0:e.backgroundGradient)||sv[0].gradient,q=(null===l||void 0===l?void 0:l.loginStreak)||0,Y=u.filter(e=>N.includes(e.id)),X=u.filter(e=>!N.includes(e.id)),J=[...Y,...X];return h?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)(rv,{trigger:F,type:"badge"}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Yy.jsxs)("div",{className:"card p-6 mb-6 text-center relative overflow-hidden",style:{background:z},children:[(0,Yy.jsxs)("div",{className:"absolute top-4 right-4 color-picker-container flex flex-col gap-2",children:[(0,Yy.jsx)("button",{onClick:()=>c("/edit-profile"),className:"w-10 h-10 rounded-full bg-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform text-xl",title:"Edit profile",children:"\u270f\ufe0f"}),(0,Yy.jsx)("button",{onClick:()=>b(!v),className:"w-10 h-10 rounded-full bg-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform",title:"Change background color",children:"\ud83c\udfa8"}),v&&(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>b(!1)}),(0,Yy.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-2xl border-2 border-gray-200 p-4 z-50 w-80 max-h-[500px] overflow-y-auto",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary",children:"Choose Background"}),(0,Yy.jsx)("button",{onClick:()=>b(!1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600",children:"\u2715"})]}),(0,Yy.jsx)("div",{className:"grid grid-cols-2 gap-3",children:sv.map(e=>(0,Yy.jsx)("button",{onClick:()=>(async e=>{try{await vp(cm(Ty,"users",o.uid),{"profile.backgroundGradient":e.gradient}),en.success("Background changed to ".concat(e.name,"!")),b(!1)}catch(t){console.error("Error updating background:",t),en.error("Failed to update background")}})(e),className:"h-16 rounded-lg shadow-md hover:scale-105 transition-transform border-2 border-transparent hover:border-primary",style:{background:e.gradient},title:e.name,children:(0,Yy.jsx)("span",{className:"text-xs font-semibold text-gray-700 drop-shadow-sm",children:e.name})},e.id))})]})]})]}),(0,Yy.jsxs)("div",{className:"relative inline-block photo-menu-container",children:[(0,Yy.jsx)("button",{onClick:()=>x(!g),className:"w-32 h-32 bg-gradient-primary rounded-full flex items-center justify-center text-white text-5xl font-display overflow-hidden hover:opacity-90 transition-opacity border-4 border-white shadow-xl",children:null!==l&&void 0!==l&&l.photoURL?(0,Yy.jsx)("img",{src:l.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===l||void 0===l||null===(n=l.displayName)||void 0===n?void 0:n[0])||(null===o||void 0===o||null===(r=o.email)||void 0===r?void 0:r[0])||"U"}),g&&(0,Yy.jsxs)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 p-2 z-30 w-48",children:[(0,Yy.jsx)("div",{className:"text-xs font-semibold text-gray-500 px-3 py-1",children:"Manage Photo"}),(0,Yy.jsx)("button",{onClick:()=>{var e;null===(e=M.current)||void 0===e||e.click(),x(!1)},disabled:y,className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded text-sm font-semibold text-gray-700",children:"\ud83d\udd04 Replace"}),(0,Yy.jsx)("button",{onClick:async()=>{try{await vp(cm(Ty,"users",o.uid),{photoURL:(null===o||void 0===o?void 0:o.photoURL)||null}),en.success("Profile picture removed"),x(!1)}catch(e){console.error("Error removing photo:",e),en.error("Failed to remove photo")}},className:"w-full text-left px-3 py-2 hover:bg-red-50 rounded text-sm font-semibold text-red-600",children:"\u274c Remove"})]}),(0,Yy.jsx)("input",{ref:M,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)en.error("Photo must be less than 5MB");else{w(!0);try{const e=Wg(_y,"profile-pictures/".concat(o.uid,"/").concat(Date.now(),"_").concat(t.name));await Vg(e,t);const n=await Gg(e);await vp(cm(Ty,"users",o.uid),{photoURL:n}),en.success("Profile picture updated!"),x(!1)}catch(n){console.error("Error uploading photo:",n),en.error("Failed to upload photo")}finally{w(!1)}}},className:"hidden"})]}),(0,Yy.jsx)("h1",{className:"text-3xl font-display text-gray-800 mb-2 mt-4",children:(null===l||void 0===l?void 0:l.displayName)||"User"}),(null===l||void 0===l||null===(s=l.profile)||void 0===s?void 0:s.bio)&&(0,Yy.jsxs)("p",{className:"text-gray-700 italic max-w-md mx-auto mt-4",children:['"',l.profile.bio,'"']}),(0,Yy.jsxs)("div",{className:"mt-6",children:[(0,Yy.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Share your profile:"}),(0,Yy.jsxs)("div",{className:"flex gap-3 justify-center flex-wrap",children:[(0,Yy.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(o.uid),t="Come be my bestie on Besties! \ud83d\udc9c";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(window.location.href="fb://profile/".concat(o.uid),setTimeout(()=>{window.location.href="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e),"&quote=").concat(encodeURIComponent(t))},1500)):window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e),"&quote=").concat(encodeURIComponent(t)),"_blank","width=600,height=400")},className:"w-12 h-12 rounded-full bg-[#1877f2] hover:bg-[#1864d9] text-white flex items-center justify-center transition-colors shadow-lg",title:"Share on Facebook",children:(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,Yy.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(o.uid),t="Come be my bestie on Besties! \ud83d\udc9c";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(window.location.href="twitter://post?message=".concat(encodeURIComponent(t+" "+e)),setTimeout(()=>{window.location.href="https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(e),"&text=").concat(encodeURIComponent(t))},1500)):window.open("https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(e),"&text=").concat(encodeURIComponent(t)),"_blank","width=600,height=400")},className:"w-12 h-12 rounded-full bg-black hover:bg-gray-800 text-white flex items-center justify-center transition-colors shadow-lg",title:"Share on X (Twitter)",children:(0,Yy.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),(0,Yy.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(o.uid),t="Come be my bestie on Besties! \ud83d\udc9c";/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href="whatsapp://send?text=".concat(encodeURIComponent(t+" "+e)):window.open("https://wa.me/?text=".concat(encodeURIComponent(t+" "+e)),"_blank")},className:"w-12 h-12 rounded-full bg-[#25d366] hover:bg-[#20bd5a] text-white flex items-center justify-center transition-colors shadow-lg",title:"Share on WhatsApp",children:(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),(0,Yy.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(o.uid);navigator.clipboard.writeText(e),en.success("Profile link copied! Share it on Instagram \ud83d\udc9c")},className:"w-12 h-12 rounded-full bg-gradient-to-tr from-[#f09433] via-[#e6683c] to-[#bc1888] hover:opacity-90 text-white flex items-center justify-center transition-opacity shadow-lg",title:"Copy link for Instagram",children:(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),(0,Yy.jsx)("button",{onClick:()=>{const e="".concat(window.location.origin,"/user/").concat(o.uid);navigator.clipboard.writeText(e),en.success("Profile link copied to clipboard!")},className:"w-12 h-12 rounded-full bg-gray-600 hover:bg-gray-700 text-white flex items-center justify-center transition-colors shadow-lg",title:"Copy link",children:(0,Yy.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yy.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-100",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-gradient",children:"Profile Completion \u2728"}),(0,Yy.jsxs)("span",{className:"text-2xl font-bold text-gradient",children:[G.completed,"/",G.total]})]}),(0,Yy.jsxs)("div",{className:"w-full h-4 bg-white rounded-full overflow-hidden mb-4 shadow-inner relative",children:[(0,Yy.jsx)("div",{className:"h-full ".concat((Z=G.percentage,100===Z?"bg-green-500":Z>=60?"bg-yellow-500":"bg-red-500")," transition-all duration-1000 ease-out relative overflow-hidden"),style:{width:"".concat(R,"%")},children:(0,Yy.jsx)("div",{className:"absolute inset-0 shimmer-effect"})}),(0,Yy.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Yy.jsxs)("span",{className:"text-xs font-bold text-gray-700 drop-shadow-sm",children:[Math.round(G.percentage),"%"]})})]}),(0,Yy.jsx)("div",{className:"space-y-2",children:G.tasks.map((e,t)=>(0,Yy.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Yy.jsx)("span",{className:"text-lg",children:e.completed?"\u2705":"\u2b55"}),(0,Yy.jsx)("span",{className:"text-sm ".concat(e.completed?"text-gray-500 line-through":"text-gray-700 font-semibold"),children:e.name})]}),!e.completed&&(e.path||e.action)&&(0,Yy.jsx)("button",{onClick:()=>(e=>{if("scrollToPhoto"===e.action){const e=document.querySelector(".photo-menu-container");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),x(!0))}else if("scrollToBestieCircle"===e.action){const e=document.querySelector(".bestie-circle-section");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}else e.path&&(e.section?c("".concat(e.path,"#").concat(e.section)):c(e.path))})(e),className:"btn btn-sm btn-primary text-xs px-3 py-1",children:"Go \u2192"})]},t))}),100===G.percentage&&(0,Yy.jsxs)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg text-center",children:[(0,Yy.jsx)("span",{className:"text-2xl",children:"\ud83c\udf89"}),(0,Yy.jsx)("p",{className:"text-green-700 font-semibold",children:"Profile Complete! You're all set!"})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Weekly Summary"}),(0,Yy.jsx)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-4",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Yy.jsx)("span",{className:"text-4xl",children:W.emoji}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-1",children:W.message}),(0,Yy.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["\ud83d\udca1 ",W.tip]}),V()&&(0,Yy.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("span",{className:"font-semibold text-primary",children:(null===l||void 0===l||null===(i=l.stats)||void 0===i?void 0:i.totalCheckIns)||0}),(0,Yy.jsx)("span",{className:"text-gray-600",children:" check-ins"})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("span",{className:"font-semibold text-secondary",children:U}),(0,Yy.jsx)("span",{className:"text-gray-600",children:" besties"})]})]})]})]})})]}),q>0&&(0,Yy.jsx)("div",{className:"card p-6 mb-6 bg-gradient-to-r from-orange-50 to-red-50",children:(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-1",children:"Daily Login Streak"}),(0,Yy.jsx)("p",{className:"text-sm text-gray-600",children:"Keep it going! \ud83d\udcaa"})]}),(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-5xl mb-1",children:"\ud83d\udd25"}),(0,Yy.jsx)("div",{className:"text-3xl font-display text-orange-600",children:(0,Yy.jsx)(ev,{end:q,duration:1500})}),(0,Yy.jsx)("div",{className:"text-xs text-gray-600",children:"days"})]})]})}),(0,Yy.jsxs)("div",{className:"mb-6 relative",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Your Badges"}),(0,Yy.jsx)("button",{onClick:()=>c("/badges"),className:"text-primary font-semibold hover:underline text-sm",children:"View All \u2192"})]}),(0,Yy.jsxs)("p",{className:"text-xs text-text-secondary mb-4",children:[N.length>0?"\u2b50 ".concat(N.length," featured badge").concat(N.length>1?"s":""," shown first \u2022 "):"",(0,Yy.jsx)("button",{onClick:()=>C(!0),className:"text-primary hover:underline",children:"Choose your top 3 to feature"})]}),J.length>0?(0,Yy.jsx)(Yy.Fragment,{children:(0,Yy.jsx)("div",{className:"grid grid-cols-3 gap-4",children:J.map(e=>{const t=N.includes(e.id);return(0,Yy.jsxs)("div",{className:"card p-4 text-center transition-all ".concat(t?"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-400 shadow-lg scale-105":"bg-gradient-to-br from-gray-50 to-gray-100"),children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,Yy.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name}),t&&(0,Yy.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:"\u2b50 Featured"})]},e.id)})})}):(0,Yy.jsxs)("div",{className:"card p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-3",children:"Earn badges and showcase your favorites here!"}),(0,Yy.jsx)("button",{onClick:()=>c("/badges"),className:"btn btn-primary text-sm",children:"View All Badges"})]})]}),(0,Yy.jsxs)("div",{className:"card p-8 mb-6 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50",children:[(0,Yy.jsx)("h2",{className:"text-3xl font-display text-gradient mb-6 text-center",children:"Your Impact \u2728"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udc9c"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:U,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Besties"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udee1\ufe0f"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:k,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Times Selected"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-500",children:"as Emergency Contact"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udcc5"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:(()=>{if(!S)return 0;const e=new Date,t=Math.abs(e-S);return Math.ceil(t/864e5)})(),duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Days Active"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\u2705"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:(null===l||void 0===l||null===(A=l.stats)||void 0===A?void 0:A.completedCheckIns)||0,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Safe Check-ins"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udfc6"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:u.length,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Badges Earned"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83d\udd25"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:q,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Day Streak"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udf19"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:_,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Night Check-ins"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-500",children:"9 PM - 6 AM"})]})]}),(0,Yy.jsxs)("div",{className:"relative overflow-hidden rounded-2xl p-6 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[(0,Yy.jsx)("div",{className:"absolute top-0 right-0 text-6xl opacity-10",children:"\ud83c\udf89"}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-2",children:(0,Yy.jsx)(ev,{end:L,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:"Weekend Check-ins"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-500",children:"Sat & Sun"})]})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6 bestie-circle-section",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Your Bestie Circle"}),(0,Yy.jsx)("button",{onClick:()=>c("/besties"),className:"text-primary font-semibold hover:underline",children:"Manage \u2192"})]}),(0,Yy.jsx)(Zw,{userId:null===o||void 0===o?void 0:o.uid,onAddClick:()=>c("/besties")})]}),(null===l||void 0===l||null===(a=l.donationStats)||void 0===a?void 0:a.isActive)&&(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,Yy.jsx)("h3",{className:"font-display text-xl mb-2",children:"\ud83d\udc9c Thank You!"}),(0,Yy.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free for everyone"}),(0,Yy.jsxs)("div",{className:"text-2xl font-display",children:["$",(0,Yy.jsx)(ev,{end:l.donationStats.totalDonated,duration:2e3})," donated"]})]}),(0,Yy.jsx)("div",{className:"space-y-3",children:(0,Yy.jsx)("button",{onClick:()=>c("/settings"),className:"w-full btn btn-secondary",children:"\u2699\ufe0f Settings"})})]}),m&&(0,Yy.jsx)($w,{onClose:()=>p(!1)}),B&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary",children:"Choose Featured Badges"}),(0,Yy.jsx)("button",{onClick:()=>C(!1),className:"w-8 h-8 rounded-full bg-red-500 text-white hover:bg-red-600 flex items-center justify-center text-xl font-bold transition-colors",title:"Close",children:"\xd7"})]}),(0,Yy.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Select up to 3 badges to showcase on your profile (",N.length,"/3 selected)"]}),u.length>0?(0,Yy.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:u.map(e=>{const t=N.includes(e.id);return(0,Yy.jsxs)("button",{onClick:()=>(async e=>{let t=[...N];if(t.includes(e))t=t.filter(t=>t!==e);else{if(t.length>=3)return void en.error("You can only feature up to 3 badges");t.push(e),Q(!0),setTimeout(()=>Q(!1),100)}try{await vp(cm(Ty,"users",o.uid),{featuredBadges:t}),E(t),en.success("Featured badges updated!")}catch(n){console.error("Error updating featured badges:",n),en.error("Failed to update badges")}})(e.id),className:"p-4 rounded-xl text-center transition-all ".concat(t?"bg-gradient-to-br from-yellow-100 to-orange-100 border-2 border-primary shadow-lg scale-105":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"),children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,Yy.jsx)("div",{className:"font-semibold text-xs text-text-primary",children:e.name}),t&&(0,Yy.jsx)("div",{className:"text-xs text-primary mt-1",children:"\u2713 Featured"})]},e.id)})}):(0,Yy.jsxs)("div",{className:"text-center py-12",children:[(0,Yy.jsx)("div",{className:"text-5xl mb-3",children:"\ud83c\udfc6"}),(0,Yy.jsx)("p",{className:"text-gray-600 mb-4",children:"No badges yet! Complete tasks to earn them."})]}),(0,Yy.jsx)("div",{className:"mt-6 flex justify-center",children:(0,Yy.jsx)("button",{onClick:()=>c("/badges"),className:"btn btn-primary",children:"See How to Earn Badges \u2192"})})]})}),(0,Yy.jsx)("style",{children:"\n        @keyframes shimmer {\n          0% {\n            transform: translateX(-100%);\n          }\n          100% {\n            transform: translateX(100%);\n          }\n        }\n        .shimmer-effect {\n          background: linear-gradient(\n            90deg,\n            transparent,\n            rgba(255, 255, 255, 0.4),\n            transparent\n          );\n          animation: shimmer 2s infinite;\n        }\n      "})]});var Z},Av=()=>{var e,n,r,s,i,A,a,o,l;const{userId:c}=ne(),{currentUser:u}=$y(),d=te(),[h,f]=(0,t.useState)(null),[m,p]=(0,t.useState)([]),[g,x]=(0,t.useState)([]),[y,w]=(0,t.useState)(!0),[,v]=(0,t.useState)(!1),[b,B]=(0,t.useState)(null);(0,t.useEffect)(()=>{C()},[c,u]);const C=async()=>{if(c&&u)if(c!==u.uid)try{var e;const[t,n]=await Promise.all([yp(Jm(lm(Ty,"besties"),$m("requesterId","==",u.uid),$m("recipientId","==",c),$m("status","==","accepted"))),yp(Jm(lm(Ty,"besties"),$m("requesterId","==",c),$m("recipientId","==",u.uid),$m("status","==","accepted")))]),r=!t.empty||!n.empty;if(v(r),!r)return B("Only besties can view profiles"),void w(!1);const s=await gp(cm(Ty,"users",c));if(!s.exists())return B("User not found"),void w(!1);const i=Re({id:s.id},s.data());f(i);const A=await gp(cm(Ty,"badges",c));A.exists()&&p(A.data().badges||[]);if(!1!==(null===i||void 0===i||null===(e=i.privacySettings)||void 0===e?void 0:e.showCheckInsToBesties)){const e=new Date;e.setDate(e.getDate()-7);const t=Jm(lm(Ty,"checkins"),$m("userId","==",c),$m("createdAt",">=",e),np("createdAt","desc"),sp(20)),n=(await yp(t)).docs.map(e=>Re({id:e.id},e.data()));x(n)}w(!1)}catch(b){console.error("Error loading user profile:",b),B("Failed to load profile"),w(!1)}else d("/profile")};if(y)return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]});if(b)return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:(0,Yy.jsxs)("div",{className:"card p-12 text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd12"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:b}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"You can only view profiles of your accepted besties"}),(0,Yy.jsx)("button",{onClick:()=>d("/besties"),className:"btn btn-primary",children:"Manage Besties"})]})})]});const N=null!==h&&void 0!==h&&h.featuredBadges?m.filter(e=>h.featuredBadges.includes(e.id)).slice(0,3):m.slice(0,3),E=!1!==(null===h||void 0===h||null===(e=h.privacySettings)||void 0===e?void 0:e.showStatsToBesties),U=!1!==(null===h||void 0===h||null===(n=h.privacySettings)||void 0===n?void 0:n.showCheckInsToBesties);return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Yy.jsxs)("div",{className:"card p-8 mb-6 text-center relative overflow-hidden",style:{background:(null===h||void 0===h||null===(r=h.profile)||void 0===r?void 0:r.backgroundGradient)||"linear-gradient(135deg, #fce7f3 0%, #fbcfe8 50%, #ddd6fe 100%)"},children:[(0,Yy.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Yy.jsx)("div",{className:"absolute top-6 left-6 text-3xl animate-float opacity-40",children:"\ud83d\udc96"}),(0,Yy.jsx)("div",{className:"absolute top-10 right-8 text-2xl animate-float delay-1s opacity-40",children:"\u2728"}),(0,Yy.jsx)("div",{className:"absolute bottom-10 left-10 text-2xl animate-float delay-2s opacity-40",children:"\ud83c\udf38"}),(0,Yy.jsx)("div",{className:"absolute bottom-6 right-6 text-3xl animate-float delay-3s opacity-40",children:"\ud83d\udcab"})]}),(0,Yy.jsxs)("div",{className:"relative z-10",children:[(0,Yy.jsx)("div",{className:"w-36 h-36 bg-gradient-primary rounded-full mx-auto mb-4 flex items-center justify-center text-white text-5xl font-display overflow-hidden border-4 border-white shadow-2xl ring-4 ring-purple-200",children:null!==h&&void 0!==h&&h.photoURL?(0,Yy.jsx)("img",{src:h.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):(null===h||void 0===h||null===(s=h.displayName)||void 0===s?void 0:s[0])||"U"}),(0,Yy.jsx)("h1",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3",children:(null===h||void 0===h?void 0:h.displayName)||"User"}),(0,Yy.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4 flex-wrap",children:[(0,Yy.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-primary rounded-full text-sm font-semibold shadow-lg",children:[(0,Yy.jsx)("span",{children:"\ud83d\udc9c"}),(0,Yy.jsx)("span",{children:"Your Bestie"})]}),(null===h||void 0===h||null===(i=h.requestAttention)||void 0===i?void 0:i.active)&&(0,Yy.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-full text-sm font-semibold shadow-lg animate-pulse",children:[(0,Yy.jsx)("span",{children:"\ud83d\udcac"}),(0,Yy.jsx)("span",{children:h.requestAttention.tag})]})]}),(null===h||void 0===h||null===(A=h.profile)||void 0===A?void 0:A.bio)&&(0,Yy.jsxs)("p",{className:"text-gray-800 italic max-w-md mx-auto mt-4 text-lg",children:['"',h.profile.bio,'"']}),(0,Yy.jsxs)("div",{className:"flex items-center justify-center gap-3 mt-6 flex-wrap",children:[(0,Yy.jsxs)("button",{onClick:()=>{const e=(null===h||void 0===h?void 0:h.phoneNumber)||(null===h||void 0===h?void 0:h.phone);e?window.location.href="sms:".concat(e):en.error("No phone number available")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,Yy.jsx)("span",{children:"\ud83d\udcac"}),(0,Yy.jsx)("span",{children:"Send Message"})]}),(0,Yy.jsxs)("button",{onClick:()=>{const e=(null===h||void 0===h?void 0:h.phoneNumber)||(null===h||void 0===h?void 0:h.phone);e?window.location.href="tel:".concat(e):en.error("No phone number available")},className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2.5 px-6 rounded-full transition-all shadow-lg hover:scale-105 flex items-center gap-2",children:[(0,Yy.jsx)("span",{children:"\ud83d\udcde"}),(0,Yy.jsx)("span",{children:"Call"})]})]})]})]}),E?(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Stats"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Yy.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display text-pink-700 mb-1",children:(0,Yy.jsx)(ev,{end:(null===h||void 0===h||null===(a=h.stats)||void 0===a?void 0:a.completedCheckIns)||0,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Completed Check-ins"})]}),(0,Yy.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display text-blue-700 mb-1",children:(0,Yy.jsx)(ev,{end:(null===h||void 0===h||null===(o=h.stats)||void 0===o?void 0:o.totalCheckIns)||0,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Check-ins"})]}),(0,Yy.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display text-purple-700 mb-1",children:(0,Yy.jsx)(ev,{end:(null===h||void 0===h||null===(l=h.stats)||void 0===l?void 0:l.totalBesties)||0,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Total Besties"})]}),(0,Yy.jsxs)("div",{className:"text-center p-5 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl",children:[(0,Yy.jsx)("div",{className:"text-4xl font-display text-yellow-700 mb-1",children:(0,Yy.jsx)(ev,{end:m.length,duration:1500})}),(0,Yy.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:"Badges Earned"})]})]})]}):(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Stats are private"})]}),U?(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Recent Check-ins (Last 7 Days)"}),g.length>0?(0,Yy.jsx)("div",{className:"space-y-3",children:g.map(e=>{var t,n,r,s,i;return(0,Yy.jsx)("div",{className:"card p-4",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Yy.jsx)("div",{className:"text-3xl",children:(null===(t=e.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"font-semibold text-text-primary",children:(null===(n=e.activity)||void 0===n?void 0:n.name)||e.activityName||"Check-in"}),(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary",children:[null===(r=e.createdAt)||void 0===r?void 0:r.toDate().toLocaleDateString()," at"," ",null===(s=e.createdAt)||void 0===s?void 0:s.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(null===(i=e.location)||void 0===i?void 0:i.address)&&(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:["\ud83d\udccd ",e.location.address]}),e.duration&&(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary",children:["\u23f1\ufe0f ",e.duration," minutes"]})]}),(0,Yy.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("completed"===e.status?"bg-green-100 text-green-700":"alerted"===e.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:["completed"===e.status&&"\u2713 Safe","alerted"===e.status&&"\u26a0\ufe0f Alert Sent","active"===e.status&&"\ud83d\udd14 Active"]})]})},e.id)})}):(0,Yy.jsxs)("div",{className:"card p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc5"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"No check-ins in the last 7 days"})]})]}):(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-gray-50 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Check-in history is private"})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Featured Badges"}),N.length>0?(0,Yy.jsx)("div",{className:"grid grid-cols-3 gap-4",children:N.map((e,t)=>(0,Yy.jsxs)("div",{className:"card p-4 text-center bg-gradient-to-br from-yellow-50 to-orange-50",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:e.icon||"\ud83c\udfc6"}),(0,Yy.jsx)("div",{className:"font-semibold text-sm text-text-primary",children:e.name||e})]},t))}):(0,Yy.jsxs)("div",{className:"card p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfc6"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"No featured badges"})]}),m.length>3&&(0,Yy.jsxs)("p",{className:"text-center text-text-secondary text-sm mt-3",children:["+ ",m.length-3," more badges"]})]}),(0,Yy.jsx)("div",{className:"space-y-3",children:(0,Yy.jsx)("button",{onClick:()=>d("/besties"),className:"w-full btn btn-secondary",children:"\u2190 Back to Besties"})})]})]})},av=e=>{let{bestie:n,onRemove:r}=e;const s=te(),[i,A]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(""),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{(async()=>{if(null!==n&&void 0!==n&&n.userId)try{const e=await gp(cm(Ty,"users",n.userId));if(e.exists()){const t=e.data();A(t.photoURL),o(t.requestAttention)}}catch(e){console.error("Error fetching user data:",e)}finally{c(!1)}else c(!1)})()},[null===n||void 0===n?void 0:n.userId]),(0,t.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&d(!1)};if(u)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[u]);return n?(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsxs)("div",{className:"card p-4 hover:shadow-lg transition-all hover:transform hover:-translate-y-1 relative",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[l?(0,Yy.jsx)("div",{className:"w-12 h-12 bg-gray-200 animate-pulse rounded-full flex-shrink-0"}):(0,Yy.jsxs)("div",{className:"relative",ref:g,children:[(0,Yy.jsx)("div",{onClick:e=>{e.stopPropagation(),d(!u)},className:"cursor-pointer",children:(0,Yy.jsx)(Aw,{photoURL:i,name:n.name||n.phone||"Unknown",requestAttention:a,size:"lg",showBubble:!0})}),u&&(0,Yy.jsxs)("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border-2 border-gray-200 z-50 min-w-[180px]",children:[(0,Yy.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!1),s("/user/".concat(n.userId))},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm font-semibold text-gray-700 first:rounded-t-lg",children:"\ud83d\udc64 View Profile"}),(0,Yy.jsx)("button",{onClick:async e=>{e.stopPropagation(),d(!1);try{await vp(cm(Ty,"besties",n.id),{isFavorite:!n.isFavorite}),en.success(n.isFavorite?"Removed from circle":"Added to circle!")}catch(t){console.error("Error toggling circle:",t),en.error("Failed to update circle")}},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm font-semibold text-gray-700",children:n.isFavorite?"\ud83d\udc94 Remove from Circle":"\ud83d\udc9c Add to Circle"}),(0,Yy.jsx)("button",{onClick:e=>{e.stopPropagation();const t=n.phone;t?window.location.href="sms:".concat(t):en.error("No phone number available"),d(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm font-semibold text-gray-700",children:"\ud83d\udcac Send Message"}),(0,Yy.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!1),f(!0)},className:"w-full text-left px-4 py-2 hover:bg-red-50 text-sm font-semibold text-red-600 last:rounded-b-lg",children:"\ud83d\uddd1\ufe0f Delete Bestie"})]})]}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>n.userId&&s("/user/".concat(n.userId)),children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary truncate",children:n.name||n.phone||"Unknown"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary truncate",children:n.phone||"No phone"})]})]}),(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Yy.jsx)("div",{className:"badge badge-primary text-xs",children:"\ud83d\udc9c Bestie"}),n.isFavorite&&(0,Yy.jsx)("div",{className:"badge bg-purple-100 text-purple-700 text-xs",children:"\u2b50 Circle"})]})]}),h&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"Remove Bestie?"}),(0,Yy.jsxs)("p",{className:"text-text-secondary mb-4",children:["Are you sure you want to remove ",(0,Yy.jsx)("strong",{children:n.name||n.phone})," from your besties?"]}),(0,Yy.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[(0,Yy.jsxs)("p",{className:"text-sm text-yellow-800 mb-2",children:["\u26a0\ufe0f Type ",(0,Yy.jsx)("strong",{children:'"see ya"'})," or ",(0,Yy.jsx)("strong",{children:'"bye bye"'})," to confirm"]}),(0,Yy.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:border-yellow-500 focus:outline-none",placeholder:"Type here...",autoFocus:!0})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>{f(!1),p("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Yy.jsx)("button",{onClick:async()=>{const e=["see ya","bye bye"],t=m.toLowerCase().trim();if(e.includes(t))try{await bp(cm(Ty,"besties",n.id)),en.success("Bestie removed"),f(!1),r&&r(n.id)}catch(s){console.error("Error removing bestie:",s),en.error("Failed to remove bestie")}else en.error('Please type "'.concat(e[0],'" or "').concat(e[1],'" to confirm'))},className:"flex-1 btn bg-red-500 text-white hover:bg-red-600",children:"Remove"})]})]})})]}):null},ov=e=>{let{onClose:n,onSuccess:r}=e;const{currentUser:s,userData:i}=$y(),[A,a]=(0,t.useState)(!1),o="https://bestiesapp.web.app/?invite=".concat(null===s||void 0===s?void 0:s.uid),l="Hey! ".concat((null===i||void 0===i?void 0:i.displayName)||"Your friend"," wants you to be their safety bestie on Besties! \ud83d\udc9c Join them and help keep each other safe: ").concat(o),c=()=>{navigator.clipboard.writeText(l),en.success("Link copied! Now paste it to your bestie! \ud83d\udc95"),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},2e3)};return A?(0,Yy.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Yy.jsx)("div",{className:"modal-content celebration-modal",onClick:e=>e.stopPropagation(),children:(0,Yy.jsxs)("div",{className:"celebration-content",children:[(0,Yy.jsx)("div",{className:"celebration-emoji",children:"\ud83c\udf89"}),(0,Yy.jsx)("h2",{className:"celebration-title",children:"Amazing!"}),(0,Yy.jsx)("p",{className:"celebration-text",children:"You're building your safety network! Every bestie you add makes both of you safer. \ud83d\udc9c"}),(0,Yy.jsxs)("div",{className:"celebration-encouragement",children:[(0,Yy.jsx)("p",{className:"font-semibold text-primary",children:"Keep going! Invite more besties:"}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:"The more people in your circle, the safer everyone is. Your besties will thank you! \u2728"})]})]})})}):(0,Yy.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Yy.jsxs)("div",{className:"modal-content invite-modal",onClick:e=>e.stopPropagation(),children:[(0,Yy.jsxs)("div",{className:"invite-header",children:[(0,Yy.jsx)("div",{className:"invite-icon",children:"\ud83d\udc6f\u200d\u2640\ufe0f"}),(0,Yy.jsx)("h2",{className:"invite-title",children:"Invite Your Bestie"}),(0,Yy.jsx)("p",{className:"invite-subtitle",children:"You're making such a smart choice! Adding besties means you'll both be safer when you're out. \ud83d\udc95"})]}),(0,Yy.jsxs)("div",{className:"invite-encouragement-box",children:[(0,Yy.jsx)("p",{className:"text-sm text-text-secondary",children:(0,Yy.jsx)("strong",{children:"Why invite besties?"})}),(0,Yy.jsxs)("ul",{className:"invite-benefits",children:[(0,Yy.jsx)("li",{children:"\u2713 They'll get alerts if you need help"}),(0,Yy.jsx)("li",{children:"\u2713 You'll know they're safe too"}),(0,Yy.jsx)("li",{children:"\u2713 Mutual protection = double the safety"})]})]}),(0,Yy.jsxs)("button",{onClick:async()=>{if(navigator.share)try{await navigator.share({title:"Join me on Besties!",text:l,url:o}),a(!0),en.success("Thanks for inviting your bestie! \ud83d\udc9c"),setTimeout(()=>{null===r||void 0===r||r(),n()},2e3)}catch(e){"AbortError"!==e.name&&(console.error("Share failed:",e),en.error("Sharing failed. Try copy link instead!"))}else c()},className:"share-button primary-share",children:[(0,Yy.jsx)("span",{className:"share-icon",children:"\ud83c\udf89"}),(0,Yy.jsxs)("div",{className:"share-button-content",children:[(0,Yy.jsx)("div",{className:"share-button-title",children:"Share Invite"}),(0,Yy.jsx)("div",{className:"share-button-subtitle",children:"Choose any app to send"})]})]}),(0,Yy.jsx)("div",{className:"share-divider",children:(0,Yy.jsx)("span",{children:"OR SHARE VIA"})}),(0,Yy.jsxs)("div",{className:"share-options-grid",children:[(0,Yy.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(l);window.open("https://wa.me/?text=".concat(e),"_blank"),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},1500)},className:"share-option whatsapp",children:[(0,Yy.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcac"}),(0,Yy.jsx)("span",{children:"WhatsApp"})]}),(0,Yy.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(l);window.location.href="sms:?body=".concat(e),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},1500)},className:"share-option sms",children:[(0,Yy.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcf1"}),(0,Yy.jsx)("span",{children:"Text"})]}),(0,Yy.jsxs)("button",{onClick:()=>{const e=encodeURIComponent(o);window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(e),"_blank"),a(!0),setTimeout(()=>{null===r||void 0===r||r(),n()},1500)},className:"share-option facebook",children:[(0,Yy.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udcd8"}),(0,Yy.jsx)("span",{children:"Facebook"})]}),(0,Yy.jsxs)("button",{onClick:c,className:"share-option copy",children:[(0,Yy.jsx)("span",{className:"share-option-emoji",children:"\ud83d\udccb"}),(0,Yy.jsx)("span",{children:"Copy Link"})]})]}),(0,Yy.jsx)("div",{className:"invite-footer",children:(0,Yy.jsx)("p",{className:"text-xs text-text-secondary",children:"\ud83d\udc9c Your besties will appreciate you looking out for them!"})}),(0,Yy.jsx)("button",{onClick:n,className:"modal-close-button",children:"\u2715"})]})})},lv=e=>{let{request:n,onRequestHandled:r}=e;const[s,i]=(0,t.useState)(!1),[A,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1),{executeOptimistic:d}=Tw();(0,t.useEffect)(()=>{(async()=>{if(null!==n&&void 0!==n&&n.requesterId)try{const e=await gp(cm(Ty,"users",n.requesterId));if(e.exists()){const t=e.data();a(t.photoURL)}}catch(e){console.error("Error fetching user photo:",e)}finally{l(!1)}else l(!1)})()},[null===n||void 0===n?void 0:n.requesterId]);return c?null:(0,Yy.jsxs)("div",{className:"card p-4 border-2 border-primary/20 animate-fade-in",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Yy.jsx)("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center text-white font-display text-lg overflow-hidden",children:o?(0,Yy.jsx)("div",{className:"w-full h-full bg-gray-200 animate-pulse"}):A?(0,Yy.jsx)("img",{src:A,alt:n.requesterName||"Bestie",className:"w-full h-full object-cover"}):null!==n&&void 0!==n&&n.requesterName&&"string"===typeof n.requesterName&&n.requesterName.length>0?n.requesterName[0].toUpperCase():"?"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:n.requesterName}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:n.requesterPhone})]})]}),n.personalMessage&&(0,Yy.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 text-sm text-text-secondary italic",children:['"',n.personalMessage,'"']}),(0,Yy.jsxs)("div",{className:"flex gap-2",children:[(0,Yy.jsx)("button",{onClick:async()=>{await d({optimisticUpdate:()=>{u(!0),r&&r(n.id)},serverUpdate:async()=>{i(!0);try{const e=await Sw.declineBestieRequest(n.id);if(!e.success)throw new Error("Failed to decline request");return e}finally{i(!1)}},rollback:()=>{u(!1)},successMessage:"Request declined",errorMessage:"Failed to decline request"})},disabled:s,className:"flex-1 btn btn-secondary text-sm",children:"Decline"}),(0,Yy.jsx)("button",{onClick:async()=>{await d({optimisticUpdate:()=>{u(!0),r&&r(n.id)},serverUpdate:async()=>{i(!0);try{const e=await Sw.acceptBestieRequest(n.id);if(!e.success)throw new Error("Failed to accept request");return e}finally{i(!1)}},rollback:()=>{u(!1)},successMessage:"You're now besties with ".concat(n.requesterName,"! \ud83d\udc9c"),errorMessage:"Failed to accept request"})},disabled:s,className:"flex-1 btn btn-primary text-sm",children:s?"Accepting...":"Accept"})]})]})},cv=e=>{const t=new Date-e,n=Math.floor(t/6e4),r=Math.floor(t/36e5),s=Math.floor(t/864e5);return n<1?"Just now":n<60?"".concat(n," min ago"):r<24?"".concat(r," hour").concat(r>1?"s":""," ago"):"".concat(s," day").concat(s>1?"s":""," ago")},uv=()=>{const{currentUser:e,userData:n}=$y(),r=te(),[s,i]=(0,t.useState)([]),[A,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[p,g]=(0,t.useState)([]),[x,y]=(0,t.useState)("all"),[w,v]=(0,t.useState)(null),[b,B]=(0,t.useState)(!1),[C,N]=(0,t.useState)([]),[E,U]=(0,t.useState)(""),[j,F]=(0,t.useState)({});(0,t.useEffect)(()=>{if(!e)return;const t=Jm(lm(Ty,"besties"),$m("requesterId","==",e.uid),$m("status","==","accepted")),n=Jm(lm(Ty,"besties"),$m("recipientId","==",e.uid),$m("status","==","accepted")),r=Cp(t,e=>{const t=[];e.forEach(e=>{const n=e.data();t.push({id:e.id,userId:n.recipientId,name:n.recipientName||"Unknown",phone:n.recipientPhone,role:"added",isFavorite:n.isFavorite||!1})}),yp(n).then(e=>{e.forEach(e=>{const n=e.data();t.push({id:e.id,userId:n.requesterId,name:n.requesterName||"Unknown",phone:n.requesterPhone,role:"guardian",isFavorite:n.isFavorite||!1})}),i(t),u(!1)}).catch(e=>{console.error("Error loading recipient besties:",e),i(t),u(!1)})}),s=Cp(Jm(lm(Ty,"besties"),$m("recipientId","==",e.uid),$m("status","==","pending")),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),a(t)});return()=>{r(),s()}},[e]),(0,t.useEffect)(()=>{if(!e||0===s.length)return;const t=async()=>{if(document.hidden)return;const e=[],t=[],n=[],r=[...new Set(s.map(e=>e.userId))],i=new Date;i.setHours(i.getHours()-48);for(const l of r)try{const r=Jm(lm(Ty,"checkins"),$m("userId","==",l),$m("createdAt",">=",i),np("createdAt","desc"),sp(10));(await yp(r)).forEach(n=>{var r;const i=n.data(),A=s.find(e=>e.userId===l);var a;(e.push({id:n.id,type:"checkin",checkInData:i,userName:(null===A||void 0===A?void 0:A.name)||"Bestie",userId:l,timestamp:(null===(r=i.createdAt)||void 0===r?void 0:r.toDate())||new Date,status:i.status}),"alerted"===i.status)&&t.push({id:n.id,userName:(null===A||void 0===A?void 0:A.name)||"Bestie",userId:l,checkInData:i,timestamp:(null===(a=i.createdAt)||void 0===a?void 0:a.toDate())||new Date})});const o=await gp(cm(Ty,"users",l));if(o.exists()){const e=o.data();if(e.requestAttention&&e.requestAttention.active){var A;const t=s.find(e=>e.userId===l);n.push({userId:l,userName:(null===t||void 0===t?void 0:t.name)||"Bestie",tag:e.requestAttention.tag,note:e.requestAttention.note,timestamp:(null===(A=e.requestAttention.timestamp)||void 0===A?void 0:A.toDate())||new Date})}}const c=await gp(cm(Ty,"badges",l));if(c.exists()){var a;const t=(null===(a=c.data().badges)||void 0===a?void 0:a.filter(e=>{var t;const n=null===(t=e.earnedAt)||void 0===t?void 0:t.toDate();return n&&n>i}))||[];t.forEach(t=>{var n;const r=s.find(e=>e.userId===l);e.push({id:"badge-".concat(l,"-").concat(t.id),type:"badge",userName:(null===r||void 0===r?void 0:r.name)||"Bestie",userId:l,badge:t,timestamp:(null===(n=t.earnedAt)||void 0===n?void 0:n.toDate())||new Date})})}}catch(o){console.error("Error loading activity for bestie:",o)}e.sort((e,t)=>t.timestamp-e.timestamp),h(e),m(t),g(n)};t();const n=()=>{document.hidden||t()};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}},[e,s]);(0,t.useEffect)(()=>{if(0===d.length)return;(async()=>{const e={};for(const n of d)if("checkin"===n.type)try{const t=await yp(lm(Ty,"checkins",n.id,"reactions"));e[n.id]=t.docs.map(e=>Re({id:e.id},e.data()))}catch(t){console.error("Error loading reactions:",t),e[n.id]=[]}F(e)})()},[d]),(0,t.useEffect)(()=>{if(!w||!b)return;(async()=>{try{const e=Jm(lm(Ty,"checkins",w.id,"comments"),np("timestamp","asc")),t=(await yp(e)).docs.map(e=>Re({id:e.id},e.data()));N(t)}catch(e){console.error("Error loading comments:",e),N([])}})()},[w,b]);const Q=async(t,r)=>{try{var s;const i=null===(s=j[t])||void 0===s?void 0:s.find(t=>t.userId===e.uid&&t.emoji===r);if(i)return void en("You already reacted with this!",{icon:r});await Bp(lm(Ty,"checkins",t,"reactions"),{userId:e.uid,userName:(null===n||void 0===n?void 0:n.displayName)||"Anonymous",emoji:r,timestamp:yo.now()});const A=await yp(lm(Ty,"checkins",t,"reactions"));F(e=>Re(Re({},e),{},{[t]:A.docs.map(e=>Re({id:e.id},e.data()))})),en.success("Reaction added!")}catch(i){console.error("Error adding reaction:",i),en.error("Failed to add reaction")}},k=async()=>{if(E.trim()&&w)try{await Bp(lm(Ty,"checkins",w.id,"comments"),{userId:e.uid,userName:(null===n||void 0===n?void 0:n.displayName)||"Anonymous",userPhoto:(null===n||void 0===n?void 0:n.photoURL)||null,text:E.trim(),timestamp:yo.now()});const t=Jm(lm(Ty,"checkins",w.id,"comments"),np("timestamp","asc")),r=await yp(t);N(r.docs.map(e=>Re({id:e.id},e.data()))),U(""),en.success("Comment added!")}catch(t){console.error("Error adding comment:",t),en.error("Failed to add comment")}},I=(()=>{let e=[...s];switch(x){case"circle":e=e.filter(e=>e.isFavorite);break;case"active":const t=new Date(Date.now()-36e5);e=e.filter(e=>d.some(n=>n.userId===e.userId&&n.timestamp>t&&"active"===n.status));break;default:e.sort((e,t)=>{const n=d.find(t=>t.userId===e.userId),r=d.find(e=>e.userId===t.userId);return n&&r?r.timestamp-n.timestamp:n&&!r?-1:!n&&r?1:e.isFavorite&&!t.isFavorite?-1:!e.isFavorite&&t.isFavorite?1:(e.name||"").localeCompare(t.name||"")})}return e})(),S=f.length>0||p.length>0;return c?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-6xl mx-auto p-4 pb-32 md:pb-6",children:[(0,Yy.jsxs)("div",{className:"mb-4",children:[(0,Yy.jsx)("h1",{className:"text-2xl md:text-3xl font-display text-gradient mb-2",children:"\ud83d\udc9c Your Besties"}),(0,Yy.jsx)("p",{className:"text-sm md:text-base text-text-secondary",children:"Your safety squad activity hub"})]}),A.length>0&&(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsxs)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3",children:["\ud83d\udd14 Pending Requests (",A.length,")"]}),(0,Yy.jsx)("div",{className:"space-y-3",children:A.map(e=>(0,Yy.jsx)(lv,{request:e},e.id))})]}),S&&(0,Yy.jsxs)("div",{className:"mb-6 animate-pulse-slow",children:[(0,Yy.jsxs)("h2",{className:"text-lg md:text-xl font-display text-red-600 mb-3 flex items-center gap-2",children:[(0,Yy.jsx)("span",{className:"animate-ping inline-block w-3 h-3 bg-red-600 rounded-full"}),"\u26a0\ufe0f NEEDS ATTENTION"]}),f.length>0&&(0,Yy.jsx)("div",{className:"space-y-3 mb-4",children:f.map(e=>{var t,n;return(0,Yy.jsx)("div",{className:"card p-4 bg-red-50 border-2 border-red-400 animate-pulse-slow",children:(0,Yy.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[(0,Yy.jsx)("div",{className:"text-3xl flex-shrink-0",children:"\ud83d\udea8"}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsxs)("h3",{className:"font-semibold text-red-900 text-sm md:text-base",children:[e.userName," missed a check-in"]}),(0,Yy.jsxs)("p",{className:"text-xs md:text-sm text-red-700 break-words",children:[(null===(t=e.checkInData.activity)||void 0===t?void 0:t.name)||"Check-in"," \u2022 ",new Date(e.timestamp).toLocaleString()]}),(null===(n=e.checkInData.location)||void 0===n?void 0:n.address)&&(0,Yy.jsxs)("p",{className:"text-xs md:text-sm text-red-600 mt-1 break-words",children:["\ud83d\udccd ",e.checkInData.location.address]})]}),(0,Yy.jsx)("button",{className:"btn btn-sm bg-red-600 text-white hover:bg-red-700 w-full sm:w-auto flex-shrink-0",onClick:()=>{var t;return window.location.href="tel:".concat(null===(t=s.find(t=>t.userId===e.userId))||void 0===t?void 0:t.phone)},children:"Call Now"})]})},e.id)})}),p.length>0&&(0,Yy.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,Yy.jsx)("div",{className:"card p-4 bg-purple-50 border-2 border-purple-300 animate-pulse-slow",children:(0,Yy.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[(0,Yy.jsx)("div",{className:"text-3xl flex-shrink-0",children:"\ud83d\udc9c"}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsxs)("h3",{className:"font-semibold text-purple-900 text-sm md:text-base",children:[e.userName," needs support"]}),(0,Yy.jsx)("div",{className:"inline-block px-3 py-1 bg-purple-200 text-purple-800 rounded-full text-xs md:text-sm font-semibold my-2",children:e.tag}),e.note&&(0,Yy.jsxs)("p",{className:"text-xs md:text-sm text-purple-700 italic break-words",children:['"',e.note,'"']}),(0,Yy.jsx)("p",{className:"text-xs text-purple-600 mt-2",children:new Date(e.timestamp).toLocaleString()})]}),(0,Yy.jsx)("button",{className:"btn btn-sm btn-primary w-full sm:w-auto flex-shrink-0",onClick:()=>{const t=s.find(t=>t.userId===e.userId);null!==t&&void 0!==t&&t.phone&&(window.location.href="sms:".concat(t.phone))},children:"Reach Out"})]})},e.userId))})]}),(0,Yy.jsxs)("div",{className:"space-y-6 lg:grid lg:grid-cols-3 lg:gap-6 lg:space-y-0",children:[(0,Yy.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Yy.jsx)("div",{className:"card p-3 md:p-4",children:(0,Yy.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-3 px-3 md:mx-0 md:px-0",children:[(0,Yy.jsx)("button",{onClick:()=>y("all"),className:"px-3 md:px-4 py-2 rounded-full whitespace-nowrap font-semibold text-xs md:text-sm flex-shrink-0 ".concat("all"===x?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All Besties"}),(0,Yy.jsx)("button",{onClick:()=>y("circle"),className:"px-3 md:px-4 py-2 rounded-full whitespace-nowrap font-semibold text-xs md:text-sm flex-shrink-0 ".concat("circle"===x?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\ud83d\udc9c Circle"}),(0,Yy.jsx)("button",{onClick:()=>y("active"),className:"px-3 md:px-4 py-2 rounded-full whitespace-nowrap font-semibold text-xs md:text-sm flex-shrink-0 ".concat("active"===x?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\ud83d\udd14 Active"})]})}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3",children:"\ud83d\udcf0 Activity Feed"}),0===d.length?(0,Yy.jsxs)("div",{className:"card p-6 md:p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl md:text-4xl mb-2",children:"\ud83c\udf1f"}),(0,Yy.jsx)("p",{className:"text-sm md:text-base text-text-secondary",children:"No recent activity"}),(0,Yy.jsx)("p",{className:"text-xs md:text-sm text-text-secondary mt-1",children:"Check-ins from your besties will appear here"})]}):(0,Yy.jsx)("div",{className:"space-y-3",children:d.slice(0,15).map(e=>{var t,n,r;return(0,Yy.jsxs)("div",{className:"card p-3 md:p-4",children:["checkin"===e.type&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("div",{className:"flex items-start gap-2 md:gap-3",children:[(0,Yy.jsx)("div",{className:"text-2xl md:text-3xl flex-shrink-0",children:(null===(t=e.checkInData.activity)||void 0===t?void 0:t.emoji)||"\ud83d\udccd"}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsxs)("h3",{className:"font-semibold text-text-primary text-sm md:text-base break-words",children:[(0,Yy.jsx)("span",{className:"text-primary",children:e.userName}),"completed"===e.status&&" completed check-in safely \u2705","active"===e.status&&" is currently checked in \ud83d\udd14","alerted"===e.status&&" MISSED check-in \ud83d\udea8"]}),(0,Yy.jsxs)("p",{className:"text-xs md:text-sm text-text-secondary",children:[(null===(n=e.checkInData.activity)||void 0===n?void 0:n.name)||"Check-in"," \u2022 ",cv(e.timestamp)]}),(null===(r=e.checkInData.location)||void 0===r?void 0:r.address)&&(0,Yy.jsxs)("p",{className:"text-xs md:text-sm text-text-secondary mt-1 break-words",children:["\ud83d\udccd ",e.checkInData.location.address]})]}),(0,Yy.jsxs)("div",{className:"px-2 md:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap flex-shrink-0 ".concat("completed"===e.status?"bg-green-100 text-green-700":"alerted"===e.status?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:["completed"===e.status&&"\u2713","alerted"===e.status&&"\u26a0\ufe0f","active"===e.status&&"\ud83d\udd14"]})]}),"alerted"!==e.status&&(0,Yy.jsxs)("div",{className:"mt-3",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,Yy.jsx)("button",{onClick:()=>Q(e.id,"\ud83d\udc9c"),className:"text-xl md:text-2xl hover:scale-110 transition-transform",title:"Proud",children:"\ud83d\udc9c"}),(0,Yy.jsx)("button",{onClick:()=>Q(e.id,"\ud83d\ude2e\u200d\ud83d\udca8"),className:"text-xl md:text-2xl hover:scale-110 transition-transform",title:"Relieved",children:"\ud83d\ude2e\u200d\ud83d\udca8"}),(0,Yy.jsx)("button",{onClick:()=>Q(e.id,"\ud83c\udf89"),className:"text-xl md:text-2xl hover:scale-110 transition-transform",title:"Celebrate",children:"\ud83c\udf89"}),(0,Yy.jsx)("button",{onClick:()=>{v(e),B(!0)},className:"ml-auto text-xs md:text-sm text-primary hover:underline font-semibold",children:"\ud83d\udcac Comment"})]}),j[e.id]&&j[e.id].length>0&&(0,Yy.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:Object.entries(j[e.id].reduce((e,t)=>(e[t.emoji]=(e[t.emoji]||0)+1,e),{})).map(e=>{let[t,n]=e;return(0,Yy.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded-full",children:[t," ",n]},t)})})]})]}),"badge"===e.type&&(0,Yy.jsxs)("div",{className:"flex items-start gap-2 md:gap-3",children:[(0,Yy.jsx)("div",{className:"text-2xl md:text-3xl flex-shrink-0",children:e.badge.icon||"\ud83c\udfc6"}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsxs)("h3",{className:"font-semibold text-text-primary text-sm md:text-base break-words",children:[(0,Yy.jsx)("span",{className:"text-primary",children:e.userName})," earned the ",(0,Yy.jsx)("span",{className:"text-yellow-600",children:e.badge.name})," badge! \ud83c\udf89"]}),(0,Yy.jsx)("p",{className:"text-xs md:text-sm text-text-secondary",children:cv(e.timestamp)})]}),(0,Yy.jsx)("button",{onClick:()=>Q(e.id,"\ud83c\udf89"),className:"text-xl md:text-2xl hover:scale-110 transition-transform flex-shrink-0",children:"\ud83c\udf89"})]})]},e.id)})})]})]}),(0,Yy.jsxs)("div",{className:"space-y-6",children:[(0,Yy.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Yy.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Yy.jsx)("div",{className:"absolute top-4 left-4 text-yellow-300 animate-pulse text-2xl",children:"\u2728"}),(0,Yy.jsx)("div",{className:"absolute top-8 right-6 text-pink-300 animate-pulse delay-1s text-xl",children:"\ud83d\udcab"}),(0,Yy.jsx)("div",{className:"absolute bottom-6 left-8 text-purple-300 animate-pulse delay-2s text-xl",children:"\u2b50"}),(0,Yy.jsx)("div",{className:"absolute bottom-4 right-4 text-yellow-300 animate-pulse delay-3s text-2xl",children:"\u2728"})]}),(0,Yy.jsxs)("div",{className:"card p-6 bg-gradient-to-br from-pink-50 via-purple-50 to-yellow-50 border-4 border-pink-200 shadow-xl relative",children:[(0,Yy.jsxs)("div",{className:"text-center mb-6",children:[(0,Yy.jsx)("div",{className:"text-5xl mb-2 animate-bounce",style:{animationDuration:"2s"},children:"\ud83d\udc51"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display bg-gradient-to-r from-pink-600 via-purple-600 to-yellow-600 bg-clip-text text-transparent mb-1",children:"This Week's Queens"}),(0,Yy.jsx)("p",{className:"text-xs text-gray-600",children:"The besties who absolutely slayed! \ud83d\udc85"})]}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"relative group",children:[(0,Yy.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-400 to-rose-400 rounded-2xl blur opacity-30 group-hover:opacity-50 transition-opacity"}),(0,Yy.jsx)("div",{className:"relative bg-white rounded-2xl p-4 shadow-lg border-2 border-pink-200 hover:scale-105 transition-transform",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Yy.jsxs)("div",{className:"relative",children:[(0,Yy.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg",children:"\ud83d\udc96"}),(0,Yy.jsx)("div",{className:"absolute -top-1 -right-1 bg-yellow-400 rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"\ud83c\udfc6"})]}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-display text-base font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent",children:"Most Reliable"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Always there! \ud83d\udc95"}),(0,Yy.jsx)("div",{className:"text-xs text-center text-gray-400 italic py-1 bg-gray-50 rounded-lg mt-2",children:"Earning crowns... \ud83d\udc51\u2728"})]})]})})]}),(0,Yy.jsxs)("div",{className:"relative group",children:[(0,Yy.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-fuchsia-400 rounded-2xl blur opacity-30 group-hover:opacity-50 transition-opacity"}),(0,Yy.jsx)("div",{className:"relative bg-white rounded-2xl p-4 shadow-lg border-2 border-purple-200 hover:scale-105 transition-transform",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Yy.jsxs)("div",{className:"relative",children:[(0,Yy.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-400 to-fuchsia-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg animate-pulse",children:"\u26a1"}),(0,Yy.jsx)("div",{className:"absolute -top-1 -right-1 bg-yellow-400 rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"\ud83c\udfc6"})]}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-display text-base font-bold bg-gradient-to-r from-purple-600 to-fuchsia-600 bg-clip-text text-transparent",children:"Lightning Fast"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Instant replies! \u26a1"}),(0,Yy.jsx)("div",{className:"text-xs text-center text-gray-400 italic py-1 bg-gray-50 rounded-lg mt-2",children:"Collecting sparkles... \u2728"})]})]})})]}),(0,Yy.jsxs)("div",{className:"relative group",children:[(0,Yy.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-rose-400 to-pink-400 rounded-2xl blur opacity-30 group-hover:opacity-50 transition-opacity"}),(0,Yy.jsx)("div",{className:"relative bg-white rounded-2xl p-4 shadow-lg border-2 border-rose-200 hover:scale-105 transition-transform",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Yy.jsxs)("div",{className:"relative",children:[(0,Yy.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-rose-400 to-pink-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg",children:"\ud83d\udee1\ufe0f"}),(0,Yy.jsx)("div",{className:"absolute -top-1 -right-1 bg-yellow-400 rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"\ud83c\udfc6"})]}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-display text-base font-bold bg-gradient-to-r from-rose-600 to-pink-600 bg-clip-text text-transparent",children:"Safety Superstar"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Check-in queen! \ud83d\udc51"}),(0,Yy.jsx)("div",{className:"text-xs text-center text-gray-400 italic py-1 bg-gray-50 rounded-lg mt-2",children:"Building streaks... \ud83d\udd25"})]})]})})]}),(0,Yy.jsxs)("div",{className:"relative group",children:[(0,Yy.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400 to-amber-400 rounded-2xl blur opacity-30 group-hover:opacity-50 transition-opacity"}),(0,Yy.jsx)("div",{className:"relative bg-white rounded-2xl p-4 shadow-lg border-2 border-yellow-200 hover:scale-105 transition-transform",children:(0,Yy.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Yy.jsxs)("div",{className:"relative",children:[(0,Yy.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg",children:"\ud83d\udd25"}),(0,Yy.jsx)("div",{className:"absolute -top-1 -right-1 bg-yellow-400 rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"\ud83c\udfc6"})]}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-display text-base font-bold bg-gradient-to-r from-yellow-600 to-amber-600 bg-clip-text text-transparent",children:"Streak Queen"}),(0,Yy.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"On fire! \ud83d\udd25"}),(0,Yy.jsx)("div",{className:"text-xs text-center text-gray-400 italic py-1 bg-gray-50 rounded-lg mt-2",children:"Tracking victories... \ud83d\udcaa"})]})]})})]})]}),(0,Yy.jsx)("div",{className:"mt-6 pt-4 border-t-2 border-pink-200 text-center",children:(0,Yy.jsx)("p",{className:"text-sm font-semibold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"\ud83c\udfaf Resets every Monday \u2022 Keep slaying, queens! \ud83d\udc51"})})]})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("h2",{className:"text-lg md:text-xl font-display text-text-primary mb-3 md:mb-4",children:["circle"===x&&"\ud83d\udc9c Bestie Circle","all"===x&&"All Besties","active"===x&&"\ud83d\udd14 Active Now"]}),0===I.length?(0,Yy.jsxs)("div",{className:"card p-6 md:p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl md:text-4xl mb-2",children:"\ud83d\udc9c"}),(0,Yy.jsx)("p",{className:"text-sm md:text-base text-text-secondary",children:"No besties in this filter"}),"circle"===x&&(0,Yy.jsx)("p",{className:"text-xs md:text-sm text-text-secondary mt-2",children:"Add besties to your circle by favoriting them"})]}):(0,Yy.jsx)("div",{className:"grid grid-cols-1 gap-3",children:I.map(e=>{const t=(e=>{const t=[],n=d.filter(t=>t.userId===e.userId),r=new Date(Date.now()-3e5);n.some(e=>e.timestamp>r)&&t.push({icon:"\u26a1",tooltip:"Fast responder"});const s=n.filter(e=>"completed"===e.status).length;s>5&&t.push({icon:"\ud83d\udee1\ufe0f",tooltip:"Very reliable"}),t.push({icon:"\ud83d\udd25",tooltip:"7-day streak"});const i=n.filter(e=>{const t=e.timestamp.getHours();return t>=21||t<=6});return i.length>2&&t.push({icon:"\ud83c\udf19",tooltip:"Night owl"}),t.slice(0,3)})(e);return(0,Yy.jsxs)("div",{className:"relative group",children:[(0,Yy.jsx)("div",{className:"h-full",children:(0,Yy.jsx)(av,{bestie:e})}),t.length>0&&(0,Yy.jsx)("div",{className:"absolute top-3 left-3 flex gap-1 z-10",children:t.map((e,t)=>(0,Yy.jsx)("span",{className:"text-base bg-white rounded-full p-1.5 shadow-md border border-purple-200",title:e.tooltip,children:e.icon},t))}),(0,Yy.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-900/95 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-end p-4 pointer-events-none group-hover:pointer-events-auto",children:(0,Yy.jsxs)("div",{className:"w-full space-y-2",children:[(0,Yy.jsxs)("button",{onClick:()=>r("/user/".concat(e.userId)),className:"w-full bg-white hover:bg-purple-50 text-purple-900 font-semibold py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg",children:[(0,Yy.jsx)("span",{children:"\ud83d\udc64"}),(0,Yy.jsx)("span",{children:"View Profile"})]}),(0,Yy.jsxs)("div",{className:"flex gap-2",children:[(0,Yy.jsxs)("button",{onClick:async()=>{try{const t=await gp(cm(Ty,"besties",e.id));t.exists()&&(await vp(cm(Ty,"besties",e.id),{isFavorite:!t.data().isFavorite}),en.success(t.data().isFavorite?"Removed from circle":"Added to circle! \ud83d\udc9c"))}catch(t){console.error("Error toggling circle:",t),en.error("Failed to update")}},className:"flex-1 ".concat(e.isFavorite?"bg-pink-500 hover:bg-pink-600":"bg-purple-500 hover:bg-purple-600"," text-white font-semibold py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg"),children:[(0,Yy.jsx)("span",{children:e.isFavorite?"\ud83d\udc94":"\ud83d\udc9c"}),(0,Yy.jsx)("span",{className:"text-sm",children:e.isFavorite?"Remove":"Add to Circle"})]}),(0,Yy.jsxs)("button",{onClick:()=>{e.phone?window.location.href="sms:".concat(e.phone):en.error("No phone number available")},className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2 shadow-lg",children:[(0,Yy.jsx)("span",{children:"\ud83d\udcac"}),(0,Yy.jsx)("span",{className:"text-sm",children:"Message"})]})]})]})})]},e.id)})})]})]})]}),0===s.length&&0===A.length&&(0,Yy.jsxs)("div",{className:"card p-8 md:p-12 text-center",children:[(0,Yy.jsx)("div",{className:"text-5xl md:text-6xl mb-4",children:"\ud83d\udc9c"}),(0,Yy.jsx)("h2",{className:"text-xl md:text-2xl font-display text-text-primary mb-2",children:"No besties yet!"}),(0,Yy.jsx)("p",{className:"text-sm md:text-base text-text-secondary mb-6",children:"Add friends who'll have your back when you need them"}),(0,Yy.jsx)("button",{onClick:()=>l(!0),className:"btn btn-primary",children:"Add Your First Bestie"})]})]}),b&&w&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[200] flex items-end md:items-center justify-center",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-t-2xl md:rounded-2xl max-w-md w-full max-h-[80vh] md:max-h-[600px] flex flex-col",children:[(0,Yy.jsxs)("div",{className:"p-4 md:p-6 border-b border-gray-200 flex-shrink-0",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsx)("h2",{className:"text-xl md:text-2xl font-display text-text-primary",children:"\ud83d\udcac Comments"}),(0,Yy.jsx)("button",{onClick:()=>{B(!1),v(null),N([]),U("")},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:[w.userName,"'s check-in"]})]}),(0,Yy.jsx)("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:0===C.length?(0,Yy.jsxs)("div",{className:"text-center py-8",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcac"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm",children:"No comments yet. Be the first to comment!"})]}):C.map(e=>{var t,n;return(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Yy.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-8 h-8 rounded-full object-cover"}):(0,Yy.jsx)("div",{className:"w-8 h-8 bg-gradient-primary rounded-full flex items-center justify-center text-white text-sm font-display",children:(null===(t=e.userName)||void 0===t?void 0:t[0])||"?"})}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsxs)("div",{className:"bg-gray-100 rounded-2xl px-3 py-2",children:[(0,Yy.jsx)("p",{className:"font-semibold text-sm text-text-primary",children:e.userName}),(0,Yy.jsx)("p",{className:"text-sm text-text-primary break-words",children:e.text})]}),(0,Yy.jsx)("p",{className:"text-xs text-gray-500 mt-1 px-3",children:null!==(n=e.timestamp)&&void 0!==n&&n.toDate?cv(e.timestamp.toDate()):"Just now"})]})]},e.id)})}),(0,Yy.jsx)("div",{className:"p-4 md:p-6 border-t border-gray-200 flex-shrink-0",children:(0,Yy.jsxs)("div",{className:"flex gap-2",children:[(0,Yy.jsx)("input",{type:"text",value:E,onChange:e=>U(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},placeholder:"Add a comment...",className:"flex-1 px-4 py-2 rounded-full border-2 border-gray-200 focus:border-primary focus:outline-none text-sm"}),(0,Yy.jsx)("button",{onClick:k,disabled:!E.trim(),className:"btn btn-primary px-6 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})})]})}),o&&(0,Yy.jsx)(ov,{onClose:()=>l(!1)}),(0,Yy.jsx)("style",{children:"\n        @keyframes pulse-slow {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.7;\n          }\n        }\n        .animate-pulse-slow {\n          animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n        }\n      "})]})},dv={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_VAPID_KEY;const hv=new class{constructor(){this.initialized=!1,this.token=null}isSupported(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}getPermissionStatus(){return this.isSupported()?Notification.permission:"unsupported"}async requestPermission(){if(!this.isSupported())throw new Error("Push notifications are not supported in this browser");if("granted"===Notification.permission)return!0;return"granted"===await Notification.requestPermission()}async initializeServiceWorker(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.log("Service Worker registered:",e),e}catch(e){return console.error("Service Worker registration failed:",e),null}}async getToken(){try{if(!dv)return console.warn("VAPID key not configured"),en.error("Push notifications require additional setup. Please use email or WhatsApp notifications instead.",{duration:6e3}),null;const e=await this.initializeServiceWorker();if(!e)return console.error("Could not register service worker"),null;await new Promise(e=>setTimeout(e,1e3));const t=await async function(e,t){return By(e=Fn(e),t)}(Ly,{vapidKey:dv,serviceWorkerRegistration:e});return t?(console.log("FCM Token obtained:",t),this.token=t,t):(console.warn("No FCM token available. Request permission to generate one."),null)}catch(e){return console.error("Error getting FCM token:",e),null}}async saveTokenToFirestore(e){try{const t=Sy.currentUser;return t?(await vp(cm(Ty,"users",t.uid),{fcmToken:e,notificationsEnabled:!0,lastTokenUpdate:new Date}),console.log("FCM token saved to Firestore"),!0):(console.warn("No user logged in to save token"),!1)}catch(t){return console.error("Error saving FCM token:",t),!1}}async enableNotifications(){try{if(!this.isSupported())return en.error("Push notifications are not supported in your browser"),!1;if(!await this.requestPermission())return en.error("Notification permission denied"),!1;const e=await this.getToken();if(!e)return en.error("Could not get notification token"),!1;return await this.saveTokenToFirestore(e)?(this.setupForegroundListener(),this.initialized=!0,en.success("Push notifications enabled!"),!0):(en.error("Could not save notification settings"),!1)}catch(e){return console.error("Error enabling notifications:",e),en.error("Failed to enable notifications"),!1}}async disableNotifications(){try{const e=Sy.currentUser;return!!e&&(await vp(cm(Ty,"users",e.uid),{notificationsEnabled:!1,fcmToken:null}),this.token=null,this.initialized=!1,en.success("Push notifications disabled"),!0)}catch(e){return console.error("Error disabling notifications:",e),en.error("Failed to disable notifications"),!1}}setupForegroundListener(){ky(Ly,e=>{console.log("Foreground message received:",e);const{title:t,body:n,icon:r}=e.notification||{};en.custom(e=>(0,Yy.jsxs)("div",{className:"".concat(e.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,Yy.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,Yy.jsxs)("div",{className:"flex items-start",children:[r&&(0,Yy.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,Yy.jsx)("img",{className:"h-10 w-10 rounded-full",src:r,alt:""})}),(0,Yy.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Yy.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t}),(0,Yy.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]})}),(0,Yy.jsx)("div",{className:"flex border-l border-gray-200",children:(0,Yy.jsx)("button",{onClick:()=>en.dismiss(e.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-primary hover:text-primary/80 focus:outline-none",children:"Close"})})]}),{duration:6e3,position:"top-right"}),"Notification"in window&&"granted"===Notification.permission&&new Notification(t,{body:n,icon:r||"/logo192.png",badge:"/logo192.png",tag:"besties-notification",requireInteraction:!1})})}async sendTestNotification(){return"Notification"in window&&"granted"===Notification.permission&&(new Notification("Besties Test Notification",{body:"Push notifications are working!",icon:"/logo192.png",badge:"/logo192.png"}),!0)}},fv=hv,mv=()=>{var e,n,r,s,i,A,a,o,l,c,u,d,h,f,m,p,g,x,y,w,v,b,B,C,N;const{currentUser:E,userData:U}=$y(),{isDark:j,toggle:F}=rw(),Q=te(),[k,I]=(0,t.useState)(!1),[S,T]=(0,t.useState)(!1),[_,D]=(0,t.useState)(!0),[L,H]=(0,t.useState)(!1),[R,P]=(0,t.useState)(0),[M,O]=(0,t.useState)(!1),[K,V]=(0,t.useState)(null),[G,W]=(0,t.useState)(""),[z,q]=(0,t.useState)(""),[Y,X]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=fv.isSupported();D(e),e&&T((null===U||void 0===U?void 0:U.notificationsEnabled)||!1)},[U]),(0,t.useEffect)(()=>{(async()=>{if(E)try{const e=await gp(cm(Ty,"users",E.uid));if(e.exists()){const t=e.data();P(t.smsWeeklyCount||0)}}catch(e){console.error("Error loading SMS count:",e)}})()},[E]);const J=async e=>{if(E){if("sms"===e){var t;const e=(null===U||void 0===U||null===(t=U.notificationPreferences)||void 0===t?void 0:t.sms)||!1;if(!e&&(null===U||void 0===U||!U.hasSeenSMSPopup))return void H(!0);if(!e&&R>=5)return void en.error("You've reached the weekly limit of 5 SMS alerts. Limit resets every Monday.",{duration:6e3})}try{var n;const t=!(null!==U&&void 0!==U&&null!==(n=U.notificationPreferences)&&void 0!==n&&n[e]);if("whatsapp"===e&&t)return void en.error("WhatsApp integration coming soon! \ud83d\ude80",{duration:4e3});if("facebook"===e&&t)return void en.error("Facebook integration coming soon! \ud83d\ude80",{duration:4e3});await vp(cm(Ty,"users",E.uid),{["notificationPreferences.".concat(e)]:t}),en.success("".concat(e," notifications ").concat(t?"enabled":"disabled"))}catch(r){console.error("Error updating notification:",r),en.error("Failed to update notification setting")}}},Z=async e=>{if(E){I(!0);try{const t="safety"===e?"safetyPasscode":"duressCode";await vp(cm(Ty,"users",E.uid),{["security.".concat(t)]:null}),en.success("".concat("safety"===e?"Safety passcode":"Duress code"," removed"))}catch(t){console.error("Error removing passcode:",t),en.error("Failed to remove passcode")}finally{I(!1)}}},$=async e=>{I(!0);try{const t=await Sw.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:en.error("Failed to start donation")}catch(t){console.error("Donation error:",t),en.error("Failed to start donation")}finally{I(!1)}};return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Settings"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Manage your account and preferences"})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Notifications"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between opacity-50",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-2",children:["WhatsApp",(0,Yy.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Coming Soon"})]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"WhatsApp integration in development"})]}),(0,Yy.jsx)("button",{onClick:()=>J("whatsapp"),className:"w-12 h-6 rounded-full transition-colors bg-gray-300 cursor-not-allowed",disabled:!0,children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform translate-x-1"})})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between opacity-50",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-2",children:["Facebook Messenger",(0,Yy.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Coming Soon"})]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Facebook integration in development"})]}),(0,Yy.jsx)("button",{onClick:()=>J("facebook"),className:"w-12 h-6 rounded-full transition-colors bg-gray-300 cursor-not-allowed",disabled:!0,children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform translate-x-1"})})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"Email"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Get alerts via email"})]}),(0,Yy.jsx)("button",{onClick:()=>J("email"),className:"w-12 h-6 rounded-full transition-colors ".concat(null!==U&&void 0!==U&&null!==(e=U.notificationPreferences)&&void 0!==e&&e.email?"bg-primary":"bg-gray-300"),children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==U&&void 0!==U&&null!==(n=U.notificationPreferences)&&void 0!==n&&n.email?"translate-x-6":"translate-x-1")})})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Yy.jsx)("span",{className:"font-semibold text-text-primary",children:"Push Notifications (Beta)"}),(0,Yy.jsx)("button",{onClick:()=>en(e=>(0,Yy.jsxs)("div",{className:"text-sm",children:[(0,Yy.jsx)("p",{className:"font-semibold mb-2",children:"About Push Notifications"}),(0,Yy.jsx)("p",{className:"mb-2",children:"Push notifications in web browsers have limited reliability because:"}),(0,Yy.jsxs)("ul",{className:"list-disc ml-4 mb-2 text-xs",children:[(0,Yy.jsx)("li",{children:"They require a VAPID key configuration"}),(0,Yy.jsx)("li",{children:"They only work when the browser is open"}),(0,Yy.jsx)("li",{children:"Some browsers block them by default"})]}),(0,Yy.jsx)("p",{className:"text-xs font-semibold text-primary",children:"We're building a native mobile app that will support reliable push notifications! \ud83d\udcf1"}),(0,Yy.jsx)("button",{onClick:()=>en.dismiss(e.id),className:"mt-2 text-primary text-xs underline",children:"Close"})]}),{duration:8e3}),className:"text-gray-400 hover:text-gray-600",title:"Learn more about push notifications",children:(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yy.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:_?"Browser notifications - limited reliability":"Not supported in this browser"})]}),(0,Yy.jsx)("button",{onClick:async()=>{if(_){I(!0);try{if(S){await fv.disableNotifications()&&T(!1)}else{await fv.enableNotifications()&&T(!0)}}catch(e){console.error("Push notification error:",e),en.error("Failed to update push notifications")}finally{I(!1)}}else en.error("Push notifications are not supported in your browser")},disabled:!_||k,className:"w-12 h-6 rounded-full transition-colors ".concat(_?S?"bg-primary":"bg-gray-300":"bg-gray-200 cursor-not-allowed"),children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(S?"translate-x-6":"translate-x-1")})})]}),_&&!S&&(0,Yy.jsx)("div",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-lg",children:"\ud83d\udca1 Tip: Email, WhatsApp, and Facebook are more reliable for critical safety alerts"}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Yy.jsx)("span",{className:"font-semibold text-text-primary",children:"SMS Alerts"}),(0,Yy.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-semibold",children:"Free - Limited Time"}),(0,Yy.jsx)("button",{onClick:()=>en(e=>(0,Yy.jsxs)("div",{className:"text-sm max-w-sm",children:[(0,Yy.jsx)("p",{className:"font-semibold mb-2",children:"About SMS Alerts"}),(0,Yy.jsx)("p",{className:"mb-2",children:"SMS messages are expensive to send. Currently offering them for free during beta!"}),(0,Yy.jsxs)("p",{className:"mb-2 text-xs",children:["\u2022 ",(0,Yy.jsx)("span",{className:"font-semibold",children:"Free tier:"})," Up to 5 SMS alerts per week",(0,Yy.jsx)("br",{}),"\u2022 Once WhatsApp and Facebook integrations launch, SMS will become a premium feature",(0,Yy.jsx)("br",{}),"\u2022 Premium SMS subscription: Up to 20 SMS alerts per month for $1/month"]}),(0,Yy.jsx)("p",{className:"text-xs font-semibold text-primary",children:"Use WhatsApp or Email for free unlimited alerts! \ud83d\udcf1"}),(0,Yy.jsx)("button",{onClick:()=>en.dismiss(e.id),className:"mt-2 text-primary text-xs underline",children:"Close"})]}),{duration:1e4}),className:"text-gray-400 hover:text-gray-600",title:"Learn more about SMS alerts",children:(0,Yy.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yy.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:null!==U&&void 0!==U&&null!==(r=U.notificationPreferences)&&void 0!==r&&r.sms?"Active - ".concat(R,"/5 alerts used this week"):"Not enabled"})]}),(0,Yy.jsx)("button",{onClick:()=>J("sms"),className:"w-12 h-6 rounded-full transition-colors ".concat(null!==U&&void 0!==U&&null!==(s=U.notificationPreferences)&&void 0!==s&&s.sms?"bg-primary":"bg-gray-300"),children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==U&&void 0!==U&&null!==(i=U.notificationPreferences)&&void 0!==i&&i.sms?"translate-x-6":"translate-x-1")})})]}),(null===U||void 0===U||null===(A=U.notificationPreferences)||void 0===A?void 0:A.sms)&&R>=4&&(0,Yy.jsx)("div",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-lg",children:"\u26a0\ufe0f You're approaching the weekly limit of 5 SMS alerts. Consider using email or WhatsApp for unlimited free alerts."})]}),(0,Yy.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,Yy.jsx)("button",{onClick:async()=>{I(!0);try{const e=await Sw.sendTestAlert();if(e.data&&e.data.success){const t=e.data.channels,n=[];t.email&&n.push("Email"),t.push&&n.push("Push"),n.length>0?en.success("Test alert sent to: ".concat(n.join(", "),". WhatsApp/SMS/Facebook not tested to save costs, but use same system."),{duration:6e3}):en.error("No notification channels enabled. Enable email to test alerts.",{duration:5e3})}else en.error("Failed to send test alert")}catch(e){console.error("Test alert error:",e),en.error("Failed to send test alert")}finally{I(!1)}},disabled:k,className:"w-full btn btn-primary",children:k?"Sending Test Alert...":"\ud83e\uddea Send Test Alert"}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary mt-2 text-center",children:"Test your notification setup - sends to all enabled channels"})]})]}),null!==U&&void 0!==U&&null!==(a=U.smsSubscription)&&void 0!==a&&a.active?(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-green-50 border-2 border-green-300",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"\u2705 Premium SMS Active"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"You're subscribed to premium SMS alerts - up to 20 SMS per month"}),(0,Yy.jsx)("button",{onClick:async()=>{I(!0);try{const e=await Sw.createPortalSession();e.data&&e.data.url?window.location.href=e.data.url:en.error("Failed to open subscription portal")}catch(e){console.error("Portal session error:",e),en.error("Failed to open subscription portal")}finally{I(!1)}},disabled:k,className:"btn btn-secondary",children:k?"Loading...":"Manage Subscription"})]}):(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-secondary",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Premium SMS Alerts"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Get up to 20 SMS alerts per month for just $1/month"}),(0,Yy.jsxs)("ul",{className:"text-sm text-text-secondary mb-4 space-y-1",children:[(0,Yy.jsx)("li",{children:"\u2713 20 SMS alerts per month"}),(0,Yy.jsx)("li",{children:"\u2713 Priority delivery"}),(0,Yy.jsx)("li",{children:"\u2713 No weekly limits"})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:async()=>{I(!0);try{const e=await Sw.createCheckoutSession({amount:1,type:"subscription"});e.data&&e.data.url?window.location.href=e.data.url:en.error("Failed to start subscription")}catch(e){console.error("Subscription error:",e),en.error("Failed to start subscription")}finally{I(!1)}},disabled:k,className:"btn btn-primary flex-1",children:"Subscribe for $1/month"}),(0,Yy.jsx)("button",{onClick:()=>Q("/about"),className:"btn btn-secondary",children:"Learn More"})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Privacy"}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mb-4",children:"Control what your besties can see on your profile"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"Show Stats to Besties"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:!1!==(null===U||void 0===U||null===(o=U.privacySettings)||void 0===o?void 0:o.showStatsToBesties)?"Besties can see your stats":"Stats are private"})]}),(0,Yy.jsx)("button",{onClick:async()=>{try{var e;const t=!(!1!==(null===U||void 0===U||null===(e=U.privacySettings)||void 0===e?void 0:e.showStatsToBesties));await vp(cm(Ty,"users",E.uid),{"privacySettings.showStatsToBesties":t}),en.success(t?"Stats now visible to besties":"Stats are now private")}catch(t){console.error("Error updating privacy:",t),en.error("Failed to update privacy setting")}},className:"w-12 h-6 rounded-full transition-colors ".concat(!1!==(null===U||void 0===U||null===(l=U.privacySettings)||void 0===l?void 0:l.showStatsToBesties)?"bg-primary":"bg-gray-300"),children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(!1!==(null===U||void 0===U||null===(c=U.privacySettings)||void 0===c?void 0:c.showStatsToBesties)?"translate-x-6":"translate-x-1")})})]}),(0,Yy.jsxs)("div",{className:"space-y-3",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary mb-2",children:"Check-in Visibility"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-3",children:"Control who can see your check-ins (last 7 days)"})]}),(0,Yy.jsxs)("div",{className:"space-y-2",children:[(0,Yy.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50",style:{borderColor:"all_besties"===((null===U||void 0===U||null===(u=U.privacySettings)||void 0===u?void 0:u.checkInVisibility)||"all_besties")?"#FF6B9D":"#e5e7eb"},children:[(0,Yy.jsx)("input",{type:"radio",name:"checkInVisibility",value:"all_besties",checked:"all_besties"===((null===U||void 0===U||null===(d=U.privacySettings)||void 0===d?void 0:d.checkInVisibility)||"all_besties"),onChange:async e=>{try{await vp(cm(Ty,"users",E.uid),{"privacySettings.checkInVisibility":"all_besties"}),en.success("All besties can now see your check-ins")}catch(t){console.error("Error updating privacy:",t),en.error("Failed to update privacy setting")}},className:"mt-1"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"All Besties"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"All your besties can see your check-ins. Only selected besties get notifications."})]})]}),(0,Yy.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50",style:{borderColor:"circle"===((null===U||void 0===U||null===(h=U.privacySettings)||void 0===h?void 0:h.checkInVisibility)||"all_besties")?"#FF6B9D":"#e5e7eb"},children:[(0,Yy.jsx)("input",{type:"radio",name:"checkInVisibility",value:"circle",checked:"circle"===((null===U||void 0===U||null===(f=U.privacySettings)||void 0===f?void 0:f.checkInVisibility)||"all_besties"),onChange:async e=>{try{await vp(cm(Ty,"users",E.uid),{"privacySettings.checkInVisibility":"circle"}),en.success("Only circle besties can see your check-ins")}catch(t){console.error("Error updating privacy:",t),en.error("Failed to update privacy setting")}},className:"mt-1"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"Bestie Circle Only"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Only your top 5 circle besties can see your check-ins. Only selected besties get notifications."})]})]}),(0,Yy.jsxs)("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer transition-colors hover:bg-gray-50",style:{borderColor:"alerts_only"===((null===U||void 0===U||null===(m=U.privacySettings)||void 0===m?void 0:m.checkInVisibility)||"all_besties")?"#FF6B9D":"#e5e7eb"},children:[(0,Yy.jsx)("input",{type:"radio",name:"checkInVisibility",value:"alerts_only",checked:"alerts_only"===((null===U||void 0===U||null===(p=U.privacySettings)||void 0===p?void 0:p.checkInVisibility)||"all_besties"),onChange:async e=>{try{await vp(cm(Ty,"users",E.uid),{"privacySettings.checkInVisibility":"alerts_only"}),en.success("Check-ins only visible when alerts trigger")}catch(t){console.error("Error updating privacy:",t),en.error("Failed to update privacy setting")}},className:"mt-1"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"Alerts Only (Most Private)"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-ins are hidden until an alert goes off. Only selected besties get notifications."})]})]})]})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary",children:"Security Passcodes"}),(0,Yy.jsx)("button",{onClick:()=>X(!Y),className:"text-primary text-sm font-semibold hover:underline",children:Y?"Hide Info":"Learn More"})]}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mb-4",children:"Protect your check-ins with passcodes"}),Y&&(0,Yy.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,Yy.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"How Passcodes Work:"}),(0,Yy.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2 list-disc ml-4",children:[(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Safety Passcode:"})," Required to end check-ins or cancel SOS alerts. This ensures only you can mark yourself safe."]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Duress Code:"})," A special code that ",(0,Yy.jsx)("em",{children:"appears"})," to cancel the alert, but secretly triggers an emergency alert to all besties in your circle. Use this if you're in danger and being forced to cancel."]}),(0,Yy.jsx)("li",{children:"Both codes must be different and at least 4 digits."}),(0,Yy.jsx)("li",{children:"Your codes are encrypted and stored securely."})]})]}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"\ud83d\udd12 Safety Passcode"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:null!==U&&void 0!==U&&null!==(g=U.security)&&void 0!==g&&g.safetyPasscode?"Passcode is set":"Not set"})]}),null!==U&&void 0!==U&&null!==(x=U.security)&&void 0!==x&&x.safetyPasscode?(0,Yy.jsxs)("div",{className:"flex gap-2",children:[(0,Yy.jsx)("button",{onClick:()=>{V("safety"),O(!0)},className:"btn btn-secondary btn-sm",children:"Change"}),(0,Yy.jsx)("button",{onClick:()=>Z("safety"),disabled:k,className:"btn bg-red-500 text-white hover:bg-red-600 btn-sm",children:"Remove"})]}):(0,Yy.jsx)("button",{onClick:()=>{V("safety"),O(!0)},className:"btn btn-primary btn-sm",children:"Set Passcode"})]}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary",children:"Required to end check-ins and cancel alerts"})]}),(0,Yy.jsxs)("div",{className:"border-2 border-orange-200 bg-orange-50 rounded-lg p-4",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("div",{className:"font-semibold text-orange-900 flex items-center gap-2",children:["\u26a0\ufe0f Duress Code",(0,Yy.jsx)("span",{className:"text-xs bg-orange-200 text-orange-800 px-2 py-0.5 rounded-full",children:"Advanced"})]}),(0,Yy.jsx)("div",{className:"text-sm text-orange-700",children:null!==U&&void 0!==U&&null!==(y=U.security)&&void 0!==y&&y.duressCode?"Duress code is set":"Not set"})]}),null!==U&&void 0!==U&&null!==(w=U.security)&&void 0!==w&&w.duressCode?(0,Yy.jsxs)("div",{className:"flex gap-2",children:[(0,Yy.jsx)("button",{onClick:()=>{V("duress"),O(!0)},className:"btn btn-secondary btn-sm",children:"Change"}),(0,Yy.jsx)("button",{onClick:()=>Z("duress"),disabled:k,className:"btn bg-red-500 text-white hover:bg-red-600 btn-sm",children:"Remove"})]}):(0,Yy.jsx)("button",{onClick:()=>{V("duress"),O(!0)},className:"btn bg-orange-600 text-white hover:bg-orange-700 btn-sm",children:"Set Duress Code"})]}),(0,Yy.jsx)("p",{className:"text-xs text-orange-800",children:"Fake cancellation that secretly alerts your besties"})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Preferences"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"Dark Mode"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:j?"Dark theme enabled":"Light theme enabled"})]}),(0,Yy.jsx)("button",{onClick:F,className:"w-12 h-6 rounded-full transition-colors ".concat(j?"bg-primary":"bg-gray-300"),children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(j?"translate-x-6":"translate-x-1")})})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"Keep My Data"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:null!==U&&void 0!==U&&null!==(v=U.settings)&&void 0!==v&&v.holdData?"Data kept indefinitely":"Data deleted after 24 hours"})]}),(0,Yy.jsx)("button",{onClick:async()=>{if(E)try{var e;const t=!(null!==U&&void 0!==U&&null!==(e=U.settings)&&void 0!==e&&e.holdData);await vp(cm(Ty,"users",E.uid),{"settings.holdData":t}),en.success(t?"Data will be kept indefinitely":"Data will be deleted after 24h")}catch(t){console.error("Error updating data retention:",t),en.error("Failed to update setting")}},className:"w-12 h-6 rounded-full transition-colors ".concat(null!==U&&void 0!==U&&null!==(b=U.settings)&&void 0!==b&&b.holdData?"bg-primary":"bg-gray-300"),children:(0,Yy.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(null!==U&&void 0!==U&&null!==(B=U.settings)&&void 0!==B&&B.holdData?"translate-x-6":"translate-x-1")})})]})]})]}),!(null!==U&&void 0!==U&&null!==(C=U.donationStats)&&void 0!==C&&C.isActive)&&(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-2",children:"Support Besties \ud83d\udc9c"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Help us keep Besties free and accessible for everyone"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,Yy.jsx)("button",{onClick:()=>$(1),disabled:k,className:"btn btn-secondary",children:"$1/mo"}),(0,Yy.jsx)("button",{onClick:()=>$(5),disabled:k,className:"btn btn-primary",children:"$5/mo"}),(0,Yy.jsx)("button",{onClick:()=>$(10),disabled:k,className:"btn btn-secondary",children:"$10/mo"})]}),(0,Yy.jsx)("button",{onClick:()=>Q("/about"),className:"w-full btn bg-white border-2 border-primary text-primary hover:bg-primary/5",children:"Learn More About Besties \u2192"})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Quick Access"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>Q("/templates"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udccb Templates"})}),(0,Yy.jsx)("button",{onClick:()=>Q("/favorites"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udccd Favorites"})}),(0,Yy.jsx)("button",{onClick:()=>Q("/history"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udcca History"})}),(0,Yy.jsx)("button",{onClick:()=>Q("/export-data"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udce5 Export Data"})}),(null===U||void 0===U?void 0:U.isAdmin)&&(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("button",{onClick:()=>Q("/dev-analytics"),className:"btn btn-secondary text-left px-4 py-3",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udcc8 Analytics"})}),(0,Yy.jsx)("button",{onClick:()=>Q("/monitoring"),className:"btn bg-gradient-primary text-white text-left px-4 py-3",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udd0d Monitoring"})}),(0,Yy.jsx)("button",{onClick:()=>Q("/error-dashboard"),className:"btn bg-red-500 text-white text-left px-4 py-3 hover:bg-red-600",children:(0,Yy.jsx)("div",{className:"text-sm",children:"\ud83d\udea8 Errors"})})]})]})]}),(null===U||void 0===U||null===(N=U.donationStats)||void 0===N?void 0:N.isActive)&&(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-gradient-primary text-white",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display mb-2",children:"Thank You! \ud83d\udc9c"}),(0,Yy.jsx)("p",{className:"mb-2",children:"You're helping keep Besties free"}),(0,Yy.jsxs)("div",{className:"text-2xl font-display",children:["$",U.donationStats.monthlyAmount,"/month"]}),(0,Yy.jsxs)("div",{className:"text-sm mt-2 opacity-80",children:["Total donated: $",U.donationStats.totalDonated]})]}),(0,Yy.jsx)("button",{onClick:async()=>{(await Wy()).success?(en.success("Signed out successfully"),Q("/login")):en.error("Sign out failed")},className:"w-full btn bg-red-500 text-white hover:bg-red-600 mb-6",children:"Sign Out"})]}),M&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"safety"===K?"\ud83d\udd12 Set Safety Passcode":"\u26a0\ufe0f Set Duress Code"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"safety"===K?"This passcode will be required to end check-ins and cancel alerts.":"This code appears to cancel alerts but secretly triggers an emergency alert to your besties."}),"duress"===K&&(0,Yy.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:(0,Yy.jsxs)("p",{className:"text-sm text-orange-800",children:["\u26a0\ufe0f ",(0,Yy.jsx)("strong",{children:"Warning:"})," Use your duress code only in genuine emergencies when you're being forced to cancel an alert under duress."]})}),(0,Yy.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"safety"===K?"Passcode":"Duress Code"}),(0,Yy.jsx)("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",value:G,onChange:e=>W(e.target.value.replace(/\D/g,"")),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-primary focus:outline-none text-center text-2xl tracking-widest",placeholder:"\u2022\u2022\u2022\u2022",maxLength:6,autoFocus:!0}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:"At least 4 digits"})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:["Confirm ","safety"===K?"Passcode":"Code"]}),(0,Yy.jsx)("input",{type:"password",inputMode:"numeric",pattern:"[0-9]*",value:z,onChange:e=>q(e.target.value.replace(/\D/g,"")),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-primary focus:outline-none text-center text-2xl tracking-widest",placeholder:"\u2022\u2022\u2022\u2022",maxLength:6})]})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>{O(!1),W(""),q(""),V(null)},className:"flex-1 btn btn-secondary",disabled:k,children:"Cancel"}),(0,Yy.jsx)("button",{onClick:async()=>{if(G)if(G.length<4)en.error("Passcode must be at least 4 digits");else if(G===z){var e;if("duress"===K){if(G===(null===U||void 0===U||null===(e=U.security)||void 0===e?void 0:e.safetyPasscode))return void en.error("Duress code must be different from safety passcode")}else if("safety"===K){var t;if(G===(null===U||void 0===U||null===(t=U.security)||void 0===t?void 0:t.duressCode))return void en.error("Safety passcode must be different from duress code")}I(!0);try{const e="safety"===K?"safetyPasscode":"duressCode";await vp(cm(Ty,"users",E.uid),{["security.".concat(e)]:G}),en.success("".concat("safety"===K?"Safety passcode":"Duress code"," updated!")),O(!1),W(""),q(""),V(null)}catch(n){console.error("Error saving passcode:",n),en.error("Failed to save passcode")}finally{I(!1)}}else en.error("Passcodes do not match");else en.error("Please enter a passcode")},disabled:k||!G||!z,className:"flex-1 btn ".concat("duress"===K?"bg-orange-600 hover:bg-orange-700":"btn-primary"," text-white"),children:k?"Saving...":"Save"})]})]})}),L&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,Yy.jsxs)("div",{className:"text-center mb-4",children:[(0,Yy.jsx)("div",{className:"text-5xl mb-3",children:"\ud83d\udcf1"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"About SMS Alerts"})]}),(0,Yy.jsxs)("div",{className:"space-y-3 text-sm text-gray-700 mb-6",children:[(0,Yy.jsx)("p",{className:"font-semibold text-primary",children:"SMS alerts are currently FREE during beta testing!"}),(0,Yy.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Yy.jsx)("p",{className:"font-semibold mb-1",children:"Free Tier Limits:"}),(0,Yy.jsxs)("ul",{className:"list-disc ml-4 space-y-1",children:[(0,Yy.jsx)("li",{children:"Up to 5 SMS alerts per week"}),(0,Yy.jsx)("li",{children:"Resets every Monday"}),(0,Yy.jsxs)("li",{children:["You've used ",R,"/5 this week"]})]})]}),(0,Yy.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg",children:[(0,Yy.jsx)("p",{className:"font-semibold mb-1",children:"Important to Know:"}),(0,Yy.jsxs)("ul",{className:"list-disc ml-4 space-y-1",children:[(0,Yy.jsx)("li",{children:"SMS messages are expensive to send"}),(0,Yy.jsx)("li",{children:"Once WhatsApp and Facebook integrations launch, SMS will become a premium feature ($1/month for up to 20 alerts)"}),(0,Yy.jsx)("li",{children:"We recommend using email or WhatsApp for unlimited free alerts"})]})]}),(0,Yy.jsx)("p",{className:"text-xs text-gray-600 italic",children:"By enabling SMS, you understand these limitations and agree to use SMS responsibly."})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>H(!1),className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Yy.jsx)("button",{onClick:async()=>{if(E)try{await vp(cm(Ty,"users",E.uid),{"notificationPreferences.sms":!0,hasSeenSMSPopup:!0}),H(!1),en.success("SMS notifications enabled!")}catch(e){console.error("Error enabling SMS:",e),en.error("Failed to enable SMS")}},className:"flex-1 btn btn-primary",children:"I Understand - Enable SMS"})]})]})})]})},pv=()=>{const{currentUser:e,userData:n}=$y(),[r,s]=(0,t.useState)([]),[i,A]=(0,t.useState)(!0),a=[{id:"safety_starter",name:"Safety Starter",description:"Complete 5 check-ins",icon:"\ud83d\udee1\ufe0f",color:"#4CAF50",requirement:5,stat:"completedCheckIns"},{id:"safety_pro",name:"Safety Pro",description:"Complete 25 check-ins",icon:"\u2b50",color:"#2196F3",requirement:25,stat:"completedCheckIns"},{id:"safety_master",name:"Safety Master",description:"Complete 50 check-ins",icon:"\ud83d\udc51",color:"#9C27B0",requirement:50,stat:"completedCheckIns"},{id:"friend_squad",name:"Friend Squad",description:"Add 3 besties",icon:"\ud83d\udc65",color:"#FF9800",requirement:3,stat:"totalBesties"},{id:"safety_circle",name:"Safety Circle",description:"Add 5 besties",icon:"\ud83e\udd1d",color:"#E91E63",requirement:5,stat:"totalBesties"},{id:"safety_network",name:"Safety Network",description:"Add 10 besties",icon:"\ud83c\udf10",color:"#00BCD4",requirement:10,stat:"totalBesties"},{id:"night_owl",name:"Night Owl",description:"Check-in after midnight",icon:"\ud83e\udd89",color:"#673AB7",requirement:1,stat:"nightOwl"},{id:"early_bird",name:"Early Bird",description:"Check-in before 6 AM",icon:"\ud83d\udc26",color:"#FFC107",requirement:1,stat:"earlyBird"},{id:"streak_master",name:"Streak Master",description:"7 days in a row",icon:"\ud83d\udd25",color:"#FF5722",requirement:7,stat:"streak"},{id:"active_donor",name:"Active Donor",description:"SMS subscription",icon:"\ud83d\udc9c",color:"#E91E63",requirement:1,stat:"donation"},{id:"location_lover",name:"Location Lover",description:"5 favorite locations",icon:"\ud83d\udccd",color:"#8BC34A",requirement:5,stat:"locations"},{id:"template_master",name:"Template Master",description:"3 templates created",icon:"\ud83d\udccb",color:"#FF9800",requirement:3,stat:"templates"}];(0,t.useEffect)(()=>{o()},[e]);const o=async()=>{if(e)try{const t=await gp(cm(Ty,"badges",e.uid));t.exists()&&s(t.data().badges||[])}catch(t){console.error("Error loading badges:",t)}finally{A(!1)}};if(i)return(0,Yy.jsx)("div",{className:"badges-page",children:(0,Yy.jsx)("div",{className:"loading",children:"Loading your badges..."})});const l=a.filter(e=>r.includes(e.id)),c=a.filter(e=>!r.includes(e.id));return(0,Yy.jsxs)("div",{className:"badges-page",children:[(0,Yy.jsxs)("div",{className:"badges-header",children:[(0,Yy.jsx)("h1",{children:"\ud83c\udfc6 Your Badges"}),(0,Yy.jsxs)("div",{className:"badge-stats",children:[(0,Yy.jsx)("span",{className:"earned-count",children:l.length}),(0,Yy.jsxs)("span",{className:"total-count",children:["/ ",a.length]})]})]}),l.length>0&&(0,Yy.jsxs)("div",{className:"badge-section",children:[(0,Yy.jsxs)("h2",{children:["\u2728 Earned (",l.length,")"]}),(0,Yy.jsx)("div",{className:"badges-grid",children:l.map(e=>(0,Yy.jsxs)("div",{className:"badge-card earned",style:{borderColor:e.color,background:"linear-gradient(135deg, ".concat(e.color,"15, ").concat(e.color,"05)")},children:[(0,Yy.jsx)("div",{className:"badge-icon",style:{color:e.color},children:e.icon}),(0,Yy.jsxs)("div",{className:"badge-info",children:[(0,Yy.jsx)("h3",{style:{color:e.color},children:e.name}),(0,Yy.jsx)("p",{children:e.description}),(0,Yy.jsx)("span",{className:"earned-label",style:{background:e.color},children:"\u2713 Earned"})]})]},e.id))})]}),c.length>0&&(0,Yy.jsxs)("div",{className:"badge-section",children:[(0,Yy.jsxs)("h2",{children:["\ud83d\udd12 Locked (",c.length,")"]}),(0,Yy.jsx)("div",{className:"badges-grid",children:c.map(e=>{const t=(e=>{var t,r,s;if(!n||!n.stats)return 0;let i=0;switch(e.stat){case"completedCheckIns":i=n.stats.completedCheckIns||0;break;case"totalBesties":i=n.stats.totalBesties||0;break;case"streak":i=n.stats.currentStreak||0;break;case"donation":i=null!==(t=n.donationStats)&&void 0!==t&&t.isActive?1:0;break;case"locations":i=(null===(r=n.favoriteLocations)||void 0===r?void 0:r.length)||0;break;case"templates":i=n.templateCount||0;break;case"nightOwl":case"earlyBird":i=null!==(s=n.stats)&&void 0!==s&&s[e.stat]?1:0;break;default:i=0}return Math.min(100,i/e.requirement*100)})(e),r=(e=>{var t,r,s;if(!n||!n.stats)return"0 / "+e.requirement;let i=0;switch(e.stat){case"completedCheckIns":i=n.stats.completedCheckIns||0;break;case"totalBesties":i=n.stats.totalBesties||0;break;case"streak":i=n.stats.currentStreak||0;break;case"donation":return null!==(t=n.donationStats)&&void 0!==t&&t.isActive?"Active":"Subscribe";case"locations":i=(null===(r=n.favoriteLocations)||void 0===r?void 0:r.length)||0;break;case"templates":i=n.templateCount||0;break;case"nightOwl":case"earlyBird":return null!==(s=n.stats)&&void 0!==s&&s[e.stat]?"Unlocked!":"Not yet";default:i=0}return"".concat(i," / ").concat(e.requirement)})(e);return(0,Yy.jsxs)("div",{className:"badge-card locked",children:[(0,Yy.jsx)("div",{className:"badge-icon",children:e.icon}),(0,Yy.jsxs)("div",{className:"badge-info",children:[(0,Yy.jsx)("h3",{children:e.name}),(0,Yy.jsx)("p",{children:e.description}),(0,Yy.jsxs)("div",{className:"badge-progress-container",children:[(0,Yy.jsx)("div",{className:"badge-progress-bar",children:(0,Yy.jsx)("div",{className:"badge-progress-fill",style:{width:"".concat(t,"%"),backgroundColor:e.color}})}),(0,Yy.jsx)("span",{className:"badge-progress-text",children:r})]})]})]},e.id)})})]})]})},gv=e=>{if(!e)return!1;return/^\+[1-9]\d{1,14}$/.test(e)},xv=(e,t,n)=>{var r;const s=!(null===t||void 0===t||!t.email),i=!(null===e||void 0===e||!e.phoneNumber),A=!(null===e||void 0===e||!e.photoURL),a=!(null===e||void 0===e||null===(r=e.profile)||void 0===r||!r.bio);return s&&i&&A&&a&&n>=5},yv=async e=>{try{const t="profile_perfectionist",n=await gp(cm(Ty,"badges",e));if(n.exists()){const r=(n.data().badges||[]).some(e=>e.id===t);if(r)return!1;await vp(cm(Ty,"badges",e),{badges:jp({id:t,name:"Profile Perfectionist",description:"Completed your full profile - ready to connect!",icon:"\u2b50",earnedAt:new Date,category:"profile"})})}else await wp(cm(Ty,"badges",e),{badges:[{id:t,name:"Profile Perfectionist",description:"Completed your full profile - ready to connect!",icon:"\u2b50",earnedAt:new Date,category:"profile"}]});return await Jy.notifyBadgeEarned(e,"Profile Perfectionist","You completed your entire profile! You're all set to stay safe with your besties."),!0}catch(t){return console.error("Error awarding profile completion badge:",t),!1}},wv=async(e,t,n,r)=>{if(xv(t,n,r)){return await yv(e)}return!1},vv=e=>{let{isOpen:n,onClose:r}=e;const[s,i]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{if(n){i(!0);const e=setTimeout(()=>{i(!1)},5e3);return()=>clearTimeout(e)}},[n]),n?(0,Yy.jsxs)(Yy.Fragment,{children:[s&&(0,Yy.jsx)(rv,{}),(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:(0,Yy.jsxs)("div",{className:"card max-w-lg w-full p-8 animate-scale-up relative overflow-hidden",children:[(0,Yy.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Yy.jsx)("div",{className:"absolute top-6 left-6 text-3xl animate-float opacity-60",children:"\u2b50"}),(0,Yy.jsx)("div",{className:"absolute top-10 right-8 text-2xl animate-float delay-1s opacity-50",children:"\ud83d\udcab"}),(0,Yy.jsx)("div",{className:"absolute bottom-10 left-10 text-2xl animate-float delay-2s opacity-60",children:"\u2728"}),(0,Yy.jsx)("div",{className:"absolute bottom-6 right-6 text-3xl animate-float delay-3s opacity-50",children:"\ud83c\udf89"})]}),(0,Yy.jsxs)("div",{className:"relative z-10 text-center",children:[(0,Yy.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-yellow-200 to-yellow-400 rounded-full mb-6 shadow-2xl animate-bounce-slow",children:(0,Yy.jsx)("span",{className:"text-5xl",children:"\u2b50"})}),(0,Yy.jsx)("h2",{className:"text-4xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"Congratulations!"}),(0,Yy.jsx)("h3",{className:"text-2xl font-display text-text-primary mb-4",children:"Profile Perfectionist Unlocked!"}),(0,Yy.jsx)("p",{className:"text-lg text-text-secondary mb-6 max-w-md mx-auto",children:"You've completed your entire profile! Your besties can now see all your info, and you're all set to stay safe together."}),(0,Yy.jsxs)("div",{className:"inline-block bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-6 mb-6 border-2 border-pink-200 shadow-xl",children:[(0,Yy.jsx)("div",{className:"text-5xl mb-2",children:"\u2b50"}),(0,Yy.jsx)("div",{className:"text-xl font-display text-text-primary mb-1",children:"Profile Perfectionist"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed your full profile"})]}),(0,Yy.jsxs)("div",{className:"bg-gradient-to-r from-pink-100 to-purple-100 rounded-xl p-4 mb-6",children:[(0,Yy.jsx)("div",{className:"text-sm font-semibold text-text-primary mb-2",children:"\ud83c\udfaf Profile Complete! Here's what you unlocked:"}),(0,Yy.jsxs)("div",{className:"space-y-1 text-xs text-text-secondary",children:[(0,Yy.jsx)("div",{children:"\u2705 Full profile visibility to your besties"}),(0,Yy.jsx)("div",{children:"\u2705 Profile Perfectionist badge"}),(0,Yy.jsx)("div",{children:"\u2705 Priority support access"}),(0,Yy.jsx)("div",{children:"\u2705 Shareable profile cards"})]})]}),(0,Yy.jsx)("button",{onClick:r,className:"btn btn-primary w-full max-w-xs mx-auto shadow-lg hover:shadow-xl transition-all",children:"Awesome! Let's Go! \ud83c\udf89"}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary mt-4",children:"Check your Notifications to see your new badge"})]})]})})]}):null},bv=()=>{var e,n,r;const{currentUser:s,userData:i}=$y(),A=te(),[a,o]=(0,t.useState)((null===i||void 0===i?void 0:i.displayName)||""),[l,c]=(0,t.useState)((null===i||void 0===i||null===(e=i.profile)||void 0===e?void 0:e.bio)||""),[u,d]=(0,t.useState)((null===i||void 0===i?void 0:i.phoneNumber)||""),[h,f]=(0,t.useState)(null),[m,p]=(0,t.useState)((null===i||void 0===i?void 0:i.photoURL)||null),[g,x]=(0,t.useState)(!1),[y,w]=(0,t.useState)(!1),[v,b]=(0,t.useState)(""),[B,C]=(0,t.useState)(null),[N,E]=(0,t.useState)(""),[U,j]=(0,t.useState)(!1),F=async()=>{if(!u||u===(null===i||void 0===i?void 0:i.phoneNumber))return void en.error("Please enter a new phone number");const e=u.trim();if(!e)return void en.error("Please enter a phone number");if(!/^[0-9+\s\-()]+$/.test(e))return void en.error("Phone number can only contain digits, +, spaces, hyphens, and parentheses");let t=e.replace(/[\s\-()]/g,"");if(t.startsWith("+")||(t=t.startsWith("0")?"+61"+t.slice(1):"+"+t),!gv(t))return void en.error("Invalid phone number format. Please enter a valid international number (e.g., +61412345678 or 0412345678)",{duration:5e3});const n=t.slice(1);if(n.length<8)return void en.error("Phone number is too short. Please enter a complete phone number");if(n.length>15)return void en.error("Phone number is too long. Please check and try again");x(!0);const r=Ky("phone-recaptcha-container");if(!r.success)return en.error("Failed to set up verification. Please refresh the page."),void x(!1);const s=await Vy(t,r.verifier);x(!1),s.success?(C(s.confirmationResult),E(t),w(!0),en.success("Verification code sent to your phone!")):en.error(s.error||"Failed to send verification code")},Q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=(null===i||void 0===i?void 0:i.photoURL)||null;if(h){const e=await(async()=>{if(!h)return(null===i||void 0===i?void 0:i.photoURL)||null;try{const e=Wg(_y,"profile-pictures/".concat(s.uid,"/").concat(Date.now(),"_").concat(h.name));return await Vg(e,h),await Gg(e)}catch(e){return console.error("Error uploading profile picture:",e),en.error("Failed to upload profile picture"),(null===i||void 0===i?void 0:i.photoURL)||null}})();e&&(t=e)}await vp(cm(Ty,"users",s.uid),{displayName:a,phoneNumber:e||u,photoURL:t,"profile.bio":l,updatedAt:new Date}),en.success("Profile updated successfully!");const n=Jm(lm(Ty,"besties"),$m("requesterId","==",s.uid),$m("status","==","accepted")),r=Jm(lm(Ty,"besties"),$m("recipientId","==",s.uid),$m("status","==","accepted")),[o,c]=await Promise.all([yp(n),yp(r)]),d=o.size+c.size,f=Re(Re({},i),{},{displayName:a,phoneNumber:e||u,photoURL:t,profile:Re(Re({},null===i||void 0===i?void 0:i.profile),{},{bio:l})});await wv(s.uid,f,s,d)?j(!0):setTimeout(()=>{A("/profile")},500)}catch(t){console.error("Error updating profile:",t),en.error(t.message||"Failed to update profile")}finally{x(!1)}};return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Edit Profile"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Update your personal information"})]}),(0,Yy.jsxs)("form",{onSubmit:async e=>{e.preventDefault();u&&u!==(null===i||void 0===i?void 0:i.phoneNumber)?F():(x(!0),await Q())},className:"space-y-6",children:[(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("label",{className:"block text-lg font-display text-text-primary mb-4",children:"Profile Picture"}),(0,Yy.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Yy.jsx)("div",{className:"w-24 h-24 bg-gradient-primary rounded-full flex items-center justify-center text-white text-3xl font-display overflow-hidden",children:m?(0,Yy.jsx)("img",{src:m,alt:"Profile",className:"w-full h-full object-cover"}):(null===a||void 0===a?void 0:a[0])||"U"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void en.error("File size must be less than 5MB");f(t),p(URL.createObjectURL(t))}},className:"hidden",id:"profile-picture"}),(0,Yy.jsx)("label",{htmlFor:"profile-picture",className:"btn btn-secondary cursor-pointer inline-block",children:"Choose Photo"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mt-2",children:"JPG, PNG or GIF. Max size 5MB"})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary mb-4",children:"Basic Information"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Display Name"}),(0,Yy.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"input",placeholder:"Your name",required:!0})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Bio"}),(0,Yy.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),className:"input min-h-[80px] resize-none",placeholder:"Tell people about yourself...",maxLength:150}),(0,Yy.jsxs)("div",{className:"text-xs text-text-secondary mt-1",children:[l.length,"/150 characters"]})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Phone Number"}),(0,Yy.jsx)("input",{type:"tel",value:u,onChange:e=>d(e.target.value),className:"input",placeholder:"+61 400 000 000 or 0400 000 000"}),u!==(null===i||void 0===i?void 0:i.phoneNumber)&&u&&(0,Yy.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"\u26a0\ufe0f You'll need to verify this number via SMS before saving"})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("h3",{className:"text-lg font-display text-text-primary mb-4",children:"Account Info"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Email"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:null===s||void 0===s?void 0:s.email}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:"To change your email, use Google authentication"})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Member Since"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:(null===i||void 0===i||null===(n=i.stats)||void 0===n||null===(r=n.joinedAt)||void 0===r?void 0:r.toDate().toLocaleDateString())||"Recently"})]})]})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{type:"button",onClick:()=>A("/profile"),className:"flex-1 btn btn-secondary",children:"Cancel"}),(0,Yy.jsx)("button",{type:"submit",disabled:g,className:"flex-1 btn btn-primary",children:g?"Saving...":"Save Changes"})]})]}),y&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Yy.jsxs)("div",{className:"card p-6 max-w-md w-full animate-scale-up",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"Verify Phone Number"}),(0,Yy.jsxs)("p",{className:"text-text-secondary mb-4",children:["We sent a 6-digit code to ",(0,Yy.jsx)("strong",{children:N})]}),(0,Yy.jsxs)("div",{className:"mb-4",children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Verification Code"}),(0,Yy.jsx)("input",{type:"text",value:v,onChange:e=>b(e.target.value),className:"input",placeholder:"123456",maxLength:6,autoFocus:!0})]}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>{w(!1),b(""),C(null)},className:"flex-1 btn btn-secondary",disabled:g,children:"Cancel"}),(0,Yy.jsx)("button",{onClick:async()=>{if(!v||!B)return void en.error("Please enter the verification code");x(!0);const e=await Gy(B,v);e.success?(en.success("Phone number verified!"),w(!1),d(N),Q(N)):(x(!1),en.error(e.error||"Invalid verification code"))},className:"flex-1 btn btn-primary",disabled:g||6!==v.length,children:g?"Verifying...":"Verify & Save"})]}),(0,Yy.jsxs)("p",{className:"text-xs text-text-secondary mt-4 text-center",children:["Didn't receive the code?"," ",(0,Yy.jsx)("button",{onClick:F,className:"text-primary underline",disabled:g,children:"Resend"})]})]})}),(0,Yy.jsx)("div",{id:"phone-recaptcha-container"}),(0,Yy.jsx)(vv,{isOpen:U,onClose:()=>{j(!1),A("/profile")}})]})]})},Bv=()=>{var e,n,r;const{currentUser:s,userData:i}=$y(),[A,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)("all"),[f,m]=(0,t.useState)(null),[p,g]=(0,t.useState)(!0);(0,t.useEffect)(()=>{x()},[s,d]);const x=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s){e?u(!0):(l(!0),a([]),m(null),g(!0));try{let t=Jm(lm(Ty,"checkins"),$m("userId","==",s.uid),np("createdAt","desc"),sp(20));"completed"===d?t=Jm(lm(Ty,"checkins"),$m("userId","==",s.uid),$m("status","==","completed"),np("createdAt","desc"),sp(20)):"alerted"===d&&(t=Jm(lm(Ty,"checkins"),$m("userId","==",s.uid),$m("status","==","alerted"),np("createdAt","desc"),sp(20))),e&&f&&(t=Jm(t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ip._create("startAfter",t,!1)}(f)));const n=await yp(t),r=[];n.forEach(e=>{r.push(Re({id:e.id},e.data()))}),a(e?e=>[...e,...r]:r),m(n.docs[n.docs.length-1]||null),g(20===r.length),l(!1),u(!1)}catch(t){console.error("Error loading history:",t),e||a([]),l(!1),u(!1)}}},y=e=>{switch(e){case"completed":return(0,Yy.jsx)("span",{className:"badge badge-success",children:"\u2705 Safe"});case"alerted":return(0,Yy.jsx)("span",{className:"badge badge-warning",children:"\ud83d\udea8 Alerted"});case"active":return(0,Yy.jsx)("span",{className:"badge badge-primary",children:"\u23f0 Active"});default:return(0,Yy.jsx)("span",{className:"badge",children:"Unknown"})}},w=e=>{if(e<60)return"".concat(e,"m");const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"m"):"".concat(t,"h")};return o?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Check-in History"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"View all your past check-ins"})]}),(0,Yy.jsxs)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[(0,Yy.jsx)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("all"===d?"bg-primary text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"All"}),(0,Yy.jsx)("button",{onClick:()=>h("completed"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("completed"===d?"bg-success text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"\u2705 Safe"}),(0,Yy.jsx)("button",{onClick:()=>h("alerted"),className:"px-4 py-2 rounded-full font-semibold whitespace-nowrap transition-all ".concat("alerted"===d?"bg-warning text-white":"bg-white text-text-primary hover:bg-gray-50"),children:"\ud83d\udea8 Alerted"})]}),(0,Yy.jsx)("div",{className:"card p-6 mb-6",children:(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-2xl font-display text-primary",children:(null===i||void 0===i||null===(e=i.stats)||void 0===e?void 0:e.totalCheckIns)||0}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]}),(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-2xl font-display text-success",children:(null===i||void 0===i||null===(n=i.stats)||void 0===n?void 0:n.completedCheckIns)||0}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed"})]}),(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-2xl font-display text-warning",children:(null===i||void 0===i||null===(r=i.stats)||void 0===r?void 0:r.alertedCheckIns)||0}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Alerted"})]})]})}),0===A.length?(0,Yy.jsxs)("div",{className:"card p-12 text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No check-ins yet"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Your check-in history will appear here"})]}):(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("div",{className:"space-y-4",children:A.map(e=>{var t;return(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary",children:e.location}),y(e.status)]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:e.createdAt&&Iw(e.createdAt.toDate(),{addSuffix:!0})})]})}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Duration"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:w(e.duration)})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Besties Notified"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:(null===(t=e.bestieIds)||void 0===t?void 0:t.length)||0})]})]}),e.notes&&(0,Yy.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary italic",children:['"',e.notes,'"']})}),e.completedAt&&(0,Yy.jsxs)("div",{className:"mt-3 text-xs text-success",children:["\u2705 Completed ",Iw(e.completedAt.toDate(),{addSuffix:!0})]}),e.alertedAt&&(0,Yy.jsxs)("div",{className:"mt-3 text-xs text-warning",children:["\ud83d\udea8 Alert sent ",Iw(e.alertedAt.toDate(),{addSuffix:!0})]})]},e.id)})}),p&&(0,Yy.jsx)("div",{className:"mt-6 text-center",children:(0,Yy.jsx)("button",{onClick:()=>{x(!0)},disabled:c,className:"btn btn-secondary px-8",children:c?(0,Yy.jsxs)(Yy.Fragment,{children:[(0,Yy.jsx)("span",{className:"spinner-small mr-2"}),"Loading..."]}):"Load More (".concat(20," at a time)")})}),!p&&A.length>0&&(0,Yy.jsx)("div",{className:"mt-6 text-center text-text-secondary text-sm",children:"You've reached the end of your check-in history"})]})]})]})},Cv=()=>{const{currentUser:e}=$y(),n=te(),[r,s]=(0,t.useState)([]),[i,A]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(!e)return;const t=Cp(Jm(lm(Ty,"templates"),$m("userId","==",e.uid)),e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),s(t),A(!1)},e=>{console.error("Error loading templates:",e),s([]),A(!1)});return()=>t()},[e]);return i?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"My Templates"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Quickly start check-ins with saved templates"})]}),0===r.length?(0,Yy.jsxs)("div",{className:"card p-12 text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No templates yet"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"Save templates when completing check-ins for quick access"}),(0,Yy.jsx)("button",{onClick:()=>n("/create"),className:"btn btn-primary",children:"Create Check-In"})]}):(0,Yy.jsx)("div",{className:"space-y-4",children:r.map(e=>{var t;return(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:e.name}),(0,Yy.jsxs)("div",{className:"space-y-1 text-sm text-text-secondary",children:[(0,Yy.jsxs)("div",{children:["\ud83d\udccd ",e.location]}),(0,Yy.jsxs)("div",{children:["\u23f0 ",e.duration," minutes"]}),(0,Yy.jsxs)("div",{children:["\ud83d\udc65 ",(null===(t=e.bestieIds)||void 0===t?void 0:t.length)||0," besties"]}),e.notes&&(0,Yy.jsxs)("div",{className:"italic",children:["\ud83d\udcac ",e.notes]})]})]})}),(0,Yy.jsxs)("div",{className:"flex gap-3",children:[(0,Yy.jsx)("button",{onClick:()=>(e=>{n("/create",{state:{template:e}})})(e),className:"flex-1 btn btn-primary",children:"Use Template"}),(0,Yy.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this template?"))try{await bp(cm(Ty,"templates",e)),en.success("Template deleted")}catch(t){console.error("Error deleting template:",t),en.error("Failed to delete template")}})(e.id),className:"btn bg-danger text-white hover:bg-red-600",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})}),(0,Yy.jsx)("div",{className:"mt-6",children:(0,Yy.jsx)("button",{onClick:()=>n("/create"),className:"w-full btn btn-secondary",children:"\u2795 Create New Check-In"})})]})]})},Nv=()=>{const[e,n]=(0,t.useState)({users:{total:0,new7days:0,new30days:0,active7days:0,active30days:0},checkIns:{total:0,active:0,completed:0,alerted:0,avgDuration:0,completionRate:0},besties:{totalConnections:0,avgPerUser:0,pending:0,accepted:0},revenue:{smsSubscribers:0,donorsActive:0,totalDonations:0,mrr:0},engagement:{avgCheckInsPerUser:0,avgBestiesPerUser:0,templatesCreated:0,badgesEarned:0},costs:{estimatedSMS:0,estimatedWhatsApp:0,estimatedEmail:0,totalAlertsSent:0},growth:{userGrowthRate:0,checkInGrowthRate:0,retentionRate:0},funnel:{signups:0,completedOnboarding:0,addedBestie:0,firstCheckIn:0,onboardingRate:0,bestieRate:0,checkInRate:0},behavior:{peakHour:0,peakDay:"",mostCommonDuration:0},topLocations:[],recentAlerts:[]}),[r,s]=(0,t.useState)(!0),[i,A]=(0,t.useState)("7d"),a=(0,t.useCallback)(async()=>{s(!0);try{var e,t;const r=new Date,A=new Date(r.getTime()-6048e5),a=new Date(r.getTime()-2592e6);let o=r;o="7d"===i?A:"30d"===i?a:new Date(0),console.log("[Analytics] Loading users...");const l=await yp(lm(Ty,"users"));console.log("[Analytics] \u2713 Users loaded:",l.size);let c=0,u=0,d=0,h=0,f=0;l.forEach(e=>{var t,n,r;const s=e.data();c++;const i=null===(t=s.stats)||void 0===t||null===(n=t.joinedAt)||void 0===n?void 0:n.toDate();i&&i>A&&u++,i&&i>a&&d++;const o=null===(r=s.lastActive)||void 0===r?void 0:r.toDate();o&&o>A&&h++,o&&o>a&&f++});let m=lm(Ty,"checkins");"all"!==i&&(m=Jm(m,$m("createdAt",">=",yo.fromDate(o)))),console.log("[Analytics] Loading checkins...");const p=await yp(m);console.log("[Analytics] \u2713 Checkins loaded:",p.size);let g=0,x=0,y=0,w=0,v=0;const b={};p.forEach(e=>{const t=e.data();g++,v+=t.duration||0,"active"===t.status&&x++,"completed"===t.status&&y++,"alerted"===t.status&&w++,t.location&&(b[t.location]=(b[t.location]||0)+1)});const B=Object.entries(b).map(e=>{let[t,n]=e;return{location:t,count:n}}).sort((e,t)=>t.count-e.count).slice(0,10),C=g>0?(y/g*100).toFixed(1):0;console.log("[Analytics] Loading besties...");const N=await yp(lm(Ty,"besties"));console.log("[Analytics] \u2713 Besties loaded:",N.size);let E=0,U=0,j=0;N.forEach(e=>{const t=e.data();E++,"pending"===t.status&&U++,"accepted"===t.status&&j++});let F=0,Q=0,k=0,I=0;l.forEach(e=>{var t,n;const r=e.data();var s,i;(null!==(t=r.smsSubscription)&&void 0!==t&&t.active&&(F++,I+=1),null!==(n=r.donationStats)&&void 0!==n&&n.isActive)&&(Q++,k+=(null===(s=r.donationStats)||void 0===s?void 0:s.totalDonated)||0,null!==(i=r.donationStats)&&void 0!==i&&i.monthlyAmount&&(I+=r.donationStats.monthlyAmount))});const S=I;console.log("[Analytics] Loading templates...");const T=await yp(lm(Ty,"templates"));console.log("[Analytics] \u2713 Templates loaded:",T.size),console.log("[Analytics] Loading badges...");const _=await yp(lm(Ty,"badges"));console.log("[Analytics] \u2713 Badges loaded:",_.size);let D=0;_.forEach(e=>{var t;const n=e.data();D+=(null===(t=n.badges)||void 0===t?void 0:t.length)||0}),console.log("[Analytics] Loading recent alerts...");const L=Jm(lm(Ty,"checkins"),$m("status","==","alerted"),np("alertedAt","desc")),H=await yp(L);console.log("[Analytics] \u2713 Recent alerts loaded:",H.size);const R=[],P=[];H.forEach(e=>{if(R.length<10){const t=e.data();P.push((async()=>{let n="Unknown";try{const r=await gp(e(Ty,"users",t.userId));r.exists()&&(n=r.data().displayName||"Unknown")}catch(r){console.error("Error fetching user name:",r)}R.push({id:e.id,location:t.location,alertedAt:t.alertedAt,userName:n})})())}}),await Promise.all(P);let M=0,O=0,K=0;p.forEach(e=>{const t=e.data();if("alerted"===t.status&&t.bestieIds){const e=t.bestieIds.length;M+=e,K+=Math.ceil(.7*e),O+=Math.floor(.3*e)}});const V=(.0075*O).toFixed(2),G=(.005*K).toFixed(2),W=0,z=new Date(A.getTime()-6048e5);let q=0,Y=0;l.forEach(e=>{var t,n;const r=null===(t=e.data().stats)||void 0===t||null===(n=t.joinedAt)||void 0===n?void 0:n.toDate();r&&r>z&&r<A&&q++}),p.forEach(e=>{var t;const n=null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate();n&&n>z&&n<A&&Y++});const X=q>0?((u-q)/q*100).toFixed(1):u>0?"\u221e":"N/A",J=Y>0?((g-Y)/Y*100).toFixed(1):g>0?"\u221e":"N/A",Z={};p.forEach(e=>{const t=e.data().userId;Z[t]=(Z[t]||0)+1});const $=Object.values(Z).filter(e=>e>1).length,ee=c>0?($/c*100).toFixed(1):0;console.log("[Analytics] Calculating funnel metrics...");let te=0,ne=0,re=0,se=null;l.forEach(e=>{var t,n;const r=e.data();var s,i;se||(se={id:e.id,onboardingCompleted:r.onboardingCompleted,statsExists:!!r.stats,totalBesties:null===(s=r.stats)||void 0===s?void 0:s.totalBesties,totalCheckIns:null===(i=r.stats)||void 0===i?void 0:i.totalCheckIns});r.onboardingCompleted&&te++,(null===(t=r.stats)||void 0===t?void 0:t.totalBesties)>0&&ne++,(null===(n=r.stats)||void 0===n?void 0:n.totalCheckIns)>0&&re++}),console.log("[Analytics] Funnel Debug - Sample User:",se),console.log("[Analytics] Funnel Counts:",{totalUsers:c,completedOnboarding:te,addedBestie:ne,firstCheckIn:re});const ie=c>0?(te/c*100).toFixed(1):0,Ae=te>0?(ne/te*100).toFixed(1):0,ae=ne>0?(re/ne*100).toFixed(1):0,oe=new Array(24).fill(0),le={Mon:0,Tue:0,Wed:0,Thu:0,Fri:0,Sat:0,Sun:0},ce={};p.forEach(e=>{var t;const n=e.data(),r=null===(t=n.createdAt)||void 0===t?void 0:t.toDate();if(r){oe[r.getUTCHours()]++;le[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r.getUTCDay()]]++}n.duration&&(ce[n.duration]=(ce[n.duration]||0)+1)});const ue=oe.indexOf(Math.max(...oe)),de=(null===(e=Object.entries(le).sort((e,t)=>t[1]-e[1])[0])||void 0===e?void 0:e[0])||"N/A",he=(null===(t=Object.entries(ce).sort((e,t)=>t[1]-e[1])[0])||void 0===t?void 0:t[0])||30;n({users:{total:c,new7days:u,new30days:d,active7days:h,active30days:f},checkIns:{total:g,active:x,completed:y,alerted:w,avgDuration:g>0?Math.round(v/g):0,completionRate:C},besties:{totalConnections:E,avgPerUser:c>0?(2*j/c).toFixed(1):0,pending:U,accepted:j},revenue:{smsSubscribers:F,donorsActive:Q,totalDonations:k.toFixed(2),mrr:S.toFixed(2)},engagement:{avgCheckInsPerUser:c>0?(g/c).toFixed(1):0,avgBestiesPerUser:c>0?(2*j/c).toFixed(1):0,templatesCreated:T.size,badgesEarned:D},costs:{estimatedSMS:V,estimatedWhatsApp:G,estimatedEmail:W,totalAlertsSent:M},growth:{userGrowthRate:X,checkInGrowthRate:J,retentionRate:ee},funnel:{signups:c,completedOnboarding:te,addedBestie:ne,firstCheckIn:re,onboardingRate:ie,bestieRate:Ae,checkInRate:ae},behavior:{peakHour:ue,peakDay:de,mostCommonDuration:he},topLocations:B,recentAlerts:R}),s(!1)}catch(r){console.error("Error loading analytics:",r),"failed-precondition"===r.code?(console.error("Firestore index missing. Create index at:",r.message),alert("Analytics require database indices. Check console for index creation link.")):"permission-denied"===r.code?alert("Permission denied. Make sure your user document has the field:\n- isAdmin: true"):alert("Failed to load analytics: ".concat(r.message)),s(!1)}},[i]);return(0,t.useEffect)(()=>{a()},[a]),r?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udcca Developer Analytics"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Real-time app metrics and insights"})]}),(0,Yy.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Yy.jsx)("button",{onClick:()=>A("7d"),className:"px-4 py-2 rounded-full font-semibold ".concat("7d"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 7 Days"}),(0,Yy.jsx)("button",{onClick:()=>A("30d"),className:"px-4 py-2 rounded-full font-semibold ".concat("30d"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 30 Days"}),(0,Yy.jsx)("button",{onClick:()=>A("all"),className:"px-4 py-2 rounded-full font-semibold ".concat("all"===i?"bg-primary text-white":"bg-white text-text-primary"),children:"All Time"})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc65 Users"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-primary",children:e.users.total}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Users"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-success",children:e.users.new7days}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"New (7d)"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-success",children:e.users.new30days}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"New (30d)"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.users.active7days}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Active (7d)"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.users.active30days}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Active (30d)"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\u2705 Check-ins"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-primary",children:e.checkIns.total}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-warning",children:e.checkIns.active}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Now"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-success",children:e.checkIns.completed}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Completed"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-danger",children:e.checkIns.alerted}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Alerted"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-accent",children:e.checkIns.avgDuration}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Minutes"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-success",children:[e.checkIns.completionRate,"%"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Completion"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udc9c Besties Network"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-primary",children:e.besties.totalConnections}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Connections"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-success",children:e.besties.accepted}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Accepted"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-warning",children:e.besties.pending}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Pending"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.besties.avgPerUser}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Per User"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcb0 Revenue"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center bg-gradient-primary text-white",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display",children:["$",e.revenue.mrr]}),(0,Yy.jsx)("div",{className:"text-sm opacity-90",children:"MRR"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-primary",children:e.revenue.smsSubscribers}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"SMS Subscribers"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.revenue.donorsActive}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Active Donors"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-success",children:["$",e.revenue.totalDonations]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Donated"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcc8 Engagement"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-primary",children:e.engagement.avgCheckInsPerUser}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-ins/User"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.engagement.avgBestiesPerUser}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Besties/User"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-accent",children:e.engagement.templatesCreated}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Templates"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-warning",children:e.engagement.badgesEarned}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Badges Earned"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcb8 Cost Tracking (Estimates)"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center bg-danger/10",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-danger",children:["$",e.costs.estimatedSMS]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"SMS Costs"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center bg-success/10",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-success",children:["$",e.costs.estimatedWhatsApp]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"WhatsApp Costs"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center bg-primary/10",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-primary",children:["$",e.costs.estimatedEmail]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Email Costs"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-accent",children:e.costs.totalAlertsSent}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Alerts"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udcca Growth Metrics"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display ".concat(parseFloat(e.growth.userGrowthRate)>=0?"text-success":"text-danger"),children:[e.growth.userGrowthRate>0?"+":"",e.growth.userGrowthRate,"%"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"User Growth (WoW)"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display ".concat(parseFloat(e.growth.checkInGrowthRate)>=0?"text-success":"text-danger"),children:[e.growth.checkInGrowthRate>0?"+":"",e.growth.checkInGrowthRate,"%"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Check-in Growth (WoW)"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-primary",children:[e.growth.retentionRate,"%"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Retention Rate"})]})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83c\udfaf User Funnel"}),(0,Yy.jsx)("div",{className:"card p-6",children:(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"1. Sign Ups"}),(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.signups," users"]})]}),(0,Yy.jsx)("div",{className:"text-2xl font-display text-primary",children:"100%"})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"2. Completed Onboarding"}),(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.completedOnboarding," users"]})]}),(0,Yy.jsxs)("div",{className:"text-2xl font-display text-success",children:[e.funnel.onboardingRate,"%"]})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"3. Added First Bestie"}),(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.addedBestie," users"]})]}),(0,Yy.jsxs)("div",{className:"text-2xl font-display text-warning",children:[e.funnel.bestieRate,"%"]})]}),(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:"4. Created First Check-in"}),(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:[e.funnel.firstCheckIn," users"]})]}),(0,Yy.jsxs)("div",{className:"text-2xl font-display text-accent",children:[e.funnel.checkInRate,"%"]})]})]})})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\ud83d\udd50 User Behavior"}),(0,Yy.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-primary",children:[e.behavior.peakHour,":00"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Peak Hour (24h)"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:e.behavior.peakDay}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Peak Day"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-accent",children:[e.behavior.mostCommonDuration,"m"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Common Duration"})]})]})]}),(0,Yy.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-xl text-text-primary mb-4",children:"\ud83d\udccd Top Check-in Locations"}),e.topLocations.length>0?(0,Yy.jsx)("div",{className:"space-y-2",children:e.topLocations.map((e,t)=>(0,Yy.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Yy.jsx)("span",{className:"font-semibold text-text-primary",children:e.location}),(0,Yy.jsx)("span",{className:"badge badge-primary",children:e.count})]},t))}):(0,Yy.jsx)("p",{className:"text-text-secondary text-center py-8",children:"No data yet"})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-xl text-text-primary mb-4",children:"\ud83d\udea8 Recent Alerts"}),e.recentAlerts.length>0?(0,Yy.jsx)("div",{className:"space-y-2",children:e.recentAlerts.map(e=>(0,Yy.jsxs)("div",{className:"p-3 bg-danger/10 border border-danger/20 rounded-lg",children:[(0,Yy.jsx)("div",{className:"font-semibold text-danger",children:e.userName}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:e.location}),e.alertedAt&&(0,Yy.jsx)("div",{className:"text-xs text-text-secondary mt-1",children:new Date(e.alertedAt.toDate()).toLocaleString()})]},e.id))}):(0,Yy.jsx)("p",{className:"text-text-secondary text-center py-8",children:"No alerts \ud83c\udf89"})]})]}),(0,Yy.jsx)("button",{onClick:a,className:"w-full btn btn-primary",disabled:r,children:"\ud83d\udd04 Refresh Data"})]})]})},Ev=()=>{const{currentUser:e}=$y(),[n,r]=(0,t.useState)([]),[s,i]=(0,t.useState)(""),[A,a]=(0,t.useState)("\ud83d\udccd"),[o,l]=(0,t.useState)(!0);(0,t.useEffect)(()=>{c()},[e]);const c=async()=>{if(e)try{const t=await gp(cm(Ty,"users",e.uid));t.exists()&&r(t.data().favoriteLocations||[]),l(!1)}catch(t){console.error("Error loading favorites:",t),l(!1)}};return o?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Favorite Locations"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Save your frequently visited places for quick check-ins"})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Add Location"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Choose Icon"}),(0,Yy.jsx)("div",{className:"flex flex-wrap gap-2",children:["\ud83d\udccd","\u2615","\ud83c\udf7d\ufe0f","\ud83c\udfac","\ud83c\udf7b","\ud83c\udfe0","\ud83c\udfc3","\ud83d\udecd\ufe0f","\ud83c\udfb5","\ud83c\udfe2","\ud83c\udfeb","\ud83c\udfe5"].map(e=>(0,Yy.jsx)("button",{onClick:()=>a(e),className:"w-12 h-12 rounded-xl text-2xl flex items-center justify-center transition-all ".concat(A===e?"bg-primary text-white scale-110":"bg-gray-100 hover:bg-gray-200"),children:e},e))})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Location Name"}),(0,Yy.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),className:"input",placeholder:"e.g., Local Coffee Shop",maxLength:50})]}),(0,Yy.jsx)("button",{onClick:async()=>{if(!s.trim())return void en.error("Please enter a location");if(n.length>=20)return void en.error("Maximum 20 favorite locations");const t={id:Date.now().toString(),name:s.trim(),emoji:A,usedCount:0},o=[...n,t];try{await vp(cm(Ty,"users",e.uid),{favoriteLocations:o}),r(o),i(""),a("\ud83d\udccd"),en.success("Location added!")}catch(l){console.error("Error adding favorite:",l),en.error("Failed to add location")}},className:"w-full btn btn-primary",children:"\u2795 Add to Favorites"})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsxs)("h3",{className:"font-display text-lg text-text-primary mb-4",children:["Your Favorites (",n.length,"/20)"]}),0===n.length?(0,Yy.jsxs)("div",{className:"card p-12 text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccd"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No favorites yet"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Add your frequently visited locations for quick access"})]}):(0,Yy.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(t=>(0,Yy.jsx)("div",{className:"card p-4",children:(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,Yy.jsx)("div",{className:"text-3xl",children:t.emoji}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsx)("div",{className:"font-semibold text-text-primary truncate",children:t.name}),t.usedCount>0&&(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:["Used ",t.usedCount," times"]})]})]}),(0,Yy.jsx)("button",{onClick:()=>(async t=>{const s=n.filter(e=>e.id!==t);try{await vp(cm(Ty,"users",e.uid),{favoriteLocations:s}),r(s),en.success("Location removed")}catch(i){console.error("Error removing favorite:",i),en.error("Failed to remove location")}})(t.id),className:"text-danger hover:bg-danger/10 p-2 rounded-lg transition-colors",children:"\ud83d\uddd1\ufe0f"})]})},t.id))})]})]})]})},Uv=()=>{const{currentUser:e,userData:n}=$y(),[r,s]=(0,t.useState)(!1);return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Export Your Data"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Download all your Besties data (GDPR compliant)"})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6 bg-primary/5 border-2 border-primary/20",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-2",children:"\ud83d\udcca Your Data Rights"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm mb-4",children:"You have the right to download all your data from Besties at any time. This includes your profile, check-ins, besties, templates, and badges."}),(0,Yy.jsxs)("p",{className:"text-text-secondary text-sm",children:[(0,Yy.jsx)("strong",{children:"What's included:"})," Profile info, check-in history, bestie connections, saved templates, earned badges, and account settings."]})]}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Complete Data Export (JSON)"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm",children:"Download all your data in JSON format. Includes everything: profile, check-ins, besties, templates, and badges."}),(0,Yy.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,Yy.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,Yy.jsx)("span",{className:"badge badge-primary",children:"Profile"}),(0,Yy.jsx)("span",{className:"badge badge-success",children:"Check-ins"}),(0,Yy.jsx)("span",{className:"badge badge-secondary",children:"Besties"}),(0,Yy.jsx)("span",{className:"badge badge-accent",children:"Templates"}),(0,Yy.jsx)("span",{className:"badge badge-warning",children:"Badges"})]})]})]})}),(0,Yy.jsx)("button",{onClick:async()=>{s(!0),en("Preparing your data...");try{var t,r;const i={user:{uid:e.uid,email:e.email,displayName:null===n||void 0===n?void 0:n.displayName,phoneNumber:null===n||void 0===n?void 0:n.phoneNumber,photoURL:null===n||void 0===n?void 0:n.photoURL,createdAt:null===n||void 0===n||null===(t=n.stats)||void 0===t||null===(r=t.joinedAt)||void 0===r?void 0:r.toDate(),profile:null===n||void 0===n?void 0:n.profile,stats:null===n||void 0===n?void 0:n.stats},checkIns:[],besties:[],templates:[],badges:[],exportedAt:(new Date).toISOString()},A=Jm(lm(Ty,"checkins"),$m("userId","==",e.uid));(await yp(A)).forEach(e=>{var t,n,r;const s=e.data();i.checkIns.push({id:e.id,location:s.location,duration:s.duration,notes:s.notes,status:s.status,createdAt:null===(t=s.createdAt)||void 0===t?void 0:t.toDate(),completedAt:null===(n=s.completedAt)||void 0===n?void 0:n.toDate(),alertedAt:null===(r=s.alertedAt)||void 0===r?void 0:r.toDate()})});const a=Jm(lm(Ty,"besties"),$m("requesterId","==",e.uid));(await yp(a)).forEach(e=>{var t;const n=e.data();i.besties.push({id:e.id,type:"requested",name:n.recipientName,phone:n.recipientPhone,status:n.status,createdAt:null===(t=n.createdAt)||void 0===t?void 0:t.toDate()})});const o=Jm(lm(Ty,"besties"),$m("recipientId","==",e.uid));(await yp(o)).forEach(e=>{var t;const n=e.data();i.besties.push({id:e.id,type:"received",name:n.requesterName,phone:n.requesterPhone,status:n.status,createdAt:null===(t=n.createdAt)||void 0===t?void 0:t.toDate()})});const l=Jm(lm(Ty,"templates"),$m("userId","==",e.uid));(await yp(l)).forEach(e=>{i.templates.push(Re({id:e.id},e.data()))});const c=Jm(lm(Ty,"badges"),$m("userId","==",e.uid));(await yp(c)).forEach(e=>{i.badges.push(Re({id:e.id},e.data()))});const u=JSON.stringify(i,null,2),d=new Blob([u],{type:"application/json"}),h=URL.createObjectURL(d),f=document.createElement("a");f.href=h,f.download="besties-data-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(f),f.click(),document.body.removeChild(f),en.success("Data exported successfully!"),s(!1)}catch(i){console.error("Error exporting data:",i),en.error("Failed to export data"),s(!1)}},disabled:r,className:"w-full btn btn-primary",children:r?"Exporting...":"\ud83d\udce5 Download JSON"})]}),(0,Yy.jsxs)("div",{className:"card p-6",children:[(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"font-display text-xl text-text-primary mb-2",children:"Check-in History (CSV)"}),(0,Yy.jsx)("p",{className:"text-text-secondary text-sm",children:"Download your check-in history as a spreadsheet. Perfect for importing into Excel or Google Sheets."}),(0,Yy.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Includes:"}),(0,Yy.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,Yy.jsx)("span",{className:"badge badge-success",children:"Date"}),(0,Yy.jsx)("span",{className:"badge badge-success",children:"Location"}),(0,Yy.jsx)("span",{className:"badge badge-success",children:"Duration"}),(0,Yy.jsx)("span",{className:"badge badge-success",children:"Status"}),(0,Yy.jsx)("span",{className:"badge badge-success",children:"Notes"})]})]})]})}),(0,Yy.jsx)("button",{onClick:async()=>{s(!0),en("Preparing CSV...");try{const t=Jm(lm(Ty,"checkins"),$m("userId","==",e.uid)),n=await yp(t),r=[["Date","Location","Duration (min)","Status","Notes"].join(",")];n.forEach(e=>{var t;const n=e.data(),s=[(null===(t=n.createdAt)||void 0===t?void 0:t.toDate().toLocaleDateString())||"",'"'.concat(n.location||"",'"'),n.duration||0,n.status||"",'"'.concat(n.notes||"",'"')];r.push(s.join(","))});const i=r.join("\n"),A=new Blob([i],{type:"text/csv"}),a=URL.createObjectURL(A),o=document.createElement("a");o.href=a,o.download="besties-checkins-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),en.success("CSV exported successfully!"),s(!1)}catch(t){console.error("Error exporting CSV:",t),en.error("Failed to export CSV"),s(!1)}},disabled:r,className:"w-full btn btn-secondary",children:r?"Exporting...":"\ud83d\udcca Download CSV"})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 mt-6 bg-gray-50",children:[(0,Yy.jsx)("h4",{className:"font-semibold text-text-primary mb-2",children:"\ud83d\udd12 Privacy & Security"}),(0,Yy.jsxs)("ul",{className:"text-sm text-text-secondary space-y-1",children:[(0,Yy.jsx)("li",{children:"\u2022 Your data is exported directly to your device"}),(0,Yy.jsx)("li",{children:"\u2022 We don't store or track what you export"}),(0,Yy.jsx)("li",{children:"\u2022 Files are generated locally in your browser"}),(0,Yy.jsx)("li",{children:"\u2022 All data remains encrypted during export"})]})]})]})]})},jv=()=>{const[e,n]=(0,t.useState)("24h"),[r,s]=(0,t.useState)([]),[i,A]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)({}),[u,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{h()},[e]);const h=async()=>{d(!0);try{const t=yo.fromDate((()=>{const t=new Date;switch(e){case"1h":return new Date(t.getTime()-36e5);case"24h":default:return new Date(t.getTime()-864e5);case"7d":return new Date(t.getTime()-6048e5)}})()),n=Jm(lm(Ty,"errors"),$m("createdAt",">=",t),np("createdAt","desc"),sp(50)),r=await yp(n),i=[];r.forEach(e=>i.push(Re({id:e.id},e.data()))),s(i);const a=Jm(lm(Ty,"performance"),$m("createdAt",">=",t),np("createdAt","desc"),sp(100)),l=await yp(a),u=[];l.forEach(e=>u.push(Re({id:e.id},e.data()))),A(u);const h=Jm(lm(Ty,"user_actions"),$m("createdAt",">=",t),np("createdAt","desc"),sp(200)),f=await yp(h),m=[];f.forEach(e=>m.push(Re({id:e.id},e.data()))),o(m);const p=Jm(lm(Ty,"funnel_events"),$m("createdAt",">=",t),np("createdAt","desc")),g=await yp(p),x={};g.forEach(e=>{const t=e.data();x[t.funnel]||(x[t.funnel]={}),x[t.funnel][t.step]||(x[t.funnel][t.step]=0),x[t.funnel][t.step]++}),c(x),d(!1)}catch(t){console.error("Error loading monitoring data:",t),d(!1)}},f=(r.length/Math.max(a.length,1)*100).toFixed(2),m=i.filter(e=>"page_load"===e.type),p=m.length>0?(m.reduce((e,t)=>{var n;return e+((null===(n=t.metrics)||void 0===n?void 0:n.total)||0)},0)/m.length).toFixed(0):0,g=r.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),x=a.filter(e=>"page_view"===e.action),y=x.reduce((e,t)=>{var n;const r=(null===(n=t.details)||void 0===n?void 0:n.page)||"unknown";return e[r]=(e[r]||0)+1,e},{}),w=Object.entries(y).sort((e,t)=>t[1]-e[1]).slice(0,10);return u?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udd0d Monitoring Dashboard"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Real-time errors, performance & user behavior"})]}),(0,Yy.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Yy.jsx)("button",{onClick:()=>n("1h"),className:"px-4 py-2 rounded-full font-semibold ".concat("1h"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last Hour"}),(0,Yy.jsx)("button",{onClick:()=>n("24h"),className:"px-4 py-2 rounded-full font-semibold ".concat("24h"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 24h"}),(0,Yy.jsx)("button",{onClick:()=>n("7d"),className:"px-4 py-2 rounded-full font-semibold ".concat("7d"===e?"bg-primary text-white":"bg-white text-text-primary"),children:"Last 7 Days"})]}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display ".concat(r.length>0?"text-danger":"text-success"),children:r.length}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Errors"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-warning",children:[f,"%"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Error Rate"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsxs)("div",{className:"text-3xl font-display text-primary",children:[p,"ms"]}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Avg Page Load"})]}),(0,Yy.jsxs)("div",{className:"card p-4 text-center",children:[(0,Yy.jsx)("div",{className:"text-3xl font-display text-secondary",children:a.length}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"User Actions"})]})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsxs)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:["\ud83d\udc1b Recent Errors (",r.length,")"]}),0===r.length?(0,Yy.jsxs)("div",{className:"card p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\u2705"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"No errors! Everything is working perfectly!"})]}):(0,Yy.jsx)("div",{className:"space-y-3",children:r.slice(0,10).map(e=>(0,Yy.jsxs)("div",{className:"card p-4 border-l-4 border-danger",children:[(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Yy.jsx)("span",{className:"badge badge-danger",children:e.type}),(0,Yy.jsx)("span",{className:"text-sm text-text-secondary",children:e.createdAt&&new Date(e.createdAt.toDate()).toLocaleString()})]}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.message}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-2",children:e.url}),e.userId&&(0,Yy.jsxs)("div",{className:"text-xs text-text-secondary",children:["User: ",e.userId]})]})}),e.stack&&(0,Yy.jsxs)("details",{className:"text-xs text-text-secondary mt-2",children:[(0,Yy.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,Yy.jsx)("pre",{className:"mt-2 p-2 bg-gray-50 rounded overflow-auto max-h-40",children:e.stack})]})]},e.id))})]}),Object.keys(g).length>0&&(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Error Types Breakdown"}),(0,Yy.jsx)("div",{className:"space-y-2",children:Object.entries(g).map(e=>{let[t,n]=e;return(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsx)("span",{className:"text-text-primary",children:t}),(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Yy.jsx)("div",{className:"h-2 bg-danger/20 rounded-full",style:{width:"".concat(n/r.length*200,"px")},children:(0,Yy.jsx)("div",{className:"h-full bg-danger rounded-full",style:{width:"100%"}})}),(0,Yy.jsx)("span",{className:"text-text-secondary text-sm w-8 text-right",children:n})]})]},t)})})]}),(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"\u26a1 Performance Issues"}),0===i.filter(e=>"slow_resource"===e.type).length?(0,Yy.jsxs)("div",{className:"card p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\ude80"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"No slow resources detected!"})]}):(0,Yy.jsx)("div",{className:"card p-6",children:(0,Yy.jsx)("div",{className:"space-y-2",children:i.filter(e=>"slow_resource"===e.type).slice(0,10).map((e,t)=>(0,Yy.jsxs)("div",{className:"flex items-center justify-between p-3 bg-warning/10 rounded-lg",children:[(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsx)("div",{className:"text-sm font-semibold text-text-primary truncate",children:e.name}),(0,Yy.jsx)("div",{className:"text-xs text-text-secondary",children:e.createdAt&&new Date(e.createdAt.toDate()).toLocaleString()})]}),(0,Yy.jsxs)("div",{className:"text-warning font-semibold ml-4",children:[Math.round(e.duration),"ms"]})]},t))})})]}),m.length>0&&(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"Page Load Breakdown (avg)"}),(0,Yy.jsx)("div",{className:"space-y-2",children:["dns","tcp","request","response","dom","load"].map(e=>{const t=m.reduce((t,n)=>{var r;return t+((null===(r=n.metrics)||void 0===r?void 0:r[e])||0)},0)/m.length;return(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsx)("span",{className:"text-text-primary capitalize",children:e}),(0,Yy.jsxs)("span",{className:"text-text-secondary",children:[Math.round(t),"ms"]})]},e)})})]}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"\ud83d\udcca Top Pages"}),(0,Yy.jsx)("div",{className:"space-y-2",children:w.map(e=>{let[t,n]=e;return(0,Yy.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yy.jsx)("span",{className:"text-text-primary",children:t}),(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Yy.jsx)("div",{className:"h-2 bg-primary/20 rounded-full",style:{width:"".concat(n/x.length*200,"px")},children:(0,Yy.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"100%"}})}),(0,Yy.jsxs)("span",{className:"text-text-secondary text-sm w-12 text-right",children:[n," views"]})]})]},t)})})]}),Object.keys(l).length>0&&(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-4",children:"\ud83c\udfaf Conversion Funnels"}),Object.entries(l).map(e=>{let[t,n]=e;const r=Object.entries(n).sort(),s=Math.max(...Object.values(n));return(0,Yy.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,Yy.jsxs)("div",{className:"font-semibold text-text-primary mb-3 capitalize",children:[t.replace(/_/g," ")," Funnel"]}),(0,Yy.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>{let[n,i]=e;const A=0===t?100:(i/r[0][1]*100).toFixed(1),a=t>0?((r[t-1][1]-i)/r[t-1][1]*100).toFixed(1):0;return(0,Yy.jsxs)("div",{children:[(0,Yy.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Yy.jsx)("span",{className:"text-text-primary capitalize",children:n.replace(/_/g," ")}),(0,Yy.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Yy.jsxs)("span",{className:"text-text-secondary text-sm",children:[i," users"]}),(0,Yy.jsxs)("span",{className:"text-text-secondary text-sm",children:["(",A,"%)"]}),a>0&&(0,Yy.jsxs)("span",{className:"text-danger text-sm",children:["-",a,"%"]})]})]}),(0,Yy.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,Yy.jsx)("div",{className:"h-full ".concat(a>20?"bg-danger":"bg-primary"),style:{width:"".concat(i/s*100,"%")}})})]},n)})})]},t)})]}),(0,Yy.jsx)("button",{onClick:h,className:"w-full btn btn-primary",disabled:u,children:"\ud83d\udd04 Refresh Data"})]})]})},Fv=()=>{const{currentUser:e}=$y(),[n,r]=(0,t.useState)([]),[s,i]=(0,t.useState)(!0),[A,a]=(0,t.useState)("all");(0,t.useEffect)(()=>{o()},[e,A]);const o=async()=>{if(e){i(!0);try{const t=Jm(lm(Ty,"besties"),$m("requesterId","==",e.uid),$m("status","==","accepted")),n=Jm(lm(Ty,"besties"),$m("recipientId","==",e.uid),$m("status","==","accepted")),[s,a]=await Promise.all([yp(t),yp(n)]),o=new Set([e.uid]);s.forEach(e=>{const t=e.data();t.recipientId&&o.add(t.recipientId)}),a.forEach(e=>{const t=e.data();t.requesterId&&o.add(t.requesterId)});const l=Array.from(o),c=[];for(const r of l){let t=Jm(lm(Ty,"checkins"),$m("userId","==",r),np("createdAt","desc"),sp(10));"active"===A?t=Jm(lm(Ty,"checkins"),$m("userId","==",r),$m("status","==","active"),np("createdAt","desc"),sp(10)):"completed"===A&&(t=Jm(lm(Ty,"checkins"),$m("userId","==",r),$m("status","==","completed"),np("createdAt","desc"),sp(10)));const n=await yp(t);for(const s of n.docs){const t=s.data(),n=await gp(cm(Ty,"users",r)),i=n.exists()?n.data():null;c.push(Re(Re({id:s.id},t),{},{userName:(null===i||void 0===i?void 0:i.displayName)||"Unknown User",userPhoto:(null===i||void 0===i?void 0:i.photoURL)||null,isOwn:r===e.uid}))}}c.sort((e,t)=>t.createdAt-e.createdAt),r(c.slice(0,50)),i(!1)}catch(t){console.error("Error loading feed:",t),en.error("Failed to load feed"),i(!1)}}},l=e=>{switch(e){case"active":return"text-warning";case"completed":return"text-success";case"alerted":return"text-danger";default:return"text-text-secondary"}},c=e=>{switch(e){case"active":return"\u23f0";case"completed":return"\u2705";case"alerted":return"\ud83d\udea8";default:return"\ud83d\udccd"}};return s?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"Social Feed"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"See what your besties are up to (privacy-safe)"})]}),(0,Yy.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,Yy.jsx)("button",{onClick:()=>a("all"),className:"px-4 py-2 rounded-full font-semibold ".concat("all"===A?"bg-primary text-white":"bg-white text-text-primary"),children:"All"}),(0,Yy.jsx)("button",{onClick:()=>a("active"),className:"px-4 py-2 rounded-full font-semibold ".concat("active"===A?"bg-warning text-white":"bg-white text-text-primary"),children:"Active Now"}),(0,Yy.jsx)("button",{onClick:()=>a("completed"),className:"px-4 py-2 rounded-full font-semibold ".concat("completed"===A?"bg-success text-white":"bg-white text-text-primary"),children:"Safe & Sound"})]}),0===n.length?(0,Yy.jsxs)("div",{className:"card p-12 text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-2",children:"No activity yet"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"active"===A?"None of your besties are checked in right now":"Add besties to see their check-ins here"})]}):(0,Yy.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,Yy.jsx)("div",{className:"card p-4",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Yy.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-12 h-12 rounded-full object-cover"}):(0,Yy.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-white font-semibold",children:e.userName.charAt(0).toUpperCase()})}),(0,Yy.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Yy.jsx)("span",{className:"font-semibold text-text-primary",children:e.isOwn?"You":e.userName}),(0,Yy.jsx)("span",{className:"text-text-secondary text-sm",children:e.createdAt&&Iw(e.createdAt.toDate(),{addSuffix:!0})})]}),(0,Yy.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Yy.jsx)("span",{className:"text-lg ".concat(l(e.status)),children:c(e.status)}),(0,Yy.jsxs)("span",{className:"text-text-primary",children:["active"===e.status&&"is checked in at","completed"===e.status&&"safely returned from","alerted"===e.status&&"needs help at"]}),(0,Yy.jsx)("span",{className:"font-semibold text-text-primary",children:e.location})]}),(0,Yy.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm text-text-secondary",children:[(0,Yy.jsxs)("span",{children:["\u23f1\ufe0f ",e.duration," minutes"]}),"active"===e.status&&e.alertTime&&(0,Yy.jsxs)("span",{children:["\u2022 Alert in ",Math.round((e.alertTime.toDate()-new Date)/6e4)," min"]}),"completed"===e.status&&e.completedAt&&(0,Yy.jsxs)("span",{children:["\u2022 Completed ",Iw(e.completedAt.toDate(),{addSuffix:!0})]})]}),e.notes&&(0,Yy.jsxs)("div",{className:"mt-2 text-sm text-text-secondary italic",children:['"',e.notes,'"']}),(0,Yy.jsx)("div",{className:"mt-3",children:(0,Yy.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===e.status?"bg-warning/10 text-warning":"completed"===e.status?"bg-success/10 text-success":"alerted"===e.status?"bg-danger/10 text-danger":"bg-gray-100 text-text-secondary"),children:["active"===e.status&&"\ud83d\udfe1 Active","completed"===e.status&&"\ud83d\udfe2 Safe","alerted"===e.status&&"\ud83d\udd34 Alert"]})})]})]})},e.id))}),(0,Yy.jsx)("div",{className:"card p-4 mt-6 bg-primary/5 border border-primary/20",children:(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:[(0,Yy.jsx)("strong",{className:"text-text-primary",children:"\ud83d\udd12 Privacy:"})," Only your accepted besties can see your check-ins. You can only see check-ins from people in your safety circle."]})})]})]})},Qv=()=>(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"max-w-4xl mx-auto p-6 pb-20",children:(0,Yy.jsxs)("div",{className:"card p-8",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-6",children:"Privacy Policy"}),(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary mb-6",children:[(0,Yy.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Overview"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is a personal safety check-in application that helps users stay safe by notifying their trusted contacts if they don't check in on time."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Information We Collect"}),(0,Yy.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-3",children:"Information You Provide:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Name and email address (for account creation)"}),(0,Yy.jsx)("li",{children:"Phone number (for SMS notifications)"}),(0,Yy.jsx)("li",{children:"Location information (when you create check-ins)"}),(0,Yy.jsx)("li",{children:"Emergency contact information (names and phone numbers of your Besties)"})]}),(0,Yy.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-3",children:"Automatically Collected Information:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Check-in history and timestamps"}),(0,Yy.jsx)("li",{children:"Device information and IP address"}),(0,Yy.jsx)("li",{children:"Usage analytics (page views, features used)"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"How We Use Your Information"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We use your information to:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Send safety alerts to your designated emergency contacts when you don't check in on time"}),(0,Yy.jsx)("li",{children:"Send emergency notifications when you trigger an SOS alert"}),(0,Yy.jsx)("li",{children:"Verify your identity and prevent fraud"}),(0,Yy.jsx)("li",{children:"Improve our service and user experience"}),(0,Yy.jsx)("li",{children:"Comply with legal obligations"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"How We Share Your Information"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We share your information ONLY in these situations:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"With Your Besties:"})," We share your check-in status, location, and alerts with emergency contacts YOU designate"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"With Service Providers:"})," We use third-party services (Firebase, Twilio, SendGrid) to operate our platform"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"For Safety:"})," We may share information with law enforcement if we believe it's necessary to prevent harm"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"With Your Consent:"})," Any other sharing requires your explicit permission"]})]}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:(0,Yy.jsx)("strong",{children:"We do NOT:"})}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Sell your personal information"}),(0,Yy.jsx)("li",{children:"Share your information for marketing purposes"}),(0,Yy.jsx)("li",{children:"Share your data with third parties except as described above"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Your Data Rights"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"You have the right to:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Access your personal data"}),(0,Yy.jsx)("li",{children:"Delete your account and all associated data"}),(0,Yy.jsx)("li",{children:"Export your data"}),(0,Yy.jsx)("li",{children:"Opt-out of notifications"}),(0,Yy.jsx)("li",{children:"Update your information at any time"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"To exercise these rights, go to Settings in the app or contact us directly."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Data Security"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We protect your data using:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"End-to-end encryption for sensitive data"}),(0,Yy.jsx)("li",{children:"Secure Firebase authentication"}),(0,Yy.jsx)("li",{children:"Regular security audits"}),(0,Yy.jsx)("li",{children:"Limited employee access to personal data"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Third-Party Services"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We use these services:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Firebase"})," (Google): Hosting, database, authentication"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Twilio:"})," SMS notifications"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"SendGrid:"})," Email notifications"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Google Maps:"})," Location autocomplete"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Stripe:"})," Payment processing (optional)"]})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Each service has its own privacy policy."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Children's Privacy"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Besties is not intended for users under 18. We do not knowingly collect information from children."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"International Users"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Your data may be processed in the United States and other countries where our servers are located."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Changes to Privacy Policy"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"We'll notify you of significant changes via email or in-app notification."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Data Retention"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Active accounts:"})," Data retained while account is active"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Deleted accounts:"})," Data permanently deleted within 30 days"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Legal requirements:"})," Some data may be retained longer if required by law"]})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"Cookie Policy"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We use cookies for:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Authentication and security"}),(0,Yy.jsx)("li",{children:"Analytics and performance monitoring"}),(0,Yy.jsx)("li",{children:"User preferences"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"You can disable cookies in your browser settings."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"WhatsApp/Messenger Communications"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"By adding emergency contacts, you consent to us sending them safety notifications via:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"SMS"}),(0,Yy.jsx)("li",{children:"Email"}),(0,Yy.jsx)("li",{children:"WhatsApp (if enabled)"}),(0,Yy.jsx)("li",{children:"Facebook Messenger (if enabled)"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Emergency contacts can opt-out at any time by replying STOP or contacting us."})]}),(0,Yy.jsx)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:(0,Yy.jsx)("p",{className:"text-text-secondary text-center",children:"By using Besties, you agree to this Privacy Policy."})})]})})]}),kv=()=>(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"max-w-4xl mx-auto p-6 pb-20",children:(0,Yy.jsxs)("div",{className:"card p-8",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-6",children:"Terms of Service"}),(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary mb-6",children:[(0,Yy.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"1. Acceptance of Terms"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:'By accessing or using Besties ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"These Terms constitute a legally binding agreement between you and Besties. Your continued use of the Service indicates your acceptance of these Terms and any future modifications."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"2. Description of Service"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is a personal safety check-in application that allows users to:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Create timed check-ins with location information"}),(0,Yy.jsx)("li",{children:'Designate emergency contacts ("Besties") to receive alerts'}),(0,Yy.jsx)("li",{children:"Send automatic notifications if check-ins are missed"}),(0,Yy.jsx)("li",{children:"Trigger emergency SOS alerts to designated contacts"}),(0,Yy.jsx)("li",{children:"Share check-in status and location with trusted contacts"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"3. Eligibility"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"You must be at least 18 years old to use the Service. By using Besties, you represent and warrant that:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"You are at least 18 years of age"}),(0,Yy.jsx)("li",{children:"You have the legal capacity to enter into this agreement"}),(0,Yy.jsx)("li",{children:"You will comply with all applicable laws and regulations"}),(0,Yy.jsx)("li",{children:"All information you provide is accurate and complete"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"4. Account Registration"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"To use the Service, you must:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Create an account with accurate information"}),(0,Yy.jsx)("li",{children:"Maintain the security of your account credentials"}),(0,Yy.jsx)("li",{children:"Notify us immediately of any unauthorized access"}),(0,Yy.jsx)("li",{children:"Accept responsibility for all activities under your account"}),(0,Yy.jsx)("li",{children:"Provide a valid phone number for emergency notifications"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"You may not share your account with others or create multiple accounts for fraudulent purposes."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"5. Emergency Contacts and Consent"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:'By adding emergency contacts ("Besties"), you:'}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Confirm you have permission to add their contact information"}),(0,Yy.jsx)("li",{children:"Authorize us to send them alerts on your behalf"}),(0,Yy.jsx)("li",{children:"Acknowledge they will receive notifications via SMS, email, WhatsApp, or other channels"}),(0,Yy.jsx)("li",{children:"Accept responsibility for any costs they may incur from receiving messages"}),(0,Yy.jsx)("li",{children:"Agree to inform them about how their information will be used"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"6. Safety Features and Limitations"}),(0,Yy.jsx)("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-4 mb-4",children:(0,Yy.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"\u26a0\ufe0f IMPORTANT DISCLAIMER"})}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties is designed as a safety tool, but it is NOT a replacement for:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Emergency services (911 or local emergency numbers)"}),(0,Yy.jsx)("li",{children:"Professional security or monitoring services"}),(0,Yy.jsx)("li",{children:"Medical alert systems"}),(0,Yy.jsx)("li",{children:"Personal safety devices or training"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:(0,Yy.jsx)("strong",{children:"You acknowledge that:"})}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"The Service depends on internet connectivity, device battery, and third-party services"}),(0,Yy.jsx)("li",{children:"Notifications may be delayed or fail due to technical issues"}),(0,Yy.jsx)("li",{children:"Location information may be inaccurate or unavailable"}),(0,Yy.jsx)("li",{children:"Emergency contacts may not see or respond to alerts"}),(0,Yy.jsx)("li",{children:"The Service cannot guarantee your safety in emergency situations"})]}),(0,Yy.jsx)("div",{className:"bg-red-50 border-2 border-red-400 rounded-xl p-4 mb-4",children:(0,Yy.jsx)("p",{className:"text-sm font-semibold text-red-800",children:"\ud83d\udea8 IN A TRUE EMERGENCY, ALWAYS CONTACT LOCAL EMERGENCY SERVICES (911) IMMEDIATELY"})})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"7. User Responsibilities"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"You agree to:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Use the Service responsibly and lawfully"}),(0,Yy.jsx)("li",{children:"Provide accurate location and check-in information"}),(0,Yy.jsx)("li",{children:"Keep your emergency contact list updated"}),(0,Yy.jsx)("li",{children:"Complete check-ins on time when safe to do so"}),(0,Yy.jsx)("li",{children:"Not abuse the emergency alert features"}),(0,Yy.jsx)("li",{children:"Respect the privacy of other users"}),(0,Yy.jsx)("li",{children:"Maintain a working device with internet connection"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"8. Prohibited Uses"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"You may NOT:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Use the Service for illegal activities"}),(0,Yy.jsx)("li",{children:"Send false emergency alerts or abuse the SOS feature"}),(0,Yy.jsx)("li",{children:"Harass, stalk, or threaten other users"}),(0,Yy.jsx)("li",{children:"Add contacts without their knowledge or permission"}),(0,Yy.jsx)("li",{children:"Attempt to bypass security features or access restrictions"}),(0,Yy.jsx)("li",{children:"Reverse engineer, decompile, or hack the Service"}),(0,Yy.jsx)("li",{children:"Use automated systems (bots) to access the Service"}),(0,Yy.jsx)("li",{children:"Resell or commercially exploit the Service"}),(0,Yy.jsx)("li",{children:"Impersonate others or provide false information"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"9. User Content"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"You retain ownership of content you submit (locations, notes, photos). By using the Service, you grant us a license to:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Store and process your content to provide the Service"}),(0,Yy.jsx)("li",{children:"Share your check-in information with your designated emergency contacts"}),(0,Yy.jsx)("li",{children:"Use anonymized data for analytics and service improvement"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"You are responsible for the content you share and must not submit illegal, harmful, or infringing content."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"10. Payments and Subscriptions"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"If you choose to support Besties through donations or subscriptions:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Payments are processed securely through Stripe"}),(0,Yy.jsx)("li",{children:"Donations are non-refundable"}),(0,Yy.jsx)("li",{children:"Subscriptions auto-renew until cancelled"}),(0,Yy.jsx)("li",{children:"You can cancel subscriptions anytime through your account settings"}),(0,Yy.jsx)("li",{children:"We reserve the right to change pricing with 30 days notice"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"11. Third-Party Services"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"The Service integrates with third-party providers (Twilio, SendGrid, Firebase, Google Maps, Stripe). Your use of these services is subject to their respective terms and privacy policies. We are not responsible for third-party service failures or changes."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"12. Intellectual Property"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"Besties and all related trademarks, logos, and content are owned by us or our licensors. You may not use our intellectual property without written permission."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"13. Disclaimer of Warranties"}),(0,Yy.jsx)("div",{className:"bg-gray-100 border-2 border-gray-300 rounded-xl p-4 mb-4",children:(0,Yy.jsx)("p",{className:"text-sm font-semibold text-gray-800 uppercase",children:'THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND'})}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We make no warranties that:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"The Service will be uninterrupted, secure, or error-free"}),(0,Yy.jsx)("li",{children:"Notifications will always be delivered on time"}),(0,Yy.jsx)("li",{children:"Location information will be accurate"}),(0,Yy.jsx)("li",{children:"The Service will meet your safety needs or expectations"}),(0,Yy.jsx)("li",{children:"Defects will be corrected"})]})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"14. Limitation of Liability"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Any injuries, harm, or damages resulting from use or inability to use the Service"}),(0,Yy.jsx)("li",{children:"Failed or delayed notifications"}),(0,Yy.jsx)("li",{children:"Inaccurate location information"}),(0,Yy.jsx)("li",{children:"Actions or inactions of emergency contacts"}),(0,Yy.jsx)("li",{children:"Third-party service failures"}),(0,Yy.jsx)("li",{children:"Loss of data or content"}),(0,Yy.jsx)("li",{children:"Indirect, incidental, or consequential damages"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"If we are found liable, our total liability is limited to the amount you paid us in the past 12 months, or $100, whichever is less."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"15. Indemnification"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"You agree to indemnify and hold harmless Besties and its affiliates from any claims, damages, or expenses arising from: (a) your use of the Service, (b) your violation of these Terms, (c) your violation of any third-party rights, or (d) false emergency alerts."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"16. Termination"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"We may terminate or suspend your account if you:"}),(0,Yy.jsxs)("ul",{className:"list-disc list-inside text-text-secondary mb-4 space-y-2",children:[(0,Yy.jsx)("li",{children:"Violate these Terms"}),(0,Yy.jsx)("li",{children:"Abuse the Service or emergency features"}),(0,Yy.jsx)("li",{children:"Engage in fraudulent activity"}),(0,Yy.jsx)("li",{children:"Pose a risk to other users"})]}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"You may terminate your account anytime through Settings. Upon termination, your data will be deleted as described in our Privacy Policy."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"17. Changes to Terms"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"We may update these Terms at any time. Significant changes will be communicated via email or in-app notification. Continued use after changes constitutes acceptance of the new Terms."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"18. Governing Law and Disputes"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"These Terms are governed by the laws of Australia. Any disputes will be resolved through binding arbitration, except where prohibited by law."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"19. Severability"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will continue in full effect."})]}),(0,Yy.jsxs)("section",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-2xl font-display text-text-primary mb-4",children:"20. Contact Information"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4",children:"For questions about these Terms, contact us at:"}),(0,Yy.jsxs)("ul",{className:"list-none text-text-secondary space-y-2",children:[(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Email:"})," legal@bestiesapp.com"]}),(0,Yy.jsxs)("li",{children:[(0,Yy.jsx)("strong",{children:"Support:"})," support@bestiesapp.com"]})]})]}),(0,Yy.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,Yy.jsx)("p",{className:"text-text-secondary text-center mb-4",children:(0,Yy.jsx)("strong",{children:"By using Besties, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})}),(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary text-center",children:["For information about how we handle your data, please review our ",(0,Yy.jsx)("a",{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})]})]})})]}),Iv=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)("all"),[i,A]=(0,t.useState)("24h"),[a,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=lm(Ty,"errors");if("all"!==i){const t=new Date,n={"24h":864e5,"7d":6048e5,"30d":2592e6};e=Jm(e,$m("timestamp",">=",new Date(t.getTime()-n[i]).getTime()))}"all"!==r&&(e=Jm(e,$m("type","==",r))),e=Jm(e,np("timestamp","desc"),sp(100));const t=Cp(e,e=>{const t=[];e.forEach(e=>{t.push(Re({id:e.id},e.data()))}),n(t),o(!1)},e=>{console.error("Error loading errors:",e),o(!1)});return()=>t()},[r,i]);const l=e=>{var t,n;return"uncaught_error"===e.type?"critical":"unhandled_promise"===e.type||null!==(t=e.message)&&void 0!==t&&t.includes("verification failed")?"high":null!==(n=e.message)&&void 0!==n&&n.includes("permission-denied")?"medium":"low"},c={total:e.length,critical:e.filter(e=>"critical"===l(e)).length,high:e.filter(e=>"high"===l(e)).length,medium:e.filter(e=>"medium"===l(e)).length,low:e.filter(e=>"low"===l(e)).length};return a?(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,Yy.jsx)("div",{className:"spinner"})})]}):(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-7xl mx-auto p-4 pb-20",children:[(0,Yy.jsxs)("div",{className:"mb-6",children:[(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:"\ud83d\udea8 Error Dashboard"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Monitor and track application errors"})]}),(0,Yy.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,Yy.jsxs)("div",{className:"card p-4",children:[(0,Yy.jsx)("div",{className:"text-2xl font-bold text-text-primary",children:c.total}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Total Errors"})]}),(0,Yy.jsxs)("div",{className:"card p-4 border-2 border-red-300",children:[(0,Yy.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c.critical}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Critical"})]}),(0,Yy.jsxs)("div",{className:"card p-4 border-2 border-orange-300",children:[(0,Yy.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:c.high}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"High"})]}),(0,Yy.jsxs)("div",{className:"card p-4 border-2 border-yellow-300",children:[(0,Yy.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:c.medium}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Medium"})]}),(0,Yy.jsxs)("div",{className:"card p-4 border-2 border-blue-300",children:[(0,Yy.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.low}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Low"})]})]}),(0,Yy.jsx)("div",{className:"card p-4 mb-6",children:(0,Yy.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Type"}),(0,Yy.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"input",children:[(0,Yy.jsx)("option",{value:"all",children:"All Types"}),(0,Yy.jsx)("option",{value:"uncaught_error",children:"Uncaught Errors"}),(0,Yy.jsx)("option",{value:"custom_error",children:"Custom Errors"}),(0,Yy.jsx)("option",{value:"unhandled_promise",children:"Promise Rejections"})]})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("label",{className:"block text-sm font-semibold text-text-primary mb-2",children:"Time Range"}),(0,Yy.jsxs)("select",{value:i,onChange:e=>A(e.target.value),className:"input",children:[(0,Yy.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,Yy.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,Yy.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,Yy.jsx)("option",{value:"all",children:"All Time"})]})]})]})}),(0,Yy.jsx)("div",{className:"space-y-4",children:0===e.length?(0,Yy.jsxs)("div",{className:"card p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-4",children:"\u2728"}),(0,Yy.jsx)("div",{className:"text-xl font-semibold text-text-primary mb-2",children:"No Errors Found"}),(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Everything is running smoothly!"})]}):e.map(e=>{const t=l(e),n=(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(t);return(0,Yy.jsxs)("div",{className:"card p-4 border-2 ".concat(n),children:[(0,Yy.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Yy.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase ".concat(n),children:t}),(0,Yy.jsx)("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-xs font-semibold text-gray-700",children:e.type}),(0,Yy.jsxs)("span",{className:"text-sm text-text-secondary",children:[Iw(e.timestamp)," ago"]})]}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary mb-1",children:e.message}),e.userId&&(0,Yy.jsxs)("div",{className:"text-sm text-text-secondary",children:["User: ",e.userId]})]})}),(0,Yy.jsxs)("details",{className:"mt-3",children:[(0,Yy.jsx)("summary",{className:"cursor-pointer text-sm font-semibold text-primary hover:underline",children:"View Details"}),(0,Yy.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:(0,Yy.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("strong",{children:"URL:"})," ",e.url]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("strong",{children:"Session:"})," ",e.sessionId]}),e.filename&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("strong",{children:"File:"})," ",e.filename,":",e.lineno,":",e.colno]}),e.details&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("strong",{children:"Details:"}),(0,Yy.jsx)("pre",{className:"mt-1 p-2 bg-white rounded text-xs overflow-x-auto",children:JSON.stringify(e.details,null,2)})]}),e.stack&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("strong",{children:"Stack Trace:"}),(0,Yy.jsx)("pre",{className:"mt-1 p-2 bg-white rounded text-xs overflow-x-auto",children:e.stack})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("strong",{children:"User Agent:"})," ",e.userAgent]})]})})]})]},e.id)})})]})]})},Sv=()=>{var e,n;const{alertId:r}=ne(),s=te(),[i,A]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{u()},[r]);const u=async()=>{try{let e=await gp(cm(Ty,"checkins",r)),t="checkin";if(e.exists()||(e=await gp(cm(Ty,"emergency_sos",r)),t="sos"),!e.exists())return void c(!1);const n=Re(Re({id:e.id},e.data()),{},{type:t});A(n);const s=await gp(cm(Ty,"users",n.userId));s.exists()&&o(s.data())}catch(e){console.error("Error loading alert:",e)}finally{c(!1)}};if(l)return(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Yy.jsx)("div",{className:"spinner"})});if(!i)return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-2xl mx-auto p-4 text-center mt-20",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,Yy.jsx)("h1",{className:"text-2xl font-display text-text-primary mb-2",children:"Alert Not Found"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"This alert may have been resolved or removed."}),(0,Yy.jsx)("button",{onClick:()=>s("/"),className:"btn btn-primary",children:"Go Home"})]})]});const d="checkin"===i.type,h="sos"===i.type;return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-2xl mx-auto p-4 pb-20",children:[(0,Yy.jsx)("div",{className:"card p-6 mb-6 ".concat(h?"bg-red-50 border-2 border-red-500":"bg-yellow-50 border-2 border-yellow-500"),children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:h?"\ud83c\udd98":"\ud83d\udea8"}),(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-2",children:h?"EMERGENCY ALERT":"SAFETY ALERT"}),(0,Yy.jsxs)("p",{className:"text-lg text-text-secondary",children:[(null===a||void 0===a?void 0:a.displayName)||"A friend"," ",h?"triggered an emergency SOS":"hasn't checked in"]})]})}),(0,Yy.jsxs)("div",{className:"card p-6 mb-6",children:[(0,Yy.jsx)("h2",{className:"text-xl font-display text-text-primary mb-4",children:"Details"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Person"}),(0,Yy.jsxs)("div",{className:"font-semibold text-text-primary flex items-center gap-3",children:[(0,Yy.jsx)("div",{className:"w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center text-white",children:(null===a||void 0===a||null===(e=a.displayName)||void 0===e?void 0:e[0])||"?"}),(null===a||void 0===a?void 0:a.displayName)||"Unknown"]})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Location"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:i.location||"Unknown"})]}),d&&i.meetingWith&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Meeting With"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:i.meetingWith})]}),d&&i.notes&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Notes"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:i.notes})]}),i.photoURL&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Photo"}),(0,Yy.jsx)("img",{src:i.photoURL,alt:"Check-in",className:"w-full rounded-xl max-h-64 object-cover"})]}),(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Time"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:null===(n=i.createdAt)||void 0===n?void 0:n.toDate().toLocaleString()})]}),d&&i.alertTime&&(0,Yy.jsxs)("div",{children:[(0,Yy.jsx)("div",{className:"text-sm text-text-secondary mb-1",children:"Expected Check-In By"}),(0,Yy.jsx)("div",{className:"font-semibold text-text-primary",children:i.alertTime.toDate().toLocaleTimeString()})]})]})]}),(0,Yy.jsxs)("div",{className:"card p-6 bg-primary/10",children:[(0,Yy.jsx)("h3",{className:"font-display text-lg text-text-primary mb-3",children:"What to do:"}),(0,Yy.jsxs)("ul",{className:"space-y-2 text-text-secondary",children:[(0,Yy.jsxs)("li",{className:"flex gap-2",children:[(0,Yy.jsx)("span",{children:"1."}),(0,Yy.jsxs)("span",{children:["Try calling or messaging ",null===a||void 0===a?void 0:a.displayName]})]}),(0,Yy.jsxs)("li",{className:"flex gap-2",children:[(0,Yy.jsx)("span",{children:"2."}),(0,Yy.jsx)("span",{children:"Check if they're at the location listed above"})]}),(0,Yy.jsxs)("li",{className:"flex gap-2",children:[(0,Yy.jsx)("span",{children:"3."}),(0,Yy.jsx)("span",{children:"If you can't reach them, consider contacting local authorities"})]}),h&&(0,Yy.jsxs)("li",{className:"flex gap-2 font-semibold text-red-600",children:[(0,Yy.jsx)("span",{children:"\u26a0\ufe0f"}),(0,Yy.jsx)("span",{children:"This is an EMERGENCY - act immediately!"})]})]})]}),(null===a||void 0===a?void 0:a.phoneNumber)&&(0,Yy.jsx)("div",{className:"mt-4",children:(0,Yy.jsxs)("a",{href:"tel:".concat(a.phoneNumber),className:"w-full btn btn-primary text-lg py-4 block text-center",children:["\ud83d\udcde Call ",a.displayName]})})]})]})},Tv=()=>{var e;const n=te(),{userData:r}=$y();return(0,t.useEffect)(()=>{const e=setTimeout(()=>{n("/settings")},5e3);return()=>clearTimeout(e)},[n]),(0,Yy.jsx)("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,Yy.jsx)("div",{className:"text-8xl mb-6 animate-bounce",children:"\ud83c\udf89"}),(0,Yy.jsx)("h1",{className:"text-4xl font-display text-white mb-4",children:"Thank You for Subscribing!"}),(0,Yy.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-2xl mb-6",children:[(0,Yy.jsx)("p",{className:"text-xl text-text-primary mb-4",children:"Your subscription is being activated..."}),(0,Yy.jsxs)("div",{className:"bg-primary/10 rounded-xl p-6 mb-6",children:[(0,Yy.jsxs)("p",{className:"text-text-primary mb-4",children:[(0,Yy.jsx)("strong",{children:"You're helping keep Besties free for everyone!"})," \ud83d\udc9c"]}),(0,Yy.jsxs)("p",{className:"text-sm text-text-secondary",children:["Your ",null!==r&&void 0!==r&&null!==(e=r.smsSubscription)&&void 0!==e&&e.active?"SMS alerts":"support"," subscription helps us keep Besties accessible to everyone who needs it. Together, we're making the world a safer place."]})]}),(0,Yy.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Yy.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd12"}),(0,Yy.jsx)("div",{className:"font-semibold",children:"Secure"}),(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Protected by Stripe"})]}),(0,Yy.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udcf1"}),(0,Yy.jsx)("div",{className:"font-semibold",children:"Active"}),(0,Yy.jsx)("div",{className:"text-text-secondary",children:"SMS alerts enabled"})]}),(0,Yy.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-2",children:"\u23f1\ufe0f"}),(0,Yy.jsx)("div",{className:"font-semibold",children:"Anytime"}),(0,Yy.jsx)("div",{className:"text-text-secondary",children:"Cancel anytime"})]})]})]}),(0,Yy.jsx)("p",{className:"text-white/80 text-sm mb-4",children:"Redirecting to settings in 5 seconds..."}),(0,Yy.jsx)("button",{onClick:()=>n("/settings"),className:"btn bg-white text-primary hover:bg-white/90 px-8 py-3",children:"Go to Settings Now \u2192"})]})})},_v=()=>{const e=te();return(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,Yy.jsx)("div",{className:"text-8xl mb-6",children:"\ud83d\ude14"}),(0,Yy.jsx)("h1",{className:"text-4xl font-display text-text-primary mb-4",children:"Subscription Cancelled"}),(0,Yy.jsxs)("div",{className:"card p-8 mb-6",children:[(0,Yy.jsx)("p",{className:"text-xl text-text-secondary mb-6",children:"Your subscription wasn't completed. Don't worry - you haven't been charged!"}),(0,Yy.jsxs)("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-xl p-6 mb-6",children:[(0,Yy.jsx)("p",{className:"text-text-primary mb-3",children:(0,Yy.jsx)("strong",{children:"Why subscribe to SMS alerts?"})}),(0,Yy.jsxs)("ul",{className:"text-left text-sm text-text-secondary space-y-2",children:[(0,Yy.jsx)("li",{children:"\u2705 Get instant SMS alerts when check-ins expire"}),(0,Yy.jsx)("li",{children:"\u2705 Your besties receive SMS notifications"}),(0,Yy.jsx)("li",{children:"\u2705 More reliable than email for emergencies"}),(0,Yy.jsx)("li",{children:"\u2705 Support keeps Besties free for everyone"})]})]}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mb-6",children:"Only $1/month - Less than a coffee! \u2615"}),(0,Yy.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,Yy.jsx)("button",{onClick:()=>e("/"),className:"btn btn-secondary px-6",children:"Go Home"}),(0,Yy.jsx)("button",{onClick:()=>{e("/settings")},className:"btn btn-primary px-6",children:"Try Again \u2192"})]})]}),(0,Yy.jsx)("p",{className:"text-xs text-text-secondary",children:"Having trouble? Email us at support@bestiesapp.web.app"})]})})},Dv=()=>{var e,n;const r=te(),{userData:s}=$y(),[i,A]=(0,t.useState)(!1),[a,o]=(0,t.useState)(!1),l=async e=>{A(!0);try{const t=await Sw.createCheckoutSession({amount:e,type:"donation"});t.data&&t.data.url?window.location.href=t.data.url:en.error("Failed to start donation")}catch(t){console.error("Donation error:",t),en.error("Failed to start donation")}finally{A(!1)}},c=e=>{const t="https://besties.app",n="Check out Besties - the safety app that helps you stay safe with your friends! \ud83d\udc9c",r={twitter:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(n),"&url=").concat(encodeURIComponent(t)),facebook:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(t)),whatsapp:"https://wa.me/?text=".concat(encodeURIComponent(n+" "+t)),copy:t};"copy"===e?(navigator.clipboard.writeText(t),en.success("Link copied to clipboard!")):window.open(r[e],"_blank","width=600,height=400"),o(!1)};return(0,Yy.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,Yy.jsx)(aw,{}),(0,Yy.jsxs)("div",{className:"max-w-4xl mx-auto p-4 pb-24 md:pb-6",children:[(0,Yy.jsxs)("div",{className:"text-center mb-12 animate-fade-in",children:[(0,Yy.jsx)("div",{className:"flex justify-center mb-6",children:(0,Yy.jsxs)("svg",{viewBox:"0 0 120 120",className:"w-32 h-32",children:[(0,Yy.jsxs)("defs",{children:[(0,Yy.jsxs)("linearGradient",{id:"heroHeart",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,Yy.jsx)("stop",{offset:"0%",stopColor:"#fce7f3"}),(0,Yy.jsx)("stop",{offset:"50%",stopColor:"#fbcfe8"}),(0,Yy.jsx)("stop",{offset:"100%",stopColor:"#f9a8d4"})]}),(0,Yy.jsx)("filter",{id:"softGlow",children:(0,Yy.jsx)("feGaussianBlur",{stdDeviation:"0.5"})})]}),(0,Yy.jsx)("path",{d:"M60,85 C60,85 35,70 35,50 C35,40 42,33 50,33 C55,33 58,36 60,42 C62,36 65,33 70,33 C78,33 85,40 85,50 C85,70 60,85 60,85 Z",fill:"url(#heroHeart)",filter:"url(#softGlow)",opacity:"0.9",className:"animate-pulse",style:{animationDuration:"3s"}}),(0,Yy.jsx)("path",{d:"M60,78 C60,78 42,66 42,52 C42,44 47,39 53,39 C56,39 58,41 60,45 C62,41 64,39 67,39 C73,39 78,44 78,52 C78,66 60,78 60,78 Z",fill:"#fff",opacity:"0.4"})]})}),(0,Yy.jsx)("h1",{className:"text-5xl font-display bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"You Deserve to Feel Safe"}),(0,Yy.jsxs)("p",{className:"text-xl text-text-secondary max-w-2xl mx-auto leading-relaxed",children:["Every single time you step out your door, meet someone new, or head home after dark \u2014 ",(0,Yy.jsx)("span",{className:"font-semibold text-primary",children:"you deserve to feel protected"}),"."]})]}),(0,Yy.jsxs)("div",{className:"card p-8 mb-8 animate-slide-up",children:[(0,Yy.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,Yy.jsxs)("svg",{viewBox:"0 0 60 60",className:"w-16 h-16",children:[(0,Yy.jsx)("defs",{children:(0,Yy.jsxs)("radialGradient",{id:"storyGlow",children:[(0,Yy.jsx)("stop",{offset:"0%",stopColor:"#ddd6fe"}),(0,Yy.jsx)("stop",{offset:"100%",stopColor:"#a78bfa"})]})}),(0,Yy.jsx)("circle",{cx:"30",cy:"30",r:"20",fill:"url(#storyGlow)",opacity:"0.3",className:"animate-pulse",style:{animationDuration:"4s"}}),(0,Yy.jsxs)("g",{opacity:"0.8",children:[(0,Yy.jsx)("circle",{cx:"30",cy:"27",r:"6",fill:"#f9a8d4"}),(0,Yy.jsx)("ellipse",{cx:"30",cy:"38",rx:"7",ry:"9",fill:"#f9a8d4"})]})]}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary",children:"Why Besties Exists"})]}),(0,Yy.jsxs)("div",{className:"space-y-4 text-lg text-text-secondary",children:[(0,Yy.jsx)("p",{children:"We've all been there. That moment when you're walking home alone and you text your friend, \"Text me when I get home.\" That first date where you share your location with your bestie, just in case. That trip where you check in every night so someone knows you're okay."}),(0,Yy.jsxs)("p",{children:["These moments aren't just about safety \u2014 they're about ",(0,Yy.jsx)("span",{className:"font-semibold text-primary",children:"having someone who cares"}),". Someone who's got your back. Someone who'll notice if you don't make it home."]}),(0,Yy.jsx)("p",{className:"text-xl font-semibold text-primary",children:"That's the heart of Besties. \ud83d\udc9c"}),(0,Yy.jsx)("p",{children:"We built this app because everyone deserves that feeling of being looked after. Whether you're walking alone, going on a date, meeting someone from the internet, traveling, or just want someone to know you're safe \u2014 Besties is here for you."})]})]}),(0,Yy.jsxs)("div",{className:"mb-8",children:[(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-6 text-center",children:"How Besties Has Your Back"}),(0,Yy.jsxs)("div",{className:"space-y-4",children:[(0,Yy.jsx)("div",{className:"card p-6 bg-gradient-to-br from-pink-50 to-purple-50",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:"1"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"text-xl font-display text-text-primary mb-2",children:"Create a Check-In"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Going somewhere? Set up a quick check-in. Tell Besties where you're going, who you want to notify, and when you'll be done."})]})]})}),(0,Yy.jsx)("div",{className:"card p-6 bg-gradient-to-br from-purple-50 to-blue-50",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:"2"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"text-xl font-display text-text-primary mb-2",children:"Your Besties Get Notified"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Your chosen besties receive a notification letting them know you're checking in. They know where you are, what you're doing, and when to expect you back."})]})]})}),(0,Yy.jsx)("div",{className:"card p-6 bg-gradient-to-br from-blue-50 to-green-50",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-green-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:"3"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"text-xl font-display text-text-primary mb-2",children:"Mark Yourself Safe (or Don't)"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"When you're done, mark yourself safe with one tap. If you forget or can't check in, your besties get an alert automatically \u2014 they'll know to reach out."})]})]})}),(0,Yy.jsx)("div",{className:"card p-6 bg-gradient-to-br from-green-50 to-pink-50",children:(0,Yy.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Yy.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-green-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:"4"}),(0,Yy.jsxs)("div",{className:"flex-1",children:[(0,Yy.jsx)("h3",{className:"text-xl font-display text-text-primary mb-2",children:"Feel Protected, Feel Loved"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"That's it. Simple, easy, and it works. You get to live your life knowing someone's watching out for you. Because you matter."})]})]})})]})]}),(0,Yy.jsxs)("div",{className:"card p-8 mb-8 bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50",children:[(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-6 text-center",children:"This Isn't Just About Safety"}),(0,Yy.jsxs)("div",{className:"space-y-6 text-lg text-text-secondary",children:[(0,Yy.jsxs)("p",{children:["Besties is about ",(0,Yy.jsx)("span",{className:"font-semibold text-primary",children:"feeling seen"}),". It's about knowing that someone cares enough to check on you. It's about not having to be brave all the time because you have people who've got your back."]}),(0,Yy.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 my-6",children:[(0,Yy.jsxs)("div",{className:"bg-white rounded-xl p-6 border-2 border-pink-200",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-3",children:"\ud83c\udf19"}),(0,Yy.jsx)("h3",{className:"font-semibold text-text-primary mb-2",children:"Walking Home Late"}),(0,Yy.jsx)("p",{className:"text-sm",children:"Your bestie knows your route and when you should be home. You're not alone."})]}),(0,Yy.jsxs)("div",{className:"bg-white rounded-xl p-6 border-2 border-purple-200",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udc9d"}),(0,Yy.jsx)("h3",{className:"font-semibold text-text-primary mb-2",children:"First Dates"}),(0,Yy.jsx)("p",{className:"text-sm",children:"Someone knows where you are and who you're with. You can relax and enjoy yourself."})]}),(0,Yy.jsxs)("div",{className:"bg-white rounded-xl p-6 border-2 border-blue-200",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-3",children:"\u2708\ufe0f"}),(0,Yy.jsx)("h3",{className:"font-semibold text-text-primary mb-2",children:"Solo Travel"}),(0,Yy.jsx)("p",{className:"text-sm",children:"Check in from anywhere in the world. Your people know you're safe."})]}),(0,Yy.jsxs)("div",{className:"bg-white rounded-xl p-6 border-2 border-green-200",children:[(0,Yy.jsx)("div",{className:"text-3xl mb-3",children:"\ud83c\udfc3"}),(0,Yy.jsx)("h3",{className:"font-semibold text-text-primary mb-2",children:"Running Alone"}),(0,Yy.jsx)("p",{className:"text-sm",children:"Share your route and duration. If you don't return, someone will notice."})]})]}),(0,Yy.jsx)("p",{className:"text-center text-xl font-semibold text-primary",children:"You deserve to feel safe. You deserve to be protected. You deserve Besties."})]})]}),!(null!==s&&void 0!==s&&null!==(e=s.donationStats)&&void 0!==e&&e.isActive)&&(0,Yy.jsxs)("div",{className:"card p-8 mb-8",children:[(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-4 text-center",children:"Help Us Keep Besties Free \ud83d\udc9c"}),(0,Yy.jsxs)("div",{className:"space-y-4 text-lg text-text-secondary mb-6",children:[(0,Yy.jsx)("p",{children:"Right now, Besties is completely free. We built it because we believe safety shouldn't cost money \u2014 everyone deserves to feel protected, regardless of their financial situation."}),(0,Yy.jsxs)("p",{children:["But keeping Besties running costs money. Servers, SMS notifications, development time \u2014 it all adds up. Here's the truth: ",(0,Yy.jsx)("span",{className:"font-semibold text-primary",children:"we need your help to keep this going"}),"."]})]}),(0,Yy.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[(0,Yy.jsxs)("button",{onClick:()=>l(5),disabled:i,className:"card p-6 text-center hover:shadow-xl transition-all hover:scale-105 border-2 border-pink-200 hover:border-pink-400",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\u2615"}),(0,Yy.jsx)("div",{className:"text-2xl font-bold text-primary mb-1",children:"$5"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Buy us a coffee"})]}),(0,Yy.jsxs)("button",{onClick:()=>l(10),disabled:i,className:"card p-6 text-center hover:shadow-xl transition-all hover:scale-105 border-2 border-purple-300 hover:border-purple-500 bg-gradient-to-br from-pink-50 to-purple-50",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc9c"}),(0,Yy.jsx)("div",{className:"text-2xl font-bold text-primary mb-1",children:"$10"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Support a month"}),(0,Yy.jsx)("div",{className:"text-xs text-primary font-semibold mt-1",children:"Most Popular!"})]}),(0,Yy.jsxs)("button",{onClick:()=>l(25),disabled:i,className:"card p-6 text-center hover:shadow-xl transition-all hover:scale-105 border-2 border-yellow-200 hover:border-yellow-400",children:[(0,Yy.jsx)("div",{className:"text-4xl mb-2",children:"\u2b50"}),(0,Yy.jsx)("div",{className:"text-2xl font-bold text-primary mb-1",children:"$25"}),(0,Yy.jsx)("div",{className:"text-sm text-text-secondary",children:"Keep us going strong"})]})]}),(0,Yy.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[(0,Yy.jsx)("h3",{className:"text-xl font-display text-text-primary mb-4 text-center",children:"Can't Donate? That's Totally Okay! \ud83d\udc95"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-4 text-center",children:"We get it \u2014 money's tight. Here are other ways you can help us grow:"}),(0,Yy.jsxs)("div",{className:"space-y-3",children:[(0,Yy.jsx)("button",{onClick:()=>o(!0),className:"w-full btn btn-secondary",children:"\ud83d\udcf1 Share Besties with Friends"}),(0,Yy.jsx)("button",{onClick:()=>r("/feedback"),className:"w-full btn btn-secondary",children:"\ud83d\udcac Leave Us Feedback"}),(0,Yy.jsx)("button",{onClick:()=>window.open("https://instagram.com/bestiesapp","_blank"),className:"w-full btn btn-secondary",children:"\ud83d\udcf8 Follow Us on Instagram"}),(0,Yy.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:"Besties - Stay Safe Together",text:"Check out Besties - the safety app that helps you stay safe with your friends! \ud83d\udc9c",url:"https://besties.app"}):c("copy")},className:"w-full btn btn-secondary",children:"\ud83d\udc9c Tell Others About Us"})]}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mt-6 text-center italic",children:"Every share, every follow, every kind word helps us reach more people who need safety in their lives. Thank you for being part of our community. \ud83d\udc9c"})]})]}),(null===s||void 0===s||null===(n=s.donationStats)||void 0===n?void 0:n.isActive)&&(0,Yy.jsx)("div",{className:"card p-8 mb-8 bg-gradient-to-br from-yellow-50 to-pink-50 border-2 border-yellow-300",children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf1f"}),(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-3",children:"You're Amazing!"}),(0,Yy.jsx)("p",{className:"text-lg text-text-secondary max-w-2xl mx-auto",children:"Thank you for supporting Besties. Because of you, we can keep this app free for everyone who needs it. You're literally helping keep people safe. That's incredible. \ud83d\udc9c"})]})}),(0,Yy.jsxs)("div",{className:"text-center card p-8 bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100",children:[(0,Yy.jsx)("h2",{className:"text-3xl font-display text-text-primary mb-4",children:"Ready to Feel Safe?"}),(0,Yy.jsx)("p",{className:"text-lg text-text-secondary mb-6 max-w-2xl mx-auto",children:"Join thousands of people who use Besties to stay safe. Download the app, add your besties, and start checking in. It's free, it's easy, and it works."}),(0,Yy.jsx)("button",{onClick:()=>r("/"),className:"btn btn-primary text-lg px-8 py-3",children:"Get Started Now \ud83d\udc9c"}),(0,Yy.jsx)("p",{className:"text-sm text-text-secondary mt-4",children:"No credit card required. Always free."})]})]}),a&&(0,Yy.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>o(!1),children:(0,Yy.jsxs)("div",{className:"card p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,Yy.jsx)("h3",{className:"text-2xl font-display text-text-primary mb-4",children:"Share Besties \ud83d\udc9c"}),(0,Yy.jsxs)("div",{className:"space-y-3",children:[(0,Yy.jsx)("button",{onClick:()=>c("twitter"),className:"w-full btn btn-secondary",children:"\ud83d\udc26 Share on Twitter"}),(0,Yy.jsx)("button",{onClick:()=>c("facebook"),className:"w-full btn btn-secondary",children:"\ud83d\udcd8 Share on Facebook"}),(0,Yy.jsx)("button",{onClick:()=>c("whatsapp"),className:"w-full btn btn-secondary",children:"\ud83d\udc9a Share on WhatsApp"}),(0,Yy.jsx)("button",{onClick:()=>c("copy"),className:"w-full btn btn-secondary",children:"\ud83d\udd17 Copy Link"})]}),(0,Yy.jsx)("button",{onClick:()=>o(!1),className:"w-full btn btn-primary mt-4",children:"Close"})]})})]})};class Lv extends t.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){qy.logError({type:"react_error",message:e.message,stack:e.stack,componentStack:t.componentStack}),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center p-4",children:(0,Yy.jsxs)("div",{className:"card max-w-2xl w-full p-8 text-center",children:[(0,Yy.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude14"}),(0,Yy.jsx)("h1",{className:"text-3xl font-display text-text-primary mb-4",children:"Oops! Something went wrong"}),(0,Yy.jsx)("p",{className:"text-text-secondary mb-6",children:"We're sorry for the inconvenience. The error has been logged and we'll fix it soon."}),!1,(0,Yy.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,Yy.jsx)("button",{onClick:this.handleReload,className:"btn btn-primary",children:"Reload Page"}),(0,Yy.jsx)("button",{onClick:()=>window.location.href="/",className:"btn btn-secondary",children:"Go Home"})]})]})}):this.props.children}}const Hv=Lv,Rv=e=>{let{children:n}=e;const{currentUser:r,userData:s,loading:i}=$y();return(0,t.useEffect)(()=>{console.group("\ud83d\udd12 AdminRoute Debug"),console.log("loading:",i),console.log("currentUser:",r),console.log("currentUser.uid:",null===r||void 0===r?void 0:r.uid),console.log("userData:",s),console.log("userData?.isAdmin:",null===s||void 0===s?void 0:s.isAdmin),console.log("Will redirect:",!(null!==s&&void 0!==s&&s.isAdmin)),console.groupEnd()},[i,r,s]),i?(console.log("\u23f3 AdminRoute: Still loading..."),(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Yy.jsx)("div",{className:"spinner"})})):null!==s&&void 0!==s&&s.isAdmin?(console.log("\u2705 AdminRoute: Access granted"),n):(console.error("\u274c AdminRoute: Access denied. userData?.isAdmin =",null===s||void 0===s?void 0:s.isAdmin),(0,Yy.jsx)(ge,{to:"/",replace:!0}))},Pv=()=>{const{pathname:e}=$();return(0,t.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null};function Mv(){const e=$();return(0,t.useEffect)(()=>{qy.trackPageView(e.pathname)},[e]),null}function Ov(e){let{user:t,children:n}=e;const r=$();if(!t){const e=new URLSearchParams(r.search).get("invite");return e?(0,Yy.jsx)(ge,{to:"/login?invite=".concat(e)}):(0,Yy.jsx)(ge,{to:"/login"})}return n}const Kv=function(){const[e,n]=(0,t.useState)(!0),[r,s]=(0,t.useState)(null);return(0,t.useEffect)(()=>{const e=Sy.onAuthStateChanged(e=>{s(e),n(!1)});return e},[]),e?(0,Yy.jsx)("div",{className:"min-h-screen bg-pattern flex items-center justify-center",children:(0,Yy.jsxs)("div",{className:"text-center",children:[(0,Yy.jsx)("div",{className:"spinner mb-4"}),(0,Yy.jsx)("h2",{className:"font-display text-2xl text-primary",children:"Besties"}),(0,Yy.jsx)("p",{className:"text-text-secondary",children:"Loading..."})]})}):(0,Yy.jsx)(Hv,{children:(0,Yy.jsx)(sw,{children:(0,Yy.jsx)(ew,{children:(0,Yy.jsxs)(je,{children:[(0,Yy.jsx)(Mv,{}),(0,Yy.jsx)(Pv,{}),(0,Yy.jsxs)("div",{className:"App",children:[(0,Yy.jsxs)(we,{children:[(0,Yy.jsx)(xe,{path:"/login",element:r?(0,Yy.jsx)(ge,{to:"/"}):(0,Yy.jsx)(Xy,{})}),(0,Yy.jsx)(xe,{path:"/privacy",element:(0,Yy.jsx)(Qv,{})}),(0,Yy.jsx)(xe,{path:"/terms",element:(0,Yy.jsx)(kv,{})}),(0,Yy.jsx)(xe,{path:"/alert/:alertId",element:(0,Yy.jsx)(Sv,{})}),(0,Yy.jsx)(xe,{path:"/subscription-success",element:r?(0,Yy.jsx)(Tv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/subscription-cancel",element:r?(0,Yy.jsx)(_v,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/onboarding",element:(0,Yy.jsx)(Ov,{user:r,children:(0,Yy.jsx)(tw,{})})}),(0,Yy.jsx)(xe,{path:"/",element:(0,Yy.jsx)(Ov,{user:r,children:(0,Yy.jsx)(Gw,{})})}),(0,Yy.jsx)(xe,{path:"/create",element:r?(0,Yy.jsx)(Yw,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/profile",element:r?(0,Yy.jsx)(iv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/user/:userId",element:r?(0,Yy.jsx)(Av,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/edit-profile",element:r?(0,Yy.jsx)(bv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/besties",element:r?(0,Yy.jsx)(uv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/settings",element:r?(0,Yy.jsx)(mv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/badges",element:r?(0,Yy.jsx)(pv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/history",element:r?(0,Yy.jsx)(Bv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/templates",element:r?(0,Yy.jsx)(Cv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/favorites",element:r?(0,Yy.jsx)(Ev,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/export-data",element:r?(0,Yy.jsx)(Uv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/social-feed",element:r?(0,Yy.jsx)(Fv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/about",element:r?(0,Yy.jsx)(Dv,{}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/dev-analytics",element:r?(0,Yy.jsx)(Rv,{children:(0,Yy.jsx)(Nv,{})}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/monitoring",element:r?(0,Yy.jsx)(Rv,{children:(0,Yy.jsx)(jv,{})}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"/error-dashboard",element:r?(0,Yy.jsx)(Rv,{children:(0,Yy.jsx)(Iv,{})}):(0,Yy.jsx)(ge,{to:"/login"})}),(0,Yy.jsx)(xe,{path:"*",element:(0,Yy.jsx)(ge,{to:"/"})})]}),(0,Yy.jsx)($t,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#2D3748",fontFamily:"Quicksand, sans-serif",fontWeight:"600"},success:{iconTheme:{primary:"#4CAF50",secondary:"#fff"}},error:{iconTheme:{primary:"#FF6B35",secondary:"#fff"}}}})]})]})})})})};s.createRoot(document.getElementById("root")).render((0,Yy.jsx)(t.StrictMode,{children:(0,Yy.jsx)(Kv,{})}))})()})();
//# sourceMappingURL=main.ee4c9534.js.map