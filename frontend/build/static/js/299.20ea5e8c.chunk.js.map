{"version":3,"file":"static/js/299.20ea5e8c.chunk.js","mappings":"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","sources":["config/features.js","pages/CreateCheckInPage.jsx"],"sourcesContent":["// Feature flags - enable/disable features without code changes\nexport const FEATURES = {\n  // Core (always on)\n  core: true,\n  auth: true,\n  checkIns: true,\n  besties: true,\n  \n  // MVP Launch (enabled)\n  templates: true,\n  quickButtons: true,\n  celebrationMessages: true,\n  gpsLocation: true,\n  manualLocation: true,\n  extendButtons: true,\n  \n  // Gamification (enabled)\n  bestieCircle: true,\n  badges: true,\n  shareableCards: true,\n  \n  // Media (enabled)\n  mediaUpload: true,\n  photoCapture: true,\n  \n  // Payments (enabled)\n  donations: true,\n  smsSubscription: true,\n  \n  // Future features (disabled for now)\n  emergency: false,\n  reversePin: false,\n  liveTracking: false,\n  videoRecording: false,\n  facebookLogin: false, // Enable when account is unblocked\n  phoneAuth: false // Not needed for MVP\n};\n\n// Helper to check if feature is enabled\nexport const isEnabled = (feature) => FEATURES[feature] === true;\n\nexport default FEATURES;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db, storage } from '../services/firebase';\nimport { collection, query, where, getDocs, addDoc, getDoc, doc, Timestamp, onSnapshot } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport toast from 'react-hot-toast';\nimport Header from '../components/Header';\nimport { isEnabled } from '../config/features';\nimport errorTracker from '../services/errorTracking';\nimport useOptimisticUpdate from '../hooks/useOptimisticUpdate';\nimport ProfileWithBubble from '../components/ProfileWithBubble';\n\n// Luxury girly skeleton loader for check-in creation\nconst CheckInLoader = () => {\n  const messages = [\n    \"Wrapping you in safety... Your besties will watch over you ğŸ’–\",\n    \"Building your protection... We've got your back, always âœ¨\",\n    \"Setting up your safety circle... You're never alone with us ğŸŒ¸\",\n    \"Preparing your safety net... Because you deserve to feel secure ğŸ’•\",\n  ];\n\n  // Pick one random message for this check-in\n  const [message] = useState(() => messages[Math.floor(Math.random() * messages.length)]);\n\n  return (\n    <>\n    <div className=\"min-h-screen bg-gradient-to-br from-rose-50 via-pink-50 via-purple-50 to-indigo-50 dark:from-purple-900/30 dark:via-pink-900/30 dark:to-indigo-900/30 flex items-center justify-center p-4 relative overflow-hidden\">\n      {/* Elegant floating elements */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        {[...Array(20)].map((_, i) => (\n          <div\n            key={i}\n            className=\"absolute animate-float-elegant\"\n            style={{\n              left: `${Math.random() * 100}%`,\n              top: `${Math.random() * 100}%`,\n              animationDelay: `${Math.random() * 4}s`,\n              animationDuration: `${6 + Math.random() * 4}s`,\n              opacity: 0.3 + Math.random() * 0.3,\n            }}\n          >\n            <span className=\"text-2xl\">\n              {['âœ¨', 'ğŸ’', 'ğŸŒ¸', 'ğŸ¦‹', 'ğŸ’«', 'ğŸŒº', 'ğŸµï¸', 'ğŸ€'][Math.floor(Math.random() * 8)]}\n            </span>\n          </div>\n        ))}\n      </div>\n\n      {/* Luxury content card */}\n      <div className=\"w-full max-w-lg text-center relative z-10\">\n        <div className=\"relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-[2rem] p-10 shadow-[0_20px_60px_rgba(0,0,0,0.1)] border border-white/50 dark:border-gray-600/50\">\n        {/* Message */}\n        <h2 className=\"font-display text-3xl text-gradient mb-4\">\n          Creating your check-in!\n        </h2>\n\n        <p className=\"text-xl text-text-secondary font-semibold mb-8 animate-fade-in\">\n          {message}\n        </p>\n\n        {/* Cute loading animation */}\n        <div className=\"flex justify-center gap-2 mb-8\">\n          {[0, 1, 2].map((i) => (\n            <div\n              key={i}\n              className=\"w-4 h-4 bg-gradient-primary rounded-full animate-bounce\"\n              style={{ animationDelay: `${i * 0.15}s` }}\n            ></div>\n          ))}\n        </div>\n\n          {/* Elegant loading animation */}\n          <div className=\"flex justify-center items-center gap-2 mb-8\">\n            {[0, 1, 2, 3, 4].map((i) => (\n              <div\n                key={i}\n                className=\"w-2 h-2 bg-gradient-to-r from-pink-400 to-purple-400 rounded-full animate-wave\"\n                style={{\n                  animationDelay: `${i * 0.15}s`,\n                  animationDuration: '1.5s'\n                }}\n              ></div>\n            ))}\n          </div>\n\n          {/* Silk ribbon progress bar */}\n          <div className=\"relative w-full h-2 bg-gradient-to-r from-pink-100 via-purple-100 to-fuchsia-100 dark:from-pink-900/50 dark:via-purple-900/50 dark:to-fuchsia-900/50 rounded-full overflow-hidden shadow-inner\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-pink-400 via-purple-400 via-fuchsia-400 to-pink-400 animate-silk-shimmer bg-[length:300%_100%] opacity-80\"></div>\n            <div className=\"absolute inset-0 bg-white/30 dark:bg-white/10 animate-silk-shine\"></div>\n          </div>\n\n          {/* Gentle reminder */}\n          <p className=\"text-xs text-gray-400 dark:text-gray-400 mt-6 italic\">\n            Taking care of you, always ğŸ’•\n          </p>\n        </div>\n      </div>\n    </div>\n\n      <style>{`\n        @keyframes float-elegant {\n          0%, 100% {\n            transform: translateY(0px) translateX(0px) rotate(0deg);\n            opacity: 0.3;\n          }\n          50% {\n            transform: translateY(-30px) translateX(10px) rotate(5deg);\n            opacity: 0.6;\n          }\n        }\n        @keyframes pulse-slow {\n          0%, 100% { transform: scale(1); opacity: 0.4; }\n          50% { transform: scale(1.2); opacity: 0.2; }\n        }\n        @keyframes pulse-gentle {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.05); }\n        }\n        @keyframes wave {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-8px); }\n        }\n        @keyframes silk-shimmer {\n          0% { background-position: 0% center; }\n          100% { background-position: 300% center; }\n        }\n        @keyframes silk-shine {\n          0% { transform: translateX(-100%) skewX(-15deg); opacity: 0; }\n          50% { opacity: 0.5; }\n          100% { transform: translateX(200%) skewX(-15deg); opacity: 0; }\n        }\n        @keyframes draw-check {\n          0% { stroke-dasharray: 0, 100; }\n          100% { stroke-dasharray: 100, 0; }\n        }\n        .animate-float-elegant {\n          animation: float-elegant 8s ease-in-out infinite;\n        }\n        .animate-pulse-slow {\n          animation: pulse-slow 3s ease-in-out infinite;\n        }\n        .animate-pulse-gentle {\n          animation: pulse-gentle 2s ease-in-out infinite;\n        }\n        .animate-wave {\n          animation: wave 1.5s ease-in-out infinite;\n        }\n        .animate-silk-shimmer {\n          animation: silk-shimmer 3s linear infinite;\n        }\n        .animate-silk-shine {\n          animation: silk-shine 3s ease-in-out infinite;\n        }\n        .animate-draw-check {\n          animation: draw-check 2s ease-in-out infinite;\n          stroke-dasharray: 100;\n        }\n      `}</style>\n    </>\n  );\n};\n\nconst CreateCheckInPage = () => {\n  const { currentUser, userData, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [locationInput, setLocationInput] = useState('');\n  const [duration, setDuration] = useState(30);\n  const [selectedBesties, setSelectedBesties] = useState([]);\n  const [notes, setNotes] = useState('');\n  const [meetingWith, setMeetingWith] = useState('');\n  const [photoFiles, setPhotoFiles] = useState([]);\n  const [photoPreviews, setPhotoPreviews] = useState([]);\n  const [besties, setBesties] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showingLoader, setShowingLoader] = useState(false);\n  const [autocompleteLoaded, setAutocompleteLoaded] = useState(false);\n  const { executeOptimistic } = useOptimisticUpdate();\n  const [gpsCoords, setGpsCoords] = useState(null); // Store GPS coordinates for map display\n  const [mapInitialized, setMapInitialized] = useState(false);\n  const [mapLocked, setMapLocked] = useState(true); // Map starts locked\n  const [expandedBestieShare, setExpandedBestieShare] = useState(null); // Track which bestie's share menu is open\n\n  // Map default center (San Francisco)\n  const mapCenter = { lat: 37.7749, lng: -122.4194 };\n\n  const locationInputRef = useRef(null);\n  const autocompleteRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n\n  // Get supportive, girl-best-friend message\n  const getSupportiveMessage = () => {\n    const messages = [\n      \"Let's make sure you're safe out there, babe! ğŸ’•\",\n      \"Your safety is everything to us! Let's set this up together ğŸ¤—\",\n      \"We've got your back, bestie! Let's get you protected âœ¨\",\n      \"Setting up your safety net - because you matter so much! ğŸ’œ\",\n      \"Let's make sure you can have fun worry-free, love! ğŸŒŸ\",\n      \"Your besties are here to watch over you! Let's do this ğŸ’ª\",\n      \"Keep yourself safe while living your best life! ğŸ¦‹\",\n      \"We're all about keeping our girl protected! Let's go ğŸ’\",\n    ];\n    // Use hour of day to get consistent but varied messages\n    const hour = new Date().getHours();\n    return messages[hour % messages.length];\n  };\n\n  // Auto-redirect to onboarding if user hasn't completed it\n  useEffect(() => {\n    if (authLoading) return;\n\n    if (userData && userData.onboardingCompleted === false) {\n      navigate('/onboarding');\n    }\n  }, [userData, authLoading, navigate]);\n\n\n  useEffect(() => {\n    errorTracker.trackFunnelStep('checkin', 'view_create_page');\n\n    // Load from quick button or template\n    if (location.state?.quickMinutes) {\n      errorTracker.trackFunnelStep('checkin', 'use_quick_button', { minutes: location.state.quickMinutes });\n      setDuration(location.state.quickMinutes);\n    }\n\n    // Load from new quick check-in types\n    if (location.state?.quickType) {\n      const { quickType, duration: quickDuration, rego, meetingWith: meetingWithParam } = location.state;\n\n      errorTracker.trackFunnelStep('checkin', `use_quick_${quickType}`, { duration: quickDuration });\n\n      if (quickDuration) {\n        setDuration(quickDuration);\n      }\n\n      // Handle rideshare - add rego to notes\n      if (quickType === 'rideshare' && rego) {\n        setNotes(`ğŸš— Rideshare - Vehicle: ${rego}`);\n      }\n\n      // Handle quick meet - set meeting with\n      if (quickType === 'quickmeet' && meetingWithParam) {\n        setMeetingWith(meetingWithParam);\n      }\n\n      // Handle walking - add note\n      if (quickType === 'walking') {\n        setNotes('ğŸš¶â€â™€ï¸ Walking alone');\n      }\n    }\n\n    if (location.state?.template) {\n      errorTracker.trackFunnelStep('checkin', 'use_template');\n      const template = location.state.template;\n      setLocationInput(template.location || '');\n      setDuration(template.duration || 30);\n      setSelectedBesties(template.bestieIds || []);\n      setNotes(template.notes || '');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.state]);\n\n  // Load besties when currentUser is available\n  useEffect(() => {\n    if (!currentUser || authLoading) return;\n\n    console.group('ğŸ” Setting up Bestie Circle Listener');\n\n    // Set up real-time listener for user's featuredCircle\n    const userDocRef = doc(db, 'users', currentUser.uid);\n    const unsubscribe = onSnapshot(userDocRef, async (userDoc) => {\n      try {\n        if (!userDoc.exists()) {\n          console.error('âŒ User document does not exist');\n          console.groupEnd();\n          setBesties([]);\n          return;\n        }\n\n        const userData = userDoc.data();\n        const featuredIds = userData.featuredCircle || [];\n\n        if (featuredIds.length === 0) {\n          console.warn('âš ï¸ featuredCircle is empty - no besties to load');\n          setBesties([]);\n          return;\n        }\n\n        // Get all accepted besties to find the ones in the circle\n        const [requesterQuery, recipientQuery] = await Promise.all([\n          getDocs(\n            query(\n              collection(db, 'besties'),\n              where('requesterId', '==', currentUser.uid),\n              where('status', '==', 'accepted')\n            )\n          ),\n          getDocs(\n            query(\n              collection(db, 'besties'),\n              where('recipientId', '==', currentUser.uid),\n              where('status', '==', 'accepted')\n            )\n          ),\n        ]);\n\n        const allBestiesList = [];\n\n        requesterQuery.forEach((doc) => {\n          const data = doc.data();\n          allBestiesList.push({\n            id: data.recipientId,\n            name: data.recipientName || 'Bestie',\n            phone: data.recipientPhone,\n            email: data.recipientEmail,\n          });\n        });\n\n        recipientQuery.forEach((doc) => {\n          const data = doc.data();\n          allBestiesList.push({\n            id: data.requesterId,\n            name: data.requesterName || 'Bestie',\n            phone: data.requesterPhone,\n            email: data.requesterEmail,\n          });\n        });\n\n        // Filter to only show besties in the featured circle\n        const circleBesties = allBestiesList.filter(b => featuredIds.includes(b.id));\n\n        // Fetch full user data for each bestie to get displayName, photoURL, and requestAttention\n        const bestiesWithUserData = await Promise.all(\n          circleBesties.map(async (bestie) => {\n            try {\n              const userDoc = await getDoc(doc(db, 'users', bestie.id));\n              if (userDoc.exists()) {\n                const userData = userDoc.data();\n                return {\n                  ...bestie,\n                  name: userData.displayName || bestie.name || bestie.email || 'Bestie',\n                  photoURL: userData.photoURL || null,\n                  email: userData.email || bestie.email,\n                  phone: userData.phoneNumber || bestie.phone,\n                  requestAttention: userData.requestAttention || null,\n                };\n              }\n              return bestie;\n            } catch (error) {\n              console.error(`Error fetching user data for ${bestie.id}:`, error);\n              return bestie;\n            }\n          })\n        );\n\n        setBesties(bestiesWithUserData);\n\n        // Auto-select only besties who have phone numbers (required for notifications)\n        if (!location.state?.template && bestiesWithUserData.length > 0) {\n          const bestiesWithPhone = bestiesWithUserData.filter(b => b.phone);\n          setSelectedBesties(bestiesWithPhone.map(b => b.id));\n\n          // Warn if some besties don't have phone numbers\n          const withoutPhone = bestiesWithUserData.filter(b => !b.phone);\n          if (withoutPhone.length > 0) {\n            console.warn('âš ï¸ Some circle besties missing phone numbers:', withoutPhone);\n            toast('Some besties need to add their phone number before they can be alerted', {\n              icon: 'â„¹ï¸',\n              duration: 4000\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error loading besties:', error);\n        toast.error('Failed to load besties');\n      }\n    }, (error) => {\n      console.error('Error in featuredCircle listener:', error);\n      toast.error('Failed to load besties');\n    });\n\n    console.groupEnd();\n\n    // Cleanup listener on unmount\n    return () => {\n      unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentUser, authLoading]);\n\n  // Load Google Places API\n  useEffect(() => {\n    const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n\n    if (!apiKey) {\n      console.warn('Google Maps API key not configured');\n      toast.error('Address autocomplete is not available. Please type your location manually.', {\n        duration: 5000,\n        id: 'maps-api-missing'\n      });\n      return;\n    }\n\n    // Check if Google Maps is already loaded\n    const checkGoogleLoaded = () => {\n      if (window.google && window.google.maps && window.google.maps.places) {\n        setAutocompleteLoaded(true);\n        return true;\n      }\n      return false;\n    };\n\n    // If already loaded, set state immediately\n    if (checkGoogleLoaded()) {\n      return;\n    }\n\n    // Check if script is already being loaded\n    const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\n    if (existingScript) {\n      // Script exists, wait for it to load with timeout\n      let attempts = 0;\n      const maxAttempts = 100; // 10 seconds timeout\n      const interval = setInterval(() => {\n        attempts++;\n        if (checkGoogleLoaded()) {\n          clearInterval(interval);\n        } else if (attempts >= maxAttempts) {\n          clearInterval(interval);\n          console.error('Google Maps API loading timeout');\n          toast.error('Map is taking too long to load. Please refresh the page.', {\n            duration: 5000,\n            id: 'maps-timeout'\n          });\n        }\n      }, 100);\n\n      return () => clearInterval(interval);\n    }\n\n    // Load script with loading=async\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&loading=async`;\n    script.async = true;\n    script.defer = true;\n\n    // Add timeout for script loading\n    const loadTimeout = setTimeout(() => {\n      if (!checkGoogleLoaded()) {\n        console.error('Google Maps API script load timeout');\n        toast.error('Map failed to load. Please check your internet connection and refresh.', {\n          duration: 5000,\n          id: 'maps-load-timeout'\n        });\n      }\n    }, 15000); // 15 second timeout\n\n    script.onload = () => {\n      clearTimeout(loadTimeout);\n      // Double check that the API is fully loaded\n      const checkInterval = setInterval(() => {\n        if (checkGoogleLoaded()) {\n          clearInterval(checkInterval);\n        }\n      }, 100);\n\n      // Set a short timeout to ensure API is ready\n      setTimeout(() => {\n        if (checkGoogleLoaded()) {\n          console.log('Google Maps API loaded successfully');\n        }\n      }, 500);\n    };\n\n    script.onerror = (error) => {\n      clearTimeout(loadTimeout);\n      console.error('Failed to load Google Maps API:', error);\n      toast.error('Failed to load address autocomplete. Please refresh the page.', {\n        duration: 5000,\n        id: 'maps-error'\n      });\n    };\n\n    document.head.appendChild(script);\n\n    // Cleanup timeout on unmount\n    return () => clearTimeout(loadTimeout);\n  }, []);\n\n  // Initialize Map when API is loaded\n  useEffect(() => {\n    if (!autocompleteLoaded || !mapRef.current || mapInitialized) return;\n\n    // Add extra validation that API is actually ready\n    if (!window.google || !window.google.maps || !window.google.maps.Map) {\n      console.warn('Google Maps API not fully ready yet, retrying...');\n      // Retry after a short delay\n      const retryTimeout = setTimeout(() => {\n        setAutocompleteLoaded(false);\n        setTimeout(() => setAutocompleteLoaded(true), 100);\n      }, 500);\n      return () => clearTimeout(retryTimeout);\n    }\n\n    try {\n      console.log('Initializing Google Map...');\n      // Initialize Google Map - locked by default\n      mapInstanceRef.current = new window.google.maps.Map(mapRef.current, {\n        center: mapCenter,\n        zoom: 12,\n        disableDefaultUI: true,\n        zoomControl: true,\n        mapTypeControl: false,\n        streetViewControl: false,\n        fullscreenControl: false,\n        draggable: false, // Start locked\n        gestureHandling: 'none', // Disable all gestures initially\n      });\n\n      // Handle double-tap to unlock/place pin\n      mapInstanceRef.current.addListener('dblclick', (event) => {\n        if (mapLocked) {\n          // Unlock the map\n          setMapLocked(false);\n          mapInstanceRef.current.setOptions({\n            draggable: true,\n            gestureHandling: 'greedy'\n          });\n          toast.success('ğŸ—ºï¸ Map unlocked! Drag to explore', { duration: 2000 });\n        } else {\n          // Place pin at MAP CENTER (where the fixed pin is displayed)\n          const mapCenter = mapInstanceRef.current.getCenter();\n          const coords = { lat: mapCenter.lat(), lng: mapCenter.lng() };\n\n          // Save the center coordinates\n          setGpsCoords(coords);\n\n          // Reverse geocode to get address from the center pin location\n          const geocoder = new window.google.maps.Geocoder();\n          geocoder.geocode({ location: coords }, (results, status) => {\n            if (status === 'OK' && results[0]) {\n              setLocationInput(results[0].formatted_address);\n            }\n          });\n\n          // Show success feedback\n          toast.success('ğŸ“ Pin location saved!', { duration: 1500 });\n        }\n      });\n\n      // Show reminder on single click when locked\n      mapInstanceRef.current.addListener('click', () => {\n        if (mapLocked) {\n          toast('ğŸ’¡ Double-tap to unlock map!', {\n            duration: 2000,\n            icon: 'ğŸ”’',\n            style: {\n              background: '#fef3c7',\n              color: '#92400e',\n              fontWeight: 600,\n            }\n          });\n        }\n      });\n\n      setMapInitialized(true);\n      console.log('Google Map initialized successfully');\n    } catch (error) {\n      console.error('Error initializing map:', error);\n      toast.error('Failed to initialize map. Please refresh the page.', {\n        duration: 4000,\n        id: 'map-init-error'\n      });\n    }\n    // mapCenter is a constant, not state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [autocompleteLoaded, mapInitialized, mapLocked]);\n\n  // Initialize Autocomplete when API is loaded\n  useEffect(() => {\n    if (!autocompleteLoaded || !locationInputRef.current) return;\n\n    // Add extra validation that Places API is actually ready\n    if (!window.google || !window.google.maps || !window.google.maps.places || !window.google.maps.places.Autocomplete) {\n      console.warn('Google Places API not fully ready yet, retrying...');\n      // Retry after a short delay\n      const retryTimeout = setTimeout(() => {\n        setAutocompleteLoaded(false);\n        setTimeout(() => setAutocompleteLoaded(true), 100);\n      }, 500);\n      return () => clearTimeout(retryTimeout);\n    }\n\n    try {\n      console.log('Initializing Google Places Autocomplete...');\n\n      // Initialize Google Places Autocomplete\n      autocompleteRef.current = new window.google.maps.places.Autocomplete(\n        locationInputRef.current,\n        {\n          types: ['establishment', 'geocode'], // Allow both businesses and addresses\n          fields: ['formatted_address', 'name', 'geometry'], // Request only needed fields\n        }\n      );\n\n      // Listen for place selection\n      autocompleteRef.current.addListener('place_changed', () => {\n        try {\n          const place = autocompleteRef.current.getPlace();\n\n          if (place.formatted_address) {\n            // Use business name if available, otherwise use formatted address\n            const displayLocation = place.name && place.name !== place.formatted_address\n              ? `${place.name}, ${place.formatted_address}`\n              : place.formatted_address;\n\n            setLocationInput(displayLocation);\n\n            // Center map on selected place (no marker needed - fixed pin in center)\n            if (place.geometry && place.geometry.location && mapInstanceRef.current) {\n              const location = place.geometry.location;\n              const coords = { lat: location.lat(), lng: location.lng() };\n              mapInstanceRef.current.setCenter(coords);\n              mapInstanceRef.current.setZoom(15);\n              setGpsCoords(coords); // Store coordinates\n            }\n          }\n        } catch (error) {\n          console.error('Error handling place selection:', error);\n          toast.error('Error selecting location. Please try again.', {\n            duration: 3000\n          });\n        }\n      });\n\n      console.log('Autocomplete initialized successfully');\n    } catch (error) {\n      console.error('Error initializing autocomplete:', error);\n      toast.error('Could not initialize address search. Please type your location manually.', {\n        duration: 4000,\n        id: 'autocomplete-init-error'\n      });\n    }\n\n    return () => {\n      // Cleanup autocomplete listeners\n      if (autocompleteRef.current) {\n        window.google.maps.event.clearInstanceListeners(autocompleteRef.current);\n      }\n    };\n  }, [autocompleteLoaded]);\n\n  // Update map when GPS coordinates are available\n  useEffect(() => {\n    if (!gpsCoords || !mapInstanceRef.current) return;\n\n    try {\n      // Center map on GPS location (fixed pin shows the location)\n      mapInstanceRef.current.setCenter(gpsCoords);\n      mapInstanceRef.current.setZoom(16);\n    } catch (error) {\n      console.error('Error updating map with GPS:', error);\n    }\n  }, [gpsCoords]);\n\n  const handleGetLocation = () => {\n    if (!isEnabled('gpsLocation')) {\n      toast.error('GPS location is not enabled');\n      return;\n    }\n\n    if (navigator.geolocation) {\n      setLoading(true);\n      toast.loading('Getting your location...', { id: 'gps-loading' });\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const lat = position.coords.latitude;\n          const lng = position.coords.longitude;\n          const gpsCoords = { lat, lng };\n\n          // Use reverse geocoding to get address from coordinates\n          const geocoder = new window.google.maps.Geocoder();\n          geocoder.geocode({ location: gpsCoords }, (results, status) => {\n            toast.dismiss('gps-loading');\n            setLoading(false);\n\n            if (status === 'OK' && results[0]) {\n              setLocationInput(results[0].formatted_address);\n              toast.success('Location captured!', { duration: 2000 });\n            } else {\n              // Fallback to coordinates if geocoding fails\n              setLocationInput(`GPS: ${lat.toFixed(4)}, ${lng.toFixed(4)}`);\n              toast.success('Location captured (coordinates only)', { duration: 2000 });\n            }\n\n            setGpsCoords(gpsCoords); // Store coordinates for map\n          });\n        },\n        (error) => {\n          toast.dismiss('gps-loading');\n          setLoading(false);\n          console.error('Geolocation error:', error);\n\n          // Provide specific error messages based on error code\n          if (error.code === 1) {\n            toast.error('Location permission denied. Please enable location access in your browser settings.', { duration: 6000 });\n          } else if (error.code === 2) {\n            toast.error('Location unavailable. Make sure location services are enabled on your device.', { duration: 5000 });\n          } else if (error.code === 3) {\n            toast.error('Location request timed out. Please try again or search for your location.', { duration: 5000 });\n          } else {\n            toast.error('Could not get location. Please search manually.', { duration: 4000 });\n          }\n        },\n        {\n          timeout: 30000, // 30 second timeout (increased from 10s)\n          enableHighAccuracy: true, // Better accuracy\n          maximumAge: 0 // Don't use cached location\n        }\n      );\n    } else {\n      toast.error('Geolocation not supported by your browser. Please search for your location manually.');\n    }\n  };\n\n  const toggleBestie = (bestieId) => {\n    if (selectedBesties.includes(bestieId)) {\n      setSelectedBesties(selectedBesties.filter(id => id !== bestieId));\n    } else {\n      if (selectedBesties.length >= 5) {\n        toast.error('Maximum 5 besties per check-in');\n        return;\n      }\n      setSelectedBesties([...selectedBesties, bestieId]);\n    }\n  };\n\n  const handleShareToAddPhone = (platform, bestieName) => {\n    const message = `Hey! You haven't added your phone number on Besties yet. I can't use you as my emergency contact until you do. Can you add it please? â¤ï¸\\n\\nDownload Besties: ${window.location.origin}`;\n    const encoded = encodeURIComponent(message);\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\n    switch (platform) {\n      case 'whatsapp':\n        if (isMobile) {\n          window.location.href = `whatsapp://send?text=${encoded}`;\n        } else {\n          window.open(`https://wa.me/?text=${encoded}`, '_blank');\n        }\n        break;\n      case 'messenger':\n        if (isMobile) {\n          window.location.href = `fb-messenger://share?link=${encodeURIComponent(window.location.origin)}`;\n          setTimeout(() => {\n            window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(window.location.origin)}&app_id=&redirect_uri=${encodeURIComponent(window.location.origin)}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(window.location.origin)}&app_id=&redirect_uri=${encodeURIComponent(window.location.origin)}`, '_blank', 'width=600,height=400');\n        }\n        break;\n      case 'instagram':\n        navigator.clipboard.writeText(message).then(() => {\n          toast.success('Message copied! Opening Instagram DMs...');\n          if (isMobile) {\n            window.location.href = 'instagram://direct/inbox';\n            setTimeout(() => {\n              window.open('https://www.instagram.com/direct/inbox/', '_blank');\n            }, 1500);\n          } else {\n            window.open('https://www.instagram.com/direct/inbox/', '_blank');\n          }\n        }).catch(() => {\n          toast.error('Failed to copy message');\n        });\n        break;\n      case 'sms':\n        window.location.href = `sms:?body=${encoded}`;\n        break;\n      case 'facebook':\n        const textEncoded = encodeURIComponent('Hey! Please add your phone number on Besties â¤ï¸');\n        const urlEncoded = encodeURIComponent(window.location.origin);\n        if (isMobile) {\n          window.location.href = `fb://profile`;\n          setTimeout(() => {\n            window.open(`https://www.facebook.com/sharer/sharer.php?u=${urlEncoded}&quote=${textEncoded}`, '_blank');\n          }, 1500);\n        } else {\n          window.open(`https://www.facebook.com/sharer/sharer.php?u=${urlEncoded}&quote=${textEncoded}`, '_blank', 'width=600,height=400');\n        }\n        break;\n      default:\n        break;\n    }\n\n    toast.success(`Opening ${platform}...`);\n    setExpandedBestieShare(null); // Close the menu\n  };\n\n  const handlePhotoChange = (e) => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n\n    // Check if adding these files would exceed the 5 photo limit\n    if (photoFiles.length + files.length > 5) {\n      toast.error('You can only upload up to 5 photos per check-in');\n      return;\n    }\n\n    // Validate each file\n    for (const file of files) {\n      if (file.size > 5 * 1024 * 1024) {\n        toast.error(`${file.name} is too large. Photos must be less than 5MB`);\n        return;\n      }\n\n      if (!file.type.startsWith('image/')) {\n        toast.error(`${file.name} is not an image file`);\n        return;\n      }\n    }\n\n    // Add files and previews\n    setPhotoFiles([...photoFiles, ...files]);\n    const newPreviews = files.map(file => URL.createObjectURL(file));\n    setPhotoPreviews([...photoPreviews, ...newPreviews]);\n\n    // Clear the file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const removePhoto = (index) => {\n    setPhotoFiles(photoFiles.filter((_, i) => i !== index));\n    setPhotoPreviews(photoPreviews.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (selectedBesties.length === 0) {\n      errorTracker.trackFunnelStep('checkin', 'error_no_besties');\n      toast.error('Please select at least one bestie from your circle to notify', { duration: 4000 });\n      return;\n    }\n\n    // Check if selected besties have phone numbers\n    const bestiesWithoutPhone = selectedBesties.filter(bestieId => {\n      const bestie = besties.find(b => b.id === bestieId);\n      return !bestie?.phone;\n    }).map(bestieId => {\n      const bestie = besties.find(b => b.id === bestieId);\n      return bestie?.name || 'Unknown';\n    });\n\n    if (bestiesWithoutPhone.length > 0) {\n      toast.error(`These besties need to add their phone number: ${bestiesWithoutPhone.join(', ')}`, {\n        duration: 6000\n      });\n      return;\n    }\n\n    if (!locationInput.trim()) {\n      errorTracker.trackFunnelStep('checkin', 'error_no_location');\n      toast.error('Please enter a location');\n      return;\n    }\n\n    if (duration < 15 || duration > 180) {\n      toast.error('Duration must be between 15 and 180 minutes');\n      return;\n    }\n\n    errorTracker.trackFunnelStep('checkin', 'submit_checkin', {\n      besties: selectedBesties.length,\n      duration,\n      hasNotes: !!notes,\n    });\n\n    // Show cute loader immediately\n    setShowingLoader(true);\n\n    // Use optimistic update - show loader and process in background\n    await executeOptimistic({\n      optimisticUpdate: () => {\n        // Loader is already showing - no immediate navigation\n      },\n      serverUpdate: async () => {\n        setLoading(true);\n        try {\n          const now = new Date();\n          const alertTime = new Date(now.getTime() + duration * 60 * 1000);\n\n          // Upload photos if provided\n          const photoURLs = [];\n          if (photoFiles.length > 0) {\n            for (let i = 0; i < photoFiles.length; i++) {\n              const file = photoFiles[i];\n              try {\n                const storageRef = ref(storage, `checkin-photos/${currentUser.uid}/${Date.now()}_${i}_${file.name}`);\n                await uploadBytes(storageRef, file);\n                const downloadURL = await getDownloadURL(storageRef);\n\n                // Only add to array if we got a valid URL\n                if (downloadURL) {\n                  photoURLs.push(downloadURL);\n                } else {\n                  console.warn(`Failed to get download URL for photo ${i}`);\n                }\n              } catch (photoError) {\n                console.error(`Error uploading photo ${i}:`, photoError);\n                // Continue with other photos even if one fails\n              }\n            }\n          }\n\n          // Get current privacy setting and circle snapshot\n          const privacyLevel = userData?.privacySettings?.checkInVisibility || 'all_besties';\n          const circleSnapshot = userData?.featuredCircle || [];\n\n          const checkInData = {\n            userId: currentUser.uid,\n            location: locationInput,\n            duration: duration,\n            alertTime: Timestamp.fromDate(alertTime),\n            bestieIds: selectedBesties,\n            notes: notes || null,\n            meetingWith: meetingWith || null,\n            photoURLs: photoURLs,\n            status: 'active',\n            privacyLevel: privacyLevel,\n            circleSnapshot: circleSnapshot,\n            createdAt: Timestamp.now(),\n            lastUpdate: Timestamp.now(),\n          };\n\n          // Add document and get reference\n          const docRef = await addDoc(collection(db, 'checkins'), checkInData);\n\n          // Verify the document was created by reading it back\n          const docSnap = await getDoc(doc(db, 'checkins', docRef.id));\n\n          if (!docSnap.exists()) {\n            throw new Error('Check-in was not saved properly. Please try again.');\n          }\n\n          // Verify critical data\n          const savedData = docSnap.data();\n          if (savedData.userId !== currentUser.uid || savedData.status !== 'active') {\n            throw new Error('Check-in data verification failed. Please try again.');\n          }\n\n          // Verify besties were saved correctly\n          if (!savedData.bestieIds || savedData.bestieIds.length !== selectedBesties.length) {\n            throw new Error('Bestie list was not saved correctly. Please try again.');\n          }\n\n          // Verify all bestie IDs match exactly\n          const bestiesMatch = selectedBesties.every(id => savedData.bestieIds.includes(id));\n          if (!bestiesMatch) {\n            throw new Error('Bestie list verification failed. Please try again.');\n          }\n\n          errorTracker.trackFunnelStep('checkin', 'complete_checkin');\n\n          // Navigate after successful creation\n          setTimeout(() => {\n            navigate('/');\n          }, 1000); // Small delay to show success message\n\n          return docRef;\n        } finally {\n          setLoading(false);\n        }\n      },\n      rollback: () => {\n        // Hide loader and stay on page on error\n        setShowingLoader(false);\n      },\n      onError: (error) => {\n        console.error('Error creating check-in:', error);\n        errorTracker.logCustomError('Failed to create check-in', { error: error.message });\n        setShowingLoader(false);\n      },\n      successMessage: 'Check-in created! Stay safe! ğŸ’œ',\n      errorMessage: 'Failed to create check-in. Please try creating it again.',\n      showLoadingToast: false, // We're showing the loader instead\n      loadingMessage: 'Creating your check-in...'\n    });\n  };\n\n  // Show loader while creating check-in\n  if (showingLoader) {\n    return <CheckInLoader />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-pattern\">\n      <Header />\n\n      <div className=\"max-w-2xl mx-auto p-4 pb-20\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-display text-text-primary mb-2\">Create Check-In</h1>\n          <p className=\"text-text-secondary\">{getSupportiveMessage()}</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Location with Map */}\n          <div className=\"card p-0 overflow-hidden\">\n            <label className=\"block text-lg font-display text-text-primary p-6 pb-3\">\n              Where are you going? ğŸ“\n            </label>\n\n            {/* Map with overlays */}\n            <div className=\"relative\">\n              {/* Map Container */}\n              <div\n                ref={mapRef}\n                className=\"w-full h-80\"\n                style={{ minHeight: '320px' }}\n              ></div>\n\n              {/* Search bar overlay */}\n              <div className=\"absolute top-3 left-3 right-3 z-10\">\n                <input\n                  ref={locationInputRef}\n                  type=\"text\"\n                  value={locationInput}\n                  onChange={(e) => setLocationInput(e.target.value)}\n                  className=\"input w-full shadow-lg\"\n                  placeholder=\"Search for a place...\"\n                  required\n                  autoComplete=\"off\"\n                />\n              </div>\n\n              {/* Fixed center pin - doesn't move, map moves underneath */}\n              <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-full z-10 pointer-events-none\">\n                <svg\n                  className=\"w-12 h-12 text-primary drop-shadow-lg\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/>\n                </svg>\n              </div>\n\n              {/* Locate me button overlay - positioned below search bar */}\n              {isEnabled('gpsLocation') && (\n                <button\n                  type=\"button\"\n                  onClick={handleGetLocation}\n                  className=\"absolute right-3 top-20 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 p-3 rounded-lg shadow-lg border border-gray-300 dark:border-gray-600 transition-all z-10\"\n                  disabled={loading}\n                  title=\"Use my current location\"\n                >\n                  {loading ? (\n                    <div className=\"w-5 h-5 spinner-small\"></div>\n                  ) : (\n                    <svg\n                      className=\"w-5 h-5\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle cx=\"12\" cy=\"12\" r=\"3\" strokeWidth={2} />\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2v4m0 12v4M2 12h4m12 0h4\" />\n                    </svg>\n                  )}\n                </button>\n              )}\n            </div>\n\n            <p className=\"text-xs text-text-secondary p-3 px-6\">\n              ğŸ’¡ <strong className=\"text-primary\">Double-tap to unlock the map,</strong> then drag to move it and double-tap again to save the pin location, or search for a place, or click the crosshair to use GPS\n            </p>\n          </div>\n\n          {/* Who Meeting & Duration Combined */}\n          <div className=\"card p-6\">\n            {/* Who You're Meeting */}\n            <div className=\"mb-6\">\n              <label className=\"block text-lg font-display text-text-primary mb-3\">\n                Who are you meeting? ğŸ‘¥ (Optional)\n              </label>\n              <input\n                type=\"text\"\n                value={meetingWith}\n                onChange={(e) => setMeetingWith(e.target.value)}\n                className=\"input\"\n                placeholder=\"e.g., Alex, Sarah, John...\"\n              />\n            </div>\n\n            {/* Duration */}\n            <div>\n              <label className=\"block text-lg font-display text-text-primary mb-3\">\n                How long? â°\n              </label>\n\n              <div className=\"grid grid-cols-4 gap-3 mb-4\">\n                {[15, 30, 60, 120].map((mins) => (\n                  <button\n                    key={mins}\n                    type=\"button\"\n                    onClick={() => setDuration(mins)}\n                    className={`py-3 rounded-xl font-semibold transition-all ${\n                      duration === mins\n                        ? 'bg-gradient-primary text-white shadow-lg'\n                        : 'bg-gray-100 dark:bg-gray-700 text-text-primary hover:bg-gray-200 dark:hover:bg-gray-600'\n                    }`}\n                  >\n                    {mins < 60 ? `${mins}m` : `${mins / 60}h`}\n                  </button>\n                ))}\n              </div>\n\n              <input\n                type=\"range\"\n                min=\"15\"\n                max=\"180\"\n                step=\"15\"\n                value={duration}\n                onChange={(e) => setDuration(parseInt(e.target.value))}\n                className=\"w-full\"\n              />\n              <div className=\"text-center mt-3\">\n                <div className=\"text-sm text-text-secondary\">\n                  {duration} minutes\n                </div>\n                <div className=\"text-sm font-semibold text-primary mt-1\">\n                  Alert at: {new Date(Date.now() + duration * 60 * 1000).toLocaleTimeString('en-US', {\n                    hour: 'numeric',\n                    minute: '2-digit',\n                    hour12: true\n                  })}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Select Besties */}\n          <div className=\"card p-6\">\n            <label className=\"block text-lg font-display text-text-primary mb-3\">\n              Who should we alert? ğŸ’œ\n            </label>\n\n            {besties.length === 0 ? (\n              <div className=\"text-center py-8 bg-orange-50 dark:bg-orange-900/30 border-2 border-orange-200 dark:border-orange-800 rounded-xl\">\n                <p className=\"font-semibold text-text-primary mb-2\">âš ï¸ No besties in your circle</p>\n                <p className=\"text-text-secondary text-sm mb-4\">Add besties to your bestie circle on the home page to create check-ins</p>\n                <button\n                  type=\"button\"\n                  onClick={() => navigate('/')}\n                  className=\"btn btn-primary\"\n                >\n                  Go to Home Page\n                </button>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {besties.map((bestie) => {\n                  const selectionIndex = selectedBesties.indexOf(bestie.id);\n                  const isSelected = selectionIndex !== -1;\n                  const selectionNumber = isSelected ? selectionIndex + 1 : null;\n                  const isShareExpanded = expandedBestieShare === bestie.id;\n\n                  return (\n                    <div key={bestie.id} className=\"w-full\">\n                      <button\n                        type=\"button\"\n                        onClick={() => bestie.phone && toggleBestie(bestie.id)}\n                        disabled={!bestie.phone}\n                        className={`w-full p-4 rounded-xl border-2 transition-all text-left ${\n                          !bestie.phone\n                            ? 'border-orange-300 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/30'\n                            : isSelected\n                            ? 'border-primary bg-primary/5'\n                            : 'border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-3 flex-1\">\n                            <ProfileWithBubble\n                              photoURL={bestie.photoURL}\n                              name={bestie.name || bestie.email || 'Unknown'}\n                              requestAttention={bestie.requestAttention}\n                              size=\"md\"\n                              showBubble={true}\n                            />\n                            <div className=\"flex-1\">\n                              <div className=\"font-semibold text-text-primary\">{bestie.name || bestie.email || 'Unknown'}</div>\n                              <div className=\"text-sm text-text-secondary\">\n                                {bestie.phone ? bestie.email || bestie.phone : 'âš ï¸ No phone number'}\n                              </div>\n                            </div>\n                          </div>\n                          {bestie.phone ? (\n                            isSelected && (\n                              <div className=\"bg-primary text-white px-3 py-1 rounded-full text-sm font-bold\">\n                                {selectionNumber}/5\n                              </div>\n                            )\n                          ) : (\n                            <button\n                              type=\"button\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                setExpandedBestieShare(isShareExpanded ? null : bestie.id);\n                              }}\n                              className=\"btn btn-sm btn-primary\"\n                            >\n                              Ask to Add\n                            </button>\n                          )}\n                        </div>\n                      </button>\n\n                      {/* Social Share Menu for No Phone */}\n                      {!bestie.phone && isShareExpanded && (\n                        <div className=\"mt-2 p-4 bg-purple-50 dark:bg-purple-900/30 border-2 border-purple-200 dark:border-purple-800 rounded-xl\">\n                          <p className=\"text-sm font-semibold text-purple-900 dark:text-purple-200 mb-3\">\n                            ğŸ“± Ask {bestie.name} to add their phone number\n                          </p>\n                          <div className=\"grid grid-cols-3 gap-2\">\n                            <button\n                              type=\"button\"\n                              onClick={() => handleShareToAddPhone('whatsapp', bestie.name)}\n                              className=\"flex flex-col items-center gap-1 p-3 rounded-lg bg-[#25D366] hover:bg-[#20BA5A] text-white transition-colors\"\n                            >\n                              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\"/>\n                              </svg>\n                              <span className=\"text-xs\">WhatsApp</span>\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => handleShareToAddPhone('messenger', bestie.name)}\n                              className=\"flex flex-col items-center gap-1 p-3 rounded-lg bg-[#0084FF] hover:bg-[#0073E6] text-white transition-colors\"\n                            >\n                              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8l3.131 3.259L19.752 8l-6.561 6.963z\"/>\n                              </svg>\n                              <span className=\"text-xs\">Messenger</span>\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => handleShareToAddPhone('instagram', bestie.name)}\n                              className=\"flex flex-col items-center gap-1 p-3 rounded-lg bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] hover:opacity-90 text-white transition-opacity\"\n                            >\n                              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n                              </svg>\n                              <span className=\"text-xs\">Instagram</span>\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => handleShareToAddPhone('sms', bestie.name)}\n                              className=\"flex flex-col items-center gap-1 p-3 rounded-lg bg-success hover:bg-green-600 text-white transition-colors\"\n                            >\n                              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n                              </svg>\n                              <span className=\"text-xs\">SMS</span>\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => handleShareToAddPhone('facebook', bestie.name)}\n                              className=\"flex flex-col items-center gap-1 p-3 rounded-lg bg-[#1877F2] hover:bg-[#166FE5] text-white transition-colors\"\n                            >\n                              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n                              </svg>\n                              <span className=\"text-xs\">Facebook</span>\n                            </button>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n\n            <div className=\"mt-3 text-sm text-primary font-semibold\">\n              Selected: {selectedBesties.length}/5\n            </div>\n          </div>\n\n          {/* Notes and Photos Combined */}\n          <div className=\"card p-6\">\n            <label className=\"block text-lg font-display text-text-primary mb-3\">\n              Notes & Photos (Optional) ğŸ“ğŸ“¸\n            </label>\n\n            {/* Notes */}\n            <textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              className=\"input min-h-[100px] resize-none mb-4\"\n              placeholder=\"Any additional info for your besties...\"\n            />\n\n            {/* Photos */}\n            <div className=\"text-sm font-semibold text-text-primary mb-2\">\n              Add Photos ({photoFiles.length}/5)\n            </div>\n\n            {/* Photo grid */}\n            {photoPreviews.length > 0 && (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3\">\n                {photoPreviews.map((preview, index) => (\n                  <div key={index} className=\"relative aspect-square\">\n                    <img\n                      src={preview}\n                      alt={`Preview ${index + 1}`}\n                      className=\"w-full h-full rounded-xl object-cover\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => removePhoto(index)}\n                      className=\"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-full text-sm font-bold hover:bg-red-600 flex items-center justify-center\"\n                    >\n                      âœ•\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Add more photos button */}\n            {photoFiles.length < 5 && (\n              <div>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handlePhotoChange}\n                  className=\"hidden\"\n                  id=\"photo-input\"\n                />\n                <label\n                  htmlFor=\"photo-input\"\n                  className=\"block w-full p-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors\"\n                >\n                  <div className=\"text-4xl mb-2\">ğŸ“·</div>\n                  <div className=\"text-sm text-text-secondary\">\n                    Click to add photos (up to 5, max 5MB each)\n                  </div>\n                </label>\n              </div>\n            )}\n          </div>\n\n          {/* Submit */}\n          <button\n            type=\"submit\"\n            disabled={loading || selectedBesties.length === 0}\n            className=\"w-full btn btn-primary text-lg py-4\"\n          >\n            {loading ? 'Creating...' : 'ğŸ›¡ï¸ Start Check-In'}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateCheckInPage;\n"],"names":["FEATURES","core","auth","checkIns","besties","templates","quickButtons","celebrationMessages","gpsLocation","manualLocation","extendButtons","bestieCircle","badges","shareableCards","mediaUpload","photoCapture","donations","smsSubscription","emergency","reversePin","liveTracking","videoRecording","facebookLogin","phoneAuth","isEnabled","feature","CheckInLoader","messages","message","useState","Math","floor","random","length","_jsxs","_Fragment","children","className","_jsx","Array","map","_","i","style","left","concat","top","animationDelay","animationDuration","opacity","CreateCheckInPage","currentUser","userData","loading","authLoading","useAuth","navigate","useNavigate","location","useLocation","locationInput","setLocationInput","duration","setDuration","selectedBesties","setSelectedBesties","notes","setNotes","meetingWith","setMeetingWith","photoFiles","setPhotoFiles","photoPreviews","setPhotoPreviews","setBesties","setLoading","showingLoader","setShowingLoader","autocompleteLoaded","setAutocompleteLoaded","executeOptimistic","useOptimisticUpdate","gpsCoords","setGpsCoords","mapInitialized","setMapInitialized","mapLocked","setMapLocked","expandedBestieShare","setExpandedBestieShare","mapCenter","lat","lng","locationInputRef","useRef","autocompleteRef","fileInputRef","mapRef","mapInstanceRef","useEffect","onboardingCompleted","_location$state","_location$state2","_location$state3","errorTracker","trackFunnelStep","state","quickMinutes","minutes","quickType","quickDuration","rego","meetingWithParam","template","bestieIds","console","group","userDocRef","doc","db","uid","unsubscribe","onSnapshot","async","_location$state4","userDoc","exists","error","groupEnd","featuredIds","data","featuredCircle","warn","requesterQuery","recipientQuery","Promise","all","getDocs","query","collection","where","allBestiesList","forEach","push","id","recipientId","name","recipientName","phone","recipientPhone","email","recipientEmail","requesterId","requesterName","requesterPhone","requesterEmail","circleBesties","filter","b","includes","bestiesWithUserData","getDoc","bestie","_objectSpread","displayName","photoURL","phoneNumber","requestAttention","bestiesWithPhone","withoutPhone","toast","icon","apiKey","process","REACT_APP_GOOGLE_MAPS_API_KEY","checkGoogleLoaded","window","google","maps","places","document","querySelector","attempts","maxAttempts","interval","setInterval","clearInterval","script","createElement","src","defer","loadTimeout","setTimeout","onload","clearTimeout","checkInterval","log","onerror","head","appendChild","current","Map","retryTimeout","center","zoom","disableDefaultUI","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","draggable","gestureHandling","addListener","event","setOptions","success","getCenter","coords","Geocoder","geocode","results","status","formatted_address","background","color","fontWeight","Autocomplete","types","fields","place","getPlace","displayLocation","geometry","setCenter","setZoom","clearInstanceListeners","handleShareToAddPhone","platform","bestieName","origin","encoded","encodeURIComponent","isMobile","test","navigator","userAgent","href","open","clipboard","writeText","then","catch","textEncoded","urlEncoded","Header","getSupportiveMessage","Date","getHours","onSubmit","e","preventDefault","bestiesWithoutPhone","bestieId","find","trim","hasNotes","optimisticUpdate","serverUpdate","_userData$privacySett","now","alertTime","getTime","photoURLs","file","storageRef","ref","storage","uploadBytes","downloadURL","getDownloadURL","photoError","privacyLevel","privacySettings","checkInVisibility","circleSnapshot","checkInData","userId","Timestamp","fromDate","createdAt","lastUpdate","docRef","addDoc","docSnap","Error","savedData","every","rollback","onError","logCustomError","successMessage","errorMessage","showLoadingToast","loadingMessage","join","minHeight","type","value","onChange","target","placeholder","required","autoComplete","fill","viewBox","d","onClick","handleGetLocation","geolocation","getCurrentPosition","position","latitude","longitude","dismiss","toFixed","code","timeout","enableHighAccuracy","maximumAge","disabled","title","stroke","cx","cy","r","strokeWidth","strokeLinecap","strokeLinejoin","mins","min","max","step","parseInt","toLocaleTimeString","hour","minute","hour12","selectionIndex","indexOf","isSelected","selectionNumber","isShareExpanded","toggleBestie","ProfileWithBubble","size","showBubble","stopPropagation","preview","index","alt","removePhoto","accept","multiple","files","from","startsWith","newPreviews","URL","createObjectURL","htmlFor"],"sourceRoot":""}